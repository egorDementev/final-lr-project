(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["sports-info"],{1873:function(t,e,i){"use strict";i.r(e),i.d(e,{SportsInfo:function(){return it},SportsInfoStyles:function(){return ct},SportsInfoTemplate:function(){return dt},ToolingInfo:function(){return lt}});var n=i(33940),r=i(79545),o=i(76611),s=i(80501),a=i(62713),p=i(16754),d=i(15546),c=i(13831),l=i(51293),h=i(78254),u=i(4589),g=i(59967),m=i(39157),S=i(13334),f=i(54297),y=i(857),w=i(86522),T=i(21930),C=i(20009),b=i(88826),v=i(7476);const I=t=>!t||!t.trim(),k=(t,e)=>!(!t||!e)&&(t.id&&t.id===e.id||t.yId&&t.yId===e.yId),M=t=>{const e=(0,m.Yq)().UserId,i=new URL(t);return i?(i.searchParams.set("flights","prg-1sw-spptw"),i.searchParams.set("userGuid",e.split("-")[1]),e.startsWith("m-")?i.searchParams.set("userGuidType","MUID"):i.searchParams.set("userGuidType","ANID"),i.toString()):t},D=(t,e=performance.now())=>{const i=!0===S.Al.IsPrerender?e-(0,T.TZ)(C.DB):e;(0,T.su)(t,i)},x=t=>!!t&&"cricket"===t.toLowerCase(),E=t=>t.get(u.pX.sportsConfig),P=(t,e=864e5)=>{const i=new Date,n=new Date(t),r=i.getTime()-n.getTime();return Math.floor(r/e)},H=t=>t.Model?t.Model.Tabs.map((t=>({id:t.primaryEntityId,yId:t.yId,name:t.primaryEntityName,displayText:t.primaryEntityName,imageId:t.primaryEntityImage,hasExplicitInterest:t.hasExplicitInterest,isLive:t.isLive,tabContentUrl:t.tabContentUrl,tabContentType:t.tabContentType,tabContentReason:t.tabContentReason,clickThroughUrl:t.clickThroughUrl,webSearchUrl:t.clickThroughUrl?(0,y.Qc)((0,w.Z3)(t.clickThroughUrl)):"",type:t.primaryEntityType}))):[],F=["TeamVsTeamExploration","CricketExploration","TennisExploration"],R=t=>Boolean(t&&F.includes(t)),V=(t,e)=>{(0,b.H)(v.JaT,t,`market:${(0,m.Yq)().CurrentMarket}`,e)};i(88793);var N=i(54162),X=i(55524),B=i(62512),$=i(85663);class A{constructor(t,e){this.getCurrentState=()=>this.state,this.toggleInterestManager=t=>{this.state.set(u.pX.toggleInterestManager,t)},this.onSportsMatchupDataReady=t=>{this.saveEntityData(t)},this.updateTabCurrentPageIndex=t=>{const e=this.state.get(u.pX.sportsData),i=e.Model?.Tabs.length||1;let n=this.state.get(u.pX.tabCurrentPageIndex)||1;n=t?n<i?n+1:1:n>1?n-1:i,this.state.set(u.pX.tabCurrentPageIndex,n)},this.updateCurrentTab=async t=>{const e=this.state.get(u.pX.currentTabEntityId),n=E(this.state);if(t.id&&e!==t.id){const{SportsDataService:e}=await i.e("sports-data-service").then(i.bind(i,4557));if(n.navClickWithFollow&&!this.isSportsFollowed(t.id))return await this.followSport(t,!0),e.updateHistory(t.id,[s.R0.dropdownHistory]),t;await this.navigatetoNewTab(t)}this.state.set(u.pX.toggleInterestManager,!1)},this.updateCardSize=t=>{this.state.set(u.pX.cardSize,t),this.setCardSizeTmplTelemetry()},this.updatePreviewTypeInfo=t=>{this.state.set(u.pX.previewTypeInfo,t)},this.updateActionHistory=async(t,e,n)=>{const{SportsDataService:r}=await i.e("sports-data-service").then(i.bind(i,4557));try{await r.updateHistory(t,[e]),n===s.k$.UsabilityFeedbackToast&&(t=>{const e=(0,f.$o)().getObject("isShowCFStatus")||{};e[t]=(new Date).toString(),(0,f.$o)().setObject("isShowCFStatus",e)})(this.experienceType)}catch{(0,b.H)(v.TmC,`updating action history: ${e} failed`,`market:${(0,m.Yq)().CurrentMarket}, entityId:${t}, response:updating action histories: ${e} failed`)}},this.updateFollowedSports=async(t,e,i)=>{const n=this.state.get(u.pX.followedSports);e&&!0!==n.get(t.id)?await this.followSport(t,!1,i&&this.state.get(u.pX.isExplorationCard)):e||!0!==n.get(t.id)||await this.unfollowSport(t)},this.getUpdatedSportsInterestOptions=async t=>{let e=[];if(t&&t.length>0){const{SportsDataService:n}=await i.e("sports-data-service").then(i.bind(i,4557)),r=(0,B.WU)(this.state.get(u.pX.sportsConfig).fetchSearchSuggestionUrl,t,(0,m.Yq)().CurrentMarket||"en-us");e=await n.fetchSuggestions(t,r,this.state.get(u.pX.sportsConfig).ocid)}0===e.length&&(e=this.state.get(u.pX.allRecommendations).slice(0,8)),this.state.set(u.pX.searchSuggestions,e)},this.updateRootTelemetryObject=t=>{this.state.set(u.pX.rootTelemetryObject,t)},this.updateTelemetryExt=t=>{this.state.set(u.pX.telemetryExt,t)},this.updateIsPinned=t=>{this.state.set(u.pX.isPinned,t)},this.hideSports=async(t,e)=>{const i=I(t)?await this.handleHideSportsCard(e):await this.handleSportsNotInterested(e),n=this.state.get(u.pX.dislikedEntities);return n?.add(t),this.state.set(u.pX.dislikedEntities,n),i},this.getUpdatedSportsViewByFeedData=async t=>{if(!await this.setSportsMatchupDataFromFeedData(t.feedDataParsed))return this.state.get(u.pX.sportsSDCardView);const{cardSize:e}=t,i=this.getCurrentTab();this.state.set(u.pX.currentTabEntityId,i?.primaryEntityId),this.state.set(u.pX.tabCurrentPageIndex,1),this.updateCardSize(e);const n=await this.generateSDContainerView(t,!1);return this.state.set(u.pX.sportsSDCardView,n),n},this.getUpdatedSportsCardView=async t=>{let e=this.state.get(u.pX.sportsFeedDataParsed);e=await this.getV2SportsMatchupData(e),this.onSportsMatchupDataReady(e);const i=await this.generateSDContainerView(t,!1);return this.state.set(u.pX.sportsSDCardView,i),Promise.resolve(i)},this.getInitialSportsCardView=async t=>{const{config:e,strings:i,cardSize:n,rootTelemetryObject:r,telemetryExt:o,wpoMetadata:s,feedDataParsed:a}=t;this.state.set(u.pX.sportsConfig,e),this.state.set(u.pX.sportsStrings,i),this.state.set(u.pX.wpoMetadata,s),this.updateCardSize(n),this.updateRootTelemetryObject(r),this.updateTelemetryExt(o);await this.checkAndInitForPreview(t)||await this.setSportsMatchupDataFromFeedData(a);const p=this.getCurrentTab(),d=p?.primaryEntityId||"";this.state.set(u.pX.currentTabEntityId,d),this.setTmplTelemetry();const c=await this.generateSDContainerView(t,!0);this.state.set(u.pX.sportsSDCardView,c);return this.state.get(u.pX.isInit)&&this.updateIsInit(!1),Promise.resolve(c)},this.getInitialSportsSpanView=async(t,e,i,n)=>{const r=this.state.get(u.pX.entityViewMap),s=o.Xw.safeExecute((()=>r?.get(n)),void 0);if(s)return Promise.resolve(s);const{config:a,strings:p}=i;this.state.set(u.pX.sportsConfig,a),this.state.set(u.pX.sportsStrings,p),this.updateRootTelemetryObject(e);const d=this.parseFeedData(t);if(!d)return;const c="SportsV2"===d.Model?.DataType;if(this.state.set(u.pX.isV2Data,c),c)this.state.set(u.pX.sportsFeedDataParsed,d);else{const t=await this.mapSportsMatchupData(d);if(!t)return;this.state.set(u.pX.sportsFeedDataParsed,t)}this.setSpanTmplTelemetry();const l=await this.generateSpanView(i,n);return r.set(n,l),Promise.resolve(l)},this.isSportsSaved=t=>void 0!==this.state.get(u.pX.entityDataMap).get(t),this.isSportsFollowed=t=>!(0,$.isNullOrUndefined)(this.state.get(u.pX.followedSports)?.get(t)),this.getEntityIdKey=t=>{const e=this.state.get(u.pX.currentSpotlightEntityId);return t===e&&e?`Spotlight_${t}`:t},this.navigatetoNewTab=async t=>{const e=this.state.get(u.pX.currentTabEntityId),i=this.state.get(u.pX.entityDataMap);let n=this.state.get(u.pX.sportsData);const r=i.get(this.getEntityIdKey(t.id)),o=!R(r?.Model?.Tabs?.[0]?.tabType)||this.state.get(u.pX.isExplorationCard);if(r&&o)n=r;else{const r=i.get(this.getEntityIdKey(e))||{},o=t.type===u.fs.Team?"Recommendation_Team":"Recommendation_League",s={version:"3",tabContentType:t.tabContentType||o,tabContentReason:t.tabContentReason||"Popular"};n=await this.fetchSportsMatchData(t.id,r,s)}this.state.set(u.pX.currentTabEntityId,t.id),this.state.set(u.pX.tabCurrentPageIndex,1),this.state.set(u.pX.sportsFeedDataParsed,n),this.onSportsMatchupDataReady(n),this.setTmplTelemetryAfterTabUpdate(n,t.id)},this.setSportsMatchupData=async t=>{this.state.set(u.pX.sportsFeedDataParsed,t),await this.updateSportsMatchupData(t)},this.parseFeedData=t=>o.Xw.safeExecute((()=>JSON.parse(t)),void 0,v.JaT,"SportsInfo - error parsing feed data"),this.mapSportsMatchupData=async t=>await o.Xw.safeExecuteAsync((async()=>{const{SportsDataMapper:e}=await i.e("sports-data-service").then(i.bind(i,4557));return e.transformSportsMatchDataWithTrans(t)}),void 0,v.JaT,"SportsInfo - error mapping feed data / importing mapper"),this.setSportsMatchupDataFromFeedData=async t=>{const e=this.state.get(u.pX.feedDataTimestamp),{ResponseCreationTime:i,OsCreationTime:n}=t,r=Number(new Date(i||n||""));return!(e&&r<=e)&&(this.state.set(u.pX.isExplorationCard,R(t.Model?.Tabs?.[0]?.tabType)),this.state.set(u.pX.feedDataTimestamp,r),this.state.set(u.pX.followedSports,void 0),t.isFeedData=!0,await this.setSportsMatchupData(t),!0)},this.generateSDContainerView=async(t,e)=>await o.Xw.safeExecuteAsync((async()=>{const i=N.hY.getInstance(this.experienceType,t);if(!i)throw new Error("Could not get SportsDataTransformer instance");e&&i.updateContext(t);return await i.generateView(this.state,"sports-sd-card")}),void 0,v.Qc7,"SportsInfo - generate SD card container view failed"),this.generateSpanView=async(t,e)=>await o.Xw.safeExecuteAsync((async()=>{const i=N.gF.getInstance(`${this.experienceType}_${e}`,t);if(!i)throw new Error("Could not get SportsDataTransformer instance");return await i.generateView(this.state,"sports-info-span")}),void 0,v.Qc7,"SportsInfoSpan - generate span view failed"),this.saveEntityData=t=>{const e=t.Model?.Tabs?.[0]?.primaryEntityId;if(!e)return;let i=this.state.get(u.pX.entityDataMap);i||(i=new Map),i.set(e,t),this.state.set(u.pX.entityDataMap,i),this.state.set(u.pX.sportsData,t)},this.addRecommendationsFromSkinnyData=t=>{const e=[],i=this.state.get(u.pX.followedSports)||new Map,n=this.state.get(u.pX.sportsSuggestIDMap)||new Map;t&&t.sportsSkinnyData&&t.sportsSkinnyData.length>0&&t.sportsSkinnyData.forEach((t=>{t.id&&n.set(t.id,t),t&&(e.push({...t}),t.hasExplicitInterest&&t.id&&!i.has(t.id)&&i.set(t.id,!0))})),this.state.set(u.pX.followedSports,i).set(u.pX.allRecommendations,e).set(u.pX.sportsSuggestIDMap,n)},this.addFollowSportsForFre=t=>{const e=this.state.get(u.pX.followedSports)||new Map,{freTeams:i}=t?.Model?.Tabs?.[0]?.tabContent||{};i&&i.length>0&&i.forEach((t=>{const i=t.id||t.satoriId;t.hasExplicitInterest&&i&&!e.has(i)&&e.set(i,!0)})),this.state.set(u.pX.followedSports,e)},this.fetchSportsMatchData=async(t="",e,i)=>await o.Xw.safeExecuteAsync((async()=>{const n=await this.fetchSportsFeedMetadataByEntityId(t,i);if(!n)return Promise.resolve(e);const r=await this.parseSportsData(n,e,t,i);return r?(r.logMessage=r.logMessage||e?.logMessage,r.notifications=r.notifications||e?.notifications,r.sportsSkinnyData=r.sportsSkinnyData||e?.sportsSkinnyData,Promise.resolve(r)):Promise.resolve(e)}),e,v.JaT,"SportsInfo - Fetch sports feed get error response"),this.fetchSportsFeedMetadataByEntityId=async(t,e)=>{let n=this.getBaseBlendedUrl(t);const{fetchEntityUrl:r,fetchEntityApiUrl:o,enableptw:s,ocid:a,enableQuerySpotlightData:p}=E(this.state);s&&(n=M(n)),e?.forceFre&&(n=`${n}&forceFre=true`),e?.previewType&&p&&(n=`${n}&signature=${e?.previewType}`),e?.version&&(n=`${n}&version=${e?.version}&tabtype=${e?.tabContentReason}&cardType=${e?.tabContentType}`),D("SportsCardWC.FetchStart");const{SportsDataService:d}=await i.e("sports-data-service").then(i.bind(i,4557));let c=await d.fetchSportsFeed(n,a,!1,false,true);if(c||I(t)||!o||"3"===e?.version||(n=r.replace("{entityId}",t),s&&(n=M(n)),c=await d.fetchSportsFeed(n,a,!1,false,true)),!c){let i=`market:${(0,m.Yq)().CurrentMarket}, entityId:${t}, Url:${n}, ocid:${a}`;throw e?.forceFre&&(i=`${i}, forceFre:${e.forceFre}`),e?.previewType&&(i=`${i}, previewType:${e.previewType}`),new Error(i)}return D("SportsCardWC.FetchEnd"),Promise.resolve(c)},this.parseSportsData=async(t,e,i="",n)=>{const{sportsTypesForWidget:r,sportsDataTypesForWidget:o,maxNumberOfMatches:s}=E(this.state);let a;D("SportsCardWC.ParseStart");let p=!1;if(Array.isArray(t)&&t.length)a=t.find((t=>r&&r.includes(t.type)&&o&&o.includes(t.dataType)));else if(t.value&&Array.isArray(t.value)&&t.value.length){if(t.value[0].blendedResponse)try{a=JSON.parse(t.value[0].blendedResponse)}catch{throw new Error(`market:${(0,m.Yq)().CurrentMarket}, entityId:${i}, response:${t.value[0].blendedResponse}`)}else a=t.value[0];p=!0}if(!a)throw new Error(`market:${(0,m.Yq)().CurrentMarket}, entityId:${i}`);const d=new Map;var c;d.set("teamImageSize",(c=e.sportsMatchupCardData)&&c.dataType&&x(c.dataType)?{width:20,height:20}:{width:40,height:40}),d.set("previewType",n?.previewType);const l="string"==typeof a?this.getV2SportsMatchupData(JSON.parse(a)):this.getV2SportsMatchupData(a);if(!l)throw new Error(`market:${(0,m.Yq)().CurrentMarket}, entityId:${i}, response:${a}`);return D("SportsCardWC.ParseEnd"),Promise.resolve(l)},this.followSport=async(t,e=!1,n)=>{const r=this.state.get(u.pX.allRecommendations),o=E(this.state);let s;if(t&&t.id&&t.name&&t.type){const{SportsDataService:e}=await i.e("sports-data-service").then(i.bind(i,4557));if(s=await e.postActionRequest(t.id,t.name,u.Us.Follow,t.type,o.ocid,!1),s){let e=!1;if(r?.forEach((i=>k(i,t)&&(i.hasExplicitInterest=!0)&&(e=!0))),!e){t.hasExplicitInterest=!0;const e=this.state.get(u.pX.sportsSuggestIDMap);t.id&&e.set(t.id,t),this.state.set(u.pX.sportsSuggestIDMap,e),this.addToRecommendations(t,n)}this.updateFollowState(t,!0)}}return e&&t&&t.id&&await this.navigatetoNewTab(t),s},this.unfollowSport=async(t,e=!1)=>{const n=this.state.get(u.pX.allRecommendations),r=E(this.state),{SportsDataService:o}=await i.e("sports-data-service").then(i.bind(i,4557));await o.deleteActionRequest(t.yId,u.Us.Follow,"TagBase",r.ocid,!1)&&(n?.forEach((e=>k(e,t)&&(e.hasExplicitInterest=!1))),this.updateFollowState(t,!1))},this.updateFollowState=(t,e)=>{const i=this.state.get(u.pX.followedSports);I(t.id)||(e&&!i.get(t.id)&&i.set(t.id,!0),!e&&i.get(t.id)&&i.set(t.id,null)),I(t.yId)||(e&&!i.get(t.yId)&&i.set(t.yId,!0),!e&&i.get(t.yId)&&i.set(t.yId,null))},this.setCardSizeTmplTelemetry=()=>{(0,o.p2)(u.W3.SportsCardeSize);const t=this.state.get(u.pX.cardSize);(0,o.gB)(u.W3.SportsCardeSize,t)},this.setTmplTelemetryAfterTabUpdate=(t,e)=>{(0,o.SN)([u.W3.SportsDropdownChangedLeague,u.W3.SportsUserFollowsDropdownChangedLeague,u.W3.SportsDropdownChangedViewShown,u.W3.SportsRecommendationPopupShown,u.W3.SportsCardCurrentTabId]);const i=this.getCurrentTab(),n=i?.primaryEntityName,r=t.sportsSkinnyData?.find((t=>t.id===e)),s=r?.hasExplicitInterest,a=t.Model?.Tabs?.[0]?.tabType||"";(0,o.gB)(u.W3.SportsDropdownChangedLeague,n),(0,o.gB)(u.W3.SportsUserFollowsDropdownChangedLeague,s?"1":"0"),(0,o.gB)(u.W3.SportsDropdownChangedViewShown,a),(0,o.gB)(u.W3.SportsCardCurrentTabId,i?.primaryEntityId||"")},this.setTmplTelemetry=()=>{(0,o.SN)([u.W3.ChannelStoreLaunched,u.W3.TaskbarRotation,u.W3.Badge,u.W3.SportsDefaultLeagueShown,u.W3.SportsUserFollowsDefaultLeague,u.W3.SportsUserFollowsOtherteams,u.W3.SportsReasonShown,u.W3.SportsRecommendationPopupShown,u.W3.SportsCardType,u.W3.SportsExplorationCardShown,u.W3.SportsDataV2,u.W3.SportsCardCurrentTabId]);const t=this.state.get(u.pX.sportsData),e=this.getCurrentTab();if(!e)return;const i=e.primaryEntityName||"",n=e.primaryEntityId||"",r=e.hasExplicitInterest,s=t.sportsSkinnyData?.some((t=>t.id!==n&&t.hasExplicitInterest)),a=e.reason||"0";(0,o.gB)(u.W3.SportsDefaultLeagueShown,i),(0,o.gB)(u.W3.SportsUserFollowsDefaultLeague,r?"1":"0"),(0,o.gB)(u.W3.SportsUserFollowsOtherteams,s?"1":"0"),(0,o.gB)(u.W3.SportsReasonShown,a),(0,o.gB)(u.W3.SportsCardType,this.experienceType),(0,o.gB)(u.W3.SportsCardCurrentTabId,n);const p=e.tabContent?.notifications||[];if(p.length>0){const t=p.filter((t=>t.type===u.tY.Badge)).map((t=>`${t.gameId||""}-${t.gameState||""}`)).join("+"),e=p.filter((t=>t.type?.includes(u.tY.Preview))).map((t=>`${t.gameId||""}-${t.gameState||""}`)).join("+");I(e)||(0,o.gB)(u.W3.TaskbarRotation,e),I(t)||(0,o.gB)(u.W3.Badge,t)}"FRE"===e.tabType&&(0,o.gB)(u.W3.SportsFrePresent,"1"),(0,o.gB)(u.W3.SportsExplorationCardShown,R(e.tabType)?"1":"0"),(0,o.gB)(u.W3.SportsDataV2,"1")},this.setSpotlightTmplTelemetry=t=>{if((0,o.SN)([u.W3.SpotlightCardPreviewType,u.W3.SpotlightCardEntityId,u.W3.SportsNewSpotlightCard,u.W3.SportsCardType,u.W3.SportsVideoSpotlightShown,u.W3.SportsNewSpotlightCountdown,u.W3.SportsNewSpotlightExploration,u.W3.SportsEventBriefShown,u.W3.SportsNewSpotlightTennis,u.W3.SportsNewSpotlightRace,u.W3.SportsNewSpotlightGolf,u.W3.SportsFrePresent]),t&&t.previewType&&t.entityId){(0,o.gB)(u.W3.SpotlightCardPreviewType,t.previewType),(0,o.gB)(u.W3.SpotlightCardEntityId,t.entityId),(0,o.gB)(u.W3.SportsNewSpotlightCard,"0"),(0,o.gB)(u.W3.SportsCardType,this.experienceType);const e=this.getCurrentTab();e?.tabContent?.sportsSpotLightData&&(0,o.gB)(u.W3.SportsNewSpotlightCard,"1"),e?.tabContent?.sportsSpotLightData?.video&&(0,o.gB)(u.W3.SportsVideoSpotlightShown,"1"),e?.tabContent?.sportsSpotLightData?.countdown&&(0,o.gB)(u.W3.SportsNewSpotlightCountdown,"1"),"EventBrief"===e?.tabType&&(0,o.gB)(u.W3.SportsEventBriefShown,"1"),"SpotlightTennis"===e?.tabType&&(0,o.gB)(u.W3.SportsNewSpotlightTennis,"1"),"SpotlightGolf"===e?.tabType&&(0,o.gB)(u.W3.SportsNewSpotlightGolf,"1"),"SpotlightRace"===e?.tabType&&(0,o.gB)(u.W3.SportsNewSpotlightRace,"1"),"FRE"===e?.tabType&&(0,o.gB)(u.W3.SportsFrePresent,"1"),(0,o.gB)(u.W3.SportsNewSpotlightExploration,R(e?.tabType)?"1":"0")}},this.setSpanTmplTelemetry=()=>{const t=this.state.get(u.pX.sportsFeedDataParsed);if(!t)return;const e=t.Model?.Tabs?.[0],i=e?.tabContent?.league?.id||t.sportsMatchupCardData?.leagueId;(0,o.gB)(u.W3.SportsTabType,t.ArticleResponseType),(0,o.gB)(u.W3.SportsLeagueName,i)},this.handleSportsNotInterested=async t=>{const e=this.getCurrentTab();if(!e||I(e.primaryEntityId||""))return!1;const n={id:e.primaryEntityId,name:e.primaryEntityName,type:e.primaryEntityType},{SportsDataService:r}=await i.e("sports-data-service").then(i.bind(i,4557)),o=await r.notInterestedSportsCard(n);return o&&t&&t(),o},this.handleHideSportsCard=async t=>{const{SportsDataService:e}=await i.e("sports-data-service").then(i.bind(i,4557)),n=await e.hideSportsCard();return n&&t&&t(),n},this.checkAndInitForPreview=async t=>{const{previewType:e,previewTypeInfo:i}=t,{teamId:n,leagueId:r,scenario:o}=i||{},s=n||r;if(s){const t=o&&o.toLowerCase()===u.aI.toLowerCase();return this.updatePreviewTypeInfo(i),await this.updateDataForPreview(s,e,!!t)}return this.setSpotlightTmplTelemetry(),!1},this.updateDataForPreview=async(t,e,i)=>{this.setSpotlightTmplTelemetry();const n=this.state.get(u.pX.currentTabEntityId);this.state.set(u.pX.currentSpotlightEntityId,t);const r=this.state.get(u.pX.entityDataMap);let o=this.state.get(u.pX.sportsData);const s=r.get(this.getEntityIdKey(t));if(!s||i){const s=r.get(n)||{},a={version:"3",tabContentType:"Recommendation_League",tabContentReason:"Popular",forceFre:i,previewType:e};if(o=await this.fetchSportsMatchData(t,s,a),!o||0===Object.keys(o).length)return!1}else o=s;this.state.set(u.pX.currentTabEntityId,t),this.state.set(u.pX.tabCurrentPageIndex,1),this.state.set(u.pX.sportsFeedDataParsed,o),this.state.set(u.pX.feedDataTimestamp,null);const a=H(o)?.[0];return a&&this.addToRecommendations(a),this.onSportsMatchupDataReady(o),this.addFollowSportsForFre(o),this.setTmplTelemetryAfterTabUpdate(o,t),this.setSpotlightTmplTelemetry({previewType:e,entityId:t}),!0},this.experienceType=t,this.state=e}static getInstance(t,e){const i=e?`SportsInfoAppStateConnector_${t}_${e}`:`SportsInfoAppStateConnector_${t}`,n=X.Gq.get(i,(()=>({})));return n[i]||(n[i]=new A(t,(()=>{const t=new g.v(u.sF);return t.set(u.pX.allRecommendations,[]),t.set(u.pX.cardSize,"_1x_2y"),t.set(u.pX.currentTabEntityId,""),t.set(u.pX.entityDataMap,new Map),t.set(u.pX.entityViewMap,new Map),t.set(u.pX.followedSports,new Map),t.set(u.pX.sportsData,{}),t.set(u.pX.sportsInfoApiData,{}),t.set(u.pX.sportsSDCardView,void 0),t.set(u.pX.sportsSuggestIDMap,new Map),t.set(u.pX.sportsViewMode,"initial"),t.set(u.pX.tabCurrentPageIndex,1),t.set(u.pX.isPinned,!1),t.set(u.pX.searchSuggestions,[]),t.set(u.pX.toggleInterestManager,!1),t.set(u.pX.isInit,!1),t.set(u.pX.dislikedEntities,new Set),t})())),n[i]}updateCurrentPageIndex(t){this.state.set(u.pX.tabCurrentPageIndex,t)}updateIsInit(t){this.state.set(u.pX.isInit,t)}updateSupportedSdCardActionMenuItems(t){const e=N.hY.getInstance(this.experienceType,t);e&&(e.supportedSdCardActionMenuItems=t.supportedSdCardActionMenuItems)}async updateSportsMatchupData(t){t=await this.getV2SportsMatchupData(t),this.onSportsMatchupDataReady(t),this.addRecommendationsFromSkinnyData(t),this.addFollowSportsForFre(t)}clearViewsCache(){this.state.set(u.pX.entityDataMap,new Map),this.state.set(u.pX.entityViewMap,new Map),this.state.set(u.pX.currentSpotlightEntityId,void 0)}getBaseBlendedUrl(t){const e=(0,m.Yq)().CurrentRequestTargetScope?.pageExperiments,i=e?.filter((t=>t.startsWith("prg-1sw-"))).join(",")||"";let n="";const{fetchEntityUrl:r,fetchEntityApiUrl:o}=E(this.state);return I(o)?n=r.replace("{entityId}",t):(n=o.replace("{entityId}",t),!I(i)&&(n=`${n}&fdhead=${i}`)),n}async getV2SportsMatchupData(t){if(!t?.Model)return t;const e=(this.state.get(u.pX.tabCurrentPageIndex)||1)-1;if(t.isFeedData){const e=H(t),i=t.Model.Tabs.slice(0,1);t={...t,Model:{...t.Model,Tabs:i},sportsSkinnyData:e}}return t.sportsMatchupCardData={},(async(t,e)=>{if(!t.Model?.Tabs||0===t.Model?.Tabs.length)return void V("Sports data has no tabs",t);const i=t.Model?.Tabs[e?.tabIndex||0],n=i&&i.tabContent;if(!i||!n)return void V("Sports data can not find current tab info",t);if(n.showBackgroundImage&&!n.backgroundImageMap)return void V("Sports data can not find backgroundImageMap",t);if("FRE"===n.tabType&&!n.freTeams)return void V("Sports data missing fre data",t);const{sportsSpotLightData:r}=n,{sportsGameStats:o,matchlist:s,video:a,match:p,countdown:d}=r||{};"seasonstatistics"!==n.tabType||o&&s&&o.length&&s.length?"spotlight"!==n.tabType||!a||a.videoThumbnailUrl&&a.videoTitle&&p?"countdown"!==n.tabType||d||V("Sports data missing countDown data",t):V("Sports data missing video data",t):V("Sports data missing seasonstatistic data",t)})(t,{tabIndex:e}),D("SportsCardWC.DataReady"),t}addToRecommendations(t,e){const i=this.state.get(u.pX.allRecommendations);e||i.find((e=>t.id===e.id))||(i.push(t),this.state.set(u.pX.allRecommendations,i))}getCurrentTab(){const t=this.state.get(u.pX.sportsData),e=(this.state.get(u.pX.tabCurrentPageIndex)||1)-1;return t.Model?.Tabs?.[e]}}var O=i(19995),W=i(10754),L=i(92100),_=i(99452),U=i(42590),j=i(78346),z=i(31558),G=i(2848),Z=i(35830),q=i(39687),Y=i(77615);var Q=i(37802),J=i(64726);(0,G.c)(),Z.$l.define(Y.s.registry),q.p.define(Y.s.registry);let K=0,tt=0;const et="Sports_Spotlight_TTR";class it extends j.l{constructor(){super(...arguments),this.ensureObservableBeforeConnect=!0,this.isInViewport=!1,this.isDefaultRecoChecked=!1,this.isHidePopupOpen=!1,this.widgetVisibility=null,this.widgetModelFactory=window.__com_microsoft_dsh_widgetModelApiFactory,this.ignoreSpotlight=!1,this.isPinned=!1,this.isFirstViewReady=!1,this.isFeedDataChanged=!0,this.visibilityHandler=t=>{"visible"===t?this.onDashboardVisible().catch((()=>{})):"notvisible"===t&&this.appStateConnector.clearViewsCache()},this.showDefaultRecommendation=async()=>{(0,o.SN)([u.W3.SportsDfltRecoPopupShown,u.W3.SportsUsabilityPopupShown]);const t=this.appStateConnector.getCurrentState(),e=t.get(u.pX.currentTabEntityId);if((t.get(u.pX.wpoMetadata)?.isGA??!1)||!e)return;const i=t.get(u.pX.sportsData),n=i?.sportsMatchupCardData;return n?await o.Xw.safeExecuteAsync((async()=>{let t=n.showCF,i=n.primaryEntityType;const r=this.appStateConnector.getCurrentTab();r&&(t=Boolean(r.showCF),i=r.primaryEntityType),t&&this.config.enableUsabilityToast&&i?await this.showUsabilityToast(e,i,s.k$.UsabilityFeedbackToast):this.shouldShowRecommendationPopup(e,s.k$.DefaultRecommendation)&&await this.showRecommendationPopup(e,s.k$.DefaultRecommendation)}),void 0,v.oiw,"SportsInfo - error showing default tab popup"):void 0},this.sizeChangeHandler=t=>{if(t&&"CardResized"===t.type){const e=t&&t.detail.size;if("SportsMatch"!==(t&&t.detail.cardType)||!this.isPinned)return;this.adjustToHeight(e)}},this.onDismissInterestManagerHandler=()=>{this.hideNotificationToast(),this.appStateConnector.toggleInterestManager(!1)},this.showUsabilityToast=async(t,e,n)=>{if(!this.config.skipUsabilityToastCooldown&&(((t,e)=>{const i=(0,f.$o)().getObject("isShowCFStatus");return!(!i||!i[t])&&P(i[t])<=e})(this.cardType,this.config.usabilityToastShownIntervalDy??7)||((t,e,i)=>{const n=(0,f.$o)().getObject("isShowCF");if(!n)return!1;const r=n[`${t}Count`],o=P(n[t]);return!(!r||r<e||r===e&&o>i)})(this.cardType,this.config.usabilityToastShownCount??2,this.config.usabilityToastShownIntervalDy??7)))return;await i.e("feeds-notification-toast").then(i.bind(i,18880));const r=(0,B.WU)(this.strings.usabilityFeedbackTitle,e.toLowerCase()),a={telemetryTag:"",...this.view&&this.view.feedsNotificationToastViewModel,shouldShowNotification:!0,isShowButtonTemplate:!0,notificationType:n,notificationToastHeader:r,notificationToastActionText:this.strings.usabilityFeedbackYes,notificationToastDismissText:this.strings.usabilityFeedbackNo,onClickActionText:()=>this.onUserHistoryActionCallback(t,s.R0.usefulTipHistoryYes,n),onClickRejectButton:()=>this.onUserHistoryActionCallback(t,s.R0.usefulTipHistoryNo,n),onClickDismissButton:()=>this.onUserHistoryActionCallback(t,s.R0.usefulTipHistoryDismiss,n)};this.view&&((0,o.SN)([u.W3.SportsUsabilityPopupShown,u.W3.SportsRecommendationPopupShown,u.W3.SportsRecommendationPopupShown]),this.view={...this.view,feedsNotificationToastViewModel:a},this.autoHideNotificationToast(this.config.usabilityToastTimeout),((t,e=.5)=>{const i=(0,f.$o)().getObject("isShowCF")||{},n=P(i[t],36e5);i[t]=(new Date).toString(),i&&i[t+"Count"]?n>e&&(i[t+"Count"]=2):i[t+"Count"]=1,(0,f.$o)().setObject("isShowCF",i)})(this.cardType),(0,o.gB)(u.W3.SportsUsabilityPopupShown,"1"))},this.showRecommendationPopup=async(t,e)=>{await i.e("feeds-notification-toast").then(i.bind(i,18880));const n=this.appStateConnector.getCurrentState().get(u.pX.sportsSuggestIDMap).get(t),r=n.name||"",a=n.webSearchUrl||"",p=e===s.k$.DefaultRecommendation?this.strings.suggestedForYou:`${this.strings.wantToFollow||""}`.replace("{0}",`${r}`),d=this.getNotificationToastContentText(e),c=`${this.strings.yesFollowTeam||""}`.replace("{0}",`${r}`),l=this.getRecommendationPopupDismissText(),h={telemetryTag:"",...this.view&&this.view.feedsNotificationToastViewModel,shouldShowNotification:!0,isShowButtonTemplate:!0,disableNoButton:e===s.k$.DropdownRecommendation,notificationType:e,notificationToastHeader:p,notificationToastContentText:d,notificationToastActionText:c,notificationToastDismissText:l,onClickActionText:()=>this.followClickEntityHandler(n,!0,a),onClickDismissButton:()=>this.onUserHistoryActionCallback(t,s.R0.dismissHistory,e),onClickRejectButton:()=>this.onUserHistoryActionCallback(t,s.R0.suppressHistory,e,!0)};if(this.view){(0,o.SN)([u.W3.SportsUsabilityPopupShown,u.W3.SportsRecommendationPopupShown,u.W3.SportsRecommendationPopupShown]),this.view={...this.view,feedsNotificationToastViewModel:h};const t=e===s.k$.DefaultRecommendation?this.config.dftRecommendationPopupTimeout:this.config.dwnRecommendationPopupTimeout;this.autoHideNotificationToast(t);const i=e===s.k$.DefaultRecommendation?u.W3.SportsDfltRecoPopupShown:u.W3.SportsRecommendationPopupShown;(0,o.gB)(i,"1")}},this.getRecommendationPopupDismissText=()=>this.config.enableRecommendationSeeMore?this.strings.notInterested||"":this.config.enableRecommendationOthers?this.strings.otherInterests||"":this.strings.notInterested||"",this.updateViewModelAfterFollowClick=async(t,e,n)=>{await i.e("feeds-notification-toast").then(i.bind(i,18880));const r=this.appStateConnector.getCurrentState();if(t.name&&n){const i=e?`${this.strings.isFollowedString}`.replace("{0}",`${t.name}`):`${this.strings.sportsUnfollowingToast}`.replace("{0}",`${t.name}`),o=e?`${this.strings.seeInformationOf}`.replace("{0}",`${t.name}`):`${this.strings.sportsUnfollowingToastLink}`.replace("{0}",`${t.name}`),a={telemetryTag:"",...this.view&&this.view.feedsNotificationToastViewModel,shouldShowNotification:!0,notificationType:s.k$.DefaultNotification,notificationToastHeader:i,notificationToastActionText:o,interestManagerOpen:r.get(u.pX.toggleInterestManager),cardSize:this.cardSize,actionTextUrl:e?n:"",onClickActionText:()=>this.handleNotificationClickActionText(t,n),onClickDismissButton:this.hideNotificationToast};this.view&&(this.view={...this.view,feedsNotificationToastViewModel:a},this.autoHideNotificationToast())}},this.hideNotificationToast=()=>{if(clearTimeout(K),this.view&&this.view.feedsNotificationToastViewModel){const t={...this.view.feedsNotificationToastViewModel,shouldShowNotification:!1};this.view={...this.view,feedsNotificationToastViewModel:t}}},this.autoHideNotificationToast=t=>{this.config.skipToastTimeout||(clearTimeout(K),K=window.setTimeout((()=>{this.hideNotificationToast()}),t||this.config.notificationPopupTimeout))},this.handleNotificationClickActionText=(t,e)=>{t.name&&e&&this.followClickEntityHandler(t,!0,e)},this.getNotificationToastContentText=t=>{const e=this.appStateConnector.getCurrentState(),i=this.appStateConnector.getCurrentTab();let n;switch(n=i?i.reason||"-1":e.get(u.pX.sportsData).sportsMatchupCardData?.reason||"-1",t){case s.k$.DefaultRecommendation:return this.getRecommendationTextFromReason(n);case s.k$.DropdownRecommendation:return this.strings.stayUpToDate||"";default:return""}},this.getRecommendationTextFromReason=t=>{switch(+t){case 2:return this.strings.recommendedBasedInterests||"";case 3:return this.strings.recommendedBasedPopularity||"";case 4:return this.strings.recommendedDueToLiveGame||"";case 5:return this.strings.recommendedDueToMITEvent||"";case 6:return this.strings.recommendedLocalPopularity||"";default:return this.strings.recommendedLeagueToFollow||""}},this.closeActionMenu=()=>{this.config.isDynamicFeed&&this.sdCardActionClickHandler&&this.dismissActionMenu&&this.dismissActionMenu()},this.shouldShowRecommendationPopup=(t,e)=>{let i=e===s.k$.DefaultRecommendation?this.config.enableRecommendationDefault:this.config.enableRecommendationDropdown;const n=this.appStateConnector.getCurrentTab();return n&&(i=i&&Boolean(n.tabContent?.shouldShowRecommendation)),i=i&&!this.appStateConnector.isSportsFollowed(t),e===s.k$.DropdownRecommendation&&(i=i&&!this.appStateConnector.isSportsSaved(t)),!!i},this.launchChannelStoreSport=()=>{(0,o.gB)(u.W3.ChannelStoreLaunched,"1"),this.config.useChannelStoreAll&&window.dispatchEvent(new CustomEvent("launchChannelStore",{detail:{openSportsChannelStore:!0}}))},this.onUserHistoryActionCallback=async(t,e,i,n=!1)=>{if([s.R0.usefulTipHistoryNo,s.R0.usefulTipHistoryYes].includes(e)){const t={telemetryTag:"",shouldShowNotification:!0,notificationType:s.k$.DefaultNotification,notificationToastHeader:this.strings.usabilityFeedbackConfirmation,onClickDismissButton:this.hideNotificationToast};this.view&&(this.view={...this.view,feedsNotificationToastViewModel:t},this.autoHideNotificationToast(this.config.feedbackToastTimeout))}else this.hideNotificationToast();n&&this.openSearchViewHandler(!0).catch((()=>{})),await this.appStateConnector.updateActionHistory(t,e,i),[s.R0.usefulTipHistoryNo,s.R0.suppressHistory].includes(e)&&this.launchChannelStoreSport()}}onVisuallyReady(){this.config.isDynamicFeed&&(0,a.MD)(r.x.sportsCardWC),(0,O.c)((()=>{const t=this.getApproxTTVRValue(r.x.sportsCardWC);(0,T.o_)(r.x.sportsCardWC,!1,t,!t),this.visualReadinessCallback&&this.visualReadinessCallback()}))}getExperienceType(){return r.x.sportsInfo}async experienceConnected(){if(this.isFirstViewReady&&this.config.isDynamicFeed)return void this.initWidgetInstance();this.isPinned=this.supportedSdCardActionMenuItems&&this.supportedSdCardActionMenuItems.includes(p.B$.Unpin);let t=this.cardType;if((0,d.bh)()){const e=(0,d.tQ)();this.ignoreSpotlight=(0,c.Zk)(e),e&&(t+=`-${e}`)}this.appStateConnector=A.getInstance(t),this.initSdCardHandlers(),this.cardSize=this.cardSize??"_1x_2y",this.previewType=this.initialPreviewType;const e=Math.round(performance.now());(0,l.Z0)()&&this.config.enableForceSpotlight&&(this.previewType=L.c.getQueryParameterByName("previewType",window.location.href)||""),await this.setInitialView(this.feedDataParsed),this.config.isDynamicFeed&&this.initWidgetInstance(),this.isSportsSpotlight&&void 0!==e&&((0,W.Ou)()[et]=Math.round(performance.now())-e)}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),this.isFirstViewReady&&e!==i&&i&&"initialpreviewtype"===t&&this.config.enableSpotlightReuse&&!this.ignoreSpotlight&&this.onDashboardVisible().catch((()=>{}))}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(K),this.config.isDynamicFeed&&(this.disconnectWidgetInstance(),this.config.enableSpotlightReuse&&this.appStateConnector.clearViewsCache()),this.unsetIntersectionObserver()}connectWidgetEvents(){this.widgetVisibility&&this.widgetVisibility.addEventListener(this.visibilityHandler),document.addEventListener("CardResized",this.sizeChangeHandler)}disconnectWidgetInstance(){this.widgetVisibility&&(this.widgetVisibility.removeEventListener(this.visibilityHandler),this.widgetVisibility=null),document.removeEventListener("CardResized",this.sizeChangeHandler)}initWidgetInstance(){o.Xw.safeExecute((()=>{this.widgetInstance||(this.widgetInstance=(0,h.Qq)()),this.shellFeedsApi||(this.shellFeedsApi=this.widgetModelFactory?.tryGetApi("widgetshellfeeds",h.l1,h.l1)),this.widgetVisibility||(this.widgetVisibility=this.widgetInstance?.tryGetApi("visibility",h.l1,h.l1)),this.connectWidgetEvents()}),void 0,this.config.isDynamicFeed?v.RD:v.nIM,this.config.isDynamicFeed?"SportsInfo - Dyanmic Ranking widget instance is not available":"SportsInfo - error initializing SportsInfoCard")}replaceView(t){t&&t.currentViewTemplate&&(this.view=t)}get isSportsSpotlight(){return this.previewType?.toLocaleLowerCase().startsWith("sports")||!1}async onDashboardVisible(){const t=await this.getSportsPreviewType(),e=t!==this.previewType&&this.previewType?.startsWith(u.Bm);this.previewType=t;let i=!1;""!==this.previewType&&(i=await this.updatePreview()),i||(e?this.updateViewWithFeedData().catch((()=>{})):this.updateView().catch((()=>{})),this.isFeedDataChanged&&(this.isFeedDataChanged=!1))}async updatePreview(){const t=this.getPreviewTypeInfo();if(!t||"sports"!==t.segment.toLowerCase())return!1;const e=Math.round(performance.now());let i=null;if(t.teamId&&t.gameId?i=t.teamId:t.leagueId&&(i=t.leagueId),i){const n=t&&t.scenario&&t.scenario.toLowerCase()===u.aI.toLowerCase();this.appStateConnector.updatePreviewTypeInfo(t);const r=await this.appStateConnector.updateDataForPreview(i,this.previewType,!!n);if(this.config.enableSpotlightReuse){if(!this.isConnected)return!1;this.appStateConnector.updateCardSize(this.cardSize),this.appStateConnector.updateSupportedSdCardActionMenuItems(this.sportsTransformationContext)}return r&&await this.updateView().catch((()=>{})),void 0!==e&&((0,W.Ou)()[et]=Math.round(performance.now())-e),r}return!1}getPreviewTypeInfo(){if(!this.previewType)return;let t={previewType:this.previewType};if(this.previewType.includes("|"))if(this.previewType.toLowerCase()?.includes("EventBrief".toLowerCase())){const[e,i,n,r]=this.previewType.split(/[:_|]/);t={...t,segment:e,scenario:i,leagueId:r}}else{const[e,i,n,r,o,s,a]=this.previewType.split(/[:_|]/);t={...t,segment:e,scenario:i,stage:n,entityId:r,leagueId:o,gameId:s,teamId:a}}else{const[e,i,n,r,o]=this.previewType.split(/[:_]/);t={...t,segment:e,scenario:i,leagueId:n,gameId:r,teamId:o}}return t.leagueId?("x"!==t.gameId&&"x"!==t.teamId||(t.gameId=void 0,t.teamId=void 0),t):void 0}isInViewportChanged(t,e){e&&!this.isDefaultRecoChecked&&(this.isDefaultRecoChecked=!0,o.Xw.safeExecuteAsync((async()=>{await this.showDefaultRecommendation()}),void 0,v.oiw,"SportsInfo - error executing default recommendation popup method"))}feedDataParsedChanged(t,e){if(!this.isFirstViewReady)return void this.setInitialView(e).catch((()=>{}));t===e||!this.feedDataParsed||!this.config||(this.appStateConnector.toggleInterestManager(!1),this.isFeedDataChanged=!0,this.updateViewWithFeedData().catch((()=>{})))}async interestMenuItemClickEntityHandler(t){const e=this.shouldShowRecommendationPopup(t.id,s.k$.DropdownRecommendation),i=await this.appStateConnector.updateCurrentTab(t);await this.updateView(),i&&await this.updateViewModelAfterFollowClick(i,!0,i.webSearchUrl||""),e&&this.showRecommendationPopup(t.id,s.k$.DropdownRecommendation).catch((()=>{})),(0,o.ni)(this.tabElement)}async followClickEntityHandler(t,e,i,n,r){await this.appStateConnector.updateFollowedSports(t,e,n),await this.updateView(),await this.updateViewModelAfterFollowClick(t,e,i),r&&this.launchChannelStoreSport()}async searchInterestsHandler(t){await this.appStateConnector.getUpdatedSportsInterestOptions(t),this.updateView().catch((()=>{}))}async openSearchViewHandler(t){if((0,o.gB)(u.W3.ChannelStoreLaunched,"1"),this.config.useChannelStore||this.config.useChannelStoreAll)return window.dispatchEvent(new CustomEvent("launchChannelStore",{detail:{openSportsChannelStore:!0}})),void this.closeActionMenu();this.appStateConnector.toggleInterestManager(t),t&&(this.closeActionMenu(),await this.appStateConnector.getUpdatedSportsInterestOptions("")),this.updateView().catch((()=>{}))}async hideClickHandler(t,e){const i=t&&this.config.useChannelStoreAll;await this.appStateConnector.hideSports(t,e?void 0:this.refreshFeed),i&&this.launchChannelStoreSport()}goToPersonalizeSettingsHandler(){this.goToPersonalizeCallback?this.goToPersonalizeCallback():this.$emit("goToPersonalizeCallback")}hidePopupToggleHandler(t){this.isHidePopupOpen=t}initSdCardHandlers(){this.interestMenuItemClickEntityHandlerScoped=this.interestMenuItemClickEntityHandler.bind(this),this.paginationFlipperClickHandlerScoped=(0,Q.Z)(this.paginationFlipperClickHandler.bind(this),this.config.flipperClickThrottleTime),this.paginationDotClickHandlerScoped=this.paginationDotClickHandler.bind(this),this.followClickEntityHandlerScoped=this.followClickEntityHandler.bind(this),this.searchInterestsHandlerScoped=this.searchInterestsHandler.bind(this),this.openSearchViewHandlerScoped=this.openSearchViewHandler.bind(this),this.hideClickHandlerScoped=this.hideClickHandler.bind(this),this.goToPersonalizeSettingsHandlerScoped=this.goToPersonalizeSettingsHandler.bind(this),this.onDismissInterestManagerHandlerScoped=this.onDismissInterestManagerHandler.bind(this),this.hidePopupToggleHandlerScoped=this.hidePopupToggleHandler.bind(this),this.updateActionHistoryScoped=this.updateActionHistory.bind(this),this.goToNextTabIfExistsScoped=this.goToNextTabIfExists.bind(this)}async setInitialView(t){if(this.appStateConnector.updateIsInit((0,z.N)()&&!this.isSSRRendered),!t)return Promise.resolve();{const t=await this.appStateConnector.getInitialSportsCardView(this.sportsInitTransformationContext);this.replaceView(t)}this.isFirstViewReady=!0,this.onVisuallyReady&&this.onVisuallyReady(),this.postTTVRViewUpdate()}async postTTVRViewUpdate(){const t=(0,z.N)()&&!this.isSSRRendered;window.setTimeout((async()=>{t&&("edgeChromium"===m.jG.AppType&&await(0,J.eC)(),await this.updateView());const e=`${r.x.sportsCardWC}.Ready`;(0,O.c)((()=>{const t=this.getApproxTTVRValue(e);(0,T.o_)(e,!1,t,!t)})),this.setIntersectionObserver()}),t?200:0)}async updateView(){const t=await this.appStateConnector.getUpdatedSportsCardView(this.sportsTransformationContext);this.replaceView(t)}async updateViewWithFeedData(){const t=await this.appStateConnector.getUpdatedSportsViewByFeedData(this.sportsInitTransformationContext);t!==this.view&&(this.appStateConnector.clearViewsCache(),this.replaceView(t))}getNewTabIndexOnFlip(t,e){const i=this.appStateConnector.getCurrentState().get(u.pX.currentTabEntityId),n=t.findIndex((t=>t.id===i));let r=e?n+1:n-1;return-1===r?r=t.length-1:r===t.length&&(r=0),r}isExplorationTab(t){return t.toLowerCase().includes("exploration")}paginationFlipperClickHandler(t){clearTimeout(tt);const e=this.appStateConnector.getCurrentState(),i=e.get(u.pX.cardSize),n=this.appStateConnector.getCurrentTab();if(this.isExplorationTab(n?.tabType||"")||this.config.enableFlipper&&"_1x_1y"!==e.get(i)){const i=e.get(u.pX.interestOptions),n=this.getNewTabIndexOnFlip(i,t);this.interestMenuItemClickEntityHandler?.(i[n])}else this.appStateConnector.updateTabCurrentPageIndex(t),this.updateView().catch((()=>{})),(0,o.ni)(this.tabElement)}goToNextTabIfExists(){clearTimeout(tt);const t=this.appStateConnector.getCurrentState(),e=t.get(u.pX.tabCurrentPageIndex)||1;t.get(u.pX.interestOptions).length!==e&&(tt=window.setTimeout((()=>{this.paginationFlipperClickHandler(!0)}),this.config.goToNextTabDelay))}paginationDotClickHandler(t){const e=t+1;this.appStateConnector.updateCurrentPageIndex(e),this.updateView().catch((()=>{}))}adjustToHeight(t){if(t){let e;switch(t){case p.B$.Small:e="_1x_1y";break;case p.B$.Medium:e="_1x_2y";break;case p.B$.Large:e="_1x_3y";break;default:e="_1x_2y"}if(this.appStateConnector.getCurrentState().get(u.pX.cardSize)===e)return;this.appStateConnector.updateCardSize(e),this.cardSize=e,this.updateView().catch((()=>{}))}}async getRotationalPreviews(){if(this.shellFeedsApi&&this.shellFeedsApi.getRotationalPreviewIds)return await o.Xw.safeExecuteAsync((async()=>{const t=await(this.shellFeedsApi?.getRotationalPreviewIds());if(t)return t;throw new Error("WidgetShellFeeds.getRotationalPreviewIds returned nothing")}),void 0,v.iNb,"SportsInfo - Exception at WidgetShellFeeds.getRotationalPreviewIds")}async getSportsPreviewType(){if(this.ignoreSpotlight)return"";const t=await this.getRotationalPreviews();if(!t)return"";const{previewType:e}=t;return e||""}updateActionHistory(t,e,i){return this.appStateConnector.updateActionHistory(t,e,i)}get sportsTransformationContext(){return{config:this.config,strings:this.strings,updateActionHistory:this.updateActionHistoryScoped,goToNextTabIfExists:this.goToNextTabIfExistsScoped,interestMenuItemClickEntityHandler:this.interestMenuItemClickEntityHandlerScoped,paginationFlipperClickHandler:this.paginationFlipperClickHandlerScoped,paginationDotClickHandler:this.paginationDotClickHandlerScoped,followClickHandler:()=>{},followClickEntityHandler:this.followClickEntityHandlerScoped,searchInterestsHandler:this.searchInterestsHandlerScoped,openSearchViewHandler:this.openSearchViewHandlerScoped,hideClickHandler:this.hideClickHandlerScoped,moreSettingsClickHandler:this.goToPersonalizeSettingsHandlerScoped,onDismissInterestManagerHandler:this.onDismissInterestManagerHandlerScoped,supportedSdCardActionMenuItems:this.supportedSdCardActionMenuItems,sdCardActionClickHandler:this.sdCardActionClickHandler,hidePopupToggleHandler:this.hidePopupToggleHandlerScoped}}get sportsInitTransformationContext(){return{...this.sportsTransformationContext,feedData:"",feedDataParsed:this.feedDataParsed,cardSize:this.cardSize,rootTelemetryObject:this.parentTelemetryObject,telemetryExt:this.telemetryExt,wpoMetadata:this.wpoMetadata,previewType:this.previewType,previewTypeInfo:this.getPreviewTypeInfo()}}setIntersectionObserver(){if(this.intersectionObserver)return;this.intersectionObserver=new IntersectionObserver((t=>{if(t&&0!==t.length)for(const e of t)e.isIntersecting&&(this.isInViewport=!0,this.unsetIntersectionObserver())}),{threshold:[.5]}),this.intersectionObserver.observe(this)}unsetIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}}(0,n.gn)([_.LO],it.prototype,"isInViewport",void 0),(0,n.gn)([_.LO],it.prototype,"feedDataParsed",void 0),(0,n.gn)([_.LO],it.prototype,"cardSize",void 0),(0,n.gn)([_.LO],it.prototype,"telemetryExt",void 0),(0,n.gn)([_.LO],it.prototype,"isHidePopupOpen",void 0),(0,n.gn)([U.Lj],it.prototype,"initialPreviewType",void 0),(0,n.gn)([_.LO],it.prototype,"supportedSdCardActionMenuItems",void 0),(0,n.gn)([_.LO],it.prototype,"view",void 0),(0,n.gn)([_.LO],it.prototype,"isFirstViewReady",void 0),(0,n.gn)([_.lk],it.prototype,"sportsInitTransformationContext",null);var nt=i(49218),rt=i(41472),ot=i(93703);const st=nt.dy`
    <feeds-notification-toast
        :viewModel="${t=>t.view?.feedsNotificationToastViewModel}"
    ></feeds-notification-toast>
`,at=nt.dy`
    <sports-hidepopup
        :viewModel="${t=>t.view?.viewModel.hidePopupViewModel}"
        :isHidePopupOpen="${t=>t.isHidePopupOpen}"
    ></sports-hidepopup>
`,pt=nt.dy`
<div data-t="${t=>t.view?.viewModel.telemetryTag}" class="wrap">
    <cs-core-sd-card 
        :data="${t=>t.view?.sdCardData}"
        :toggleInterestManager="${t=>t.view?.sdCardData?.toggleInterestManager}"
        data-t="${t=>t.view?.viewModel.tabTelemetryTag}"
        size="${t=>t.view?.sdCardData.cardSize}"
        ${(0,rt.i)("tabElement")}
    >
        <div slot="content">${t=>t.view?.currentViewTemplate}</div>
    </cs-core-sd-card>
    ${st}
    ${(0,ot.g)((t=>t.view?.viewModel.hidePopupViewModel),at)}
</div>
`,dt=nt.dy`
    ${(0,ot.g)((t=>t.isFirstViewReady),pt)}
`;const ct=i(78923).i` .wrap{position:relative}:has(sports-article){--sd-card-content-padding-inline:4px}:host{--immersive-gradient-opacity:0}`,lt={experienceConfigSchema:undefined}},85117:function(t,e,i){"use strict";i.d(e,{DV:function(){return r},dg:function(){return n},j3:function(){return o},zI:function(){return s}});const n={CommunityCard:"community-sd-card",ActiveDiscussions:"community-active-discussions",CreationIdeas:"community-creation-ideas"},r={CommunityCard:"CommunityCard",CommentActivity:"CommentActivity",CreationIdeas:"CreationIdeas"},o={commentActivity:n.ActiveDiscussions,userProfile:n.ActiveDiscussions,postIdea:n.CreationIdeas,commentIdea:n.CreationIdeas},s={CommunityCard:r.CommunityCard}},54162:function(t,e,i){"use strict";i.d(e,{D8:function(){return I},rx:function(){return P},vS:function(){return M},hY:function(){return D},gF:function(){return x}});var n=i(66701);const r="MoneyInfo",o="VerticalQuoteList",s="VerticalWatchlist",a="PriceSpotlight",p="WatchlistIdeas",d="SpotlightCurrency",c="MoneyAugmentCard",l="MarketMovers",h={MoneyAugment:c},u="SportsInfo",g="SportsInfoSpan",m="SportsTeamExploration",S="SportsCricketExploration",f="SportsSpotlight",y={["SportsMatch"]:u,["EventSDCardSportsMIT1"]:u,["EventSDCardSportsMIT2"]:u,["EventSDCardSportsMIT3"]:u,["SportsSpans"]:g,["SportsAugment"]:"SportsAugmentCard"},w=[g,u,r,c];const T={["QuoteItem"]:[o,s],["FollowButton"]:[o,s],["MoneyInfoStockChart"]:[o,s,"MarketBrief",p,c,l],["MSNStockChart"]:[a,d,l],["DateFilterChart"]:[a,d],["WatchlistSummaryQuoteItem"]:["WatchlistSummary"],["EarningsQuoteItem"]:["EarningsQuoteList"],["WatchlistIdeasQuoteItem"]:[p],["MarketMoversIndexItem"]:[l],["SportsMatch"]:["SportsMatchList","SportsMarchmadness",f],["SportsSpanMatch"]:[g],["SportsHidePopup"]:[u],["SportsGameStats"]:[f],["SportsCricket"]:[S],["SportsTeamExplorationMatch"]:[m],["SportsExplorationHead"]:[m,S,"SportsTennisExploration"],["SportsTennisMatch"]:["SportsSpotlightTennis"],["SportsSimpleMatch"]:["SportsSpotlightGolf","SportsSpotlightRace"]};let C={};function b(t){let e=t;const i=(t=>T[t])(t);i&&i.length>0&&(e=i.find((t=>null!=C[t]))||e);let r=C[e];if(r)return r;const o=function(t){return`${t}Bundle`}(e);return r=n.n.loadExperience(o),C[e]=r,r}var v=i(76611);class I{constructor(t,e,i){const{config:n,strings:r,interestMenuItemClickHandler:o,paginationFlipperClickHandler:s,paginationDotClickHandler:a,followClickHandler:p,hideClickHandler:d,moreSettingsClickHandler:c,searchInterestsHandler:l,openSearchViewHandler:h,sdCardActionClickHandler:u,supportedSdCardActionMenuItems:g,onDismissInterestManagerHandler:m,switchBackToWeatherHandler:S}=i;this.expContainerName=t,this.experienceName=e,this.config=n,this.strings=r,this.interestMenuItemClickHandler=o,this.paginationFlipperClickHandler=s,this.paginationDotClickHandler=a,this.telemetryBuilder=new v.mc,this.searchInterestsHandler=l,this.openSearchViewHandler=h,this.sdCardActionClickHandler=u,this.switchBackToWeatherHandler=S,this.supportedSdCardActionMenuItems=g,b(this.expContainerName),this.followClickHandler=p,this.hideClickHandler=d,this.moreSettingsClickHandler=c,this.onDismissInterestManagerHandler=m}updateContext(t){const{interestMenuItemClickHandler:e,paginationFlipperClickHandler:i,paginationDotClickHandler:n,followClickHandler:r,hideClickHandler:o,moreSettingsClickHandler:s,searchInterestsHandler:a,openSearchViewHandler:p,sdCardActionClickHandler:d,supportedSdCardActionMenuItems:c,onDismissInterestManagerHandler:l,switchBackToWeatherHandler:h}=t;this.interestMenuItemClickHandler=e,this.paginationFlipperClickHandler=i,this.paginationDotClickHandler=n,this.searchInterestsHandler=a,this.openSearchViewHandler=p,this.sdCardActionClickHandler=d,this.switchBackToWeatherHandler=h,this.supportedSdCardActionMenuItems=c,this.followClickHandler=r,this.hideClickHandler=o,this.moreSettingsClickHandler=s,this.onDismissInterestManagerHandler=l}async generateView(t,e){const i=this.tagNameToComponentName(e);if(!i)throw new Error(`Component name in generateView for "${e}" is undefined`);const n=function(t){return`${t}Transformer`}(i);return await b(i).catch((t=>{throw new Error(`Could not load component and transformer for "${e}" and transform data: ${t.message}; stack: ${t.stack}`)})).then((async e=>{const r=e[n],o=w.includes(i)?r.getInstance(this.experienceName,this):new r(this);return await o.transform(t)})).catch((t=>{throw new Error(`error in transformer for "${e}": ${t.message}; stack: ${t.stack}`)}))}async loadComponentAndTransformer(t){return await b(t)}}var k=i(55524);class M extends I{static getInstance(t,e){const i=`MoneyDataTransformer_${t}`,n=k.Gq.get(i,(()=>({})));if(!n[i]){const o=h[t]||r;n[i]=new M(o,t,e)}return n[i]}constructor(t,e,i){super(t,e,i),this.handleDateFilterChartChange=i.handleDateFilterChartChange}updateContext(t){super.updateContext(t)}tagNameToComponentName(t){if(!this.config?.tagToComponentNameMap)throw new Error("tagToComponentNameMap is not defined in config");return this.config.tagToComponentNameMap[t]||null}}class D extends I{static getInstance(t,e){const i=`SportsDataTransformer_${t}`,n=k.Gq.get(i,(()=>({})));if(!n[i]){const r=y[t]||u;n[i]=new D(r,t,e)}return n[i]}constructor(t,e,i){super(t,e,i),this.hidePopupToggleHandler=i.hidePopupToggleHandler,this.updateActionHistory=i.updateActionHistory,this.goToNextTabIfExists=i.goToNextTabIfExists,this.followClickEntityHandler=i.followClickEntityHandler,this.interestMenuItemClickEntityHandler=i.interestMenuItemClickEntityHandler}updateContext(t){super.updateContext(t),this.hidePopupToggleHandler=t.hidePopupToggleHandler,this.followClickEntityHandler=t.followClickEntityHandler,this.interestMenuItemClickEntityHandler=t.interestMenuItemClickEntityHandler}tagNameToComponentName(t){if(!this.config?.tagToComponentNameMap)throw new Error("tagToComponentNameMap is not defined in config");return this.config.tagToComponentNameMap[t]||null}}class x extends I{static{this.instanceDict={}}static getInstance(t,e){return x.instanceDict[t]||(x.instanceDict[t]=new x(g,t,e)),x.instanceDict[t]}tagNameToComponentName(t){if(!this.config?.tagToComponentNameMap)throw new Error("tagToComponentNameMap is not defined in config");return this.config.tagToComponentNameMap[t]||null}}var E=i(85117);class P extends I{static getInstance(t,e){const i=`CommunityDataTransformer_${t}`,n=k.Gq.get(i,(()=>({})));if(!n[i]){const r=E.zI[t];n[i]=new P(r,t,e)}return n[i]}constructor(t,e,i){super(t,e,i),this.pollAnswerHandler=i.pollAnswerHandler}updateContext(t){super.updateContext(t)}tagNameToComponentName(t){if(!this.config?.tagToComponentNameMap)throw new Error("tagToComponentNameMap is not defined in config");return this.config.tagToComponentNameMap[t]||null}}},66599:function(t,e,i){"use strict";function n(t){return!t||!function(t){if(!t)return t;if(t.trim)return t.trim();return t.replace(/^\s+|\s+$/g,"")}(t)}i.d(e,{T:function(){return n}})},48204:function(t,e,i){"use strict";i.d(e,{NJ:function(){return o}});var n=i(23357),r=i(54297);function o(){return(0,r.$o)().getItem(n.Kj)}},80501:function(t,e,i){"use strict";var n;i.d(e,{Zl:function(){return s},Nv:function(){return n},k$:function(){return r},R0:function(){return o}}),function(t){t._1x_1y="_1x_1y",t._1x_2y="_1x_2y",t._1x_3y="_1x_3y",t._1x_4y="_1x_4y",t._1x_5y="_1x_5y",t._2x_1y="_2x_1y",t._2x_2y="_2x_2y",t._2x_3y="_2x_3y",t._2x_4y="_2x_4y",t._2x_6y="_2x_6y",t._3x_1y="_3x_1y",t._3x_2y="_3x_2y",t._4x_1y="_4x_1y",t._4x_2y="_4x_2y",t._5x_1y="_5x_1y",t._5x_2y="_5x_2y",t._125u="1.25u"}(n||(n={}));const r={DropdownRecommendation:"dropdown-recommendation",DefaultRecommendation:"default-recommendation",DefaultNotification:"default-notification",ExplorationTab:"exploration-tab",UsabilityFeedbackToast:"usability-feedback-toast"},o={dropdownHistory:"dropdownHistory",dismissHistory:"dismissHistory",suppressHistory:"suppressHistory",usefulTipHistoryYes:"usefulTipHistoryYes",usefulTipHistoryNo:"usefulTipHistoryNo",usefulTipHistoryDismiss:"usefulTipHistoryDismiss"};class s{constructor(t){this.transformerProvider=t}}},76611:function(t,e,i){"use strict";i.d(e,{Xw:function(){return S},XX:function(){return r},mc:function(){return o},p2:function(){return g},SN:function(){return m},uq:function(){return l},Wf:function(){return d},x7:function(){return p},Ne:function(){return c},ni:function(){return h},gB:function(){return u}});var n=i(82898);const r={Customize:n.wu.Customize,Paginate:n.wu.Paginate,Hide:n.wu.Hide,Cancel:n.wu.Cancel,Close:n.wu.Close,Dislike:n.wu.Dislike,Show:n.wu.Show};class o{createTelemetryObjectTag(t){return t?t.getMetadataTag():""}createTelemetryObject(t,e,i){if(t&&e)return e={...e,content:{...e.content,type:e.content?.type?e.content?.type:n.uH.StructuredData,vertical:this.verticalName,category:this.categoryName,subcategory:this.subCategoryName},zone:this.zone,ext:{...this.ext,signature:i}},t.addOrUpdateChild(e)}createViewTelemetryObject(t,e){return this.createTelemetryObject(t,{name:e.name,action:n.Aw.View,behavior:n.wu.Show,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature)}createViewTelemetryTag(t,e){const i=this.createTelemetryObject(t,{name:e.name,behavior:n.wu.View,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature);return this.createTelemetryObjectTag(i)}createNavClickTelemetryTag(t,e){const i=this.createTelemetryObject(t,{name:e.name,action:n.Aw.Click,behavior:n.wu.Navigate,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature);return this.createTelemetryObjectTag(i)}createAddClickTelemetryTag(t,e){const i=this.createTelemetryObject(t,{name:e.name,action:n.Aw.Click,behavior:n.wu.Add,type:n.c9.ActionButton,content:{headline:e.headline}},e.signature);return this.createTelemetryObjectTag(i)}createHoverShowTelemetryTag(t,e){const i=this.createTelemetryObject(t,{name:e.name,action:n.Aw.Hover,behavior:n.wu.Show,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature);return this.createTelemetryObjectTag(i)}createMouseLeaveCloseTelemetryTag(t,e){const i=this.createTelemetryObject(t,{name:e.name,action:n.Aw.MouseLeave,behavior:n.wu.Close,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature);return this.createTelemetryObjectTag(i)}createDislikeActionTelemetryTag(t,e){const i=this.createTelemetryObject(t,{name:e.name,behavior:n.wu.Dislike,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature);return this.createTelemetryObjectTag(i)}createFollowTelemetryTag(t,e,i){const r=this.createTelemetryObject(t,{name:e.name,action:n.Aw.Click,behavior:i?n.wu.Follow:n.wu.Unfollow,type:n.c9.ActionButton,content:{headline:e.headline}},e.signature);return this.createTelemetryObjectTag(r)}createMenuDataProviderTelemetryTag(t,e,i){const r=this.createTelemetryObject(t,{name:e.name,action:n.Aw.Click,behavior:n.wu.Undefined,type:n.c9.ActionButton,content:{headline:e.headline},zone:i},e.signature);return this.createTelemetryObjectTag(r)}createNavClickWithTypeTelemetryTag(t,e,i){const r=this.createTelemetryObject(t,{name:e.name,action:n.Aw.Click,behavior:n.wu.Navigate,type:i,content:{headline:e.headline,id:e.id,brandId:e.brandId,type:e.type||n.uH.StructuredData}},e.signature);return this.createTelemetryObjectTag(r)}createBehaviorTelemetryTag(t,e,i){const r=this.createTelemetryObject(t,{name:e.name,action:n.Aw.Click,behavior:i,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature);return this.createTelemetryObjectTag(r)}createBaseContentCardTelemetryContext(t,e){const i=this.createTelemetryObject(t,{name:e.name,type:n.c9.ContentCard,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature),r=this.createTelemetryObject(i,{name:e.name,type:n.c9.Headline,behavior:n.wu.Navigate,content:{headline:e.headline,id:e.id,brandId:e.brandId}},e.signature);if(i&&r)return{contentCard:i,destination:r}}initTelemetryBuilder(t,e,i,n,r){this.verticalName=t,this.categoryName=e,this.ext=i,this.zone=n,this.subCategoryName=r}updateExt(t){this.ext=t}}var s=i(23549),a=i(70280);function p(t){try{s.M0.sendActionEvent(t,n.Aw.MouseLeave,n.wu.Close)}catch(t){return}}function d(t){try{s.M0.sendActionEvent(t,n.Aw.Hover,n.wu.Show)}catch(t){return}}function c(t,e){try{s.M0.sendActionEvent(t,n.Aw.Click,n.wu.Navigate,e)}catch(t){return}}function l(t,e,i){try{s.M0.sendActionEvent(t,e?n.Aw.KeyPress:n.Aw.Click,i?n.wu.Follow:n.wu.Unfollow)}catch(t){return}}function h(t){try{if(!t)throw new Error("Current target is undefined, cannot send content view telemetry.");s.M0.sendContentViewEvent(t,a.NS.View)}catch(t){return}}function u(t,e){const i=e?`${e}`:"";s.M0.addOrUpdateTmplProperty(t,i)}function g(t){s.M0.removeTmplProperty(t)}function m(t){for(const e of t)g(e)}var S,f=i(88826);!function(t){t.safeExecute=function(t,e,i,n,r,o={}){try{return t()}catch(t){return i&&(0,f.H)(i,`${n}: ${t?.message}`,r,o),e}},t.safeExecuteAsync=async function(t,e,i,n,r,o={}){try{return await t()}catch(t){return i&&(0,f.H)(i,`${n}: ${t?.message}`,r,o),Promise.resolve(e)}},t.logExceptionWithFormat=function(t,e,i,n,r,o={}){(0,f.OO)(t,e,`${n}${n?": ":""}${i}`,r,o)},t.logErrorWithFormat=function(t,e,i,n,r={}){(0,f.H)(t,`${i}${i?": ":""}${e}`,n,r)}}(S||(S={}))},11344:function(t,e,i){"use strict";i.r(e),i.d(e,{SportsHidePopupTransformer:function(){return C},SportsInfoTransformer:function(){return T}});var n=i(4589),r=i(87492),o=i(68250),s=i(76611),a=i(80501),p=i(16754),d=i(39157),c=i(95153),l=i(7476),h=i(88826);const u={[n.mW.Leaderboard]:n.nT.Leaderboard,[n.mW.Cricket]:n.nT.SportsCricket,[n.mW.Tennis]:n.nT.SportsTennis,[n.mW.SideBySide]:n.nT.SportsMatchList,[n.mW.FRE]:n.nT.SportsFre};var g=i(51628),m=i(25158),S=i.n(m),f=i(32614),y=i(55524),w=i(62512);class T extends n.tX{constructor(){super(...arguments),this.telemetryConstants={},this.isPinned=!1,this.cardSize=a.Nv._1x_2y,this.reasonText="",this.signature=null,this.getTelemetryExt=t=>{const e=t.get(n.pX.telemetryExt),i=(0,g.jC)(t),r=(0,g.nU)(t),o=e||this.widgetDimension,s=r?r.tabContent?.logMessage:i&&i.logMessage||{},a=r?.primaryEntityId,p=r.hash,d=t.get(n.pX.currentSpotlightEntityId)===a;return this.signature=d?t.get(n.pX.previewTypeInfo)?.previewType:p,{...o,...s,signature:this.signature}},this.getContextualFeedbackData=t=>t.get(n.pX.wpoMetadata)?.isGA??!1?{cFId:t.get(n.pX.wpoMetadata)?.cfId}:null,this.getBackgroundImage=t=>{const e=(0,g.nU)(t);return e?.tabContent?.showBackgroundImage?this.getBackgroundImageFromMap(e.tabContent.backgroundImageMap):null},this.createReasonText=t=>{const e=(0,g.nU)(t);return(0,g.eX)((0,g.vG)(t),this.transformerProvider.strings,e?.primaryEntityType,this.transformerProvider.config.enableReasonIcon)},this.getInterestMenuData=(t,e)=>{if(e||this.isPaginationSwitchingTabs(t)||this.matchUXType===n.mW.FRE||(0,g.nU)(t)?.tabType===n.Zt.EventBrief)return;const i=this.getInterestMenuItems(t);if(!i.length)return;const{yourTeamsLeagues:r,moreLeagues:o,addSports:s,interestMenuToolTip:a}=this.transformerProvider.strings;return{badgeAccentColor:"#cc0000",followedInterestsTitle:r,recommendedInterestsTitle:o,interestMenuItems:i,footerMenuItem:{onClick:()=>this.transformerProvider.openSearchViewHandler?.(!0),text:s},interestMenuToolTip:a}},this.getInterestMenuItems=t=>{const e=t.get(n.pX.allRecommendations),i=t.get(n.pX.currentTabEntityId);return e.map((t=>{const{id:e,hasExplicitInterest:n,imageUrl:r,displayText:o,isLive:s,imageId:a,name:p,tabContentReason:d,tabContentType:c}=t,l=r||(0,g.xx)(a,!a,this.transformerProvider.config.suggestionImageInfo);return{id:e,imageUrl:(0,g.WO)(l),title:o||p,isActive:i===e,badge:s?this.transformerProvider.strings.sportsLive:"",isFollowed:n,onClick:()=>{this.onInterestMenuItemClick(t)},tabContentReason:d,tabContentType:c}}))},this.onInterestMenuItemClick=async t=>{await(this.transformerProvider.interestMenuItemClickEntityHandler?.(t)),this.transformerProvider.updateActionHistory(t.id,a.R0.dropdownHistory,"")},this.getActionMenuItems=t=>{const e=(0,g.nU)(t);if(!e||!(0,g.MK)(e.tabType))return[{glyph:S(),title:(0,w.WU)(this.transformerProvider.strings.sportsNotInterested,e?.primaryEntityName||""),id:"dislike",telemetryTag:this.transformerProvider.telemetryBuilder.createAddClickTelemetryTag(this.tabTelemetryObject,{...this.telemetryConstants,name:n.DM.DislikeSports,signature:this.signature}),onClick:async()=>{this.transformerProvider.hideClickHandler?.(e?.primaryEntityId||"")}}]},this.actionMenuButtonClickHandler=t=>{this.transformerProvider.config.isDynamicFeed&&this.transformerProvider.supportedSdCardActionMenuItems&&this.toggleMoneyInfoCardActions(t)},this.settingsHandler=t=>{"onShowSettingsEnd"===t?this.transformerProvider.openSearchViewHandler?.(!0):"onHideSettingsEnd"===t&&this.transformerProvider.openSearchViewHandler?.(!1)},this.getSportsMatchUXType=t=>{const e=(0,g.nU)(t);if(e){switch(e.tabType){case n.Zt.MotorSportsSingleRace:case n.Zt.MotorSportsRaceList:case n.Zt.GolfSchedule:case n.Zt.GolfLeaderBoard:return n.mW.Leaderboard;case n.Zt.Fre:return n.mW.FRE;case n.Zt.Cricket:return n.mW.Cricket;case n.Zt.Tennis:return n.mW.Tennis;case n.Zt.Spotlight:return n.mW.SportsSpotlight}return n.mW.SideBySide}},this.isReasonTextEnabled=t=>this.transformerProvider.config.enableReason&&t!==a.Nv._1x_1y,this.isShowInfoButtonText=t=>{const e=(0,g.nU)(t),i=e?.primaryEntityId,r=Boolean((0,g.qO)(e?.tabType)),o=(0,g.uh)(e?.tabType),s=t.get(n.pX.currentSpotlightEntityId)===i;return""===this.reasonText&&this.transformerProvider.config.enableReasonIcon&&!r&&!s&&!o}}static getInstance(t,e){const i=`SportsInfoTransformer_${t}`,n=y.Gq.get(i,(()=>({})));return n[i]||(n[i]=new T(e)),n[i]}async transform(t){this.currentTabType=(0,g.Cu)(t),this.cardSize=t.get(n.pX.cardSize),this.rootTelemetryObject=t.get(n.pX.rootTelemetryObject),this.widgetDimension=t.get(n.pX.widgetDimension),this.isPinned=t.get(n.pX.isPinned),this.telemetryBuilder=this.transformerProvider.telemetryBuilder,s.Xw.safeExecute((()=>{this.setTelemetry(t)}),void 0,l.EWv,"SportsInfo - set telemetry object error"),this.matchUXType=this.getSportsMatchUXType(t);const e=await s.Xw.safeExecuteAsync((async()=>await this.getHidePopupViewModel(t)),void 0,l.Ms,"SportsInfo - error getting hide popup view model"),i=await s.Xw.safeExecuteAsync((async()=>{let e=this.currentTabType?n.j3[this.currentTabType]:void 0;return e&&this.currentTabType&&this.matchUXType?(this.currentTabType===n.Zt.TeamVsTeam?e=u[this.matchUXType]:this.currentTabType===n.Zt.Spotlight&&this.transformerProvider.config.enableCountdownSpotlight&&void 0!==(0,g.lX)(t)?.countdown&&(this.matchUXType=n.mW.Countdown,e=n.nT.SportsCountdown),await this.getCurrentView(t,e||"")):Promise.resolve(this.getDefaultContentView())}),this.getDefaultContentView(),l.Ms,`SportsInfo - error getting content view for "${this.currentTabType}" tab, "${this.matchUXType}" match UX type`),r=this.getSportsSDCardData(t);return this.getContainerView(r,i,e)}getContainerView(t,e,i){return e||(e=this.getDefaultContentView()),{currentViewTemplate:e.viewTemplate,sdCardData:t,viewModel:{tabTelemetryTag:this.telemetryBuilder.createTelemetryObjectTag(this.tabTelemetryObject),telemetryTag:this.telemetryBuilder.createTelemetryObjectTag(this.telemetryObject),hidePopupViewModel:i},feedsNotificationToastViewModel:{notificationToastTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.DM.SportsNotificationToast},s.XX.Show),navLinkTelemetryTag:this.telemetryBuilder.createNavClickTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.DM.SportsNotificationToastLink}),behaviorLinkTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.DM.SportsNotificationToastLink},s.XX.Customize),dismissNotificationToastTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.DM.SportsNotificationToastDismiss},s.XX.Close),yesButtonTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.DM.SportsNotificationToastYes},s.XX.Customize),noButtonTelemetryTag:this.telemetryBuilder.createBehaviorTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.DM.SportsNotificationToastNo},s.XX.Customize),telemetryTag:this.telemetryBuilder.createViewTelemetryTag(this.telemetryObject,{...this.telemetryConstants,name:n.DM.SportsNotificationToast})}}}getDefaultContentView(){return{viewTemplate:void 0}}async getCurrentView(t,e){const i=t.get(n.pX.cardSize),r=t.get(n.pX.followedSports);this.reasonText="";const o=(0,g.nU)(t),s={cardSize:i,telemetryObject:this.tabTelemetryObject,telemetryConstants:this.telemetryConstants};switch(e){case n.nT.SportsMatchList:{this.reasonText=this.isReasonTextEnabled(i)?this.createReasonText(t):"";const n={...s,followedSports:r,numberOfMatches:(0,g.mU)(i,this.matchUXType,this.transformerProvider.config.maxNumberOfMatches),reason:this.reasonText,sportsMatchOverallData:(0,g.rg)(t),sportsMatchUXType:this.getSportsMatchUXType(t)};return await this.transformerProvider.generateView(n,e)}case n.nT.SportsCricket:{const i={...s,leagueId:o.tabContent?.league.id||"",matchData:(0,g.rg)(t)||[],followedSports:r};return await this.transformerProvider.generateView(i,e)}case n.nT.SportsSpotlight:{const i={...s,followedSports:r,spotlightData:(0,g.lX)(t)};return await this.transformerProvider.generateView(i,e)}case n.nT.Leaderboard:{const i={...s,cardData:{primaryEntityId:o?.primaryEntityId,dataType:o?.tabType},matchData:(0,g.rg)(t)||[]};return await this.transformerProvider.generateView(i,e)}case n.nT.SportsTennis:{const i={...s,matchData:(0,g.rg)(t)||[]};return await this.transformerProvider.generateView(i,e)}case n.nT.SportsMarchmadness:{this.reasonText=this.isReasonTextEnabled(i)?this.createReasonText(t):"";const n={...s,tabContent:o.tabContent,matchData:(0,g.rg)(t)||[],reason:this.reasonText,followedSports:r};return await this.transformerProvider.generateView(n,e)}case n.nT.SportsFre:{const i=(0,g.o_)(t);if(!i)return void this.logBadTabDataError(e);const n={...s,followedSports:r,freData:i,tabData:o,matchData:(0,g.rg)(t)||[]};return await this.transformerProvider.generateView(n,e)}case n.nT.SportsCountdown:{const i=(0,g.lX)(t);if(!i)return void this.logBadTabDataError(e);const n={...s,spotlightData:i,countdown:i.countdown,leagueImgUrl:(0,g.xx)(o?.primaryEntityImage,!1,{width:44,height:44,format:f.D3.PNG})};return await this.transformerProvider.generateView(n,e)}case n.nT.TeamExploration:{if(!o||!o.tabContent||o.tabType!==n.Zt.TeamVsTeamExploration)return void this.logBadTabDataError(e,o);const i=this.getExplorationMetadata(t,o);return await this.transformerProvider.generateView(i,e)}case n.nT.CricketExploration:{if(!o||!o.tabContent||o.tabType!==n.Zt.CricketExploration)return void this.logBadTabDataError(e,o);const i=this.getExplorationMetadata(t,o);return await this.transformerProvider.generateView(i,e)}case n.nT.TennisExploration:{if(!o||!o.tabContent||o.tabType!==n.Zt.TennisExploration)return void this.logBadTabDataError(e,o);const i=this.getExplorationMetadata(t,o);return await this.transformerProvider.generateView(i,e)}case n.nT.SportsEventBrief:{if(!o.tabContent)return void this.logBadTabDataError(e,o);const t={...s,eventBriefData:o.tabContent};return await this.transformerProvider.generateView(t,e)}case n.nT.SportsSpotlightTennis:{const i=(0,g.lX)(t);if(!i)return void this.logBadTabDataError(e,o);const n={...s,sportsSpotlightTennisData:i};return await this.transformerProvider.generateView(n,e)}case n.nT.SportsSpotlightRace:{const i=(0,g.lX)(t);if(!i)return void this.logBadTabDataError(e,o);const n={...s,sportsSpotlightRaceData:i};return await this.transformerProvider.generateView(n,e)}case n.nT.SportsSpotlightGolf:{const i=(0,g.lX)(t);if(!i)return void this.logBadTabDataError(e,o);const n={...s,sportsSpotlightData:i};return await this.transformerProvider.generateView(n,e)}case n.nT.SportsStandingsRankings:{const t=o.tabContent;if(!t)return void this.logBadTabDataError(e,o);const i={...s,standingsData:t.standings,rankingsData:t.rankings};return await this.transformerProvider.generateView(i,e)}default:throw new Error(`Unexpected tag name "${e}"`)}}getExplorationMetadata(t,e){const i=t.get(n.pX.cardSize),r=(0,g.l0)(t,e.tabContent.league.id),{heading:o,subheading:s,league:a}=e.tabContent;return{followedSports:t.get(n.pX.followedSports),cardSize:i,reasonText:o,secondaryText:s,matchList:(0,g.rg)(t)||[],telemetryConstants:this.telemetryConstants,league:a,isDisliked:r,logoPrimaryColor:e.primaryColorHex,telemetryObject:this.tabTelemetryObject}}logBadTabDataError(t,e){const i=e?JSON.stringify(e):void 0;(0,h.H)(l.JaT,"Bad sports data",`tabName=${t} market=${d.jG.CurrentMarket}`,i)}async getHidePopupViewModel(t){const e=(0,g.nU)(t),i={cardData:{primaryEntityId:e.primaryEntityId||"",primaryEntityName:e.primaryEntityName||""},telemetryConstants:this.telemetryConstants,parentTelemetryObject:this.telemetryObject},r=await this.transformerProvider.generateView(i,n.nT.SportsHidePopup);return r?.viewModel}setTelemetry(t){const e=(0,g.nU)(t),i=this.getTelemetryExt(t);let r;if(this.telemetryConstants={headline:e?.tabType??n.q$.unknown,id:e?.tabContent?.league?.id||"",brandId:e?.primaryEntityId||"",signature:this.signature},this.transformerProvider.config.isDynamicFeed){const e=t.get(n.pX.isPinned);r=(0,p.xH)(e,"SportsMatch")}let o=n.DM.SportsCarousel,s=e?.primaryEntityName??n.DM.SportsFRE;(0,g.qO)(e?.tabType)&&(o=n.DM.SportsFRE,s=n.DM.SportsFRE);const a=this.transformerProvider.telemetryBuilder;a.initTelemetryBuilder(n.DM.Vertical,s,i,r);const d={...this.telemetryConstants,name:n.DM.SportsCard,signature:this.signature};this.telemetryObject=a.createViewTelemetryObject(this.rootTelemetryObject,d),this.tabTelemetryObject=a.createViewTelemetryObject(this.telemetryObject,{...this.telemetryConstants,name:o,signature:this.signature})}getSportsSDCardData(t){const{darkColor:e,lightColor:i}=this.getSportsSdCardFillColor(t),o=(0,r.Vg)(e,i),s=this.getBackgroundImage(t),a=s?.dark,p=s?.light;return{headerData:this.transformToHeaderData(t),footerData:this.transformToFooterData(t),interestManagerData:this.getSportsInterestManagerData(t),toggleInterestManager:t.get(n.pX.toggleInterestManager),id:"",cardSize:t.get(n.pX.cardSize),childTemplateType:"sd-card",gridArea:"",...o,parentTelemetryObject:this.tabTelemetryObject,contextualFeedbackData:this.getContextualFeedbackData(t),immersiveCard:this.shouldShowImmersiveCard(t),darkImmersiveImage:a&&{source:a,altText:""},lightImmersiveImage:p&&{source:p,altText:""}}}shouldShowImmersiveCard(t){const e=(0,g.nU)(t);if(e)return Boolean(e.tabContent?.showBackgroundImage)}getBackgroundImageFromMap(t){if(!t)return null;return{dark:(0,g.PQ)("",!0,this.cardSize,t),light:(0,g.PQ)("",!1,this.cardSize,t)}}getSportsSdCardFillColor(t){let e=o.Gi.DarkSea,i=o.iV.LightGreen;const{tabType:r}=(0,g.nU)(t)||{};if((0,g.MK)(r))return{darkColor:e,lightColor:o.iV.LightBlue};switch(this.matchUXType){case n.mW.SideBySide:case n.mW.SportsSpotlight:i=o.iV.LightBlue;break;case n.mW.Leaderboard:{const t=r===n.Zt.MotorSportsSingleRace||r===n.Zt.MotorSportsRaceList;i=t?o.iV.LightOrange:o.iV.LightGreen,e=t?o.Gi.DarkDesert:o.Gi.DarkSea;break}}return{darkColor:e,lightColor:i}}transformToHeaderData(t){const e=this.getHeaderTitle(t),i=this.getSeeMoreUrl(t),r=this.transformerProvider.config.isDynamicFeed,o=this.isShowInfoButtonText(t),s=t.get(n.pX.isInit),a=o?this.createReasonText(t):void 0,{addSports:d,pinButton:c}=this.transformerProvider.strings;return{title:e,titleNavigationLink:i,headerLogo:this.getHeaderIcon(t),interestMenuData:this.getInterestMenuData(t,s),isWidget:r,isPinned:this.transformerProvider.supportedSdCardActionMenuItems&&this.transformerProvider.supportedSdCardActionMenuItems.includes(p.B$.Unpin),onActionMenuButtonClick:this.actionMenuButtonClickHandler,telemetryHeadlines:{title:e,logo:e},telemetryDestinationUrl:{title:i,logo:i},actionMenuData:r||s?{}:{hideCardCallback:()=>{this.transformerProvider.hidePopupToggleHandler(!0)},moreSettingsPersonalizeCallback:()=>{this.transformerProvider.moreSettingsClickHandler?.()},followInterestsCallback:()=>this.transformerProvider.openSearchViewHandler?.(!0),items:this.getActionMenuItems(t),isManageInterests:!1,strings:{followInterestsTitle:d||""},isFollowInterests:this.isPaginationSwitchingTabs(t)||void 0},infoButton:a?.length>0?{data:a,tooltip:a}:void 0,strings:{pinIconToolTip:c||"Pinned"}}}getSportsInterestManagerData(t){return{interestOptions:this.getSportsInterestOptions(t),interestsSuggestionTitle:this.transformerProvider.strings.suggestedForYou,onInterestOptionClick:t=>{this.transformerProvider.followClickEntityHandler&&this.transformerProvider.followClickEntityHandler({id:t.id,name:t.interestName,type:t.interestType,...t.metadata},!t.isFollowed,t.metadata?.webSearchUrl||"")},onHandleSearch:this.transformerProvider.searchInterestsHandler,onDismissInterestManager:this.transformerProvider.onDismissInterestManagerHandler,strings:{searchPlaceholder:this.transformerProvider.strings.searchPlaceholder}}}getSportsInterestOptions(t){const e=t.get(n.pX.searchSuggestions)||[],i=t.get(n.pX.followedSports);return e.map((t=>{const e=t?.id;t.imageUrl=t?.imageUrl||(0,g.xx)(t?.imageId,!t?.ImageId,this.transformerProvider.config.suggestionImageInfo);const n=t.webSearchUrl||(0,g.Vr)(t.clickThroughUrl);return{id:e,interestType:t?.type,interestName:t?.displayText||"",isFollowed:(0,g.b)(e,i),image:{url:t?.imageUrl||"",altText:"alt text"},metadata:{yId:t.yId,displayText:t.displayText,webSearchUrl:n,imageUrl:t?.imageUrl}}}))}getHeaderIcon(t){const e=(0,g.nU)(t);return e&&(0,g.MK)(e.tabType)?'<img src="https://assets.msn.com/staticsb/statics/latest/sports/icons/Cup.svg" />':`<img src="${(0,g.xx)(e?.primaryEntityImage,!1,this.transformerProvider.config.teamImageInfoEnhanced)}" />`}transformToFooterData(t){const e=this.getSeeMoreText(t),i=this.getSeeMoreUrl(t),r=t.get(n.pX.currentTabEntityId);let o=0,s=0,a=[];const p=t.get(n.pX.isInit);return p||(o=this.getPaginationPageCount(t),s=this.getCurrentPageIndex(t),a=this.getInterestMenuItems(t),t.set(n.pX.interestOptions,a)),{footerLink:{text:e,navigationUrl:i},paginationData:!p&&this.shouldRenderPagination(o,t)?{currentPageIndex:s,onFlipperClick:(t,e)=>{this.transformerProvider.paginationFlipperClickHandler?.(t,e)},onDotClick:(e,i)=>{if(!this.isPaginationSwitchingTabs(t))return void this.transformerProvider.paginationDotClickHandler?.(e);const n=a[e].id;r!==n&&this.transformerProvider.interestMenuItemClickEntityHandler?.(a[e])},pageCount:o}:void 0,telemetryHeadlines:{footerLink:e}}}shouldRenderPagination(t,e){return!this.shouldHidePaginationExploration(e)&&(!!this.isPaginationSwitchingTabs(e)||t>1)}shouldHidePaginationExploration(t){const e=(0,g.nU)(t);return!(!(0,g.MK)(e?.tabType)||t.get(n.pX.isExplorationCard))}getPaginationPageCount(t){if(this.isPaginationSwitchingTabs(t))return this.getInterestMenuItems(t).length;const e=(0,g.jC)(t);return e.Model?.Tabs.length||1}getCurrentPageIndex(t){if(this.isPaginationSwitchingTabs(t)){const e=this.getInterestMenuItems(t),i=t.get(n.pX.currentTabEntityId);return e.findIndex((t=>t.id===i))+1}return(0,g.Qu)(t)}isPaginationSwitchingTabs(t){const e=(0,g.nU)(t);return!!(0,g.MK)(e?.tabType)||this.transformerProvider.config.enableFlipper&&this.cardSize!==a.Nv._1x_1y}getHeaderTitle(t){const e=(0,g.nU)(t);return e&&(0,g.MK)(e.tabType)?this.transformerProvider.strings.widgetHeader:e?.tabContent?.titleText||e?.primaryEntityName||this.transformerProvider.strings.widgetHeader}getEntityName(t){return(0,g.nU)(t).primaryEntityName||""}getSeeMoreUrl(t){const e=(0,g.nU)(t),i=(0,g.Vr)(e.clickThroughUrl);return(0,g.MK)(e.tabType)||(0,g.qO)(e.tabType)?(0,g.G8)(i,{src:"fre"}):i}getSeeMoreText(t){const{seeMoreSports:e,eventBriefFooterText:i}=this.transformerProvider.strings,r=(0,g.nU)(t);return r.tabType===n.Zt.EventBrief?i:r?.tabContent?.footerText||(0,w.WU)(e,this.getEntityName(t))}toggleMoneyInfoCardActions(t){if(this.transformerProvider.supportedSdCardActionMenuItems){const e={},i={menuItems:(0,p.aS)(this.transformerProvider.supportedSdCardActionMenuItems,this.transformerProvider.strings?.poweredByMSSports,e,"sports",(0,g.lz)(this.cardSize),this.settingsHandler),referrerButton:t.currentTarget,requestContext:new c.fH,cardSize:this.cardSize};this.transformerProvider.sdCardActionClickHandler?.(i,"SportsMatch")}}}class C extends n.tX{static getInstance(t){return C.instance||(C.instance=new C(t)),C.instance}async transform(t){this.parentTelemetryObject=t.parentTelemetryObject;return{viewModel:await this.getViewModel(t)}}async getViewModel(t){return{changeLeagueTeamCallback:()=>{this.transformerProvider.hidePopupToggleHandler?.(!1),this.transformerProvider.openSearchViewHandler?.(!0)},sendFeedbackCallback:()=>{this.transformerProvider.hidePopupToggleHandler?.(!1)},hideSportsCardCallback:()=>{this.transformerProvider.hidePopupToggleHandler?.(!1),this.transformerProvider.hideClickHandler?.("")},cancelHideCallback:()=>{this.transformerProvider.hidePopupToggleHandler?.(!1)},gobackToSportsCard:()=>{this.transformerProvider.hidePopupToggleHandler?.(!1)},handleSportsNotInterested:()=>{this.transformerProvider.hidePopupToggleHandler?.(!1),this.transformerProvider.hideClickHandler?.(t.cardData?.primaryEntityId||"")},feedbackDialogConfigInfo:this.transformerProvider.config.feedbackDialogConfigInfo,telemetryTag:this.transformerProvider.telemetryBuilder.createViewTelemetryTag(this.parentTelemetryObject,{...t.telemetryConstants,name:n.DM.PopupHideSport}),changeLeagueTeamTelemetryTag:this.transformerProvider.telemetryBuilder.createBehaviorTelemetryTag(this.parentTelemetryObject,{...t.telemetryConstants,name:n.DM.ChangeLeagueTeam},s.XX.Customize),feedbackTelemetryTag:this.transformerProvider.telemetryBuilder.createBehaviorTelemetryTag(this.parentTelemetryObject,{...t.telemetryConstants,name:n.DM.Feedback},s.XX.Paginate),popupHideSportTelemetryTag:this.transformerProvider.telemetryBuilder.createBehaviorTelemetryTag(this.parentTelemetryObject,{...t.telemetryConstants,name:n.DM.PopupHide},s.XX.Hide),popupCancelTelemetryTag:this.transformerProvider.telemetryBuilder.createBehaviorTelemetryTag(this.parentTelemetryObject,{...t.telemetryConstants,name:n.DM.PopupCancel},s.XX.Cancel),popupCloseTelemetryTag:this.transformerProvider.telemetryBuilder.createBehaviorTelemetryTag(this.parentTelemetryObject,{...t.telemetryConstants,name:n.DM.PopupClose},s.XX.Close),menuDislikeSportTelemetryTag:this.transformerProvider.telemetryBuilder.createBehaviorTelemetryTag(this.parentTelemetryObject,{...t.telemetryConstants,name:n.DM.DislikeSports},s.XX.Dislike),strings:{...this.transformerProvider.strings,sportsNotInterestedFormatted:this.transformerProvider.strings?.sportsNotInterested?.replace("{0}",t.cardData?.primaryEntityName||"")}}}}Promise.resolve().then(i.bind(i,15179))},88793:function(t,e,i){"use strict";var n=i(66701),r=i(4589),o=i(40015);const{registerExperience:s}=n.n;function a(t){return`${t}Bundle`}const p=(t,e)=>s(t,(0,o.AF)(t,e));p(a(r.lo.SportsInfo),(()=>Promise.all([i.e("common-others"),i.e("common-segments"),i.e("common-feed-libs"),i.e("common-cscore"),i.e("cs-core-desktop_card-components_dist_card-banner_index_js-cs-core-desktop_card-components_dis-ce18c8"),i.e("sports-info")]).then(i.bind(i,11344)))),p(a(r.lo.SportsInfoSpan),(()=>i.e("sports-info-span").then(i.bind(i,62158)))),p(a(r.lo.SportsAugmentCard),(()=>i.e("sports-augment-card").then(i.bind(i,36718)))),p(a(r.lo.SportsCricket),(()=>i.e("sports-cricket").then(i.bind(i,31379)))),p(a(r.lo.SportsFre),(()=>i.e("sports-fre").then(i.bind(i,33163)))),p(a(r.lo.SportsMatchList),(()=>i.e("sports-match-list").then(i.bind(i,58454)))),p(a(r.lo.SportsLeaderboard),(()=>i.e("sports-leaderboard").then(i.bind(i,26391)))),p(a(r.lo.SportsTennis),(()=>i.e("sports-tennis").then(i.bind(i,35815)))),p(a(r.lo.SportsMarchmadness),(()=>i.e("sports-marchmadness").then(i.bind(i,12084)))),p(a(r.lo.SportsSpotlight),(()=>i.e("sports-spotlight").then(i.bind(i,73856)))),p(a(r.lo.SportsCountdown),(()=>i.e("sports-countdown").then(i.bind(i,86136)))),p(a(r.lo.SportsTeamExploration),(()=>i.e("sports-team-exploration").then(i.bind(i,92169)))),p(a(r.lo.SportsCricketExploration),(()=>i.e("sports-cricket-exploration").then(i.bind(i,77533)))),p(a(r.lo.SportsTennisExploration),(()=>i.e("sports-tennis-exploration").then(i.bind(i,50144)))),p(a(r.lo.SportsEventBrief),(()=>i.e("sports-tennis").then(i.bind(i,52753)))),p(a(r.lo.SportsSpotlightRace),(()=>i.e("sports-info-spotlight-race").then(i.bind(i,73834)))),p(a(r.lo.SportsSpotlightTennis),(()=>i.e("sports-info-spotlight-tennis").then(i.bind(i,10441)))),p(a(r.lo.SportsSpotlightGolf),(()=>i.e("sports-info-spotlight-golf").then(i.bind(i,59044)))),p(a(r.lo.SportsStandingsRankings),(()=>i.e("sports-info-standings-rankings").then(i.bind(i,68984))))},4589:function(t,e,i){"use strict";var n,r,o;i.d(e,{Us:function(){return S},O7:function(){return r},x_:function(){return o},TR:function(){return w},q$:function(){return s},Df:function(){return a},iE:function(){return H},tX:function(){return E},lo:function(){return M},nT:function(){return I},fs:function(){return m},aI:function(){return g},w_:function(){return c},pX:function(){return v},sF:function(){return b},RT:function(){return D},mW:function(){return y},tY:function(){return h},Bm:function(){return u},z6:function(){return l},I8:function(){return d},u2:function(){return P},W3:function(){return R},Zt:function(){return f},DM:function(){return F},TM:function(){return p},j3:function(){return k}}),function(t){t.Initial="initial",t.Default="default",t.Settings="settings",t.ColdStart="coldstart"}(n||(n={})),function(t){t.scheduledTournaments="GolfSchedule",t.leaderboard="GolfLeaderBoard"}(r||(r={})),function(t){t.singleRace="MotorSportsSingleRace",t.raceList="MotorSportsRaceList"}(o||(o={}));const s=Object.freeze({unknown:"Unknown",football:"Football",baseball:"Baseball",basketball:"Basketball",basketball3x3:"Basketball3x3",cricket:"Cricket",icehockey:"IceHockey",fieldhockey:"FieldHockey","auto racing":"Racing",racing:"Racing",tennis:"Tennis",soccer:"Soccer",golf:"Golf",australianrules:"AustralianRules",rugbyunion:"RugbyUnion",rugbyleague:"RugbyLeague",archery:"Archery",athletics:"Athletics",badminton:"Badminton",cycling:"Cycling",boxing:"Boxing",canoeing:"Canoeing",climbing:"Climbing",equestrianism:"Equestrianism",fencing:"Fencing",gymnasticsartistic:"GymnasticsArtistic",gymnasticsrhytmic:"GymnasticsRhytmic",gymnasticstrampoline:"GymnasticsTrampoline",handball:"Handball",judo:"Judo",karate:"Karate",summerolympics:"SummerOlympics",paralympics:"Paralympics",pentathlon:"Pentathlon",swimmingartistic:"SwimmingArtistic",swimming:"Swimming",diving:"Diving",waterpolo:"WaterPolo",rowing:"Rowing",sailing:"Sailing",shooting:"Shooting",skateboarding:"Skateboarding",surfing:"Surfing",taekwondo:"Taekwondo",triathlon:"Triathlon",tabletennis:"TableTennis",volleyballteam:"VolleyballTeam",volleyballbeach:"VolleyballBeach",weightlifting:"Weightlifting",wrestling:"Wrestling",softball:"Softball",trackandfield:"TrackAndField",mma:"MMA",netball:"Netball",boccia:"Boccia"});var a;!function(t){t.Mentioned="Mentioned",t.Related="Related"}(a||(a={}));const p="CHAMPIONS",d=" - ";var c,l;!function(t){t.preGame="pre-game",t.inprogressGame="inprogress-game",t.postGame="post-game",t.nonlive="non-live",t.toss="Toss",t.dinner="Dinner",t.drinks="Drinks",t.fog="Fog",t.innings="Innings",t.lunch="Lunch",t.stumps="Stumps",t.tea="Tea",t.break="Break",t.superover="SuperOver",t.abandoned="Abandoned",t.postponed="Postponed",t.delayed="Delayed"}(c||(c={})),function(t){t.PreGame="PreGame",t.InProgressGame="InProgressGame",t.InProgress="InProgress",t.Final="Final",t.PostGame="PostGame",t.Live="Live"}(l||(l={}));const h={Badge:"Badge",Preview:"PreviewCard"},u="Sports",g="SportsFre",m={League:"League",Team:"Team"},S={Dislike:"Dislike",Follow:"Follow"};var f,y;!function(t){t.Standings="Standings",t.Articles="Articles",t.TeamVsTeam="TeamVsTeam",t.TeamVsTeamWithBracket="TeamVsTeamWithBracket",t.Tennis="Tennis",t.MotorSportsSingleRace="MotorSportsSingleRace",t.MotorSportsRaceList="MotorSportsRaceList",t.GolfSchedule="GolfSchedule",t.GolfLeaderBoard="GolfLeaderBoard",t.Cricket="Cricket",t.TeamVsTeamExploration="TeamVsTeamExploration",t.CricketExploration="CricketExploration",t.TennisExploration="TennisExploration",t.EventBrief="EventBrief",t.SeasonStatistics="SeasonStatistics",t.Video="Video",t.Countdown="Countdown",t.Fre="FRE",t.Spotlight="Spotlight",t.SpotlightRace="SpotlightRace",t.SpotlightTennis="SpotlightTennis",t.SpotlightGolf="SpotlightGolf",t.StandingsRankings="StandingsRankings"}(f||(f={})),function(t){t.Leaderboard="Leaderboard",t.FRE="Fre",t.Tennis="Tennis",t.Cricket="Cricket",t.SportsSpotlight="SportsSpotlight",t.SideBySide="SideBySide",t.Countdown="Countdown"}(y||(y={}));const w={0:"recommendationNone",1:"recommendationExplicit",2:"recommendationImplicit",3:"recommendationPopular",4:"recommendationLive",5:"recommendationMIT",6:"recommendationLocalPopular",7:"recommendationRecentSelect"};var T=i(291),C=i(55524);const b="sportsInfoAppState";var v;!function(t){t[t.sportsInfoApiData=1]="sportsInfoApiData",t[t.sportsData=2]="sportsData",t[t.sportsSDCardView=3]="sportsSDCardView",t[t.sportsViewMode=4]="sportsViewMode",t[t.tabCurrentPageIndex=5]="tabCurrentPageIndex",t[t.currentTabEntityId=6]="currentTabEntityId",t[t.cardSize=7]="cardSize",t[t.entityDataMap=8]="entityDataMap",t[t.entityViewMap=9]="entityViewMap",t[t.sportsSuggestIDMap=10]="sportsSuggestIDMap",t[t.interestOptions=11]="interestOptions",t[t.allRecommendations=12]="allRecommendations",t[t.dislikedEntities=13]="dislikedEntities",t[t.followedSports=14]="followedSports",t[t.sportsConfig=15]="sportsConfig",t[t.sportsStrings=16]="sportsStrings",t[t.rootTelemetryObject=17]="rootTelemetryObject",t[t.telemetryExt=18]="telemetryExt",t[t.isPinned=19]="isPinned",t[t.isExplorationCard=20]="isExplorationCard",t[t.widgetDimension=21]="widgetDimension",t[t.searchSuggestions=22]="searchSuggestions",t[t.toggleInterestManager=23]="toggleInterestManager",t[t.sportsFeedDataParsed=24]="sportsFeedDataParsed",t[t.feedDataTimestamp=25]="feedDataTimestamp",t[t.wpoMetadata=26]="wpoMetadata",t[t.currentSpotlightEntityId=27]="currentSpotlightEntityId",t[t.previewTypeInfo=28]="previewTypeInfo",t[t.isInit=29]="isInit",t[t.isV2Data=30]="isV2Data"}(v||(v={}));(0,T.h)({getInstance:()=>C.Gq.get("sportsStates",(()=>new Map))});const I={SportsInfo:"sports-sd-container",SportsInfoSpan:"sports-info-span",SportsMatchList:"sports-match-list",SportsMatch:"sports-match",Articles:"sports-articles",TeamExploration:"sports-team-exploration",TeamExplorationMatch:"sports-team-exploration-match",CricketExploration:"sports-cricket-exploration",TennisExploration:"sports-tennis-exploration",ExplorationHead:"sports-exploration-head",Standings:"sports-standings",Leaderboard:"sports-leaderboard",SportsCricket:"sports-cricket",SportsTennis:"sports-tennis",SportsMarchmadness:"sports-marchmadness",FeedsNotificationToast:"feeds-notification-toast",SportsHidePopup:"sports-hidepopup",SportsFre:"sports-fre",SportsEventBrief:"sports-event-brief",SportsSpanMatch:"sports-span-match",SportsSpotlight:"sports-spotlight",SportsGameStats:"sports-game-stats",SportsCountdown:"sports-countdown",SportsAugmentCard:"sports-augment-card",SportsSpotlightRace:"sports-spotlight-race",SportsSpotlightTennis:"sports-spotlight-tennis",SportsTennisMatch:"sports-tennis-match",SportsSpotlightGolf:"sports-spotlight-golf",SharedHeroNewsCard:"shared-hero-news-card",SportsSimpleMatch:"sports-simple-match",SportsStandingsRankings:"sports-standings-rankings"},k={TeamVsTeam:I.SportsMatchList,TeamVsTeamWithBracket:I.SportsMarchmadness,Standings:I.Standings,Articles:I.Articles,TeamVsTeamExploration:I.TeamExploration,EventBrief:I.SportsEventBrief,CricketExploration:I.CricketExploration,TennisExploration:I.TennisExploration,Spotlight:I.SportsSpotlight,SpotlightRace:I.SportsSpotlightRace,SpotlightTennis:I.SportsSpotlightTennis,SpotlightGolf:I.SportsSpotlightGolf,StandingsRankings:I.SportsStandingsRankings},M={SportsInfo:"SportsInfo",SportsInfoSpan:"SportsInfoSpan",SportsMatchList:"SportsMatchList",SportsMatch:"SportsMatch",SportsSpanMatch:"SportsSpanMatch",SportsArticle:"SportsArticle",SportsTeamExploration:"SportsTeamExploration",SportsTeamExplorationMatch:"SportsTeamExplorationMatch",SportsCricketExploration:"SportsCricketExploration",SportsTennisExploration:"SportsTennisExploration",SportsExplorationHead:"SportsExplorationHead",SportsLeaderboard:"SportsLeaderboard",SportsCricket:"SportsCricket",SportsTennis:"SportsTennis",SportsMarchmadness:"SportsMarchmadness",SportsEventBrief:"SportsEventBrief",FeedsNotificationToast:"FeedsNotificationToast",SportsHidePopup:"SportsHidePopup",SportsFre:"SportsFre",SportsSpotlight:"SportsSpotlight",SportsGameStats:"SportsGameStats",SportsCountdown:"SportsCountdown",SportsAugmentCard:"SportsAugmentCard",SportsSpotlightRace:"SportsSpotlightRace",SportsSpotlightTennis:"SportsSpotlightTennis",SportsTennisMatch:"SportsTennisMatch",SportsSpotlightGolf:"SportsSpotlightGolf",SharedHeroNewsCard:"SharedHeroNewsCard",SportsSimpleMatch:"SportsSimpleMatch",SportsStandingsRankings:"SportsStandingsRankings"},D={SportsMatch:"SportsMatch",EventSDCardSportsMIT1:"EventSDCardSportsMIT1",EventSDCardSportsMIT2:"EventSDCardSportsMIT2",EventSDCardSportsMIT3:"EventSDCardSportsMIT3",SportsSpans:"SportsSpans",SportsAugment:"SportsAugment",SportsHeroTeamVsTeam:"SportsHeroTeamVsTeam",SportsHeroNews:"SportsHeroNews",SportsHeroStandingsRankings:"SportsHeroStandingsRankings",SportsHeroFre:"SportsHeroFre",SportsHeroSeasonStatistics:"SportsHeroSeasonStatistics",SportsHeroMatchStatistics:"SportsHeroMatchStatistics",SportsHeroVideo:"SportsHeroVideo"};D.SportsMatch,M.SportsInfo,D.EventSDCardSportsMIT1,M.SportsInfo,D.EventSDCardSportsMIT2,M.SportsInfo,D.EventSDCardSportsMIT3,M.SportsInfo,D.SportsSpans,M.SportsInfoSpan,D.SportsAugment,M.SportsAugmentCard;var x=i(80501);class E extends x.Zl{}class P extends x.Zl{}class H extends x.Zl{}const F={SportsCard:"SportsCard",Game:"sports_game",Team:"sports_team",Vertical:"sports",DislikeSports:"HideSport",SportsSuggest:"suggestresult",SportsSuggestUrl:"suggesturl",FollowSports:"Follow",SportsFRE:"freexperience",FollowTeam:"follow_team",ChangeLeagueTeam:"ChangeLeagueTeam",Feedback:"Feedback",PopupHideSport:"PopupHideSport",PopupHide:"popup_hide",PopupCancel:"popup_cancel",PopupClose:"popup_close",EventBriefClick:"event_brief",MarchMadnessCard:"MarchMadnessCard",SportsArticle:"sports_article",SportsCarousel:"SportsCarousel",ExplorationDislike:"ExplorationDislike",SportsTopSpan:"SportsTopSpan",SportsStickySpan:"SportsStickySpan",SportsTopSpanOverlay:"SportsTopSpanOverlay",SportsStickySpanOverlay:"SportsStickySpanOverlay",SeeDetails:"seedetails",SportsNotificationToast:"SportsNotificationToast",SportsNotificationToastLink:"SportsNotificationToastLink",SportsNotificationToastDismiss:"SportsNotificationToastDismiss",SportsNotificationToastYes:"SportsNotificationToastYes",SportsNotificationToastNo:"SportsNotificationToastNo",SportsSpotlightVideo:"SpotlightVideo",Countdown:"Countdown",PinToDesk:"PinToDesk",Destination:"destination",SportsSpotlightTennisCard:"SportsSpotlightTennisCard",SportsSpotlightRaceCard:"SportsSpotlightRaceCard",SportsSpotlightGolfCard:"SportsSpotlightGolfCard",SportsStandingsRankingsCard:"SportsStandingsRankingsCard",SportsStandingsRankingsTable:"SportsStandingsRankingsTable"},R={ChannelStoreLaunched:"ChannelStoreLaunched",Badge:"SportsBadge",TaskbarRotation:"SportsTBR",SportsFrePresent:"SportsFrePresent",SportsTabType:"SportsTabType",SportsLeagueName:"SportsLeagueName",SportsDefaultLeagueShown:"SportsDefaultLeagueShown",SportsUserFollowsDefaultLeague:"SportsUserFollowsDefaultLeague",SportsUserFollowsOtherteams:"SportsUserFollowsOtherteams",SportsDropdownChangedLeague:"SportsDropdownChangedLeague",SportsUserFollowsDropdownChangedLeague:"SportsUserFollowsDropdownChangedLeague",SportsDropdownChangedViewShown:"SportsDropdownChangedViewShown",SportsCardeSize:"SportsCardeSize",SportsReasonShown:"SportsReasonShown",SportsRecommendationPopupShown:"SportsRecommendationPopupShown",SportsDfltRecoPopupShown:"SportsDefaultRecommendationPopupShown",SportsUsabilityPopupShown:"SportsUsabilityPopupShown",SportsExplorationCardShown:"SportsExplorationCardShown",SportsEventBriefShown:"SportsEventBriefShown",SpotlightCardPreviewType:"SpotlightCardPreviewType",SpotlightCardEntityId:"SpotlightCardEntityId",SportsNewSpotlightCard:"SportsNewSpotlightCard",SportsCardType:"SportsCardType",SportsVideoSpotlightShown:"SportsVideoSpotlightShown",SportsNewSpotlightCountdown:"SportsNewSpotlightCountdown",SportsPinToDeskShown:"SportsPinToDeskShown",SportsDataV2:"SportsDataV2",SportsPinToDeskEdgeFeatureEnabled:"SportsPinToDeskEdgeFeatureEnabled",SportsNewSpotlightExploration:"SportsNewSpotlightExploration",SportsNewSpotlightTennis:"SportsNewSpotlightTennis",SportsNewSpotlightRace:"SportsNewSpotlightRace",SportsNewSpotlightGolf:"SportsNewSpotlightGolf",SportsCardCurrentTabId:"SportsCardCurrentTabId",SportsStandingsRankings:"SportsStandingsRankings"}},6204:function(t,e,i){"use strict";i.d(e,{D:function(){return s}});var n=i(33940),r=i(28904),o=i(99452);class s extends r.H{}(0,n.gn)([o.LO],s.prototype,"viewModel",void 0)},15179:function(t,e,i){"use strict";i.r(e),i.d(e,{SportsHidePopup:function(){return B}});var n=i(33940),r=i(28904),o=i(27782),s=i(32572),a=i(26738),p=i(42689),d=i(35680),c=i(22674),l=i(78923),h=i(72198),u=i(29717),g=i(22798);const m=l.i` .refresh-button{margin-left:4px}.manage-button{margin-right:4px}.popup-close-button{left:auto;right:12px}`,S=l.i` .refresh-button{margin-right:4px}.manage-button{margin-left:4px}.popup-close-button{left:12px;right:auto}`,f=l.i` .sports-hide-popup{${h.U};z-index:900}.hide-popup-actions{display:grid;grid-template-columns:var(--button-min-width) var(--button-min-width);justify-content:center;grid-gap:var(--space-between-buttons);margin-top:4px}.popup-action-button{border-radius:var(--button-border-radius);font-size:14px}.hide-popup{display:flex;flex-direction:column;margin:18px 0 4px;width:328px;outline:none}.hide-popup-menu{margin-bottom:16px;border-radius:20px;width:280px;align-self:center}::part(control){position:relative}fluent-button::part(control){width:-webkit-fill-available}fluent-button::part(content){text-overflow:ellipsis;overflow:hidden}::part(heading){position:initial;margin-bottom:18px;margin-top:4px;padding:0 12px;width:314px}::part(heading span){margin:24px}.hide-reminder{margin:0;padding:16px;font-size:${o.c};line-height:${s.b};font-weight:600}.setting-link{text-transform:uppercase;text-decoration:none;color:${a.go};background:none;border:none;padding:0;cursor:pointer;font-weight:600;font-size:${o.c}}.action-button{display:flex;width:300px;padding:16px;box-sizing:border-box;position:absolute}.manage-button{min-height:32px;margin-top:8px;width:100%;margin-right:4px}.refresh-button{min-height:32px;margin-top:8px;width:100%;margin-left:4px}.check-icon{display:flex;justify-content:center;fill:var(--neutral-foreground-rest);padding:56px 0}.popup-close-button{position:absolute;top:12px;display:inline-flex;justify-content:center;align-items:center;min-width:32px;height:32px;line-height:1;padding:0 10px;box-sizing:border-box;border-radius:2px;color:${p.C};font-family:inherit;background:inherit;cursor:pointer;transition:all 0.1s ease-in-out}.popup-close-button:hover{background:${d.Gy}}.popup-close-button svg{width:8px;height:8px;fill:${p.C}}:host([colormode="dark"]) .report-option-container .report-inputbox::part(control)::placeholder{color:rgba(255,255,255,0.54);fill:#4A4A4A}`.withBehaviors(new c.O(m,S),(0,u.vF)(l.i` :host{forced-color-adjust:auto}@media screen and (-ms-high-contrast:active){.popup-close-button:hover{background:${g.H.Highlight};color:${g.H.HighlightText}}.popup-close-bitton:focus-visible{border-color:1px solid transparent;box-shadow:0 0 0 1px inset ${g.H.ButtonText}}.popup-close-button svg path{fill:${g.H.ButtonText}}}`));var y=i(49218),w=i(93703),T=i(545),C=i(20472),b=i(66599),v=i(7275);C.q;const I=y.dy`
    ${t=>(0,v.Ot)(t.viewModel.feedbackDialogConfigInfo,{properties:{visible:t.loadDialog}})}
`,k=y.dy`
    <div class="hide-popup" tabindex="0">
        ${(0,w.g)(((t,e)=>!(0,b.T)(t.viewModel.strings.sportsNotInterestedFormatted)),y.dy`
            <fluent-button
                class="hide-popup-menu"
                tabindex="0"
                aria-label=${t=>t.viewModel.strings.sportsNotInterestedFormatted}
                role="button"
                title=${t=>t.viewModel.strings.sportsNotInterestedFormatted}
                @click="${(t,e)=>t.viewModel.handleSportsNotInterested()}"
                @keypress="${(t,e)=>e.event&&"Enter"==e.event.key&&t.viewModel.handleSportsNotInterested()}"
                data-t="${t=>t.viewModel.menuDislikeSportTelemetryTag}"
            >
                ${t=>t.viewModel.strings.sportsNotInterestedFormatted}
            </fluent-button>
        `)}
        <fluent-button
            class="hide-popup-menu"
            tabindex="0"
            aria-label=${t=>t.viewModel.strings.popupChangeLeagueTeam}
            role="button"
            title=${t=>t.viewModel.strings.popupChangeLeagueTeam}
            @click="${(t,e)=>t.changeLeagueTeamClickHandler(e.event)}"
            @keypress="${(t,e)=>e.event&&"Enter"==e.event.key&&t.changeLeagueTeamClickHandler(e.event)}"
            data-t="${t=>t.viewModel.changeLeagueTeamTelemetryTag}"
        >
            ${t=>t.viewModel.strings.popupChangeLeagueTeam}
        </fluent-button>
        <fluent-button
            class="hide-popup-menu"
            tabindex="0"
            aria-label=${t=>t.viewModel.strings.popupSendFeedback}
            role="button"
            title=${t=>t.viewModel.strings.popupSendFeedback}
            @click="${(t,e)=>t.sendFeedbackClickHandler(e.event)}"
            @keypress="${(t,e)=>e.event&&"Enter"==e.event.key&&t.sendFeedbackClickHandler(e.event)}"
            data-t="${t=>t.viewModel.feedbackTelemetryTag}"
            >
            ${t=>t.viewModel.strings.popupSendFeedback}
        </fluent-button>
    </div>
`,M=y.dy`
    <msn-action-dialog
        class="sports-hide-popup"
        headline=${t=>t.viewModel.strings.hidePopupTitle}
        ariaLabel=${t=>t.viewModel.strings.hidePopupTitle}
        @action-dialog-dismiss=${t=>t.viewModel.gobackToSportsCard()}
        data-t="${t=>t.viewModel.telemetryTag}"
        modal
    >
        <div
            slot="close-button"
            class="popup-close-button"
            tabindex="0"
            aria-label=${t=>t.viewModel.strings.closeButton}
            role="button"
            title=${t=>t.viewModel.strings.closeButton}
            @click=${(t,e)=>t.cancelClickHandler(e.event)}
            @keypress="${(t,e)=>e.event&&"Enter"==e.event.key&&t.cancelClickHandler(e.event)}"
            data-t="${t=>t.viewModel.popupCloseTelemetryTag}"
        >
            ${y.dy.partial(T.Z)}
        </div>
        <div>
            ${k}
            <div class="hide-popup-actions">
                <fluent-button
                    class="popup-action-button"
                    appearance="accent"
                    tabindex="0"
                    @click=${(t,e)=>t.hideSportsCardClickHandler(e.event)}
                    @keypress="${(t,e)=>e.event&&"Enter"==e.event.key&&t.hideSportsCardClickHandler(e.event)}"
                    aria-label=${t=>t.viewModel.strings.popupHideButton}
                    role="button"
                    title=${t=>t.viewModel.strings.popupHideButton}
                    data-t="${t=>t.viewModel.popupHideSportTelemetryTag}"
                >
                    ${t=>t.viewModel.strings.popupHideButton}
                </fluent-button>
                <fluent-button
                    class="popup-action-button"
                    tabindex="0"
                    @click=${(t,e)=>t.cancelClickHandler(e.event)}
                    @keypress="${(t,e)=>e.event&&"Enter"==e.event.key&&t.cancelClickHandler(e.event)}"
                    aria-label=${t=>t.viewModel.strings.cancel}
                    role="button"
                    title=${t=>t.viewModel.strings.cancel}
                    data-t="${t=>t.viewModel.popupCancelTelemetryTag}"
                >
                    ${t=>t.viewModel.strings.cancel}
                </fluent-button>
            </div>
        </div>
    </msn-action-dialog>
    `,D=y.dy`
    ${(0,w.g)((t=>t.isHidePopupOpen),M)}
    ${(0,w.g)((t=>t.loadDialog),I)}
`,x=y.dy`
    ${(0,w.g)((t=>null!=t.viewModel),D)}
`;var E=i(23549),P=i(82898),H=i(99452),F=i(6204),R=i(48204),V=i(76611),N=i(7476);class X extends F.D{constructor(){super(...arguments),this.isHidePopupOpen=!1,this.loadDialog=!1,this.changeLeagueTeamClickHandler=t=>{t&&(t.stopPropagation(),t.preventDefault(),E.M0.sendActionEvent(t.target,P.Aw.Click)),this.viewModel.changeLeagueTeamCallback()},this.sendFeedbackClickHandler=t=>{t&&(t.stopPropagation(),t.preventDefault(),E.M0.sendActionEvent(t.target,P.Aw.Click)),this.viewModel.sendFeedbackCallback(),this.openFeedbackPopup()},this.hideSportsCardClickHandler=t=>{t&&(t.stopPropagation(),t.preventDefault(),E.M0.sendActionEvent(t.target,P.Aw.Click)),this.viewModel.hideSportsCardCallback()},this.cancelClickHandler=t=>{t&&(t.stopPropagation(),t.preventDefault(),E.M0.sendActionEvent(t.target,P.Aw.Click)),this.viewModel.cancelHideCallback()},this.openFeedbackPopup=()=>{this.viewModel.feedbackDialogConfigInfo?(this.loadDialog||(this.loadDialog=!0),V.Xw.safeExecute((()=>{window.requestAnimationFrame((()=>{this.feedbackDialog||(this.feedbackDialog=this.shadowRoot?.querySelector?.("feedback-dialog-wc")),this.feedbackDialog&&(this.feedbackDialog.visible=!0)}))}),void 0,N.DWC,"SportsInfo - error when opening feedback module")):this.hookAPI()}}hookAPI(){V.Xw.safeExecute((()=>{if(window.chrome?.ntpSettingsPrivate?.launchEdgeFeedback){const t=(0,R.NJ)();if(t){const e=new URL(window.location.href),i=e.hash;e.hash=`pivot-${t}`,history.replaceState(history.state,"",e),window.location.reload(),window.chrome.ntpSettingsPrivate.launchEdgeFeedback(),window.stop(),e.hash=i||"",history.replaceState(history.state,"",e)}else window.chrome.ntpSettingsPrivate.launchEdgeFeedback()}}),void 0,N.DWC,"SportsInfo - error when opening edge NTP feedback module")}}(0,n.gn)([H.LO],X.prototype,"isHidePopupOpen",void 0),(0,n.gn)([H.LO],X.prototype,"loadDialog",void 0);let B=class extends X{};B=(0,n.gn)([(0,r.M)({name:"sports-hidepopup",template:x,styles:f})],B)},51628:function(t,e,i){"use strict";i.d(e,{Cj:function(){return O},Cu:function(){return N},Dw:function(){return w},G8:function(){return Z},MK:function(){return P},N2:function(){return L},Op:function(){return K},PQ:function(){return W},Qu:function(){return V},Sb:function(){return b},Vr:function(){return G},WO:function(){return S},b:function(){return $},eX:function(){return _},fJ:function(){return tt},fS:function(){return J},jC:function(){return v},kW:function(){return q},l0:function(){return R},lX:function(){return D},lp:function(){return C},lz:function(){return B},mU:function(){return A},mV:function(){return m},n$:function(){return et},nU:function(){return x},o_:function(){return k},pR:function(){return Q},q2:function(){return Y},qO:function(){return H},rg:function(){return I},uh:function(){return F},vG:function(){return M},xx:function(){return z}});var n=i(4589),r=i(32614),o=i(7476),s=i(88826),a=i(62713),p=i(857),d=i(86522),c=i(76611),l=i(80501),h=i(19397),u=i(62512),g=i(40378);const m="#FFFFFF",S=t=>{if(t){return f(t)}return""},f=t=>t?(y(t)?t+="&h=50&w=50&m=6&q=100&u=t&o=t&l=f&f=png":t.indexOf("//www.bing.com/th?")>=0&&t.indexOf("&w=")>0&&(t=t.split("&w=")[0]+"&w=50&h=50&qlt=100&c=1&rs=1"),t):t,y=t=>["//img-s-msn-com.akamaized.net/tenant/amp/entityid","//img-s.msn.cn/tenant/amp/entityid"].some((e=>t.indexOf(e)>=0));function w(t){return null!=t}const T=t=>!t||!t.trim(),C=t=>b(t,28,28,!0),b=(t="",e=40,i=40,n=!1)=>t?t.replace(/w=([\d]*)?&h=([\d]*)?/,`w=${n?i+20:i}&h=${n?e+20:e}`):null,v=t=>t.get(n.pX.sportsData),I=t=>{const e=x(t);return c.Xw.safeExecute((()=>e.tabContent?.league?.sportsMatches?.map((t=>({sportsMatchData:t})))||[]),void 0,o.RTd,`Sports V2 sportsMatches is not valid. sportsMatches=${JSON.stringify(e.tabContent?.league?.sportsMatches)}; tabType=${e.tabType};`)},k=t=>{const e=x(t);return e.tabContent?.freTeams?.map((t=>({...t,id:t.id||t.satoriId})))},M=t=>x(t).reason||"-1",D=t=>{const e=x(t);return e.tabContent?.sportsSpotLightData},x=t=>{const e=v(t),i=V(t)-1;return e.Model?.Tabs[i]},E=[n.Zt.TeamVsTeamExploration,n.Zt.CricketExploration,n.Zt.TennisExploration],P=t=>Boolean(t)&&E.includes(t),H=t=>t===n.Zt.Fre,F=t=>t===n.Zt.StandingsRankings,R=(t,e)=>{const i=t.get(n.pX.dislikedEntities);return i?.has(e)},V=t=>t.get(n.pX.tabCurrentPageIndex)||1,N=t=>{const e=x(t);return e?X(e.tabType):n.Zt.TeamVsTeam},X=t=>{switch(t){case n.Zt.TeamVsTeamExploration:case n.Zt.CricketExploration:case n.Zt.TennisExploration:case n.Zt.EventBrief:case n.Zt.TeamVsTeamWithBracket:case n.Zt.SpotlightTennis:case n.Zt.SpotlightRace:case n.Zt.SpotlightGolf:case n.Zt.StandingsRankings:return t;case n.Zt.SeasonStatistics:case n.Zt.Video:case n.Zt.Countdown:case n.Zt.Spotlight:return n.Zt.Spotlight;default:return n.Zt.TeamVsTeam}};function B(t){switch(t){case l.Nv._1x_1y:return"small";case l.Nv._1x_3y:return"large";default:return"medium"}}const $=(t,e)=>void 0!==t&&void 0!==e&&(e.get(t)||!1),A=(t,e,i)=>{switch(t){case l.Nv._1x_2y:return 3;case l.Nv._1x_3y:return e===n.mW.Cricket?4:i;default:return 1}},O=t=>t.some((t=>t&&t.sportsMatchData&&t.sportsMatchData.gameStateCatetory===n.w_.inprogressGame)),W=(t,e,i,n)=>{const r=n;return r&&r[i]&&r[i][e.toString()]?(0,u.WU)((t=>{let e=146;return t===l.Nv._1x_2y?e=304:t===l.Nv._1x_3y&&(e=462),`https://img-s-msn-com.akamaized.net/tenant/amp/entityid/{0}.img?w=300&h=${e}&q=90&m=6&f=jpg&u=t`})(i),r[i][e.toString()]):null},L=()=>a.gL?.get(a.Iq.IsDarkMode)??(0,g.Y)(),_=(t,e,i,r)=>{const o=+t;if(!r||Number.isNaN(o)||o<0)return"";if(1===o)return i===n.fs.League?e.followedReasonLeague:e.followedReasonTeam;const s=n.TR[t];return s&&e[s]||""},U="BB1dV8FG",j="MSports";function z(t,e=!1,i){const n={format:r.D3.PNG,enableDpiScaling:!1,...i};return T(t)?e?(0,r.zz)(U,n):null:t.indexOf(".")>0?(0,r.mL)(`${r.q3}?id=${t}&pid=${j}`,n):(0,r.zz)(t,n)}function G(t){return t?.startsWith("http")?t:t?(0,p.Qc)((0,d.Z3)(t)):""}function Z(t,e){if(!t||!e)return t;try{const i=new URL(t),n=i.searchParams;return Object.keys(e).forEach((t=>{t&&e[t]&&n.set(t,e[t])})),i.toString()}catch{return t}}function q(t){return t&&!t.startsWith("#")?`#${t}`:t}function Y(t,e){const i=new h.$;try{return i.localizedMonthDate(t,e)}catch(i){(0,s.H)(o.HkJ,"Sports card localizedMonthDate exception.",`date=${t} market=${e} error=${i&&i.message}`);let n=t.toLocaleDateString("en-us",{month:"short",day:"numeric"});return n||(n=t.toDateString()),n?n.replace(/\u200E/g,"").replace(/\u200F/g,""):n}}function Q(t,e){const i=new h.$;try{return i.formatTimeFromDate(t,e)}catch(i){return(0,s.H)(o.HkJ,"Sports card formatTimeFromDate exception.",`date=${t} market=${e} error=${i&&i.message}`),t.toTimeString()}}function J(t){const e=60*(new Date).getTimezoneOffset()*1e3,i=new Date(t).valueOf();return new Date(i-e)}function K(t){switch(t){case"PreGame":default:return n.w_.preGame;case"InProgressGame":case"InProgress":return n.w_.inprogressGame;case"Final":case"PostGame":return n.w_.postGame}}function tt(t){if(!t||"string"==typeof t)return"";const{gamePeriod:e,gameClock:i}=t;return e&&i?`${e} ${i}`:e||i||""}function et(t){return!t||"object"==typeof t&&0===Object.keys(t).length}},25158:function(t){t.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10.12 10.83l4.03 4.02a.5.5 0 00.7-.7l-13-13a.5.5 0 10-.7.7l3.23 3.23a6.7 6.7 0 00-2.3 3.08l-.05.15-.01.06s-.08.5.35.61a.5.5 0 00.61-.35L3 8.6a3.02 3.02 0 01.2-.52c.16-.34.4-.8.78-1.26.3-.36.66-.72 1.13-1.02l1.57 1.58a2.5 2.5 0 103.45 3.45zm-.74-.74a1.5 1.5 0 11-1.97-1.97l1.97 1.97zm-3.06-5.9l.85.86C7.43 5.02 7.71 5 8 5c2.04 0 3.29.91 4.03 1.82A5.7 5.7 0 0113 8.6v.02a.5.5 0 00.97-.25v-.02a2.3 2.3 0 00-.06-.18 6.7 6.7 0 00-1.12-1.98A5.95 5.95 0 008 4a6.9 6.9 0 00-1.68.2z"></path></svg>'},16446:function(t){t.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 14A6 6 0 108 2a6 6 0 000 12zM8 3c.37 0 .88.36 1.31 1.32.1.2.18.43.26.68H6.43c.08-.25.16-.47.26-.68C7.12 3.36 7.63 3 8 3zm-2.22.9c-.15.34-.29.7-.4 1.1H4a5.02 5.02 0 012.04-1.6c-.1.16-.18.33-.26.5zM5.16 6a12.06 12.06 0 000 4H3.42a4.98 4.98 0 010-4h1.74zm.22 5a7.53 7.53 0 00.66 1.6A5.02 5.02 0 014 11h1.38zm1.05 0h3.14a6.2 6.2 0 01-.26.68C8.88 12.64 8.37 13 8 13c-.37 0-.88-.36-1.31-1.32a6.2 6.2 0 01-.26-.68zm3.4-1H6.17a10.94 10.94 0 010-4h3.64a10.94 10.94 0 010 4zm.79 1H12a5.02 5.02 0 01-2.04 1.6c.1-.16.18-.33.26-.5.15-.34.29-.7.4-1.1zm1.96-1h-1.74a12.05 12.05 0 000-4h1.74a4.98 4.98 0 010 4zM9.96 3.4c.81.35 1.52.9 2.04 1.6h-1.38a7.53 7.53 0 00-.66-1.6z"></path></svg>'}}]);