<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="1">
  <HTTPTask id="79" hostname="www.advantageonlineshopping.com" path="https://www.advantageonlineshopping.com/" url="https://www.advantageonlineshopping.com/" ip="54.227.55.203" port="443" connectionId="3" origin="Primary" frame="1" startDateTime="2024-03-14T16:56:30.746+03:00" startTime="355955640" endTime="355955656">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="User-Agent" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLCovKjtxPTAuOA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>X2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQxMjU3My40LjEuMTcxMDQxNDM2Mi4wLjAuMDsgX2dhPUdBMS4yLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZG9jdW1lbnQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmF2aWdhdGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9uZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-User" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>d3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS8gSFRUUC8xLjENClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQ7IHJ2OjEyMS4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzEyMS4wDQpBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCwqLyo7cT0wLjgNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQ29va2llOiBfZ2FfVEJQWUVEOFdTVz1HUzEuMS4xNzEwNDEyNTczLjQuMS4xNzEwNDE0MzYyLjAuMC4wOyBfZ2E9R0ExLjIuMTA0Mjg5MTkxMy4xNzEwMzI0MjUxOyBfZ2lkPUdBMS4yLjU0NzUzMzIzMy4xNzEwMzI0Mjg3OyBfZ2FfNTZFTU5SRjJTMj1HUzEuMi4xNzEwNDEyNjE1LjQuMS4xNzEwNDE0NTE1LjU3LjAuMA0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KU2VjLUZldGNoLURlc3Q6IGRvY3VtZW50DQpTZWMtRmV0Y2gtTW9kZTogbmF2aWdhdGUNClNlYy1GZXRjaC1TaXRlOiBub25lDQpTZWMtRmV0Y2gtVXNlcjogPzENCkhvc3Q6IHd3dy5hZHZhbnRhZ2VvbmxpbmVzaG9wcGluZy5jb20NCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="_ga_TBPYED8WSW" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjEuMTcxMDQxMjU3My40LjEuMTcxMDQxNDM2Mi4wLjAuMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuMTA0Mjg5MTkxMy4xNzEwMzI0MjUx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_gid" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga_56EMNRF2S2" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>0</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmdpbngvMS4xOC4wIChVYnVudHUp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo0OTo1OSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1s</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMTExMjAtMTcwNzkwMjc1MjAwMCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxNCBGZWIgMjAyNCAwOToyNTo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0w</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo0OTo1OSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="vary" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YWNjZXB0LWVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KU2VydmVyOiBuZ2lueC8xLjE4LjAgKFVidW50dSkNCkRhdGU6IFRodSwgMTQgTWFyIDIwMjQgMTM6NDk6NTkgR01UDQpDb250ZW50LVR5cGU6IHRleHQvaHRtbA0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6IFcvIjExMTIwLTE3MDc5MDI3NTIwMDAiDQpMYXN0LU1vZGlmaWVkOiBXZWQsIDE0IEZlYiAyMDI0IDA5OjI1OjUyIEdNVA0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0wDQpFeHBpcmVzOiBUaHUsIDE0IE1hciAyMDI0IDEzOjQ5OjU5IEdNVA0KdmFyeTogYWNjZXB0LWVuY29kaW5nDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>PCFET0NUWVBFIGh0bWwgPgo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogICAgPG1ldGEgaHR0cC1lcXVpdj0iWC1VQS1Db21wYXRpYmxlIiBjb250ZW50PSJJRT1lZGdlIj4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSI+CiAgICA8bWV0YSBuYW1lPSJkZXNjcmlwdGlvbiIgY29udGVudD0iIj4KICAgIDxtZXRhIG5hbWU9ImF1dGhvciIgY29udGVudD0iIj4KICAgIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgaHJlZj0iY3NzL2ltYWdlcy9mYXZpY29uLmljbyI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCAgaW5pdGlhbC1zY2FsZT0xLjAsIG1pbmltdW0tc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCIvPgogICAgPHRpdGxlPiZuYnNwO0FkdmFudGFnZSBTaG9wcGluZzwvdGl0bGU+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9ImNzcy9tYWluLm1pbi5jc3MiPgogICAgPCEtLTxzY3JpcHQ+LS0+CiAgICAgICAgPCEtLShmdW5jdGlvbihpLHMsbyxnLHIsYSxtKXtpWydHb29nbGVBbmFseXRpY3NPYmplY3QnXT1yO2lbcl09aVtyXXx8ZnVuY3Rpb24oKXsoaVtyXS5xPWlbcl0ucXx8W10pLnB1c2goYXJndW1lbnRzKX0saVtyXS5sPTEqbmV3IERhdGUoKTthPXMuY3JlYXRlRWxlbWVudChvKSwtLT4KICAgICAgICAgICAgICAgIDwhLS1tPXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUobylbMF07YS5hc3luYz0xO2Euc3JjPWc7bS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLG0pfSkod2luZG93LGRvY3VtZW50LCdzY3JpcHQnLCdodHRwczovL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9hbmFseXRpY3MuanMnLCdnYScpOy0tPgogICAgICAgIDwhLS1nYSgnY3JlYXRlJywgJ1VBLTgxMzM0MjI3LTEnLCAnYXV0bycpO2dhKCdzZW5kJywgJ3BhZ2V2aWV3Jyk7LS0+CiAgICA8IS0tPC9zY3JpcHQ+LS0+CiAgICA8c2NyaXB0IGFzeW5jIHNyYz0iaHR0cHM6Ly93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qcz9pZD1HLVRCUFlFRDhXU1ciPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgICB3aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXTsKICAgICAgICBmdW5jdGlvbiBndGFnKCl7ZGF0YUxheWVyLnB1c2goYXJndW1lbnRzKTt9CiAgICAgICAgZ3RhZygnanMnLCBuZXcgRGF0ZSgpKTsKCiAgICAgICAgZ3RhZygnY29uZmlnJywgJ0ctVEJQWUVEOFdTVycpOwogICAgPC9zY3JpcHQ+CjwvaGVhZD4KCjxib2R5IGRhdGEtbmctY29udHJvbGxlcj0ibWFpbkN0cmwgYXMgbWFpbkN0cmwiIGRhdGEtbmctY2xvYWs+CjwhLS08ZGl2IGlkPSJ0ZWFtIiBkYXRhLW5nLWNsaWNrPSJtYWluQ3RybC5jbG9zZUltZ1RlYW0oKSI+LS0+CiAgICA8IS0tPGRpdiBjbGFzcz0iY29udGFpbmVyIj4tLT4KICAgICAgICA8IS0tPGRpdiBjbGFzcz0iaW1nIj4tLT4KICAgICAgICAgICAgPCEtLTxkaXYgaWQ9InRlYW1JZFRvQW5pbWF0ZSIgY2xhc3M9ImFuaW1hdGVkIj4tLT4KICAgICAgICAgICAgICAgIDwhLS08aW1nIHNyYz0iLi4vLi4vY3NzL2ltYWdlcy9BZHZhbnRhZ2Vfb25saW5lX3Nob3BwaW5nX3RlYW0uanBnIiBhbHQ9InRlYW0iPi0tPgogICAgICAgICAgICA8IS0tPC9kaXY+LS0+CiAgICAgICAgPCEtLTwvZGl2Pi0tPgogICAgPCEtLTwvZGl2Pi0tPgo8IS0tPC9kaXY+LS0+Cgo8ZGl2IGNsYXNzPSJ3YWl0QmFja2dyb3VuZF8yIj4KICAgIDxkaXY+CiAgICAgICAgPCEtLQogICAgICAgIDxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIKICAgICAgICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICAgICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIgogICAgICAgICAgICAgeD0iMHB4IiB5PSIwcHgiCiAgICAgICAgICAgICB3aWR0aD0iMjUwcHgiIGhlaWdodD0iMjUwcHgiIHZpZXdCb3g9IjAgMCAzMCA0NSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNDUgNDUiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iIzU0QjNBRCIgZD0iTTIxLDMzaC02Yy0xLjEsMC0yLTEuMS0yLTIuMlY3aDIuOWMwLjcsMCwxLjMsMC40LDEuNiwxLjFsMTIuOSwzNS4yYzAuNCwxLDEuNiwxLjYsMi42LDEuNmg1TDIyLDEuOAogICAgICAgICAgICAgICAgICAgIEMyMS42LDAuNywyMS4xLDAsMjAsMEg2djM0LjFjMCwzLjMsMS40LDUuOSw1LDUuOWgxNGwtMS4zLTUuNkMyMy40LDMzLjQsMjIsMzMsMjEsMzN6Ii8+CiAgICAgICAgPC9zdmc+LS0+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8ZGl2IGNsYXNzPSJsb2FkZXIiPgogICAgPGRpdj4KICAgICAgICA8c3ZnIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICAgICA8ZGVmcz4KICAgICAgICAgICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iOC4wNDIlIiB5MT0iMCUiIHgyPSI2NS42ODIlIiB5Mj0iMjMuODY1JSIgaWQ9ImEiPgogICAgICAgICAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM1NEIzQUQiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSIvPgogICAgICAgICAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM1NEIzQUQiIHN0b3Atb3BhY2l0eT0iLjYzMSIgb2Zmc2V0PSI2My4xNDYlIi8+CiAgICAgICAgICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzU0QjNBRCIgb2Zmc2V0PSIxMDAlIi8+CiAgICAgICAgICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgICAgICA8L2RlZnM+CiAgICAgICAgICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzYgMThjMC05Ljk0LTguMDYtMTgtMTgtMTgiIGlkPSJPdmFsLTIiIHN0cm9rZT0idXJsKCNhKSIgc3Ryb2tlLXdpZHRoPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0icm90YXRlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb209IjAgMTggMTgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89IjM2MCAxOCAxOCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXI9IjAuOXMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4KICAgICAgICAgICAgICAgICAgICA8L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBmaWxsPSIjNTRCM0FEIiBjeD0iMzYiIGN5PSIxOCIgcj0iMSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9InJvdGF0ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tPSIwIDE4IDE4IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPSIzNjAgMTggMTgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyPSIwLjlzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+CiAgICAgICAgICAgICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L3N2Zz4KICAgIDwvZGl2Pgo8L2Rpdj4KCjxsb2dpbi1tb2RhbD48L2xvZ2luLW1vZGFsPgoKPHNwYW4gY2xhc3M9Im1vYmlsZVRpdGxlIj4KICAgIDxkaXYgY2xhc3M9Im1pbmktdGl0bGUiIGlkPSJsb2dpbk1vYmlsZU1pbmlUaXRsZSI+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJvcHRpb24iIHRyYW5zbGF0ZT0iTXlfYWNjb3VudCIgbmctY2xpY2s9ImFjY291bnRTZWN0aW9uKCkiPjwvbGFiZWw+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJvcHRpb24iIHRyYW5zbGF0ZT0iTXlfT3JkZXJzIiBuZy1jbGljaz0ibW9iaWxlUmVkaXJlY3QoJ015T3JkZXJzJykiPjwvbGFiZWw+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJvcHRpb24iIHRyYW5zbGF0ZT0iU2lnbl9vdXQiIG5nLWNsaWNrPSJzaWduT3V0KCkiPjwvbGFiZWw+CiAgICA8L2Rpdj4KPC9zcGFuPgoKPHNwYW4gY2xhc3M9Im1vYmlsZVRpdGxlIj4KICAgIDxkaXYgY2xhc3M9Im1pbmktdGl0bGUtaGVscCBtaW5pLXRpdGxlLWhlbHAtbW9iaWxlIiBpZD0iaGVscE1vYmlsZU1pbmlUaXRsZSI+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJvcHRpb24iIHRyYW5zbGF0ZT0iQUJPVVQiIG5nLWNsaWNrPSJtb2JpbGVSZWRpcmVjdEhlbHAoJ2Fib3V0JykiPjwvbGFiZWw+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJvcHRpb24iIHRyYW5zbGF0ZT0iQU9TX1ZFUlNJT05TIiBuZy1jbGljaz0ibW9iaWxlUmVkaXJlY3RIZWxwKCd2ZXJzaW9uJykiPjwvbGFiZWw+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJvcHRpb24iIHRyYW5zbGF0ZT0iQ09ORklHX1RPT0wiIG5nLWNsaWNrPSJvcGVuQWRtaW5DbGllbnQoKSI+PC9sYWJlbD4KICAgIDwvZGl2Pgo8L3NwYW4+Cgo8YXNpZGUgaWQ9Im1vYmlsZS1zZWN0aW9uIiBkYXRhLW5nLWNsb2FrPgogICAgPHVsPgogICAgICAgIDxsaSBkYXRhLW5nLWNsaWNrPSJtb2JpbGVSZWRpcmVjdCgnZGVmYXVsdCcpIj4KICAgICAgICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiByb2xlPSJsaW5rIiBjbGFzcz0iaW1nIj4KICAgICAgICAgICAgICAgIDxkaXYgaWNvbi1ob21lLXN2Zy1tb2JpbGU+PC9kaXY+CiAgICAgICAgICAgIDwvYT4KICAgICAgICA8L2xpPgogICAgICAgIDxsaSBkYXRhLW5nLWNsaWNrPSJtb2JpbGVSZWRpcmVjdCgnc2hvcHBpbmdDYXJ0JykiPgogICAgICAgICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIHJvbGU9ImxpbmsiIGNsYXNzPSJpbWciPgogICAgICAgICAgICAgICAgPGRpdiBpY29uLWNhcnQtc3ZnLW1vYmlsZT48L2Rpdj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjYXJ0IiBuZy1zaG93PSIoY2FydCB8IHByb2R1Y3RzQ2FydENvdW50KSA+IDAiPnt7IGNhcnQgfCBwcm9kdWN0c0NhcnRDb3VudCB9fTwvc3Bhbj4KICAgICAgICAgICAgPC9hPgogICAgICAgIDwvbGk+CiAgICAgICAgPGxpIGNsYXNzPSJwb2ludGVyIiBkYXRhLW5nLWNsaWNrPSJsb2dpbignbG9naW5Nb2JpbGVNaW5pVGl0bGUnKSI+CiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgcm9sZT0ibGluayIgY2xhc3M9ImltZyBjZW50ZXIiPgogICAgICAgICAgICAgICAgPGRpdiBpY29uLXVzZXItc3ZnLW1vYmlsZT48L2Rpdj4KICAgICAgICAgICAgICAgIDxzcGFuIGRhdGEtbmctc2hvdz0idXNlckNvb2tpZS5yZXNwb25zZSIgY2xhc3M9ImhpLXVzZXIiPnt7dXNlckNvb2tpZS5uYW1lfX08L3NwYW4+CiAgICAgICAgICAgIDwvYT4KICAgICAgICA8L2xpPgogICAgPC91bD4KPC9hc2lkZT4KCjwhLS0gZW5kIG1vYmlsZSBzbGlkZXIgLS0+CgoKCgo8IS0tIG5hdmlnYXRpb24gLS0+Cgo8aGVhZGVyIG5nLXNob3c9IndlbGNvbWUiIGRhdGEtbmctY2xvYWs+CiAgICA8bmF2PgogICAgICAgIDx1bCBjbGFzcz0icm9ib3RvLWxpZ2h0IGRlc2t0b3AtaGFuZGxlciIgPgogICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICA8YSBpZD0iaGVscExpbmsiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgcm9sZT0ibGluayIgY2xhc3M9ImltZyIgZGF0YS1uZy1jbGljaz0iaGVscCgnaGVscE1pbmlUaXRsZScpIgogICAgICAgICAgICAgICAgICAgZGF0YS1uZy1tb3VzZWVudGVyPSJtaW5pVGl0bGVJbignaGVscE1pbmlUaXRsZScpIgogICAgICAgICAgICAgICAgICAgZGF0YS1uZy1tb3VzZWxlYXZlPSJtaW5pVGl0bGVPdXQoJ2hlbHBNaW5pVGl0bGUnKSI+CgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIuLi8uLi9jc3MvaW1hZ2VzL0Rvd25fYXJyb3cuc3ZnIiB3aWR0aD0iMTJweCI7IGhlaWdodD0iN3B4Ijs+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpY29uLWhlbHAtc3ZnPjwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJoZWxwTWluaVRpdGxlIiBjbGFzcz0ibWluaS10aXRsZS1oZWxwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJvcHRpb24gcm9ib3RvLW1lZGl1bSIgdHJhbnNsYXRlPSJBQk9VVCIgbmctY2xpY2s9Im1vYmlsZVJlZGlyZWN0SGVscCgnYWJvdXQnKSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiByb2xlPSJsaW5rIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im9wdGlvbiIgdHJhbnNsYXRlPSJBT1NfVkVSU0lPTlMiIG5nLWNsaWNrPSJtb2JpbGVSZWRpcmVjdEhlbHAoJ3ZlcnNpb24nKSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiByb2xlPSJsaW5rIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im9wdGlvbiIgdHJhbnNsYXRlPSJDT05GSUdfVE9PTCIgbmctY2xpY2s9Im9wZW5BZG1pbkNsaWVudCgpIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIHJvbGU9ImxpbmsiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgIDxsaSBkYXRhLW5nLW1vdXNlZW50ZXI9ImVudGVyQ2FydCgpIiBkYXRhLW5nLW1vdXNlbGVhdmU9ImxlYXZlQ2FydCgpIj4KICAgICAgICAgICAgICAgIDxhIGlkPSJzaG9wcGluZ0NhcnRMaW5rIiBhcmlhLWxhYmVsPSJTaG9wcGluZ0NhcnQiIGNsYXNzPSJpbWciIGhyZWY9IiMvc2hvcHBpbmdDYXJ0IiByb2xlPSJsaW5rIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGljb24tY2FydC1zdmc+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNhcnQiIG5nLXNob3c9IihjYXJ0IHwgcHJvZHVjdHNDYXJ0Q291bnQpID4gMCI+e3sgY2FydCB8IHByb2R1Y3RzQ2FydENvdW50IH19PC9zcGFuPgogICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgICAgIDxsaSBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0b29sLXRpcC1jYXJ0IGlkPSJ0b29sVGlwQ2FydCI+PC90b29sLXRpcC1jYXJ0PgogICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICA8L2xpPgogICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICA8YSBpZD0ibWVudVVzZXJMaW5rIiBhcmlhLWxhYmVsPSJVc2VyTWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiByb2xlPSJsaW5rIiBjbGFzcz0iaW1nIiBkYXRhLW5nLWNsaWNrPSJsb2dpbignbG9naW5NaW5pVGl0bGUnKSIKICAgICAgICAgICAgICAgICAgIGRhdGEtbmctbW91c2VlbnRlcj0ibWluaVRpdGxlSW4oJ2xvZ2luTWluaVRpdGxlJykiCiAgICAgICAgICAgICAgICAgICBkYXRhLW5nLW1vdXNlbGVhdmU9Im1pbmlUaXRsZU91dCgnbG9naW5NaW5pVGl0bGUnKSI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gZGF0YS1uZy1zaG93PSJ1c2VyQ29va2llLnJlc3BvbnNlIiBjbGFzcz0iaGktdXNlciBjb250YWluTWluaVRpdGxlIj57e3VzZXJDb29raWUubmFtZX19PC9zcGFuPjxkaXYgaWNvbi11c2VyLXN2Zz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtaW5pLXRpdGxlIiBpZD0ibG9naW5NaW5pVGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im9wdGlvbiByb2JvdG8tbWVkaXVtIiB0cmFuc2xhdGU9Ik15X2FjY291bnQiIG5nLWNsaWNrPSJhY2NvdW50U2VjdGlvbigpIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIHJvbGU9ImxpbmsiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ib3B0aW9uIiB0cmFuc2xhdGU9Ik15X09yZGVycyIgbmctY2xpY2s9Im1vYmlsZVJlZGlyZWN0KCdNeU9yZGVycycpIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIHJvbGU9ImxpbmsiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ib3B0aW9uIHJvYm90by1tZWRpdW0iIHRyYW5zbGF0ZT0iU2lnbl9vdXQiIG5nLWNsaWNrPSJzaWduT3V0KCRldmVudCkiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgcm9sZT0ibGluayI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgPGEgY2xhc3M9ImltZyI+CiAgICAgICAgICAgICAgICAgICAgPHNlYXJjaCB0b29sLXRpcC1zZWFyY2g+PC9zZWFyY2g+CiAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgIDxsaSBjbGFzcz0ibmF2LWxpLUxpbmtzIj4KICAgICAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgcm9sZT0ibGluayIgbmctY2xpY2s9ImdvdG9FbGVtZW50KCdjb250YWN0X3VzJykiIGNsYXNzPSJtZW51IG5hdkxpbmtzIHJvYm90by1yZWd1bGFyIiB0cmFuc2xhdGU9IkNPTlRBQ1RfVVMiPjwvYT4KICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgPGxpIGNsYXNzPSJuYXYtbGktTGlua3MiPgogICAgICAgICAgICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiByb2xlPSJsaW5rIiBjbGFzcz0ibWVudSBuYXZMaW5rcyByb2JvdG8tcmVndWxhciIgbmctY2xpY2s9ImdvdG9FbGVtZW50KCdwb3B1bGFyX2l0ZW1zJykiCiAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGU9IlBPUFVMQVJfSVRFTVMiPjwvYT4KICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgPGxpIGNsYXNzPSJuYXYtbGktTGlua3MiPgogICAgICAgICAgICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiByb2xlPSJsaW5rIiBjbGFzcz0ibWVudSBuYXZMaW5rcyByb2JvdG8tcmVndWxhciIgbmctY2xpY2s9ImdvdG9FbGVtZW50KCdzcGVjaWFsX29mZmVyX2l0ZW1zJykiCiAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGU9IlNQQUNJQUxfT0ZGRVIiPjwvYT4KICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgPGxpIGNsYXNzPSJuYXYtbGktTGlua3MiPgogICAgICAgICAgICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiByb2xlPSJsaW5rIiBjbGFzcz0ibWVudSBuYXZMaW5rcyByb2JvdG8tcmVndWxhciIgbmctY2xpY2s9ImdvdG9FbGVtZW50KCdvdXJfcHJvZHVjdHMnKSIKICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZT0iT1VSX1BST0RVQ1RTIj48L2E+CiAgICAgICAgICAgIDwvbGk+CgogICAgICAgIDwvdWw+CiAgICAgICAgPGRpdiBjbGFzcz0ibG9nbyI+CiAgICAgICAgICAgIDxhIGhyZWY9IiMvIiByb2xlPSJsaW5rIiBuZy1jbGljaz0iZ29fdXAoKSI+CiAgICAgICAgICAgICAgICA8IS0tPGltZyBzcmM9ImNzcy9pbWFnZXMvbG9nby5wbmciLz4tLT4KICAgICAgICAgICAgICAgIDxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCiAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI0NXB4IiBoZWlnaHQ9IjQ1cHgiIHZpZXdCb3g9IjAgMCAzMCA0NSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNDUgNDUiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM1NEIzQUQiIGQ9Ik0yMSwzM2gtNmMtMS4xLDAtMi0xLjEtMi0yLjJWN2gyLjljMC43LDAsMS4zLDAuNCwxLjYsMS4xbDEyLjksMzUuMmMwLjQsMSwxLjYsMS42LDIuNiwxLjZoNUwyMiwxLjgKICAgICAgICAgICAgICAgICAgICAgICAgQzIxLjYsMC43LDIxLjEsMCwyMCwwSDZ2MzQuMWMwLDMuMywxLjQsNS45LDUsNS45aDE0bC0xLjMtNS42QzIzLjQsMzMuNCwyMiwzMywyMSwzM3oiLz4KICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJvYm90by1tZWRpdW0iPnt7J2R2YW50YWdlJyB8IHRyYW5zbGF0ZX19PC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImxvZ29EZW1vIHJvYm90by1saWdodCI+e3snREVNTycgfCB0cmFuc2xhdGV9fTwvc3Bhbj4KICAgICAgICAgICAgPC9hPgoKICAgICAgICAgICAgPGRpdiBpZD0ibW9iaWxlLWJ0biIgY2xhc3M9Im1vYmlsZS1idG4taGFuZGxlciIgbmctY2xpY2s9Im9wZW5Nb2JpbGVTZWN0aW9uKCkiPgogICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48c3Bhbj48L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9uYXY+CiAgICA8dG9hc3Rlci1jb250YWluZXIgdG9hc3Rlci1vcHRpb25zPSJ7J3RpbWUtb3V0JzogNTAwMCwgfSIgdG9hc3Rlci1vcHRpb25zPSJ7fSI+PC90b2FzdGVyLWNvbnRhaW5lcj4KPC9oZWFkZXI+Cgo8IS0tIGVuZCBuYXZpZ2F0aW9uICIgbmctc2hvdz0iY2FydENvdW50ICE9IDAgLS0+Cgo8ZGl2IGNsYXNzPSJ1aXZpZXciIHVpLXZpZXc+PC9kaXY+Cgo8ZGl2IHZpcnR1YWwtZm9vdGVyPjwvZGl2PgoKCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBkYXRhLW1haW49Im1haW4ubWluIiBzcmM9InZlbmRvci9yZXF1aXJlanMvcmVxdWlyZS5qcyI+PC9zY3JpcHQ+Cgo8ZGl2IGlkPSJ0b2FzdCI+CiAgICA8YT5Qcm9kdWN0IEFkZGVkIFN1Y2Nlc3NmdWxseTwvYT4KPC9kaXY+Cgo8L2JvZHk+CjwvaHRtbD4=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="355955656" offset="0" length="419" />
        <PacketInfo time="355955656" offset="419" length="2909" />
      </TcpPackets>
    </HTTPResponse>
    <HTTPTask id="98" hostname="push.services.mozilla.com" path="https://push.services.mozilla.com/" url="https://push.services.mozilla.com/" ip="34.107.243.93" port="443" connectionId="7" origin="HTML" frame="1" startDateTime="2024-03-14T16:56:30.823+03:00" startTime="355959656" endTime="355959656">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="User-Agent" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Version" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Origin" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d3NzOi8vcHVzaC5zZXJ2aWNlcy5tb3ppbGxhLmNvbS8=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Protocol" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVzaC1ub3RpZmljYXRpb24=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Extensions" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cGVybWVzc2FnZS1kZWZsYXRl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Key" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RUpqZ2lidlFNVFhUU3AvdGFHVjYxQT09</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW1wdHk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d2Vic29ja2V0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Pragma" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY2FjaGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY2FjaGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d2Vic29ja2V0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vcHVzaC5zZXJ2aWNlcy5tb3ppbGxhLmNvbS8gSFRUUC8xLjENClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQ7IHJ2OjEyMS4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzEyMS4wDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpTZWMtV2ViU29ja2V0LVZlcnNpb246IDEzDQpPcmlnaW46IHdzczovL3B1c2guc2VydmljZXMubW96aWxsYS5jb20vDQpTZWMtV2ViU29ja2V0LVByb3RvY29sOiBwdXNoLW5vdGlmaWNhdGlvbg0KU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zOiBwZXJtZXNzYWdlLWRlZmxhdGUNClNlYy1XZWJTb2NrZXQtS2V5OiBFSmpnaWJ2UU1UWFRTcC90YUdWNjFBPT0NClNlYy1GZXRjaC1EZXN0OiBlbXB0eQ0KU2VjLUZldGNoLU1vZGU6IHdlYnNvY2tldA0KU2VjLUZldGNoLVNpdGU6IGNyb3NzLXNpdGUNClByYWdtYTogbm8tY2FjaGUNCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlDQpVcGdyYWRlOiB3ZWJzb2NrZXQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>273</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9odG1sOyBjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referrer-Policy" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tcmVmZXJyZXI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Mjcz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDowMyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgNDAwIEJhZCBSZXF1ZXN0DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD1VVEYtOA0KUmVmZXJyZXItUG9saWN5OiBuby1yZWZlcnJlcg0KQ29udGVudC1MZW5ndGg6IDI3Mw0KRGF0ZTogVGh1LCAxNCBNYXIgMjAyNCAxMzo1MDowMyBHTVQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData />
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="355959656" offset="0" length="156" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="121" hostname="push.services.mozilla.com" path="https://push.services.mozilla.com/" url="https://push.services.mozilla.com/" ip="34.107.243.93" port="443" connectionId="12" origin="HTML" frame="1" startDateTime="2024-03-14T16:56:30.872+03:00" startTime="355986015" endTime="355986015">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="User-Agent" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Version" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Origin" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d3NzOi8vcHVzaC5zZXJ2aWNlcy5tb3ppbGxhLmNvbS8=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Protocol" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVzaC1ub3RpZmljYXRpb24=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Extensions" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cGVybWVzc2FnZS1kZWZsYXRl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Key" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cDczL0xwejc0QUQ3OG9pQ2RQdHQ0UT09</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW1wdHk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d2Vic29ja2V0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Pragma" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY2FjaGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY2FjaGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d2Vic29ja2V0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vcHVzaC5zZXJ2aWNlcy5tb3ppbGxhLmNvbS8gSFRUUC8xLjENClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQ7IHJ2OjEyMS4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzEyMS4wDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpTZWMtV2ViU29ja2V0LVZlcnNpb246IDEzDQpPcmlnaW46IHdzczovL3B1c2guc2VydmljZXMubW96aWxsYS5jb20vDQpTZWMtV2ViU29ja2V0LVByb3RvY29sOiBwdXNoLW5vdGlmaWNhdGlvbg0KU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zOiBwZXJtZXNzYWdlLWRlZmxhdGUNClNlYy1XZWJTb2NrZXQtS2V5OiBwNzMvTHB6NzRBRDc4b2lDZFB0dDRRPT0NClNlYy1GZXRjaC1EZXN0OiBlbXB0eQ0KU2VjLUZldGNoLU1vZGU6IHdlYnNvY2tldA0KU2VjLUZldGNoLVNpdGU6IGNyb3NzLXNpdGUNClByYWdtYTogbm8tY2FjaGUNCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlDQpVcGdyYWRlOiB3ZWJzb2NrZXQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>273</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9odG1sOyBjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referrer-Policy" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tcmVmZXJyZXI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Mjcz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDoyOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgNDAwIEJhZCBSZXF1ZXN0DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD1VVEYtOA0KUmVmZXJyZXItUG9saWN5OiBuby1yZWZlcnJlcg0KQ29udGVudC1MZW5ndGg6IDI3Mw0KRGF0ZTogVGh1LCAxNCBNYXIgMjAyNCAxMzo1MDoyOSBHTVQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData />
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="355986015" offset="0" length="156" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="140" hostname="www.advantageonlineshopping.com" path="https://www.advantageonlineshopping.com/vendor/requirejs/require.js" url="https://www.advantageonlineshopping.com/vendor/requirejs/require.js" ip="54.227.55.203" port="443" connectionId="16" origin="HTML" frame="1" startDateTime="2024-03-14T16:56:30.956+03:00" startTime="355987421" endTime="355987437">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="User-Agent" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly93d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tLw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>X2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQxMjU3My40LjEuMTcxMDQxNDM2Mi4wLjAuMDsgX2dhPUdBMS4yLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS92ZW5kb3IvcmVxdWlyZWpzL3JlcXVpcmUuanMgSFRUUC8xLjENClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQ7IHJ2OjEyMS4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzEyMS4wDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpSZWZlcmVyOiBodHRwczovL3d3dy5hZHZhbnRhZ2VvbmxpbmVzaG9wcGluZy5jb20vDQpDb29raWU6IF9nYV9UQlBZRUQ4V1NXPUdTMS4xLjE3MTA0MTI1NzMuNC4xLjE3MTA0MTQzNjIuMC4wLjA7IF9nYT1HQTEuMi4xMDQyODkxOTEzLjE3MTAzMjQyNTE7IF9naWQ9R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc7IF9nYV81NkVNTlJGMlMyPUdTMS4yLjE3MTA0MTI2MTUuNC4xLjE3MTA0MTQ1MTUuNTcuMC4wDQpTZWMtRmV0Y2gtRGVzdDogc2NyaXB0DQpTZWMtRmV0Y2gtTW9kZTogbm8tY29ycw0KU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luDQpIb3N0OiB3d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="_ga_TBPYED8WSW" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R1MxLjEuMTcxMDQxMjU3My40LjEuMTcxMDQxNDM2Mi4wLjAuMA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="_ga" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0ExLjIuMTA0Mjg5MTkxMy4xNzEwMzI0MjUx</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="_gid" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="_ga_56EMNRF2S2" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>0</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xOC4wIChVYnVudHUp</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDozMSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iODU5MjEtMTY3NTc2OTY0NDAwMCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAwNyBGZWIgMjAyMyAxMTozNDowNCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT02MDA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Expires" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxNDowMDozMSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="vary" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YWNjZXB0LWVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KU2VydmVyOiBuZ2lueC8xLjE4LjAgKFVidW50dSkNCkRhdGU6IFRodSwgMTQgTWFyIDIwMjQgMTM6NTA6MzEgR01UDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiBXLyI4NTkyMS0xNjc1NzY5NjQ0MDAwIg0KTGFzdC1Nb2RpZmllZDogVHVlLCAwNyBGZWIgMjAyMyAxMTozNDowNCBHTVQNCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9NjAwDQpFeHBpcmVzOiBUaHUsIDE0IE1hciAyMDI0IDE0OjAwOjMxIEdNVA0KdmFyeTogYWNjZXB0LWVuY29kaW5nDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyoqIHZpbTogZXQ6dHM9NDpzdz00OnN0cz00CiAqIEBsaWNlbnNlIFJlcXVpcmVKUyAyLjEuMjIgQ29weXJpZ2h0IChjKSAyMDEwLTIwMTUsIFRoZSBEb2pvIEZvdW5kYXRpb24gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogQXZhaWxhYmxlIHZpYSB0aGUgTUlUIG9yIG5ldyBCU0QgbGljZW5zZS4KICogc2VlOiBodHRwOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcyBmb3IgZGV0YWlscwogKi8KLy9Ob3QgdXNpbmcgc3RyaWN0OiB1bmV2ZW4gc3RyaWN0IHN1cHBvcnQgaW4gYnJvd3NlcnMsICMzOTIsIGFuZCBjYXVzZXMKLy9wcm9ibGVtcyB3aXRoIHJlcXVpcmVqcy5leGVjKCkvdHJhbnNwaWxlciBwbHVnaW5zIHRoYXQgbWF5IG5vdCBiZSBzdHJpY3QuCi8qanNsaW50IHJlZ2V4cDogdHJ1ZSwgbm9tZW46IHRydWUsIHNsb3BweTogdHJ1ZSAqLwovKmdsb2JhbCB3aW5kb3csIG5hdmlnYXRvciwgZG9jdW1lbnQsIGltcG9ydFNjcmlwdHMsIHNldFRpbWVvdXQsIG9wZXJhICovCgp2YXIgcmVxdWlyZWpzLCByZXF1aXJlLCBkZWZpbmU7CihmdW5jdGlvbiAoZ2xvYmFsKSB7CiAgICB2YXIgcmVxLCBzLCBoZWFkLCBiYXNlRWxlbWVudCwgZGF0YU1haW4sIHNyYywKICAgICAgICBpbnRlcmFjdGl2ZVNjcmlwdCwgY3VycmVudGx5QWRkaW5nU2NyaXB0LCBtYWluU2NyaXB0LCBzdWJQYXRoLAogICAgICAgIHZlcnNpb24gPSAnMi4xLjIyJywKICAgICAgICBjb21tZW50UmVnRXhwID0gLyhcL1wqKFtcc1xTXSo/KVwqXC98KFteOl18XilcL1wvKC4qKSQpL21nLAogICAgICAgIGNqc1JlcXVpcmVSZWdFeHAgPSAvW14uXVxzKnJlcXVpcmVccypcKFxzKlsiJ10oW14nIlxzXSspWyInXVxzKlwpL2csCiAgICAgICAganNTdWZmaXhSZWdFeHAgPSAvXC5qcyQvLAogICAgICAgIGN1cnJEaXJSZWdFeHAgPSAvXlwuXC8vLAogICAgICAgIG9wID0gT2JqZWN0LnByb3RvdHlwZSwKICAgICAgICBvc3RyaW5nID0gb3AudG9TdHJpbmcsCiAgICAgICAgaGFzT3duID0gb3AuaGFzT3duUHJvcGVydHksCiAgICAgICAgYXAgPSBBcnJheS5wcm90b3R5cGUsCiAgICAgICAgaXNCcm93c2VyID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50KSwKICAgICAgICBpc1dlYldvcmtlciA9ICFpc0Jyb3dzZXIgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnLAogICAgICAgIC8vUFMzIGluZGljYXRlcyBsb2FkZWQgYW5kIGNvbXBsZXRlLCBidXQgbmVlZCB0byB3YWl0IGZvciBjb21wbGV0ZQogICAgICAgIC8vc3BlY2lmaWNhbGx5LiBTZXF1ZW5jZSBpcyAnbG9hZGluZycsICdsb2FkZWQnLCBleGVjdXRpb24sCiAgICAgICAgLy8gdGhlbiAnY29tcGxldGUnLiBUaGUgVUEgY2hlY2sgaXMgdW5mb3J0dW5hdGUsIGJ1dCBub3Qgc3VyZSBob3cKICAgICAgICAvL3RvIGZlYXR1cmUgdGVzdCB3L28gY2F1c2luZyBwZXJmIGlzc3Vlcy4KICAgICAgICByZWFkeVJlZ0V4cCA9IGlzQnJvd3NlciAmJiBuYXZpZ2F0b3IucGxhdGZvcm0gPT09ICdQTEFZU1RBVElPTiAzJyA/CiAgICAgICAgICAgICAgICAgICAgICAvXmNvbXBsZXRlJC8gOiAvXihjb21wbGV0ZXxsb2FkZWQpJC8sCiAgICAgICAgZGVmQ29udGV4dE5hbWUgPSAnXycsCiAgICAgICAgLy9PaCB0aGUgdHJhZ2VkeSwgZGV0ZWN0aW5nIG9wZXJhLiBTZWUgdGhlIHVzYWdlIG9mIGlzT3BlcmEgZm9yIHJlYXNvbi4KICAgICAgICBpc09wZXJhID0gdHlwZW9mIG9wZXJhICE9PSAndW5kZWZpbmVkJyAmJiBvcGVyYS50b1N0cmluZygpID09PSAnW29iamVjdCBPcGVyYV0nLAogICAgICAgIGNvbnRleHRzID0ge30sCiAgICAgICAgY2ZnID0ge30sCiAgICAgICAgZ2xvYmFsRGVmUXVldWUgPSBbXSwKICAgICAgICB1c2VJbnRlcmFjdGl2ZSA9IGZhbHNlOwoKICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24oaXQpIHsKICAgICAgICByZXR1cm4gb3N0cmluZy5jYWxsKGl0KSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJzsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0FycmF5KGl0KSB7CiAgICAgICAgcmV0dXJuIG9zdHJpbmcuY2FsbChpdCkgPT09ICdbb2JqZWN0IEFycmF5XSc7CiAgICB9CgogICAgLyoqCiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGl0ZXJhdGluZyBvdmVyIGFuIGFycmF5LiBJZiB0aGUgZnVuYyByZXR1cm5zCiAgICAgKiBhIHRydWUgdmFsdWUsIGl0IHdpbGwgYnJlYWsgb3V0IG9mIHRoZSBsb29wLgogICAgICovCiAgICBmdW5jdGlvbiBlYWNoKGFyeSwgZnVuYykgewogICAgICAgIGlmIChhcnkpIHsKICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgICAgICAgIGlmIChhcnlbaV0gJiYgZnVuYyhhcnlbaV0sIGksIGFyeSkpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgaXRlcmF0aW5nIG92ZXIgYW4gYXJyYXkgYmFja3dhcmRzLiBJZiB0aGUgZnVuYwogICAgICogcmV0dXJucyBhIHRydWUgdmFsdWUsIGl0IHdpbGwgYnJlYWsgb3V0IG9mIHRoZSBsb29wLgogICAgICovCiAgICBmdW5jdGlvbiBlYWNoUmV2ZXJzZShhcnksIGZ1bmMpIHsKICAgICAgICBpZiAoYXJ5KSB7CiAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICBmb3IgKGkgPSBhcnkubGVuZ3RoIC0gMTsgaSA+IC0xOyBpIC09IDEpIHsKICAgICAgICAgICAgICAgIGlmIChhcnlbaV0gJiYgZnVuYyhhcnlbaV0sIGksIGFyeSkpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBoYXNQcm9wKG9iaiwgcHJvcCkgewogICAgICAgIHJldHVybiBoYXNPd24uY2FsbChvYmosIHByb3ApOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE93bihvYmosIHByb3ApIHsKICAgICAgICByZXR1cm4gaGFzUHJvcChvYmosIHByb3ApICYmIG9ialtwcm9wXTsKICAgIH0KCiAgICAvKioKICAgICAqIEN5Y2xlcyBvdmVyIHByb3BlcnRpZXMgaW4gYW4gb2JqZWN0IGFuZCBjYWxscyBhIGZ1bmN0aW9uIGZvciBlYWNoCiAgICAgKiBwcm9wZXJ0eSB2YWx1ZS4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYSB0cnV0aHkgdmFsdWUsIHRoZW4gdGhlCiAgICAgKiBpdGVyYXRpb24gaXMgc3RvcHBlZC4KICAgICAqLwogICAgZnVuY3Rpb24gZWFjaFByb3Aob2JqLCBmdW5jKSB7CiAgICAgICAgdmFyIHByb3A7CiAgICAgICAgZm9yIChwcm9wIGluIG9iaikgewogICAgICAgICAgICBpZiAoaGFzUHJvcChvYmosIHByb3ApKSB7CiAgICAgICAgICAgICAgICBpZiAoZnVuYyhvYmpbcHJvcF0sIHByb3ApKSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTaW1wbGUgZnVuY3Rpb24gdG8gbWl4IGluIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgaW50byB0YXJnZXQsCiAgICAgKiBidXQgb25seSBpZiB0YXJnZXQgZG9lcyBub3QgYWxyZWFkeSBoYXZlIGEgcHJvcGVydHkgb2YgdGhlIHNhbWUgbmFtZS4KICAgICAqLwogICAgZnVuY3Rpb24gbWl4aW4odGFyZ2V0LCBzb3VyY2UsIGZvcmNlLCBkZWVwU3RyaW5nTWl4aW4pIHsKICAgICAgICBpZiAoc291cmNlKSB7CiAgICAgICAgICAgIGVhY2hQcm9wKHNvdXJjZSwgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7CiAgICAgICAgICAgICAgICBpZiAoZm9yY2UgfHwgIWhhc1Byb3AodGFyZ2V0LCBwcm9wKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChkZWVwU3RyaW5nTWl4aW4gJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAhaXNBcnJheSh2YWx1ZSkgJiYgIWlzRnVuY3Rpb24odmFsdWUpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICEodmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFtwcm9wXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW4odGFyZ2V0W3Byb3BdLCB2YWx1ZSwgZm9yY2UsIGRlZXBTdHJpbmdNaXhpbik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICAvL1NpbWlsYXIgdG8gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsIGJ1dCB0aGUgJ3RoaXMnIG9iamVjdCBpcyBzcGVjaWZpZWQKICAgIC8vZmlyc3QsIHNpbmNlIGl0IGlzIGVhc2llciB0byByZWFkL2ZpZ3VyZSBvdXQgd2hhdCAndGhpcycgd2lsbCBiZS4KICAgIGZ1bmN0aW9uIGJpbmQob2JqLCBmbikgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmbi5hcHBseShvYmosIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBzY3JpcHRzKCkgewogICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVmYXVsdE9uRXJyb3IoZXJyKSB7CiAgICAgICAgdGhyb3cgZXJyOwogICAgfQoKICAgIC8vQWxsb3cgZ2V0dGluZyBhIGdsb2JhbCB0aGF0IGlzIGV4cHJlc3NlZCBpbgogICAgLy9kb3Qgbm90YXRpb24sIGxpa2UgJ2EuYi5jJy4KICAgIGZ1bmN0aW9uIGdldEdsb2JhbCh2YWx1ZSkgewogICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgIH0KICAgICAgICB2YXIgZyA9IGdsb2JhbDsKICAgICAgICBlYWNoKHZhbHVlLnNwbGl0KCcuJyksIGZ1bmN0aW9uIChwYXJ0KSB7CiAgICAgICAgICAgIGcgPSBnW3BhcnRdOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBnOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0cyBhbiBlcnJvciB3aXRoIGEgcG9pbnRlciB0byBhbiBVUkwgd2l0aCBtb3JlIGluZm9ybWF0aW9uLgogICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIHRoZSBlcnJvciBJRCB0aGF0IG1hcHMgdG8gYW4gSUQgb24gYSB3ZWIgcGFnZS4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIGh1bWFuIHJlYWRhYmxlIGVycm9yLgogICAgICogQHBhcmFtIHtFcnJvcn0gW2Vycl0gdGhlIG9yaWdpbmFsIGVycm9yLCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKgogICAgICogQHJldHVybnMge0Vycm9yfQogICAgICovCiAgICBmdW5jdGlvbiBtYWtlRXJyb3IoaWQsIG1zZywgZXJyLCByZXF1aXJlTW9kdWxlcykgewogICAgICAgIHZhciBlID0gbmV3IEVycm9yKG1zZyArICdcbmh0dHA6Ly9yZXF1aXJlanMub3JnL2RvY3MvZXJyb3JzLmh0bWwjJyArIGlkKTsKICAgICAgICBlLnJlcXVpcmVUeXBlID0gaWQ7CiAgICAgICAgZS5yZXF1aXJlTW9kdWxlcyA9IHJlcXVpcmVNb2R1bGVzOwogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgZS5vcmlnaW5hbEVycm9yID0gZXJyOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZTsKICAgIH0KCiAgICBpZiAodHlwZW9mIGRlZmluZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAvL0lmIGEgZGVmaW5lIGlzIGFscmVhZHkgaW4gcGxheSB2aWEgYW5vdGhlciBBTUQgbG9hZGVyLAogICAgICAgIC8vZG8gbm90IG92ZXJ3cml0ZS4KICAgICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHR5cGVvZiByZXF1aXJlanMgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgaWYgKGlzRnVuY3Rpb24ocmVxdWlyZWpzKSkgewogICAgICAgICAgICAvL0RvIG5vdCBvdmVyd3JpdGUgYW4gZXhpc3RpbmcgcmVxdWlyZWpzIGluc3RhbmNlLgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNmZyA9IHJlcXVpcmVqczsKICAgICAgICByZXF1aXJlanMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgLy9BbGxvdyBmb3IgYSByZXF1aXJlIGNvbmZpZyBvYmplY3QKICAgIGlmICh0eXBlb2YgcmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcgJiYgIWlzRnVuY3Rpb24ocmVxdWlyZSkpIHsKICAgICAgICAvL2Fzc3VtZSBpdCBpcyBhIGNvbmZpZyBvYmplY3QuCiAgICAgICAgY2ZnID0gcmVxdWlyZTsKICAgICAgICByZXF1aXJlID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGZ1bmN0aW9uIG5ld0NvbnRleHQoY29udGV4dE5hbWUpIHsKICAgICAgICB2YXIgaW5DaGVja0xvYWRlZCwgTW9kdWxlLCBjb250ZXh0LCBoYW5kbGVycywKICAgICAgICAgICAgY2hlY2tMb2FkZWRUaW1lb3V0SWQsCiAgICAgICAgICAgIGNvbmZpZyA9IHsKICAgICAgICAgICAgICAgIC8vRGVmYXVsdHMuIERvIG5vdCBzZXQgYSBkZWZhdWx0IGZvciBtYXAKICAgICAgICAgICAgICAgIC8vY29uZmlnIHRvIHNwZWVkIHVwIG5vcm1hbGl6ZSgpLCB3aGljaAogICAgICAgICAgICAgICAgLy93aWxsIHJ1biBmYXN0ZXIgaWYgdGhlcmUgaXMgbm8gZGVmYXVsdC4KICAgICAgICAgICAgICAgIHdhaXRTZWNvbmRzOiA3LAogICAgICAgICAgICAgICAgYmFzZVVybDogJy4vJywKICAgICAgICAgICAgICAgIHBhdGhzOiB7fSwKICAgICAgICAgICAgICAgIGJ1bmRsZXM6IHt9LAogICAgICAgICAgICAgICAgcGtnczoge30sCiAgICAgICAgICAgICAgICBzaGltOiB7fSwKICAgICAgICAgICAgICAgIGNvbmZpZzoge30KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVnaXN0cnkgPSB7fSwKICAgICAgICAgICAgLy9yZWdpc3RyeSBvZiBqdXN0IGVuYWJsZWQgbW9kdWxlcywgdG8gc3BlZWQKICAgICAgICAgICAgLy9jeWNsZSBicmVha2luZyBjb2RlIHdoZW4gbG90cyBvZiBtb2R1bGVzCiAgICAgICAgICAgIC8vYXJlIHJlZ2lzdGVyZWQsIGJ1dCBub3QgYWN0aXZhdGVkLgogICAgICAgICAgICBlbmFibGVkUmVnaXN0cnkgPSB7fSwKICAgICAgICAgICAgdW5kZWZFdmVudHMgPSB7fSwKICAgICAgICAgICAgZGVmUXVldWUgPSBbXSwKICAgICAgICAgICAgZGVmaW5lZCA9IHt9LAogICAgICAgICAgICB1cmxGZXRjaGVkID0ge30sCiAgICAgICAgICAgIGJ1bmRsZXNNYXAgPSB7fSwKICAgICAgICAgICAgcmVxdWlyZUNvdW50ZXIgPSAxLAogICAgICAgICAgICB1bm5vcm1hbGl6ZWRDb3VudGVyID0gMTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVHJpbXMgdGhlIC4gYW5kIC4uIGZyb20gYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cy4KICAgICAgICAgKiBJdCB3aWxsIGtlZXAgYSBsZWFkaW5nIHBhdGggc2VnbWVudCBpZiBhIC4uIHdpbGwgYmVjb21lCiAgICAgICAgICogdGhlIGZpcnN0IHBhdGggc2VnbWVudCwgdG8gaGVscCB3aXRoIG1vZHVsZSBuYW1lIGxvb2t1cHMsCiAgICAgICAgICogd2hpY2ggYWN0IGxpa2UgcGF0aHMsIGJ1dCBjYW4gYmUgcmVtYXBwZWQuIEJ1dCB0aGUgZW5kIHJlc3VsdCwKICAgICAgICAgKiBhbGwgcGF0aHMgdGhhdCB1c2UgdGhpcyBmdW5jdGlvbiBzaG91bGQgbG9vayBub3JtYWxpemVkLgogICAgICAgICAqIE5PVEU6IHRoaXMgbWV0aG9kIE1PRElGSUVTIHRoZSBpbnB1dCBhcnJheS4KICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnkgdGhlIGFycmF5IG9mIHBhdGggc2VnbWVudHMuCiAgICAgICAgICovCiAgICAgICAgZnVuY3Rpb24gdHJpbURvdHMoYXJ5KSB7CiAgICAgICAgICAgIHZhciBpLCBwYXJ0OwogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBwYXJ0ID0gYXJ5W2ldOwogICAgICAgICAgICAgICAgaWYgKHBhcnQgPT09ICcuJykgewogICAgICAgICAgICAgICAgICAgIGFyeS5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgaSAtPSAxOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0ID09PSAnLi4nKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSWYgYXQgdGhlIHN0YXJ0LCBvciBwcmV2aW91cyB2YWx1ZSBpcyBzdGlsbCAuLiwKICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIHRoZW0gc28gdGhhdCB3aGVuIGNvbnZlcnRlZCB0byBhIHBhdGggaXQgbWF5CiAgICAgICAgICAgICAgICAgICAgLy8gc3RpbGwgd29yayB3aGVuIGNvbnZlcnRlZCB0byBhIHBhdGgsIGV2ZW4gdGhvdWdoCiAgICAgICAgICAgICAgICAgICAgLy8gYXMgYW4gSUQgaXQgaXMgbGVzcyB0aGFuIGlkZWFsLiBJbiBsYXJnZXIgcG9pbnQKICAgICAgICAgICAgICAgICAgICAvLyByZWxlYXNlcywgbWF5IGJlIGJldHRlciB0byBqdXN0IGtpY2sgb3V0IGFuIGVycm9yLgogICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwIHx8IChpID09PSAxICYmIGFyeVsyXSA9PT0gJy4uJykgfHwgYXJ5W2kgLSAxXSA9PT0gJy4uJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFyeS5zcGxpY2UoaSAtIDEsIDIpOwogICAgICAgICAgICAgICAgICAgICAgICBpIC09IDI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBHaXZlbiBhIHJlbGF0aXZlIG1vZHVsZSBuYW1lLCBsaWtlIC4vc29tZXRoaW5nLCBub3JtYWxpemUgaXQgdG8KICAgICAgICAgKiBhIHJlYWwgbmFtZSB0aGF0IGNhbiBiZSBtYXBwZWQgdG8gYSBwYXRoLgogICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSByZWxhdGl2ZSBuYW1lCiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGJhc2VOYW1lIGEgcmVhbCBuYW1lIHRoYXQgdGhlIG5hbWUgYXJnIGlzIHJlbGF0aXZlCiAgICAgICAgICogdG8uCiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBhcHBseU1hcCBhcHBseSB0aGUgbWFwIGNvbmZpZyB0byB0aGUgdmFsdWUuIFNob3VsZAogICAgICAgICAqIG9ubHkgYmUgZG9uZSBpZiB0aGlzIG5vcm1hbGl6YXRpb24gaXMgZm9yIGEgZGVwZW5kZW5jeSBJRC4KICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBub3JtYWxpemVkIG5hbWUKICAgICAgICAgKi8KICAgICAgICBmdW5jdGlvbiBub3JtYWxpemUobmFtZSwgYmFzZU5hbWUsIGFwcGx5TWFwKSB7CiAgICAgICAgICAgIHZhciBwa2dNYWluLCBtYXBWYWx1ZSwgbmFtZVBhcnRzLCBpLCBqLCBuYW1lU2VnbWVudCwgbGFzdEluZGV4LAogICAgICAgICAgICAgICAgZm91bmRNYXAsIGZvdW5kSSwgZm91bmRTdGFyTWFwLCBzdGFySSwgbm9ybWFsaXplZEJhc2VQYXJ0cywKICAgICAgICAgICAgICAgIGJhc2VQYXJ0cyA9IChiYXNlTmFtZSAmJiBiYXNlTmFtZS5zcGxpdCgnLycpKSwKICAgICAgICAgICAgICAgIG1hcCA9IGNvbmZpZy5tYXAsCiAgICAgICAgICAgICAgICBzdGFyTWFwID0gbWFwICYmIG1hcFsnKiddOwoKICAgICAgICAgICAgLy9BZGp1c3QgYW55IHJlbGF0aXZlIHBhdGhzLgogICAgICAgICAgICBpZiAobmFtZSkgewogICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3BsaXQoJy8nKTsKICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IG5hbWUubGVuZ3RoIC0gMTsKCiAgICAgICAgICAgICAgICAvLyBJZiB3YW50aW5nIG5vZGUgSUQgY29tcGF0aWJpbGl0eSwgc3RyaXAgLmpzIGZyb20gZW5kCiAgICAgICAgICAgICAgICAvLyBvZiBJRHMuIEhhdmUgdG8gZG8gdGhpcyBoZXJlLCBhbmQgbm90IGluIG5hbWVUb1VybAogICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBub2RlIGFsbG93cyBlaXRoZXIgLmpzIG9yIG5vbiAuanMgdG8gbWFwCiAgICAgICAgICAgICAgICAvLyB0byBzYW1lIGZpbGUuCiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm5vZGVJZENvbXBhdCAmJiBqc1N1ZmZpeFJlZ0V4cC50ZXN0KG5hbWVbbGFzdEluZGV4XSkpIHsKICAgICAgICAgICAgICAgICAgICBuYW1lW2xhc3RJbmRleF0gPSBuYW1lW2xhc3RJbmRleF0ucmVwbGFjZShqc1N1ZmZpeFJlZ0V4cCwgJycpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFN0YXJ0cyB3aXRoIGEgJy4nIHNvIG5lZWQgdGhlIGJhc2VOYW1lCiAgICAgICAgICAgICAgICBpZiAobmFtZVswXS5jaGFyQXQoMCkgPT09ICcuJyAmJiBiYXNlUGFydHMpIHsKICAgICAgICAgICAgICAgICAgICAvL0NvbnZlcnQgYmFzZU5hbWUgdG8gYXJyYXksIGFuZCBsb3Agb2ZmIHRoZSBsYXN0IHBhcnQsCiAgICAgICAgICAgICAgICAgICAgLy9zbyB0aGF0IC4gbWF0Y2hlcyB0aGF0ICdkaXJlY3RvcnknIGFuZCBub3QgbmFtZSBvZiB0aGUgYmFzZU5hbWUncwogICAgICAgICAgICAgICAgICAgIC8vbW9kdWxlLiBGb3IgaW5zdGFuY2UsIGJhc2VOYW1lIG9mICdvbmUvdHdvL3RocmVlJywgbWFwcyB0bwogICAgICAgICAgICAgICAgICAgIC8vJ29uZS90d28vdGhyZWUuanMnLCBidXQgd2Ugd2FudCB0aGUgZGlyZWN0b3J5LCAnb25lL3R3bycgZm9yCiAgICAgICAgICAgICAgICAgICAgLy90aGlzIG5vcm1hbGl6YXRpb24uCiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEJhc2VQYXJ0cyA9IGJhc2VQYXJ0cy5zbGljZSgwLCBiYXNlUGFydHMubGVuZ3RoIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZWRCYXNlUGFydHMuY29uY2F0KG5hbWUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRyaW1Eb3RzKG5hbWUpOwogICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuam9pbignLycpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL0FwcGx5IG1hcCBjb25maWcgaWYgYXZhaWxhYmxlLgogICAgICAgICAgICBpZiAoYXBwbHlNYXAgJiYgbWFwICYmIChiYXNlUGFydHMgfHwgc3Rhck1hcCkpIHsKICAgICAgICAgICAgICAgIG5hbWVQYXJ0cyA9IG5hbWUuc3BsaXQoJy8nKTsKCiAgICAgICAgICAgICAgICBvdXRlckxvb3A6IGZvciAoaSA9IG5hbWVQYXJ0cy5sZW5ndGg7IGkgPiAwOyBpIC09IDEpIHsKICAgICAgICAgICAgICAgICAgICBuYW1lU2VnbWVudCA9IG5hbWVQYXJ0cy5zbGljZSgwLCBpKS5qb2luKCcvJyk7CgogICAgICAgICAgICAgICAgICAgIGlmIChiYXNlUGFydHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9GaW5kIHRoZSBsb25nZXN0IGJhc2VOYW1lIHNlZ21lbnQgbWF0Y2ggaW4gdGhlIGNvbmZpZy4KICAgICAgICAgICAgICAgICAgICAgICAgLy9TbywgZG8gam9pbnMgb24gdGhlIGJpZ2dlc3QgdG8gc21hbGxlc3QgbGVuZ3RocyBvZiBiYXNlUGFydHMuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IGJhc2VQYXJ0cy5sZW5ndGg7IGogPiAwOyBqIC09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlID0gZ2V0T3duKG1hcCwgYmFzZVBhcnRzLnNsaWNlKDAsIGopLmpvaW4oJy8nKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9iYXNlTmFtZSBzZWdtZW50IGhhcyBjb25maWcsIGZpbmQgaWYgaXQgaGFzIG9uZSBmb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBuYW1lLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcFZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwVmFsdWUgPSBnZXRPd24obWFwVmFsdWUsIG5hbWVTZWdtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXRjaCwgdXBkYXRlIG5hbWUgdG8gdGhlIG5ldyB2YWx1ZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBtYXBWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRJID0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgb3V0ZXJMb29wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy9DaGVjayBmb3IgYSBzdGFyIG1hcCBtYXRjaCwgYnV0IGp1c3QgaG9sZCBvbiB0byBpdCwKICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZXJlIGlzIGEgc2hvcnRlciBzZWdtZW50IG1hdGNoIGxhdGVyIGluIGEgbWF0Y2hpbmcKICAgICAgICAgICAgICAgICAgICAvL2NvbmZpZywgdGhlbiBmYXZvciBvdmVyIHRoaXMgc3RhciBtYXAuCiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZFN0YXJNYXAgJiYgc3Rhck1hcCAmJiBnZXRPd24oc3Rhck1hcCwgbmFtZVNlZ21lbnQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kU3Rhck1hcCA9IGdldE93bihzdGFyTWFwLCBuYW1lU2VnbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJJID0gaTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFmb3VuZE1hcCAmJiBmb3VuZFN0YXJNYXApIHsKICAgICAgICAgICAgICAgICAgICBmb3VuZE1hcCA9IGZvdW5kU3Rhck1hcDsKICAgICAgICAgICAgICAgICAgICBmb3VuZEkgPSBzdGFySTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZm91bmRNYXApIHsKICAgICAgICAgICAgICAgICAgICBuYW1lUGFydHMuc3BsaWNlKDAsIGZvdW5kSSwgZm91bmRNYXApOwogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lUGFydHMuam9pbignLycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJZiB0aGUgbmFtZSBwb2ludHMgdG8gYSBwYWNrYWdlJ3MgbmFtZSwgdXNlCiAgICAgICAgICAgIC8vIHRoZSBwYWNrYWdlIG1haW4gaW5zdGVhZC4KICAgICAgICAgICAgcGtnTWFpbiA9IGdldE93bihjb25maWcucGtncywgbmFtZSk7CgogICAgICAgICAgICByZXR1cm4gcGtnTWFpbiA/IHBrZ01haW4gOiBuYW1lOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU2NyaXB0KG5hbWUpIHsKICAgICAgICAgICAgaWYgKGlzQnJvd3NlcikgewogICAgICAgICAgICAgICAgZWFjaChzY3JpcHRzKCksIGZ1bmN0aW9uIChzY3JpcHROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcmlwdE5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVtb2R1bGUnKSA9PT0gbmFtZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZWNvbnRleHQnKSA9PT0gY29udGV4dC5jb250ZXh0TmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoYXNQYXRoRmFsbGJhY2soaWQpIHsKICAgICAgICAgICAgdmFyIHBhdGhDb25maWcgPSBnZXRPd24oY29uZmlnLnBhdGhzLCBpZCk7CiAgICAgICAgICAgIGlmIChwYXRoQ29uZmlnICYmIGlzQXJyYXkocGF0aENvbmZpZykgJiYgcGF0aENvbmZpZy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAvL1BvcCBvZmYgdGhlIGZpcnN0IGFycmF5IHZhbHVlLCBzaW5jZSBpdCBmYWlsZWQsIGFuZAogICAgICAgICAgICAgICAgLy9yZXRyeQogICAgICAgICAgICAgICAgcGF0aENvbmZpZy5zaGlmdCgpOwogICAgICAgICAgICAgICAgY29udGV4dC5yZXF1aXJlLnVuZGVmKGlkKTsKCiAgICAgICAgICAgICAgICAvL0N1c3RvbSByZXF1aXJlIHRoYXQgZG9lcyBub3QgZG8gbWFwIHRyYW5zbGF0aW9uLCBzaW5jZQogICAgICAgICAgICAgICAgLy9JRCBpcyAiYWJzb2x1dGUiLCBhbHJlYWR5IG1hcHBlZC9yZXNvbHZlZC4KICAgICAgICAgICAgICAgIGNvbnRleHQubWFrZVJlcXVpcmUobnVsbCwgewogICAgICAgICAgICAgICAgICAgIHNraXBNYXA6IHRydWUKICAgICAgICAgICAgICAgIH0pKFtpZF0pOwoKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvL1R1cm5zIGEgcGx1Z2luIXJlc291cmNlIHRvIFtwbHVnaW4sIHJlc291cmNlXQogICAgICAgIC8vd2l0aCB0aGUgcGx1Z2luIGJlaW5nIHVuZGVmaW5lZCBpZiB0aGUgbmFtZQogICAgICAgIC8vZGlkIG5vdCBoYXZlIGEgcGx1Z2luIHByZWZpeC4KICAgICAgICBmdW5jdGlvbiBzcGxpdFByZWZpeChuYW1lKSB7CiAgICAgICAgICAgIHZhciBwcmVmaXgsCiAgICAgICAgICAgICAgICBpbmRleCA9IG5hbWUgPyBuYW1lLmluZGV4T2YoJyEnKSA6IC0xOwogICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgICAgICAgICAgcHJlZml4ID0gbmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpOwogICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKGluZGV4ICsgMSwgbmFtZS5sZW5ndGgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBbcHJlZml4LCBuYW1lXTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBtb2R1bGUgbWFwcGluZyB0aGF0IGluY2x1ZGVzIHBsdWdpbiBwcmVmaXgsIG1vZHVsZQogICAgICAgICAqIG5hbWUsIGFuZCBwYXRoLiBJZiBwYXJlbnRNb2R1bGVNYXAgaXMgcHJvdmlkZWQgaXQgd2lsbAogICAgICAgICAqIGFsc28gbm9ybWFsaXplIHRoZSBuYW1lIHZpYSByZXF1aXJlLm5vcm1hbGl6ZSgpCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbW9kdWxlIG5hbWUKICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhcmVudE1vZHVsZU1hcF0gcGFyZW50IG1vZHVsZSBtYXAKICAgICAgICAgKiBmb3IgdGhlIG1vZHVsZSBuYW1lLCB1c2VkIHRvIHJlc29sdmUgcmVsYXRpdmUgbmFtZXMuCiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBpc05vcm1hbGl6ZWQ6IGlzIHRoZSBJRCBhbHJlYWR5IG5vcm1hbGl6ZWQuCiAgICAgICAgICogVGhpcyBpcyB0cnVlIGlmIHRoaXMgY2FsbCBpcyBkb25lIGZvciBhIGRlZmluZSgpIG1vZHVsZSBJRC4KICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFwcGx5TWFwOiBhcHBseSB0aGUgbWFwIGNvbmZpZyB0byB0aGUgSUQuCiAgICAgICAgICogU2hvdWxkIG9ubHkgYmUgdHJ1ZSBpZiB0aGlzIG1hcCBpcyBmb3IgYSBkZXBlbmRlbmN5LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybnMge09iamVjdH0KICAgICAgICAgKi8KICAgICAgICBmdW5jdGlvbiBtYWtlTW9kdWxlTWFwKG5hbWUsIHBhcmVudE1vZHVsZU1hcCwgaXNOb3JtYWxpemVkLCBhcHBseU1hcCkgewogICAgICAgICAgICB2YXIgdXJsLCBwbHVnaW5Nb2R1bGUsIHN1ZmZpeCwgbmFtZVBhcnRzLAogICAgICAgICAgICAgICAgcHJlZml4ID0gbnVsbCwKICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBwYXJlbnRNb2R1bGVNYXAgPyBwYXJlbnRNb2R1bGVNYXAubmFtZSA6IG51bGwsCiAgICAgICAgICAgICAgICBvcmlnaW5hbE5hbWUgPSBuYW1lLAogICAgICAgICAgICAgICAgaXNEZWZpbmUgPSB0cnVlLAogICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUgPSAnJzsKCiAgICAgICAgICAgIC8vSWYgbm8gbmFtZSwgdGhlbiBpdCBtZWFucyBpdCBpcyBhIHJlcXVpcmUgY2FsbCwgZ2VuZXJhdGUgYW4KICAgICAgICAgICAgLy9pbnRlcm5hbCBuYW1lLgogICAgICAgICAgICBpZiAoIW5hbWUpIHsKICAgICAgICAgICAgICAgIGlzRGVmaW5lID0gZmFsc2U7CiAgICAgICAgICAgICAgICBuYW1lID0gJ19AcicgKyAocmVxdWlyZUNvdW50ZXIgKz0gMSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5hbWVQYXJ0cyA9IHNwbGl0UHJlZml4KG5hbWUpOwogICAgICAgICAgICBwcmVmaXggPSBuYW1lUGFydHNbMF07CiAgICAgICAgICAgIG5hbWUgPSBuYW1lUGFydHNbMV07CgogICAgICAgICAgICBpZiAocHJlZml4KSB7CiAgICAgICAgICAgICAgICBwcmVmaXggPSBub3JtYWxpemUocHJlZml4LCBwYXJlbnROYW1lLCBhcHBseU1hcCk7CiAgICAgICAgICAgICAgICBwbHVnaW5Nb2R1bGUgPSBnZXRPd24oZGVmaW5lZCwgcHJlZml4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9BY2NvdW50IGZvciByZWxhdGl2ZSBwYXRocyBpZiB0aGVyZSBpcyBhIGJhc2UgbmFtZS4KICAgICAgICAgICAgaWYgKG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChwcmVmaXgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luTW9kdWxlICYmIHBsdWdpbk1vZHVsZS5ub3JtYWxpemUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9QbHVnaW4gaXMgbG9hZGVkLCB1c2UgaXRzIG5vcm1hbGl6ZSBtZXRob2QuCiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gcGx1Z2luTW9kdWxlLm5vcm1hbGl6ZShuYW1lLCBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCBhcHBseU1hcCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5lc3RlZCBwbHVnaW4gcmVmZXJlbmNlcywgdGhlbiBkbyBub3QgdHJ5IHRvCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSwgYXMgaXQgd2lsbCBub3Qgbm9ybWFsaXplIGNvcnJlY3RseS4gVGhpcwogICAgICAgICAgICAgICAgICAgICAgICAvLyBwbGFjZXMgYSByZXN0cmljdGlvbiBvbiByZXNvdXJjZUlkcywgYW5kIHRoZSBsb25nZXIKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVybSBzb2x1dGlvbiBpcyBub3QgdG8gbm9ybWFsaXplIHVudGlsIHBsdWdpbnMgYXJlCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvYWRlZCBhbmQgYWxsIG5vcm1hbGl6YXRpb25zIHRvIGFsbG93IGZvciBhc3luYwogICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2FkaW5nIG9mIGEgbG9hZGVyIHBsdWdpbi4gQnV0IGZvciBub3csIGZpeGVzIHRoZQogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21tb24gdXNlcy4gRGV0YWlscyBpbiAjMTEzMQogICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IG5hbWUuaW5kZXhPZignIScpID09PSAtMSA/CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplKG5hbWUsIHBhcmVudE5hbWUsIGFwcGx5TWFwKSA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vQSByZWd1bGFyIG1vZHVsZS4KICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCBhcHBseU1hcCk7CgogICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplZCBuYW1lIG1heSBiZSBhIHBsdWdpbiBJRCBkdWUgdG8gbWFwIGNvbmZpZwogICAgICAgICAgICAgICAgICAgIC8vYXBwbGljYXRpb24gaW4gbm9ybWFsaXplLiBUaGUgbWFwIGNvbmZpZyB2YWx1ZXMgbXVzdAogICAgICAgICAgICAgICAgICAgIC8vYWxyZWFkeSBiZSBub3JtYWxpemVkLCBzbyBkbyBub3QgbmVlZCB0byByZWRvIHRoYXQgcGFydC4KICAgICAgICAgICAgICAgICAgICBuYW1lUGFydHMgPSBzcGxpdFByZWZpeChub3JtYWxpemVkTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gbmFtZVBhcnRzWzBdOwogICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gbmFtZVBhcnRzWzFdOwogICAgICAgICAgICAgICAgICAgIGlzTm9ybWFsaXplZCA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbnRleHQubmFtZVRvVXJsKG5vcm1hbGl6ZWROYW1lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9JZiB0aGUgaWQgaXMgYSBwbHVnaW4gaWQgdGhhdCBjYW5ub3QgYmUgZGV0ZXJtaW5lZCBpZiBpdCBuZWVkcwogICAgICAgICAgICAvL25vcm1hbGl6YXRpb24sIHN0YW1wIGl0IHdpdGggYSB1bmlxdWUgSUQgc28gdHdvIG1hdGNoaW5nIHJlbGF0aXZlCiAgICAgICAgICAgIC8vaWRzIHRoYXQgbWF5IGNvbmZsaWN0IGNhbiBiZSBzZXBhcmF0ZS4KICAgICAgICAgICAgc3VmZml4ID0gcHJlZml4ICYmICFwbHVnaW5Nb2R1bGUgJiYgIWlzTm9ybWFsaXplZCA/CiAgICAgICAgICAgICAgICAgICAgICdfdW5ub3JtYWxpemVkJyArICh1bm5vcm1hbGl6ZWRDb3VudGVyICs9IDEpIDoKICAgICAgICAgICAgICAgICAgICAgJyc7CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcHJlZml4OiBwcmVmaXgsCiAgICAgICAgICAgICAgICBuYW1lOiBub3JtYWxpemVkTmFtZSwKICAgICAgICAgICAgICAgIHBhcmVudE1hcDogcGFyZW50TW9kdWxlTWFwLAogICAgICAgICAgICAgICAgdW5ub3JtYWxpemVkOiAhIXN1ZmZpeCwKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgb3JpZ2luYWxOYW1lOiBvcmlnaW5hbE5hbWUsCiAgICAgICAgICAgICAgICBpc0RlZmluZTogaXNEZWZpbmUsCiAgICAgICAgICAgICAgICBpZDogKHByZWZpeCA/CiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCArICchJyArIG5vcm1hbGl6ZWROYW1lIDoKICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUpICsgc3VmZml4CiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRNb2R1bGUoZGVwTWFwKSB7CiAgICAgICAgICAgIHZhciBpZCA9IGRlcE1hcC5pZCwKICAgICAgICAgICAgICAgIG1vZCA9IGdldE93bihyZWdpc3RyeSwgaWQpOwoKICAgICAgICAgICAgaWYgKCFtb2QpIHsKICAgICAgICAgICAgICAgIG1vZCA9IHJlZ2lzdHJ5W2lkXSA9IG5ldyBjb250ZXh0Lk1vZHVsZShkZXBNYXApOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gbW9kOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gb24oZGVwTWFwLCBuYW1lLCBmbikgewogICAgICAgICAgICB2YXIgaWQgPSBkZXBNYXAuaWQsCiAgICAgICAgICAgICAgICBtb2QgPSBnZXRPd24ocmVnaXN0cnksIGlkKTsKCiAgICAgICAgICAgIGlmIChoYXNQcm9wKGRlZmluZWQsIGlkKSAmJgogICAgICAgICAgICAgICAgICAgICghbW9kIHx8IG1vZC5kZWZpbmVFbWl0Q29tcGxldGUpKSB7CiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2RlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgZm4oZGVmaW5lZFtpZF0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbW9kID0gZ2V0TW9kdWxlKGRlcE1hcCk7CiAgICAgICAgICAgICAgICBpZiAobW9kLmVycm9yICYmIG5hbWUgPT09ICdlcnJvcicpIHsKICAgICAgICAgICAgICAgICAgICBmbihtb2QuZXJyb3IpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtb2Qub24obmFtZSwgZm4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvbkVycm9yKGVyciwgZXJyYmFjaykgewogICAgICAgICAgICB2YXIgaWRzID0gZXJyLnJlcXVpcmVNb2R1bGVzLAogICAgICAgICAgICAgICAgbm90aWZpZWQgPSBmYWxzZTsKCiAgICAgICAgICAgIGlmIChlcnJiYWNrKSB7CiAgICAgICAgICAgICAgICBlcnJiYWNrKGVycik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlYWNoKGlkcywgZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZCA9IGdldE93bihyZWdpc3RyeSwgaWQpOwogICAgICAgICAgICAgICAgICAgIGlmIChtb2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXQgZXJyb3Igb24gbW9kdWxlLCBzbyBpdCBza2lwcyB0aW1lb3V0IGNoZWNrcy4KICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmVycm9yID0gZXJyOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmV2ZW50cy5lcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmVtaXQoJ2Vycm9yJywgZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghbm90aWZpZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXEub25FcnJvcihlcnIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBJbnRlcm5hbCBtZXRob2QgdG8gdHJhbnNmZXIgZ2xvYmFsUXVldWUgaXRlbXMgdG8gdGhpcyBjb250ZXh0J3MKICAgICAgICAgKiBkZWZRdWV1ZS4KICAgICAgICAgKi8KICAgICAgICBmdW5jdGlvbiB0YWtlR2xvYmFsUXVldWUoKSB7CiAgICAgICAgICAgIC8vUHVzaCBhbGwgdGhlIGdsb2JhbERlZlF1ZXVlIGl0ZW1zIGludG8gdGhlIGNvbnRleHQncyBkZWZRdWV1ZQogICAgICAgICAgICBpZiAoZ2xvYmFsRGVmUXVldWUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBlYWNoKGdsb2JhbERlZlF1ZXVlLCBmdW5jdGlvbihxdWV1ZUl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBxdWV1ZUl0ZW1bMF07CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZU1hcFtpZF0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkZWZRdWV1ZS5wdXNoKHF1ZXVlSXRlbSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGdsb2JhbERlZlF1ZXVlID0gW107CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGhhbmRsZXJzID0gewogICAgICAgICAgICAncmVxdWlyZSc6IGZ1bmN0aW9uIChtb2QpIHsKICAgICAgICAgICAgICAgIGlmIChtb2QucmVxdWlyZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QucmVxdWlyZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2QucmVxdWlyZSA9IGNvbnRleHQubWFrZVJlcXVpcmUobW9kLm1hcCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAnZXhwb3J0cyc6IGZ1bmN0aW9uIChtb2QpIHsKICAgICAgICAgICAgICAgIG1vZC51c2luZ0V4cG9ydHMgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKG1vZC5tYXAuaXNEZWZpbmUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmV4cG9ydHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkZWZpbmVkW21vZC5tYXAuaWRdID0gbW9kLmV4cG9ydHMpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobW9kLmV4cG9ydHMgPSBkZWZpbmVkW21vZC5tYXAuaWRdID0ge30pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ21vZHVsZSc6IGZ1bmN0aW9uIChtb2QpIHsKICAgICAgICAgICAgICAgIGlmIChtb2QubW9kdWxlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZC5tb2R1bGU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAobW9kLm1vZHVsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vZC5tYXAuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogbW9kLm1hcC51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldE93bihjb25maWcuY29uZmlnLCBtb2QubWFwLmlkKSB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0czogbW9kLmV4cG9ydHMgfHwgKG1vZC5leHBvcnRzID0ge30pCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBjbGVhblJlZ2lzdHJ5KGlkKSB7CiAgICAgICAgICAgIC8vQ2xlYW4gdXAgbWFjaGluZXJ5IHVzZWQgZm9yIHdhaXRpbmcgbW9kdWxlcy4KICAgICAgICAgICAgZGVsZXRlIHJlZ2lzdHJ5W2lkXTsKICAgICAgICAgICAgZGVsZXRlIGVuYWJsZWRSZWdpc3RyeVtpZF07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBicmVha0N5Y2xlKG1vZCwgdHJhY2VkLCBwcm9jZXNzZWQpIHsKICAgICAgICAgICAgdmFyIGlkID0gbW9kLm1hcC5pZDsKCiAgICAgICAgICAgIGlmIChtb2QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIG1vZC5lbWl0KCdlcnJvcicsIG1vZC5lcnJvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0cmFjZWRbaWRdID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVhY2gobW9kLmRlcE1hcHMsIGZ1bmN0aW9uIChkZXBNYXAsIGkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVwSWQgPSBkZXBNYXAuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlcCA9IGdldE93bihyZWdpc3RyeSwgZGVwSWQpOwoKICAgICAgICAgICAgICAgICAgICAvL09ubHkgZm9yY2UgdGhpbmdzIHRoYXQgaGF2ZSBub3QgY29tcGxldGVkCiAgICAgICAgICAgICAgICAgICAgLy9iZWluZyBkZWZpbmVkLCBzbyBzdGlsbCBpbiB0aGUgcmVnaXN0cnksCiAgICAgICAgICAgICAgICAgICAgLy9hbmQgb25seSBpZiBpdCBoYXMgbm90IGJlZW4gbWF0Y2hlZCB1cAogICAgICAgICAgICAgICAgICAgIC8vaW4gdGhlIG1vZHVsZSBhbHJlYWR5LgogICAgICAgICAgICAgICAgICAgIGlmIChkZXAgJiYgIW1vZC5kZXBNYXRjaGVkW2ldICYmICFwcm9jZXNzZWRbZGVwSWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRPd24odHJhY2VkLCBkZXBJZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZC5kZWZpbmVEZXAoaSwgZGVmaW5lZFtkZXBJZF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmNoZWNrKCk7IC8vcGFzcyBmYWxzZT8KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrQ3ljbGUoZGVwLCB0cmFjZWQsIHByb2Nlc3NlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHByb2Nlc3NlZFtpZF0gPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjaGVja0xvYWRlZCgpIHsKICAgICAgICAgICAgdmFyIGVyciwgdXNpbmdQYXRoRmFsbGJhY2ssCiAgICAgICAgICAgICAgICB3YWl0SW50ZXJ2YWwgPSBjb25maWcud2FpdFNlY29uZHMgKiAxMDAwLAogICAgICAgICAgICAgICAgLy9JdCBpcyBwb3NzaWJsZSB0byBkaXNhYmxlIHRoZSB3YWl0IGludGVydmFsIGJ5IHVzaW5nIHdhaXRTZWNvbmRzIG9mIDAuCiAgICAgICAgICAgICAgICBleHBpcmVkID0gd2FpdEludGVydmFsICYmIChjb250ZXh0LnN0YXJ0VGltZSArIHdhaXRJbnRlcnZhbCkgPCBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICAgICAgICAgIG5vTG9hZHMgPSBbXSwKICAgICAgICAgICAgICAgIHJlcUNhbGxzID0gW10sCiAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSBmYWxzZSwKICAgICAgICAgICAgICAgIG5lZWRDeWNsZUNoZWNrID0gdHJ1ZTsKCiAgICAgICAgICAgIC8vRG8gbm90IGJvdGhlciBpZiB0aGlzIGNhbGwgd2FzIGEgcmVzdWx0IG9mIGEgY3ljbGUgYnJlYWsuCiAgICAgICAgICAgIGlmIChpbkNoZWNrTG9hZGVkKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGluQ2hlY2tMb2FkZWQgPSB0cnVlOwoKICAgICAgICAgICAgLy9GaWd1cmUgb3V0IHRoZSBzdGF0ZSBvZiBhbGwgdGhlIG1vZHVsZXMuCiAgICAgICAgICAgIGVhY2hQcm9wKGVuYWJsZWRSZWdpc3RyeSwgZnVuY3Rpb24gKG1vZCkgewogICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1vZC5tYXAsCiAgICAgICAgICAgICAgICAgICAgbW9kSWQgPSBtYXAuaWQ7CgogICAgICAgICAgICAgICAgLy9Ta2lwIHRoaW5ncyB0aGF0IGFyZSBub3QgZW5hYmxlZCBvciBpbiBlcnJvciBzdGF0ZS4KICAgICAgICAgICAgICAgIGlmICghbW9kLmVuYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFtYXAuaXNEZWZpbmUpIHsKICAgICAgICAgICAgICAgICAgICByZXFDYWxscy5wdXNoKG1vZCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFtb2QuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZSBtb2R1bGUgc2hvdWxkIGJlIGV4ZWN1dGVkLCBhbmQgaXQgaGFzIG5vdAogICAgICAgICAgICAgICAgICAgIC8vYmVlbiBpbml0ZWQgYW5kIHRpbWUgaXMgdXAsIHJlbWVtYmVyIGl0LgogICAgICAgICAgICAgICAgICAgIGlmICghbW9kLmluaXRlZCAmJiBleHBpcmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNQYXRoRmFsbGJhY2sobW9kSWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2luZ1BhdGhGYWxsYmFjayA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9Mb2Fkcy5wdXNoKG1vZElkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVNjcmlwdChtb2RJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFtb2QuaW5pdGVkICYmIG1vZC5mZXRjaGVkICYmIG1hcC5pc0RlZmluZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcC5wcmVmaXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTm8gcmVhc29uIHRvIGtlZXAgbG9va2luZyBmb3IgdW5maW5pc2hlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2FkaW5nLiBJZiB0aGUgb25seSBzdGlsbExvYWRpbmcgaXMgYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9wbHVnaW4gcmVzb3VyY2UgdGhvdWdoLCBrZWVwIGdvaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9iZWNhdXNlIGl0IG1heSBiZSB0aGF0IGEgcGx1Z2luIHJlc291cmNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lzIHdhaXRpbmcgb24gYSBub24tcGx1Z2luIGN5Y2xlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChuZWVkQ3ljbGVDaGVjayA9IGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoZXhwaXJlZCAmJiBub0xvYWRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgLy9JZiB3YWl0IHRpbWUgZXhwaXJlZCwgdGhyb3cgZXJyb3Igb2YgdW5sb2FkZWQgbW9kdWxlcy4KICAgICAgICAgICAgICAgIGVyciA9IG1ha2VFcnJvcigndGltZW91dCcsICdMb2FkIHRpbWVvdXQgZm9yIG1vZHVsZXM6ICcgKyBub0xvYWRzLCBudWxsLCBub0xvYWRzKTsKICAgICAgICAgICAgICAgIGVyci5jb250ZXh0TmFtZSA9IGNvbnRleHQuY29udGV4dE5hbWU7CiAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL05vdCBleHBpcmVkLCBjaGVjayBmb3IgYSBjeWNsZS4KICAgICAgICAgICAgaWYgKG5lZWRDeWNsZUNoZWNrKSB7CiAgICAgICAgICAgICAgICBlYWNoKHJlcUNhbGxzLCBmdW5jdGlvbiAobW9kKSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWtDeWNsZShtb2QsIHt9LCB7fSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9JZiBzdGlsbCB3YWl0aW5nIG9uIGxvYWRzLCBhbmQgdGhlIHdhaXRpbmcgbG9hZCBpcyBzb21ldGhpbmcKICAgICAgICAgICAgLy9vdGhlciB0aGFuIGEgcGx1Z2luIHJlc291cmNlLCBvciB0aGVyZSBhcmUgc3RpbGwgb3V0c3RhbmRpbmcKICAgICAgICAgICAgLy9zY3JpcHRzLCB0aGVuIGp1c3QgdHJ5IGJhY2sgbGF0ZXIuCiAgICAgICAgICAgIGlmICgoIWV4cGlyZWQgfHwgdXNpbmdQYXRoRmFsbGJhY2spICYmIHN0aWxsTG9hZGluZykgewogICAgICAgICAgICAgICAgLy9Tb21ldGhpbmcgaXMgc3RpbGwgd2FpdGluZyB0byBsb2FkLiBXYWl0IGZvciBpdCwgYnV0IG9ubHkKICAgICAgICAgICAgICAgIC8vaWYgYSB0aW1lb3V0IGlzIG5vdCBhbHJlYWR5IGluIGVmZmVjdC4KICAgICAgICAgICAgICAgIGlmICgoaXNCcm93c2VyIHx8IGlzV2ViV29ya2VyKSAmJiAhY2hlY2tMb2FkZWRUaW1lb3V0SWQpIHsKICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZFRpbWVvdXRJZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrTG9hZGVkKCk7CiAgICAgICAgICAgICAgICAgICAgfSwgNTApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpbkNoZWNrTG9hZGVkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBNb2R1bGUgPSBmdW5jdGlvbiAobWFwKSB7CiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0gZ2V0T3duKHVuZGVmRXZlbnRzLCBtYXAuaWQpIHx8IHt9OwogICAgICAgICAgICB0aGlzLm1hcCA9IG1hcDsKICAgICAgICAgICAgdGhpcy5zaGltID0gZ2V0T3duKGNvbmZpZy5zaGltLCBtYXAuaWQpOwogICAgICAgICAgICB0aGlzLmRlcEV4cG9ydHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5kZXBNYXBzID0gW107CiAgICAgICAgICAgIHRoaXMuZGVwTWF0Y2hlZCA9IFtdOwogICAgICAgICAgICB0aGlzLnBsdWdpbk1hcHMgPSB7fTsKICAgICAgICAgICAgdGhpcy5kZXBDb3VudCA9IDA7CgogICAgICAgICAgICAvKiB0aGlzLmV4cG9ydHMgdGhpcy5mYWN0b3J5CiAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcyA9IFtdLAogICAgICAgICAgICAgICB0aGlzLmVuYWJsZWQsIHRoaXMuZmV0Y2hlZAogICAgICAgICAgICAqLwogICAgICAgIH07CgogICAgICAgIE1vZHVsZS5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uIChkZXBNYXBzLCBmYWN0b3J5LCBlcnJiYWNrLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICAgICAgICAgICAgICAvL0RvIG5vdCBkbyBtb3JlIGluaXRzIGlmIGFscmVhZHkgZG9uZS4gQ2FuIGhhcHBlbiBpZiB0aGVyZQogICAgICAgICAgICAgICAgLy9hcmUgbXVsdGlwbGUgZGVmaW5lIGNhbGxzIGZvciB0aGUgc2FtZSBtb2R1bGUuIFRoYXQgaXMgbm90CiAgICAgICAgICAgICAgICAvL2Egbm9ybWFsLCBjb21tb24gY2FzZSwgYnV0IGl0IGlzIGFsc28gbm90IHVuZXhwZWN0ZWQuCiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0ZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTsKCiAgICAgICAgICAgICAgICBpZiAoZXJyYmFjaykgewogICAgICAgICAgICAgICAgICAgIC8vUmVnaXN0ZXIgZm9yIGVycm9ycyBvbiB0aGlzIG1vZHVsZS4KICAgICAgICAgICAgICAgICAgICB0aGlzLm9uKCdlcnJvcicsIGVycmJhY2spOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV2ZW50cy5lcnJvcikgewogICAgICAgICAgICAgICAgICAgIC8vSWYgbm8gZXJyYmFjayBhbHJlYWR5LCBidXQgdGhlcmUgYXJlIGVycm9yIGxpc3RlbmVycwogICAgICAgICAgICAgICAgICAgIC8vb24gdGhpcyBtb2R1bGUsIHNldCB1cCBhbiBlcnJiYWNrIHRvIHBhc3MgdG8gdGhlIGRlcHMuCiAgICAgICAgICAgICAgICAgICAgZXJyYmFjayA9IGJpbmQodGhpcywgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL0RvIGEgY29weSBvZiB0aGUgZGVwZW5kZW5jeSBhcnJheSwgc28gdGhhdAogICAgICAgICAgICAgICAgLy9zb3VyY2UgaW5wdXRzIGFyZSBub3QgbW9kaWZpZWQuIEZvciBleGFtcGxlCiAgICAgICAgICAgICAgICAvLyJzaGltIiBkZXBzIGFyZSBwYXNzZWQgaW4gaGVyZSBkaXJlY3RseSwgYW5kCiAgICAgICAgICAgICAgICAvL2RvaW5nIGEgZGlyZWN0IG1vZGlmaWNhdGlvbiBvZiB0aGUgZGVwTWFwcyBhcnJheQogICAgICAgICAgICAgICAgLy93b3VsZCBhZmZlY3QgdGhhdCBjb25maWcuCiAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHMgPSBkZXBNYXBzICYmIGRlcE1hcHMuc2xpY2UoMCk7CgogICAgICAgICAgICAgICAgdGhpcy5lcnJiYWNrID0gZXJyYmFjazsKCiAgICAgICAgICAgICAgICAvL0luZGljYXRlIHRoaXMgbW9kdWxlIGhhcyBiZSBpbml0aWFsaXplZAogICAgICAgICAgICAgICAgdGhpcy5pbml0ZWQgPSB0cnVlOwoKICAgICAgICAgICAgICAgIHRoaXMuaWdub3JlID0gb3B0aW9ucy5pZ25vcmU7CgogICAgICAgICAgICAgICAgLy9Db3VsZCBoYXZlIG9wdGlvbiB0byBpbml0IHRoaXMgbW9kdWxlIGluIGVuYWJsZWQgbW9kZSwKICAgICAgICAgICAgICAgIC8vb3IgY291bGQgaGF2ZSBiZWVuIHByZXZpb3VzbHkgbWFya2VkIGFzIGVuYWJsZWQuIEhvd2V2ZXIsCiAgICAgICAgICAgICAgICAvL3RoZSBkZXBlbmRlbmNpZXMgYXJlIG5vdCBrbm93biB1bnRpbCBpbml0IGlzIGNhbGxlZC4gU28KICAgICAgICAgICAgICAgIC8vaWYgZW5hYmxlZCBwcmV2aW91c2x5LCBub3cgdHJpZ2dlciBkZXBlbmRlbmNpZXMgYXMgZW5hYmxlZC4KICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVuYWJsZWQgfHwgdGhpcy5lbmFibGVkKSB7CiAgICAgICAgICAgICAgICAgICAgLy9FbmFibGUgdGhpcyBtb2R1bGUgYW5kIGRlcGVuZGVuY2llcy4KICAgICAgICAgICAgICAgICAgICAvL1dpbGwgY2FsbCB0aGlzLmNoZWNrKCkKICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBkZWZpbmVEZXA6IGZ1bmN0aW9uIChpLCBkZXBFeHBvcnRzKSB7CiAgICAgICAgICAgICAgICAvL0JlY2F1c2Ugb2YgY3ljbGVzLCBkZWZpbmVkIGNhbGxiYWNrIGZvciBhIGdpdmVuCiAgICAgICAgICAgICAgICAvL2V4cG9ydCBjYW4gYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlLgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRlcE1hdGNoZWRbaV0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcE1hdGNoZWRbaV0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwQ291bnQgLT0gMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcEV4cG9ydHNbaV0gPSBkZXBFeHBvcnRzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZmV0Y2g6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmZldGNoZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmZldGNoZWQgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGNvbnRleHQuc3RhcnRUaW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsKCiAgICAgICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5tYXA7CgogICAgICAgICAgICAgICAgLy9JZiB0aGUgbWFuYWdlciBpcyBmb3IgYSBwbHVnaW4gbWFuYWdlZCByZXNvdXJjZSwKICAgICAgICAgICAgICAgIC8vYXNrIHRoZSBwbHVnaW4gdG8gbG9hZCBpdCBub3cuCiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaGltKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tYWtlUmVxdWlyZSh0aGlzLm1hcCwgewogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVCdWlsZENhbGxiYWNrOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfSkodGhpcy5zaGltLmRlcHMgfHwgW10sIGJpbmQodGhpcywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwLnByZWZpeCA/IHRoaXMuY2FsbFBsdWdpbigpIDogdGhpcy5sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL1JlZ3VsYXIgZGVwZW5kZW5jeS4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwLnByZWZpeCA/IHRoaXMuY2FsbFBsdWdpbigpIDogdGhpcy5sb2FkKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5tYXAudXJsOwoKICAgICAgICAgICAgICAgIC8vUmVndWxhciBkZXBlbmRlbmN5LgogICAgICAgICAgICAgICAgaWYgKCF1cmxGZXRjaGVkW3VybF0pIHsKICAgICAgICAgICAgICAgICAgICB1cmxGZXRjaGVkW3VybF0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubG9hZCh0aGlzLm1hcC5pZCwgdXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDaGVja3MgaWYgdGhlIG1vZHVsZSBpcyByZWFkeSB0byBkZWZpbmUgaXRzZWxmLCBhbmQgaWYgc28sCiAgICAgICAgICAgICAqIGRlZmluZSBpdC4KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCB8fCB0aGlzLmVuYWJsaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBlcnIsIGNqc01vZHVsZSwKICAgICAgICAgICAgICAgICAgICBpZCA9IHRoaXMubWFwLmlkLAogICAgICAgICAgICAgICAgICAgIGRlcEV4cG9ydHMgPSB0aGlzLmRlcEV4cG9ydHMsCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IHRoaXMuZXhwb3J0cywKICAgICAgICAgICAgICAgICAgICBmYWN0b3J5ID0gdGhpcy5mYWN0b3J5OwoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbml0ZWQpIHsKICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGZldGNoIGlmIG5vdCBhbHJlYWR5IGluIHRoZSBkZWZRdWV1ZS4KICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AoY29udGV4dC5kZWZRdWV1ZU1hcCwgaWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2goKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgdGhpcy5lcnJvcik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmRlZmluaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgLy9UaGUgZmFjdG9yeSBjb3VsZCB0cmlnZ2VyIGFub3RoZXIgcmVxdWlyZSBjYWxsCiAgICAgICAgICAgICAgICAgICAgLy90aGF0IHdvdWxkIHJlc3VsdCBpbiBjaGVja2luZyB0aGlzIG1vZHVsZSB0bwogICAgICAgICAgICAgICAgICAgIC8vZGVmaW5lIGl0c2VsZiBhZ2Fpbi4gSWYgYWxyZWFkeSBpbiB0aGUgcHJvY2VzcwogICAgICAgICAgICAgICAgICAgIC8vb2YgZG9pbmcgdGhhdCwgc2tpcCB0aGlzIHdvcmsuCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmluZyA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlcENvdW50IDwgMSAmJiAhdGhpcy5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGZhY3RvcnkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSBjb250ZXh0LmV4ZWNDYihpZCwgZmFjdG9yeSwgZGVwRXhwb3J0cywgZXhwb3J0cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYXZvciByZXR1cm4gdmFsdWUgb3ZlciBleHBvcnRzLiBJZiBub2RlL2NqcyBpbiBwbGF5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlbiB3aWxsIG5vdCBoYXZlIGEgcmV0dXJuIHZhbHVlIGFueXdheS4gRmF2b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1vZHVsZS5leHBvcnRzIGFzc2lnbm1lbnQgb3ZlciBleHBvcnRzIG9iamVjdC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcC5pc0RlZmluZSAmJiBleHBvcnRzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjanNNb2R1bGUgPSB0aGlzLm1vZHVsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2pzTW9kdWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSBjanNNb2R1bGUuZXhwb3J0czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudXNpbmdFeHBvcnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZXhwb3J0cyBhbHJlYWR5IHNldCB0aGUgZGVmaW5lZCB2YWx1ZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IHRoaXMuZXhwb3J0czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGVycm9yIGxpc3RlbmVyLCBmYXZvciBwYXNzaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gdGhhdCBpbnN0ZWFkIG9mIHRocm93aW5nIGFuIGVycm9yLiBIb3dldmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgZG8gaXQgZm9yIGRlZmluZSgpJ2QgIG1vZHVsZXMuIHJlcXVpcmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJiYWNrcyBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgZmFpbHVyZXMgaW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVpciBjYWxsYmFja3MgKCM2OTkpLiBIb3dldmVyIGlmIGEgZ2xvYmFsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25FcnJvciBpcyBzZXQsIHVzZSB0aGF0LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5ldmVudHMuZXJyb3IgJiYgdGhpcy5tYXAuaXNEZWZpbmUpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbkVycm9yICE9PSBkZWZhdWx0T25FcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIucmVxdWlyZU1hcCA9IHRoaXMubWFwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIucmVxdWlyZU1vZHVsZXMgPSB0aGlzLm1hcC5pc0RlZmluZSA/IFt0aGlzLm1hcC5pZF0gOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIucmVxdWlyZVR5cGUgPSB0aGlzLm1hcC5pc0RlZmluZSA/ICdkZWZpbmUnIDogJ3JlcXVpcmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcigodGhpcy5lcnJvciA9IGVycikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvZyB0aGUgZXJyb3IgZm9yIGRlYnVnZ2luZy4gSWYgcHJvbWlzZXMgY291bGQgYmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCwgdGhpcyB3b3VsZCBiZSBkaWZmZXJlbnQsIGJ1dCBtYWtpbmcgZG8uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3Qgd2FudCB0byBjb21wbGV0ZWx5IGxvc2UgdGhlIGVycm9yLiBXaGlsZSB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpbGwgbWVzcyB1cCBwcm9jZXNzaW5nIGFuZCBsZWFkIHRvIHNpbWlsYXIgcmVzdWx0cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhcyBidWcgMTQ0MCwgaXQgYXQgbGVhc3Qgc3VyZmFjZXMgdGhlIGVycm9yLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25FcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSnVzdCBhIGxpdGVyYWwgdmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSBmYWN0b3J5OwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cG9ydHMgPSBleHBvcnRzOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwLmlzRGVmaW5lICYmICF0aGlzLmlnbm9yZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFtpZF0gPSBleHBvcnRzOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEub25SZXNvdXJjZUxvYWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzTG9hZE1hcHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoKHRoaXMuZGVwTWFwcywgZnVuY3Rpb24gKGRlcE1hcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNMb2FkTWFwcy5wdXNoKGRlcE1hcC5ub3JtYWxpemVkTWFwIHx8IGRlcE1hcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uUmVzb3VyY2VMb2FkKGNvbnRleHQsIHRoaXMubWFwLCByZXNMb2FkTWFwcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2xlYW4gdXAKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5SZWdpc3RyeShpZCk7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy9GaW5pc2hlZCB0aGUgZGVmaW5lIHN0YWdlLiBBbGxvdyBjYWxsaW5nIGNoZWNrIGFnYWluCiAgICAgICAgICAgICAgICAgICAgLy90byBhbGxvdyBkZWZpbmUgbm90aWZpY2F0aW9ucyBiZWxvdyBpbiB0aGUgY2FzZSBvZiBhCiAgICAgICAgICAgICAgICAgICAgLy9jeWNsZS4KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlZmluZWQgJiYgIXRoaXMuZGVmaW5lRW1pdHRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZUVtaXR0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlZmluZWQnLCB0aGlzLmV4cG9ydHMpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZUVtaXRDb21wbGV0ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGNhbGxQbHVnaW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBtYXAgPSB0aGlzLm1hcCwKICAgICAgICAgICAgICAgICAgICBpZCA9IG1hcC5pZCwKICAgICAgICAgICAgICAgICAgICAvL01hcCBhbHJlYWR5IG5vcm1hbGl6ZWQgdGhlIHByZWZpeC4KICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYXAgPSBtYWtlTW9kdWxlTWFwKG1hcC5wcmVmaXgpOwoKICAgICAgICAgICAgICAgIC8vTWFyayB0aGlzIGFzIGEgZGVwZW5kZW5jeSBmb3IgdGhpcyBwbHVnaW4sIHNvIGl0CiAgICAgICAgICAgICAgICAvL2NhbiBiZSB0cmFjZWQgZm9yIGN5Y2xlcy4KICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcy5wdXNoKHBsdWdpbk1hcCk7CgogICAgICAgICAgICAgICAgb24ocGx1Z2luTWFwLCAnZGVmaW5lZCcsIGJpbmQodGhpcywgZnVuY3Rpb24gKHBsdWdpbikgewogICAgICAgICAgICAgICAgICAgIHZhciBsb2FkLCBub3JtYWxpemVkTWFwLCBub3JtYWxpemVkTW9kLAogICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVJZCA9IGdldE93bihidW5kbGVzTWFwLCB0aGlzLm1hcC5pZCksCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSB0aGlzLm1hcC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gdGhpcy5tYXAucGFyZW50TWFwID8gdGhpcy5tYXAucGFyZW50TWFwLm5hbWUgOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFJlcXVpcmUgPSBjb250ZXh0Lm1ha2VSZXF1aXJlKG1hcC5wYXJlbnRNYXAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUJ1aWxkQ2FsbGJhY2s6IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIC8vSWYgY3VycmVudCBtYXAgaXMgbm90IG5vcm1hbGl6ZWQsIHdhaXQgZm9yIHRoYXQKICAgICAgICAgICAgICAgICAgICAvL25vcm1hbGl6ZWQgbmFtZSB0byBsb2FkIGluc3RlYWQgb2YgY29udGludWluZy4KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXAudW5ub3JtYWxpemVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplIHRoZSBJRCBpZiB0aGUgcGx1Z2luIGFsbG93cyBpdC4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5ub3JtYWxpemUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBwbHVnaW4ubm9ybWFsaXplKG5hbWUsIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvL3ByZWZpeCBhbmQgbmFtZSBzaG91bGQgYWxyZWFkeSBiZSBub3JtYWxpemVkLCBubyBuZWVkCiAgICAgICAgICAgICAgICAgICAgICAgIC8vZm9yIGFwcGx5aW5nIG1hcCBjb25maWcgYWdhaW4gZWl0aGVyLgogICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTWFwID0gbWFrZU1vZHVsZU1hcChtYXAucHJlZml4ICsgJyEnICsgbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAucGFyZW50TWFwKTsKICAgICAgICAgICAgICAgICAgICAgICAgb24obm9ybWFsaXplZE1hcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkZWZpbmVkJywgYmluZCh0aGlzLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5ub3JtYWxpemVkTWFwID0gbm9ybWFsaXplZE1hcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXQoW10sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9LCBudWxsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZTogdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE1vZCA9IGdldE93bihyZWdpc3RyeSwgbm9ybWFsaXplZE1hcC5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkTW9kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hcmsgdGhpcyBhcyBhIGRlcGVuZGVuY3kgZm9yIHRoaXMgcGx1Z2luLCBzbyBpdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jYW4gYmUgdHJhY2VkIGZvciBjeWNsZXMuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHMucHVzaChub3JtYWxpemVkTWFwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ldmVudHMuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTW9kLm9uKCdlcnJvcicsIGJpbmQodGhpcywgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTW9kLmVuYWJsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvL0lmIGEgcGF0aHMgY29uZmlnLCB0aGVuIGp1c3QgbG9hZCB0aGF0IGZpbGUgaW5zdGVhZCB0bwogICAgICAgICAgICAgICAgICAgIC8vcmVzb2x2ZSB0aGUgcGx1Z2luLCBhcyBpdCBpcyBidWlsdCBpbnRvIHRoYXQgcGF0aHMgbGF5ZXIuCiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1bmRsZUlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnVybCA9IGNvbnRleHQubmFtZVRvVXJsKGJ1bmRsZUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxvYWQgPSBiaW5kKHRoaXMsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXQoW10sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9LCBudWxsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBsb2FkLmVycm9yID0gYmluZCh0aGlzLCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGVycjsKICAgICAgICAgICAgICAgICAgICAgICAgZXJyLnJlcXVpcmVNb2R1bGVzID0gW2lkXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIHRlbXAgdW5ub3JtYWxpemVkIG1vZHVsZXMgZm9yIHRoaXMgbW9kdWxlLAogICAgICAgICAgICAgICAgICAgICAgICAvL3NpbmNlIHRoZXkgd2lsbCBuZXZlciBiZSByZXNvbHZlZCBvdGhlcndpc2Ugbm93LgogICAgICAgICAgICAgICAgICAgICAgICBlYWNoUHJvcChyZWdpc3RyeSwgZnVuY3Rpb24gKG1vZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZC5tYXAuaWQuaW5kZXhPZihpZCArICdfdW5ub3JtYWxpemVkJykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhblJlZ2lzdHJ5KG1vZC5tYXAuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgLy9BbGxvdyBwbHVnaW5zIHRvIGxvYWQgb3RoZXIgY29kZSB3aXRob3V0IGhhdmluZyB0byBrbm93IHRoZQogICAgICAgICAgICAgICAgICAgIC8vY29udGV4dCBvciBob3cgdG8gJ2NvbXBsZXRlJyB0aGUgbG9hZC4KICAgICAgICAgICAgICAgICAgICBsb2FkLmZyb21UZXh0ID0gYmluZCh0aGlzLCBmdW5jdGlvbiAodGV4dCwgdGV4dEFsdCkgewogICAgICAgICAgICAgICAgICAgICAgICAvKmpzbGludCBldmlsOiB0cnVlICovCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb2R1bGVOYW1lID0gbWFwLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVNYXAgPSBtYWtlTW9kdWxlTWFwKG1vZHVsZU5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzSW50ZXJhY3RpdmUgPSB1c2VJbnRlcmFjdGl2ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQXMgb2YgMi4xLjAsIHN1cHBvcnQganVzdCBwYXNzaW5nIHRoZSB0ZXh0LCB0byByZWluZm9yY2UKICAgICAgICAgICAgICAgICAgICAgICAgLy9mcm9tVGV4dCBvbmx5IGJlaW5nIGNhbGxlZCBvbmNlIHBlciByZXNvdXJjZS4gU3RpbGwKICAgICAgICAgICAgICAgICAgICAgICAgLy9zdXBwb3J0IG9sZCBzdHlsZSBvZiBwYXNzaW5nIG1vZHVsZU5hbWUgYnV0IGRpc2NhcmQKICAgICAgICAgICAgICAgICAgICAgICAgLy90aGF0IG1vZHVsZU5hbWUgaW4gZmF2b3Igb2YgdGhlIGludGVybmFsIHJlZi4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRBbHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0QWx0OwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvL1R1cm4gb2ZmIGludGVyYWN0aXZlIHNjcmlwdCBtYXRjaGluZyBmb3IgSUUgZm9yIGFueSBkZWZpbmUKICAgICAgICAgICAgICAgICAgICAgICAgLy9jYWxscyBpbiB0aGUgdGV4dCwgdGhlbiB0dXJuIGl0IGJhY2sgb24gYXQgdGhlIGVuZC4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0ludGVyYWN0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VJbnRlcmFjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvL1ByaW1lIHRoZSBzeXN0ZW0gYnkgY3JlYXRpbmcgYSBtb2R1bGUgaW5zdGFuY2UgZm9yCiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXQuCiAgICAgICAgICAgICAgICAgICAgICAgIGdldE1vZHVsZShtb2R1bGVNYXApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmFuc2ZlciBhbnkgY29uZmlnIHRvIHRoaXMgb3RoZXIgbW9kdWxlLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUHJvcChjb25maWcuY29uZmlnLCBpZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jb25maWdbbW9kdWxlTmFtZV0gPSBjb25maWcuY29uZmlnW2lkXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5leGVjKHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ2Zyb210ZXh0ZXZhbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmcm9tVGV4dCBldmFsIGZvciAnICsgaWQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZmFpbGVkOiAnICsgZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lkXSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzSW50ZXJhY3RpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUludGVyYWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXJrIHRoaXMgYXMgYSBkZXBlbmRlbmN5IGZvciB0aGUgcGx1Z2luCiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVzb3VyY2UKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBNYXBzLnB1c2gobW9kdWxlTWFwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vU3VwcG9ydCBhbm9ueW1vdXMgbW9kdWxlcy4KICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21wbGV0ZUxvYWQobW9kdWxlTmFtZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvL0JpbmQgdGhlIHZhbHVlIG9mIHRoYXQgbW9kdWxlIHRvIHRoZSB2YWx1ZSBmb3IgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc291cmNlIElELgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFJlcXVpcmUoW21vZHVsZU5hbWVdLCBsb2FkKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgLy9Vc2UgcGFyZW50TmFtZSBoZXJlIHNpbmNlIHRoZSBwbHVnaW4ncyBuYW1lIGlzIG5vdCByZWxpYWJsZSwKICAgICAgICAgICAgICAgICAgICAvL2NvdWxkIGJlIHNvbWUgd2VpcmQgc3RyaW5nIHdpdGggbm8gcGF0aCB0aGF0IGFjdHVhbGx5IHdhbnRzIHRvCiAgICAgICAgICAgICAgICAgICAgLy9yZWZlcmVuY2UgdGhlIHBhcmVudE5hbWUncyBwYXRoLgogICAgICAgICAgICAgICAgICAgIHBsdWdpbi5sb2FkKG1hcC5uYW1lLCBsb2NhbFJlcXVpcmUsIGxvYWQsIGNvbmZpZyk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgY29udGV4dC5lbmFibGUocGx1Z2luTWFwLCB0aGlzKTsKICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luTWFwc1twbHVnaW5NYXAuaWRdID0gcGx1Z2luTWFwOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBlbmFibGVkUmVnaXN0cnlbdGhpcy5tYXAuaWRdID0gdGhpczsKICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7CgogICAgICAgICAgICAgICAgLy9TZXQgZmxhZyBtZW50aW9uaW5nIHRoYXQgdGhlIG1vZHVsZSBpcyBlbmFibGluZywKICAgICAgICAgICAgICAgIC8vc28gdGhhdCBpbW1lZGlhdGUgY2FsbHMgdG8gdGhlIGRlZmluZWQgY2FsbGJhY2tzCiAgICAgICAgICAgICAgICAvL2ZvciBkZXBlbmRlbmNpZXMgZG8gbm90IHRyaWdnZXIgaW5hZHZlcnRlbnQgbG9hZAogICAgICAgICAgICAgICAgLy93aXRoIHRoZSBkZXBDb3VudCBzdGlsbCBiZWluZyB6ZXJvLgogICAgICAgICAgICAgICAgdGhpcy5lbmFibGluZyA9IHRydWU7CgogICAgICAgICAgICAgICAgLy9FbmFibGUgZWFjaCBkZXBlbmRlbmN5CiAgICAgICAgICAgICAgICBlYWNoKHRoaXMuZGVwTWFwcywgYmluZCh0aGlzLCBmdW5jdGlvbiAoZGVwTWFwLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGlkLCBtb2QsIGhhbmRsZXI7CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVwTWFwID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgICAgICAvL0RlcGVuZGVuY3kgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgZGVwTWFwCiAgICAgICAgICAgICAgICAgICAgICAgIC8vYW5kIHdpcmVkIHVwIHRvIHRoaXMgbW9kdWxlLgogICAgICAgICAgICAgICAgICAgICAgICBkZXBNYXAgPSBtYWtlTW9kdWxlTWFwKGRlcE1hcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5tYXAuaXNEZWZpbmUgPyB0aGlzLm1hcCA6IHRoaXMubWFwLnBhcmVudE1hcCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc2tpcE1hcCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwc1tpXSA9IGRlcE1hcDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIgPSBnZXRPd24oaGFuZGxlcnMsIGRlcE1hcC5pZCk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBFeHBvcnRzW2ldID0gaGFuZGxlcih0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBDb3VudCArPSAxOwoKICAgICAgICAgICAgICAgICAgICAgICAgb24oZGVwTWFwLCAnZGVmaW5lZCcsIGJpbmQodGhpcywgZnVuY3Rpb24gKGRlcEV4cG9ydHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVuZGVmZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZURlcChpLCBkZXBFeHBvcnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXJyYmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb24oZGVwTWFwLCAnZXJyb3InLCBiaW5kKHRoaXMsIHRoaXMuZXJyYmFjaykpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZXZlbnRzLmVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBkaXJlY3QgZXJyYmFjayBvbiB0aGlzIG1vZHVsZSwgYnV0IHNvbWV0aGluZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBpcyBsaXN0ZW5pbmcgZm9yIGVycm9ycywgc28gYmUgc3VyZSB0bwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvcGFnYXRlIHRoZSBlcnJvciBjb3JyZWN0bHkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbihkZXBNYXAsICdlcnJvcicsIGJpbmQodGhpcywgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlkID0gZGVwTWFwLmlkOwogICAgICAgICAgICAgICAgICAgIG1vZCA9IHJlZ2lzdHJ5W2lkXTsKCiAgICAgICAgICAgICAgICAgICAgLy9Ta2lwIHNwZWNpYWwgbW9kdWxlcyBsaWtlICdyZXF1aXJlJywgJ2V4cG9ydHMnLCAnbW9kdWxlJwogICAgICAgICAgICAgICAgICAgIC8vQWxzbywgZG9uJ3QgY2FsbCBlbmFibGUgaWYgaXQgaXMgYWxyZWFkeSBlbmFibGVkLAogICAgICAgICAgICAgICAgICAgIC8vaW1wb3J0YW50IGluIGNpcmN1bGFyIGRlcGVuZGVuY3kgY2FzZXMuCiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wKGhhbmRsZXJzLCBpZCkgJiYgbW9kICYmICFtb2QuZW5hYmxlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmVuYWJsZShkZXBNYXAsIHRoaXMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAvL0VuYWJsZSBlYWNoIHBsdWdpbiB0aGF0IGlzIHVzZWQgaW4KICAgICAgICAgICAgICAgIC8vYSBkZXBlbmRlbmN5CiAgICAgICAgICAgICAgICBlYWNoUHJvcCh0aGlzLnBsdWdpbk1hcHMsIGJpbmQodGhpcywgZnVuY3Rpb24gKHBsdWdpbk1hcCkgewogICAgICAgICAgICAgICAgICAgIHZhciBtb2QgPSBnZXRPd24ocmVnaXN0cnksIHBsdWdpbk1hcC5pZCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZCAmJiAhbW9kLmVuYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5lbmFibGUocGx1Z2luTWFwLCB0aGlzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgdGhpcy5lbmFibGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIG9uOiBmdW5jdGlvbiAobmFtZSwgY2IpIHsKICAgICAgICAgICAgICAgIHZhciBjYnMgPSB0aGlzLmV2ZW50c1tuYW1lXTsKICAgICAgICAgICAgICAgIGlmICghY2JzKSB7CiAgICAgICAgICAgICAgICAgICAgY2JzID0gdGhpcy5ldmVudHNbbmFtZV0gPSBbXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNicy5wdXNoKGNiKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGVtaXQ6IGZ1bmN0aW9uIChuYW1lLCBldnQpIHsKICAgICAgICAgICAgICAgIGVhY2godGhpcy5ldmVudHNbbmFtZV0sIGZ1bmN0aW9uIChjYikgewogICAgICAgICAgICAgICAgICAgIGNiKGV2dCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAnZXJyb3InKSB7CiAgICAgICAgICAgICAgICAgICAgLy9Ob3cgdGhhdCB0aGUgZXJyb3IgaGFuZGxlciB3YXMgdHJpZ2dlcmVkLCByZW1vdmUKICAgICAgICAgICAgICAgICAgICAvL3RoZSBsaXN0ZW5lcnMsIHNpbmNlIHRoaXMgYnJva2VuIE1vZHVsZSBpbnN0YW5jZQogICAgICAgICAgICAgICAgICAgIC8vY2FuIHN0YXkgYXJvdW5kIGZvciBhIHdoaWxlIGluIHRoZSByZWdpc3RyeS4KICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5ldmVudHNbbmFtZV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBjYWxsR2V0TW9kdWxlKGFyZ3MpIHsKICAgICAgICAgICAgLy9Ta2lwIG1vZHVsZXMgYWxyZWFkeSBkZWZpbmVkLgogICAgICAgICAgICBpZiAoIWhhc1Byb3AoZGVmaW5lZCwgYXJnc1swXSkpIHsKICAgICAgICAgICAgICAgIGdldE1vZHVsZShtYWtlTW9kdWxlTWFwKGFyZ3NbMF0sIG51bGwsIHRydWUpKS5pbml0KGFyZ3NbMV0sIGFyZ3NbMl0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihub2RlLCBmdW5jLCBuYW1lLCBpZU5hbWUpIHsKICAgICAgICAgICAgLy9GYXZvciBkZXRhY2hFdmVudCBiZWNhdXNlIG9mIElFOQogICAgICAgICAgICAvL2lzc3VlLCBzZWUgYXR0YWNoRXZlbnQvYWRkRXZlbnRMaXN0ZW5lciBjb21tZW50IGVsc2V3aGVyZQogICAgICAgICAgICAvL2luIHRoaXMgZmlsZS4KICAgICAgICAgICAgaWYgKG5vZGUuZGV0YWNoRXZlbnQgJiYgIWlzT3BlcmEpIHsKICAgICAgICAgICAgICAgIC8vUHJvYmFibHkgSUUuIElmIG5vdCBpdCB3aWxsIHRocm93IGFuIGVycm9yLCB3aGljaCB3aWxsIGJlCiAgICAgICAgICAgICAgICAvL3VzZWZ1bCB0byBrbm93LgogICAgICAgICAgICAgICAgaWYgKGllTmFtZSkgewogICAgICAgICAgICAgICAgICAgIG5vZGUuZGV0YWNoRXZlbnQoaWVOYW1lLCBmdW5jKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEdpdmVuIGFuIGV2ZW50IGZyb20gYSBzY3JpcHQgbm9kZSwgZ2V0IHRoZSByZXF1aXJlanMgaW5mbyBmcm9tIGl0LAogICAgICAgICAqIGFuZCB0aGVuIHJlbW92ZXMgdGhlIGV2ZW50IGxpc3RlbmVycyBvbiB0aGUgbm9kZS4KICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldnQKICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fQogICAgICAgICAqLwogICAgICAgIGZ1bmN0aW9uIGdldFNjcmlwdERhdGEoZXZ0KSB7CiAgICAgICAgICAgIC8vVXNpbmcgY3VycmVudFRhcmdldCBpbnN0ZWFkIG9mIHRhcmdldCBmb3IgRmlyZWZveCAyLjAncyBzYWtlLiBOb3QKICAgICAgICAgICAgLy9hbGwgb2xkIGJyb3dzZXJzIHdpbGwgYmUgc3VwcG9ydGVkLCBidXQgdGhpcyBvbmUgd2FzIGVhc3kgZW5vdWdoCiAgICAgICAgICAgIC8vdG8gc3VwcG9ydCBhbmQgc3RpbGwgbWFrZXMgc2Vuc2UuCiAgICAgICAgICAgIHZhciBub2RlID0gZXZ0LmN1cnJlbnRUYXJnZXQgfHwgZXZ0LnNyY0VsZW1lbnQ7CgogICAgICAgICAgICAvL1JlbW92ZSB0aGUgbGlzdGVuZXJzIG9uY2UgaGVyZS4KICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIobm9kZSwgY29udGV4dC5vblNjcmlwdExvYWQsICdsb2FkJywgJ29ucmVhZHlzdGF0ZWNoYW5nZScpOwogICAgICAgICAgICByZW1vdmVMaXN0ZW5lcihub2RlLCBjb250ZXh0Lm9uU2NyaXB0RXJyb3IsICdlcnJvcicpOwoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsCiAgICAgICAgICAgICAgICBpZDogbm9kZSAmJiBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlbW9kdWxlJykKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGludGFrZURlZmluZXMoKSB7CiAgICAgICAgICAgIHZhciBhcmdzOwoKICAgICAgICAgICAgLy9BbnkgZGVmaW5lZCBtb2R1bGVzIGluIHRoZSBnbG9iYWwgcXVldWUsIGludGFrZSB0aGVtIG5vdy4KICAgICAgICAgICAgdGFrZUdsb2JhbFF1ZXVlKCk7CgogICAgICAgICAgICAvL01ha2Ugc3VyZSBhbnkgcmVtYWluaW5nIGRlZlF1ZXVlIGl0ZW1zIGdldCBwcm9wZXJseSBwcm9jZXNzZWQuCiAgICAgICAgICAgIHdoaWxlIChkZWZRdWV1ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGFyZ3MgPSBkZWZRdWV1ZS5zaGlmdCgpOwogICAgICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ21pc21hdGNoJywgJ01pc21hdGNoZWQgYW5vbnltb3VzIGRlZmluZSgpIG1vZHVsZTogJyArCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbYXJncy5sZW5ndGggLSAxXSkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL2FyZ3MgYXJlIGlkLCBkZXBzLCBmYWN0b3J5LiBTaG91bGQgYmUgbm9ybWFsaXplZCBieSB0aGUKICAgICAgICAgICAgICAgICAgICAvL2RlZmluZSgpIGZ1bmN0aW9uLgogICAgICAgICAgICAgICAgICAgIGNhbGxHZXRNb2R1bGUoYXJncyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZU1hcCA9IHt9OwogICAgICAgIH0KCiAgICAgICAgY29udGV4dCA9IHsKICAgICAgICAgICAgY29uZmlnOiBjb25maWcsCiAgICAgICAgICAgIGNvbnRleHROYW1lOiBjb250ZXh0TmFtZSwKICAgICAgICAgICAgcmVnaXN0cnk6IHJlZ2lzdHJ5LAogICAgICAgICAgICBkZWZpbmVkOiBkZWZpbmVkLAogICAgICAgICAgICB1cmxGZXRjaGVkOiB1cmxGZXRjaGVkLAogICAgICAgICAgICBkZWZRdWV1ZTogZGVmUXVldWUsCiAgICAgICAgICAgIGRlZlF1ZXVlTWFwOiB7fSwKICAgICAgICAgICAgTW9kdWxlOiBNb2R1bGUsCiAgICAgICAgICAgIG1ha2VNb2R1bGVNYXA6IG1ha2VNb2R1bGVNYXAsCiAgICAgICAgICAgIG5leHRUaWNrOiByZXEubmV4dFRpY2ssCiAgICAgICAgICAgIG9uRXJyb3I6IG9uRXJyb3IsCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogU2V0IGEgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNvbnRleHQuCiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjZmcgY29uZmlnIG9iamVjdCB0byBpbnRlZ3JhdGUuCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBjb25maWd1cmU6IGZ1bmN0aW9uIChjZmcpIHsKICAgICAgICAgICAgICAgIC8vTWFrZSBzdXJlIHRoZSBiYXNlVXJsIGVuZHMgaW4gYSBzbGFzaC4KICAgICAgICAgICAgICAgIGlmIChjZmcuYmFzZVVybCkgewogICAgICAgICAgICAgICAgICAgIGlmIChjZmcuYmFzZVVybC5jaGFyQXQoY2ZnLmJhc2VVcmwubGVuZ3RoIC0gMSkgIT09ICcvJykgewogICAgICAgICAgICAgICAgICAgICAgICBjZmcuYmFzZVVybCArPSAnLyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vU2F2ZSBvZmYgdGhlIHBhdGhzIHNpbmNlIHRoZXkgcmVxdWlyZSBzcGVjaWFsIHByb2Nlc3NpbmcsCiAgICAgICAgICAgICAgICAvL3RoZXkgYXJlIGFkZGl0aXZlLgogICAgICAgICAgICAgICAgdmFyIHNoaW0gPSBjb25maWcuc2hpbSwKICAgICAgICAgICAgICAgICAgICBvYmpzID0gewogICAgICAgICAgICAgICAgICAgICAgICBwYXRoczogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYnVuZGxlczogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBtYXA6IHRydWUKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGVhY2hQcm9wKGNmZywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9ianNbcHJvcF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maWdbcHJvcF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG1peGluKGNvbmZpZ1twcm9wXSwgdmFsdWUsIHRydWUsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vUmV2ZXJzZSBtYXAgdGhlIGJ1bmRsZXMKICAgICAgICAgICAgICAgIGlmIChjZmcuYnVuZGxlcykgewogICAgICAgICAgICAgICAgICAgIGVhY2hQcm9wKGNmZy5idW5kbGVzLCBmdW5jdGlvbiAodmFsdWUsIHByb3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCh2YWx1ZSwgZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ICE9PSBwcm9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVuZGxlc01hcFt2XSA9IHByb3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vTWVyZ2Ugc2hpbQogICAgICAgICAgICAgICAgaWYgKGNmZy5zaGltKSB7CiAgICAgICAgICAgICAgICAgICAgZWFjaFByb3AoY2ZnLnNoaW0sIGZ1bmN0aW9uICh2YWx1ZSwgaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9Ob3JtYWxpemUgdGhlIHN0cnVjdHVyZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcHM6IHZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUuZXhwb3J0cyB8fCB2YWx1ZS5pbml0KSAmJiAhdmFsdWUuZXhwb3J0c0ZuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5leHBvcnRzRm4gPSBjb250ZXh0Lm1ha2VTaGltRXhwb3J0cyh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2hpbVtpZF0gPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBjb25maWcuc2hpbSA9IHNoaW07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9BZGp1c3QgcGFja2FnZXMgaWYgbmVjZXNzYXJ5LgogICAgICAgICAgICAgICAgaWYgKGNmZy5wYWNrYWdlcykgewogICAgICAgICAgICAgICAgICAgIGVhY2goY2ZnLnBhY2thZ2VzLCBmdW5jdGlvbiAocGtnT2JqKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiwgbmFtZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHBrZ09iaiA9IHR5cGVvZiBwa2dPYmogPT09ICdzdHJpbmcnID8ge25hbWU6IHBrZ09ian0gOiBwa2dPYmo7CgogICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gcGtnT2JqLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gcGtnT2JqLmxvY2F0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5wYXRoc1tuYW1lXSA9IHBrZ09iai5sb2NhdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9TYXZlIHBvaW50ZXIgdG8gbWFpbiBtb2R1bGUgSUQgZm9yIHBrZyBuYW1lLgogICAgICAgICAgICAgICAgICAgICAgICAvL1JlbW92ZSBsZWFkaW5nIGRvdCBpbiBtYWluLCBzbyBtYWluIHBhdGhzIGFyZSBub3JtYWxpemVkLAogICAgICAgICAgICAgICAgICAgICAgICAvL2FuZCByZW1vdmUgYW55IHRyYWlsaW5nIC5qcywgc2luY2UgZGlmZmVyZW50IHBhY2thZ2UKICAgICAgICAgICAgICAgICAgICAgICAgLy9lbnZzIGhhdmUgZGlmZmVyZW50IGNvbnZlbnRpb25zOiBzb21lIHVzZSBhIG1vZHVsZSBuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAvL3NvbWUgdXNlIGEgZmlsZSBuYW1lLgogICAgICAgICAgICAgICAgICAgICAgICBjb25maWcucGtnc1tuYW1lXSA9IHBrZ09iai5uYW1lICsgJy8nICsgKHBrZ09iai5tYWluIHx8ICdtYWluJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKGN1cnJEaXJSZWdFeHAsICcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoanNTdWZmaXhSZWdFeHAsICcnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL0lmIHRoZXJlIGFyZSBhbnkgIndhaXRpbmcgdG8gZXhlY3V0ZSIgbW9kdWxlcyBpbiB0aGUgcmVnaXN0cnksCiAgICAgICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbWFwcyBmb3IgdGhlbSwgc2luY2UgdGhlaXIgaW5mbywgbGlrZSBVUkxzIHRvIGxvYWQsCiAgICAgICAgICAgICAgICAvL21heSBoYXZlIGNoYW5nZWQuCiAgICAgICAgICAgICAgICBlYWNoUHJvcChyZWdpc3RyeSwgZnVuY3Rpb24gKG1vZCwgaWQpIHsKICAgICAgICAgICAgICAgICAgICAvL0lmIG1vZHVsZSBhbHJlYWR5IGhhcyBpbml0IGNhbGxlZCwgc2luY2UgaXQgaXMgdG9vCiAgICAgICAgICAgICAgICAgICAgLy9sYXRlIHRvIG1vZGlmeSB0aGVtLCBhbmQgaWdub3JlIHVubm9ybWFsaXplZCBvbmVzCiAgICAgICAgICAgICAgICAgICAgLy9zaW5jZSB0aGV5IGFyZSB0cmFuc2llbnQuCiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2QuaW5pdGVkICYmICFtb2QubWFwLnVubm9ybWFsaXplZCkgewogICAgICAgICAgICAgICAgICAgICAgICBtb2QubWFwID0gbWFrZU1vZHVsZU1hcChpZCwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy9JZiBhIGRlcHMgYXJyYXkgb3IgYSBjb25maWcgY2FsbGJhY2sgaXMgc3BlY2lmaWVkLCB0aGVuIGNhbGwKICAgICAgICAgICAgICAgIC8vcmVxdWlyZSB3aXRoIHRob3NlIGFyZ3MuIFRoaXMgaXMgdXNlZnVsIHdoZW4gcmVxdWlyZSBpcyBkZWZpbmVkIGFzIGEKICAgICAgICAgICAgICAgIC8vY29uZmlnIG9iamVjdCBiZWZvcmUgcmVxdWlyZS5qcyBpcyBsb2FkZWQuCiAgICAgICAgICAgICAgICBpZiAoY2ZnLmRlcHMgfHwgY2ZnLmNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXF1aXJlKGNmZy5kZXBzIHx8IFtdLCBjZmcuY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbWFrZVNoaW1FeHBvcnRzOiBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZuKCkgewogICAgICAgICAgICAgICAgICAgIHZhciByZXQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmluaXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gdmFsdWUuaW5pdC5hcHBseShnbG9iYWwsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQgfHwgKHZhbHVlLmV4cG9ydHMgJiYgZ2V0R2xvYmFsKHZhbHVlLmV4cG9ydHMpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmbjsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIG1ha2VSZXF1aXJlOiBmdW5jdGlvbiAocmVsTWFwLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb2NhbFJlcXVpcmUoZGVwcywgY2FsbGJhY2ssIGVycmJhY2spIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaWQsIG1hcCwgcmVxdWlyZU1vZDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlQnVpbGRDYWxsYmFjayAmJiBjYWxsYmFjayAmJiBpc0Z1bmN0aW9uKGNhbGxiYWNrKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5fX3JlcXVpcmVKc0J1aWxkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVwcyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ludmFsaWQgY2FsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdyZXF1aXJlYXJncycsICdJbnZhbGlkIHJlcXVpcmUgY2FsbCcpLCBlcnJiYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiByZXF1aXJlfGV4cG9ydHN8bW9kdWxlIGFyZSByZXF1ZXN0ZWQsIGdldCB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgLy92YWx1ZSBmb3IgdGhlbSBmcm9tIHRoZSBzcGVjaWFsIGhhbmRsZXJzLiBDYXZlYXQ6CiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBvbmx5IHdvcmtzIHdoaWxlIG1vZHVsZSBpcyBiZWluZyBkZWZpbmVkLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVsTWFwICYmIGhhc1Byb3AoaGFuZGxlcnMsIGRlcHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlcnNbZGVwc10ocmVnaXN0cnlbcmVsTWFwLmlkXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vU3luY2hyb25vdXMgYWNjZXNzIHRvIG9uZSBtb2R1bGUuIElmIHJlcXVpcmUuZ2V0IGlzCiAgICAgICAgICAgICAgICAgICAgICAgIC8vYXZhaWxhYmxlIChhcyBpbiB0aGUgTm9kZSBhZGFwdGVyKSwgcHJlZmVyIHRoYXQuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEuZ2V0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxLmdldChjb250ZXh0LCBkZXBzLCByZWxNYXAsIGxvY2FsUmVxdWlyZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplIG1vZHVsZSBuYW1lLCBpZiBpdCBjb250YWlucyAuIG9yIC4uCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcCA9IG1ha2VNb2R1bGVNYXAoZGVwcywgcmVsTWFwLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gbWFwLmlkOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wKGRlZmluZWQsIGlkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdub3Rsb2FkZWQnLCAnTW9kdWxlIG5hbWUgIicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyIgaGFzIG5vdCBiZWVuIGxvYWRlZCB5ZXQgZm9yIGNvbnRleHQ6ICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dE5hbWUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlbE1hcCA/ICcnIDogJy4gVXNlIHJlcXVpcmUoW10pJykpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmaW5lZFtpZF07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvL0dyYWIgZGVmaW5lcyB3YWl0aW5nIGluIHRoZSBnbG9iYWwgcXVldWUuCiAgICAgICAgICAgICAgICAgICAgaW50YWtlRGVmaW5lcygpOwoKICAgICAgICAgICAgICAgICAgICAvL01hcmsgYWxsIHRoZSBkZXBlbmRlbmNpZXMgYXMgbmVlZGluZyB0byBiZSBsb2FkZWQuCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5uZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vU29tZSBkZWZpbmVzIGNvdWxkIGhhdmUgYmVlbiBhZGRlZCBzaW5jZSB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXF1aXJlIGNhbGwsIGNvbGxlY3QgdGhlbS4KICAgICAgICAgICAgICAgICAgICAgICAgaW50YWtlRGVmaW5lcygpOwoKICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZU1vZCA9IGdldE1vZHVsZShtYWtlTW9kdWxlTWFwKG51bGwsIHJlbE1hcCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy9TdG9yZSBpZiBtYXAgY29uZmlnIHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoaXMgcmVxdWlyZQogICAgICAgICAgICAgICAgICAgICAgICAvL2NhbGwgZm9yIGRlcGVuZGVuY2llcy4KICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZU1vZC5za2lwTWFwID0gb3B0aW9ucy5za2lwTWFwOwoKICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZU1vZC5pbml0KGRlcHMsIGNhbGxiYWNrLCBlcnJiYWNrLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tMb2FkZWQoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsUmVxdWlyZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBtaXhpbihsb2NhbFJlcXVpcmUsIHsKICAgICAgICAgICAgICAgICAgICBpc0Jyb3dzZXI6IGlzQnJvd3NlciwKCiAgICAgICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgICAgICogQ29udmVydHMgYSBtb2R1bGUgbmFtZSArIC5leHRlbnNpb24gaW50byBhbiBVUkwgcGF0aC4KICAgICAgICAgICAgICAgICAgICAgKiAqUmVxdWlyZXMqIHRoZSB1c2Ugb2YgYSBtb2R1bGUgbmFtZS4gSXQgZG9lcyBub3Qgc3VwcG9ydCB1c2luZwogICAgICAgICAgICAgICAgICAgICAqIHBsYWluIFVSTHMgbGlrZSBuYW1lVG9VcmwuCiAgICAgICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICAgICAgdG9Vcmw6IGZ1bmN0aW9uIChtb2R1bGVOYW1lUGx1c0V4dCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBtb2R1bGVOYW1lUGx1c0V4dC5sYXN0SW5kZXhPZignLicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudCA9IG1vZHVsZU5hbWVQbHVzRXh0LnNwbGl0KCcvJylbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JlbGF0aXZlID0gc2VnbWVudCA9PT0gJy4nIHx8IHNlZ21lbnQgPT09ICcuLic7CgogICAgICAgICAgICAgICAgICAgICAgICAvL0hhdmUgYSBmaWxlIGV4dGVuc2lvbiBhbGlhcywgYW5kIGl0IGlzIG5vdCB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgLy9kb3RzIGZyb20gYSByZWxhdGl2ZSBwYXRoLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xICYmICghaXNSZWxhdGl2ZSB8fCBpbmRleCA+IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHQgPSBtb2R1bGVOYW1lUGx1c0V4dC5zdWJzdHJpbmcoaW5kZXgsIG1vZHVsZU5hbWVQbHVzRXh0Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lUGx1c0V4dCA9IG1vZHVsZU5hbWVQbHVzRXh0LnN1YnN0cmluZygwLCBpbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0Lm5hbWVUb1VybChub3JtYWxpemUobW9kdWxlTmFtZVBsdXNFeHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbE1hcCAmJiByZWxNYXAuaWQsIHRydWUpLCBleHQsICB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc1Byb3AoZGVmaW5lZCwgbWFrZU1vZHVsZU1hcChpZCwgcmVsTWFwLCBmYWxzZSwgdHJ1ZSkuaWQpOwogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIHNwZWNpZmllZDogZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gbWFrZU1vZHVsZU1hcChpZCwgcmVsTWFwLCBmYWxzZSwgdHJ1ZSkuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXNQcm9wKGRlZmluZWQsIGlkKSB8fCBoYXNQcm9wKHJlZ2lzdHJ5LCBpZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy9Pbmx5IGFsbG93IHVuZGVmIG9uIHRvcCBsZXZlbCByZXF1aXJlIGNhbGxzCiAgICAgICAgICAgICAgICBpZiAoIXJlbE1hcCkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsUmVxdWlyZS51bmRlZiA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAvL0JpbmQgYW55IHdhaXRpbmcgZGVmaW5lKCkgY2FsbHMgdG8gdGhpcyBjb250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAvL2ZpeCBmb3IgIzQwOAogICAgICAgICAgICAgICAgICAgICAgICB0YWtlR2xvYmFsUXVldWUoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYWtlTW9kdWxlTWFwKGlkLCByZWxNYXAsIHRydWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBpZCk7CgogICAgICAgICAgICAgICAgICAgICAgICBtb2QudW5kZWZlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVNjcmlwdChpZCk7CgogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGVmaW5lZFtpZF07CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1cmxGZXRjaGVkW21hcC51cmxdOwogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdW5kZWZFdmVudHNbaWRdOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy9DbGVhbiBxdWV1ZWQgZGVmaW5lcyB0b28uIEdvIGJhY2t3YXJkcwogICAgICAgICAgICAgICAgICAgICAgICAvL2luIGFycmF5IHNvIHRoYXQgdGhlIHNwbGljZXMgZG8gbm90CiAgICAgICAgICAgICAgICAgICAgICAgIC8vbWVzcyB1cCB0aGUgaXRlcmF0aW9uLgogICAgICAgICAgICAgICAgICAgICAgICBlYWNoUmV2ZXJzZShkZWZRdWV1ZSwgZnVuY3Rpb24oYXJncywgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT09IGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmUXVldWUuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbnRleHQuZGVmUXVldWVNYXBbaWRdOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Ib2xkIG9uIHRvIGxpc3RlbmVycyBpbiBjYXNlIHRoZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9tb2R1bGUgd2lsbCBiZSBhdHRlbXB0ZWQgdG8gYmUgcmVsb2FkZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXNpbmcgYSBkaWZmZXJlbnQgY29uZmlnLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZC5ldmVudHMuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmRXZlbnRzW2lkXSA9IG1vZC5ldmVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5SZWdpc3RyeShpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFJlcXVpcmU7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ2FsbGVkIHRvIGVuYWJsZSBhIG1vZHVsZSBpZiBpdCBpcyBzdGlsbCBpbiB0aGUgcmVnaXN0cnkKICAgICAgICAgICAgICogYXdhaXRpbmcgZW5hYmxlbWVudC4gQSBzZWNvbmQgYXJnLCBwYXJlbnQsIHRoZSBwYXJlbnQgbW9kdWxlLAogICAgICAgICAgICAgKiBpcyBwYXNzZWQgaW4gZm9yIGNvbnRleHQsIHdoZW4gdGhpcyBtZXRob2QgaXMgb3ZlcnJpZGRlbiBieQogICAgICAgICAgICAgKiB0aGUgb3B0aW1pemVyLiBOb3Qgc2hvd24gaGVyZSB0byBrZWVwIGNvZGUgY29tcGFjdC4KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKGRlcE1hcCkgewogICAgICAgICAgICAgICAgdmFyIG1vZCA9IGdldE93bihyZWdpc3RyeSwgZGVwTWFwLmlkKTsKICAgICAgICAgICAgICAgIGlmIChtb2QpIHsKICAgICAgICAgICAgICAgICAgICBnZXRNb2R1bGUoZGVwTWFwKS5lbmFibGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBJbnRlcm5hbCBtZXRob2QgdXNlZCBieSBlbnZpcm9ubWVudCBhZGFwdGVycyB0byBjb21wbGV0ZSBhIGxvYWQgZXZlbnQuCiAgICAgICAgICAgICAqIEEgbG9hZCBldmVudCBjb3VsZCBiZSBhIHNjcmlwdCBsb2FkIG9yIGp1c3QgYSBsb2FkIHBhc3MgZnJvbSBhIHN5bmNocm9ub3VzCiAgICAgICAgICAgICAqIGxvYWQgY2FsbC4KICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG1vZHVsZU5hbWUgdGhlIG5hbWUgb2YgdGhlIG1vZHVsZSB0byBwb3RlbnRpYWxseSBjb21wbGV0ZS4KICAgICAgICAgICAgICovCiAgICAgICAgICAgIGNvbXBsZXRlTG9hZDogZnVuY3Rpb24gKG1vZHVsZU5hbWUpIHsKICAgICAgICAgICAgICAgIHZhciBmb3VuZCwgYXJncywgbW9kLAogICAgICAgICAgICAgICAgICAgIHNoaW0gPSBnZXRPd24oY29uZmlnLnNoaW0sIG1vZHVsZU5hbWUpIHx8IHt9LAogICAgICAgICAgICAgICAgICAgIHNoRXhwb3J0cyA9IHNoaW0uZXhwb3J0czsKCiAgICAgICAgICAgICAgICB0YWtlR2xvYmFsUXVldWUoKTsKCiAgICAgICAgICAgICAgICB3aGlsZSAoZGVmUXVldWUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgYXJncyA9IGRlZlF1ZXVlLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1swXSA9IG1vZHVsZU5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgYWxyZWFkeSBmb3VuZCBhbiBhbm9ueW1vdXMgbW9kdWxlIGFuZCBib3VuZCBpdAogICAgICAgICAgICAgICAgICAgICAgICAvL3RvIHRoaXMgbmFtZSwgdGhlbiB0aGlzIGlzIHNvbWUgb3RoZXIgYW5vbiBtb2R1bGUKICAgICAgICAgICAgICAgICAgICAgICAgLy93YWl0aW5nIGZvciBpdHMgY29tcGxldGVMb2FkIHRvIGZpcmUuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJnc1swXSA9PT0gbW9kdWxlTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvL0ZvdW5kIG1hdGNoaW5nIGRlZmluZSBjYWxsIGZvciB0aGlzIHNjcmlwdCEKICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY2FsbEdldE1vZHVsZShhcmdzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnRleHQuZGVmUXVldWVNYXAgPSB7fTsKCiAgICAgICAgICAgICAgICAvL0RvIHRoaXMgYWZ0ZXIgdGhlIGN5Y2xlIG9mIGNhbGxHZXRNb2R1bGUgaW4gY2FzZSB0aGUgcmVzdWx0CiAgICAgICAgICAgICAgICAvL29mIHRob3NlIGNhbGxzL2luaXQgY2FsbHMgY2hhbmdlcyB0aGUgcmVnaXN0cnkuCiAgICAgICAgICAgICAgICBtb2QgPSBnZXRPd24ocmVnaXN0cnksIG1vZHVsZU5hbWUpOwoKICAgICAgICAgICAgICAgIGlmICghZm91bmQgJiYgIWhhc1Byb3AoZGVmaW5lZCwgbW9kdWxlTmFtZSkgJiYgbW9kICYmICFtb2QuaW5pdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5lbmZvcmNlRGVmaW5lICYmICghc2hFeHBvcnRzIHx8ICFnZXRHbG9iYWwoc2hFeHBvcnRzKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1BhdGhGYWxsYmFjayhtb2R1bGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdub2RlZmluZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdObyBkZWZpbmUgY2FsbCBmb3IgJyArIG1vZHVsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttb2R1bGVOYW1lXSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9BIHNjcmlwdCB0aGF0IGRvZXMgbm90IGNhbGwgZGVmaW5lKCksIHNvIGp1c3Qgc2ltdWxhdGUKICAgICAgICAgICAgICAgICAgICAgICAgLy90aGUgY2FsbCBmb3IgaXQuCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxHZXRNb2R1bGUoW21vZHVsZU5hbWUsIChzaGltLmRlcHMgfHwgW10pLCBzaGltLmV4cG9ydHNGbl0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjaGVja0xvYWRlZCgpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnZlcnRzIGEgbW9kdWxlIG5hbWUgdG8gYSBmaWxlIHBhdGguIFN1cHBvcnRzIGNhc2VzIHdoZXJlCiAgICAgICAgICAgICAqIG1vZHVsZU5hbWUgbWF5IGFjdHVhbGx5IGJlIGp1c3QgYW4gVVJMLgogICAgICAgICAgICAgKiBOb3RlIHRoYXQgaXQgKipkb2VzIG5vdCoqIGNhbGwgbm9ybWFsaXplIG9uIHRoZSBtb2R1bGVOYW1lLAogICAgICAgICAgICAgKiBpdCBpcyBhc3N1bWVkIHRvIGhhdmUgYWxyZWFkeSBiZWVuIG5vcm1hbGl6ZWQuIFRoaXMgaXMgYW4KICAgICAgICAgICAgICogaW50ZXJuYWwgQVBJLCBub3QgYSBwdWJsaWMgb25lLiBVc2UgdG9VcmwgZm9yIHRoZSBwdWJsaWMgQVBJLgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgbmFtZVRvVXJsOiBmdW5jdGlvbiAobW9kdWxlTmFtZSwgZXh0LCBza2lwRXh0KSB7CiAgICAgICAgICAgICAgICB2YXIgcGF0aHMsIHN5bXMsIGksIHBhcmVudE1vZHVsZSwgdXJsLAogICAgICAgICAgICAgICAgICAgIHBhcmVudFBhdGgsIGJ1bmRsZUlkLAogICAgICAgICAgICAgICAgICAgIHBrZ01haW4gPSBnZXRPd24oY29uZmlnLnBrZ3MsIG1vZHVsZU5hbWUpOwoKICAgICAgICAgICAgICAgIGlmIChwa2dNYWluKSB7CiAgICAgICAgICAgICAgICAgICAgbW9kdWxlTmFtZSA9IHBrZ01haW47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYnVuZGxlSWQgPSBnZXRPd24oYnVuZGxlc01hcCwgbW9kdWxlTmFtZSk7CgogICAgICAgICAgICAgICAgaWYgKGJ1bmRsZUlkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQubmFtZVRvVXJsKGJ1bmRsZUlkLCBleHQsIHNraXBFeHQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vSWYgYSBjb2xvbiBpcyBpbiB0aGUgVVJMLCBpdCBpbmRpY2F0ZXMgYSBwcm90b2NvbCBpcyB1c2VkIGFuZCBpdCBpcyBqdXN0CiAgICAgICAgICAgICAgICAvL2FuIFVSTCB0byBhIGZpbGUsIG9yIGlmIGl0IHN0YXJ0cyB3aXRoIGEgc2xhc2gsIGNvbnRhaW5zIGEgcXVlcnkgYXJnIChpLmUuID8pCiAgICAgICAgICAgICAgICAvL29yIGVuZHMgd2l0aCAuanMsIHRoZW4gYXNzdW1lIHRoZSB1c2VyIG1lYW50IHRvIHVzZSBhbiB1cmwgYW5kIG5vdCBhIG1vZHVsZSBpZC4KICAgICAgICAgICAgICAgIC8vVGhlIHNsYXNoIGlzIGltcG9ydGFudCBmb3IgcHJvdG9jb2wtbGVzcyBVUkxzIGFzIHdlbGwgYXMgZnVsbCBwYXRocy4KICAgICAgICAgICAgICAgIGlmIChyZXEuanNFeHRSZWdFeHAudGVzdChtb2R1bGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgIC8vSnVzdCBhIHBsYWluIHBhdGgsIG5vdCBtb2R1bGUgbmFtZSBsb29rdXAsIHNvIGp1c3QgcmV0dXJuIGl0LgogICAgICAgICAgICAgICAgICAgIC8vQWRkIGV4dGVuc2lvbiBpZiBpdCBpcyBpbmNsdWRlZC4gVGhpcyBpcyBhIGJpdCB3b25reSwgb25seSBub24tLmpzIHRoaW5ncyBwYXNzCiAgICAgICAgICAgICAgICAgICAgLy9hbiBleHRlbnNpb24sIHRoaXMgbWV0aG9kIHByb2JhYmx5IG5lZWRzIHRvIGJlIHJld29ya2VkLgogICAgICAgICAgICAgICAgICAgIHVybCA9IG1vZHVsZU5hbWUgKyAoZXh0IHx8ICcnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy9BIG1vZHVsZSB0aGF0IG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byBhIHBhdGguCiAgICAgICAgICAgICAgICAgICAgcGF0aHMgPSBjb25maWcucGF0aHM7CgogICAgICAgICAgICAgICAgICAgIHN5bXMgPSBtb2R1bGVOYW1lLnNwbGl0KCcvJyk7CiAgICAgICAgICAgICAgICAgICAgLy9Gb3IgZWFjaCBtb2R1bGUgbmFtZSBzZWdtZW50LCBzZWUgaWYgdGhlcmUgaXMgYSBwYXRoCiAgICAgICAgICAgICAgICAgICAgLy9yZWdpc3RlcmVkIGZvciBpdC4gU3RhcnQgd2l0aCBtb3N0IHNwZWNpZmljIG5hbWUKICAgICAgICAgICAgICAgICAgICAvL2FuZCB3b3JrIHVwIGZyb20gaXQuCiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gc3ltcy5sZW5ndGg7IGkgPiAwOyBpIC09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TW9kdWxlID0gc3ltcy5zbGljZSgwLCBpKS5qb2luKCcvJyk7CgogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQYXRoID0gZ2V0T3duKHBhdGhzLCBwYXJlbnRNb2R1bGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50UGF0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiBhbiBhcnJheSwgaXQgbWVhbnMgdGhlcmUgYXJlIGEgZmV3IGNob2ljZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0Nob29zZSB0aGUgb25lIHRoYXQgaXMgZGVzaXJlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkocGFyZW50UGF0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQYXRoID0gcGFyZW50UGF0aFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bXMuc3BsaWNlKDAsIGksIHBhcmVudFBhdGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vSm9pbiB0aGUgcGF0aCBwYXJ0cyB0b2dldGhlciwgdGhlbiBmaWd1cmUgb3V0IGlmIGJhc2VVcmwgaXMgbmVlZGVkLgogICAgICAgICAgICAgICAgICAgIHVybCA9IHN5bXMuam9pbignLycpOwogICAgICAgICAgICAgICAgICAgIHVybCArPSAoZXh0IHx8ICgvXmRhdGFcOnxcPy8udGVzdCh1cmwpIHx8IHNraXBFeHQgPyAnJyA6ICcuanMnKSk7CiAgICAgICAgICAgICAgICAgICAgdXJsID0gKHVybC5jaGFyQXQoMCkgPT09ICcvJyB8fCB1cmwubWF0Y2goL15bXHdcK1wuXC1dKzovKSA/ICcnIDogY29uZmlnLmJhc2VVcmwpICsgdXJsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBjb25maWcudXJsQXJncyA/IHVybCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnVybEFyZ3MpIDogdXJsOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy9EZWxlZ2F0ZXMgdG8gcmVxLmxvYWQuIEJyb2tlbiBvdXQgYXMgYSBzZXBhcmF0ZSBmdW5jdGlvbiB0bwogICAgICAgICAgICAvL2FsbG93IG92ZXJyaWRpbmcgaW4gdGhlIG9wdGltaXplci4KICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKGlkLCB1cmwpIHsKICAgICAgICAgICAgICAgIHJlcS5sb2FkKGNvbnRleHQsIGlkLCB1cmwpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEV4ZWN1dGVzIGEgbW9kdWxlIGNhbGxiYWNrIGZ1bmN0aW9uLiBCcm9rZW4gb3V0IGFzIGEgc2VwYXJhdGUgZnVuY3Rpb24KICAgICAgICAgICAgICogc29sZWx5IHRvIGFsbG93IHRoZSBidWlsZCBzeXN0ZW0gdG8gc2VxdWVuY2UgdGhlIGZpbGVzIGluIHRoZSBidWlsdAogICAgICAgICAgICAgKiBsYXllciBpbiB0aGUgcmlnaHQgc2VxdWVuY2UuCiAgICAgICAgICAgICAqCiAgICAgICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBleGVjQ2I6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaywgYXJncywgZXhwb3J0cykgewogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KGV4cG9ydHMsIGFyZ3MpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIGNhbGxiYWNrIGZvciBzY3JpcHQgbG9hZHMsIHVzZWQgdG8gY2hlY2sgc3RhdHVzIG9mIGxvYWRpbmcuCiAgICAgICAgICAgICAqCiAgICAgICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2dCB0aGUgZXZlbnQgZnJvbSB0aGUgYnJvd3NlciBmb3IgdGhlIHNjcmlwdAogICAgICAgICAgICAgKiB0aGF0IHdhcyBsb2FkZWQuCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBvblNjcmlwdExvYWQ6IGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgICAgICAgIC8vVXNpbmcgY3VycmVudFRhcmdldCBpbnN0ZWFkIG9mIHRhcmdldCBmb3IgRmlyZWZveCAyLjAncyBzYWtlLiBOb3QKICAgICAgICAgICAgICAgIC8vYWxsIG9sZCBicm93c2VycyB3aWxsIGJlIHN1cHBvcnRlZCwgYnV0IHRoaXMgb25lIHdhcyBlYXN5IGVub3VnaAogICAgICAgICAgICAgICAgLy90byBzdXBwb3J0IGFuZCBzdGlsbCBtYWtlcyBzZW5zZS4KICAgICAgICAgICAgICAgIGlmIChldnQudHlwZSA9PT0gJ2xvYWQnIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIChyZWFkeVJlZ0V4cC50ZXN0KChldnQuY3VycmVudFRhcmdldCB8fCBldnQuc3JjRWxlbWVudCkucmVhZHlTdGF0ZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgLy9SZXNldCBpbnRlcmFjdGl2ZSBzY3JpcHQgc28gYSBzY3JpcHQgbm9kZSBpcyBub3QgaGVsZCBvbnRvIGZvcgogICAgICAgICAgICAgICAgICAgIC8vdG8gbG9uZy4KICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZVNjcmlwdCA9IG51bGw7CgogICAgICAgICAgICAgICAgICAgIC8vUHVsbCBvdXQgdGhlIG5hbWUgb2YgdGhlIG1vZHVsZSBhbmQgdGhlIGNvbnRleHQuCiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnZXRTY3JpcHREYXRhKGV2dCk7CiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21wbGV0ZUxvYWQoZGF0YS5pZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ2FsbGJhY2sgZm9yIHNjcmlwdCBlcnJvcnMuCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBvblNjcmlwdEVycm9yOiBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdldFNjcmlwdERhdGEoZXZ0KTsKICAgICAgICAgICAgICAgIGlmICghaGFzUGF0aEZhbGxiYWNrKGRhdGEuaWQpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBlYWNoUHJvcChyZWdpc3RyeSwgZnVuY3Rpb24odmFsdWUsIGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LmluZGV4T2YoJ19AcicpICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoKHZhbHVlLmRlcE1hcHMsIGZ1bmN0aW9uKGRlcE1hcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXBNYXAuaWQgPT09IGRhdGEuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKGtleSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ3NjcmlwdGVycm9yJywgJ1NjcmlwdCBlcnJvciBmb3IgIicgKyBkYXRhLmlkICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBhcmVudHMubGVuZ3RoID8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyIsIG5lZWRlZCBieTogJyArIHBhcmVudHMuam9pbignLCAnKSA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciJyksIGV2dCwgW2RhdGEuaWRdKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBjb250ZXh0LnJlcXVpcmUgPSBjb250ZXh0Lm1ha2VSZXF1aXJlKCk7CiAgICAgICAgcmV0dXJuIGNvbnRleHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBNYWluIGVudHJ5IHBvaW50LgogICAgICoKICAgICAqIElmIHRoZSBvbmx5IGFyZ3VtZW50IHRvIHJlcXVpcmUgaXMgYSBzdHJpbmcsIHRoZW4gdGhlIG1vZHVsZSB0aGF0CiAgICAgKiBpcyByZXByZXNlbnRlZCBieSB0aGF0IHN0cmluZyBpcyBmZXRjaGVkIGZvciB0aGUgYXBwcm9wcmlhdGUgY29udGV4dC4KICAgICAqCiAgICAgKiBJZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYW4gYXJyYXksIHRoZW4gaXQgd2lsbCBiZSB0cmVhdGVkIGFzIGFuIGFycmF5CiAgICAgKiBvZiBkZXBlbmRlbmN5IHN0cmluZyBuYW1lcyB0byBmZXRjaC4gQW4gb3B0aW9uYWwgZnVuY3Rpb24gY2FsbGJhY2sgY2FuCiAgICAgKiBiZSBzcGVjaWZpZWQgdG8gZXhlY3V0ZSB3aGVuIGFsbCBvZiB0aG9zZSBkZXBlbmRlbmNpZXMgYXJlIGF2YWlsYWJsZS4KICAgICAqCiAgICAgKiBNYWtlIGEgbG9jYWwgcmVxIHZhcmlhYmxlIHRvIGhlbHAgQ2FqYSBjb21wbGlhbmNlIChpdCBhc3N1bWVzIHRoaW5ncwogICAgICogb24gYSByZXF1aXJlIHRoYXQgYXJlIG5vdCBzdGFuZGFyZGl6ZWQpLCBhbmQgdG8gZ2l2ZSBhIHNob3J0CiAgICAgKiBuYW1lIGZvciBtaW5pZmljYXRpb24vbG9jYWwgc2NvcGUgdXNlLgogICAgICovCiAgICByZXEgPSByZXF1aXJlanMgPSBmdW5jdGlvbiAoZGVwcywgY2FsbGJhY2ssIGVycmJhY2ssIG9wdGlvbmFsKSB7CgogICAgICAgIC8vRmluZCB0aGUgcmlnaHQgY29udGV4dCwgdXNlIGRlZmF1bHQKICAgICAgICB2YXIgY29udGV4dCwgY29uZmlnLAogICAgICAgICAgICBjb250ZXh0TmFtZSA9IGRlZkNvbnRleHROYW1lOwoKICAgICAgICAvLyBEZXRlcm1pbmUgaWYgaGF2ZSBjb25maWcgb2JqZWN0IGluIHRoZSBjYWxsLgogICAgICAgIGlmICghaXNBcnJheShkZXBzKSAmJiB0eXBlb2YgZGVwcyAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgLy8gZGVwcyBpcyBhIGNvbmZpZyBvYmplY3QKICAgICAgICAgICAgY29uZmlnID0gZGVwczsKICAgICAgICAgICAgaWYgKGlzQXJyYXkoY2FsbGJhY2spKSB7CiAgICAgICAgICAgICAgICAvLyBBZGp1c3QgYXJncyBpZiB0aGVyZSBhcmUgZGVwZW5kZW5jaWVzCiAgICAgICAgICAgICAgICBkZXBzID0gY2FsbGJhY2s7CiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGVycmJhY2s7CiAgICAgICAgICAgICAgICBlcnJiYWNrID0gb3B0aW9uYWw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkZXBzID0gW107CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmNvbnRleHQpIHsKICAgICAgICAgICAgY29udGV4dE5hbWUgPSBjb25maWcuY29udGV4dDsKICAgICAgICB9CgogICAgICAgIGNvbnRleHQgPSBnZXRPd24oY29udGV4dHMsIGNvbnRleHROYW1lKTsKICAgICAgICBpZiAoIWNvbnRleHQpIHsKICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHRzW2NvbnRleHROYW1lXSA9IHJlcS5zLm5ld0NvbnRleHQoY29udGV4dE5hbWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbmZpZykgewogICAgICAgICAgICBjb250ZXh0LmNvbmZpZ3VyZShjb25maWcpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNvbnRleHQucmVxdWlyZShkZXBzLCBjYWxsYmFjaywgZXJyYmFjayk7CiAgICB9OwoKICAgIC8qKgogICAgICogU3VwcG9ydCByZXF1aXJlLmNvbmZpZygpIHRvIG1ha2UgaXQgZWFzaWVyIHRvIGNvb3BlcmF0ZSB3aXRoIG90aGVyCiAgICAgKiBBTUQgbG9hZGVycyBvbiBnbG9iYWxseSBhZ3JlZWQgbmFtZXMuCiAgICAgKi8KICAgIHJlcS5jb25maWcgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgcmV0dXJuIHJlcShjb25maWcpOwogICAgfTsKCiAgICAvKioKICAgICAqIEV4ZWN1dGUgc29tZXRoaW5nIGFmdGVyIHRoZSBjdXJyZW50IHRpY2sKICAgICAqIG9mIHRoZSBldmVudCBsb29wLiBPdmVycmlkZSBmb3Igb3RoZXIgZW52cwogICAgICogdGhhdCBoYXZlIGEgYmV0dGVyIHNvbHV0aW9uIHRoYW4gc2V0VGltZW91dC4KICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiBmdW5jdGlvbiB0byBleGVjdXRlIGxhdGVyLgogICAgICovCiAgICByZXEubmV4dFRpY2sgPSB0eXBlb2Ygc2V0VGltZW91dCAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoZm4pIHsKICAgICAgICBzZXRUaW1lb3V0KGZuLCA0KTsKICAgIH0gOiBmdW5jdGlvbiAoZm4pIHsgZm4oKTsgfTsKCiAgICAvKioKICAgICAqIEV4cG9ydCByZXF1aXJlIGFzIGEgZ2xvYmFsLCBidXQgb25seSBpZiBpdCBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0LgogICAgICovCiAgICBpZiAoIXJlcXVpcmUpIHsKICAgICAgICByZXF1aXJlID0gcmVxOwogICAgfQoKICAgIHJlcS52ZXJzaW9uID0gdmVyc2lvbjsKCiAgICAvL1VzZWQgdG8gZmlsdGVyIG91dCBkZXBlbmRlbmNpZXMgdGhhdCBhcmUgYWxyZWFkeSBwYXRocy4KICAgIHJlcS5qc0V4dFJlZ0V4cCA9IC9eXC98OnxcP3xcLmpzJC87CiAgICByZXEuaXNCcm93c2VyID0gaXNCcm93c2VyOwogICAgcyA9IHJlcS5zID0gewogICAgICAgIGNvbnRleHRzOiBjb250ZXh0cywKICAgICAgICBuZXdDb250ZXh0OiBuZXdDb250ZXh0CiAgICB9OwoKICAgIC8vQ3JlYXRlIGRlZmF1bHQgY29udGV4dC4KICAgIHJlcSh7fSk7CgogICAgLy9FeHBvcnRzIHNvbWUgY29udGV4dC1zZW5zaXRpdmUgbWV0aG9kcyBvbiBnbG9iYWwgcmVxdWlyZS4KICAgIGVhY2goWwogICAgICAgICd0b1VybCcsCiAgICAgICAgJ3VuZGVmJywKICAgICAgICAnZGVmaW5lZCcsCiAgICAgICAgJ3NwZWNpZmllZCcKICAgIF0sIGZ1bmN0aW9uIChwcm9wKSB7CiAgICAgICAgLy9SZWZlcmVuY2UgZnJvbSBjb250ZXh0cyBpbnN0ZWFkIG9mIGVhcmx5IGJpbmRpbmcgdG8gZGVmYXVsdCBjb250ZXh0LAogICAgICAgIC8vc28gdGhhdCBkdXJpbmcgYnVpbGRzLCB0aGUgbGF0ZXN0IGluc3RhbmNlIG9mIHRoZSBkZWZhdWx0IGNvbnRleHQKICAgICAgICAvL3dpdGggaXRzIGNvbmZpZyBnZXRzIHVzZWQuCiAgICAgICAgcmVxW3Byb3BdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgY3R4ID0gY29udGV4dHNbZGVmQ29udGV4dE5hbWVdOwogICAgICAgICAgICByZXR1cm4gY3R4LnJlcXVpcmVbcHJvcF0uYXBwbHkoY3R4LCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICB9KTsKCiAgICBpZiAoaXNCcm93c2VyKSB7CiAgICAgICAgaGVhZCA9IHMuaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07CiAgICAgICAgLy9JZiBCQVNFIHRhZyBpcyBpbiBwbGF5LCB1c2luZyBhcHBlbmRDaGlsZCBpcyBhIHByb2JsZW0gZm9yIElFNi4KICAgICAgICAvL1doZW4gdGhhdCBicm93c2VyIGRpZXMsIHRoaXMgY2FuIGJlIHJlbW92ZWQuIERldGFpbHMgaW4gdGhpcyBqUXVlcnkgYnVnOgogICAgICAgIC8vaHR0cDovL2Rldi5qcXVlcnkuY29tL3RpY2tldC8yNzA5CiAgICAgICAgYmFzZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdOwogICAgICAgIGlmIChiYXNlRWxlbWVudCkgewogICAgICAgICAgICBoZWFkID0gcy5oZWFkID0gYmFzZUVsZW1lbnQucGFyZW50Tm9kZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBBbnkgZXJyb3JzIHRoYXQgcmVxdWlyZSBleHBsaWNpdGx5IGdlbmVyYXRlcyB3aWxsIGJlIHBhc3NlZCB0byB0aGlzCiAgICAgKiBmdW5jdGlvbi4gSW50ZXJjZXB0L292ZXJyaWRlIGl0IGlmIHlvdSB3YW50IGN1c3RvbSBlcnJvciBoYW5kbGluZy4KICAgICAqIEBwYXJhbSB7RXJyb3J9IGVyciB0aGUgZXJyb3Igb2JqZWN0LgogICAgICovCiAgICByZXEub25FcnJvciA9IGRlZmF1bHRPbkVycm9yOwoKICAgIC8qKgogICAgICogQ3JlYXRlcyB0aGUgbm9kZSBmb3IgdGhlIGxvYWQgY29tbWFuZC4gT25seSB1c2VkIGluIGJyb3dzZXIgZW52cy4KICAgICAqLwogICAgcmVxLmNyZWF0ZU5vZGUgPSBmdW5jdGlvbiAoY29uZmlnLCBtb2R1bGVOYW1lLCB1cmwpIHsKICAgICAgICB2YXIgbm9kZSA9IGNvbmZpZy54aHRtbCA/CiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLCAnaHRtbDpzY3JpcHQnKSA6CiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICBub2RlLnR5cGUgPSBjb25maWcuc2NyaXB0VHlwZSB8fCAndGV4dC9qYXZhc2NyaXB0JzsKICAgICAgICBub2RlLmNoYXJzZXQgPSAndXRmLTgnOwogICAgICAgIG5vZGUuYXN5bmMgPSB0cnVlOwogICAgICAgIHJldHVybiBub2RlOwogICAgfTsKCiAgICAvKioKICAgICAqIERvZXMgdGhlIHJlcXVlc3QgdG8gbG9hZCBhIG1vZHVsZSBmb3IgdGhlIGJyb3dzZXIgY2FzZS4KICAgICAqIE1ha2UgdGhpcyBhIHNlcGFyYXRlIGZ1bmN0aW9uIHRvIGFsbG93IG90aGVyIGVudmlyb25tZW50cwogICAgICogdG8gb3ZlcnJpZGUgaXQuCiAgICAgKgogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQgdGhlIHJlcXVpcmUgY29udGV4dCB0byBmaW5kIHN0YXRlLgogICAgICogQHBhcmFtIHtTdHJpbmd9IG1vZHVsZU5hbWUgdGhlIG5hbWUgb2YgdGhlIG1vZHVsZS4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSB1cmwgdGhlIFVSTCB0byB0aGUgbW9kdWxlLgogICAgICovCiAgICByZXEubG9hZCA9IGZ1bmN0aW9uIChjb250ZXh0LCBtb2R1bGVOYW1lLCB1cmwpIHsKICAgICAgICB2YXIgY29uZmlnID0gKGNvbnRleHQgJiYgY29udGV4dC5jb25maWcpIHx8IHt9LAogICAgICAgICAgICBub2RlOwogICAgICAgIGlmIChpc0Jyb3dzZXIpIHsKICAgICAgICAgICAgLy9JbiB0aGUgYnJvd3NlciBzbyB1c2UgYSBzY3JpcHQgdGFnCiAgICAgICAgICAgIG5vZGUgPSByZXEuY3JlYXRlTm9kZShjb25maWcsIG1vZHVsZU5hbWUsIHVybCk7CiAgICAgICAgICAgIGlmIChjb25maWcub25Ob2RlQ3JlYXRlZCkgewogICAgICAgICAgICAgICAgY29uZmlnLm9uTm9kZUNyZWF0ZWQobm9kZSwgY29uZmlnLCBtb2R1bGVOYW1lLCB1cmwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlY29udGV4dCcsIGNvbnRleHQuY29udGV4dE5hbWUpOwogICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlbW9kdWxlJywgbW9kdWxlTmFtZSk7CgogICAgICAgICAgICAvL1NldCB1cCBsb2FkIGxpc3RlbmVyLiBUZXN0IGF0dGFjaEV2ZW50IGZpcnN0IGJlY2F1c2UgSUU5IGhhcwogICAgICAgICAgICAvL2Egc3VidGxlIGlzc3VlIGluIGl0cyBhZGRFdmVudExpc3RlbmVyIGFuZCBzY3JpcHQgb25sb2FkIGZpcmluZ3MKICAgICAgICAgICAgLy90aGF0IGRvIG5vdCBtYXRjaCB0aGUgYmVoYXZpb3Igb2YgYWxsIG90aGVyIGJyb3dzZXJzIHdpdGgKICAgICAgICAgICAgLy9hZGRFdmVudExpc3RlbmVyIHN1cHBvcnQsIHdoaWNoIGZpcmUgdGhlIG9ubG9hZCBldmVudCBmb3IgYQogICAgICAgICAgICAvL3NjcmlwdCByaWdodCBhZnRlciB0aGUgc2NyaXB0IGV4ZWN1dGlvbi4gU2VlOgogICAgICAgICAgICAvL2h0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvNjQ4MDU3L3NjcmlwdC1vbmxvYWQtZXZlbnQtaXMtbm90LWZpcmVkLWltbWVkaWF0ZWx5LWFmdGVyLXNjcmlwdC1leGVjdXRpb24KICAgICAgICAgICAgLy9VTkZPUlRVTkFURUxZIE9wZXJhIGltcGxlbWVudHMgYXR0YWNoRXZlbnQgYnV0IGRvZXMgbm90IGZvbGxvdyB0aGUgc2NyaXB0CiAgICAgICAgICAgIC8vc2NyaXB0IGV4ZWN1dGlvbiBtb2RlLgogICAgICAgICAgICBpZiAobm9kZS5hdHRhY2hFdmVudCAmJgogICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgbm9kZS5hdHRhY2hFdmVudCBpcyBhcnRpZmljaWFsbHkgYWRkZWQgYnkgY3VzdG9tIHNjcmlwdCBvcgogICAgICAgICAgICAgICAgICAgIC8vbmF0aXZlbHkgc3VwcG9ydGVkIGJ5IGJyb3dzZXIKICAgICAgICAgICAgICAgICAgICAvL3JlYWQgaHR0cHM6Ly9naXRodWIuY29tL2pyYnVya2UvcmVxdWlyZWpzL2lzc3Vlcy8xODcKICAgICAgICAgICAgICAgICAgICAvL2lmIHdlIGNhbiBOT1QgZmluZCBbbmF0aXZlIGNvZGVdIHRoZW4gaXQgbXVzdCBOT1QgbmF0aXZlbHkgc3VwcG9ydGVkLgogICAgICAgICAgICAgICAgICAgIC8vaW4gSUU4LCBub2RlLmF0dGFjaEV2ZW50IGRvZXMgbm90IGhhdmUgdG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIC8vTm90ZSB0aGUgdGVzdCBmb3IgIltuYXRpdmUgY29kZSIgd2l0aCBubyBjbG9zaW5nIGJyYWNlLCBzZWU6CiAgICAgICAgICAgICAgICAgICAgLy9odHRwczovL2dpdGh1Yi5jb20vanJidXJrZS9yZXF1aXJlanMvaXNzdWVzLzI3MwogICAgICAgICAgICAgICAgICAgICEobm9kZS5hdHRhY2hFdmVudC50b1N0cmluZyAmJiBub2RlLmF0dGFjaEV2ZW50LnRvU3RyaW5nKCkuaW5kZXhPZignW25hdGl2ZSBjb2RlJykgPCAwKSAmJgogICAgICAgICAgICAgICAgICAgICFpc09wZXJhKSB7CiAgICAgICAgICAgICAgICAvL1Byb2JhYmx5IElFLiBJRSAoYXQgbGVhc3QgNi04KSBkbyBub3QgZmlyZQogICAgICAgICAgICAgICAgLy9zY3JpcHQgb25sb2FkIHJpZ2h0IGFmdGVyIGV4ZWN1dGluZyB0aGUgc2NyaXB0LCBzbwogICAgICAgICAgICAgICAgLy93ZSBjYW5ub3QgdGllIHRoZSBhbm9ueW1vdXMgZGVmaW5lIGNhbGwgdG8gYSBuYW1lLgogICAgICAgICAgICAgICAgLy9Ib3dldmVyLCBJRSByZXBvcnRzIHRoZSBzY3JpcHQgYXMgYmVpbmcgaW4gJ2ludGVyYWN0aXZlJwogICAgICAgICAgICAgICAgLy9yZWFkeVN0YXRlIGF0IHRoZSB0aW1lIG9mIHRoZSBkZWZpbmUgY2FsbC4KICAgICAgICAgICAgICAgIHVzZUludGVyYWN0aXZlID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBub2RlLmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBjb250ZXh0Lm9uU2NyaXB0TG9hZCk7CiAgICAgICAgICAgICAgICAvL0l0IHdvdWxkIGJlIGdyZWF0IHRvIGFkZCBhbiBlcnJvciBoYW5kbGVyIGhlcmUgdG8gY2F0Y2gKICAgICAgICAgICAgICAgIC8vNDA0cyBpbiBJRTkrLiBIb3dldmVyLCBvbnJlYWR5c3RhdGVjaGFuZ2Ugd2lsbCBmaXJlIGJlZm9yZQogICAgICAgICAgICAgICAgLy90aGUgZXJyb3IgaGFuZGxlciwgc28gdGhhdCBkb2VzIG5vdCBoZWxwLiBJZiBhZGRFdmVudExpc3RlbmVyCiAgICAgICAgICAgICAgICAvL2lzIHVzZWQsIHRoZW4gSUUgd2lsbCBmaXJlIGVycm9yIGJlZm9yZSBsb2FkLCBidXQgd2UgY2Fubm90CiAgICAgICAgICAgICAgICAvL3VzZSB0aGF0IHBhdGh3YXkgZ2l2ZW4gdGhlIGNvbm5lY3QubWljcm9zb2Z0LmNvbSBpc3N1ZQogICAgICAgICAgICAgICAgLy9tZW50aW9uZWQgYWJvdmUgYWJvdXQgbm90IGRvaW5nIHRoZSAnc2NyaXB0IGV4ZWN1dGUsCiAgICAgICAgICAgICAgICAvL3RoZW4gZmlyZSB0aGUgc2NyaXB0IGxvYWQgZXZlbnQgbGlzdGVuZXIgYmVmb3JlIGV4ZWN1dGUKICAgICAgICAgICAgICAgIC8vbmV4dCBzY3JpcHQnIHRoYXQgb3RoZXIgYnJvd3NlcnMgZG8uCiAgICAgICAgICAgICAgICAvL0Jlc3QgaG9wZTogSUUxMCBmaXhlcyB0aGUgaXNzdWVzLAogICAgICAgICAgICAgICAgLy9hbmQgdGhlbiBkZXN0cm95cyBhbGwgaW5zdGFsbHMgb2YgSUUgNi05LgogICAgICAgICAgICAgICAgLy9ub2RlLmF0dGFjaEV2ZW50KCdvbmVycm9yJywgY29udGV4dC5vblNjcmlwdEVycm9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNvbnRleHQub25TY3JpcHRMb2FkLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY29udGV4dC5vblNjcmlwdEVycm9yLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbm9kZS5zcmMgPSB1cmw7CgogICAgICAgICAgICAvL0ZvciBzb21lIGNhY2hlIGNhc2VzIGluIElFIDYtOCwgdGhlIHNjcmlwdCBleGVjdXRlcyBiZWZvcmUgdGhlIGVuZAogICAgICAgICAgICAvL29mIHRoZSBhcHBlbmRDaGlsZCBleGVjdXRpb24sIHNvIHRvIHRpZSBhbiBhbm9ueW1vdXMgZGVmaW5lCiAgICAgICAgICAgIC8vY2FsbCB0byB0aGUgbW9kdWxlIG5hbWUgKHdoaWNoIGlzIHN0b3JlZCBvbiB0aGUgbm9kZSksIGhvbGQgb24KICAgICAgICAgICAgLy90byBhIHJlZmVyZW5jZSB0byB0aGlzIG5vZGUsIGJ1dCBjbGVhciBhZnRlciB0aGUgRE9NIGluc2VydGlvbi4KICAgICAgICAgICAgY3VycmVudGx5QWRkaW5nU2NyaXB0ID0gbm9kZTsKICAgICAgICAgICAgaWYgKGJhc2VFbGVtZW50KSB7CiAgICAgICAgICAgICAgICBoZWFkLmluc2VydEJlZm9yZShub2RlLCBiYXNlRWxlbWVudCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGN1cnJlbnRseUFkZGluZ1NjcmlwdCA9IG51bGw7CgogICAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgICB9IGVsc2UgaWYgKGlzV2ViV29ya2VyKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvL0luIGEgd2ViIHdvcmtlciwgdXNlIGltcG9ydFNjcmlwdHMuIFRoaXMgaXMgbm90IGEgdmVyeQogICAgICAgICAgICAgICAgLy9lZmZpY2llbnQgdXNlIG9mIGltcG9ydFNjcmlwdHMsIGltcG9ydFNjcmlwdHMgd2lsbCBibG9jayB1bnRpbAogICAgICAgICAgICAgICAgLy9pdHMgc2NyaXB0IGlzIGRvd25sb2FkZWQgYW5kIGV2YWx1YXRlZC4gSG93ZXZlciwgaWYgd2ViIHdvcmtlcnMKICAgICAgICAgICAgICAgIC8vYXJlIGluIHBsYXksIHRoZSBleHBlY3RhdGlvbiBpcyB0aGF0IGEgYnVpbGQgaGFzIGJlZW4gZG9uZSBzbwogICAgICAgICAgICAgICAgLy90aGF0IG9ubHkgb25lIHNjcmlwdCBuZWVkcyB0byBiZSBsb2FkZWQgYW55d2F5LiBUaGlzIG1heSBuZWVkCiAgICAgICAgICAgICAgICAvL3RvIGJlIHJlZXZhbHVhdGVkIGlmIG90aGVyIHVzZSBjYXNlcyBiZWNvbWUgY29tbW9uLgogICAgICAgICAgICAgICAgaW1wb3J0U2NyaXB0cyh1cmwpOwoKICAgICAgICAgICAgICAgIC8vQWNjb3VudCBmb3IgYW5vbnltb3VzIG1vZHVsZXMKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcGxldGVMb2FkKG1vZHVsZU5hbWUpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb250ZXh0Lm9uRXJyb3IobWFrZUVycm9yKCdpbXBvcnRzY3JpcHRzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1wb3J0U2NyaXB0cyBmYWlsZWQgZm9yICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lICsgJyBhdCAnICsgdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21vZHVsZU5hbWVdKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIGdldEludGVyYWN0aXZlU2NyaXB0KCkgewogICAgICAgIGlmIChpbnRlcmFjdGl2ZVNjcmlwdCAmJiBpbnRlcmFjdGl2ZVNjcmlwdC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnKSB7CiAgICAgICAgICAgIHJldHVybiBpbnRlcmFjdGl2ZVNjcmlwdDsKICAgICAgICB9CgogICAgICAgIGVhY2hSZXZlcnNlKHNjcmlwdHMoKSwgZnVuY3Rpb24gKHNjcmlwdCkgewogICAgICAgICAgICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoaW50ZXJhY3RpdmVTY3JpcHQgPSBzY3JpcHQpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGludGVyYWN0aXZlU2NyaXB0OwogICAgfQoKICAgIC8vTG9vayBmb3IgYSBkYXRhLW1haW4gc2NyaXB0IGF0dHJpYnV0ZSwgd2hpY2ggY291bGQgYWxzbyBhZGp1c3QgdGhlIGJhc2VVcmwuCiAgICBpZiAoaXNCcm93c2VyICYmICFjZmcuc2tpcERhdGFNYWluKSB7CiAgICAgICAgLy9GaWd1cmUgb3V0IGJhc2VVcmwuIEdldCBpdCBmcm9tIHRoZSBzY3JpcHQgdGFnIHdpdGggcmVxdWlyZS5qcyBpbiBpdC4KICAgICAgICBlYWNoUmV2ZXJzZShzY3JpcHRzKCksIGZ1bmN0aW9uIChzY3JpcHQpIHsKICAgICAgICAgICAgLy9TZXQgdGhlICdoZWFkJyB3aGVyZSB3ZSBjYW4gYXBwZW5kIGNoaWxkcmVuIGJ5CiAgICAgICAgICAgIC8vdXNpbmcgdGhlIHNjcmlwdCdzIHBhcmVudC4KICAgICAgICAgICAgaWYgKCFoZWFkKSB7CiAgICAgICAgICAgICAgICBoZWFkID0gc2NyaXB0LnBhcmVudE5vZGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vTG9vayBmb3IgYSBkYXRhLW1haW4gYXR0cmlidXRlIHRvIHNldCBtYWluIHNjcmlwdCBmb3IgdGhlIHBhZ2UKICAgICAgICAgICAgLy90byBsb2FkLiBJZiBpdCBpcyB0aGVyZSwgdGhlIHBhdGggdG8gZGF0YSBtYWluIGJlY29tZXMgdGhlCiAgICAgICAgICAgIC8vYmFzZVVybCwgaWYgaXQgaXMgbm90IGFscmVhZHkgc2V0LgogICAgICAgICAgICBkYXRhTWFpbiA9IHNjcmlwdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWFpbicpOwogICAgICAgICAgICBpZiAoZGF0YU1haW4pIHsKICAgICAgICAgICAgICAgIC8vUHJlc2VydmUgZGF0YU1haW4gaW4gY2FzZSBpdCBpcyBhIHBhdGggKGkuZS4gY29udGFpbnMgJz8nKQogICAgICAgICAgICAgICAgbWFpblNjcmlwdCA9IGRhdGFNYWluOwoKICAgICAgICAgICAgICAgIC8vU2V0IGZpbmFsIGJhc2VVcmwgaWYgdGhlcmUgaXMgbm90IGFscmVhZHkgYW4gZXhwbGljaXQgb25lLgogICAgICAgICAgICAgICAgaWYgKCFjZmcuYmFzZVVybCkgewogICAgICAgICAgICAgICAgICAgIC8vUHVsbCBvZmYgdGhlIGRpcmVjdG9yeSBvZiBkYXRhLW1haW4gZm9yIHVzZSBhcyB0aGUKICAgICAgICAgICAgICAgICAgICAvL2Jhc2VVcmwuCiAgICAgICAgICAgICAgICAgICAgc3JjID0gbWFpblNjcmlwdC5zcGxpdCgnLycpOwogICAgICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBzcmMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgc3ViUGF0aCA9IHNyYy5sZW5ndGggPyBzcmMuam9pbignLycpICArICcvJyA6ICcuLyc7CgogICAgICAgICAgICAgICAgICAgIGNmZy5iYXNlVXJsID0gc3ViUGF0aDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL1N0cmlwIG9mZiBhbnkgdHJhaWxpbmcgLmpzIHNpbmNlIG1haW5TY3JpcHQgaXMgbm93CiAgICAgICAgICAgICAgICAvL2xpa2UgYSBtb2R1bGUgbmFtZS4KICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBtYWluU2NyaXB0LnJlcGxhY2UoanNTdWZmaXhSZWdFeHAsICcnKTsKCiAgICAgICAgICAgICAgICAvL0lmIG1haW5TY3JpcHQgaXMgc3RpbGwgYSBwYXRoLCBmYWxsIGJhY2sgdG8gZGF0YU1haW4KICAgICAgICAgICAgICAgIGlmIChyZXEuanNFeHRSZWdFeHAudGVzdChtYWluU2NyaXB0KSkgewogICAgICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBkYXRhTWFpbjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL1B1dCB0aGUgZGF0YS1tYWluIHNjcmlwdCBpbiB0aGUgZmlsZXMgdG8gbG9hZC4KICAgICAgICAgICAgICAgIGNmZy5kZXBzID0gY2ZnLmRlcHMgPyBjZmcuZGVwcy5jb25jYXQobWFpblNjcmlwdCkgOiBbbWFpblNjcmlwdF07CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgZGVmaW5pdGlvbnMgb2YgbW9kdWxlcy4gRGlmZmVycyBmcm9tCiAgICAgKiByZXF1aXJlKCkgaW4gdGhhdCBhIHN0cmluZyBmb3IgdGhlIG1vZHVsZSBzaG91bGQgYmUgdGhlIGZpcnN0IGFyZ3VtZW50LAogICAgICogYW5kIHRoZSBmdW5jdGlvbiB0byBleGVjdXRlIGFmdGVyIGRlcGVuZGVuY2llcyBhcmUgbG9hZGVkIHNob3VsZAogICAgICogcmV0dXJuIGEgdmFsdWUgdG8gZGVmaW5lIHRoZSBtb2R1bGUgY29ycmVzcG9uZGluZyB0byB0aGUgZmlyc3QgYXJndW1lbnQncwogICAgICogbmFtZS4KICAgICAqLwogICAgZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIGRlcHMsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIG5vZGUsIGNvbnRleHQ7CgogICAgICAgIC8vQWxsb3cgZm9yIGFub255bW91cyBtb2R1bGVzCiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgewogICAgICAgICAgICAvL0FkanVzdCBhcmdzIGFwcHJvcHJpYXRlbHkKICAgICAgICAgICAgY2FsbGJhY2sgPSBkZXBzOwogICAgICAgICAgICBkZXBzID0gbmFtZTsKICAgICAgICAgICAgbmFtZSA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICAvL1RoaXMgbW9kdWxlIG1heSBub3QgaGF2ZSBkZXBlbmRlbmNpZXMKICAgICAgICBpZiAoIWlzQXJyYXkoZGVwcykpIHsKICAgICAgICAgICAgY2FsbGJhY2sgPSBkZXBzOwogICAgICAgICAgICBkZXBzID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIC8vSWYgbm8gbmFtZSwgYW5kIGNhbGxiYWNrIGlzIGEgZnVuY3Rpb24sIHRoZW4gZmlndXJlIG91dCBpZiBpdCBhCiAgICAgICAgLy9Db21tb25KUyB0aGluZyB3aXRoIGRlcGVuZGVuY2llcy4KICAgICAgICBpZiAoIWRlcHMgJiYgaXNGdW5jdGlvbihjYWxsYmFjaykpIHsKICAgICAgICAgICAgZGVwcyA9IFtdOwogICAgICAgICAgICAvL1JlbW92ZSBjb21tZW50cyBmcm9tIHRoZSBjYWxsYmFjayBzdHJpbmcsCiAgICAgICAgICAgIC8vbG9vayBmb3IgcmVxdWlyZSBjYWxscywgYW5kIHB1bGwgdGhlbSBpbnRvIHRoZSBkZXBlbmRlbmNpZXMsCiAgICAgICAgICAgIC8vYnV0IG9ubHkgaWYgdGhlcmUgYXJlIGZ1bmN0aW9uIGFyZ3MuCiAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrCiAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShjb21tZW50UmVnRXhwLCAnJykKICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShjanNSZXF1aXJlUmVnRXhwLCBmdW5jdGlvbiAobWF0Y2gsIGRlcCkgewogICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvL01heSBiZSBhIENvbW1vbkpTIHRoaW5nIGV2ZW4gd2l0aG91dCByZXF1aXJlIGNhbGxzLCBidXQgc3RpbGwKICAgICAgICAgICAgICAgIC8vY291bGQgdXNlIGV4cG9ydHMsIGFuZCBtb2R1bGUuIEF2b2lkIGRvaW5nIGV4cG9ydHMgYW5kIG1vZHVsZQogICAgICAgICAgICAgICAgLy93b3JrIHRob3VnaCBpZiBpdCBqdXN0IG5lZWRzIHJlcXVpcmUuCiAgICAgICAgICAgICAgICAvL1JFUVVJUkVTIHRoZSBmdW5jdGlvbiB0byBleHBlY3QgdGhlIENvbW1vbkpTIHZhcmlhYmxlcyBpbiB0aGUKICAgICAgICAgICAgICAgIC8vb3JkZXIgbGlzdGVkIGJlbG93LgogICAgICAgICAgICAgICAgZGVwcyA9IChjYWxsYmFjay5sZW5ndGggPT09IDEgPyBbJ3JlcXVpcmUnXSA6IFsncmVxdWlyZScsICdleHBvcnRzJywgJ21vZHVsZSddKS5jb25jYXQoZGVwcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vSWYgaW4gSUUgNi04IGFuZCBoaXQgYW4gYW5vbnltb3VzIGRlZmluZSgpIGNhbGwsIGRvIHRoZSBpbnRlcmFjdGl2ZQogICAgICAgIC8vd29yay4KICAgICAgICBpZiAodXNlSW50ZXJhY3RpdmUpIHsKICAgICAgICAgICAgbm9kZSA9IGN1cnJlbnRseUFkZGluZ1NjcmlwdCB8fCBnZXRJbnRlcmFjdGl2ZVNjcmlwdCgpOwogICAgICAgICAgICBpZiAobm9kZSkgewogICAgICAgICAgICAgICAgaWYgKCFuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVtb2R1bGUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjb250ZXh0c1tub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlY29udGV4dCcpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy9BbHdheXMgc2F2ZSBvZmYgZXZhbHVhdGluZyB0aGUgZGVmIGNhbGwgdW50aWwgdGhlIHNjcmlwdCBvbmxvYWQgaGFuZGxlci4KICAgICAgICAvL1RoaXMgYWxsb3dzIG11bHRpcGxlIG1vZHVsZXMgdG8gYmUgaW4gYSBmaWxlIHdpdGhvdXQgcHJlbWF0dXJlbHkKICAgICAgICAvL3RyYWNpbmcgZGVwZW5kZW5jaWVzLCBhbmQgYWxsb3dzIGZvciBhbm9ueW1vdXMgbW9kdWxlIHN1cHBvcnQsCiAgICAgICAgLy93aGVyZSB0aGUgbW9kdWxlIG5hbWUgaXMgbm90IGtub3duIHVudGlsIHRoZSBzY3JpcHQgb25sb2FkIGV2ZW50CiAgICAgICAgLy9vY2N1cnMuIElmIG5vIGNvbnRleHQsIHVzZSB0aGUgZ2xvYmFsIHF1ZXVlLCBhbmQgZ2V0IGl0IHByb2Nlc3NlZAogICAgICAgIC8vaW4gdGhlIG9uc2NyaXB0IGxvYWQgY2FsbGJhY2suCiAgICAgICAgaWYgKGNvbnRleHQpIHsKICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZS5wdXNoKFtuYW1lLCBkZXBzLCBjYWxsYmFja10pOwogICAgICAgICAgICBjb250ZXh0LmRlZlF1ZXVlTWFwW25hbWVdID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBnbG9iYWxEZWZRdWV1ZS5wdXNoKFtuYW1lLCBkZXBzLCBjYWxsYmFja10pOwogICAgICAgIH0KICAgIH07CgogICAgZGVmaW5lLmFtZCA9IHsKICAgICAgICBqUXVlcnk6IHRydWUKICAgIH07CgogICAgLyoqCiAgICAgKiBFeGVjdXRlcyB0aGUgdGV4dC4gTm9ybWFsbHkganVzdCB1c2VzIGV2YWwsIGJ1dCBjYW4gYmUgbW9kaWZpZWQKICAgICAqIHRvIHVzZSBhIGJldHRlciwgZW52aXJvbm1lbnQtc3BlY2lmaWMgY2FsbC4gT25seSB1c2VkIGZvciB0cmFuc3BpbGluZwogICAgICogbG9hZGVyIHBsdWdpbnMsIG5vdCBmb3IgcGxhaW4gSlMgbW9kdWxlcy4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSB0ZXh0IHRvIGV4ZWN1dGUvZXZhbHVhdGUuCiAgICAgKi8KICAgIHJlcS5leGVjID0gZnVuY3Rpb24gKHRleHQpIHsKICAgICAgICAvKmpzbGludCBldmlsOiB0cnVlICovCiAgICAgICAgcmV0dXJuIGV2YWwodGV4dCk7CiAgICB9OwoKICAgIC8vU2V0IHVwIHdpdGggY29uZmlnIGluZm8uCiAgICByZXEoY2ZnKTsKfSh0aGlzKSk7Cg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="355987421" offset="0" length="434" />
          <PacketInfo time="355987437" offset="434" length="20995" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="195" hostname="push.services.mozilla.com" path="https://push.services.mozilla.com/" url="https://push.services.mozilla.com/" ip="34.107.243.93" port="443" connectionId="28" origin="HTML" frame="1" startDateTime="2024-03-14T16:56:31.115+03:00" startTime="356003093" endTime="356003093">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="User-Agent" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Version" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Origin" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d3NzOi8vcHVzaC5zZXJ2aWNlcy5tb3ppbGxhLmNvbS8=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Protocol" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVzaC1ub3RpZmljYXRpb24=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Extensions" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cGVybWVzc2FnZS1kZWZsYXRl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-WebSocket-Key" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHNveFlUYnBoeHdWM2VnTTVoRGJBdz09</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW1wdHk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d2Vic29ja2V0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Pragma" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY2FjaGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY2FjaGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Upgrade" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>d2Vic29ja2V0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vcHVzaC5zZXJ2aWNlcy5tb3ppbGxhLmNvbS8gSFRUUC8xLjENClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQ7IHJ2OjEyMS4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzEyMS4wDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpTZWMtV2ViU29ja2V0LVZlcnNpb246IDEzDQpPcmlnaW46IHdzczovL3B1c2guc2VydmljZXMubW96aWxsYS5jb20vDQpTZWMtV2ViU29ja2V0LVByb3RvY29sOiBwdXNoLW5vdGlmaWNhdGlvbg0KU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zOiBwZXJtZXNzYWdlLWRlZmxhdGUNClNlYy1XZWJTb2NrZXQtS2V5OiBoc294WVRicGh4d1YzZWdNNWhEYkF3PT0NClNlYy1GZXRjaC1EZXN0OiBlbXB0eQ0KU2VjLUZldGNoLU1vZGU6IHdlYnNvY2tldA0KU2VjLUZldGNoLVNpdGU6IGNyb3NzLXNpdGUNClByYWdtYTogbm8tY2FjaGUNCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlDQpVcGdyYWRlOiB3ZWJzb2NrZXQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>273</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9odG1sOyBjaGFyc2V0PVVURi04</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referrer-Policy" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tcmVmZXJyZXI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Mjcz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDo0NiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgNDAwIEJhZCBSZXF1ZXN0DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD1VVEYtOA0KUmVmZXJyZXItUG9saWN5OiBuby1yZWZlcnJlcg0KQ29udGVudC1MZW5ndGg6IDI3Mw0KRGF0ZTogVGh1LCAxNCBNYXIgMjAyNCAxMzo1MDo0NiBHTVQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData />
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="356003093" offset="0" length="156" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
  </HTTPTask>
  <HTTPTask id="135" hostname="www.advantageonlineshopping.com" path="https://www.advantageonlineshopping.com/css/fonts/roboto_regular_macroman/Roboto-Regular-webfont.woff" url="https://www.advantageonlineshopping.com/css/fonts/roboto_regular_macroman/Roboto-Regular-webfont.woff" ip="54.227.55.203" port="443" connectionId="15" origin="ExtraRes" frame="1" startDateTime="2024-03-14T16:56:30.922+03:00" startTime="355987109" endTime="355987109">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="User-Agent" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vZm9udC13b2ZmMjtxPTEuMCxhcHBsaWNhdGlvbi9mb250LXdvZmY7cT0wLjksKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aWRlbnRpdHk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly93d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tL2Nzcy9tYWluLm1pbi5jc3M=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>X2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQxMjU3My40LjEuMTcxMDQxNDM2Mi4wLjAuMDsgX2dhPUdBMS4yLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Zm9udA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>d3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS9jc3MvZm9udHMvcm9ib3RvX3JlZ3VsYXJfbWFjcm9tYW4vUm9ib3RvLVJlZ3VsYXItd2ViZm9udC53b2ZmIEhUVFAvMS4xDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0OyBydjoxMjEuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xMjEuMA0KQWNjZXB0OiBhcHBsaWNhdGlvbi9mb250LXdvZmYyO3E9MS4wLGFwcGxpY2F0aW9uL2ZvbnQtd29mZjtxPTAuOSwqLyo7cT0wLjgNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogaWRlbnRpdHkNClJlZmVyZXI6IGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS9jc3MvbWFpbi5taW4uY3NzDQpDb29raWU6IF9nYV9UQlBZRUQ4V1NXPUdTMS4xLjE3MTA0MTI1NzMuNC4xLjE3MTA0MTQzNjIuMC4wLjA7IF9nYT1HQTEuMi4xMDQyODkxOTEzLjE3MTAzMjQyNTE7IF9naWQ9R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc7IF9nYV81NkVNTlJGMlMyPUdTMS4yLjE3MTA0MTI2MTUuNC4xLjE3MTA0MTQ1MTUuNTcuMC4wDQpTZWMtRmV0Y2gtRGVzdDogZm9udA0KU2VjLUZldGNoLU1vZGU6IGNvcnMNClNlYy1GZXRjaC1TaXRlOiBzYW1lLW9yaWdpbg0KSG9zdDogd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="_ga_TBPYED8WSW" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjEuMTcxMDQxMjU3My40LjEuMTcxMDQxNDM2Mi4wLjAuMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuMTA0Mjg5MTkxMy4xNzEwMzI0MjUx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_gid" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga_56EMNRF2S2" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>25020</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmdpbngvMS4xOC4wIChVYnVudHUp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDozMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Zm9udC93b2Zm</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MjUwMjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMjUwMjAtMTcwNzkwMjc1MjAwMCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxNCBGZWIgMjAyNCAwOToyNTo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0w</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDozMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KU2VydmVyOiBuZ2lueC8xLjE4LjAgKFVidW50dSkNCkRhdGU6IFRodSwgMTQgTWFyIDIwMjQgMTM6NTA6MzAgR01UDQpDb250ZW50LVR5cGU6IGZvbnQvd29mZg0KQ29udGVudC1MZW5ndGg6IDI1MDIwDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogVy8iMjUwMjAtMTcwNzkwMjc1MjAwMCINCkxhc3QtTW9kaWZpZWQ6IFdlZCwgMTQgRmViIDIwMjQgMDk6MjU6NTIgR01UDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTANCkV4cGlyZXM6IFRodSwgMTQgTWFyIDIwMjQgMTM6NTA6MzAgR01UDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>d09GRgABAAAAAGG8ABMAAAAAsUAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABqAAAABwAAAAcZycDDUdERUYAAAHEAAAAKQAAACwC8gHSR1BPUwAAAfAAAAZNAAAOXrk+g0BHU1VCAAAIQAAAAE4AAABgJsMg1U9TLzIAAAiQAAAAVwAAAGC39vyMY21hcAAACOgAAAGIAAAB4p/QQipjdnQgAAAKcAAAADgAAAA4DbgRMGZwZ20AAAqoAAABsQAAAmVTtC+nZ2FzcAAADFwAAAAIAAAACAAAABBnbHlmAAAMZAAATHYAAI7olZfOEmhlYWQAAFjcAAAAMQAAADYDfZquaGhlYQAAWRAAAAAfAAAAJA+BBkRobXR4AABZMAAAAmEAAAOoyHxS42xvY2EAAFuUAAABzAAAAdZthkuGbWF4cAAAXWAAAAAgAAAAIAIHAaFuYW1lAABdgAAAAZwAAAMmyvPkMXBvc3QAAF8cAAAB7QAAAuUHjy2QcHJlcAAAYQwAAACmAAABE+ExWCR3ZWJmAABhtAAAAAYAAAAG94tSewAAAAEAAAAAzD2izwAAAADMR7gzAAAAAM6hqAp42mNgZGBg4ANiFQYQYGJgZmBkeArEz4CQieE5w0sgmwUswwAAUxAExQAAAHjarZZ5bFRVFMa/N52htEw7nQLDIjUG2dxQAdksxJjK5oYsIotETdSIgpGYqIn4B7K7JOJGpIKCbIUCBlQiYqlWIy6IKEIR6o6lPAWK/jvH37sz0g6rVN+Xb96de985957vnvvekScpV1dooEIlg24YpfwH7nx4itorTL/MFIw3bnv33z11ipoHLcewQtxDys0qlZfVxT3bS1PBo3pWpSrTer3rPe5NV5k3x5vvrfE+8H7w6kPh0MBQSWhiaH2oJuSH6kN+VpTnG1CKXQplDcDKB2HnP4CncWqhiPqplfqrs4qV0GJYBbPU0dZrjB3WOPuef1E7oGvsT91Bj6c59IU01P5gtI74Y8nDisMi2Mk+Uh88lliNBtkhDYZD4DA4Ao6Co/F2G5ZjrVYT4HRsnoQz4Ew4C86GS/CxFL4Bl8HlcAVchY8yuBqugeVwI3wLvg3fgZvgZuZ4D26B78MK5qqEHzJWzVr3wZpkENE4q3S/nxPXGOVrTvI7NVMf4uxnv6i/+Sq2/VoMq2CEke2M/E7vDnp30LtD2cRVgY+vNNnu0zSbjE4lWmlr9K69zt5GUeUaxXnqJ92hlq4nRk+UnkP05IMcxoLn8uxLRgrRuI7RPexEnbOZbGvx/AWeX8NzJZ63ar997db+Kyu+jD3pCxfCUvgqXARbseYCcrUgvYpC9qaWvallb2rZm1r2pdbNsIp7GVwN18Byp1etdmO7B+6F38EWePDx4OPBx4OPBx9rH2sfax9rH2sfa58MGkqsY4h+HPT4l8dqYzZDcVgEq+E+WAODOHzi8InDJw6fOHzi8LHsRSS5zN5JXdRV3XSRuuty9VBPRq4i8/qRy8UawJkcqps0WmOZcYImarqe1AzN1CzN1lzN01N6Ws9ovl7Qi3pJL2sBuV+hSrJ/N3HuJcZQjh+cyOzhzRfoAhVxivfaHNtuH5lvy22ZzuFKHtD/ctmvVmvb7FgTLH8+p6cPZcxZZ7u4z+Z+0H78F9a/p0imZfYftjPpUJi5Ws5dcMXTDP7HyfFTzVf3nzQ9EMR4iv6DnLvgvtQmnhi1eZyUhn89rGey0Rqs3mYeb//Gji3NsL3Z/gp2sPEuJqeQV/vtIZoxRlaeZqUvWLmtAG/aRk5gACXNjXxmFbaO+xP2ePKoUy5mR2yDVaUt37Kd9g33nY28XZS+/2J/pVv3nJxZtsu+D6J3CuSn+6Y27HO6VXUGbVO5lN+oO26HnL+4fWX32m8nWT1glcSzB37M3hcGmWHteWMEY9W8BVJPTbKfeQvGifOg/UQruPJS8zXO34asbNjlE/OQr9qZc+RoU89VoK3VZ/pKeftH9SZkbP1Zxk/7frAjTZ7TP7tCmd7Z49T/guPvhEY+bNSpzv0JV8ypdSxTfxufMcvuM6/ZqpsU7ZGmaGW9eFOMBvfYJKqBAEr2dSPzbZrdxT1m0eQFtoWuCLk/yWa50a0ZXkrtEyvPzOATz4htO95aZutsi62FO52SMPmIG/k0/cRmzsfVdvC0Cp12Z1Pvv5N6HzuLCvsz3w3HMz2k3uxojG943NUARcCj7uzMSBeQxfe8K1/cbiCiS3RpUAeAbL7w3amaLwc5VJtX0t8DhPnm96QW6ANaqC/I5uvfjwqnP8jT1SCfWqCYOQeAApWAuK4D1D+gpYaAVroetNZw3cLvCJDQSFBI9TBabaggxqqtxoN2VBITaN8O2lNFzGXN86giItTcz7Gq+SCs50Ez6ooFtBdqEataDGJaohXMvgq0pB4vZ94NoLU2ahMzVoC22goKqUIqaVeBmKqBp33AUw3wUKsvM0Zo5QLPaRp1X4PWTtmoUzZKhdQprWxCF4OEU7OD0y5BtdSL396gnVOwuVOwjVMwxynY1imY5xTMdQrmOwWzUG4IsQ0DYadaxKnWzKkW0SgQ1q0gW7eBAqdg3CnY3ikYdwqepwdBayqz2awzUDPhVEvoFZBw2rVx2uU67bJQrhzPgWoRp1ozbdb7+A+0izvV4voAJPQhCDsFc7VL3zJLUNV5Ts2oq+5SmkadplHmb+s0VSNNQ07NLKdmmCxNZWVP1OmDFoUoMQjtggzq4DKoCC1G6nyXNR1dzBcS8e3swlyi6ko8i7EMIil2kVxLHJs02FWdN7q1DmeV+9AzWNOYvwEVbjw0AAAAeNpjYGRgYOBi0GOwYWBycfMJYeDLSSzJY5BiYAGKM/z/zwCSh7EZGBhzMtMTGThALDBmAcsxAkUYGYSgNAvDMwYmBh8gi5HBEwBizQrXAAB42mNgZlFgnMDAysDCOovVmIGBUR5CM19kSGNiYGAAYQh4wMD0PoBBIRrIVADx3fPz0xkcGHh/s7Cl/UtjYOAoZwpWYGCc78/IwMBixboBrI4JAHA9DisAeNpjYGBgZoBgGQZGBhC4A+QxgvksDAeAtA6DApDFA2TxMtQx/GcMZqxgOsZ0R4FLQURBSkFOQUlBTUFfwUohXmGNotIDht8s//+DzeEF6lvAGARVzaAgoCChIANVbQlXzQhUzfj/6//H/w/9L/jv8/f/31cPjj849GD/g30Pdj/Y8WDDg+UPmh+Y3z+k8JT1KdSFRANGNga4FkYmIMGErgDodRZWNnYOTi5uHl4+fgFBIWERUTFxCUkpaRlZOXkFRSVlFVU1dQ1NLW0dXT19A0MjYxNTM3MLSytrG1s7ewdHJ2cXVzd3D08vbx9fP/+AwKDgkNCw8IjIqOiY2Lj4hESGtvbO7skz5i1etGTZ0uUrV69as3b9ug0bN2/dsm3H9j279+5jKEpJzbxbsbAg+0lZFkPHLIZiBob0crDrcmoYVuxqTM4DsXNr7yU1tU4/dPjqtVu3r9/YyXDwCMPjBw+fPWeovHmHoaWnuberf8LEvqnTGKbMmTub4eixQqCmKiAGAHiSiXUAAAQ6Ba8AmwClAJIAoACFALwAxQDJAMUA2wCdAKEAsQC/AMUAyQCXAJQAwwCqAK0AuQCPAEQFEXjaXVG7TltBEN0NDwOBxNggOdoUs5mQxnuhBQnE1Y1iZDuF5QhpN3KRi3EBH0CBRA3arxmgoaRImwYhF0h8Qj4hEjNriKI0Ozuzc86ZM0vKkap36WvPU+ckkMLdBs02/U5ItbMA96Tr642MtIMHWmxm9Mp1+/4LBpvRlDtqAOU9bykPGU07gVq0p/7R/AqG+/wf8zsYtDTT9NQ6CekhBOabcUuD7xnNussP+oLV4WIwMKSYpuIuP6ZS/rc052rLsLWR0byDMxH5yTRAU2ttBJr+1CHV83EUS5DLprE2mJiy/iQTwYXJdFVTtcz42sFdsrPoYIMqzYEH2MNWeQweDg8mFNK3JMosDRH2YqvECBGTHAo55dzJ/qRA+UgSxrxJSjvjhrUGxpHXwKA2T7P/PJtNbW8dwvhZHMF3vxlLOvjIhtoYEWI7YimACURCRlX5hhrPvSwG5FL7z0CUgOXxj3+dCLTu2EQ8l7V1DjFWCHp+29zyy4q7VrnOi0J3b6pqqNIpzftezr7HA54eC8NBY8Gbz/v+SoH6PCyuNGgOBEN6N3r/orXqiKu8Fz6yJ9O/sVoAAAAAAQAB//8AD3jatb0JYBPV1jh+78xksreZLE33Nl1pS5uStJSwr4ogiAqCoqzKjgIqoCggoCyyKIggCIq7gDqTFhdExaUIuDyfPvEp7vrUqu+5fU8fS4b/OfdO0rS0yPu+3x9tM5mkM/cs9+znDBFIf0KEK00jiEjMpEqjJNg9apYy/xnSZNPH3aOiAIdEE/G0CU9HzXLWye5RiufDSkApDiiB/kK+XkQ361NMI47v6i+9ReCSZBchdLZJZdcNkyicq9CorSlqEkgFVS1BVTqikpBmtjepAnvRrLSCaCaquFUpUt0pXBv2iUpY2XXgQOObb9JPxXdPVuF1h0kuYbCcTkzETnoSlQRVOdwg2IhFqlAtIao6gio9oklwWcmlmWmFZoNLO+FVwiubIprNDK/2CKnu5KmD65vD7Pcw2njV3+BHcv1M0/Vfj/+HuuA33O8cQqQHAI4skkdHkmgmwBH1pWWEw+GoGUCJWuwOOG4gNNPsrKgXlOycIn9YI6ameq8/PavIH2oAvOFHois3Dz8ywUey1eaEj6iaH1Qzj2gZniY1w6WlwSp9nia4vK2ivrfPY62ot/jSLBWaGT43BzULfGa24GdmyVqh+lyaHf7C4WnSArRC7Zy5t+c7v+0lvgrb3p5v/HYfHqiZrnoh0+yBu7PfMv6GW9VbMyxwkOaqt6XZPXipeqfPAV9wsd8K++3F3/gdP/sO/FU6+yu4Zlb8Otnx6+Tgd+pz49/Mw/Nib5cgIqguBXGRnZObV9Xqn9o7EwlRG/AE4Ccs4k/YV8h+Cj34UxfwFJ5DLf1PEZp90aaLyCn49fqX/Y/+MWzzsFPDNg2rJ6f6n6JbVtPL19L79XH4s1Z/aLU+iW7BHzgPrEcomXOqWvLJ20hHsplEy4GKainQQm6KlpsQo+Vl1oqoAgRVvWEtC04rWXhacVuBWyuDasoRLRd4iuQfUTTB1aTmujQFkO91NqlleK4DHHhdmgUIkR7SiuCr/pBWBd8oywV2c0TUDkq93ZQVKPJHNIsXThVEiJZlUtzAOSn+IjiN/Bj2poVDnWtrSkqraG1N5zrYA7nUV1hTUlgg+7xpfnjjlc2+wtoqOkd4cevsW+5cvP7w2y88sv2x515bOGvu9Tdsf+vA2w3bdn9MHzNtWbpg5qWLQz3e3PnwO75PPk3/6dCKxxZMHz+/c9/Gx3e/4dn/kvsDArtoyqkfTEtNjcSJHE4qSTeyikQrcLd2MjdFJcCIlm5uauhSVCE5K7QucKjY2aFibqJq96BKjmgpwJ8pLs0L4AKPqhaXlg+HVXBY5dJq4LAD8GgPRFeK4q63S9l5iIaaKniTU1SRC2+I1qWT4tay8yIRLV2Bo5zcCGIEkBAOpeVQr1xYUFLHsNODcnR4qJ8Wn+HzKQ+tXPnQgytWPbz+wvPPG3bhoMHDJgqvz4xF6NiHVq54+KHlxgcXnTfoQmnwkEVPPrF4yKLduxcNmjxp8JBBU6cOOpkhzel3Yu3jQxc98cSioYt37148ePLkwUMHTZkyiIBU633qB+kdwFsAOCpClpJoFkqGPERcsdgUtSLi6kRAUVeGogI77PoCApu5EnijgKPFkdqkOjjefKlNWjd4rZSBN8SIWqM0WPOKy1yAG9XhVjtEVK8CPJkdiQCuirPgS9kRtU7ZQ2RHelk1Zx9gGMY2gBFgk1RKe9LaMPCL31xYmkILC4o4guqoOYV6gJvq4HOGq95rVg89/9Vd2w9MnTyTDi+rUocOek74x4hhr0z5UD/VuHb5wNU99U0dRndb1LnzqkjZ+KEXjqIrbnzm8olbL3r8macXT1g3eJg+uc/2Ucs+v/Qz06Tuvb55Zvb6TlW0Pqf/TcITtdf2H1tyaeceY2bzfThMyqNpTH6XofRG0W2VYI/JcbnNfszNAhvkQxZFZYAiGv7Y+vNn+jf8Wsv0TsI2+UqiEA+hqpshGsW9BzQJMo+L1OVRWVB8LjfgoIQsoz2fkktWvnF4VYn8lP6KcI6VrhKqrqDXTdc76A879Yf1DtfNuEKoxGvLcO285GuLRzRn87U7u5Val1BaF04jcHliLpSXv/XeLSXyk7SX/vKTsr5tKv2CXuGkl9Cvrp5xRexdfa5Vvz723hVs3dnCWHEk6JQUkk9AxaJCTA2qwhHNBPvEBaCbhGYdZRLDYrHf5DHbaaknuxPtYNtho8XV+rsvL92jLjsgBbdcQy/RH7r63kv1X8fRPL3pCuqGewwl66Ua6WnQkhcxLWkOa9TSpJpCUUJRshEbCDxK8JCKKORAcdqOoC62ou4MRa02/Mxqhq/ZrHgIhKpATcoFNijNgC+gFCpD6fpGuk6f3ShcEaWP6pdG9Vr6BqdPta7TbuQToHVxO7Rui87V5zTeDX/Y/cEn9Lf5dQqFTMEpNMCuK8DraFRswh+qSkGN0IoG0YHXBdvBWJuvkH4vZG7Zgn+7A35NIofhb8uSrJD4AV4CuUaEteAPvwTaHjsaDx/Gv3edWir6mR2jEDB7kFZwV/49Pw1TlzDu0diOm+XKY+8xu2c2yAWXIU+7kqgdb6SIcUmKi87mMtPeLDPhxjmGdNTsUoTRXXG5wyF3Bly/sEDgG7dW4ZJt9rEjHxz744MPjjeuWrJk+colS1YIFfRSCuaD/r7+vf6o3qR/QMv/9cLL+1+ku1546aUXEI69sLjHAQ4TWmMSyioBV0QFV/7+INorjCwSQ0VUEpHgEgWCmw2kFgOp99KfGqUf13Y+Pkz6Ga85HmyjEoA1k1xDoikIqR0gRYbW0uAgjV0lLRO5K4sbOi5m6MAe0mS4jezBL8hOYDGPjIeeFLhjNnzqyVDcUdFuY+LODnhRUyNqmhKViSfCFEMJ4VLOTP3AhrU0Lsp8heNNVPrmtaY1i/RbBGHfyWH0k8WjF03dtO4FybqPkn9o835aqY81bVkuuNc9Nmrmxq2rOY9deeoH8QTAUk7uINEOCIsJQDB1wGWZABHRbATLC+e82XjOm26taHA6OmSDKnQiWSuQrKj80Tzwh1SBWQNaMdBZQQshDwBW8phR4QAoO8JnCmzzelN2QQemAR1gDWikOBJRnQqYB6rXrWXkRVraBRWwQ9gBA7W0xJD1ZjQMJJDwV4r71iy4ee3CFbt3L5150w3X3v6CYDp26PDPM2cunamfeON1/QS9Ub52xYpbly/esvT6m5csnyU//O0Hr19WH6x4ds7rX39AGA/XAV0vAl6xkVQyikStcW5pIHar4KxQJTBwxSZVBgPWFVStR1RHCJlYFUNRCxMVFhkQZmWmqhWlhoKmvZ0AGWlEFRQ1hel2GlbAzgO+Aiei1FwnLHnn0KHX9P50n+yhw64RfznZdYuu0mFbhF00xGi0DfaWB9aVR14l0ZwEjXISNHIhjTxSU31KjstS0eC357iAPH6piVnaqUfqXakkpUITQNkibTLtcdNZLcmkWkpq1SGipaZUHUJjutcjxy5AG9qkprpU137YrKpn/95e0/+4Es7a670pHk9FFH7nr8pfVSgDi0aI6q2iUZfHyw1bqllQjOdE1ExFg4+BxClA4iixZEZakRWoaS71ACOLPWldZ7fPC5u+ZJsQXTnz5lWrF1w3Jf2h4cKHsberq2YPOvTtD1889zu9QZ63VL1ndcM5AxUx7yl9ckGlIOi/f3FU//0wp+EywFUd25ulZCaJpiO2cuNyCLZpg7soHc04N+78DkwkZaFICqlZLkSK5gPklMFrIIvZbO50NEV8imYxIyRFaNb6IqpbwZ1pd6uWiCopqjnCRBduTr+5CmwOOQe2JggyBhLxJAO8jHb5dvCG6vJO0wfe+1Lvh8e++t0fbx/Rv3tt5+Iblt95y1Vri4VuINPS6eUFmZsy8o4f8nfppf/6ly/1r2hnaj700Vub79h7UX/GF0OYHFKJg9xAoha07c1hJquRTanqDGop3EHqtfvYUuYXWapSVNt+k2b2HUtRTfvrZbMJHBcLOEYWm4exbjNZo/AhUleTrVVg1chmi9VwXSjRiIXZa1ztEEE0F9ZlUs8Q8UP9P8+VuRpd5b++a/Jt3aof0LP0R7dto6OEXFgYaJNJQJ9MoI+fFJIgWUyiPqRQVtx0rAQKlQZ8VqBQKcJQzSiUDhSSUZigg5Hu0nKBPm44dLtUB54uh+PyoOYA0nWCj8qLFPceq+jLCqQyCYOk1NwEJEypoqWK8Frp1hxy5HTjMSFQ6pIolky9SXctnHnTP1/d/9vimQs36cfePaKfaNy8cMGW7TcsuKds6bQpy5ZPnrqErlqwr2P5rjn7//rX/XN2lXfct+Dw+++/fdOatQvmb9kilF9z223XzFi7kvPrxYAP2syvtrjeZNoELOqG9Fyb6DRUaDO/ZjEVqgZ4CAH5NQvEjOZMiaDFXG9TxHQGumIDOjkjajoKHzWX8W6xohIGOrArAU1LYNOV1uVS5kSgwWzo3ToO8sXUvO9rata/+seQ+3rldlt08R1PdNpw2Xv/aVxzw8w78zesmbFZfPcoTde/0n8AS/Ir/Z2c3E15GR990Pfc86jpH3fvHXPewpdeexlhZTaJ1JnFRiqbrRJmWKBNYmGqRAqhLgYpyywTa8IyEZl10gj2iTgDbRSBTARz6Wq4nolYSQcCelwz42VsQVU+olJu0YkhFi2wyi2MLTv+mggGV+fGuMklXQ0XpeRcMlKcJ34BVyQgqX0ms89v8p0rVsf+OmKEEKTvbqQ3Hmpyy56vD3H6baabxI/EowymTG6lSRwiiUFkAIDbhMLPZrHvyRfFvnTTQw/R+x96iOvgFXDPz/k962qL62pLi+HOK4RLRoyI7RRHjXztX4rs/f5V/baNcL8esInmMn7JJVdz70vLtsWtD6ml9ZGXbH1kAb84Q1quG5yvEDryhjnCnNbcLDQ8XGkgoVWPErUpVmaCpGWj4JYdhvER3yUp4JyDxG42PhCdPYBZGz9ac11nfyOtnjRx+Oypoxfvo4G3pQk7XjnUcMuRWZ0vGX3nrMuvX3jptDkTx5146J13EH9z9G7ya6ZNYJ31I89xnaumhrVccMLxWKszNamdgg3lZhKQKtQ+Qc1nblKLgpqIbnh/th9KweEuZcK7QfaQPLCIBxhi75Xjs1Hspag9XGrP/SBljqmZ+0l9ZlaPnijKaOKIqa1S3EG0A2AgoPS2WkWlqLyqU21XlP+yWzMXIEKs5cBHlRGtTx0Pb/gUNQNR4yaBfCLKqL+Yz1kC4pApg7Aos73EvyCQABz74Rv5hPIPSjrXeZjGmOOhb9Lr6AK6UbF++sl50/yhO8bdvMrt/8fDUxcPluSwtUd4wV0Wl75fV/U39ZWpbjqMdh21p2dJv79M1Jfp44VZ9j6Dek/rSKkQzIzk3byMfkofFdy6Q7/4iP7GxecPu+CX16hIIzWdpdgzV1/81VN0Id2lh/Q1+gp9cEXh9PIg/Y3OWXtXp16OLJeQ6Ug5ivTxEmLKBB1jBo+qI9+zqsi1TINsIRREk4yc7ggyHwmcLUCMDQOZ4CQUigHRExALvUL4caH80IrY9lWv0+9/lk3q8WF0nr5SyBY2wc5pAD32FPML/eAZTjQkQypIQabM8lEK+tmtmBQMMKqnoioIgZHC+NgO77JRFZiAoQvgRHaqgsqZaP5U5lOiBARdnY9SABanBEJSs7wvDnD5HqiNHzTQo19T4aarlm3SY5/qu+iI2+6+eYm+lva6etXG1fr3JrWxcfw9xdmHbzv43pZbb1y8fssNM+Zej3t5Lsjz52F/FpIxJBogcZcgEN+U3BBB2FIlPJdqx41axEDyABAel5YB3AuWZQ5sW0tIKwZgMjwAQwCASU0DFrXkROLmRmc/7EefmUXKBJ/idaOiCvu9Pq9ZBrtjLq3744/1a4UXGh56+LXXHn6o4QXhjrt++0M/JFwCnOCkY+myxX+VZfmeqP57o37idf137V7ZJB+4bRUdA7RHuvwAdLESD6k2qGKLU8WDpPDGYw+qzYXGBpMnPi6yFWB4jBEESsEO6kFrwFlroC/RXHqZ/oj+5fHjh5uaDh83qfoO/fvXwXV7cAu1vXPobWrjMhHvfSPc2w4Smd/ZGr+zBPxg4qxnEhnr4SLi7jtz7a3g2qu2EPfjDeedO+78p0F8PmYTtsauEqlJ3aqXbY39saX5vvMYzL35fZvvaTGxe1pErmPauqdxQ3urGzaIr8YEYXNsCt7MtjV2E7/XfOCV94BX8sk8Es0lHKmcQRxw4GAM4rCAw5WekSu1ZH8X3NrFYueqNcRMAnMomsaCt2ngorE9kOYCbpFyQaBlKaoM7JOOfJQV0RzgZibZrJLfXMhEEHAQk0kKbARFlkBIzac9TxynuaKwz/rUw4+++bV60/YC/WVBqtFPvamf0HcJfWlHaqVDf39FXvTQ8f36u6+c6FtOB2+NfT/sNjqU49NEGR17GdLDsFFVU7jBJjKM2pqpaGd5EdXOQ8oSN2/i9MPESxj8JkBoo/BqY2Osh0mNXS2sPz5MWBq7meP0Rfi1jMUtAkn0ayfeAVd78QAKI/63fcEXfhX+1oM8l5Lws1ISfpaVXQqY3n2EubuGr2vnTM/9nhTUEmA4q+5kXwfuhLHa0pLamr7CCytvnrmq8Y/Gd2+aR2+Xl9+6YYGUc+KrV/8xfdJLFoMHTflMHsZxZm3GmehkOBMRZ6mJkIoQwgAa0UQnE3sq5T4JQgiC2G+l5kJaCGjbLFg/EmNvCGPEH2K/7AT03SQsM8UGxHwm4c7YNQb/l7N4iSHt8U4GDuU4DqMi43jRlAiUMOL4gCwaoPP75r0koz+tJGS62RFOQBKPXCqAvdTUJlXhyMTMmNml2eCMLchku5LK0KpalHrB5HCiPraxMKFGCQuXpDDzhEFKkT88pbSQmj1Kw0n6jkzfOdnoNekdlurlJnCiT4yX7gN+6S0MoyeukdbSWH1sP2nBp+ecxqfJzAmcKfFVsuwac+4F5gNajAVpojW+HEyxwUqQXV+QgV/7geY7ca8gTTg+TJoknLiXx81MQuu4mRyPm8n/RdwMDQy05gPob2IQrVapwSCabzbtRU5RCx2s79H/c0p/ufGt3c988Pend7/FtICNTtDv0/+tx+DnfjqO2g+fIuTUG9R0kJJT5CAx9MCbLC7iIX2TpSKIqwarnfGjtaU6sIdQI6RiTNfQCKDdlBbKVyoMZNCEvhUqm6iggx7YTKfctX7DBn2zSf35tdf/GXtW+PK+G254gMcY003dAFce2NtDSVRBXPnjuMpFXBWwBXjtLCmVaeCqEEMeXuCUFEVC+9aiaHYnGnN+zLgg9yThj+UNmBfUHhavvOyP5fqPXW7o3T4q1/46vOkWSv3+9vH5T9NTYMMXkqsMbnMZnnshoDQji6E0A1HKLYNMdPlCaib3+vJC6OqqJm4ceDP5lncoqgJAZRBu72Qxe6ewGeWGf5tDvWl+H8h7ljBqQYLUn05eP2v+1NziN0rTVl2nr6edH92wbpP+tOmpvx2e9Uin0qduWdl/RkF6wbJzbp17R2yl6F60ZMFy2Dvo068HulSS+W3HEDHBqGXDuWwFz2Wno81TxbKLeQBIx3h2MY+L/YwQhg81nz8U0oJIxDzF3WByKIUYMET31QtwZoOMrScp/uLTcoglRbU1ReGQP80cN40SSUQJRXBdzSRh39ubNz5590vf6jHq//SntSupsO/x7Ru27Xzpm5/1z7/76LEHKd0mr16/cMaVy6vqjjyw8+ulix4GQ2nx9lunj11UHfn0IfXI3GtfNHE5VwD0XMtsZNjBcmJ3YKxQDDG3Vj6C+yBqYtFeExgKUZmlX2WMEjZ7iJhXKJBm6B0bMXhy/AeTj11/A+D3YyZH60g0FfErGzJZtSXEKPrMogsvxuIgKDjBhcEAMhMPYaVZEWGAY0Pjvi0PvN6ov3HsZ/19+r549GTxw7t2PYyv/zoZ43ClAVzHmC0UMKKhBO8ph9H+YUaORqzxOFCY+sN1aPOnHaHzA3KAzn8/9tXjIO/2XnutdA6oWEo6gz74C1zPR97lcZ9oSqoXKwrwsg1UNqNwh4unMYAoAERdmgMAwQSUn/t0L+/+ZR4LZRGX6tufAt9Qhf17e9z3r2d50FKuwsCW5kmDhXv3731l6r/uYV9PhfOu/ZrFD+fN+/f2nPTL69w1dLhU+36T6nSpKftFskcwWewuD8/S094OwSSbLfaUVJfH62udwNeID4SKZFW4dxz25FFEAKABkFFISwvNtLDza59myaXU/iR1dpBzPmzUd6j6F5lyhv6xalJPDnyaPiM+e3Lg88+Lzx4fJv66dOnJFLRDAO9HmC4qMaSDJcwC0YYu4p6WgLpGsjFdY6X8/0Ir7Uv/rod+pBfR4f/SQ/TvP+gP6g8Inwrvxg4KXWJVsQKhb+xFuAf4ddLbcA8LWvbmBG1FuIE1qJqPMEvehha9mWk4gJYfIKRwLwqs6v2C3kRv+kKnr4EhkS18fXKYTgQn5x3MkcxkvFMV1/1x21bkBjRnIDOPjoOBDa8yK4ChAQyWBHzjRVuMip+f/E2sWi8t3brmxDzDrlinHxRc8mLYb7UEC0RA2mDERRDjMaQGs4PYpQq0imDbxd+JofhWA1OlUAn71tFb9u3TD5qf3Xps4Va4bumppWKfeM6LtMx5IUlL9wrj9prUY+/Bd+36QbqGraEnWwPb7EH0E9gazEfgdg0yv7Hs4swMcsAVX4w5Hhnyg4kA1nbA/sILdIm+cJu8ZOt/BnI4ewgfiukMh4kcnIE2WA9zr4HHxB604jZavucRl+x6UPhQ+CBWRh885xz9Cn4N6dQk8T6CkdfMJHsOD5KAC4PokcStJ6/awv7mIul5+j3IcwkkG0+AiDbiwgymiWFXdBCbBJzBF1IX9hReJH7z1HbTS7L+O+q3aWBH/yYNBe1WRZYbFQLMFS6VmqIeSpgPFbWwLJjFAe6N2DHgQZsWYzpBtvkx0FsEOxM1gxM0gxPgduEpFvuVykEz+IFBqzF0BXZF1BMoRdXuV8C9ASs4AFvDn8t1fWqaEejtlghXldbU1tSxYBZIRT/oQiNmY4Q94TvTTnxw5LppY+ftE2bNfe7Zzx2uN2x2WqdNelxrvGzU9N2Zn8xbR6u3PjV97DXj+8uy6ZoxE55XY390nVHTaXDJ0KlP3DVw+NXnqvMBF+tAdlfI6UDBvLiujzoRFz4wXGTERTYesNyaTFEv5jMEuLlRr6RglFtLNwq6MEHhBqtFdWFAQ5OZGZPt4ydkhUliNMVZ7kHh+ZRSs8eI7fL8w7rG8KarDn7+ReP07TXpRSULxty+YuXq0TcXy+mxBwaer+/XT/i+17+4+MJ1tHbYZQce9O394dLBxp4Guv7K6NpebIOebWwjtWVsQ4rHNmxZRv2Lu6UCR6slHtuQzbK5QBh/4oeX5l9Phejq6VtvXXbvhI2aQG9asuvH44Kl/FtaO2vGNpNJnnj7Zw+UP/LJDaNkk+m2KTMorUH+nABw/NugyUxuc3O1ijSR4jSRGE0kS0uacGKAsx2PetiBQvYgo0y6GyVyKrCdXVEdAJLPzqKEmpQd97drMb2d5ke/oDQ51K5w/3vCZ4fGbqhp3OGv3TLpwOeNt60ZNb+k5IYRa5fT//FRE+19Tj/h4mPf3Xr+UJr3/UONwwbSY/0u+P55FgsHmP4JtEkDmMaTqBfBcYoGODkYQbN6EyEEDo7NzRK2NkYV5tEgEBk2sKusktOLtpZZ0VwK8pgTa7eUiGpVgNMYgQhwWA4NmBlvsZAmWMz+AN9iE6ln39HPY31FcfPKKzfVDen64vIv9X+/I9Dfbrpx4mrB0vFbGtb/8/EC072HIqHFkfNpJZ1ryrzu3kcZn3UBgA7JlcSPWdg0Zk8BFKrC6gtVTwilgYzmfnpQTWO1Gz6MhoSSKgijaT7GlWhfZaCecVIWl8RNYmUAhHnSJ5Gu4ynZLo/veaBgQHm6O5x9yfAvvmgUH1u/8okX7La7JXnyhJXrT44SH+Nx/yv1wWIM8J1DKshcIw4fAK6xwEo50jvITGx5MTrakSEcK+lyXcySKUrwj8XZhGmCSpRkqNER3yDH6iWvMwtJYEHOIVoWJ4DWARx8zZweSWKmOh5baDuHYzDWlV8fmnxvTfq2X78eumdAqPbu8+5YWnvXuNe/bly15tL5pSU3XrJmtcFiFw9dc2L/O59VFN+TW7z0thv7D6D5TQ8euHAQ/XXAhT8+x/Uv6HYC+8dDhhj2iS3MZVkqyrLUZlnmTex9IYTb327IMYyW2D1M48PGJ4YNGZdcIJYLec2HWVnX2OXBiU+83HjtnItuBTkau3PoyHf+HrtMeOy2xUP6nvyC0QL0G70S1sNqeeP+KXLMWSSW4JaYWLqvsbFR6nrigOmCQ5jYEU69qA+mc+CaqQBlmDCyIjUlmRXYorZ3BTXFyp1e0PYuTlB3yAh/ipwY8cBPCTCcr29KSo3SZ0jj7nvywm826ldsNZlHTZQ2nJj56B6rfKqxEXF7B+A2G+7rIH2abT8TRR1sJyYe+MEKEQy/MBQ7GYodXF2ksBiQ3ZA2RvQHzEJaqNzRuJB2+FFfSx/9Tt+xWE4/OZ/u1L2xKP1Nd8J9m3GYTRLmQdshs/sa5fRj33E+kK9h+mC6YVu4MjG+g1sA2UF1hLU8QJgvFNcChXAhAWR/IUtHMbc2k1eUuuATVAeFAmMGLROZwhpRFS5J81oEVvyMS/yteCWZa9SU2gdnzNhaGn5s1sP7G6+eedXN9gOzp112XZ7Ude2QEVdeefmMr76O3SCsvP/W1dMtsQuFlZvXDOp38jMS52+2tz0YZYjzdwIqZPIkzmbwtGJtDwcC1UBrBvefxuBqSucHpzy1v3H2dSOWlkpdd1wy9q0jsRHCo+vmX3TuyR+Qv0HvSuWwntNqq+jZ1VZJdh4jYkKbgColIKtbVo2Op9JnX1CTfvLzz/UTjXeuW7N+w9o1dwpK2s+0Tj/8S9qv+pu09pfdn3++O23nl1/u5DJwnT5OKoN1oR69ghhmDXqmCVSBHlVJMK5wFL5BBA8L9iXbNIqBMLBpnDLqG5+T2zTZ3KbxGIhL2DQZtKVNsymvdvvUQ5993njlptri+SNX33HnmhHzi/Vxpo9WD71If1k/jjZNv36xn4T6foPfesD37D+H9GMwTNDHid8bMFxleNcIQ7MczxZRwbeyAey84Dkuwz1MhiMk9oQNYFGY4PalchvA0toGqMNQZds2wMS7a3LubqxZOxpsgOWrL7y2tPTaC9asMAT04IGLjpcIco+eaAO8MbCPUNDjnJ+eN/hW2AmwpCKXJKQgp4Td0sSqlnjmjJUC4bZL5Ygn4KC05lG/uZTzp6dq+ai0Ds6sq4ZOz5G6bh8+xiw9I8NuOYH3nAl2xyG4ZyXmMNqM/dD/TezH72rioZ+OGPqxK6xWDM37wnjoJ8Vf3DEe+uGiNl4+3nbox4i+zxT2mdZPmDpv4qrG1z9veGHWdCrsmzdh6qTLVr11sGnfX+bNpufJU8ePGNBneF7FhkXL9o6/Yqksy+fOvrxP70E5HTctuiM69cplshH3OfWDMM3UC+yUcSTqQdgdMud+cNSZrWIOxWtNJQQ7Ya/EE0dpiVrTNGtLe8Xh4RuAYKERs1cUXjbGeYXZWyW1SsHuxrfe6lWjlLky00ZUzF8L9grs4hPrY9ec39MiL3f779wq3IlrvR3odFLqCjJtON+pPHwqxxeMgSRvG4EkLNR2pjJLxhcPKSmsVA8THVRmofmkAFNdwrQtub1x0oypKwsbNWf4/qnaAbpPWBhb/MSSEUNFx4kD948c8yWuqwpk7dewLqzgMGJMNBFjwriZ2d3UZqgJHfKqw5QosufYIX3ORqlrzHT++cKJEwcYbSoJMX0M1/VhTBJjTWpKmF1akx3hP4kx9bz71/t4cEhysWCS5Zjq3k/qJZPbw+sG4kesbsABpqWW4kOxxSJCYnNEiK3TY6xWLE2lYmHla/V+Ofvv2z/Mk3N2vqYfuO+vlXLF2/fB8octXSqosWHr1wvqiQPChmfpM7GZJI6jvwEsLeNB9MzxoCym+O20ik7Vd3z11Tff6Dvo1C9//lkoFPz6bLou1hT7hN6jT4brZ4It+x3DVQ3h6DeFMdKgoOkKiDIdAaQx7DQXFBElKqakNsNJw8zsBCO0BNmgF838+OtCmdqO6pGye5akD/J65YvtvYZlBQHQkSvETifyZz5gN22l8qz+sxHGMQDjXsYHLeJF9L+IF40Rzou9KIZjmjB7lei997aT3xjxol76XcJ9cg+SC7wPe7DBz4tJsFYH9qg12GBhJ1i9TBazEzGDAG4qVsZ4s9hGBNr6Ab8e8E8xuQY70+rWTE5uhzNFxDYltmTEg+xmHmPvNW3yQ692uPryEfDv8qs7vPrQZCFvw4LZb+/6qe76wj3L3p56f2XVjslvLasvmlv38863Zt3M1vyU/isdwmJR2aRlCtPZxH6MsBRst6e267/KLx7ry/7OB7DOjcOaG2wgHFZ/UEsDWFOCDanNsIpHVBvPHbs5rFmiwr0NP+MlhDUNtZiaAp65G2EF1cBA5aChx8E8cx/z0MEEmznmsjHw/8yyVx6+asaMqx5+5fei+mVvTb+/ouz+mW8v21N4fd1Pu96evWDDzbPe2vlzHax3Mb1T+lksJBm4XjCprVITsJwmIutlMoCNLjG2Rz1NzG7E/LUmulhBjgsrlDwZEbZWzeyFV9EdlR3OiBH2QVXGFYSfu0lczS7etWzU3SO6jqvpO37Nk0su2zCi24RQv7H0oxUvDzgnXDVniHvl4b6DqqunDea2zh36KjoC+BN9DNiFaJHDZjujb+ExfIs7wLfQV2Ejn/Tl228DzNNP2cWYqQTs5lkEzIqGNBsLCaYGG0zsqFXMJJ9nwvPY9VFPGkGULEyR8iBKXj4gBANdREvDw9wAoCFVqbfZM5gTaQJqmuORFd5elUpbR1bSWItViTD9xT0Htr0kCvXxyEpUFA+vP/D0C4Kl/HVaWPL1Z+nv32FqDq3ceDjjux+LaBHjP+wbHGlqJAVkIYlmEx58AK0elTH0myI2NRCaLTsrVDcvpvaG6u3ZsgVgLgyqBQln3g3OfAFz5r2gHAuYM19AsMCiILu5B9AGVkIR1uwWAMxKBgu8aHKKYe2GRUb8OKA+LDQGFjAHzIHacE9aW3rOdtvn+w5+LAkvLpww8TobfUCfKOflCJ/Rk9W26mpZmLyVprzZ9Nfd8tw5G2/Vf9268bIHu23Z4nxt8kbOE1NO/cN0mfQLq2S9gfAmqKzCcBjjnGoliGWJV7BKR7SiVBa8LMeqjFRepVokgRVDzdZCJFA50MqVXYCHae56xcPIRrTSPPhOJuEfVCrwdU8GHjrd9Raby83sn16UN82V1hl2W53fzBvmwILjMtlspDJZJnPKqlBtpPP629cNio4bHx28fvXdNZHa6rWrbx3y3FVXPTd4ydBfdu/85Zedu3+Ztfr8PRMn7Ru68fb1dT16dtm4+p6hz101of78dbcv79m3T49lwo379D+odd9eatH/g7TPNeq40sh1vH4inlNocCkpxIllDJoLrelQg9fHToCZ5BXRTKIgocAkREEEili1hKJOVnbhtAO15VA0xYnvUlzwzhtiroMzJZ6X8LXISwCRfTyTBmoB/8v9kk6mUz7Xx9Au+i10kX5Lo74Si89onUmNTRU2xUJbl2/Vj9JieOF0vRNk7yVGD28BaW7dPdM+h587cZ//Kqaf/E48KPwes7FrjdEV6SbYD2EygDxAeJEz+m4Ks/cUJwBUGNQqUMWdw+5QEtJq4A4dQrziGTVRjYt1EXJvWc3H01VwXBXU8uEl36U68VSKC+U7Rsu1c1FvySgjQ7AnqpTeNsXqL6zoFOnaux+yT75bS89BYaFUKO6nZUd+SYeu/Vo00xWFQ1Ji4yQ6MOPV0b2EpIbNOvaxnxWDlrJQ+pgxI/v3p47Pm6gkifu2r77z7tve+5/Pxo0ccI7++xef6O+ahH0vL1+57Y43f/qyccW7XQYFBg7bcDh4cdF55wmlo9eUhW4f/8ihzw7Lc7fPGz1xYtcBe54as7pDeMWE3a++9bEsrFs+b/Toq3r12lt/5eRuSprDO3HA6Om9HBmpnisR3zul78TRBu06k3gFh0ZszODmedmE2NZEB7N1WUWHI0FPkI9YcLzz6Imj0ncH4R9cbdSpH0xfmV4DG8xPask2bqtqqWaj8tZnbmoIV1ixUjsM5yrCSN2KoLWiIbuInc2Gs0UsolyUj65AZ5ZJcXgwr4I2djpvF1U7uLB9Fgu7q+FdXkitdmluXtkK39TqsMG0AxDNmuoTi7LDTEoUARX3yA53HjE6IlktA69o8GCBFx5jeLa2hUBMlvwgJUbR7bQDLaXb9fH6R/rf9Qk30JG//5uO0h/79+/641/tu3+bJgnrR48eM2nSmNGXrRckddv9+4QPaTeq6sP0Rv01fSiN0u76H/pddAa1UjOdpt+tvzDviSPbN8pjR66ZM//61ZdMkDdtex/pNF9oED2s9q2CXE94B4sFLJTcoFZkblLLgg2iYajw2GkABGjApZVi9icrBBYaSFGMmQbQUnGksNr+qN2Vi3aA162mG70amh+NmDLYRyQCPjjYN1G7wxNpnREK0pIzpoPmP77j9u5d+533AJUfX33bvY6UJy02MTB7yLwlT3TtHp7pXjX4YnHz1fNrevXv3MkpT1iy9jb9QGhUha86M9jzxqsrq7sXXt2Xy5YJZK44XdxAZOJkFeZhkRYaLxNo6V2nyKm7So1XesJDb9Vn63PorcYByNhFdJ74ilhATKQ6Xm0e72xkLuZpzWwkqZkNpeIisd8B4eaH9RFU/r/1GEot9kSIdCM729oV4Iwg/2NXdSe2Kzqlg8zrEGrI7MY+yEz0U7faDSHg/3BIDbmwZ0ytC2lFcCInxHZJUYtNgcKxYwjTFrgpQL4VKWo+MEAnDL0URtSw0gC7g+TjR92wM6n9LULbKZSpoBk0zERcBW1zo/wPbJTHcaPAB+mbn+jbq283s+0eq9RvyH2b+4y+YMLSNnbK7/pGtlMs4KJtio0WL1q6sOeYvMxpg7uU9fG5fBeWdx7YX3+S/o326nJeN6DVAlOueD6TbbnEEGWmpsRBcrIa6LRA+Kspd/165LnF4kvCzbDXkE6DSII00VQ0Yq1mnkjh+M/j+E9CLuaG3A7YSVYxYoSzNJk029a+pB50vpsWb546eeNdU6ZtWnpebc25A8O150n7p23dOm3Gxo0z6gYOrKsbbNjUE4kk/iH9ButKJZcS5siKTfGmXfFMTbuuRNNu6hmadpXTmnaxBWMivVmjk/Qtmv6Y2E94cQvdql+1RZ9It8XO2bqV2bDzhK3CYdPrJBNXBSrVbuY+ibmN3k41JaRlpDS3d6Yyx/EMvZwakVs0U6Se1sk5T35szfLNl153j0CnxlRaNaBjBETPDunvE1cvvm7YrKnL5SVLqNx9cHmoZ+8QrneWsE742nSAlJPVxOjXNCf3a6odgDHMyVE5hmsz796kvHszJal7U1XArUhF9RO1FMez9Kx1U8A0WibLq2djp0Qxn+iAPZxqcXMHp5p39v2byD6z6IODew0cft55y5b163PegC4DHhDkxxfe+di5Pc85v2H9oj3iHLkq0q26Z2RhpKaia3UHecy8eVfXjc70j+t/zU3XIQ6WSs8LRaxmoSPfGw2knZoFTUSVIfC6ySwa9tOlz30j6L9Kz1ObrJ+Ea92jjxN/ZfGQy1vEysRErIwFtXkIyceTW762ImZ+jJj5WkTMZMzfpXgjRsyMZ0+bY2alyj2vCddcOeGG/EbN2nHRxQNndsAgdmxh9JaB54ilJw7M6NU3UKh34nENQsT+rC6zzqg74031dgax5CBm2M2SC0t5mF5wNRB+DuS8g++NGhLGfQGSrxdK/YzG4U16TPz4L9R0fJhgoSK7zw5hFp0s9m/WEbam9pvI0XracUCY9be/8b2kD6FPwVEq6cnrjDQZdlNqPDDBtrJ4hE1zwXi0Q8QGBytuGZnwFhuzkbHl9mZd2GCaeQNHDRyZv9rR55LtG/S9nTpVl5iX19gvGjZuDrvvWOEeuhr4wRTnB43ADhDidcyoI1Pb1JHY8D2WVj5p6nCb/+TfhHXMVqkXK4wa3S7EKM01sbS/YmrOvqQ2Z19S26jQPcPMjvn7tm3f9/y27S88MeqSiy+9bPjwURK9/q7nn7/r+o3PPbdx1NRpI68fPn36cJSZV5PN4lJxD7cf6qgYpj5wetjL1eQUGA2l+ocH4geb6Vq6Tl/g0RckDlBvP0uI6UvQ29g35yUZ5G4SdSc6471u7IzHHizstHKCH+5lfjg4YomueTMPzpyGRLSlQXWoaSFN4YIQozWihCoDaKq6lQazxWb3MavV6+YZPp+i2UAkqgSkpSU9EkkUr3NasHknvGXaV1gbqAsrpeZngT7ZfKrJhfSRJxYu3KmPffI32Wkq5TQ7sZ7NMFkhFMaOLdm8eQntTNOAexHufxtwF5HHje5gn8EXDc78dAG72uF9PnM384tawVzcDsxFPBtUmMIym0h5F4APWChpAT6YJXZWkmuOqDlKvdPrszBM5IOI2CPJNpeIzr1G0o09cBoirLR9rYE4KeM4eb9tBdIKO/T1tvWJRBYTIt8H+q+cVJEI7NuPSbQOo86RoFoT1roCW4RC0a4RxEDX6jOoF9UbZH5Psyaiaq+zVzhqsQv9HbVbSOsMn3UKab1baKBodoeKCNNBWkFVBMfCNHSsDFZ3ZTjtGgEkBuFztYOi9oicpqGieR0rI5H/TktZ22DFxX+iuegdnCYjk/lUvPZM6iy2pw3u5b2Sc8VdUjfW+zkDND2ab1ng2KYHNRe4Aa50xJzLa3R+Eja4RXXyzk+Zd36aE52fPhfv/MxyYhGrXURM5ipRmyudGSxZLK4q+xiO/DWdsdkznIIjdHwtvEbs/Jyz+vra9Eah+qorL5417bJb9olCU/2BD+m5bzsXvT+n9pLL188aPXfhSOz6lHe8ckiq+OtfCatIZL2F5gLQBA7iIsHW3YXOeHchsBNVlSCKFqJRJ7OkkhoMsQBRbNlluA3rEd9JbjU0Z8v67ycl1m/I75vLehpdZ+xqTNy0ra5G0QO2Q+vWxjCzJZIbHOl4blfE7zsQ7uuC49PuqzTf1xfEzi64L9b6eZLvW1sXBqek1NwK4OW/z//Pjg3rxyWDLPfJ/Oe/Mu6668RRgLoZ38Ph/jjz6pbW989O4Btun2Jqqk9P8VkqNLuJV4xZjjRkcQctmw1LAHXd4OY+Aia+sywsIaMqyh7BTn049A0EvlszsUATxex3LuuXzcJ0gmpJBoppxuYIPW6/VvCNnTu6y2M1Zd1nzLvs3C3hiq5SC0Avv2LlmD7B/DFLruhTdeIjgFYyYHUyGmMNz5TW0DoS0FqCqiusWWEjKSGWBLUc0ewO1uqDQ4k8DqNeyYJy3AHbxKXUCzQFZwuoHp4EAgAdRia0mVJhBgS+JgEy4ehcXPrNRxOLH3Dw4IkPgE3WHzyYWPdqtm6ckTC7Xe4EKjVkmYkXCBJgaR2vkTlwHGlI54TioxLiVMJEQS7olj0CtaX67ExMGoxtjEhwRFqzeDsuXmuu/8sNI0fMn3fJyBsm96wo7969vKJn8g4QPMPnzB5xyYwZl1T06FZZ2bMnEU79SIh5PNiuSJuFJOpAGEm4ZZNnisuBsKZYsN/Tkej35P13fNShasXQp8OFMkKzupqiVkfcE4TfGDx2uNgcGtUZ1iwu1jTDupEknDrj9iDAhRgz9hg/ADgNiKVecZb4emyIVxgaezZNePnkLamx9w7TTvSlPBP2cFZtjf26hY7RHxAU4YCAsnmuPoD1/eaQSnI7rwdsKGY0aauhU60MNuQaBnBVcj8n7qRyT5NanmjtTHeh1GbFEAGQyc84JE9WblFxJc8aaCWlTFrngrQuKi0Haa05ihV3vdmTls5jgazDkxgxv6Qe4TQW7mhlVLOGYVokJXcMS/rfsWWY/iXJ4I73D+vHPmzZPPyW/iMdE5vayhw3ep5uBFmPEnf4mTt6wSVAyfsnTb1u9K1Y8M/J7Ovk9l6KKiGpx/fkHlafHu/0ZbogsaZctqY/7TI+mwW1XgYqiKRlxO43lIOxDtnLNUMzfgbCWrzkwj9bi+/P1pJ2JuTEVUgygg5y/dG8NEN3ML3B1+Y0JOnUP6Geg4lTZ7M4PeNS6x1WnA6YCvLW2kLenrZqHpRPXvQDR08cbV7xABapx9rNT7EHGHhNIhbUsib0bTD9CP4q624xHWH1cdjdYsHJRIKE1g8r2kRTArzxAuSXzAOMUY59xzuEBewtFqYAv4hw3bIW3cXWhCNsMwIMUclkiRi4DyvMVHjxwAsJ46CZ9LDeX+DXSKC9BeygMqMKxsau68QxU6yfC5vrHVaMKAlmY7FxOmIcIZXTr/JAnHDHXor3NYun3oDr3wT0E5lW6W3MQcO0FgbbLGE2hMUaire5JidFeDMua3J2xBuxMaeN90TNVns0/UDOUcT9secZXAM4DcB3ICYryHf0ma/g8h2zvzz46AeOocQhOivUTB7qSw8xN9rBgnopbIxoNIWJ8hRsLHCwZKAD3a0U5mLGCxx5wCE+aqCMKp7EsAFknPLHmicO6H0a+cwB6tV/FDZtFRYmRg8Im3TRmD6g52yN70cTBVvJDpbSmtM6gtWMIE6Qqs92ZyDzmhI19UaLsMNe0ZDHdXCeC7m5IY2/S2tuH0ZRn2fHUBS4epqE3Q+iJZLcRKxmKGpeRM1m9YOp6C6ntWosbstyam42lloZTS2bj1tYTWyfs15kcx2jWT7p0WY3cqCtStOCVjNO/6QhmVns7XYl98K9dzatyeIR1m8UX3f4//d1M3ne7rppOdvdZ7Ny4W1j98fXfgVbe1E7ay9ua+0lSWvPPwucx6VFu+u/iIuQs1r/CUM7xNc/la0/SG5sY/1qWVArgL3SsaAM9kqeKTHVywAoG3ZHkO+OoAuN1IYS/q6kGVislygOgulqV9LzpDJmupZJsCGCEbVAUbMjfwJ8G9ukXTyUtdo1Z8WKaS33kmTgpcCYL1yIFaKnYwYkXn5YywHpG0iUyDdjRctzsLJY9NILHSy0FMcHmvL5WBsC+JDOhvhcebYLc0fQpGdF+FNcyVIyinwhfiHdAPKReKy0zorBKbOVjqLn6s8tpOfQcxfqz9KBC/Xn9L10LB1Khy7U6+mQhXpUjy6k5+sNnPcfMAmmf5IMUkw6YfU1C7OXxTFUgLwfSvS/Z7JEIOJHC2M1BOGT+Doqe8yKV8orQYM4hc/8KcPGfq8/gswRteV2wtiG1DzxJMCqr9HkxTdYH1NYx+oY8ijF4jBAGMblEX0lQb7hxzw+8MKNy4aMQMSN2NR79Mbbh1/aWFIoC/mhmwbufuvhjtN6PvNBIFeOIzFctfKT4V/ewvFY1mHL98N/XDVifQ0V7yrrCHiMXV9QwNA6+LYQZfqG9XgDvygkDSPlrbu81bQgK5E5vdE73ajKjaa6fZFI283eTOC26Pj+AoXsaW3fcg2TqM3ryWXr6dZW1/n/ejFMirZsP3+TSc7TlmPq2Gwf8/UMhPVktr2erLbWk928nrR2kROXjC3W9D9cGp6+pkvjhrForMkJa/IBD1/eBtXcQTUtrHlsaM/E6xmNJaIR44Nd7eMD8DMcLIcYXzjGzdN8WNQnt7tsvqdbrPpt2MenL/kKtmkF3vNtzgE704mVvi27vlMSXd+pRtd3VLA6WSzw9M5vljZrbv92GHZtcxO4JDfbt+RBuO94NqfSRwYn2c0Ndh7iw7Gcoq95rE1avKVJE5yhEObTFMNmYiXIrDck3t90+iiRBxup8zsq6Se/03+jzg3wT//NpOpHf3zhxR/01+l7986ecx+vC14J9Jsle0gpdvCxVbkIt06xJktqnrhYamcT5lAQm11N9TZzPmiyHDiZE2QtIGY+bMRpjGLMKQXJLHk9rLLPpmguf8SoqVU9EbVQiZqdXmNkTTy+4vMSX3ITX20Nqa2Jh6KVlT88s+PwLXT0X6PDteKOFUt6zJikP7xmUt8pi6Wunx3f/ejcjyMX6V/f/ujOstz7sqvHDh1O89YP++T8K2Y8upmVwwOvsp5s0+dgHxWTarKF5z740KkyjB0nurJdzV3ZVbmueFd2J4aHEoC1xOjKNmIu2JVdwru5pI4hVjmthZCJCR/aU6JogQKwb7PA0t3jyi0sKkbtrXoVVqIjYomON4s3ajs9pzdqt1GWw+O9bbVqyz/sbdGqfRMKOe30fu25r7Vo1jb1xdDwJUbLdgJXH7PapGrMjjXjqqg9XJW1xlXAjgVLp+EqYOCq9HRcxXFU1LGymuMoml4VZDvwf4OnpPIltl3bx1Oipf0BLofbQ5TR1S6OSOxtA1eyDLgqA5lyXzKuKtvDVagZV7UMV2x+6+m4KjdwVW3gqnMSX5Un8dXTyFelZZVxpBWX/K+R1hxfPxsGW8eVxLQ/ZTFpMtcaJyvjXNaMOzfgrob0IgeTcdelPdz1iOMOyz9LwazuVFoFwqgIzereDJm1WDEaUmtPx2etqyHATWvwhmoZcqNSebcQR29DBQ8T98FgfgAkmCu3tArzkV70R1PSEaU90jErhDjlxXQMrVqVC2hSgxV4auCskNxWvP9s8D2plWnu/HPEL0kyzE92jGNfMvb4G4D7IvBbwuTpZOx3aA/7lQnsAwarw1qBDfOSVK1hmMeZ58Wnob0+UIwRriIHfsgZuoJjXPW61DB+uRo+qw5qYUeTVgufVxcx7FtYz1uYS8rKtjB/VgwdTsYthtHax+/Uo4sSGL3xaPtInX7w4MkyQxjchv6AgU95EJOZdaQfeeW/k5ogCBq68WRGn2BD0Ehm9P8TSQr+QEMXztFdXFpPeBfi70KtpOwAeNOzC5eultog9x/b5OU+3eAo1PG/lbDt1cKdhdCtOC138mcCWDK3zqeIpOupH+SbpKEsY9+XPEmiHTFiVRLWQiJLqyP60RYFCqi9Qw3dsjoC5tXOYa2biU+p6sdwHQRcB0+fuwKOeS3vQskGVu0aUrNdWne0WgG3/eG1FmewuDqG0NHKVjRPGbx2d9dnpTG3jABCeSVmlhIlBWUM492wFNfZbikub/dtNWCi5DS80/jEia7ffPyPyRMm37hPMP3jpTlPhXo/ddWRb2PdBLpt6+Rbh/ar3bd6xTt9u3x2/87nGq8cf/4jFV/NXy7sFejJ+Ytnr6LV258YMe2Gq4e65VV7Lhwy+GL95NfzTPcdqAuv6jh0/GUXzHhyw6ArRkb+PotaTHk3bnmc9WTrA9gslLbyPfT/lO9J/b/le9jolLZqvMFpEFrne8af+OHFX6TkGSomPbb7x+N0ZHKyhw1U+fzBpGkqqz+kNbENLbM8Ip9BYvoCPEaMZc1oPYWkAMz8HD6FJEdMhLVwCkk2m0KSaxj5GNmyoc7xp7OahKdxGklGJmtkMrv/u4EkzFY881SS29BKVM8wmkR6FezD2DPx+SRxOD9hs1aKyOQ/m7ZS3M60lRJj2gqDLz9QxAeu1LuUgkK2af7LmSvMyDvz4JU7eYSy/fEr9PV4rQKDUTYzGDuQWa1hLAEYAxzGAMJYloAxn8FYYMBY3oKWBcoznJY5eZyYAGxW9n8DbMI8OzNN7+GG2dQzUFX8jptksbUGYSWDrm8CzDiZsZQsaQ01gNqQzaHGqQD+oFoU1tLBBigOxV1FREFWqN5vQ52f6WDjAbBFrdTRVJ9TWmSpSAzsz8R+Ums2qwurd3olfEaaWsp7Ta18/MEZ8ABaPY4CNsu+TTRce3ShgQE69WibSPjx4MHYKk76/2CM4NRz4BiPAbtI4jkunjujRo7rzxNn57LEWaOpEbbMiV44UQVk5T0gMPuZXm+ZN6NnnTe7p3EfL9CFq0kvJOXN3oRfIdMvLfNm9L/Km9UYebNG6XujWCaNLZrlzR7BvJzpaSNv1tfIm7HYjpW3FFlCrBP0f5M5u+xoemPuUelfBw+ecDPI/sViNANP/SBVm/4JdlQlmWNMhS4CXqsIYmyEDZ2R+ESVqiTjiPXFYCNvGtccpWC/7xEdXn+uGbkqS1F9wFUVYFeqJKKKiiabsY7FHbXZ/aizFUXzGmPS2DNM6sDEMZUWw++6XIoNhWnuVmNDWBPtQOp9/7L7aiTriP76p0MoKb24Y/cL7uj10ZBXx07RP//gI72p8aHVtz5euGPu0h303a9p9qDupplq34cnrU8rSHnI07fq5kmzpuj/fPDjf+uHaPpflh36+sm7ul3IngvAZrCAb4TRmVvbmcICRriWCS5QUWYA9pXfeKILPcJGsggutRSsmAYvtwi9wYZSfuRmRYc4wCOHDfBoyOV+D+5JOwVOkVMDzH8MYKVhKT7GRvW2M7xFbMOTaTnQZWbrwqXWA15MmS1TB8BtbN6L6XPiJOgbnmNkDtKS9Es8n9U8VS2Rz/Iwby2VZQ8bJJfdrRj5gRbTX5KCKG2OgLkf9/H77cyBkfaiQuyWNA0mvuaPjRzcOW1OqTljDq5BsmfnsBYd8NZz8/50Yg1Td22PrTnA1Vx7w2uEXUnxC7ZuGaup00CXX2CsOzNJ4scVuB+z0ry6N55/8ydwnaPskVzgHNj5yC5WWXQ60lsGF9pEfD0XSGvbQb34maG13C1m8cThcAMcAfBnlxpwFMfh6AiyIyuoeWG35HqzYLcozXm4AvZkRjWAuyWF75GUYDxSUODSOnCIVT9+gVeWsYScH4WMpNiz2CAWMEol9pQCjO2lRE6DvV2fv000rGq1bTq1h4/jSbsnpiQjRTJ48g3iZNN92Kxle3y+T2K0TwrLwaW2yMG57U31KW7U4IojMX8RUFBfaEmHk/lwMj+IOTmeiFMw3Gv3Zbe50RL+dxxOVNctYF1z9ME4dHT70dYAfgUaOqWZdz9m9RUiOZc0SJVS1NBNVcSYdcbaMyxsGpHVxqfqS0dw1CLqI1uo+TmGbBmoj0Bjx3YdOHBAGLFvnz72jTfE8BtvMH66QSqXnjNyc1PiubkkW/7PcnNpmJt72iL5FH88OafZWGdHcnpOy6lmyTnNbIskmMZIz3EUNqfn/GGudnzNAy1LCxGVXSZXDbplyqgxgM/w5eUDb7ly3OTGDmUyPT+nX/GaO59K7xJYs74wX+aoTfNufG/Qd2sQvYprw5vn/rxx9KZq4QGX+8ud+vUOOyB62Jogy1uwmTnAPx6SjjMV25mak3HmqTmZ8Y4jry+C5m29kuZP5z38fz5Ch4npVnN0rmOpu9OG6Uj/SeTu+Lpf/7+vG1Nn9YrXx9fLHiHlcGtpLJ1xxnWzHF/r+T9jeXT5tJWLPyflivjaf4G1Z5Np7a4958xrz22F8wbAeWZ2AumqQ9HSM/4UiIS4bgWIUWvdBglymnODHI6nAQ4/aMQFrSHxoRGZEda8WL4fagYsOwGYF0MwfkcrCNUsPJ3uYEX/WY5koFExpaNPochnARpPHraCbDymD08HK2DkD9mcIOArH/hHPU+fFJSVmBSEaVcZC2w5ls96ZhAz99sdHGQ4AaeND5IeTeKfe/RxUtiY7ToiaSZd0jg6lSZPpNMEdyjUeh4dexYzn65rTKLT5Oz4+KnW83VbzaK7p7H27gltjKIzPxvb2X9g+7PoRAO/T7Nscg52xfuRS7LCWhpwSWboNITn4jixeObYhDhHJ1M2GZ5nJvAEECMPwwxpYNfaFIq2fiZQQWLZ+bMnTLz6sj3a6DrOSmiDNH/n9SI4K+UH8wXsuX/FZBnvN2OTghOP/8OnyrOnC/HaD/C07Sk+iWeHqVqSeA6g8fi/VKbPoqm5bNCw1VqhukJw4LRWMF8I69w1n8Sm4Kj4EENWPpcbATWjGN2pxuMam0tMA8ZTH5KH8U2htccGrLtAvD1RdDrt8iX9jumHGl95vMeNXXvc2P3x/UJvWk2t9HyH1ShFtdnp+dR65GurVVpksX/1vmGfyX9IQ0kBqSYRsp5E89GjyQxjJEX1hJhWBQmAD0BU60INodR8hD3U/CTtQjurAEIvxeXGrAOGD8NG1hkfoV1WiDOb8ll/gmbOgdewuz7V5snkwtsQ2yX5AL8f0aKlwXe0ylBiLCHXvO3HXVsZ4MXx+ANq4CUHe/d5eUarCMTSN/r0PrAo2TIX/fGIDFPFMyeMvzo5IDF13LipyZb65OaYG69dcDBf30Uublm9gHEEZ1iz2fBBnqxUG71/Lh3N/KlUOIQdH9jigh3hPvNYe9Fg9ub6hl9ZoXFSdUOdUWtMyS7pa1Ex/QDrqmDPmzaF8XHPrPGYBTcaTKzlFuMbfESbgWxDteziukT6OlFuDddcLn0h9jD9BrrjAsJmHYPV7pKdsK1FU3z0aIOH2+ceph0abNwsZyP6PFg+ymSXy8kcfk2Ujfaltqzw5a091BMtHdLkGRGkxQSI/8tnjwsrpG/FQvjMf9rcieYhBo9LPYUVW3E2/xphhanxT7+/xtTF+P4w8SS9kD1vPfEMbkvzM7hNxjO4TZRzAf61Jyz6ht0/vrt48ll6pX531Hhuuxg7w3XafWZ798b74Q9Hvvay/ohxnVOUXkiOnfUzwf2e+HVOUfMvn+nfAqsDTMIWthaMRiG3yWFjQWDiM2Ofw6aaON/bjacUGWBiK7VoPLU2AXI4AfiyJOANFOA9Y8IDf3pP3ozD7mkz7mmAgveU4w9siqMnnADu5yREGeiCe55ShFvp/7N7clQ23/M9+PmJDnjlWV2jQ/bCb1YLJPiFUvEL8BXBl7IHGyRGH+OFVUfBnrOwIQLGC9ZJndbXvXLWmLGzZ40dO0v4pPuoWbNGdb905tVMfu0A+dXInseO/toAo4dCsoRZ9b1msoZCSU9ndyTbt63Dic1PRDMEFX9u+++NnzUeZv8QnhlkM8CDfeIBQlVzXBTZ+HMw8Domwgfv80dSi7RwhjF3RsiJj5thdZ6bBU/L66hCyLhU83UoXsdoRx91evs53wMXgE38PnvW+B8kWkr4ox1Zp4NqD2OsCHR4A6GlNiezjXE8XBbcSmIn/GHWXeIL1aeU2nBeXEVQFcDcxEdBYBrSmwMYzBDQHMjIsmIPelTIwHcCdg1IIbSRkEc6Jj342okPvnYaD77+9YuXL+fPkElhD7524oNh9v572P5v8MHXqt1V77A7PWBnuOpTXSmeiii8TXpaMpxjT0t2pOKAULsj1ZX0tOR8lv7kY+cLcfR8iydFGyPLzHLzaFdSe8H69etp1rfdru/r6Ty7y/pd9EfdCz9ZgrRrQ2RWjafLgh7f6l/RL7au2Jr6P7TQlXqfy/P2bgXemla9pSjbUl008D63iSeLm6Rx7PlEfpyGypp2rM5wGGcweBlDxOes4PPLLameUCjEZsLIwDNMsbT95CIUM8ABDX6uivysf6chtXlujAvdEZvTCIUF2IR9qoTBxsTZx6VioWhWJtPFd46hPa7bIT9w9RXy3eF7ZdOYiy7SI/R1PSJk6DfS22Lf0pGC/iidLOh8PgsGd7pIXVCvdFICCh6fQP8kGzba++y5AVnkW/7kADWdx4w1JSOceHyALYgJAkeYdVGaeefJnz9HwBjxUe+yZqVUcFM0iDF3dLziHGWzIkdZbZyjfhzyajbnKJtLdexXrS589NC/Xn5lDOMos6veYrZ6sEUR+AWfvw1vkzgKzjGOstiRo8wWuyMxcjbdx2fnt/8gA0Czkr3z/Rf6LRlVUDu/1/WTP/igUTjvgPjY+uufPpiXe78vd8qM69nzDE6O4hkPAZ+7IJUa+Lu2Jf6SHr4AZk1GuN5rlQELTuMBdWeHvXSepOCeqs+YipB4NMOZYWn9YAbhlraezXByFBtND5wBsMibGSxBEqYhDo1WWW3Mp69XMso6FfkZUFFPegVwPD48DtiiOIwOuprHq3rODjCc2JYZ0irZ3L5oZRV+VlkBX6uqxMMqnMFTyZL99a5AGPBWbecFP3ZW8BPnnoIAck+goCX3pGBwtmi/CWtg8pLYJ89Vn58XAPYpctUXFhUA+8DbJPaBc8g+0fzCIjazOI8fcAaqiqNfq65kjhGQoeCsnpAR+C+IRPU2ObA11dplSYOO38fpSHa3pmMU6BgOtyAj0LCA0zA3pFlN4NB3Cv3/QEx89JBBv1bYZNNXyf8bDAqZZ8X37WyE/w/CA/FiAAB42mNgZGBgAOLAu85T4/ltvjLIczCAwLmFK7hg9P9l/wTZE9l7gFwOBiaQKABFOgvKAAAAeNpjYGRg4Cj/uxZIMvxf9n8NeyIDUAQFvAIAlVEG1gB42m2TS0hUURjH/3POd+4NotKwFmYRVvQAzTY5JDaiZrbQxDazMnQGR9QeE5JCQWpCPqa0FyQUMUoPtVBiLG0hRC+iaBO0KGhRmyCJJFyZTf97nWIMFz/+3znf+c459/vfo6ZRvAyAZ34BtQ4j6joq5BdKpA0nzAfUMS7whFCh7qBDjcLSTciQbpR7riBH7cImtRlRXYkUaUeYNY9JNQmSXHKDdJAyUksOKYOoWoGApGA/x9ckB536LfLt7TwvG2lmPWImFSfNPsTkPhniuAktZhwxVYQpqUeh2cL5SsRsm7lxNx82GxNaxtw8zxpDpqnHZbMKa+1U7KYWymekyStUq23o1eXYSl2u/cjXgxDVhkqpRb1E0Cs+fkMENZKHgHoKL+OgM68EN9Xq+JSko8+Jrd9cG3GpTmiNmqLuxBH1DJkc94iFbGslshwl6aRKTcDnmcModY05hla3/3Pokxo0yDBKzBj7/hEbPD9xUb6hSs9j2CqGX19Fi37Be4Vxxum9O/cQp9QcWuUAAjqIZt2I4+oCzvLsfv0dPpWBKPdvVlk4rG+59UetPExY98gsWvVsou9LYLfHpx0vXB+SUEXxT44X1Bny2gSw458P/yGl8Lux40USrheTGJTn6HL7vgTWE+xxvaAPySgdn1Qa/dQ35LY8QGmSD4u5xP9sIe5ZhOPFAPodte+izt7LNbyTfocRco59gh0B/qrqoEdfSOECmKG2UxuYc95BAtOJIes0znsGUOES5dv5Sn6Q9+QRukyQnrBWhdBI/M6+UoCDRhASL2Pnjb2E184l3fD+ARhq1KoAAAB42mNgYNCBwgiGCYwlTAxMc5gtmOOYe5h3Mb9h0WMJYilgmcCyguULqxxrCxsXWxjbG/Yk9j0cLhy7OB5x8nCqcLpxxnAe4ZrCdYxbh3sS9wUeHh4nni08b3i5eP14e3g38XHwufBN47vFb8e/TEBNIExgksAuQT/BBsENgveEuIQUhIKESoT6hNYJmwjPEv4nkiFyTlRBdJ7oMzEBMR+xDrFF4nziYeKLJFgksiSWSCpJVkgekfwgFSbVJnVC6pt0gHSO9BEZCSC0k1kjqyS7So5PzkTujbyE/AEFG4UYhRaFRYpRimWKh5T4lNKUXijzKScpT1PeovxBRUwlRqVO5Zdqn1qU2iG1f+pW6lXqHzR8NA5oamju0GLS8tCapvVOW0rbTbtMe4OOgE6XzjNdF90legZ6C/QO6XvoT9C/YaBkUGWwzZDJsMKIz2iJsZMJg8kK0wwzBbNV5nLmEyy4LHostlk8shSy9LG8YOVntcKaxTrD+pNNgs0EWyHbPNszdgZ2s+ze2HvZ73CwcLjhqOLo5zgNB1ziuMnxgOMNxw9OIk4WTlFOU5zOOXM4WzgXAOEU513Ou1zKXO65vHLtcv3gdsW9BAB9hZBGAAEAAADqAEYABQAAAAAAAgABAAIAFgAAAQABVwAAAAB42l1RzUoCURg9V82QrIWUtWgxq1Y2jpYFBVFERSAuJlGICGZ01EhnYhyLVu6jp2pV0AO06gla9gCduXM1x7l83z3f/7nfAFgTCQiE36yOfBFOShThFPJTnOa9zqhIZWgdYUNhwayGwglGrhVOzuAUzwQvoIBbhdOseFF4Ecd4VTiDLD4VXsIqvhTOYgs/Ci/jRuQUXkFduArnsCneFH5HXnwr/AFD/I5Nz/YCTzOd7qhv+VrTsTueG4xxDg8uAmhow+JtEbXoe8AzfNyhi56MXtDn0erDoVWGgRK1jrGUBr0+hswPu2mM6RRDZu1SDqc1O8w2mWVTAorGmiF1ODdgD4s8HAx4+7inz0Nnbroes+KRkPkAp+Tsy74BtSUZRTNDlgH9IcsqYy16XNoOp2oYEbdlTsilJ196wk1YzIuseE2BnvmXhzsx5M4CVh6gyPMkj84+/7105vvkXSTz2Z5Deqq45BvOUMMV9bbqGd+aydwuGfflppq0bG5q8i9LsqLOSSNaNfofeWvYl7EKeZWxR11h1vTP/AHaE29oeNpt0DdsU3EQx/HvJY6dOL33hN7Le892Ct0mNr33TiCJ7RCS4GAgdERCB4GQ2EC0BRC9CgQMgOhNFAEDM10MwAoO78/Gb/noTrrT6Yjib37XUsX/8gkkSqKJxkIMVmzEEoedeBJIJIlkUkgljXQyyCSLbHLIJY98CiikiGLa0Z4OdKQTnelCV7rRnR70pBe96UNfNHQMHDhxUUIpZZTTj/4MYCCDGMwQ3HgYSgVefAxjOCMYyShGM4axjGM8E5jIJCYzhalMYzozmMksZjOHucxjPpVi4QgttHKdfXxgE7vYzn6OcVRi2MY7NrJXrGJjp8SyhVu8lzgOcJyf/OAXhznJfe5yigUsZHfkUw+p5h4PeMojHvOEj9Twgmc85zR+vrOH17zkFQE+85Wt1BJkEYupo56DNLCERkI0EWYpy1ge+fIKVtLMKtawmiscYh1rWc8GvvCNq5zhLNd4w1uxS7wkSKIkSbKkSKqkSbpkSKZkSTbnOM8lLnObC1zkDps5ITnc4KbkSh47JF8KpFCKpNjqr2tuDOi2cH1Q07QKU7emVLXHUDqULmV5m0ZkUKkrDaVD6VS6lCXKUmWZ8t8+t6mu9uq6vSboD4eqqyqbAmbL8Jm6fBZvONTQVnjVHT6PeUdEQ+lQOv8AC8SeyQAAAHjaPc0rDsJAFIXhDtMnfZcqEtJpEIhhAyRIWlNDUJ2ERSAIGoMD1nKLYndwAtNx5zvmf7PPjdjD6sjf9wNjTzW0ruxrylRH5QHjqhbkymNvERcNcbkjWzQvfprIHxzAHuECzlnDA9ythg94a40A8IXGFAiqPxiFuhHhDTcTOfD2AsZgNDdMwPhumILJ0jAD09owBzNhWIB5ZTgDi9VIRaX8Avy5TVYAAAABUnv3igAA</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="355987109" offset="0" length="395" />
        <PacketInfo time="355987109" offset="395" length="25020" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="181" hostname="www.advantageonlineshopping.com" path="https://www.advantageonlineshopping.com/main.min.js" url="https://www.advantageonlineshopping.com/main.min.js" ip="54.227.55.203" port="443" connectionId="25" origin="ExtraRes" frame="1" startDateTime="2024-03-14T16:56:31.057+03:00" startTime="356001953" endTime="356001968">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="User-Agent" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly93d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>X2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMDsgX2dhPUdBMS4xLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>d3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS9tYWluLm1pbi5qcyBIVFRQLzEuMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjANCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNClJlZmVyZXI6IGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS8NCkNvb2tpZTogX2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMDsgX2dhPUdBMS4xLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjANClNlYy1GZXRjaC1EZXN0OiBzY3JpcHQNClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW4NCkhvc3Q6IHd3dy5hZHZhbnRhZ2VvbmxpbmVzaG9wcGluZy5jb20NCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="_ga_TBPYED8WSW" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjEuMTA0Mjg5MTkxMy4xNzEwMzI0MjUx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_gid" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga_56EMNRF2S2" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>0</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmdpbngvMS4xOC4wIChVYnVudHUp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDo0NCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMTE0MDU5NS0xNzA3OTAyNzUyMDAwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxNCBGZWIgMjAyNCAwOToyNTo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT02MDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxNDowMDo0NCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="vary" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YWNjZXB0LWVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KU2VydmVyOiBuZ2lueC8xLjE4LjAgKFVidW50dSkNCkRhdGU6IFRodSwgMTQgTWFyIDIwMjQgMTM6NTA6NDQgR01UDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiBXLyIxMTQwNTk1LTE3MDc5MDI3NTIwMDAiDQpMYXN0LU1vZGlmaWVkOiBXZWQsIDE0IEZlYiAyMDI0IDA5OjI1OjUyIEdNVA0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT02MDANCkV4cGlyZXM6IFRodSwgMTQgTWFyIDIwMjQgMTQ6MDA6NDQgR01UDQp2YXJ5OiBhY2NlcHQtZW5jb2RpbmcNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANClN0cmljdC1UcmFuc3BvcnQtU2VjdXJpdHk6IG1heC1hZ2U9MzE1MzYwMDA7IGluY2x1ZGVTdWJEb21haW5zOyBwcmVsb2FkDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoKIEFuZ3VsYXJKUyB2MS40LjE0CiAoYykgMjAxMC0yMDE1IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZwogTGljZW5zZTogTUlUCiovCihmdW5jdGlvbihSLFUseCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIEIoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9YXJndW1lbnRzWzBdLGQ7ZD0iWyIrKGE/YSsiOiI6IiIpK2IrIl0gaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuNC4xNC8iKyhhP2ErIi8iOiIiKStiO2ZvcihiPTE7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyl7ZD1kKygxPT1iPyI/IjoiJiIpKyJwIisoYi0xKSsiPSI7dmFyIGM9ZW5jb2RlVVJJQ29tcG9uZW50LGU7ZT1hcmd1bWVudHNbYl07ZT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLnRvU3RyaW5nKCkucmVwbGFjZSgvIFx7W1xzXFNdKiQvLCIiKToidW5kZWZpbmVkIj09dHlwZW9mIGU/InVuZGVmaW5lZCI6InN0cmluZyIhPXR5cGVvZiBlP0pTT04uc3RyaW5naWZ5KGUpOmU7ZCs9YyhlKX1yZXR1cm4gRXJyb3IoZCl9fWZ1bmN0aW9uIEFhKGEpe2lmKG51bGw9PWF8fFlhKGEpKXJldHVybiExO2lmKEwoYSl8fEgoYSl8fEQmJmEgaW5zdGFuY2VvZiBEKXJldHVybiEwOwp2YXIgYj0ibGVuZ3RoImluIE9iamVjdChhKSYmYS5sZW5ndGg7cmV0dXJuIFAoYikmJigwPD1iJiYoYi0xIGluIGF8fGEgaW5zdGFuY2VvZiBBcnJheSl8fCJmdW5jdGlvbiI9PXR5cGVvZiBhLml0ZW0pfWZ1bmN0aW9uIHAoYSxiLGQpe3ZhciBjLGU7aWYoYSlpZihHKGEpKWZvcihjIGluIGEpInByb3RvdHlwZSI9PWN8fCJsZW5ndGgiPT1jfHwibmFtZSI9PWN8fGEuaGFzT3duUHJvcGVydHkmJiFhLmhhc093blByb3BlcnR5KGMpfHxiLmNhbGwoZCxhW2NdLGMsYSk7ZWxzZSBpZihMKGEpfHxBYShhKSl7dmFyIGY9Im9iamVjdCIhPT10eXBlb2YgYTtjPTA7Zm9yKGU9YS5sZW5ndGg7YzxlO2MrKykoZnx8YyBpbiBhKSYmYi5jYWxsKGQsYVtjXSxjLGEpfWVsc2UgaWYoYS5mb3JFYWNoJiZhLmZvckVhY2ghPT1wKWEuZm9yRWFjaChiLGQsYSk7ZWxzZSBpZihuYyhhKSlmb3IoYyBpbiBhKWIuY2FsbChkLGFbY10sYyxhKTtlbHNlIGlmKCJmdW5jdGlvbiI9PT10eXBlb2YgYS5oYXNPd25Qcm9wZXJ0eSlmb3IoYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJgpiLmNhbGwoZCxhW2NdLGMsYSk7ZWxzZSBmb3IoYyBpbiBhKXNhLmNhbGwoYSxjKSYmYi5jYWxsKGQsYVtjXSxjLGEpO3JldHVybiBhfWZ1bmN0aW9uIG9jKGEsYixkKXtmb3IodmFyIGM9T2JqZWN0LmtleXMoYSkuc29ydCgpLGU9MDtlPGMubGVuZ3RoO2UrKyliLmNhbGwoZCxhW2NbZV1dLGNbZV0pO3JldHVybiBjfWZ1bmN0aW9uIHBjKGEpe3JldHVybiBmdW5jdGlvbihiLGQpe2EoZCxiKX19ZnVuY3Rpb24gWGQoKXtyZXR1cm4rK21ifWZ1bmN0aW9uIE1iKGEsYixkKXtmb3IodmFyIGM9YS4kJGhhc2hLZXksZT0wLGY9Yi5sZW5ndGg7ZTxmOysrZSl7dmFyIGc9YltlXTtpZihLKGcpfHxHKGcpKWZvcih2YXIgaD1PYmplY3Qua2V5cyhnKSxrPTAsbT1oLmxlbmd0aDtrPG07aysrKXt2YXIgbD1oW2tdLG49Z1tsXTtkJiZLKG4pP2VhKG4pP2FbbF09bmV3IERhdGUobi52YWx1ZU9mKCkpOkxhKG4pP2FbbF09bmV3IFJlZ0V4cChuKTpuLm5vZGVOYW1lP2FbbF09bi5jbG9uZU5vZGUoITApOgpOYihuKT9hW2xdPW4uY2xvbmUoKTooSyhhW2xdKXx8KGFbbF09TChuKT9bXTp7fSksTWIoYVtsXSxbbl0sITApKTphW2xdPW59fWM/YS4kJGhhc2hLZXk9YzpkZWxldGUgYS4kJGhhc2hLZXk7cmV0dXJuIGF9ZnVuY3Rpb24gTihhKXtyZXR1cm4gTWIoYSx0YS5jYWxsKGFyZ3VtZW50cywxKSwhMSl9ZnVuY3Rpb24gWWQoYSl7cmV0dXJuIE1iKGEsdGEuY2FsbChhcmd1bWVudHMsMSksITApfWZ1bmN0aW9uIGNhKGEpe3JldHVybiBwYXJzZUludChhLDEwKX1mdW5jdGlvbiBPYihhLGIpe3JldHVybiBOKE9iamVjdC5jcmVhdGUoYSksYil9ZnVuY3Rpb24gdigpe31mdW5jdGlvbiBaYShhKXtyZXR1cm4gYX1mdW5jdGlvbiBtYShhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIEcoYS50b1N0cmluZykmJmEudG9TdHJpbmchPT1uYX1mdW5jdGlvbiByKGEpe3JldHVybiJ1bmRlZmluZWQiPT09dHlwZW9mIGF9ZnVuY3Rpb24gdShhKXtyZXR1cm4idW5kZWZpbmVkIiE9PQp0eXBlb2YgYX1mdW5jdGlvbiBLKGEpe3JldHVybiBudWxsIT09YSYmIm9iamVjdCI9PT10eXBlb2YgYX1mdW5jdGlvbiBuYyhhKXtyZXR1cm4gbnVsbCE9PWEmJiJvYmplY3QiPT09dHlwZW9mIGEmJiFyYyhhKX1mdW5jdGlvbiBIKGEpe3JldHVybiJzdHJpbmciPT09dHlwZW9mIGF9ZnVuY3Rpb24gUChhKXtyZXR1cm4ibnVtYmVyIj09PXR5cGVvZiBhfWZ1bmN0aW9uIGVhKGEpe3JldHVybiJbb2JqZWN0IERhdGVdIj09PW5hLmNhbGwoYSl9ZnVuY3Rpb24gRyhhKXtyZXR1cm4iZnVuY3Rpb24iPT09dHlwZW9mIGF9ZnVuY3Rpb24gTGEoYSl7cmV0dXJuIltvYmplY3QgUmVnRXhwXSI9PT1uYS5jYWxsKGEpfWZ1bmN0aW9uIFlhKGEpe3JldHVybiBhJiZhLndpbmRvdz09PWF9ZnVuY3Rpb24gJGEoYSl7cmV0dXJuIGEmJmEuJGV2YWxBc3luYyYmYS4kd2F0Y2h9ZnVuY3Rpb24gTWEoYSl7cmV0dXJuImJvb2xlYW4iPT09dHlwZW9mIGF9ZnVuY3Rpb24gc2MoYSl7cmV0dXJuIGEmJlAoYS5sZW5ndGgpJiYKWmQudGVzdChuYS5jYWxsKGEpKX1mdW5jdGlvbiBOYihhKXtyZXR1cm4hKCFhfHwhKGEubm9kZU5hbWV8fGEucHJvcCYmYS5hdHRyJiZhLmZpbmQpKX1mdW5jdGlvbiAkZChhKXt2YXIgYj17fTthPWEuc3BsaXQoIiwiKTt2YXIgZDtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWJbYVtkXV09ITA7cmV0dXJuIGJ9ZnVuY3Rpb24gb2EoYSl7cmV0dXJuIE0oYS5ub2RlTmFtZXx8YVswXSYmYVswXS5ub2RlTmFtZSl9ZnVuY3Rpb24gYWIoYSxiKXt2YXIgZD1hLmluZGV4T2YoYik7MDw9ZCYmYS5zcGxpY2UoZCwxKTtyZXR1cm4gZH1mdW5jdGlvbiBOYShhLGIpe2Z1bmN0aW9uIGQoYSxiKXt2YXIgZD1iLiQkaGFzaEtleSxlO2lmKEwoYSkpe2U9MDtmb3IodmFyIGY9YS5sZW5ndGg7ZTxmO2UrKyliLnB1c2goYyhhW2VdKSl9ZWxzZSBpZihuYyhhKSlmb3IoZSBpbiBhKWJbZV09YyhhW2VdKTtlbHNlIGlmKGEmJiJmdW5jdGlvbiI9PT10eXBlb2YgYS5oYXNPd25Qcm9wZXJ0eSlmb3IoZSBpbiBhKWEuaGFzT3duUHJvcGVydHkoZSkmJgooYltlXT1jKGFbZV0pKTtlbHNlIGZvcihlIGluIGEpc2EuY2FsbChhLGUpJiYoYltlXT1jKGFbZV0pKTtkP2IuJCRoYXNoS2V5PWQ6ZGVsZXRlIGIuJCRoYXNoS2V5O3JldHVybiBifWZ1bmN0aW9uIGMoYSl7aWYoIUsoYSkpcmV0dXJuIGE7dmFyIGI9ZS5pbmRleE9mKGEpO2lmKC0xIT09YilyZXR1cm4gZltiXTtpZihZYShhKXx8JGEoYSkpdGhyb3cgQmEoImNwd3MiKTt2YXIgYj0hMSxjO0woYSk/KGM9W10sYj0hMCk6c2MoYSk/Yz1uZXcgYS5jb25zdHJ1Y3RvcihhKTplYShhKT9jPW5ldyBEYXRlKGEuZ2V0VGltZSgpKTpMYShhKT8oYz1uZXcgUmVnRXhwKGEuc291cmNlLGEudG9TdHJpbmcoKS5tYXRjaCgvW15cL10qJC8pWzBdKSxjLmxhc3RJbmRleD1hLmxhc3RJbmRleCk6IltvYmplY3QgQmxvYl0iPT09bmEuY2FsbChhKT9jPW5ldyBhLmNvbnN0cnVjdG9yKFthXSx7dHlwZTphLnR5cGV9KTpHKGEuY2xvbmVOb2RlKT9jPWEuY2xvbmVOb2RlKCEwKTooYz1PYmplY3QuY3JlYXRlKHJjKGEpKSwKYj0hMCk7ZS5wdXNoKGEpO2YucHVzaChjKTtyZXR1cm4gYj9kKGEsYyk6Y312YXIgZT1bXSxmPVtdO2lmKGIpe2lmKHNjKGIpKXRocm93IEJhKCJjcHRhIik7aWYoYT09PWIpdGhyb3cgQmEoImNwaSIpO0woYik/Yi5sZW5ndGg9MDpwKGIsZnVuY3Rpb24oYSxjKXsiJCRoYXNoS2V5IiE9PWMmJmRlbGV0ZSBiW2NdfSk7ZS5wdXNoKGEpO2YucHVzaChiKTtyZXR1cm4gZChhLGIpfXJldHVybiBjKGEpfWZ1bmN0aW9uIGZhKGEsYil7aWYoTChhKSl7Yj1ifHxbXTtmb3IodmFyIGQ9MCxjPWEubGVuZ3RoO2Q8YztkKyspYltkXT1hW2RdfWVsc2UgaWYoSyhhKSlmb3IoZCBpbiBiPWJ8fHt9LGEpaWYoIiQiIT09ZC5jaGFyQXQoMCl8fCIkIiE9PWQuY2hhckF0KDEpKWJbZF09YVtkXTtyZXR1cm4gYnx8YX1mdW5jdGlvbiBsYShhLGIpe2lmKGE9PT1iKXJldHVybiEwO2lmKG51bGw9PT1hfHxudWxsPT09YilyZXR1cm4hMTtpZihhIT09YSYmYiE9PWIpcmV0dXJuITA7dmFyIGQ9dHlwZW9mIGEsCmM7aWYoZD09dHlwZW9mIGImJiJvYmplY3QiPT1kKWlmKEwoYSkpe2lmKCFMKGIpKXJldHVybiExO2lmKChkPWEubGVuZ3RoKT09Yi5sZW5ndGgpe2ZvcihjPTA7YzxkO2MrKylpZighbGEoYVtjXSxiW2NdKSlyZXR1cm4hMTtyZXR1cm4hMH19ZWxzZXtpZihlYShhKSlyZXR1cm4gZWEoYik/bGEoYS5nZXRUaW1lKCksYi5nZXRUaW1lKCkpOiExO2lmKExhKGEpKXJldHVybiBMYShiKT9hLnRvU3RyaW5nKCk9PWIudG9TdHJpbmcoKTohMTtpZigkYShhKXx8JGEoYil8fFlhKGEpfHxZYShiKXx8TChiKXx8ZWEoYil8fExhKGIpKXJldHVybiExO2Q9WigpO2ZvcihjIGluIGEpaWYoIiQiIT09Yy5jaGFyQXQoMCkmJiFHKGFbY10pKXtpZighbGEoYVtjXSxiW2NdKSlyZXR1cm4hMTtkW2NdPSEwfWZvcihjIGluIGIpaWYoIShjIGluIGQpJiYiJCIhPT1jLmNoYXJBdCgwKSYmdShiW2NdKSYmIUcoYltjXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gYmIoYSxiLGQpe3JldHVybiBhLmNvbmNhdCh0YS5jYWxsKGIsCmQpKX1mdW5jdGlvbiB0YyhhLGIpe3ZhciBkPTI8YXJndW1lbnRzLmxlbmd0aD90YS5jYWxsKGFyZ3VtZW50cywyKTpbXTtyZXR1cm4hRyhiKXx8YiBpbnN0YW5jZW9mIFJlZ0V4cD9iOmQubGVuZ3RoP2Z1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/Yi5hcHBseShhLGJiKGQsYXJndW1lbnRzLDApKTpiLmFwcGx5KGEsZCl9OmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/Yi5hcHBseShhLGFyZ3VtZW50cyk6Yi5jYWxsKGEpfX1mdW5jdGlvbiBhZShhLGIpe3ZhciBkPWI7InN0cmluZyI9PT10eXBlb2YgYSYmIiQiPT09YS5jaGFyQXQoMCkmJiIkIj09PWEuY2hhckF0KDEpP2Q9eDpZYShiKT9kPSIkV0lORE9XIjpiJiZVPT09Yj9kPSIkRE9DVU1FTlQiOiRhKGIpJiYoZD0iJFNDT1BFIik7cmV0dXJuIGR9ZnVuY3Rpb24gY2IoYSxiKXtpZihyKGEpKXJldHVybiB4O1AoYil8fChiPWI/MjpudWxsKTtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoYSxhZSxiKX1mdW5jdGlvbiB1YyhhKXtyZXR1cm4gSChhKT8KSlNPTi5wYXJzZShhKTphfWZ1bmN0aW9uIHZjKGEsYil7YT1hLnJlcGxhY2UoYmUsIiIpO3ZhciBkPURhdGUucGFyc2UoIkphbiAwMSwgMTk3MCAwMDowMDowMCAiK2EpLzZFNDtyZXR1cm4gaXNOYU4oZCk/YjpkfWZ1bmN0aW9uIFBiKGEsYixkKXtkPWQ/LTE6MTt2YXIgYz1hLmdldFRpbWV6b25lT2Zmc2V0KCk7Yj12YyhiLGMpO2QqPWItYzthPW5ldyBEYXRlKGEuZ2V0VGltZSgpKTthLnNldE1pbnV0ZXMoYS5nZXRNaW51dGVzKCkrZCk7cmV0dXJuIGF9ZnVuY3Rpb24gdWEoYSl7YT1EKGEpLmNsb25lKCk7dHJ5e2EuZW1wdHkoKX1jYXRjaChiKXt9dmFyIGQ9RCgiPGRpdj4iKS5hcHBlbmQoYSkuaHRtbCgpO3RyeXtyZXR1cm4gYVswXS5ub2RlVHlwZT09PU9hP00oZCk6ZC5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcd1wtXSspLyxmdW5jdGlvbihhLGIpe3JldHVybiI8IitNKGIpfSl9Y2F0Y2goYyl7cmV0dXJuIE0oZCl9fWZ1bmN0aW9uIHdjKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEpfWNhdGNoKGIpe319CmZ1bmN0aW9uIHhjKGEpe3ZhciBiPXt9O3AoKGF8fCIiKS5zcGxpdCgiJiIpLGZ1bmN0aW9uKGEpe3ZhciBjLGUsZjthJiYoZT1hPWEucmVwbGFjZSgvXCsvZywiJTIwIiksYz1hLmluZGV4T2YoIj0iKSwtMSE9PWMmJihlPWEuc3Vic3RyaW5nKDAsYyksZj1hLnN1YnN0cmluZyhjKzEpKSxlPXdjKGUpLHUoZSkmJihmPXUoZik/d2MoZik6ITAsc2EuY2FsbChiLGUpP0woYltlXSk/YltlXS5wdXNoKGYpOmJbZV09W2JbZV0sZl06YltlXT1mKSl9KTtyZXR1cm4gYn1mdW5jdGlvbiBRYihhKXt2YXIgYj1bXTtwKGEsZnVuY3Rpb24oYSxjKXtMKGEpP3AoYSxmdW5jdGlvbihhKXtiLnB1c2goaGEoYywhMCkrKCEwPT09YT8iIjoiPSIraGEoYSwhMCkpKX0pOmIucHVzaChoYShjLCEwKSsoITA9PT1hPyIiOiI9IitoYShhLCEwKSkpfSk7cmV0dXJuIGIubGVuZ3RoP2Iuam9pbigiJiIpOiIifWZ1bmN0aW9uIG5iKGEpe3JldHVybiBoYShhLCEwKS5yZXBsYWNlKC8lMjYvZ2ksIiYiKS5yZXBsYWNlKC8lM0QvZ2ksCiI9IikucmVwbGFjZSgvJTJCL2dpLCIrIil9ZnVuY3Rpb24gaGEoYSxiKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGEpLnJlcGxhY2UoLyU0MC9naSwiQCIpLnJlcGxhY2UoLyUzQS9naSwiOiIpLnJlcGxhY2UoLyUyNC9nLCIkIikucmVwbGFjZSgvJTJDL2dpLCIsIikucmVwbGFjZSgvJTNCL2dpLCI7IikucmVwbGFjZSgvJTIwL2csYj8iJTIwIjoiKyIpfWZ1bmN0aW9uIGNlKGEsYil7dmFyIGQsYyxlPVBhLmxlbmd0aDtmb3IoYz0wO2M8ZTsrK2MpaWYoZD1QYVtjXStiLEgoZD1hLmdldEF0dHJpYnV0ZShkKSkpcmV0dXJuIGQ7cmV0dXJuIG51bGx9ZnVuY3Rpb24gZGUoYSxiKXt2YXIgZCxjLGU9e307cChQYSxmdW5jdGlvbihiKXtiKz0iYXBwIjshZCYmYS5oYXNBdHRyaWJ1dGUmJmEuaGFzQXR0cmlidXRlKGIpJiYoZD1hLGM9YS5nZXRBdHRyaWJ1dGUoYikpfSk7cChQYSxmdW5jdGlvbihiKXtiKz0iYXBwIjt2YXIgZTshZCYmKGU9YS5xdWVyeVNlbGVjdG9yKCJbIitiLnJlcGxhY2UoIjoiLAoiXFw6IikrIl0iKSkmJihkPWUsYz1lLmdldEF0dHJpYnV0ZShiKSl9KTtkJiYoZS5zdHJpY3REaT1udWxsIT09Y2UoZCwic3RyaWN0LWRpIiksYihkLGM/W2NdOltdLGUpKX1mdW5jdGlvbiB5YyhhLGIsZCl7SyhkKXx8KGQ9e30pO2Q9Tih7c3RyaWN0RGk6ITF9LGQpO3ZhciBjPWZ1bmN0aW9uKCl7YT1EKGEpO2lmKGEuaW5qZWN0b3IoKSl7dmFyIGM9YVswXT09PVU/ImRvY3VtZW50Ijp1YShhKTt0aHJvdyBCYSgiYnRzdHJwZCIsYy5yZXBsYWNlKC88LywiJmx0OyIpLnJlcGxhY2UoLz4vLCImZ3Q7IikpO31iPWJ8fFtdO2IudW5zaGlmdChbIiRwcm92aWRlIixmdW5jdGlvbihiKXtiLnZhbHVlKCIkcm9vdEVsZW1lbnQiLGEpfV0pO2QuZGVidWdJbmZvRW5hYmxlZCYmYi5wdXNoKFsiJGNvbXBpbGVQcm92aWRlciIsZnVuY3Rpb24oYSl7YS5kZWJ1Z0luZm9FbmFibGVkKCEwKX1dKTtiLnVuc2hpZnQoIm5nIik7Yz1kYihiLGQuc3RyaWN0RGkpO2MuaW52b2tlKFsiJHJvb3RTY29wZSIsCiIkcm9vdEVsZW1lbnQiLCIkY29tcGlsZSIsIiRpbmplY3RvciIsZnVuY3Rpb24oYSxiLGMsZCl7YS4kYXBwbHkoZnVuY3Rpb24oKXtiLmRhdGEoIiRpbmplY3RvciIsZCk7YyhiKShhKX0pfV0pO3JldHVybiBjfSxlPS9eTkdfRU5BQkxFX0RFQlVHX0lORk8hLyxmPS9eTkdfREVGRVJfQk9PVFNUUkFQIS87UiYmZS50ZXN0KFIubmFtZSkmJihkLmRlYnVnSW5mb0VuYWJsZWQ9ITAsUi5uYW1lPVIubmFtZS5yZXBsYWNlKGUsIiIpKTtpZihSJiYhZi50ZXN0KFIubmFtZSkpcmV0dXJuIGMoKTtSLm5hbWU9Ui5uYW1lLnJlcGxhY2UoZiwiIik7ZGEucmVzdW1lQm9vdHN0cmFwPWZ1bmN0aW9uKGEpe3AoYSxmdW5jdGlvbihhKXtiLnB1c2goYSl9KTtyZXR1cm4gYygpfTtHKGRhLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKSYmZGEucmVzdW1lRGVmZXJyZWRCb290c3RyYXAoKX1mdW5jdGlvbiBlZSgpe1IubmFtZT0iTkdfRU5BQkxFX0RFQlVHX0lORk8hIitSLm5hbWU7Ui5sb2NhdGlvbi5yZWxvYWQoKX0KZnVuY3Rpb24gZmUoYSl7YT1kYS5lbGVtZW50KGEpLmluamVjdG9yKCk7aWYoIWEpdGhyb3cgQmEoInRlc3QiKTtyZXR1cm4gYS5nZXQoIiQkdGVzdGFiaWxpdHkiKX1mdW5jdGlvbiB6YyhhLGIpe2I9Ynx8Il8iO3JldHVybiBhLnJlcGxhY2UoZ2UsZnVuY3Rpb24oYSxjKXtyZXR1cm4oYz9iOiIiKSthLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBoZSgpe3ZhciBhO2lmKCFBYyl7dmFyIGI9b2IoKTsocGE9cihiKT9SLmpRdWVyeTpiP1JbYl06eCkmJnBhLmZuLm9uPyhEPXBhLE4ocGEuZm4se3Njb3BlOlFhLnNjb3BlLGlzb2xhdGVTY29wZTpRYS5pc29sYXRlU2NvcGUsY29udHJvbGxlcjpRYS5jb250cm9sbGVyLGluamVjdG9yOlFhLmluamVjdG9yLGluaGVyaXRlZERhdGE6UWEuaW5oZXJpdGVkRGF0YX0pLGE9cGEuY2xlYW5EYXRhLHBhLmNsZWFuRGF0YT1mdW5jdGlvbihiKXt2YXIgYztpZihSYilSYj0hMTtlbHNlIGZvcih2YXIgZT0wLGY7bnVsbCE9KGY9YltlXSk7ZSsrKShjPQpwYS5fZGF0YShmLCJldmVudHMiKSkmJmMuJGRlc3Ryb3kmJnBhKGYpLnRyaWdnZXJIYW5kbGVyKCIkZGVzdHJveSIpO2EoYil9KTpEPVM7ZGEuZWxlbWVudD1EO0FjPSEwfX1mdW5jdGlvbiBwYihhLGIsZCl7aWYoIWEpdGhyb3cgQmEoImFyZXEiLGJ8fCI/IixkfHwicmVxdWlyZWQiKTtyZXR1cm4gYX1mdW5jdGlvbiBSYShhLGIsZCl7ZCYmTChhKSYmKGE9YVthLmxlbmd0aC0xXSk7cGIoRyhhKSxiLCJub3QgYSBmdW5jdGlvbiwgZ290ICIrKGEmJiJvYmplY3QiPT09dHlwZW9mIGE/YS5jb25zdHJ1Y3Rvci5uYW1lfHwiT2JqZWN0Ijp0eXBlb2YgYSkpO3JldHVybiBhfWZ1bmN0aW9uIFNhKGEsYil7aWYoImhhc093blByb3BlcnR5Ij09PWEpdGhyb3cgQmEoImJhZG5hbWUiLGIpO31mdW5jdGlvbiBCYyhhLGIsZCl7aWYoIWIpcmV0dXJuIGE7Yj1iLnNwbGl0KCIuIik7Zm9yKHZhciBjLGU9YSxmPWIubGVuZ3RoLGc9MDtnPGY7ZysrKWM9YltnXSxhJiYoYT0oZT1hKVtjXSk7cmV0dXJuIWQmJgpHKGEpP3RjKGUsYSk6YX1mdW5jdGlvbiBxYihhKXtmb3IodmFyIGI9YVswXSxkPWFbYS5sZW5ndGgtMV0sYyxlPTE7YiE9PWQmJihiPWIubmV4dFNpYmxpbmcpO2UrKylpZihjfHxhW2VdIT09YiljfHwoYz1EKHRhLmNhbGwoYSwwLGUpKSksYy5wdXNoKGIpO3JldHVybiBjfHxhfWZ1bmN0aW9uIFooKXtyZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKX1mdW5jdGlvbiBpZShhKXtmdW5jdGlvbiBiKGEsYixjKXtyZXR1cm4gYVtiXXx8KGFbYl09YygpKX12YXIgZD1CKCIkaW5qZWN0b3IiKSxjPUIoIm5nIik7YT1iKGEsImFuZ3VsYXIiLE9iamVjdCk7YS4kJG1pbkVycj1hLiQkbWluRXJyfHxCO3JldHVybiBiKGEsIm1vZHVsZSIsZnVuY3Rpb24oKXt2YXIgYT17fTtyZXR1cm4gZnVuY3Rpb24oZixnLGgpe2lmKCJoYXNPd25Qcm9wZXJ0eSI9PT1mKXRocm93IGMoImJhZG5hbWUiLCJtb2R1bGUiKTtnJiZhLmhhc093blByb3BlcnR5KGYpJiYoYVtmXT1udWxsKTtyZXR1cm4gYihhLGYsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsCmQsZSxmKXtmfHwoZj1jKTtyZXR1cm4gZnVuY3Rpb24oKXtmW2V8fCJwdXNoIl0oW2IsZCxhcmd1bWVudHNdKTtyZXR1cm4gdH19ZnVuY3Rpb24gYihhLGQpe3JldHVybiBmdW5jdGlvbihiLGUpe2UmJkcoZSkmJihlLiQkbW9kdWxlTmFtZT1mKTtjLnB1c2goW2EsZCxhcmd1bWVudHNdKTtyZXR1cm4gdH19aWYoIWcpdGhyb3cgZCgibm9tb2QiLGYpO3ZhciBjPVtdLGU9W10sSj1bXSx6PWEoIiRpbmplY3RvciIsImludm9rZSIsInB1c2giLGUpLHQ9e19pbnZva2VRdWV1ZTpjLF9jb25maWdCbG9ja3M6ZSxfcnVuQmxvY2tzOkoscmVxdWlyZXM6ZyxuYW1lOmYscHJvdmlkZXI6YigiJHByb3ZpZGUiLCJwcm92aWRlciIpLGZhY3Rvcnk6YigiJHByb3ZpZGUiLCJmYWN0b3J5Iiksc2VydmljZTpiKCIkcHJvdmlkZSIsInNlcnZpY2UiKSx2YWx1ZTphKCIkcHJvdmlkZSIsInZhbHVlIiksY29uc3RhbnQ6YSgiJHByb3ZpZGUiLCJjb25zdGFudCIsInVuc2hpZnQiKSxkZWNvcmF0b3I6YigiJHByb3ZpZGUiLAoiZGVjb3JhdG9yIiksYW5pbWF0aW9uOmIoIiRhbmltYXRlUHJvdmlkZXIiLCJyZWdpc3RlciIpLGZpbHRlcjpiKCIkZmlsdGVyUHJvdmlkZXIiLCJyZWdpc3RlciIpLGNvbnRyb2xsZXI6YigiJGNvbnRyb2xsZXJQcm92aWRlciIsInJlZ2lzdGVyIiksZGlyZWN0aXZlOmIoIiRjb21waWxlUHJvdmlkZXIiLCJkaXJlY3RpdmUiKSxjb25maWc6eixydW46ZnVuY3Rpb24oYSl7Si5wdXNoKGEpO3JldHVybiB0aGlzfX07aCYmeihoKTtyZXR1cm4gdH0pfX0pfWZ1bmN0aW9uIGplKGEpe04oYSx7Ym9vdHN0cmFwOnljLGNvcHk6TmEsZXh0ZW5kOk4sbWVyZ2U6WWQsZXF1YWxzOmxhLGVsZW1lbnQ6RCxmb3JFYWNoOnAsaW5qZWN0b3I6ZGIsbm9vcDp2LGJpbmQ6dGMsdG9Kc29uOmNiLGZyb21Kc29uOnVjLGlkZW50aXR5OlphLGlzVW5kZWZpbmVkOnIsaXNEZWZpbmVkOnUsaXNTdHJpbmc6SCxpc0Z1bmN0aW9uOkcsaXNPYmplY3Q6Syxpc051bWJlcjpQLGlzRWxlbWVudDpOYixpc0FycmF5OkwsCnZlcnNpb246a2UsaXNEYXRlOmVhLGxvd2VyY2FzZTpNLHVwcGVyY2FzZTpyYixjYWxsYmFja3M6e2NvdW50ZXI6MH0sZ2V0VGVzdGFiaWxpdHk6ZmUsJCRtaW5FcnI6QiwkJGNzcDpDYSxyZWxvYWRXaXRoRGVidWdJbmZvOmVlfSk7U2I9aWUoUik7U2IoIm5nIixbIm5nTG9jYWxlIl0sWyIkcHJvdmlkZSIsZnVuY3Rpb24oYSl7YS5wcm92aWRlcih7JCRzYW5pdGl6ZVVyaTpsZX0pO2EucHJvdmlkZXIoIiRjb21waWxlIixDYykuZGlyZWN0aXZlKHthOm1lLGlucHV0OkRjLHRleHRhcmVhOkRjLGZvcm06bmUsc2NyaXB0Om9lLHNlbGVjdDpwZSxzdHlsZTpxZSxvcHRpb246cmUsbmdCaW5kOnNlLG5nQmluZEh0bWw6dGUsbmdCaW5kVGVtcGxhdGU6dWUsbmdDbGFzczp2ZSxuZ0NsYXNzRXZlbjp3ZSxuZ0NsYXNzT2RkOnhlLG5nQ2xvYWs6eWUsbmdDb250cm9sbGVyOnplLG5nRm9ybTpBZSxuZ0hpZGU6QmUsbmdJZjpDZSxuZ0luY2x1ZGU6RGUsbmdJbml0OkVlLG5nTm9uQmluZGFibGU6RmUsCm5nUGx1cmFsaXplOkdlLG5nUmVwZWF0OkhlLG5nU2hvdzpJZSxuZ1N0eWxlOkplLG5nU3dpdGNoOktlLG5nU3dpdGNoV2hlbjpMZSxuZ1N3aXRjaERlZmF1bHQ6TWUsbmdPcHRpb25zOk5lLG5nVHJhbnNjbHVkZTpPZSxuZ01vZGVsOlBlLG5nTGlzdDpRZSxuZ0NoYW5nZTpSZSxwYXR0ZXJuOkVjLG5nUGF0dGVybjpFYyxyZXF1aXJlZDpGYyxuZ1JlcXVpcmVkOkZjLG1pbmxlbmd0aDpHYyxuZ01pbmxlbmd0aDpHYyxtYXhsZW5ndGg6SGMsbmdNYXhsZW5ndGg6SGMsbmdWYWx1ZTpTZSxuZ01vZGVsT3B0aW9uczpUZX0pLmRpcmVjdGl2ZSh7bmdJbmNsdWRlOlVlfSkuZGlyZWN0aXZlKHNiKS5kaXJlY3RpdmUoSWMpO2EucHJvdmlkZXIoeyRhbmNob3JTY3JvbGw6VmUsJGFuaW1hdGU6V2UsJGFuaW1hdGVDc3M6WGUsJCRhbmltYXRlSnM6WWUsJCRhbmltYXRlUXVldWU6WmUsJCRBbmltYXRlUnVubmVyOiRlLCQkYW5pbWF0ZUFzeW5jUnVuOmFmLCRicm93c2VyOmJmLCRjYWNoZUZhY3Rvcnk6Y2YsCiRjb250cm9sbGVyOmRmLCRkb2N1bWVudDplZiwkZXhjZXB0aW9uSGFuZGxlcjpmZiwkZmlsdGVyOkpjLCQkZm9yY2VSZWZsb3c6Z2YsJGludGVycG9sYXRlOmhmLCRpbnRlcnZhbDpqZiwkaHR0cDprZiwkaHR0cFBhcmFtU2VyaWFsaXplcjpsZiwkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZTptZiwkaHR0cEJhY2tlbmQ6bmYsJHhockZhY3Rvcnk6b2YsJGxvY2F0aW9uOnBmLCRsb2c6cWYsJHBhcnNlOnJmLCRyb290U2NvcGU6c2YsJHE6dGYsJCRxOnVmLCRzY2U6dmYsJHNjZURlbGVnYXRlOndmLCRzbmlmZmVyOnhmLCR0ZW1wbGF0ZUNhY2hlOnlmLCR0ZW1wbGF0ZVJlcXVlc3Q6emYsJCR0ZXN0YWJpbGl0eTpBZiwkdGltZW91dDpCZiwkd2luZG93OkNmLCQkckFGOkRmLCQkanFMaXRlOkVmLCQkSGFzaE1hcDpGZiwkJGNvb2tpZVJlYWRlcjpHZn0pfV0pfWZ1bmN0aW9uIGViKGEpe3JldHVybiBhLnJlcGxhY2UoSGYsZnVuY3Rpb24oYSxkLGMsZSl7cmV0dXJuIGU/Yy50b1VwcGVyQ2FzZSgpOgpjfSkucmVwbGFjZShJZiwiTW96JDEiKX1mdW5jdGlvbiBLYyhhKXthPWEubm9kZVR5cGU7cmV0dXJuIDE9PT1hfHwhYXx8OT09PWF9ZnVuY3Rpb24gTGMoYSxiKXt2YXIgZCxjLGU9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZj1bXTtpZihUYi50ZXN0KGEpKXtkPWR8fGUuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSk7Yz0oSmYuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKTtjPWphW2NdfHxqYS5fZGVmYXVsdDtkLmlubmVySFRNTD1jWzFdK2EucmVwbGFjZShLZiwiPCQxPjwvJDI+IikrY1syXTtmb3IoYz1jWzBdO2MtLTspZD1kLmxhc3RDaGlsZDtmPWJiKGYsZC5jaGlsZE5vZGVzKTtkPWUuZmlyc3RDaGlsZDtkLnRleHRDb250ZW50PSIifWVsc2UgZi5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoYSkpO2UudGV4dENvbnRlbnQ9IiI7ZS5pbm5lckhUTUw9IiI7cChmLGZ1bmN0aW9uKGEpe2UuYXBwZW5kQ2hpbGQoYSl9KTtyZXR1cm4gZX1mdW5jdGlvbiBNYyhhLApiKXt2YXIgZD1hLnBhcmVudE5vZGU7ZCYmZC5yZXBsYWNlQ2hpbGQoYixhKTtiLmFwcGVuZENoaWxkKGEpfWZ1bmN0aW9uIFMoYSl7aWYoYSBpbnN0YW5jZW9mIFMpcmV0dXJuIGE7dmFyIGI7SChhKSYmKGE9VChhKSxiPSEwKTtpZighKHRoaXMgaW5zdGFuY2VvZiBTKSl7aWYoYiYmIjwiIT1hLmNoYXJBdCgwKSl0aHJvdyBVYigibm9zZWwiKTtyZXR1cm4gbmV3IFMoYSl9aWYoYil7Yj1VO3ZhciBkO2E9KGQ9TGYuZXhlYyhhKSk/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9TGMoYSxiKSk/ZC5jaGlsZE5vZGVzOltdfU5jKHRoaXMsYSl9ZnVuY3Rpb24gVmIoYSl7cmV0dXJuIGEuY2xvbmVOb2RlKCEwKX1mdW5jdGlvbiB0YihhLGIpe2J8fHViKGEpO2lmKGEucXVlcnlTZWxlY3RvckFsbClmb3IodmFyIGQ9YS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksYz0wLGU9ZC5sZW5ndGg7YzxlO2MrKyl1YihkW2NdKX1mdW5jdGlvbiBPYyhhLGIsZCxjKXtpZih1KGMpKXRocm93IFViKCJvZmZhcmdzIik7CnZhciBlPShjPXZiKGEpKSYmYy5ldmVudHMsZj1jJiZjLmhhbmRsZTtpZihmKWlmKGIpe3ZhciBnPWZ1bmN0aW9uKGIpe3ZhciBjPWVbYl07dShkKSYmYWIoY3x8W10sZCk7dShkKSYmYyYmMDxjLmxlbmd0aHx8KGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRlbGV0ZSBlW2JdKX07cChiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSl7ZyhhKTt3YlthXSYmZyh3YlthXSl9KX1lbHNlIGZvcihiIGluIGUpIiRkZXN0cm95IiE9PWImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRlbGV0ZSBlW2JdfWZ1bmN0aW9uIHViKGEsYil7dmFyIGQ9YS5uZzMzOSxjPWQmJmZiW2RdO2MmJihiP2RlbGV0ZSBjLmRhdGFbYl06KGMuaGFuZGxlJiYoYy5ldmVudHMuJGRlc3Ryb3kmJmMuaGFuZGxlKHt9LCIkZGVzdHJveSIpLE9jKGEpKSxkZWxldGUgZmJbZF0sYS5uZzMzOT14KSl9ZnVuY3Rpb24gdmIoYSxiKXt2YXIgZD1hLm5nMzM5LGQ9ZCYmZmJbZF07YiYmIWQmJihhLm5nMzM5PWQ9KytNZiwKZD1mYltkXT17ZXZlbnRzOnt9LGRhdGE6e30saGFuZGxlOnh9KTtyZXR1cm4gZH1mdW5jdGlvbiBXYihhLGIsZCl7aWYoS2MoYSkpe3ZhciBjPXUoZCksZT0hYyYmYiYmIUsoYiksZj0hYjthPShhPXZiKGEsIWUpKSYmYS5kYXRhO2lmKGMpYVtiXT1kO2Vsc2V7aWYoZilyZXR1cm4gYTtpZihlKXJldHVybiBhJiZhW2JdO04oYSxiKX19fWZ1bmN0aW9uIHhiKGEsYil7cmV0dXJuIGEuZ2V0QXR0cmlidXRlPy0xPCgiICIrKGEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiKS5yZXBsYWNlKC9bXG5cdF0vZywiICIpLmluZGV4T2YoIiAiK2IrIiAiKTohMX1mdW5jdGlvbiB5YihhLGIpe2ImJmEuc2V0QXR0cmlidXRlJiZwKGIuc3BsaXQoIiAiKSxmdW5jdGlvbihiKXthLnNldEF0dHJpYnV0ZSgiY2xhc3MiLFQoKCIgIisoYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKSsiICIpLnJlcGxhY2UoL1tcblx0XS9nLCIgIikucmVwbGFjZSgiICIrVChiKSsiICIsIiAiKSkpfSl9ZnVuY3Rpb24gemIoYSwKYil7aWYoYiYmYS5zZXRBdHRyaWJ1dGUpe3ZhciBkPSgiICIrKGEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiKS5yZXBsYWNlKC9bXG5cdF0vZywiICIpO3AoYi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEpe2E9VChhKTstMT09PWQuaW5kZXhPZigiICIrYSsiICIpJiYoZCs9YSsiICIpfSk7YS5zZXRBdHRyaWJ1dGUoImNsYXNzIixUKGQpKX19ZnVuY3Rpb24gTmMoYSxiKXtpZihiKWlmKGIubm9kZVR5cGUpYVthLmxlbmd0aCsrXT1iO2Vsc2V7dmFyIGQ9Yi5sZW5ndGg7aWYoIm51bWJlciI9PT10eXBlb2YgZCYmYi53aW5kb3chPT1iKXtpZihkKWZvcih2YXIgYz0wO2M8ZDtjKyspYVthLmxlbmd0aCsrXT1iW2NdfWVsc2UgYVthLmxlbmd0aCsrXT1ifX1mdW5jdGlvbiBQYyhhLGIpe3JldHVybiBBYihhLCIkIisoYnx8Im5nQ29udHJvbGxlciIpKyJDb250cm9sbGVyIil9ZnVuY3Rpb24gQWIoYSxiLGQpezk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTtmb3IoYj0KTChiKT9iOltiXTthOyl7Zm9yKHZhciBjPTAsZT1iLmxlbmd0aDtjPGU7YysrKWlmKHUoZD1ELmRhdGEoYSxiW2NdKSkpcmV0dXJuIGQ7YT1hLnBhcmVudE5vZGV8fDExPT09YS5ub2RlVHlwZSYmYS5ob3N0fX1mdW5jdGlvbiBRYyhhKXtmb3IodGIoYSwhMCk7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gWGIoYSxiKXtifHx0YihhKTt2YXIgZD1hLnBhcmVudE5vZGU7ZCYmZC5yZW1vdmVDaGlsZChhKX1mdW5jdGlvbiBOZihhLGIpe2I9Ynx8UjtpZigiY29tcGxldGUiPT09Yi5kb2N1bWVudC5yZWFkeVN0YXRlKWIuc2V0VGltZW91dChhKTtlbHNlIEQoYikub24oImxvYWQiLGEpfWZ1bmN0aW9uIFJjKGEsYil7dmFyIGQ9QmJbYi50b0xvd2VyQ2FzZSgpXTtyZXR1cm4gZCYmU2Nbb2EoYSldJiZkfWZ1bmN0aW9uIE9mKGEsYil7dmFyIGQ9ZnVuY3Rpb24oYyxkKXtjLmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBjLmRlZmF1bHRQcmV2ZW50ZWR9Owp2YXIgZj1iW2R8fGMudHlwZV0sZz1mP2YubGVuZ3RoOjA7aWYoZyl7aWYocihjLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCkpe3ZhciBoPWMuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO2Muc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7Yy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ITA7Yy5zdG9wUHJvcGFnYXRpb24mJmMuc3RvcFByb3BhZ2F0aW9uKCk7aCYmaC5jYWxsKGMpfX1jLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWZ1bmN0aW9uKCl7cmV0dXJuITA9PT1jLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZH07dmFyIGs9Zi5zcGVjaWFsSGFuZGxlcldyYXBwZXJ8fFBmOzE8ZyYmKGY9ZmEoZikpO2Zvcih2YXIgbT0wO208ZzttKyspYy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpfHxrKGEsYyxmW21dKX19O2QuZWxlbT1hO3JldHVybiBkfWZ1bmN0aW9uIFBmKGEsYixkKXtkLmNhbGwoYSxiKX1mdW5jdGlvbiBRZihhLGIsCmQpe3ZhciBjPWIucmVsYXRlZFRhcmdldDtjJiYoYz09PWF8fFJmLmNhbGwoYSxjKSl8fGQuY2FsbChhLGIpfWZ1bmN0aW9uIEVmKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE4oUyx7aGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXthLmF0dHImJihhPWFbMF0pO3JldHVybiB4YihhLGIpfSxhZGRDbGFzczpmdW5jdGlvbihhLGIpe2EuYXR0ciYmKGE9YVswXSk7cmV0dXJuIHpiKGEsYil9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYil7YS5hdHRyJiYoYT1hWzBdKTtyZXR1cm4geWIoYSxiKX19KX19ZnVuY3Rpb24gRGEoYSxiKXt2YXIgZD1hJiZhLiQkaGFzaEtleTtpZihkKXJldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgZCYmKGQ9YS4kJGhhc2hLZXkoKSksZDtkPXR5cGVvZiBhO3JldHVybiBkPSJmdW5jdGlvbiI9PWR8fCJvYmplY3QiPT1kJiZudWxsIT09YT9hLiQkaGFzaEtleT1kKyI6IisoYnx8WGQpKCk6ZCsiOiIrYX1mdW5jdGlvbiBUYShhLGIpe2lmKGIpe3ZhciBkPTA7dGhpcy5uZXh0VWlkPQpmdW5jdGlvbigpe3JldHVybisrZH19cChhLHRoaXMucHV0LHRoaXMpfWZ1bmN0aW9uIFNmKGEpe3JldHVybihhPWEudG9TdHJpbmcoKS5yZXBsYWNlKFRjLCIiKS5tYXRjaChVYykpPyJmdW5jdGlvbigiKyhhWzFdfHwiIikucmVwbGFjZSgvW1xzXHJcbl0rLywiICIpKyIpIjoiZm4ifWZ1bmN0aW9uIGRiKGEsYil7ZnVuY3Rpb24gZChhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtpZihLKGIpKXAoYixwYyhhKSk7ZWxzZSByZXR1cm4gYShiLGMpfX1mdW5jdGlvbiBjKGEsYil7U2EoYSwic2VydmljZSIpO2lmKEcoYil8fEwoYikpYj1KLmluc3RhbnRpYXRlKGIpO2lmKCFiLiRnZXQpdGhyb3cgRWEoInBnZXQiLGEpO3JldHVybiBuW2ErIlByb3ZpZGVyIl09Yn1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9dC5pbnZva2UoYix0aGlzKTtpZihyKGMpKXRocm93IEVhKCJ1bmRlZiIsYSk7cmV0dXJuIGN9fWZ1bmN0aW9uIGYoYSxiLGQpe3JldHVybiBjKGEseyRnZXQ6ITEhPT0KZD9lKGEsYik6Yn0pfWZ1bmN0aW9uIGcoYSl7cGIocihhKXx8TChhKSwibW9kdWxlc1RvTG9hZCIsIm5vdCBhbiBhcnJheSIpO3ZhciBiPVtdLGM7cChhLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoYSl7dmFyIGIsYztiPTA7Zm9yKGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGU9YVtiXSxmPUouZ2V0KGVbMF0pO2ZbZVsxXV0uYXBwbHkoZixlWzJdKX19aWYoIWwuZ2V0KGEpKXtsLnB1dChhLCEwKTt0cnl7SChhKT8oYz1TYihhKSxiPWIuY29uY2F0KGcoYy5yZXF1aXJlcykpLmNvbmNhdChjLl9ydW5CbG9ja3MpLGQoYy5faW52b2tlUXVldWUpLGQoYy5fY29uZmlnQmxvY2tzKSk6RyhhKT9iLnB1c2goSi5pbnZva2UoYSkpOkwoYSk/Yi5wdXNoKEouaW52b2tlKGEpKTpSYShhLCJtb2R1bGUiKX1jYXRjaChlKXt0aHJvdyBMKGEpJiYoYT1hW2EubGVuZ3RoLTFdKSxlLm1lc3NhZ2UmJmUuc3RhY2smJi0xPT1lLnN0YWNrLmluZGV4T2YoZS5tZXNzYWdlKSYmKGU9ZS5tZXNzYWdlKyJcbiIrCmUuc3RhY2spLEVhKCJtb2R1bGVyciIsYSxlLnN0YWNrfHxlLm1lc3NhZ2V8fGUpO319fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChhLGMpe2Z1bmN0aW9uIGQoYixlKXtpZihhLmhhc093blByb3BlcnR5KGIpKXtpZihhW2JdPT09ayl0aHJvdyBFYSgiY2RlcCIsYisiIDwtICIrbS5qb2luKCIgPC0gIikpO3JldHVybiBhW2JdfXRyeXtyZXR1cm4gbS51bnNoaWZ0KGIpLGFbYl09ayxhW2JdPWMoYixlKX1jYXRjaChmKXt0aHJvdyBhW2JdPT09ayYmZGVsZXRlIGFbYl0sZjt9ZmluYWxseXttLnNoaWZ0KCl9fWZ1bmN0aW9uIGUoYSxjLGYsZyl7InN0cmluZyI9PT10eXBlb2YgZiYmKGc9ZixmPW51bGwpO3ZhciBrPVtdLGg9ZGIuJCRhbm5vdGF0ZShhLGIsZyksbSxsLHE7bD0wO2ZvcihtPWgubGVuZ3RoO2w8bTtsKyspe3E9aFtsXTtpZigic3RyaW5nIiE9PXR5cGVvZiBxKXRocm93IEVhKCJpdGtuIixxKTtrLnB1c2goZiYmZi5oYXNPd25Qcm9wZXJ0eShxKT9mW3FdOmQocSxnKSl9TChhKSYmCihhPWFbbV0pO3JldHVybiBhLmFwcGx5KGMsayl9cmV0dXJue2ludm9rZTplLGluc3RhbnRpYXRlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1PYmplY3QuY3JlYXRlKChMKGEpP2FbYS5sZW5ndGgtMV06YSkucHJvdG90eXBlfHxudWxsKTthPWUoYSxkLGIsYyk7cmV0dXJuIEsoYSl8fEcoYSk/YTpkfSxnZXQ6ZCxhbm5vdGF0ZTpkYi4kJGFubm90YXRlLGhhczpmdW5jdGlvbihiKXtyZXR1cm4gbi5oYXNPd25Qcm9wZXJ0eShiKyJQcm92aWRlciIpfHxhLmhhc093blByb3BlcnR5KGIpfX19Yj0hMD09PWI7dmFyIGs9e30sbT1bXSxsPW5ldyBUYShbXSwhMCksbj17JHByb3ZpZGU6e3Byb3ZpZGVyOmQoYyksZmFjdG9yeTpkKGYpLHNlcnZpY2U6ZChmdW5jdGlvbihhLGIpe3JldHVybiBmKGEsWyIkaW5qZWN0b3IiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmluc3RhbnRpYXRlKGIpfV0pfSksdmFsdWU6ZChmdW5jdGlvbihhLGIpe3JldHVybiBmKGEsbWEoYiksITEpfSksY29uc3RhbnQ6ZChmdW5jdGlvbihhLApiKXtTYShhLCJjb25zdGFudCIpO25bYV09Yjt6W2FdPWJ9KSxkZWNvcmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1KLmdldChhKyJQcm92aWRlciIpLGQ9Yy4kZ2V0O2MuJGdldD1mdW5jdGlvbigpe3ZhciBhPXQuaW52b2tlKGQsYyk7cmV0dXJuIHQuaW52b2tlKGIsbnVsbCx7JGRlbGVnYXRlOmF9KX19fX0sSj1uLiRpbmplY3Rvcj1oKG4sZnVuY3Rpb24oYSxiKXtkYS5pc1N0cmluZyhiKSYmbS5wdXNoKGIpO3Rocm93IEVhKCJ1bnByIixtLmpvaW4oIiA8LSAiKSk7fSksej17fSx0PXouJGluamVjdG9yPWgoeixmdW5jdGlvbihhLGIpe3ZhciBjPUouZ2V0KGErIlByb3ZpZGVyIixiKTtyZXR1cm4gdC5pbnZva2UoYy4kZ2V0LGMseCxhKX0pO3AoZyhhKSxmdW5jdGlvbihhKXthJiZ0Lmludm9rZShhKX0pO3JldHVybiB0fWZ1bmN0aW9uIFZlKCl7dmFyIGE9ITA7dGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZz1mdW5jdGlvbigpe2E9ITF9O3RoaXMuJGdldD1bIiR3aW5kb3ciLCIkbG9jYXRpb24iLAoiJHJvb3RTY29wZSIsZnVuY3Rpb24oYixkLGMpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9bnVsbDtBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoImEiPT09b2EoYSkpcmV0dXJuIGI9YSwhMH0pO3JldHVybiBifWZ1bmN0aW9uIGYoYSl7aWYoYSl7YS5zY3JvbGxJbnRvVmlldygpO3ZhciBjO2M9Zy55T2Zmc2V0O0coYyk/Yz1jKCk6TmIoYyk/KGM9Y1swXSxjPSJmaXhlZCIhPT1iLmdldENvbXB1dGVkU3R5bGUoYykucG9zaXRpb24/MDpjLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSk6UChjKXx8KGM9MCk7YyYmKGE9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsYi5zY3JvbGxCeSgwLGEtYykpfWVsc2UgYi5zY3JvbGxUbygwLDApfWZ1bmN0aW9uIGcoYSl7YT1IKGEpP2E6ZC5oYXNoKCk7dmFyIGI7YT8oYj1oLmdldEVsZW1lbnRCeUlkKGEpKT9mKGIpOihiPWUoaC5nZXRFbGVtZW50c0J5TmFtZShhKSkpP2YoYik6InRvcCI9PT1hJiZmKG51bGwpOgpmKG51bGwpfXZhciBoPWIuZG9jdW1lbnQ7YSYmYy4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZC5oYXNoKCl9LGZ1bmN0aW9uKGEsYil7YT09PWImJiIiPT09YXx8TmYoZnVuY3Rpb24oKXtjLiRldmFsQXN5bmMoZyl9KX0pO3JldHVybiBnfV19ZnVuY3Rpb24gZ2IoYSxiKXtpZighYSYmIWIpcmV0dXJuIiI7aWYoIWEpcmV0dXJuIGI7aWYoIWIpcmV0dXJuIGE7TChhKSYmKGE9YS5qb2luKCIgIikpO0woYikmJihiPWIuam9pbigiICIpKTtyZXR1cm4gYSsiICIrYn1mdW5jdGlvbiBUZihhKXtIKGEpJiYoYT1hLnNwbGl0KCIgIikpO3ZhciBiPVooKTtwKGEsZnVuY3Rpb24oYSl7YS5sZW5ndGgmJihiW2FdPSEwKX0pO3JldHVybiBifWZ1bmN0aW9uIEZhKGEpe3JldHVybiBLKGEpP2E6e319ZnVuY3Rpb24gVWYoYSxiLGQsYyl7ZnVuY3Rpb24gZShhKXt0cnl7YS5hcHBseShudWxsLHRhLmNhbGwoYXJndW1lbnRzLDEpKX1maW5hbGx5e2lmKHQtLSwwPT09dClmb3IoO0EubGVuZ3RoOyl0cnl7QS5wb3AoKSgpfWNhdGNoKGIpe2QuZXJyb3IoYil9fX0KZnVuY3Rpb24gZigpe0Y9bnVsbDtnKCk7aCgpfWZ1bmN0aW9uIGcoKXthOnt0cnl7cT1sLnN0YXRlO2JyZWFrIGF9Y2F0Y2goYSl7fXE9dm9pZCAwfXE9cihxKT9udWxsOnE7bGEocSxDKSYmKHE9Qyk7Qz1xfWZ1bmN0aW9uIGgoKXtpZih3IT09ay51cmwoKXx8eSE9PXEpdz1rLnVybCgpLHk9cSxwKFEsZnVuY3Rpb24oYSl7YShrLnVybCgpLHEpfSl9dmFyIGs9dGhpcyxtPWEubG9jYXRpb24sbD1hLmhpc3Rvcnksbj1hLnNldFRpbWVvdXQsSj1hLmNsZWFyVGltZW91dCx6PXt9O2suaXNNb2NrPSExO3ZhciB0PTAsQT1bXTtrLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9ZTtrLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ9ZnVuY3Rpb24oKXt0Kyt9O2subm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbihhKXswPT09dD9hKCk6QS5wdXNoKGEpfTt2YXIgcSx5LHc9bS5ocmVmLFY9Yi5maW5kKCJiYXNlIiksRj1udWxsO2coKTt5PXE7ay51cmw9ZnVuY3Rpb24oYiwKZCxlKXtyKGUpJiYoZT1udWxsKTttIT09YS5sb2NhdGlvbiYmKG09YS5sb2NhdGlvbik7bCE9PWEuaGlzdG9yeSYmKGw9YS5oaXN0b3J5KTtpZihiKXt2YXIgZj15PT09ZTtpZih3PT09YiYmKCFjLmhpc3Rvcnl8fGYpKXJldHVybiBrO3ZhciBoPXcmJkdhKHcpPT09R2EoYik7dz1iO3k9ZTtpZighYy5oaXN0b3J5fHxoJiZmKXtpZighaHx8RilGPWI7ZD9tLnJlcGxhY2UoYik6aD8oZD1tLGU9Yi5pbmRleE9mKCIjIiksZT0tMT09PWU/IiI6Yi5zdWJzdHIoZSksZC5oYXNoPWUpOm0uaHJlZj1iO20uaHJlZiE9PWImJihGPWIpfWVsc2UgbFtkPyJyZXBsYWNlU3RhdGUiOiJwdXNoU3RhdGUiXShlLCIiLGIpLGcoKSx5PXE7cmV0dXJuIGt9cmV0dXJuIEZ8fG0uaHJlZi5yZXBsYWNlKC8lMjcvZywiJyIpfTtrLnN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHF9O3ZhciBRPVtdLEU9ITEsQz1udWxsO2sub25VcmxDaGFuZ2U9ZnVuY3Rpb24oYil7aWYoIUUpe2lmKGMuaGlzdG9yeSlEKGEpLm9uKCJwb3BzdGF0ZSIsCmYpO0QoYSkub24oImhhc2hjaGFuZ2UiLGYpO0U9ITB9US5wdXNoKGIpO3JldHVybiBifTtrLiQkYXBwbGljYXRpb25EZXN0cm95ZWQ9ZnVuY3Rpb24oKXtEKGEpLm9mZigiaGFzaGNoYW5nZSBwb3BzdGF0ZSIsZil9O2suJCRjaGVja1VybENoYW5nZT1oO2suYmFzZUhyZWY9ZnVuY3Rpb24oKXt2YXIgYT1WLmF0dHIoImhyZWYiKTtyZXR1cm4gYT9hLnJlcGxhY2UoL14oaHR0cHM/XDopP1wvXC9bXlwvXSovLCIiKToiIn07ay5kZWZlcj1mdW5jdGlvbihhLGIpe3ZhciBjO3QrKztjPW4oZnVuY3Rpb24oKXtkZWxldGUgeltjXTtlKGEpfSxifHwwKTt6W2NdPSEwO3JldHVybiBjfTtrLmRlZmVyLmNhbmNlbD1mdW5jdGlvbihhKXtyZXR1cm4gelthXT8oZGVsZXRlIHpbYV0sSihhKSxlKHYpLCEwKTohMX19ZnVuY3Rpb24gYmYoKXt0aGlzLiRnZXQ9WyIkd2luZG93IiwiJGxvZyIsIiRzbmlmZmVyIiwiJGRvY3VtZW50IixmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gbmV3IFVmKGEsYyxiLApkKX1dfWZ1bmN0aW9uIGNmKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMpe2Z1bmN0aW9uIGUoYSl7YSE9biYmKEo/Sj09YSYmKEo9YS5uKTpKPWEsZihhLm4sYS5wKSxmKGEsbiksbj1hLG4ubj1udWxsKX1mdW5jdGlvbiBmKGEsYil7YSE9YiYmKGEmJihhLnA9YiksYiYmKGIubj1hKSl9aWYoYSBpbiBiKXRocm93IEIoIiRjYWNoZUZhY3RvcnkiKSgiaWlkIixhKTt2YXIgZz0wLGg9Tih7fSxjLHtpZDphfSksaz1aKCksbT1jJiZjLmNhcGFjaXR5fHxOdW1iZXIuTUFYX1ZBTFVFLGw9WigpLG49bnVsbCxKPW51bGw7cmV0dXJuIGJbYV09e3B1dDpmdW5jdGlvbihhLGIpe2lmKCFyKGIpKXtpZihtPE51bWJlci5NQVhfVkFMVUUpe3ZhciBjPWxbYV18fChsW2FdPXtrZXk6YX0pO2UoYyl9YSBpbiBrfHxnKys7a1thXT1iO2c+bSYmdGhpcy5yZW1vdmUoSi5rZXkpO3JldHVybiBifX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKG08TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bFthXTsKaWYoIWIpcmV0dXJuO2UoYil9cmV0dXJuIGtbYV19LHJlbW92ZTpmdW5jdGlvbihhKXtpZihtPE51bWJlci5NQVhfVkFMVUUpe3ZhciBiPWxbYV07aWYoIWIpcmV0dXJuO2I9PW4mJihuPWIucCk7Yj09SiYmKEo9Yi5uKTtmKGIubixiLnApO2RlbGV0ZSBsW2FdfWEgaW4gayYmKGRlbGV0ZSBrW2FdLGctLSl9LHJlbW92ZUFsbDpmdW5jdGlvbigpe2s9WigpO2c9MDtsPVooKTtuPUo9bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe2w9aD1rPW51bGw7ZGVsZXRlIGJbYV19LGluZm86ZnVuY3Rpb24oKXtyZXR1cm4gTih7fSxoLHtzaXplOmd9KX19fXZhciBiPXt9O2EuaW5mbz1mdW5jdGlvbigpe3ZhciBhPXt9O3AoYixmdW5jdGlvbihiLGUpe2FbZV09Yi5pbmZvKCl9KTtyZXR1cm4gYX07YS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGJbYV19O3JldHVybiBhfX1mdW5jdGlvbiB5Zigpe3RoaXMuJGdldD1bIiRjYWNoZUZhY3RvcnkiLGZ1bmN0aW9uKGEpe3JldHVybiBhKCJ0ZW1wbGF0ZXMiKX1dfQpmdW5jdGlvbiBDYyhhLGIpe2Z1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPS9eXHMqKFtAJl18PShcKj8pKShcPz8pXHMqKFx3KilccyokLyxlPVooKTtwKGEsZnVuY3Rpb24oYSxmKXtpZihhIGluIGwpZVtmXT1sW2FdO2Vsc2V7dmFyIGc9YS5tYXRjaChkKTtpZighZyl0aHJvdyBnYSgiaXNjcCIsYixmLGEsYz8iY29udHJvbGxlciBiaW5kaW5ncyBkZWZpbml0aW9uIjoiaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uIik7ZVtmXT17bW9kZTpnWzFdWzBdLGNvbGxlY3Rpb246IioiPT09Z1syXSxvcHRpb25hbDoiPyI9PT1nWzNdLGF0dHJOYW1lOmdbNF18fGZ9O2dbNF0mJihsW2FdPWVbZl0pfX0pO3JldHVybiBlfWZ1bmN0aW9uIGMoYSl7dmFyIGI9YS5jaGFyQXQoMCk7aWYoIWJ8fGIhPT1NKGIpKXRocm93IGdhKCJiYWRkaXIiLGEpO2lmKGEhPT1hLnRyaW0oKSl0aHJvdyBnYSgiYmFkZGlyIixhKTt9dmFyIGU9e30sZj0vXlxzKmRpcmVjdGl2ZVw6XHMqKFtcd1wtXSspXHMrKC4qKSQvLGc9Ci8oKFtcd1wtXSspKD86XDooW147XSspKT87PykvLGg9JGQoIm5nU3JjLG5nU3Jjc2V0LHNyYyxzcmNzZXQiKSxrPS9eKD86KFxeXF4/KT8oXD8pPyhcXlxePyk/KT8vLG09L14ob25bYS16XSt8Zm9ybWFjdGlvbikkLyxsPVooKTt0aGlzLmRpcmVjdGl2ZT1mdW5jdGlvbiB6KGIsZCl7U2EoYiwiZGlyZWN0aXZlIik7SChiKT8oYyhiKSxwYihkLCJkaXJlY3RpdmVGYWN0b3J5IiksZS5oYXNPd25Qcm9wZXJ0eShiKXx8KGVbYl09W10sYS5mYWN0b3J5KGIrIkRpcmVjdGl2ZSIsWyIkaW5qZWN0b3IiLCIkZXhjZXB0aW9uSGFuZGxlciIsZnVuY3Rpb24oYSxjKXt2YXIgZD1bXTtwKGVbYl0sZnVuY3Rpb24oZSxmKXt0cnl7dmFyIGc9YS5pbnZva2UoZSk7RyhnKT9nPXtjb21waWxlOm1hKGcpfTohZy5jb21waWxlJiZnLmxpbmsmJihnLmNvbXBpbGU9bWEoZy5saW5rKSk7Zy5wcmlvcml0eT1nLnByaW9yaXR5fHwwO2cuaW5kZXg9ZjtnLm5hbWU9Zy5uYW1lfHxiO2cucmVxdWlyZT1nLnJlcXVpcmV8fApnLmNvbnRyb2xsZXImJmcubmFtZTtnLnJlc3RyaWN0PWcucmVzdHJpY3R8fCJFQSI7Zy4kJG1vZHVsZU5hbWU9ZS4kJG1vZHVsZU5hbWU7ZC5wdXNoKGcpfWNhdGNoKGgpe2MoaCl9fSk7cmV0dXJuIGR9XSkpLGVbYl0ucHVzaChkKSk6cChiLHBjKHopKTtyZXR1cm4gdGhpc307dGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4gdShhKT8oYi5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdChhKSx0aGlzKTpiLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KCl9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGEpe3JldHVybiB1KGEpPyhiLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdChhKSx0aGlzKTpiLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCgpfTt2YXIgbj0hMDt0aGlzLmRlYnVnSW5mb0VuYWJsZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHUoYSk/KG49YSx0aGlzKTpufTt0aGlzLiRnZXQ9WyIkaW5qZWN0b3IiLAoiJGludGVycG9sYXRlIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLCIkdGVtcGxhdGVSZXF1ZXN0IiwiJHBhcnNlIiwiJGNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiJHNjZSIsIiRhbmltYXRlIiwiJCRzYW5pdGl6ZVVyaSIsZnVuY3Rpb24oYSxiLGMsbCx5LHcsVixGLFEsRSl7ZnVuY3Rpb24gQyhhLGIpe3RyeXthLmFkZENsYXNzKGIpfWNhdGNoKGMpe319ZnVuY3Rpb24gSShhLGIsYyxkLGUpe2EgaW5zdGFuY2VvZiBEfHwoYT1EKGEpKTtmb3IodmFyIGY9L1xTKy8sZz0wLGg9YS5sZW5ndGg7ZzxoO2crKyl7dmFyIGs9YVtnXTtrLm5vZGVUeXBlPT09T2EmJmsubm9kZVZhbHVlLm1hdGNoKGYpJiZNYyhrLGFbZ109VS5jcmVhdGVFbGVtZW50KCJzcGFuIikpfXZhciBtPVcoYSxiLGEsYyxkLGUpO0kuJCRhZGRTY29wZUNsYXNzKGEpO3ZhciBsPW51bGw7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtwYihiLCJzY29wZSIpO2UmJmUubmVlZHNOZXdTY29wZSYmKGI9Yi4kcGFyZW50LiRuZXcoKSk7CmQ9ZHx8e307dmFyIGY9ZC5wYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbixnPWQudHJhbnNjbHVkZUNvbnRyb2xsZXJzO2Q9ZC5mdXR1cmVQYXJlbnRFbGVtZW50O2YmJmYuJCRib3VuZFRyYW5zY2x1ZGUmJihmPWYuJCRib3VuZFRyYW5zY2x1ZGUpO2x8fChsPShkPWQmJmRbMF0pPyJmb3JlaWdub2JqZWN0IiE9PW9hKGQpJiZkLnRvU3RyaW5nKCkubWF0Y2goL1NWRy8pPyJzdmciOiJodG1sIjoiaHRtbCIpO2Q9Imh0bWwiIT09bD9EKFliKGwsRCgiPGRpdj4iKS5hcHBlbmQoYSkuaHRtbCgpKSk6Yz9RYS5jbG9uZS5jYWxsKGEpOmE7aWYoZylmb3IodmFyIGggaW4gZylkLmRhdGEoIiQiK2grIkNvbnRyb2xsZXIiLGdbaF0uaW5zdGFuY2UpO0kuJCRhZGRTY29wZUluZm8oZCxiKTtjJiZjKGQsYik7bSYmbShiLGQsZCxmKTtyZXR1cm4gZH19ZnVuY3Rpb24gVyhhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGMsZCxlKXt2YXIgZixrLG0sbCxuLEUsQTtpZihxKWZvcihBPUFycmF5KGMubGVuZ3RoKSwKbD0wO2w8aC5sZW5ndGg7bCs9MylmPWhbbF0sQVtmXT1jW2ZdO2Vsc2UgQT1jO2w9MDtmb3Iobj1oLmxlbmd0aDtsPG47KWs9QVtoW2wrK11dLGM9aFtsKytdLGY9aFtsKytdLGM/KGMuc2NvcGU/KG09YS4kbmV3KCksSS4kJGFkZFNjb3BlSW5mbyhEKGspLG0pKTptPWEsRT1jLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P08oYSxjLnRyYW5zY2x1ZGUsZSk6IWMudGVtcGxhdGVPblRoaXNFbGVtZW50JiZlP2U6IWUmJmI/TyhhLGIpOm51bGwsYyhmLG0sayxkLEUpKTpmJiZmKGEsay5jaGlsZE5vZGVzLHgsZSl9Zm9yKHZhciBoPVtdLGssbSxsLG4scSxFPTA7RTxhLmxlbmd0aDtFKyspe2s9bmV3IGRhO209aWEoYVtFXSxbXSxrLDA9PT1FP2Q6eCxlKTsoZj1tLmxlbmd0aD8kKG0sYVtFXSxrLGIsYyxudWxsLFtdLFtdLGYpOm51bGwpJiZmLnNjb3BlJiZJLiQkYWRkU2NvcGVDbGFzcyhrLiQkZWxlbWVudCk7az1mJiZmLnRlcm1pbmFsfHwhKGw9YVtFXS5jaGlsZE5vZGVzKXx8IWwubGVuZ3RoPwpudWxsOlcobCxmPyhmLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50fHwhZi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpJiZmLnRyYW5zY2x1ZGU6Yik7aWYoZnx8ayloLnB1c2goRSxmLGspLG49ITAscT1xfHxmO2Y9bnVsbH1yZXR1cm4gbj9nOm51bGx9ZnVuY3Rpb24gTyhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7ZHx8KGQ9YS4kbmV3KCExLGgpLGQuJCR0cmFuc2NsdWRlZD0hMCk7cmV0dXJuIGIoZCxlLHtwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjpjLHRyYW5zY2x1ZGVDb250cm9sbGVyczpmLGZ1dHVyZVBhcmVudEVsZW1lbnQ6Z30pfX1mdW5jdGlvbiBpYShhLGIsYyxkLGUpe3ZhciBoPWMuJGF0dHIsaztzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSAxOms9b2EoYSk7cWEoYix2YShrKSwiRSIsZCxlKTtmb3IodmFyIG0sbCxuLHEsRT1hLmF0dHJpYnV0ZXMsQT0wLHc9RSYmRS5sZW5ndGg7QTx3O0ErKyl7dmFyIEk9ITEseT0hMTttPUVbQV07bD1tLm5hbWU7bj1UKG0udmFsdWUpOwptPXZhKGwpO2lmKHE9amEudGVzdChtKSlsPWwucmVwbGFjZShXYywiIikuc3Vic3RyKDgpLnJlcGxhY2UoL18oLikvZyxmdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9KTsobT1tLm1hdGNoKGthKSkmJkIobVsxXSkmJihJPWwseT1sLnN1YnN0cigwLGwubGVuZ3RoLTUpKyJlbmQiLGw9bC5zdWJzdHIoMCxsLmxlbmd0aC02KSk7bT12YShsLnRvTG93ZXJDYXNlKCkpO2hbbV09bDtpZihxfHwhYy5oYXNPd25Qcm9wZXJ0eShtKSljW21dPW4sUmMoYSxtKSYmKGNbbV09ITApO1goYSxiLG4sbSxxKTtxYShiLG0sIkEiLGQsZSxJLHkpfSJpbnB1dCI9PT1rJiYiaGlkZGVuIj09PWEuZ2V0QXR0cmlidXRlKCJ0eXBlIikmJmEuc2V0QXR0cmlidXRlKCJhdXRvY29tcGxldGUiLCJvZmYiKTthPWEuY2xhc3NOYW1lO0soYSkmJihhPWEuYW5pbVZhbCk7aWYoSChhKSYmIiIhPT1hKWZvcig7az1nLmV4ZWMoYSk7KW09dmEoa1syXSkscWEoYixtLCJDIixkLGUpJiYoY1ttXT1UKGtbM10pKSwKYT1hLnN1YnN0cihrLmluZGV4K2tbMF0ubGVuZ3RoKTticmVhaztjYXNlIE9hOmlmKDExPT09SGEpZm9yKDthLnBhcmVudE5vZGUmJmEubmV4dFNpYmxpbmcmJmEubmV4dFNpYmxpbmcubm9kZVR5cGU9PT1PYTspYS5ub2RlVmFsdWUrPWEubmV4dFNpYmxpbmcubm9kZVZhbHVlLGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhLm5leHRTaWJsaW5nKTtQKGIsYS5ub2RlVmFsdWUpO2JyZWFrO2Nhc2UgODp0cnl7aWYoaz1mLmV4ZWMoYS5ub2RlVmFsdWUpKW09dmEoa1sxXSkscWEoYixtLCJNIixkLGUpJiYoY1ttXT1UKGtbMl0pKX1jYXRjaChPKXt9fWIuc29ydCh3YSk7cmV0dXJuIGJ9ZnVuY3Rpb24gVWEoYSxiLGMpe3ZhciBkPVtdLGU9MDtpZihiJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikpe2Rve2lmKCFhKXRocm93IGdhKCJ1dGVyZGlyIixiLGMpOzE9PWEubm9kZVR5cGUmJihhLmhhc0F0dHJpYnV0ZShiKSYmZSsrLGEuaGFzQXR0cmlidXRlKGMpJiZlLS0pO2QucHVzaChhKTsKYT1hLm5leHRTaWJsaW5nfXdoaWxlKDA8ZSl9ZWxzZSBkLnB1c2goYSk7cmV0dXJuIEQoZCl9ZnVuY3Rpb24gcyhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7ZT1VYShlWzBdLGIsYyk7cmV0dXJuIGEoZCxlLGYsZyxoKX19ZnVuY3Rpb24gJChhLGIsZCxlLGYsZyxoLG0sbCl7ZnVuY3Rpb24gbihhLGIsYyxkKXtpZihhKXtjJiYoYT1zKGEsYyxkKSk7YS5yZXF1aXJlPXIucmVxdWlyZTthLmRpcmVjdGl2ZU5hbWU9dTtpZihDPT09cnx8ci4kJGlzb2xhdGVTY29wZSlhPWJhKGEse2lzb2xhdGVTY29wZTohMH0pO2gucHVzaChhKX1pZihiKXtjJiYoYj1zKGIsYyxkKSk7Yi5yZXF1aXJlPXIucmVxdWlyZTtiLmRpcmVjdGl2ZU5hbWU9dTtpZihDPT09cnx8ci4kJGlzb2xhdGVTY29wZSliPWJhKGIse2lzb2xhdGVTY29wZTohMH0pO20ucHVzaChiKX19ZnVuY3Rpb24gcShhLGIsYyxkKXt2YXIgZTtpZihIKGIpKXt2YXIgZj1iLm1hdGNoKGspO2I9Yi5zdWJzdHJpbmcoZlswXS5sZW5ndGgpOwp2YXIgZz1mWzFdfHxmWzNdLGY9Ij8iPT09ZlsyXTsiXl4iPT09Zz9jPWMucGFyZW50KCk6ZT0oZT1kJiZkW2JdKSYmZS5pbnN0YW5jZTtlfHwoZD0iJCIrYisiQ29udHJvbGxlciIsZT1nP2MuaW5oZXJpdGVkRGF0YShkKTpjLmRhdGEoZCkpO2lmKCFlJiYhZil0aHJvdyBnYSgiY3RyZXEiLGIsYSk7fWVsc2UgaWYoTChiKSlmb3IoZT1bXSxnPTAsZj1iLmxlbmd0aDtnPGY7ZysrKWVbZ109cShhLGJbZ10sYyxkKTtyZXR1cm4gZXx8bnVsbH1mdW5jdGlvbiBFKGEsYixjLGQsZSxmKXt2YXIgZz1aKCksaDtmb3IoaCBpbiBkKXt2YXIgaz1kW2hdLG09eyRzY29wZTprPT09Q3x8ay4kJGlzb2xhdGVTY29wZT9lOmYsJGVsZW1lbnQ6YSwkYXR0cnM6YiwkdHJhbnNjbHVkZTpjfSxsPWsuY29udHJvbGxlcjsiQCI9PWwmJihsPWJbay5uYW1lXSk7bT13KGwsbSwhMCxrLmNvbnRyb2xsZXJBcyk7Z1trLm5hbWVdPW07YS5kYXRhKCIkIitrLm5hbWUrIkNvbnRyb2xsZXIiLG0uaW5zdGFuY2UpfXJldHVybiBnfQpmdW5jdGlvbiB5KGEsYyxlLGYsZyl7ZnVuY3Rpb24gayhhLGIsYyl7dmFyIGQ7JGEoYSl8fChjPWIsYj1hLGE9eCk7USYmKGQ9dyk7Y3x8KGM9UT9GLnBhcmVudCgpOkYpO3JldHVybiBnKGEsYixkLGMsVWEpfXZhciBsLG4sQSx3LE8sRixpYTtiPT09ZT8oZj1kLEY9ZC4kJGVsZW1lbnQpOihGPUQoZSksZj1uZXcgZGEoRixkKSk7QT1jO0M/bj1jLiRuZXcoITApOnQmJihBPWMuJHBhcmVudCk7ZyYmKE89ayxPLiQkYm91bmRUcmFuc2NsdWRlPWcpO3omJih3PUUoRixmLE8seixuLGMpKTtDJiYoSS4kJGFkZFNjb3BlSW5mbyhGLG4sITAsIShXJiYoVz09PUN8fFc9PT1DLiQkb3JpZ2luYWxEaXJlY3RpdmUpKSksSS4kJGFkZFNjb3BlQ2xhc3MoRiwhMCksbi4kJGlzb2xhdGVCaW5kaW5ncz1DLiQkaXNvbGF0ZUJpbmRpbmdzLChpYT1hYShjLGYsbixuLiQkaXNvbGF0ZUJpbmRpbmdzLEMpKSYmbi4kb24oIiRkZXN0cm95IixpYSkpO2Zvcih2YXIgVmMgaW4gdyl7aWE9eltWY107dmFyIFY9CndbVmNdLHA9aWEuJCRiaW5kaW5ncy5iaW5kVG9Db250cm9sbGVyO1YuaWRlbnRpZmllciYmcCYmKGw9YWEoQSxmLFYuaW5zdGFuY2UscCxpYSkpO3ZhciByPVYoKTtyIT09Vi5pbnN0YW5jZSYmKFYuaW5zdGFuY2U9cixGLmRhdGEoIiQiK2lhLm5hbWUrIkNvbnRyb2xsZXIiLHIpLGwmJmwoKSxsPWFhKEEsZixWLmluc3RhbmNlLHAsaWEpKX1CPTA7Zm9yKE09aC5sZW5ndGg7QjxNO0IrKylsPWhbQl0sY2EobCxsLmlzb2xhdGVTY29wZT9uOmMsRixmLGwucmVxdWlyZSYmcShsLmRpcmVjdGl2ZU5hbWUsbC5yZXF1aXJlLEYsdyksTyk7dmFyIFVhPWM7QyYmKEMudGVtcGxhdGV8fG51bGw9PT1DLnRlbXBsYXRlVXJsKSYmKFVhPW4pO2EmJmEoVWEsZS5jaGlsZE5vZGVzLHgsZyk7Zm9yKEI9bS5sZW5ndGgtMTswPD1CO0ItLSlsPW1bQl0sY2EobCxsLmlzb2xhdGVTY29wZT9uOmMsRixmLGwucmVxdWlyZSYmcShsLmRpcmVjdGl2ZU5hbWUsbC5yZXF1aXJlLEYsdyksTyl9bD1sfHx7fTtmb3IodmFyIE89Ci1OdW1iZXIuTUFYX1ZBTFVFLHQ9bC5uZXdTY29wZURpcmVjdGl2ZSx6PWwuY29udHJvbGxlckRpcmVjdGl2ZXMsQz1sLm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxXPWwudGVtcGxhdGVEaXJlY3RpdmUsRj1sLm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsVj0hMSxwPSExLFE9bC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSwkPWQuJCRlbGVtZW50PUQoYikscix1LHYscWE9ZSx3YSxCPTAsTT1hLmxlbmd0aDtCPE07QisrKXtyPWFbQl07dmFyIE49ci4kJHN0YXJ0LFA9ci4kJGVuZDtOJiYoJD1VYShiLE4sUCkpO3Y9eDtpZihPPnIucHJpb3JpdHkpYnJlYWs7aWYodj1yLnNjb3BlKXIudGVtcGxhdGVVcmx8fChLKHYpPyhWYSgibmV3L2lzb2xhdGVkIHNjb3BlIixDfHx0LHIsJCksQz1yKTpWYSgibmV3L2lzb2xhdGVkIHNjb3BlIixDLHIsJCkpLHQ9dHx8cjt1PXIubmFtZTshci50ZW1wbGF0ZVVybCYmci5jb250cm9sbGVyJiYodj1yLmNvbnRyb2xsZXIsej16fHxaKCksVmEoIiciKwp1KyInIGNvbnRyb2xsZXIiLHpbdV0sciwkKSx6W3VdPXIpO2lmKHY9ci50cmFuc2NsdWRlKVY9ITAsci4kJHRsYnx8KFZhKCJ0cmFuc2NsdXNpb24iLEYsciwkKSxGPXIpLCJlbGVtZW50Ij09dj8oUT0hMCxPPXIucHJpb3JpdHksdj0kLCQ9ZC4kJGVsZW1lbnQ9RChVLmNyZWF0ZUNvbW1lbnQoIiAiK3UrIjogIitkW3VdKyIgIikpLGI9JFswXSxZKGYsdGEuY2FsbCh2LDApLGIpLHFhPUkodixlLE8sZyYmZy5uYW1lLHtub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOkZ9KSk6KHY9RChWYihiKSkuY29udGVudHMoKSwkLmVtcHR5KCkscWE9SSh2LGUseCx4LHtuZWVkc05ld1Njb3BlOnIuJCRpc29sYXRlU2NvcGV8fHIuJCRuZXdTY29wZX0pKTtpZihyLnRlbXBsYXRlKWlmKHA9ITAsVmEoInRlbXBsYXRlIixXLHIsJCksVz1yLHY9RyhyLnRlbXBsYXRlKT9yLnRlbXBsYXRlKCQsZCk6ci50ZW1wbGF0ZSx2PWhhKHYpLHIucmVwbGFjZSl7Zz1yO3Y9VGIudGVzdCh2KT9YYyhZYihyLnRlbXBsYXRlTmFtZXNwYWNlLApUKHYpKSk6W107Yj12WzBdO2lmKDEhPXYubGVuZ3RofHwxIT09Yi5ub2RlVHlwZSl0aHJvdyBnYSgidHBscnQiLHUsIiIpO1koZiwkLGIpO3Y9eyRhdHRyOnt9fTt2YXIgUz1pYShiLFtdLHYpLFZmPWEuc3BsaWNlKEIrMSxhLmxlbmd0aC0oQisxKSk7KEN8fHQpJiZZYyhTLEMsdCk7YT1hLmNvbmNhdChTKS5jb25jYXQoVmYpO1IoZCx2KTtNPWEubGVuZ3RofWVsc2UgJC5odG1sKHYpO2lmKHIudGVtcGxhdGVVcmwpcD0hMCxWYSgidGVtcGxhdGUiLFcsciwkKSxXPXIsci5yZXBsYWNlJiYoZz1yKSx5PVdmKGEuc3BsaWNlKEIsYS5sZW5ndGgtQiksJCxkLGYsViYmcWEsaCxtLHtjb250cm9sbGVyRGlyZWN0aXZlczp6LG5ld1Njb3BlRGlyZWN0aXZlOnQhPT1yJiZ0LG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTpDLHRlbXBsYXRlRGlyZWN0aXZlOlcsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpGfSksTT1hLmxlbmd0aDtlbHNlIGlmKHIuY29tcGlsZSl0cnl7d2E9ci5jb21waWxlKCQsCmQscWEpLEcod2EpP24obnVsbCx3YSxOLFApOndhJiZuKHdhLnByZSx3YS5wb3N0LE4sUCl9Y2F0Y2goWCl7YyhYLHVhKCQpKX1yLnRlcm1pbmFsJiYoeS50ZXJtaW5hbD0hMCxPPU1hdGgubWF4KE8sci5wcmlvcml0eSkpfXkuc2NvcGU9dCYmITA9PT10LnNjb3BlO3kudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ9Vjt5LnRlbXBsYXRlT25UaGlzRWxlbWVudD1wO3kudHJhbnNjbHVkZT1xYTtsLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlPVE7cmV0dXJuIHl9ZnVuY3Rpb24gWWMoYSxiLGMpe2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylhW2RdPU9iKGFbZF0seyQkaXNvbGF0ZVNjb3BlOmIsJCRuZXdTY29wZTpjfSl9ZnVuY3Rpb24gcWEoYixmLGcsaCxrLG0sbCl7aWYoZj09PWspcmV0dXJuIG51bGw7az1udWxsO2lmKGUuaGFzT3duUHJvcGVydHkoZikpe3ZhciBuO2Y9YS5nZXQoZisiRGlyZWN0aXZlIik7Zm9yKHZhciBxPTAsRT1mLmxlbmd0aDtxPEU7cSsrKXRyeXtpZihuPQpmW3FdLChyKGgpfHxoPm4ucHJpb3JpdHkpJiYtMSE9bi5yZXN0cmljdC5pbmRleE9mKGcpKXttJiYobj1PYihuLHskJHN0YXJ0Om0sJCRlbmQ6bH0pKTtpZighbi4kJGJpbmRpbmdzKXt2YXIgdz1uLEk9bix5PW4ubmFtZSxPPXtpc29sYXRlU2NvcGU6bnVsbCxiaW5kVG9Db250cm9sbGVyOm51bGx9O0soSS5zY29wZSkmJighMD09PUkuYmluZFRvQ29udHJvbGxlcj8oTy5iaW5kVG9Db250cm9sbGVyPWQoSS5zY29wZSx5LCEwKSxPLmlzb2xhdGVTY29wZT17fSk6Ty5pc29sYXRlU2NvcGU9ZChJLnNjb3BlLHksITEpKTtLKEkuYmluZFRvQ29udHJvbGxlcikmJihPLmJpbmRUb0NvbnRyb2xsZXI9ZChJLmJpbmRUb0NvbnRyb2xsZXIseSwhMCkpO2lmKEsoTy5iaW5kVG9Db250cm9sbGVyKSl7dmFyIHQ9SS5jb250cm9sbGVyLEM9SS5jb250cm9sbGVyQXM7aWYoIXQpdGhyb3cgZ2EoIm5vY3RybCIseSk7dmFyIEY7YTp7dmFyIEk9dCxXPUM7aWYoVyYmSChXKSlGPVc7ZWxzZXtpZihIKEkpKXt2YXIgaWE9ClpjLmV4ZWMoSSk7aWYoaWEpe0Y9aWFbM107YnJlYWsgYX19Rj12b2lkIDB9fWlmKCFGKXRocm93IGdhKCJub2lkZW50Iix5KTt9dmFyIFY9dy4kJGJpbmRpbmdzPU87SyhWLmlzb2xhdGVTY29wZSkmJihuLiQkaXNvbGF0ZUJpbmRpbmdzPVYuaXNvbGF0ZVNjb3BlKX1iLnB1c2gobik7az1ufX1jYXRjaChwKXtjKHApfX1yZXR1cm4ga31mdW5jdGlvbiBCKGIpe2lmKGUuaGFzT3duUHJvcGVydHkoYikpZm9yKHZhciBjPWEuZ2V0KGIrIkRpcmVjdGl2ZSIpLGQ9MCxmPWMubGVuZ3RoO2Q8ZjtkKyspaWYoYj1jW2RdLGIubXVsdGlFbGVtZW50KXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIFIoYSxiKXt2YXIgYz1iLiRhdHRyLGQ9YS4kYXR0cixlPWEuJCRlbGVtZW50O3AoYSxmdW5jdGlvbihkLGUpeyIkIiE9ZS5jaGFyQXQoMCkmJihiW2VdJiZiW2VdIT09ZCYmKGQrPSgic3R5bGUiPT09ZT8iOyI6IiAiKStiW2VdKSxhLiRzZXQoZSxkLCEwLGNbZV0pKX0pO3AoYixmdW5jdGlvbihiLApmKXsiY2xhc3MiPT1mPyhDKGUsYiksYVsiY2xhc3MiXT0oYVsiY2xhc3MiXT9hWyJjbGFzcyJdKyIgIjoiIikrYik6InN0eWxlIj09Zj8oZS5hdHRyKCJzdHlsZSIsZS5hdHRyKCJzdHlsZSIpKyI7IitiKSxhLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrIjsiOiIiKStiKToiJCI9PWYuY2hhckF0KDApfHxhLmhhc093blByb3BlcnR5KGYpfHwoYVtmXT1iLGRbZl09Y1tmXSl9KX1mdW5jdGlvbiBXZihhLGIsYyxkLGUsZixnLGgpe3ZhciBrPVtdLG0sbixFPWJbMF0sQT1hLnNoaWZ0KCksdz1PYihBLHt0ZW1wbGF0ZVVybDpudWxsLHRyYW5zY2x1ZGU6bnVsbCxyZXBsYWNlOm51bGwsJCRvcmlnaW5hbERpcmVjdGl2ZTpBfSksST1HKEEudGVtcGxhdGVVcmwpP0EudGVtcGxhdGVVcmwoYixjKTpBLnRlbXBsYXRlVXJsLHk9QS50ZW1wbGF0ZU5hbWVzcGFjZTtiLmVtcHR5KCk7bChJKS50aGVuKGZ1bmN0aW9uKGwpe3ZhciBxLHQ7bD1oYShsKTtpZihBLnJlcGxhY2Upe2w9VGIudGVzdChsKT8KWGMoWWIoeSxUKGwpKSk6W107cT1sWzBdO2lmKDEhPWwubGVuZ3RofHwxIT09cS5ub2RlVHlwZSl0aHJvdyBnYSgidHBscnQiLEEubmFtZSxJKTtsPXskYXR0cjp7fX07WShkLGIscSk7dmFyIHo9aWEocSxbXSxsKTtLKEEuc2NvcGUpJiZZYyh6LCEwKTthPXouY29uY2F0KGEpO1IoYyxsKX1lbHNlIHE9RSxiLmh0bWwobCk7YS51bnNoaWZ0KHcpO209JChhLHEsYyxlLGIsQSxmLGcsaCk7cChkLGZ1bmN0aW9uKGEsYyl7YT09cSYmKGRbY109YlswXSl9KTtmb3Iobj1XKGJbMF0uY2hpbGROb2RlcyxlKTtrLmxlbmd0aDspe2w9ay5zaGlmdCgpO3Q9ay5zaGlmdCgpO3ZhciBGPWsuc2hpZnQoKSxWPWsuc2hpZnQoKSx6PWJbMF07aWYoIWwuJCRkZXN0cm95ZWQpe2lmKHQhPT1FKXt2YXIgUT10LmNsYXNzTmFtZTtoLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlJiZBLnJlcGxhY2V8fCh6PVZiKHEpKTtZKEYsRCh0KSx6KTtDKEQoeiksUSl9dD1tLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50PwpPKGwsbS50cmFuc2NsdWRlLFYpOlY7bShuLGwseixkLHQpfX1rPW51bGx9KTtyZXR1cm4gZnVuY3Rpb24oYSxiLGMsZCxlKXthPWU7Yi4kJGRlc3Ryb3llZHx8KGs/ay5wdXNoKGIsYyxkLGEpOihtLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50JiYoYT1PKGIsbS50cmFuc2NsdWRlLGUpKSxtKG4sYixjLGQsYSkpKX19ZnVuY3Rpb24gd2EoYSxiKXt2YXIgYz1iLnByaW9yaXR5LWEucHJpb3JpdHk7cmV0dXJuIDAhPT1jP2M6YS5uYW1lIT09Yi5uYW1lP2EubmFtZTxiLm5hbWU/LTE6MTphLmluZGV4LWIuaW5kZXh9ZnVuY3Rpb24gVmEoYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXtyZXR1cm4gYT8iIChtb2R1bGU6ICIrYSsiKSI6IiJ9aWYoYil0aHJvdyBnYSgibXVsdGlkaXIiLGIubmFtZSxlKGIuJCRtb2R1bGVOYW1lKSxjLm5hbWUsZShjLiQkbW9kdWxlTmFtZSksYSx1YShkKSk7fWZ1bmN0aW9uIFAoYSxjKXt2YXIgZD1iKGMsITApO2QmJmEucHVzaCh7cHJpb3JpdHk6MCxjb21waWxlOmZ1bmN0aW9uKGEpe2E9CmEucGFyZW50KCk7dmFyIGI9ISFhLmxlbmd0aDtiJiZJLiQkYWRkQmluZGluZ0NsYXNzKGEpO3JldHVybiBmdW5jdGlvbihhLGMpe3ZhciBlPWMucGFyZW50KCk7Ynx8SS4kJGFkZEJpbmRpbmdDbGFzcyhlKTtJLiQkYWRkQmluZGluZ0luZm8oZSxkLmV4cHJlc3Npb25zKTthLiR3YXRjaChkLGZ1bmN0aW9uKGEpe2NbMF0ubm9kZVZhbHVlPWF9KX19fSl9ZnVuY3Rpb24gWWIoYSxiKXthPU0oYXx8Imh0bWwiKTtzd2l0Y2goYSl7Y2FzZSAic3ZnIjpjYXNlICJtYXRoIjp2YXIgYz1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2MuaW5uZXJIVE1MPSI8IithKyI+IitiKyI8LyIrYSsiPiI7cmV0dXJuIGMuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO2RlZmF1bHQ6cmV0dXJuIGJ9fWZ1bmN0aW9uIFMoYSxiKXtpZigic3JjZG9jIj09YilyZXR1cm4gRi5IVE1MO3ZhciBjPW9hKGEpO2lmKCJ4bGlua0hyZWYiPT1ifHwiZm9ybSI9PWMmJiJhY3Rpb24iPT1ifHwiaW1nIiE9YyYmKCJzcmMiPT1ifHwKIm5nU3JjIj09YikpcmV0dXJuIEYuUkVTT1VSQ0VfVVJMfWZ1bmN0aW9uIFgoYSxjLGQsZSxmKXt2YXIgZz1TKGEsZSk7Zj1oW2VdfHxmO3ZhciBrPWIoZCwhMCxnLGYpO2lmKGspe2lmKCJtdWx0aXBsZSI9PT1lJiYic2VsZWN0Ij09PW9hKGEpKXRocm93IGdhKCJzZWxtdWx0aSIsdWEoYSkpO2MucHVzaCh7cHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYyxoKXtjPWguJCRvYnNlcnZlcnN8fChoLiQkb2JzZXJ2ZXJzPVooKSk7aWYobS50ZXN0KGUpKXRocm93IGdhKCJub2RvbWV2ZW50cyIpO3ZhciBsPWhbZV07bCE9PWQmJihrPWwmJmIobCwhMCxnLGYpLGQ9bCk7ayYmKGhbZV09ayhhKSwoY1tlXXx8KGNbZV09W10pKS4kJGludGVyPSEwLChoLiQkb2JzZXJ2ZXJzJiZoLiQkb2JzZXJ2ZXJzW2VdLiQkc2NvcGV8fGEpLiR3YXRjaChrLGZ1bmN0aW9uKGEsYil7ImNsYXNzIj09PWUmJmEhPWI/aC4kdXBkYXRlQ2xhc3MoYSxiKTpoLiRzZXQoZSwKYSl9KSl9fX19KX19ZnVuY3Rpb24gWShhLGIsYyl7dmFyIGQ9YlswXSxlPWIubGVuZ3RoLGY9ZC5wYXJlbnROb2RlLGcsaDtpZihhKWZvcihnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKWlmKGFbZ109PWQpe2FbZysrXT1jO2g9ZytlLTE7Zm9yKHZhciBrPWEubGVuZ3RoO2c8aztnKyssaCsrKWg8az9hW2ddPWFbaF06ZGVsZXRlIGFbZ107YS5sZW5ndGgtPWUtMTthLmNvbnRleHQ9PT1kJiYoYS5jb250ZXh0PWMpO2JyZWFrfWYmJmYucmVwbGFjZUNoaWxkKGMsZCk7YT1VLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmFwcGVuZENoaWxkKGQpO0QuaGFzRGF0YShkKSYmKEQuZGF0YShjLEQuZGF0YShkKSkscGE/KFJiPSEwLHBhLmNsZWFuRGF0YShbZF0pKTpkZWxldGUgRC5jYWNoZVtkW0QuZXhwYW5kb11dKTtkPTE7Zm9yKGU9Yi5sZW5ndGg7ZDxlO2QrKylmPWJbZF0sRChmKS5yZW1vdmUoKSxhLmFwcGVuZENoaWxkKGYpLGRlbGV0ZSBiW2RdO2JbMF09YztiLmxlbmd0aD0xfWZ1bmN0aW9uIGJhKGEsCmIpe3JldHVybiBOKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhLGIpfWZ1bmN0aW9uIGNhKGEsYixkLGUsZixnKXt0cnl7YShiLGQsZSxmLGcpfWNhdGNoKGgpe2MoaCx1YShkKSl9fWZ1bmN0aW9uIGFhKGEsYyxkLGUsZil7dmFyIGc9W107cChlLGZ1bmN0aW9uKGUsaCl7dmFyIGs9ZS5hdHRyTmFtZSxtPWUub3B0aW9uYWwsbCxuLHEsQTtzd2l0Y2goZS5tb2RlKXtjYXNlICJAIjptfHxzYS5jYWxsKGMsayl8fChkW2hdPWNba109dm9pZCAwKTtjLiRvYnNlcnZlKGssZnVuY3Rpb24oYSl7SChhKSYmKGRbaF09YSl9KTtjLiQkb2JzZXJ2ZXJzW2tdLiQkc2NvcGU9YTtsPWNba107SChsKT9kW2hdPWIobCkoYSk6TWEobCkmJihkW2hdPWwpO2JyZWFrO2Nhc2UgIj0iOmlmKCFzYS5jYWxsKGMsaykpe2lmKG0pYnJlYWs7Y1trXT12b2lkIDB9aWYobSYmIWNba10pYnJlYWs7bj15KGNba10pO0E9bi5saXRlcmFsP2xhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT0KYnx8YSE9PWEmJmIhPT1ifTtxPW4uYXNzaWdufHxmdW5jdGlvbigpe2w9ZFtoXT1uKGEpO3Rocm93IGdhKCJub25hc3NpZ24iLGNba10sayxmLm5hbWUpO307bD1kW2hdPW4oYSk7bT1mdW5jdGlvbihiKXtBKGIsZFtoXSl8fChBKGIsbCk/cShhLGI9ZFtoXSk6ZFtoXT1iKTtyZXR1cm4gbD1ifTttLiRzdGF0ZWZ1bD0hMDttPWUuY29sbGVjdGlvbj9hLiR3YXRjaENvbGxlY3Rpb24oY1trXSxtKTphLiR3YXRjaCh5KGNba10sbSksbnVsbCxuLmxpdGVyYWwpO2cucHVzaChtKTticmVhaztjYXNlICImIjpuPWMuaGFzT3duUHJvcGVydHkoayk/eShjW2tdKTp2O2lmKG49PT12JiZtKWJyZWFrO2RbaF09ZnVuY3Rpb24oYil7cmV0dXJuIG4oYSxiKX19fSk7cmV0dXJuIGcubGVuZ3RoJiZmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9Zy5sZW5ndGg7YTxiOysrYSlnW2FdKCl9fXZhciBkYT1mdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPU9iamVjdC5rZXlzKGIpLGQsZSxmO2Q9MDtmb3IoZT1jLmxlbmd0aDtkPAplO2QrKylmPWNbZF0sdGhpc1tmXT1iW2ZdfWVsc2UgdGhpcy4kYXR0cj17fTt0aGlzLiQkZWxlbWVudD1hfTtkYS5wcm90b3R5cGU9eyRub3JtYWxpemU6dmEsJGFkZENsYXNzOmZ1bmN0aW9uKGEpe2EmJjA8YS5sZW5ndGgmJlEuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsYSl9LCRyZW1vdmVDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZRLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkdXBkYXRlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz0kYyhhLGIpO2MmJmMubGVuZ3RoJiZRLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGMpOyhjPSRjKGIsYSkpJiZjLmxlbmd0aCYmUS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxjKX0sJHNldDpmdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1SYyh0aGlzLiQkZWxlbWVudFswXSxhKSxnPWFkW2FdLGg9YTtmPyh0aGlzLiQkZWxlbWVudC5wcm9wKGEsYiksZT1mKTpnJiYodGhpc1tnXT1iLGg9Zyk7dGhpc1thXT1iO2U/dGhpcy4kYXR0clthXT0KZTooZT10aGlzLiRhdHRyW2FdKXx8KHRoaXMuJGF0dHJbYV09ZT16YyhhLCItIikpO2Y9b2EodGhpcy4kJGVsZW1lbnQpO2lmKCJhIj09PWYmJiJocmVmIj09PWF8fCJpbWciPT09ZiYmInNyYyI9PT1hKXRoaXNbYV09Yj1FKGIsInNyYyI9PT1hKTtlbHNlIGlmKCJpbWciPT09ZiYmInNyY3NldCI9PT1hJiZ1KGIpKXtmb3IodmFyIGY9IiIsZz1UKGIpLGs9LyhccytcZCt4XHMqLHxccytcZCt3XHMqLHxccyssfCxccyspLyxrPS9ccy8udGVzdChnKT9rOi8oLCkvLGc9Zy5zcGxpdChrKSxrPU1hdGguZmxvb3IoZy5sZW5ndGgvMiksbT0wO208azttKyspdmFyIGw9MiptLGY9ZitFKFQoZ1tsXSksITApLGY9ZisoIiAiK1QoZ1tsKzFdKSk7Zz1UKGdbMiptXSkuc3BsaXQoL1xzLyk7Zis9RShUKGdbMF0pLCEwKTsyPT09Zy5sZW5ndGgmJihmKz0iICIrVChnWzFdKSk7dGhpc1thXT1iPWZ9ITEhPT1kJiYobnVsbD09PWJ8fHIoYik/dGhpcy4kJGVsZW1lbnQucmVtb3ZlQXR0cihlKTp0aGlzLiQkZWxlbWVudC5hdHRyKGUsCmIpKTsoYT10aGlzLiQkb2JzZXJ2ZXJzKSYmcChhW2hdLGZ1bmN0aW9uKGEpe3RyeXthKGIpfWNhdGNoKGQpe2MoZCl9fSl9LCRvYnNlcnZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuJCRvYnNlcnZlcnN8fChjLiQkb2JzZXJ2ZXJzPVooKSksZT1kW2FdfHwoZFthXT1bXSk7ZS5wdXNoKGIpO1YuJGV2YWxBc3luYyhmdW5jdGlvbigpe2UuJCRpbnRlcnx8IWMuaGFzT3duUHJvcGVydHkoYSl8fHIoY1thXSl8fGIoY1thXSl9KTtyZXR1cm4gZnVuY3Rpb24oKXthYihlLGIpfX19O3ZhciBlYT1iLnN0YXJ0U3ltYm9sKCksZmE9Yi5lbmRTeW1ib2woKSxoYT0ie3siPT1lYSYmIn19Ij09ZmE/WmE6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXHtcey9nLGVhKS5yZXBsYWNlKC99fS9nLGZhKX0samE9L15uZ0F0dHJbQS1aXS8sa2E9L14oLispU3RhcnQkLztJLiQkYWRkQmluZGluZ0luZm89bj9mdW5jdGlvbihhLGIpe3ZhciBjPWEuZGF0YSgiJGJpbmRpbmciKXx8W107TChiKT8KYz1jLmNvbmNhdChiKTpjLnB1c2goYik7YS5kYXRhKCIkYmluZGluZyIsYyl9OnY7SS4kJGFkZEJpbmRpbmdDbGFzcz1uP2Z1bmN0aW9uKGEpe0MoYSwibmctYmluZGluZyIpfTp2O0kuJCRhZGRTY29wZUluZm89bj9mdW5jdGlvbihhLGIsYyxkKXthLmRhdGEoYz9kPyIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZSI6IiRpc29sYXRlU2NvcGUiOiIkc2NvcGUiLGIpfTp2O0kuJCRhZGRTY29wZUNsYXNzPW4/ZnVuY3Rpb24oYSxiKXtDKGEsYj8ibmctaXNvbGF0ZS1zY29wZSI6Im5nLXNjb3BlIil9OnY7cmV0dXJuIEl9XX1mdW5jdGlvbiB2YShhKXtyZXR1cm4gZWIoYS5yZXBsYWNlKFdjLCIiKSl9ZnVuY3Rpb24gJGMoYSxiKXt2YXIgZD0iIixjPWEuc3BsaXQoL1xzKy8pLGU9Yi5zcGxpdCgvXHMrLyksZj0wO2E6Zm9yKDtmPGMubGVuZ3RoO2YrKyl7Zm9yKHZhciBnPWNbZl0saD0wO2g8ZS5sZW5ndGg7aCsrKWlmKGc9PWVbaF0pY29udGludWUgYTtkKz0oMDxkLmxlbmd0aD8iICI6IiIpKwpnfXJldHVybiBkfWZ1bmN0aW9uIFhjKGEpe2E9RChhKTt2YXIgYj1hLmxlbmd0aDtpZigxPj1iKXJldHVybiBhO2Zvcig7Yi0tOyk4PT09YVtiXS5ub2RlVHlwZSYmWGYuY2FsbChhLGIsMSk7cmV0dXJuIGF9ZnVuY3Rpb24gZGYoKXt2YXIgYT17fSxiPSExO3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYixjKXtTYShiLCJjb250cm9sbGVyIik7SyhiKT9OKGEsYik6YVtiXT1jfTt0aGlzLmFsbG93R2xvYmFscz1mdW5jdGlvbigpe2I9ITB9O3RoaXMuJGdldD1bIiRpbmplY3RvciIsIiR3aW5kb3ciLGZ1bmN0aW9uKGQsYyl7ZnVuY3Rpb24gZShhLGIsYyxkKXtpZighYXx8IUsoYS4kc2NvcGUpKXRocm93IEIoIiRjb250cm9sbGVyIikoIm5vc2NwIixkLGIpO2EuJHNjb3BlW2JdPWN9cmV0dXJuIGZ1bmN0aW9uKGYsZyxoLGspe3ZhciBtLGwsbjtoPSEwPT09aDtrJiZIKGspJiYobj1rKTtpZihIKGYpKXtrPWYubWF0Y2goWmMpO2lmKCFrKXRocm93IFlmKCJjdHJsZm10IixmKTtsPWtbMV07Cm49bnx8a1szXTtmPWEuaGFzT3duUHJvcGVydHkobCk/YVtsXTpCYyhnLiRzY29wZSxsLCEwKXx8KGI/QmMoYyxsLCEwKTp4KTtSYShmLGwsITApfWlmKGgpcmV0dXJuIGg9KEwoZik/ZltmLmxlbmd0aC0xXTpmKS5wcm90b3R5cGUsbT1PYmplY3QuY3JlYXRlKGh8fG51bGwpLG4mJmUoZyxuLG0sbHx8Zi5uYW1lKSxOKGZ1bmN0aW9uKCl7dmFyIGE9ZC5pbnZva2UoZixtLGcsbCk7YSE9PW0mJihLKGEpfHxHKGEpKSYmKG09YSxuJiZlKGcsbixtLGx8fGYubmFtZSkpO3JldHVybiBtfSx7aW5zdGFuY2U6bSxpZGVudGlmaWVyOm59KTttPWQuaW5zdGFudGlhdGUoZixnLGwpO24mJmUoZyxuLG0sbHx8Zi5uYW1lKTtyZXR1cm4gbX19XX1mdW5jdGlvbiBlZigpe3RoaXMuJGdldD1bIiR3aW5kb3ciLGZ1bmN0aW9uKGEpe3JldHVybiBEKGEuZG9jdW1lbnQpfV19ZnVuY3Rpb24gZmYoKXt0aGlzLiRnZXQ9WyIkbG9nIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXthLmVycm9yLmFwcGx5KGEsCmFyZ3VtZW50cyl9fV19ZnVuY3Rpb24gWmIoYSl7cmV0dXJuIEsoYSk/ZWEoYSk/YS50b0lTT1N0cmluZygpOmNiKGEpOmF9ZnVuY3Rpb24gbGYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIiI7dmFyIGI9W107b2MoYSxmdW5jdGlvbihhLGMpe251bGw9PT1hfHxyKGEpfHwoTChhKT9wKGEsZnVuY3Rpb24oYSxkKXtiLnB1c2goaGEoYykrIj0iK2hhKFpiKGEpKSl9KTpiLnB1c2goaGEoYykrIj0iK2hhKFpiKGEpKSkpfSk7cmV0dXJuIGIuam9pbigiJiIpfX19ZnVuY3Rpb24gbWYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGUsZil7bnVsbD09PWF8fHIoYSl8fChMKGEpP3AoYSxmdW5jdGlvbihhLGMpe2IoYSxlKyJbIisoSyhhKT9jOiIiKSsiXSIpfSk6SyhhKSYmIWVhKGEpP29jKGEsZnVuY3Rpb24oYSxjKXtiKGEsZSsoZj8iIjoiWyIpK2MrKGY/IiI6Il0iKSl9KTpkLnB1c2goaGEoZSkrCiI9IitoYShaYihhKSkpKX1pZighYSlyZXR1cm4iIjt2YXIgZD1bXTtiKGEsIiIsITApO3JldHVybiBkLmpvaW4oIiYiKX19fWZ1bmN0aW9uICRiKGEsYil7aWYoSChhKSl7dmFyIGQ9YS5yZXBsYWNlKFpmLCIiKS50cmltKCk7aWYoZCl7dmFyIGM9YigiQ29udGVudC1UeXBlIik7KGM9YyYmMD09PWMuaW5kZXhPZihiZCkpfHwoYz0oYz1kLm1hdGNoKCRmKSkmJmFnW2NbMF1dLnRlc3QoZCkpO2MmJihhPXVjKGQpKX19cmV0dXJuIGF9ZnVuY3Rpb24gY2QoYSl7dmFyIGI9WigpLGQ7SChhKT9wKGEuc3BsaXQoIlxuIiksZnVuY3Rpb24oYSl7ZD1hLmluZGV4T2YoIjoiKTt2YXIgZT1NKFQoYS5zdWJzdHIoMCxkKSkpO2E9VChhLnN1YnN0cihkKzEpKTtlJiYoYltlXT1iW2VdP2JbZV0rIiwgIithOmEpfSk6SyhhKSYmcChhLGZ1bmN0aW9uKGEsZCl7dmFyIGY9TShkKSxnPVQoYSk7ZiYmKGJbZl09YltmXT9iW2ZdKyIsICIrZzpnKX0pO3JldHVybiBifWZ1bmN0aW9uIGRkKGEpe3ZhciBiOwpyZXR1cm4gZnVuY3Rpb24oZCl7Ynx8KGI9Y2QoYSkpO3JldHVybiBkPyhkPWJbTShkKV0sdm9pZCAwPT09ZCYmKGQ9bnVsbCksZCk6Yn19ZnVuY3Rpb24gZWQoYSxiLGQsYyl7aWYoRyhjKSlyZXR1cm4gYyhhLGIsZCk7cChjLGZ1bmN0aW9uKGMpe2E9YyhhLGIsZCl9KTtyZXR1cm4gYX1mdW5jdGlvbiBrZigpe3ZhciBhPXRoaXMuZGVmYXVsdHM9e3RyYW5zZm9ybVJlc3BvbnNlOlskYl0sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oYSl7cmV0dXJuIEsoYSkmJiJbb2JqZWN0IEZpbGVdIiE9PW5hLmNhbGwoYSkmJiJbb2JqZWN0IEJsb2JdIiE9PW5hLmNhbGwoYSkmJiJbb2JqZWN0IEZvcm1EYXRhXSIhPT1uYS5jYWxsKGEpP2NiKGEpOmF9XSxoZWFkZXJzOntjb21tb246e0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qIn0scG9zdDpmYShhYykscHV0OmZhKGFjKSxwYXRjaDpmYShhYyl9LHhzcmZDb29raWVOYW1lOiJYU1JGLVRPS0VOIix4c3JmSGVhZGVyTmFtZToiWC1YU1JGLVRPS0VOIiwKcGFyYW1TZXJpYWxpemVyOiIkaHR0cFBhcmFtU2VyaWFsaXplciJ9LGI9ITE7dGhpcy51c2VBcHBseUFzeW5jPWZ1bmN0aW9uKGEpe3JldHVybiB1KGEpPyhiPSEhYSx0aGlzKTpifTt2YXIgZD0hMDt0aGlzLnVzZUxlZ2FjeVByb21pc2VFeHRlbnNpb25zPWZ1bmN0aW9uKGEpe3JldHVybiB1KGEpPyhkPSEhYSx0aGlzKTpkfTt2YXIgYz10aGlzLmludGVyY2VwdG9ycz1bXTt0aGlzLiRnZXQ9WyIkaHR0cEJhY2tlbmQiLCIkJGNvb2tpZVJlYWRlciIsIiRjYWNoZUZhY3RvcnkiLCIkcm9vdFNjb3BlIiwiJHEiLCIkaW5qZWN0b3IiLGZ1bmN0aW9uKGUsZixnLGgsayxtKXtmdW5jdGlvbiBsKGIpe2Z1bmN0aW9uIGMoYSl7dmFyIGI9Tih7fSxhKTtiLmRhdGE9ZWQoYS5kYXRhLGEuaGVhZGVycyxhLnN0YXR1cyxmLnRyYW5zZm9ybVJlc3BvbnNlKTthPWEuc3RhdHVzO3JldHVybiAyMDA8PWEmJjMwMD5hP2I6ay5yZWplY3QoYil9ZnVuY3Rpb24gZShhLGIpe3ZhciBjLGQ9e307cChhLGZ1bmN0aW9uKGEsCmUpe0coYSk/KGM9YShiKSxudWxsIT1jJiYoZFtlXT1jKSk6ZFtlXT1hfSk7cmV0dXJuIGR9aWYoIWRhLmlzT2JqZWN0KGIpKXRocm93IEIoIiRodHRwIikoImJhZHJlcSIsYik7aWYoIUgoYi51cmwpKXRocm93IEIoIiRodHRwIikoImJhZHJlcSIsYi51cmwpO3ZhciBmPU4oe21ldGhvZDoiZ2V0Iix0cmFuc2Zvcm1SZXF1ZXN0OmEudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTphLnRyYW5zZm9ybVJlc3BvbnNlLHBhcmFtU2VyaWFsaXplcjphLnBhcmFtU2VyaWFsaXplcn0sYik7Zi5oZWFkZXJzPWZ1bmN0aW9uKGIpe3ZhciBjPWEuaGVhZGVycyxkPU4oe30sYi5oZWFkZXJzKSxmLGcsaCxjPU4oe30sYy5jb21tb24sY1tNKGIubWV0aG9kKV0pO2E6Zm9yKGYgaW4gYyl7Zz1NKGYpO2ZvcihoIGluIGQpaWYoTShoKT09PWcpY29udGludWUgYTtkW2ZdPWNbZl19cmV0dXJuIGUoZCxmYShiKSl9KGIpO2YubWV0aG9kPXJiKGYubWV0aG9kKTtmLnBhcmFtU2VyaWFsaXplcj0KSChmLnBhcmFtU2VyaWFsaXplcik/bS5nZXQoZi5wYXJhbVNlcmlhbGl6ZXIpOmYucGFyYW1TZXJpYWxpemVyO3ZhciBnPVtmdW5jdGlvbihiKXt2YXIgZD1iLmhlYWRlcnMsZT1lZChiLmRhdGEsZGQoZCkseCxiLnRyYW5zZm9ybVJlcXVlc3QpO3IoZSkmJnAoZCxmdW5jdGlvbihhLGIpeyJjb250ZW50LXR5cGUiPT09TShiKSYmZGVsZXRlIGRbYl19KTtyKGIud2l0aENyZWRlbnRpYWxzKSYmIXIoYS53aXRoQ3JlZGVudGlhbHMpJiYoYi53aXRoQ3JlZGVudGlhbHM9YS53aXRoQ3JlZGVudGlhbHMpO3JldHVybiBuKGIsZSkudGhlbihjLGMpfSx4XSxoPWsud2hlbihmKTtmb3IocCh0LGZ1bmN0aW9uKGEpeyhhLnJlcXVlc3R8fGEucmVxdWVzdEVycm9yKSYmZy51bnNoaWZ0KGEucmVxdWVzdCxhLnJlcXVlc3RFcnJvcik7KGEucmVzcG9uc2V8fGEucmVzcG9uc2VFcnJvcikmJmcucHVzaChhLnJlc3BvbnNlLGEucmVzcG9uc2VFcnJvcil9KTtnLmxlbmd0aDspe2I9Zy5zaGlmdCgpO3ZhciBsPQpnLnNoaWZ0KCksaD1oLnRoZW4oYixsKX1kPyhoLnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7UmEoYSwiZm4iKTtoLnRoZW4oZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGYpfSk7cmV0dXJuIGh9LGguZXJyb3I9ZnVuY3Rpb24oYSl7UmEoYSwiZm4iKTtoLnRoZW4obnVsbCxmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsZil9KTtyZXR1cm4gaH0pOihoLnN1Y2Nlc3M9ZmQoInN1Y2Nlc3MiKSxoLmVycm9yPWZkKCJlcnJvciIpKTtyZXR1cm4gaH1mdW5jdGlvbiBuKGMsZCl7ZnVuY3Rpb24gZyhhLGMsZCxlKXtmdW5jdGlvbiBmKCl7bShjLGEsZCxlKX1DJiYoMjAwPD1hJiYzMDA+YT9DLnB1dChPLFthLGMsY2QoZCksZV0pOkMucmVtb3ZlKE8pKTtiP2guJGFwcGx5QXN5bmMoZik6KGYoKSxoLiQkcGhhc2V8fGguJGFwcGx5KCkpfWZ1bmN0aW9uIG0oYSxiLGQsZSl7Yj0tMTw9Yj9iOjA7KDIwMDw9YiYmMzAwPmI/cC5yZXNvbHZlOnAucmVqZWN0KSh7ZGF0YTphLApzdGF0dXM6YixoZWFkZXJzOmRkKGQpLGNvbmZpZzpjLHN0YXR1c1RleHQ6ZX0pfWZ1bmN0aW9uIG4oYSl7bShhLmRhdGEsYS5zdGF0dXMsZmEoYS5oZWFkZXJzKCkpLGEuc3RhdHVzVGV4dCl9ZnVuY3Rpb24gdCgpe3ZhciBhPWwucGVuZGluZ1JlcXVlc3RzLmluZGV4T2YoYyk7LTEhPT1hJiZsLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoYSwxKX12YXIgcD1rLmRlZmVyKCksRT1wLnByb21pc2UsQyxJLFc9Yy5oZWFkZXJzLE89SihjLnVybCxjLnBhcmFtU2VyaWFsaXplcihjLnBhcmFtcykpO2wucGVuZGluZ1JlcXVlc3RzLnB1c2goYyk7RS50aGVuKHQsdCk7IWMuY2FjaGUmJiFhLmNhY2hlfHwhMT09PWMuY2FjaGV8fCJHRVQiIT09Yy5tZXRob2QmJiJKU09OUCIhPT1jLm1ldGhvZHx8KEM9SyhjLmNhY2hlKT9jLmNhY2hlOksoYS5jYWNoZSk/YS5jYWNoZTp6KTtDJiYoST1DLmdldChPKSx1KEkpP0kmJkcoSS50aGVuKT9JLnRoZW4obixuKTpMKEkpP20oSVsxXSxJWzBdLGZhKElbMl0pLApJWzNdKTptKEksMjAwLHt9LCJPSyIpOkMucHV0KE8sRSkpO3IoSSkmJigoST1nZChjLnVybCk/ZigpW2MueHNyZkNvb2tpZU5hbWV8fGEueHNyZkNvb2tpZU5hbWVdOngpJiYoV1tjLnhzcmZIZWFkZXJOYW1lfHxhLnhzcmZIZWFkZXJOYW1lXT1JKSxlKGMubWV0aG9kLE8sZCxnLFcsYy50aW1lb3V0LGMud2l0aENyZWRlbnRpYWxzLGMucmVzcG9uc2VUeXBlKSk7cmV0dXJuIEV9ZnVuY3Rpb24gSihhLGIpezA8Yi5sZW5ndGgmJihhKz0oLTE9PWEuaW5kZXhPZigiPyIpPyI/IjoiJiIpK2IpO3JldHVybiBhfXZhciB6PWcoIiRodHRwIik7YS5wYXJhbVNlcmlhbGl6ZXI9SChhLnBhcmFtU2VyaWFsaXplcik/bS5nZXQoYS5wYXJhbVNlcmlhbGl6ZXIpOmEucGFyYW1TZXJpYWxpemVyO3ZhciB0PVtdO3AoYyxmdW5jdGlvbihhKXt0LnVuc2hpZnQoSChhKT9tLmdldChhKTptLmludm9rZShhKSl9KTtsLnBlbmRpbmdSZXF1ZXN0cz1bXTsoZnVuY3Rpb24oYSl7cChhcmd1bWVudHMsZnVuY3Rpb24oYSl7bFthXT0KZnVuY3Rpb24oYixjKXtyZXR1cm4gbChOKHt9LGN8fHt9LHttZXRob2Q6YSx1cmw6Yn0pKX19KX0pKCJnZXQiLCJkZWxldGUiLCJoZWFkIiwianNvbnAiKTsoZnVuY3Rpb24oYSl7cChhcmd1bWVudHMsZnVuY3Rpb24oYSl7bFthXT1mdW5jdGlvbihiLGMsZCl7cmV0dXJuIGwoTih7fSxkfHx7fSx7bWV0aG9kOmEsdXJsOmIsZGF0YTpjfSkpfX0pfSkoInBvc3QiLCJwdXQiLCJwYXRjaCIpO2wuZGVmYXVsdHM9YTtyZXR1cm4gbH1dfWZ1bmN0aW9uIG9mKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBSLlhNTEh0dHBSZXF1ZXN0fX19ZnVuY3Rpb24gbmYoKXt0aGlzLiRnZXQ9WyIkYnJvd3NlciIsIiR3aW5kb3ciLCIkZG9jdW1lbnQiLCIkeGhyRmFjdG9yeSIsZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuIGJnKGEsYyxhLmRlZmVyLGIuYW5ndWxhci5jYWxsYmFja3MsZFswXSl9XX1mdW5jdGlvbiBiZyhhLGIsZCxjLGUpe2Z1bmN0aW9uIGYoYSwKYixkKXt2YXIgZj1lLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLGw9bnVsbDtmLnR5cGU9InRleHQvamF2YXNjcmlwdCI7Zi5zcmM9YTtmLmFzeW5jPSEwO2w9ZnVuY3Rpb24oYSl7Zi5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixsLCExKTtmLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIixsLCExKTtlLmJvZHkucmVtb3ZlQ2hpbGQoZik7Zj1udWxsO3ZhciBnPS0xLHo9InVua25vd24iO2EmJigibG9hZCIhPT1hLnR5cGV8fGNbYl0uY2FsbGVkfHwoYT17dHlwZToiZXJyb3IifSksej1hLnR5cGUsZz0iZXJyb3IiPT09YS50eXBlPzQwNDoyMDApO2QmJmQoZyx6KX07Zi5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixsLCExKTtmLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixsLCExKTtlLmJvZHkuYXBwZW5kQ2hpbGQoZik7cmV0dXJuIGx9cmV0dXJuIGZ1bmN0aW9uKGUsaCxrLG0sbCxuLEoseil7ZnVuY3Rpb24gdCgpe3kmJnkoKTt3JiZ3LmFib3J0KCl9ZnVuY3Rpb24gQShiLGMsCmUsZixnKXt1KEYpJiZkLmNhbmNlbChGKTt5PXc9bnVsbDtiKGMsZSxmLGcpO2EuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCh2KX1hLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtoPWh8fGEudXJsKCk7aWYoImpzb25wIj09TShlKSl7dmFyIHE9Il8iKyhjLmNvdW50ZXIrKykudG9TdHJpbmcoMzYpO2NbcV09ZnVuY3Rpb24oYSl7Y1txXS5kYXRhPWE7Y1txXS5jYWxsZWQ9ITB9O3ZhciB5PWYoaC5yZXBsYWNlKCJKU09OX0NBTExCQUNLIiwiYW5ndWxhci5jYWxsYmFja3MuIitxKSxxLGZ1bmN0aW9uKGEsYil7QShtLGEsY1txXS5kYXRhLCIiLGIpO2NbcV09dn0pfWVsc2V7dmFyIHc9YihlLGgpO3cub3BlbihlLGgsITApO3AobCxmdW5jdGlvbihhLGIpe3UoYSkmJncuc2V0UmVxdWVzdEhlYWRlcihiLGEpfSk7dy5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT13LnN0YXR1c1RleHR8fCIiLGI9InJlc3BvbnNlImluIHc/dy5yZXNwb25zZTp3LnJlc3BvbnNlVGV4dCxjPQoxMjIzPT09dy5zdGF0dXM/MjA0Oncuc3RhdHVzOzA9PT1jJiYoYz1iPzIwMDoiZmlsZSI9PXhhKGgpLnByb3RvY29sPzQwNDowKTtBKG0sYyxiLHcuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksYSl9O2U9ZnVuY3Rpb24oKXtBKG0sLTEsbnVsbCxudWxsLCIiKX07dy5vbmVycm9yPWU7dy5vbmFib3J0PWU7SiYmKHcud2l0aENyZWRlbnRpYWxzPSEwKTtpZih6KXRyeXt3LnJlc3BvbnNlVHlwZT16fWNhdGNoKFYpe2lmKCJqc29uIiE9PXopdGhyb3cgVjt9dy5zZW5kKHIoayk/bnVsbDprKX1pZigwPG4pdmFyIEY9ZCh0LG4pO2Vsc2UgbiYmRyhuLnRoZW4pJiZuLnRoZW4odCl9fWZ1bmN0aW9uIGhmKCl7dmFyIGE9Int7IixiPSJ9fSI7dGhpcy5zdGFydFN5bWJvbD1mdW5jdGlvbihiKXtyZXR1cm4gYj8oYT1iLHRoaXMpOmF9O3RoaXMuZW5kU3ltYm9sPWZ1bmN0aW9uKGEpe3JldHVybiBhPyhiPWEsdGhpcyk6Yn07dGhpcy4kZ2V0PVsiJHBhcnNlIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLCIkc2NlIiwKZnVuY3Rpb24oZCxjLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuIlxcXFxcXCIrYX1mdW5jdGlvbiBnKGMpe3JldHVybiBjLnJlcGxhY2UobCxhKS5yZXBsYWNlKG4sYil9ZnVuY3Rpb24gaChmLGgsbCxuKXtmdW5jdGlvbiBxKGEpe3RyeXt2YXIgYj1hO2E9bD9lLmdldFRydXN0ZWQobCxiKTplLnZhbHVlT2YoYik7dmFyIGQ7aWYobiYmIXUoYSkpZD1hO2Vsc2UgaWYobnVsbD09YSlkPSIiO2Vsc2V7c3dpdGNoKHR5cGVvZiBhKXtjYXNlICJzdHJpbmciOmJyZWFrO2Nhc2UgIm51bWJlciI6YT0iIithO2JyZWFrO2RlZmF1bHQ6YT1jYihhKX1kPWF9cmV0dXJuIGR9Y2F0Y2goZyl7YyhJYS5pbnRlcnIoZixnKSl9fW49ISFuO2Zvcih2YXIgeSx3LHA9MCxGPVtdLFE9W10sRT1mLmxlbmd0aCxDPVtdLEk9W107cDxFOylpZigtMSE9KHk9Zi5pbmRleE9mKGEscCkpJiYtMSE9KHc9Zi5pbmRleE9mKGIseStrKSkpcCE9PXkmJkMucHVzaChnKGYuc3Vic3RyaW5nKHAseSkpKSxwPWYuc3Vic3RyaW5nKHkrCmssdyksRi5wdXNoKHApLFEucHVzaChkKHAscSkpLHA9dyttLEkucHVzaChDLmxlbmd0aCksQy5wdXNoKCIiKTtlbHNle3AhPT1FJiZDLnB1c2goZyhmLnN1YnN0cmluZyhwKSkpO2JyZWFrfWwmJjE8Qy5sZW5ndGgmJklhLnRocm93Tm9jb25jYXQoZik7aWYoIWh8fEYubGVuZ3RoKXt2YXIgVz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPUYubGVuZ3RoO2I8YztiKyspe2lmKG4mJnIoYVtiXSkpcmV0dXJuO0NbSVtiXV09YVtiXX1yZXR1cm4gQy5qb2luKCIiKX07cmV0dXJuIE4oZnVuY3Rpb24oYSl7dmFyIGI9MCxkPUYubGVuZ3RoLGU9QXJyYXkoZCk7dHJ5e2Zvcig7YjxkO2IrKyllW2JdPVFbYl0oYSk7cmV0dXJuIFcoZSl9Y2F0Y2goZyl7YyhJYS5pbnRlcnIoZixnKSl9fSx7ZXhwOmYsZXhwcmVzc2lvbnM6RiwkJHdhdGNoRGVsZWdhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYztyZXR1cm4gYS4kd2F0Y2hHcm91cChRLGZ1bmN0aW9uKGQsZSl7dmFyIGY9VyhkKTtHKGIpJiZiLmNhbGwodGhpcywKZixkIT09ZT9jOmYsYSk7Yz1mfSl9fSl9fXZhciBrPWEubGVuZ3RoLG09Yi5sZW5ndGgsbD1uZXcgUmVnRXhwKGEucmVwbGFjZSgvLi9nLGYpLCJnIiksbj1uZXcgUmVnRXhwKGIucmVwbGFjZSgvLi9nLGYpLCJnIik7aC5zdGFydFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBhfTtoLmVuZFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBifTtyZXR1cm4gaH1dfWZ1bmN0aW9uIGpmKCl7dGhpcy4kZ2V0PVsiJHJvb3RTY29wZSIsIiR3aW5kb3ciLCIkcSIsIiQkcSIsZnVuY3Rpb24oYSxiLGQsYyl7ZnVuY3Rpb24gZShlLGgsayxtKXt2YXIgbD00PGFyZ3VtZW50cy5sZW5ndGgsbj1sP3RhLmNhbGwoYXJndW1lbnRzLDQpOltdLEo9Yi5zZXRJbnRlcnZhbCx6PWIuY2xlYXJJbnRlcnZhbCx0PTAsQT11KG0pJiYhbSxxPShBP2M6ZCkuZGVmZXIoKSx5PXEucHJvbWlzZTtrPXUoayk/azowO3kudGhlbihudWxsLG51bGwsbD9mdW5jdGlvbigpe2UuYXBwbHkobnVsbCxuKX06ZSk7eS4kJGludGVydmFsSWQ9CkooZnVuY3Rpb24oKXtxLm5vdGlmeSh0KyspOzA8ayYmdD49ayYmKHEucmVzb2x2ZSh0KSx6KHkuJCRpbnRlcnZhbElkKSxkZWxldGUgZlt5LiQkaW50ZXJ2YWxJZF0pO0F8fGEuJGFwcGx5KCl9LGgpO2ZbeS4kJGludGVydmFsSWRdPXE7cmV0dXJuIHl9dmFyIGY9e307ZS5jYW5jZWw9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuJCRpbnRlcnZhbElkIGluIGY/KGZbYS4kJGludGVydmFsSWRdLnJlamVjdCgiY2FuY2VsZWQiKSxiLmNsZWFySW50ZXJ2YWwoYS4kJGludGVydmFsSWQpLGRlbGV0ZSBmW2EuJCRpbnRlcnZhbElkXSwhMCk6ITF9O3JldHVybiBlfV19ZnVuY3Rpb24gYmMoYSl7YT1hLnNwbGl0KCIvIik7Zm9yKHZhciBiPWEubGVuZ3RoO2ItLTspYVtiXT1uYihhW2JdKTtyZXR1cm4gYS5qb2luKCIvIil9ZnVuY3Rpb24gaGQoYSxiKXt2YXIgZD14YShhKTtiLiQkcHJvdG9jb2w9ZC5wcm90b2NvbDtiLiQkaG9zdD1kLmhvc3RuYW1lO2IuJCRwb3J0PWNhKGQucG9ydCl8fGNnW2QucHJvdG9jb2xdfHwKbnVsbH1mdW5jdGlvbiBpZChhLGIpe3ZhciBkPSIvIiE9PWEuY2hhckF0KDApO2QmJihhPSIvIithKTt2YXIgYz14YShhKTtiLiQkcGF0aD1kZWNvZGVVUklDb21wb25lbnQoZCYmIi8iPT09Yy5wYXRobmFtZS5jaGFyQXQoMCk/Yy5wYXRobmFtZS5zdWJzdHJpbmcoMSk6Yy5wYXRobmFtZSk7Yi4kJHNlYXJjaD14YyhjLnNlYXJjaCk7Yi4kJGhhc2g9ZGVjb2RlVVJJQ29tcG9uZW50KGMuaGFzaCk7Yi4kJHBhdGgmJiIvIiE9Yi4kJHBhdGguY2hhckF0KDApJiYoYi4kJHBhdGg9Ii8iK2IuJCRwYXRoKX1mdW5jdGlvbiByYShhLGIpe2lmKDA9PT1iLmluZGV4T2YoYSkpcmV0dXJuIGIuc3Vic3RyKGEubGVuZ3RoKX1mdW5jdGlvbiBHYShhKXt2YXIgYj1hLmluZGV4T2YoIiMiKTtyZXR1cm4tMT09Yj9hOmEuc3Vic3RyKDAsYil9ZnVuY3Rpb24gaGIoYSl7cmV0dXJuIGEucmVwbGFjZSgvKCMuKyl8IyQvLCIkMSIpfWZ1bmN0aW9uIGNjKGEsYixkKXt0aGlzLiQkaHRtbDU9ITA7ZD1kfHwiIjsKaGQoYSx0aGlzKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24oYSl7dmFyIGQ9cmEoYixhKTtpZighSChkKSl0aHJvdyBDYigiaXB0aHByZngiLGEsYik7aWQoZCx0aGlzKTt0aGlzLiQkcGF0aHx8KHRoaXMuJCRwYXRoPSIvIik7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYT1RYih0aGlzLiQkc2VhcmNoKSxkPXRoaXMuJCRoYXNoPyIjIituYih0aGlzLiQkaGFzaCk6IiI7dGhpcy4kJHVybD1iYyh0aGlzLiQkcGF0aCkrKGE/Ij8iK2E6IiIpK2Q7dGhpcy4kJGFic1VybD1iK3RoaXMuJCR1cmwuc3Vic3RyKDEpfTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGMsZSl7aWYoZSYmIiMiPT09ZVswXSlyZXR1cm4gdGhpcy5oYXNoKGUuc2xpY2UoMSkpLCEwO3ZhciBmLGc7dShmPXJhKGEsYykpPyhnPWYsZz11KGY9cmEoZCxmKSk/YisocmEoIi8iLGYpfHxmKTphK2cpOnUoZj1yYShiLGMpKT9nPWIrZjpiPT1jKyIvIiYmKGc9Yik7ZyYmdGhpcy4kJHBhcnNlKGcpOwpyZXR1cm4hIWd9fWZ1bmN0aW9uIGRjKGEsYixkKXtoZChhLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihjKXt2YXIgZT1yYShhLGMpfHxyYShiLGMpLGY7cihlKXx8IiMiIT09ZS5jaGFyQXQoMCk/dGhpcy4kJGh0bWw1P2Y9ZTooZj0iIixyKGUpJiYoYT1jLHRoaXMucmVwbGFjZSgpKSk6KGY9cmEoZCxlKSxyKGYpJiYoZj1lKSk7aWQoZix0aGlzKTtjPXRoaXMuJCRwYXRoO3ZhciBlPWEsZz0vXlwvW0EtWl06KFwvLiopLzswPT09Zi5pbmRleE9mKGUpJiYoZj1mLnJlcGxhY2UoZSwiIikpO2cuZXhlYyhmKXx8KGM9KGY9Zy5leGVjKGMpKT9mWzFdOmMpO3RoaXMuJCRwYXRoPWM7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYj1RYih0aGlzLiQkc2VhcmNoKSxlPXRoaXMuJCRoYXNoPyIjIituYih0aGlzLiQkaGFzaCk6IiI7dGhpcy4kJHVybD1iYyh0aGlzLiQkcGF0aCkrKGI/Ij8iK2I6IiIpK2U7dGhpcy4kJGFic1VybD1hKyh0aGlzLiQkdXJsPwpkK3RoaXMuJCR1cmw6IiIpfTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGIsZCl7cmV0dXJuIEdhKGEpPT1HYShiKT8odGhpcy4kJHBhcnNlKGIpLCEwKTohMX19ZnVuY3Rpb24gamQoYSxiLGQpe3RoaXMuJCRodG1sNT0hMDtkYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihjLGUpe2lmKGUmJiIjIj09PWVbMF0pcmV0dXJuIHRoaXMuaGFzaChlLnNsaWNlKDEpKSwhMDt2YXIgZixnO2E9PUdhKGMpP2Y9YzooZz1yYShiLGMpKT9mPWErZCtnOmI9PT1jKyIvIiYmKGY9Yik7ZiYmdGhpcy4kJHBhcnNlKGYpO3JldHVybiEhZn07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYj1RYih0aGlzLiQkc2VhcmNoKSxlPXRoaXMuJCRoYXNoPyIjIituYih0aGlzLiQkaGFzaCk6IiI7dGhpcy4kJHVybD1iYyh0aGlzLiQkcGF0aCkrKGI/Ij8iK2I6IiIpK2U7dGhpcy4kJGFic1VybD1hK2QrdGhpcy4kJHVybH19ZnVuY3Rpb24gRGIoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYV19fQpmdW5jdGlvbiBrZChhLGIpe3JldHVybiBmdW5jdGlvbihkKXtpZihyKGQpKXJldHVybiB0aGlzW2FdO3RoaXNbYV09YihkKTt0aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfX1mdW5jdGlvbiBwZigpe3ZhciBhPSIiLGI9e2VuYWJsZWQ6ITEscmVxdWlyZUJhc2U6ITAscmV3cml0ZUxpbmtzOiEwfTt0aGlzLmhhc2hQcmVmaXg9ZnVuY3Rpb24oYil7cmV0dXJuIHUoYik/KGE9Yix0aGlzKTphfTt0aGlzLmh0bWw1TW9kZT1mdW5jdGlvbihhKXtyZXR1cm4gTWEoYSk/KGIuZW5hYmxlZD1hLHRoaXMpOksoYSk/KE1hKGEuZW5hYmxlZCkmJihiLmVuYWJsZWQ9YS5lbmFibGVkKSxNYShhLnJlcXVpcmVCYXNlKSYmKGIucmVxdWlyZUJhc2U9YS5yZXF1aXJlQmFzZSksTWEoYS5yZXdyaXRlTGlua3MpJiYoYi5yZXdyaXRlTGlua3M9YS5yZXdyaXRlTGlua3MpLHRoaXMpOmJ9O3RoaXMuJGdldD1bIiRyb290U2NvcGUiLCIkYnJvd3NlciIsIiRzbmlmZmVyIiwiJHJvb3RFbGVtZW50IiwiJHdpbmRvdyIsCmZ1bmN0aW9uKGQsYyxlLGYsZyl7ZnVuY3Rpb24gaChhLGIsZCl7dmFyIGU9bS51cmwoKSxmPW0uJCRzdGF0ZTt0cnl7Yy51cmwoYSxiLGQpLG0uJCRzdGF0ZT1jLnN0YXRlKCl9Y2F0Y2goZyl7dGhyb3cgbS51cmwoZSksbS4kJHN0YXRlPWYsZzt9fWZ1bmN0aW9uIGsoYSxiKXtkLiRicm9hZGNhc3QoIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MiLG0uYWJzVXJsKCksYSxtLiQkc3RhdGUsYil9dmFyIG0sbDtsPWMuYmFzZUhyZWYoKTt2YXIgbj1jLnVybCgpLEo7aWYoYi5lbmFibGVkKXtpZighbCYmYi5yZXF1aXJlQmFzZSl0aHJvdyBDYigibm9iYXNlIik7Sj1uLnN1YnN0cmluZygwLG4uaW5kZXhPZigiLyIsbi5pbmRleE9mKCIvLyIpKzIpKSsobHx8Ii8iKTtsPWUuaGlzdG9yeT9jYzpqZH1lbHNlIEo9R2EobiksbD1kYzt2YXIgej1KLnN1YnN0cigwLEdhKEopLmxhc3RJbmRleE9mKCIvIikrMSk7bT1uZXcgbChKLHosIiMiK2EpO20uJCRwYXJzZUxpbmtVcmwobixuKTttLiQkc3RhdGU9CmMuc3RhdGUoKTt2YXIgdD0vXlxzKihqYXZhc2NyaXB0fG1haWx0byk6L2k7Zi5vbigiY2xpY2siLGZ1bmN0aW9uKGEpe2lmKGIucmV3cml0ZUxpbmtzJiYhYS5jdHJsS2V5JiYhYS5tZXRhS2V5JiYhYS5zaGlmdEtleSYmMiE9YS53aGljaCYmMiE9YS5idXR0b24pe2Zvcih2YXIgZT1EKGEudGFyZ2V0KTsiYSIhPT1vYShlWzBdKTspaWYoZVswXT09PWZbMF18fCEoZT1lLnBhcmVudCgpKVswXSlyZXR1cm47dmFyIGg9ZS5wcm9wKCJocmVmIiksaz1lLmF0dHIoImhyZWYiKXx8ZS5hdHRyKCJ4bGluazpocmVmIik7SyhoKSYmIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddIj09PWgudG9TdHJpbmcoKSYmKGg9eGEoaC5hbmltVmFsKS5ocmVmKTt0LnRlc3QoaCl8fCFofHxlLmF0dHIoInRhcmdldCIpfHxhLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwhbS4kJHBhcnNlTGlua1VybChoLGspfHwoYS5wcmV2ZW50RGVmYXVsdCgpLG0uYWJzVXJsKCkhPWMudXJsKCkmJihkLiRhcHBseSgpLGcuYW5ndWxhclsiZmYtNjg0MjA4LXByZXZlbnREZWZhdWx0Il09CiEwKSl9fSk7aGIobS5hYnNVcmwoKSkhPWhiKG4pJiZjLnVybChtLmFic1VybCgpLCEwKTt2YXIgQT0hMDtjLm9uVXJsQ2hhbmdlKGZ1bmN0aW9uKGEsYil7cihyYSh6LGEpKT9nLmxvY2F0aW9uLmhyZWY9YTooZC4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIGM9bS5hYnNVcmwoKSxlPW0uJCRzdGF0ZSxmO2E9aGIoYSk7bS4kJHBhcnNlKGEpO20uJCRzdGF0ZT1iO2Y9ZC4kYnJvYWRjYXN0KCIkbG9jYXRpb25DaGFuZ2VTdGFydCIsYSxjLGIsZSkuZGVmYXVsdFByZXZlbnRlZDttLmFic1VybCgpPT09YSYmKGY/KG0uJCRwYXJzZShjKSxtLiQkc3RhdGU9ZSxoKGMsITEsZSkpOihBPSExLGsoYyxlKSkpfSksZC4kJHBoYXNlfHxkLiRkaWdlc3QoKSl9KTtkLiR3YXRjaChmdW5jdGlvbigpe3ZhciBhPWhiKGMudXJsKCkpLGI9aGIobS5hYnNVcmwoKSksZj1jLnN0YXRlKCksZz1tLiQkcmVwbGFjZSxsPWEhPT1ifHxtLiQkaHRtbDUmJmUuaGlzdG9yeSYmZiE9PW0uJCRzdGF0ZTtpZihBfHwKbClBPSExLGQuJGV2YWxBc3luYyhmdW5jdGlvbigpe3ZhciBiPW0uYWJzVXJsKCksYz1kLiRicm9hZGNhc3QoIiRsb2NhdGlvbkNoYW5nZVN0YXJ0IixiLGEsbS4kJHN0YXRlLGYpLmRlZmF1bHRQcmV2ZW50ZWQ7bS5hYnNVcmwoKT09PWImJihjPyhtLiQkcGFyc2UoYSksbS4kJHN0YXRlPWYpOihsJiZoKGIsZyxmPT09bS4kJHN0YXRlP251bGw6bS4kJHN0YXRlKSxrKGEsZikpKX0pO20uJCRyZXBsYWNlPSExfSk7cmV0dXJuIG19XX1mdW5jdGlvbiBxZigpe3ZhciBhPSEwLGI9dGhpczt0aGlzLmRlYnVnRW5hYmxlZD1mdW5jdGlvbihiKXtyZXR1cm4gdShiKT8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bIiR3aW5kb3ciLGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGMoYSl7YSBpbnN0YW5jZW9mIEVycm9yJiYoYS5zdGFjaz9hPWEubWVzc2FnZSYmLTE9PT1hLnN0YWNrLmluZGV4T2YoYS5tZXNzYWdlKT8iRXJyb3I6ICIrYS5tZXNzYWdlKyJcbiIrYS5zdGFjazphLnN0YWNrOmEuc291cmNlVVJMJiYKKGE9YS5tZXNzYWdlKyJcbiIrYS5zb3VyY2VVUkwrIjoiK2EubGluZSkpO3JldHVybiBhfWZ1bmN0aW9uIGUoYSl7dmFyIGI9ZC5jb25zb2xlfHx7fSxlPWJbYV18fGIubG9nfHx2O2E9ITE7dHJ5e2E9ISFlLmFwcGx5fWNhdGNoKGspe31yZXR1cm4gYT9mdW5jdGlvbigpe3ZhciBhPVtdO3AoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2EucHVzaChjKGIpKX0pO3JldHVybiBlLmFwcGx5KGIsYSl9OmZ1bmN0aW9uKGEsYil7ZShhLG51bGw9PWI/IiI6Yil9fXJldHVybntsb2c6ZSgibG9nIiksaW5mbzplKCJpbmZvIiksd2FybjplKCJ3YXJuIiksZXJyb3I6ZSgiZXJyb3IiKSxkZWJ1ZzpmdW5jdGlvbigpe3ZhciBjPWUoImRlYnVnIik7cmV0dXJuIGZ1bmN0aW9uKCl7YSYmYy5hcHBseShiLGFyZ3VtZW50cyl9fSgpfX1dfWZ1bmN0aW9uIFdhKGEsYil7aWYoIl9fZGVmaW5lR2V0dGVyX18iPT09YXx8Il9fZGVmaW5lU2V0dGVyX18iPT09YXx8Il9fbG9va3VwR2V0dGVyX18iPT09YXx8Il9fbG9va3VwU2V0dGVyX18iPT09CmF8fCJfX3Byb3RvX18iPT09YSl0aHJvdyBhYSgiaXNlY2ZsZCIsYik7cmV0dXJuIGF9ZnVuY3Rpb24gbGQoYSxiKXthKz0iIjtpZighSChhKSl0aHJvdyBhYSgiaXNlY2NzdCIsYik7cmV0dXJuIGF9ZnVuY3Rpb24geWEoYSxiKXtpZihhKXtpZihhLmNvbnN0cnVjdG9yPT09YSl0aHJvdyBhYSgiaXNlY2ZuIixiKTtpZihhLndpbmRvdz09PWEpdGhyb3cgYWEoImlzZWN3aW5kb3ciLGIpO2lmKGEuY2hpbGRyZW4mJihhLm5vZGVOYW1lfHxhLnByb3AmJmEuYXR0ciYmYS5maW5kKSl0aHJvdyBhYSgiaXNlY2RvbSIsYik7aWYoYT09PU9iamVjdCl0aHJvdyBhYSgiaXNlY29iaiIsYik7fXJldHVybiBhfWZ1bmN0aW9uIG1kKGEsYil7aWYoYSl7aWYoYS5jb25zdHJ1Y3Rvcj09PWEpdGhyb3cgYWEoImlzZWNmbiIsYik7aWYoYT09PWRnfHxhPT09ZWd8fGE9PT1mZyl0aHJvdyBhYSgiaXNlY2ZmIixiKTt9fWZ1bmN0aW9uIEViKGEsYil7aWYoYSYmKGE9PT0oMCkuY29uc3RydWN0b3J8fGE9PT0KKCExKS5jb25zdHJ1Y3Rvcnx8YT09PSIiLmNvbnN0cnVjdG9yfHxhPT09e30uY29uc3RydWN0b3J8fGE9PT1bXS5jb25zdHJ1Y3Rvcnx8YT09PUZ1bmN0aW9uLmNvbnN0cnVjdG9yKSl0aHJvdyBhYSgiaXNlY2FmIixiKTt9ZnVuY3Rpb24gZ2coYSxiKXtyZXR1cm4idW5kZWZpbmVkIiE9PXR5cGVvZiBhP2E6Yn1mdW5jdGlvbiBuZChhLGIpe3JldHVybiJ1bmRlZmluZWQiPT09dHlwZW9mIGE/YjoidW5kZWZpbmVkIj09PXR5cGVvZiBiP2E6YStifWZ1bmN0aW9uIFgoYSxiKXt2YXIgZCxjO3N3aXRjaChhLnR5cGUpe2Nhc2Ugcy5Qcm9ncmFtOmQ9ITA7cChhLmJvZHksZnVuY3Rpb24oYSl7WChhLmV4cHJlc3Npb24sYik7ZD1kJiZhLmV4cHJlc3Npb24uY29uc3RhbnR9KTthLmNvbnN0YW50PWQ7YnJlYWs7Y2FzZSBzLkxpdGVyYWw6YS5jb25zdGFudD0hMDthLnRvV2F0Y2g9W107YnJlYWs7Y2FzZSBzLlVuYXJ5RXhwcmVzc2lvbjpYKGEuYXJndW1lbnQsYik7YS5jb25zdGFudD1hLmFyZ3VtZW50LmNvbnN0YW50OwphLnRvV2F0Y2g9YS5hcmd1bWVudC50b1dhdGNoO2JyZWFrO2Nhc2Ugcy5CaW5hcnlFeHByZXNzaW9uOlgoYS5sZWZ0LGIpO1goYS5yaWdodCxiKTthLmNvbnN0YW50PWEubGVmdC5jb25zdGFudCYmYS5yaWdodC5jb25zdGFudDthLnRvV2F0Y2g9YS5sZWZ0LnRvV2F0Y2guY29uY2F0KGEucmlnaHQudG9XYXRjaCk7YnJlYWs7Y2FzZSBzLkxvZ2ljYWxFeHByZXNzaW9uOlgoYS5sZWZ0LGIpO1goYS5yaWdodCxiKTthLmNvbnN0YW50PWEubGVmdC5jb25zdGFudCYmYS5yaWdodC5jb25zdGFudDthLnRvV2F0Y2g9YS5jb25zdGFudD9bXTpbYV07YnJlYWs7Y2FzZSBzLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpYKGEudGVzdCxiKTtYKGEuYWx0ZXJuYXRlLGIpO1goYS5jb25zZXF1ZW50LGIpO2EuY29uc3RhbnQ9YS50ZXN0LmNvbnN0YW50JiZhLmFsdGVybmF0ZS5jb25zdGFudCYmYS5jb25zZXF1ZW50LmNvbnN0YW50O2EudG9XYXRjaD1hLmNvbnN0YW50P1tdOlthXTticmVhaztjYXNlIHMuSWRlbnRpZmllcjphLmNvbnN0YW50PQohMTthLnRvV2F0Y2g9W2FdO2JyZWFrO2Nhc2Ugcy5NZW1iZXJFeHByZXNzaW9uOlgoYS5vYmplY3QsYik7YS5jb21wdXRlZCYmWChhLnByb3BlcnR5LGIpO2EuY29uc3RhbnQ9YS5vYmplY3QuY29uc3RhbnQmJighYS5jb21wdXRlZHx8YS5wcm9wZXJ0eS5jb25zdGFudCk7YS50b1dhdGNoPVthXTticmVhaztjYXNlIHMuQ2FsbEV4cHJlc3Npb246ZD1hLmZpbHRlcj8hYihhLmNhbGxlZS5uYW1lKS4kc3RhdGVmdWw6ITE7Yz1bXTtwKGEuYXJndW1lbnRzLGZ1bmN0aW9uKGEpe1goYSxiKTtkPWQmJmEuY29uc3RhbnQ7YS5jb25zdGFudHx8Yy5wdXNoLmFwcGx5KGMsYS50b1dhdGNoKX0pO2EuY29uc3RhbnQ9ZDthLnRvV2F0Y2g9YS5maWx0ZXImJiFiKGEuY2FsbGVlLm5hbWUpLiRzdGF0ZWZ1bD9jOlthXTticmVhaztjYXNlIHMuQXNzaWdubWVudEV4cHJlc3Npb246WChhLmxlZnQsYik7WChhLnJpZ2h0LGIpO2EuY29uc3RhbnQ9YS5sZWZ0LmNvbnN0YW50JiZhLnJpZ2h0LmNvbnN0YW50OwphLnRvV2F0Y2g9W2FdO2JyZWFrO2Nhc2Ugcy5BcnJheUV4cHJlc3Npb246ZD0hMDtjPVtdO3AoYS5lbGVtZW50cyxmdW5jdGlvbihhKXtYKGEsYik7ZD1kJiZhLmNvbnN0YW50O2EuY29uc3RhbnR8fGMucHVzaC5hcHBseShjLGEudG9XYXRjaCl9KTthLmNvbnN0YW50PWQ7YS50b1dhdGNoPWM7YnJlYWs7Y2FzZSBzLk9iamVjdEV4cHJlc3Npb246ZD0hMDtjPVtdO3AoYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe1goYS52YWx1ZSxiKTtkPWQmJmEudmFsdWUuY29uc3RhbnQ7YS52YWx1ZS5jb25zdGFudHx8Yy5wdXNoLmFwcGx5KGMsYS52YWx1ZS50b1dhdGNoKX0pO2EuY29uc3RhbnQ9ZDthLnRvV2F0Y2g9YzticmVhaztjYXNlIHMuVGhpc0V4cHJlc3Npb246YS5jb25zdGFudD0hMSxhLnRvV2F0Y2g9W119fWZ1bmN0aW9uIG9kKGEpe2lmKDE9PWEubGVuZ3RoKXthPWFbMF0uZXhwcmVzc2lvbjt2YXIgYj1hLnRvV2F0Y2g7cmV0dXJuIDEhPT1iLmxlbmd0aD9iOmJbMF0hPT1hP2I6eH19CmZ1bmN0aW9uIHBkKGEpe3JldHVybiBhLnR5cGU9PT1zLklkZW50aWZpZXJ8fGEudHlwZT09PXMuTWVtYmVyRXhwcmVzc2lvbn1mdW5jdGlvbiBxZChhKXtpZigxPT09YS5ib2R5Lmxlbmd0aCYmcGQoYS5ib2R5WzBdLmV4cHJlc3Npb24pKXJldHVybnt0eXBlOnMuQXNzaWdubWVudEV4cHJlc3Npb24sbGVmdDphLmJvZHlbMF0uZXhwcmVzc2lvbixyaWdodDp7dHlwZTpzLk5HVmFsdWVQYXJhbWV0ZXJ9LG9wZXJhdG9yOiI9In19ZnVuY3Rpb24gcmQoYSl7cmV0dXJuIDA9PT1hLmJvZHkubGVuZ3RofHwxPT09YS5ib2R5Lmxlbmd0aCYmKGEuYm9keVswXS5leHByZXNzaW9uLnR5cGU9PT1zLkxpdGVyYWx8fGEuYm9keVswXS5leHByZXNzaW9uLnR5cGU9PT1zLkFycmF5RXhwcmVzc2lvbnx8YS5ib2R5WzBdLmV4cHJlc3Npb24udHlwZT09PXMuT2JqZWN0RXhwcmVzc2lvbil9ZnVuY3Rpb24gc2QoYSxiKXt0aGlzLmFzdEJ1aWxkZXI9YTt0aGlzLiRmaWx0ZXI9Yn1mdW5jdGlvbiB0ZChhLApiKXt0aGlzLmFzdEJ1aWxkZXI9YTt0aGlzLiRmaWx0ZXI9Yn1mdW5jdGlvbiBGYihhKXtyZXR1cm4iY29uc3RydWN0b3IiPT1hfWZ1bmN0aW9uIGVjKGEpe3JldHVybiBHKGEudmFsdWVPZik/YS52YWx1ZU9mKCk6aGcuY2FsbChhKX1mdW5jdGlvbiByZigpe3ZhciBhPVooKSxiPVooKTt0aGlzLiRnZXQ9WyIkZmlsdGVyIixmdW5jdGlvbihkKXtmdW5jdGlvbiBjKGMsZixuKXt2YXIgdyxwLEY7bj1ufHx0O3N3aXRjaCh0eXBlb2YgYyl7Y2FzZSAic3RyaW5nIjpGPWM9Yy50cmltKCk7dmFyIHI9bj9iOmE7dz1yW0ZdO2lmKCF3KXsiOiI9PT1jLmNoYXJBdCgwKSYmIjoiPT09Yy5jaGFyQXQoMSkmJihwPSEwLGM9Yy5zdWJzdHJpbmcoMikpO3c9bj96Oko7dmFyIEU9bmV3IGZjKHcpO3c9KG5ldyBnYyhFLGQsdykpLnBhcnNlKGMpO3cuY29uc3RhbnQ/dy4kJHdhdGNoRGVsZWdhdGU9bTpwP3cuJCR3YXRjaERlbGVnYXRlPXcubGl0ZXJhbD9rOmg6dy5pbnB1dHMmJih3LiQkd2F0Y2hEZWxlZ2F0ZT0KZyk7biYmKHc9ZSh3KSk7cltGXT13fXJldHVybiBsKHcsZik7Y2FzZSAiZnVuY3Rpb24iOnJldHVybiBsKGMsZik7ZGVmYXVsdDpyZXR1cm4gbCh2LGYpfX1mdW5jdGlvbiBlKGEpe2Z1bmN0aW9uIGIoYyxkLGUsZil7dmFyIGc9dDt0PSEwO3RyeXtyZXR1cm4gYShjLGQsZSxmKX1maW5hbGx5e3Q9Z319aWYoIWEpcmV0dXJuIGE7Yi4kJHdhdGNoRGVsZWdhdGU9YS4kJHdhdGNoRGVsZWdhdGU7Yi5hc3NpZ249ZShhLmFzc2lnbik7Yi5jb25zdGFudD1hLmNvbnN0YW50O2IubGl0ZXJhbD1hLmxpdGVyYWw7Zm9yKHZhciBjPTA7YS5pbnB1dHMmJmM8YS5pbnB1dHMubGVuZ3RoOysrYylhLmlucHV0c1tjXT1lKGEuaW5wdXRzW2NdKTtiLmlucHV0cz1hLmlucHV0cztyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIG51bGw9PWF8fG51bGw9PWI/YT09PWI6Im9iamVjdCI9PT10eXBlb2YgYSYmKGE9ZWMoYSksIm9iamVjdCI9PT10eXBlb2YgYSk/ITE6YT09PWJ8fGEhPT1hJiZiIT09CmJ9ZnVuY3Rpb24gZyhhLGIsYyxkLGUpe3ZhciBnPWQuaW5wdXRzLGg7aWYoMT09PWcubGVuZ3RoKXt2YXIgaz1mLGc9Z1swXTtyZXR1cm4gYS4kd2F0Y2goZnVuY3Rpb24oYSl7dmFyIGI9ZyhhKTtmKGIsayl8fChoPWQoYSx4LHgsW2JdKSxrPWImJmVjKGIpKTtyZXR1cm4gaH0sYixjLGUpfWZvcih2YXIgbD1bXSxtPVtdLG49MCxKPWcubGVuZ3RoO248SjtuKyspbFtuXT1mLG1bbl09bnVsbDtyZXR1cm4gYS4kd2F0Y2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSExLGM9MCxlPWcubGVuZ3RoO2M8ZTtjKyspe3ZhciBrPWdbY10oYSk7aWYoYnx8KGI9IWYoayxsW2NdKSkpbVtjXT1rLGxbY109ayYmZWMoayl9YiYmKGg9ZChhLHgseCxtKSk7cmV0dXJuIGh9LGIsYyxlKX1mdW5jdGlvbiBoKGEsYixjLGQpe3ZhciBlLGY7cmV0dXJuIGU9YS4kd2F0Y2goZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSl9LGZ1bmN0aW9uKGEsYyxkKXtmPWE7RyhiKSYmYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dShhKSYmCmQuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7dShmKSYmZSgpfSl9LGMpfWZ1bmN0aW9uIGsoYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj0hMDtwKGEsZnVuY3Rpb24oYSl7dShhKXx8KGI9ITEpfSk7cmV0dXJuIGJ9dmFyIGYsZztyZXR1cm4gZj1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe2c9YTtHKGIpJiZiLmNhbGwodGhpcyxhLGMsZCk7ZShhKSYmZC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtlKGcpJiZmKCl9KX0sYyl9ZnVuY3Rpb24gbShhLGIsYyxkKXt2YXIgZTtyZXR1cm4gZT1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe0coYikmJmIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2UoKX0sYyl9ZnVuY3Rpb24gbChhLGIpe2lmKCFiKXJldHVybiBhO3ZhciBjPWEuJCR3YXRjaERlbGVnYXRlLGQ9ITEsYz1jIT09ayYmYyE9PWg/ZnVuY3Rpb24oYyxlLGYsZyl7Zj1kJiZnP2dbMF06YShjLAplLGYsZyk7cmV0dXJuIGIoZixjLGUpfTpmdW5jdGlvbihjLGQsZSxmKXtlPWEoYyxkLGUsZik7Yz1iKGUsYyxkKTtyZXR1cm4gdShlKT9jOmV9O2EuJCR3YXRjaERlbGVnYXRlJiZhLiQkd2F0Y2hEZWxlZ2F0ZSE9PWc/Yy4kJHdhdGNoRGVsZWdhdGU9YS4kJHdhdGNoRGVsZWdhdGU6Yi4kc3RhdGVmdWx8fChjLiQkd2F0Y2hEZWxlZ2F0ZT1nLGQ9IWEuaW5wdXRzLGMuaW5wdXRzPWEuaW5wdXRzP2EuaW5wdXRzOlthXSk7cmV0dXJuIGN9dmFyIG49Q2EoKS5ub1Vuc2FmZUV2YWwsSj17Y3NwOm4sZXhwZW5zaXZlQ2hlY2tzOiExfSx6PXtjc3A6bixleHBlbnNpdmVDaGVja3M6ITB9LHQ9ITE7Yy4kJHJ1bm5pbmdFeHBlbnNpdmVDaGVja3M9ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIGN9XX1mdW5jdGlvbiB0Zigpe3RoaXMuJGdldD1bIiRyb290U2NvcGUiLCIkZXhjZXB0aW9uSGFuZGxlciIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gdWQoZnVuY3Rpb24oYil7YS4kZXZhbEFzeW5jKGIpfSwKYil9XX1mdW5jdGlvbiB1Zigpe3RoaXMuJGdldD1bIiRicm93c2VyIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIHVkKGZ1bmN0aW9uKGIpe2EuZGVmZXIoYil9LGIpfV19ZnVuY3Rpb24gdWQoYSxiKXtmdW5jdGlvbiBkKGEsYixjKXtmdW5jdGlvbiBkKGIpe3JldHVybiBmdW5jdGlvbihjKXtlfHwoZT0hMCxiLmNhbGwoYSxjKSl9fXZhciBlPSExO3JldHVybltkKGIpLGQoYyldfWZ1bmN0aW9uIGMoKXt0aGlzLiQkc3RhdGU9e3N0YXR1czowfX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2IuY2FsbChhLGMpfX1mdW5jdGlvbiBmKGMpeyFjLnByb2Nlc3NTY2hlZHVsZWQmJmMucGVuZGluZyYmKGMucHJvY2Vzc1NjaGVkdWxlZD0hMCxhKGZ1bmN0aW9uKCl7dmFyIGEsZCxlO2U9Yy5wZW5kaW5nO2MucHJvY2Vzc1NjaGVkdWxlZD0hMTtjLnBlbmRpbmc9eDtmb3IodmFyIGY9MCxnPWUubGVuZ3RoO2Y8ZzsrK2Ype2Q9ZVtmXVswXTthPWVbZl1bYy5zdGF0dXNdOwp0cnl7RyhhKT9kLnJlc29sdmUoYShjLnZhbHVlKSk6MT09PWMuc3RhdHVzP2QucmVzb2x2ZShjLnZhbHVlKTpkLnJlamVjdChjLnZhbHVlKX1jYXRjaChoKXtkLnJlamVjdChoKSxiKGgpfX19KSl9ZnVuY3Rpb24gZygpe3RoaXMucHJvbWlzZT1uZXcgYzt0aGlzLnJlc29sdmU9ZSh0aGlzLHRoaXMucmVzb2x2ZSk7dGhpcy5yZWplY3Q9ZSh0aGlzLHRoaXMucmVqZWN0KTt0aGlzLm5vdGlmeT1lKHRoaXMsdGhpcy5ub3RpZnkpfXZhciBoPUIoIiRxIixUeXBlRXJyb3IpO04oYy5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oYSxiLGMpe2lmKHIoYSkmJnIoYikmJnIoYykpcmV0dXJuIHRoaXM7dmFyIGQ9bmV3IGc7dGhpcy4kJHN0YXRlLnBlbmRpbmc9dGhpcy4kJHN0YXRlLnBlbmRpbmd8fFtdO3RoaXMuJCRzdGF0ZS5wZW5kaW5nLnB1c2goW2QsYSxiLGNdKTswPHRoaXMuJCRzdGF0ZS5zdGF0dXMmJmYodGhpcy4kJHN0YXRlKTtyZXR1cm4gZC5wcm9taXNlfSwiY2F0Y2giOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCwKYSl9LCJmaW5hbGx5IjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIG0oYiwhMCxhKX0sZnVuY3Rpb24oYil7cmV0dXJuIG0oYiwhMSxhKX0sYil9fSk7TihnLnByb3RvdHlwZSx7cmVzb2x2ZTpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXN8fChhPT09dGhpcy5wcm9taXNlP3RoaXMuJCRyZWplY3QoaCgicWN5Y2xlIixhKSk6dGhpcy4kJHJlc29sdmUoYSkpfSwkJHJlc29sdmU6ZnVuY3Rpb24oYSl7dmFyIGMsZTtlPWQodGhpcyx0aGlzLiQkcmVzb2x2ZSx0aGlzLiQkcmVqZWN0KTt0cnl7aWYoSyhhKXx8RyhhKSljPWEmJmEudGhlbjtHKGMpPyh0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXM9LTEsYy5jYWxsKGEsZVswXSxlWzFdLHRoaXMubm90aWZ5KSk6KHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWEsdGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPTEsZih0aGlzLnByb21pc2UuJCRzdGF0ZSkpfWNhdGNoKGcpe2VbMV0oZyksCmIoZyl9fSxyZWplY3Q6ZnVuY3Rpb24oYSl7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzfHx0aGlzLiQkcmVqZWN0KGEpfSwkJHJlamVjdDpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS52YWx1ZT1hO3RoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cz0yO2YodGhpcy5wcm9taXNlLiQkc3RhdGUpfSxub3RpZnk6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5wcm9taXNlLiQkc3RhdGUucGVuZGluZzswPj10aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMmJmQmJmQubGVuZ3RoJiZhKGZ1bmN0aW9uKCl7Zm9yKHZhciBhLGUsZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrKyl7ZT1kW2ZdWzBdO2E9ZFtmXVszXTt0cnl7ZS5ub3RpZnkoRyhhKT9hKGMpOmMpfWNhdGNoKGgpe2IoaCl9fX0pfX0pO3ZhciBrPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IGc7Yj9jLnJlc29sdmUoYSk6Yy5yZWplY3QoYSk7cmV0dXJuIGMucHJvbWlzZX0sbT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9bnVsbDt0cnl7RyhjKSYmCihkPWMoKSl9Y2F0Y2goZSl7cmV0dXJuIGsoZSwhMSl9cmV0dXJuIGQmJkcoZC50aGVuKT9kLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gayhhLGIpfSxmdW5jdGlvbihhKXtyZXR1cm4gayhhLCExKX0pOmsoYSxiKX0sbD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgZztlLnJlc29sdmUoYSk7cmV0dXJuIGUucHJvbWlzZS50aGVuKGIsYyxkKX0sbj1mdW5jdGlvbiB6KGEpe2lmKCFHKGEpKXRocm93IGgoIm5vcnNsdnIiLGEpO2lmKCEodGhpcyBpbnN0YW5jZW9mIHopKXJldHVybiBuZXcgeihhKTt2YXIgYj1uZXcgZzthKGZ1bmN0aW9uKGEpe2IucmVzb2x2ZShhKX0sZnVuY3Rpb24oYSl7Yi5yZWplY3QoYSl9KTtyZXR1cm4gYi5wcm9taXNlfTtuLmRlZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBnfTtuLnJlamVjdD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgZztiLnJlamVjdChhKTtyZXR1cm4gYi5wcm9taXNlfTtuLndoZW49bDtuLnJlc29sdmU9bDtuLmFsbD1mdW5jdGlvbihhKXt2YXIgYj0KbmV3IGcsYz0wLGQ9TChhKT9bXTp7fTtwKGEsZnVuY3Rpb24oYSxlKXtjKys7bChhKS50aGVuKGZ1bmN0aW9uKGEpe2QuaGFzT3duUHJvcGVydHkoZSl8fChkW2VdPWEsLS1jfHxiLnJlc29sdmUoZCkpfSxmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHxiLnJlamVjdChhKX0pfSk7MD09PWMmJmIucmVzb2x2ZShkKTtyZXR1cm4gYi5wcm9taXNlfTtyZXR1cm4gbn1mdW5jdGlvbiBEZigpe3RoaXMuJGdldD1bIiR3aW5kb3ciLCIkdGltZW91dCIsZnVuY3Rpb24oYSxiKXt2YXIgZD1hLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8YS53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsYz1hLmNhbmNlbEFuaW1hdGlvbkZyYW1lfHxhLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHxhLndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSxlPSEhZCxmPWU/ZnVuY3Rpb24oYSl7dmFyIGI9ZChhKTtyZXR1cm4gZnVuY3Rpb24oKXtjKGIpfX06ZnVuY3Rpb24oYSl7dmFyIGM9CmIoYSwxNi42NiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5jYW5jZWwoYyl9fTtmLnN1cHBvcnRlZD1lO3JldHVybiBmfV19ZnVuY3Rpb24gc2YoKXtmdW5jdGlvbiBhKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kJHdhdGNoZXJzQ291bnQ9MDt0aGlzLiRpZD0rK21iO3RoaXMuJCRDaGlsZFNjb3BlPW51bGx9Yi5wcm90b3R5cGU9YTtyZXR1cm4gYn12YXIgYj0xMCxkPUIoIiRyb290U2NvcGUiKSxjPW51bGwsZT1udWxsO3RoaXMuZGlnZXN0VHRsPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPWEpO3JldHVybiBifTt0aGlzLiRnZXQ9WyIkaW5qZWN0b3IiLCIkZXhjZXB0aW9uSGFuZGxlciIsIiRwYXJzZSIsIiRicm93c2VyIixmdW5jdGlvbihmLGcsaCxrKXtmdW5jdGlvbiBtKGEpe2EuY3VycmVudFNjb3BlLiQkZGVzdHJveWVkPQohMH1mdW5jdGlvbiBsKGEpezk9PT1IYSYmKGEuJCRjaGlsZEhlYWQmJmwoYS4kJGNoaWxkSGVhZCksYS4kJG5leHRTaWJsaW5nJiZsKGEuJCRuZXh0U2libGluZykpO2EuJHBhcmVudD1hLiQkbmV4dFNpYmxpbmc9YS4kJHByZXZTaWJsaW5nPWEuJCRjaGlsZEhlYWQ9YS4kJGNoaWxkVGFpbD1hLiRyb290PWEuJCR3YXRjaGVycz1udWxsfWZ1bmN0aW9uIG4oKXt0aGlzLiRpZD0rK21iO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kcm9vdD10aGlzO3RoaXMuJCRkZXN0cm95ZWQ9ITE7dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiQkd2F0Y2hlcnNDb3VudD0wO3RoaXMuJCRpc29sYXRlQmluZGluZ3M9bnVsbH1mdW5jdGlvbiBKKGEpe2lmKHcuJCRwaGFzZSl0aHJvdyBkKCJpbnByb2ciLAp3LiQkcGhhc2UpO3cuJCRwaGFzZT1hfWZ1bmN0aW9uIHooYSxiKXtkbyBhLiQkd2F0Y2hlcnNDb3VudCs9Yjt3aGlsZShhPWEuJHBhcmVudCl9ZnVuY3Rpb24gdChhLGIsYyl7ZG8gYS4kJGxpc3RlbmVyQ291bnRbY10tPWIsMD09PWEuJCRsaXN0ZW5lckNvdW50W2NdJiZkZWxldGUgYS4kJGxpc3RlbmVyQ291bnRbY107d2hpbGUoYT1hLiRwYXJlbnQpfWZ1bmN0aW9uIEEoKXt9ZnVuY3Rpb24gcSgpe2Zvcig7US5sZW5ndGg7KXRyeXtRLnNoaWZ0KCkoKX1jYXRjaChhKXtnKGEpfWU9bnVsbH1mdW5jdGlvbiB5KCl7bnVsbD09PWUmJihlPWsuZGVmZXIoZnVuY3Rpb24oKXt3LiRhcHBseShxKX0pKX1uLnByb3RvdHlwZT17Y29uc3RydWN0b3I6biwkbmV3OmZ1bmN0aW9uKGIsYyl7dmFyIGQ7Yz1jfHx0aGlzO2I/KGQ9bmV3IG4sZC4kcm9vdD10aGlzLiRyb290KToodGhpcy4kJENoaWxkU2NvcGV8fCh0aGlzLiQkQ2hpbGRTY29wZT1hKHRoaXMpKSxkPW5ldyB0aGlzLiQkQ2hpbGRTY29wZSk7CmQuJHBhcmVudD1jO2QuJCRwcmV2U2libGluZz1jLiQkY2hpbGRUYWlsO2MuJCRjaGlsZEhlYWQ/KGMuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZz1kLGMuJCRjaGlsZFRhaWw9ZCk6Yy4kJGNoaWxkSGVhZD1jLiQkY2hpbGRUYWlsPWQ7KGJ8fGMhPXRoaXMpJiZkLiRvbigiJGRlc3Ryb3kiLG0pO3JldHVybiBkfSwkd2F0Y2g6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9aChhKTtpZihmLiQkd2F0Y2hEZWxlZ2F0ZSlyZXR1cm4gZi4kJHdhdGNoRGVsZWdhdGUodGhpcyxiLGQsZixhKTt2YXIgZz10aGlzLGs9Zy4kJHdhdGNoZXJzLGw9e2ZuOmIsbGFzdDpBLGdldDpmLGV4cDplfHxhLGVxOiEhZH07Yz1udWxsO0coYil8fChsLmZuPXYpO2t8fChrPWcuJCR3YXRjaGVycz1bXSk7ay51bnNoaWZ0KGwpO3oodGhpcywxKTtyZXR1cm4gZnVuY3Rpb24oKXswPD1hYihrLGwpJiZ6KGcsLTEpO2M9bnVsbH19LCR3YXRjaEdyb3VwOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2g9ITE7az8oaz0KITEsYihlLGUsZykpOmIoZSxkLGcpfXZhciBkPUFycmF5KGEubGVuZ3RoKSxlPUFycmF5KGEubGVuZ3RoKSxmPVtdLGc9dGhpcyxoPSExLGs9ITA7aWYoIWEubGVuZ3RoKXt2YXIgbD0hMDtnLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtsJiZiKGUsZSxnKX0pO3JldHVybiBmdW5jdGlvbigpe2w9ITF9fWlmKDE9PT1hLmxlbmd0aClyZXR1cm4gdGhpcy4kd2F0Y2goYVswXSxmdW5jdGlvbihhLGMsZil7ZVswXT1hO2RbMF09YztiKGUsYT09PWM/ZTpkLGYpfSk7cChhLGZ1bmN0aW9uKGEsYil7dmFyIGs9Zy4kd2F0Y2goYSxmdW5jdGlvbihhLGYpe2VbYl09YTtkW2JdPWY7aHx8KGg9ITAsZy4kZXZhbEFzeW5jKGMpKX0pO2YucHVzaChrKX0pO3JldHVybiBmdW5jdGlvbigpe2Zvcig7Zi5sZW5ndGg7KWYuc2hpZnQoKSgpfX0sJHdhdGNoQ29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7ZT1hO3ZhciBiLGQsZyxoO2lmKCFyKGUpKXtpZihLKGUpKWlmKEFhKGUpKWZvcihmIT09Cm4mJihmPW4scD1mLmxlbmd0aD0wLGwrKyksYT1lLmxlbmd0aCxwIT09YSYmKGwrKyxmLmxlbmd0aD1wPWEpLGI9MDtiPGE7YisrKWg9ZltiXSxnPWVbYl0sZD1oIT09aCYmZyE9PWcsZHx8aD09PWd8fChsKyssZltiXT1nKTtlbHNle2YhPT1xJiYoZj1xPXt9LHA9MCxsKyspO2E9MDtmb3IoYiBpbiBlKXNhLmNhbGwoZSxiKSYmKGErKyxnPWVbYl0saD1mW2JdLGIgaW4gZj8oZD1oIT09aCYmZyE9PWcsZHx8aD09PWd8fChsKyssZltiXT1nKSk6KHArKyxmW2JdPWcsbCsrKSk7aWYocD5hKWZvcihiIGluIGwrKyxmKXNhLmNhbGwoZSxiKXx8KHAtLSxkZWxldGUgZltiXSl9ZWxzZSBmIT09ZSYmKGY9ZSxsKyspO3JldHVybiBsfX1jLiRzdGF0ZWZ1bD0hMDt2YXIgZD10aGlzLGUsZixnLGs9MTxiLmxlbmd0aCxsPTAsbT1oKGEsYyksbj1bXSxxPXt9LEo9ITAscD0wO3JldHVybiB0aGlzLiR3YXRjaChtLGZ1bmN0aW9uKCl7Sj8oSj0hMSxiKGUsZSxkKSk6YihlLGcsZCk7aWYoaylpZihLKGUpKWlmKEFhKGUpKXtnPQpBcnJheShlLmxlbmd0aCk7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspZ1thXT1lW2FdfWVsc2UgZm9yKGEgaW4gZz17fSxlKXNhLmNhbGwoZSxhKSYmKGdbYV09ZVthXSk7ZWxzZSBnPWV9KX0sJGRpZ2VzdDpmdW5jdGlvbigpe3ZhciBhLGYsaCxsLG0sbixwLHoseT1iLHQscj1bXSxRLHg7SigiJGRpZ2VzdCIpO2suJCRjaGVja1VybENoYW5nZSgpO3RoaXM9PT13JiZudWxsIT09ZSYmKGsuZGVmZXIuY2FuY2VsKGUpLHEoKSk7Yz1udWxsO2Rve3o9ITE7Zm9yKHQ9dGhpcztzLmxlbmd0aDspe3RyeXt4PXMuc2hpZnQoKSx4LnNjb3BlLiRldmFsKHguZXhwcmVzc2lvbix4LmxvY2Fscyl9Y2F0Y2godSl7Zyh1KX1jPW51bGx9YTpkb3tpZihuPXQuJCR3YXRjaGVycylmb3IocD1uLmxlbmd0aDtwLS07KXRyeXtpZihhPW5bcF0paWYobT1hLmdldCwoZj1tKHQpKSE9PShoPWEubGFzdCkmJiEoYS5lcT9sYShmLGgpOiJudW1iZXIiPT09dHlwZW9mIGYmJiJudW1iZXIiPT09dHlwZW9mIGgmJgppc05hTihmKSYmaXNOYU4oaCkpKXo9ITAsYz1hLGEubGFzdD1hLmVxP05hKGYsbnVsbCk6ZixsPWEuZm4sbChmLGg9PT1BP2Y6aCx0KSw1PnkmJihRPTQteSxyW1FdfHwocltRXT1bXSkscltRXS5wdXNoKHttc2c6RyhhLmV4cCk/ImZuOiAiKyhhLmV4cC5uYW1lfHxhLmV4cC50b1N0cmluZygpKTphLmV4cCxuZXdWYWw6ZixvbGRWYWw6aH0pKTtlbHNlIGlmKGE9PT1jKXt6PSExO2JyZWFrIGF9fWNhdGNoKHYpe2codil9aWYoIShuPXQuJCR3YXRjaGVyc0NvdW50JiZ0LiQkY2hpbGRIZWFkfHx0IT09dGhpcyYmdC4kJG5leHRTaWJsaW5nKSlmb3IoO3QhPT10aGlzJiYhKG49dC4kJG5leHRTaWJsaW5nKTspdD10LiRwYXJlbnR9d2hpbGUodD1uKTtpZigoenx8cy5sZW5ndGgpJiYheS0tKXRocm93IHcuJCRwaGFzZT1udWxsLGQoImluZmRpZyIsYixyKTt9d2hpbGUoenx8cy5sZW5ndGgpO2Zvcih3LiQkcGhhc2U9bnVsbDtGLmxlbmd0aDspdHJ5e0Yuc2hpZnQoKSgpfWNhdGNoKEQpe2coRCl9fSwKJGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZighdGhpcy4kJGRlc3Ryb3llZCl7dmFyIGE9dGhpcy4kcGFyZW50O3RoaXMuJGJyb2FkY2FzdCgiJGRlc3Ryb3kiKTt0aGlzLiQkZGVzdHJveWVkPSEwO3RoaXM9PT13JiZrLiQkYXBwbGljYXRpb25EZXN0cm95ZWQoKTt6KHRoaXMsLXRoaXMuJCR3YXRjaGVyc0NvdW50KTtmb3IodmFyIGIgaW4gdGhpcy4kJGxpc3RlbmVyQ291bnQpdCh0aGlzLHRoaXMuJCRsaXN0ZW5lckNvdW50W2JdLGIpO2EmJmEuJCRjaGlsZEhlYWQ9PXRoaXMmJihhLiQkY2hpbGRIZWFkPXRoaXMuJCRuZXh0U2libGluZyk7YSYmYS4kJGNoaWxkVGFpbD09dGhpcyYmKGEuJCRjaGlsZFRhaWw9dGhpcy4kJHByZXZTaWJsaW5nKTt0aGlzLiQkcHJldlNpYmxpbmcmJih0aGlzLiQkcHJldlNpYmxpbmcuJCRuZXh0U2libGluZz10aGlzLiQkbmV4dFNpYmxpbmcpO3RoaXMuJCRuZXh0U2libGluZyYmKHRoaXMuJCRuZXh0U2libGluZy4kJHByZXZTaWJsaW5nPXRoaXMuJCRwcmV2U2libGluZyk7CnRoaXMuJGRlc3Ryb3k9dGhpcy4kZGlnZXN0PXRoaXMuJGFwcGx5PXRoaXMuJGV2YWxBc3luYz10aGlzLiRhcHBseUFzeW5jPXY7dGhpcy4kb249dGhpcy4kd2F0Y2g9dGhpcy4kd2F0Y2hHcm91cD1mdW5jdGlvbigpe3JldHVybiB2fTt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRuZXh0U2libGluZz1udWxsO2wodGhpcyl9fSwkZXZhbDpmdW5jdGlvbihhLGIpe3JldHVybiBoKGEpKHRoaXMsYil9LCRldmFsQXN5bmM6ZnVuY3Rpb24oYSxiKXt3LiQkcGhhc2V8fHMubGVuZ3RofHxrLmRlZmVyKGZ1bmN0aW9uKCl7cy5sZW5ndGgmJncuJGRpZ2VzdCgpfSk7cy5wdXNoKHtzY29wZTp0aGlzLGV4cHJlc3Npb246aChhKSxsb2NhbHM6Yn0pfSwkJHBvc3REaWdlc3Q6ZnVuY3Rpb24oYSl7Ri5wdXNoKGEpfSwkYXBwbHk6ZnVuY3Rpb24oYSl7dHJ5e0ooIiRhcHBseSIpO3RyeXtyZXR1cm4gdGhpcy4kZXZhbChhKX1maW5hbGx5e3cuJCRwaGFzZT1udWxsfX1jYXRjaChiKXtnKGIpfWZpbmFsbHl7dHJ5e3cuJGRpZ2VzdCgpfWNhdGNoKGMpe3Rocm93IGcoYyksCmM7fX19LCRhcHBseUFzeW5jOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtjLiRldmFsKGEpfXZhciBjPXRoaXM7YSYmUS5wdXNoKGIpO2E9aChhKTt5KCl9LCRvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJCRsaXN0ZW5lcnNbYV07Y3x8KHRoaXMuJCRsaXN0ZW5lcnNbYV09Yz1bXSk7Yy5wdXNoKGIpO3ZhciBkPXRoaXM7ZG8gZC4kJGxpc3RlbmVyQ291bnRbYV18fChkLiQkbGlzdGVuZXJDb3VudFthXT0wKSxkLiQkbGlzdGVuZXJDb3VudFthXSsrO3doaWxlKGQ9ZC4kcGFyZW50KTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuaW5kZXhPZihiKTstMSE9PWQmJihjW2RdPW51bGwsdChlLDEsYSkpfX0sJGVtaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkLGU9dGhpcyxmPSExLGg9e25hbWU6YSx0YXJnZXRTY29wZTplLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2Y9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7aC5kZWZhdWx0UHJldmVudGVkPQohMH0sZGVmYXVsdFByZXZlbnRlZDohMX0saz1iYihbaF0sYXJndW1lbnRzLDEpLGwsbTtkb3tkPWUuJCRsaXN0ZW5lcnNbYV18fGM7aC5jdXJyZW50U2NvcGU9ZTtsPTA7Zm9yKG09ZC5sZW5ndGg7bDxtO2wrKylpZihkW2xdKXRyeXtkW2xdLmFwcGx5KG51bGwsayl9Y2F0Y2gobil7ZyhuKX1lbHNlIGQuc3BsaWNlKGwsMSksbC0tLG0tLTtpZihmKXJldHVybiBoLmN1cnJlbnRTY29wZT1udWxsLGg7ZT1lLiRwYXJlbnR9d2hpbGUoZSk7aC5jdXJyZW50U2NvcGU9bnVsbDtyZXR1cm4gaH0sJGJyb2FkY2FzdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD10aGlzLGU9e25hbWU6YSx0YXJnZXRTY29wZTp0aGlzLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7ZS5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfTtpZighdGhpcy4kJGxpc3RlbmVyQ291bnRbYV0pcmV0dXJuIGU7Zm9yKHZhciBmPWJiKFtlXSxhcmd1bWVudHMsMSksaCxrO2M9ZDspe2UuY3VycmVudFNjb3BlPQpjO2Q9Yy4kJGxpc3RlbmVyc1thXXx8W107aD0wO2ZvcihrPWQubGVuZ3RoO2g8aztoKyspaWYoZFtoXSl0cnl7ZFtoXS5hcHBseShudWxsLGYpfWNhdGNoKGwpe2cobCl9ZWxzZSBkLnNwbGljZShoLDEpLGgtLSxrLS07aWYoIShkPWMuJCRsaXN0ZW5lckNvdW50W2FdJiZjLiQkY2hpbGRIZWFkfHxjIT09dGhpcyYmYy4kJG5leHRTaWJsaW5nKSlmb3IoO2MhPT10aGlzJiYhKGQ9Yy4kJG5leHRTaWJsaW5nKTspYz1jLiRwYXJlbnR9ZS5jdXJyZW50U2NvcGU9bnVsbDtyZXR1cm4gZX19O3ZhciB3PW5ldyBuLHM9dy4kJGFzeW5jUXVldWU9W10sRj13LiQkcG9zdERpZ2VzdFF1ZXVlPVtdLFE9dy4kJGFwcGx5QXN5bmNRdWV1ZT1bXTtyZXR1cm4gd31dfWZ1bmN0aW9uIGxlKCl7dmFyIGE9L15ccyooaHR0cHM/fGZ0cHxtYWlsdG98dGVsfGZpbGUpOi8sYj0vXlxzKigoaHR0cHM/fGZ0cHxmaWxlfGJsb2IpOnxkYXRhOmltYWdlXC8pLzt0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PQpmdW5jdGlvbihiKXtyZXR1cm4gdShiKT8oYT1iLHRoaXMpOmF9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGEpe3JldHVybiB1KGEpPyhiPWEsdGhpcyk6Yn07dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGQsYyl7dmFyIGU9Yz9iOmEsZjtmPXhhKGQpLmhyZWY7cmV0dXJuIiI9PT1mfHxmLm1hdGNoKGUpP2Q6InVuc2FmZToiK2Z9fX1mdW5jdGlvbiBpZyhhKXtpZigic2VsZiI9PT1hKXJldHVybiBhO2lmKEgoYSkpe2lmKC0xPGEuaW5kZXhPZigiKioqIikpdGhyb3cgemEoIml3Y2FyZCIsYSk7YT12ZChhKS5yZXBsYWNlKCJcXCpcXCoiLCIuKiIpLnJlcGxhY2UoIlxcKiIsIlteOi8uPyY7XSoiKTtyZXR1cm4gbmV3IFJlZ0V4cCgiXiIrYSsiJCIpfWlmKExhKGEpKXJldHVybiBuZXcgUmVnRXhwKCJeIithLnNvdXJjZSsiJCIpO3Rocm93IHphKCJpbWF0Y2hlciIpO31mdW5jdGlvbiB3ZChhKXt2YXIgYj1bXTt1KGEpJiZwKGEsZnVuY3Rpb24oYSl7Yi5wdXNoKGlnKGEpKX0pOwpyZXR1cm4gYn1mdW5jdGlvbiB3Zigpe3RoaXMuU0NFX0NPTlRFWFRTPWthO3ZhciBhPVsic2VsZiJdLGI9W107dGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdD1mdW5jdGlvbihiKXthcmd1bWVudHMubGVuZ3RoJiYoYT13ZChiKSk7cmV0dXJuIGF9O3RoaXMucmVzb3VyY2VVcmxCbGFja2xpc3Q9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmKGI9d2QoYSkpO3JldHVybiBifTt0aGlzLiRnZXQ9WyIkaW5qZWN0b3IiLGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGMoYSxiKXtyZXR1cm4ic2VsZiI9PT1hP2dkKGIpOiEhYS5leGVjKGIuaHJlZil9ZnVuY3Rpb24gZShhKXt2YXIgYj1mdW5jdGlvbihhKXt0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIGF9fTthJiYoYi5wcm90b3R5cGU9bmV3IGEpO2IucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpfTtiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKX07CnJldHVybiBifXZhciBmPWZ1bmN0aW9uKGEpe3Rocm93IHphKCJ1bnNhZmUiKTt9O2QuaGFzKCIkc2FuaXRpemUiKSYmKGY9ZC5nZXQoIiRzYW5pdGl6ZSIpKTt2YXIgZz1lKCksaD17fTtoW2thLkhUTUxdPWUoZyk7aFtrYS5DU1NdPWUoZyk7aFtrYS5VUkxdPWUoZyk7aFtrYS5KU109ZShnKTtoW2thLlJFU09VUkNFX1VSTF09ZShoW2thLlVSTF0pO3JldHVybnt0cnVzdEFzOmZ1bmN0aW9uKGEsYil7dmFyIGM9aC5oYXNPd25Qcm9wZXJ0eShhKT9oW2FdOm51bGw7aWYoIWMpdGhyb3cgemEoImljb250ZXh0IixhLGIpO2lmKG51bGw9PT1ifHxyKGIpfHwiIj09PWIpcmV0dXJuIGI7aWYoInN0cmluZyIhPT10eXBlb2YgYil0aHJvdyB6YSgiaXR5cGUiLGEpO3JldHVybiBuZXcgYyhiKX0sZ2V0VHJ1c3RlZDpmdW5jdGlvbihkLGUpe2lmKG51bGw9PT1lfHxyKGUpfHwiIj09PWUpcmV0dXJuIGU7dmFyIGc9aC5oYXNPd25Qcm9wZXJ0eShkKT9oW2RdOm51bGw7aWYoZyYmZSBpbnN0YW5jZW9mCmcpcmV0dXJuIGUuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtpZihkPT09a2EuUkVTT1VSQ0VfVVJMKXt2YXIgZz14YShlLnRvU3RyaW5nKCkpLG4scCx6PSExO249MDtmb3IocD1hLmxlbmd0aDtuPHA7bisrKWlmKGMoYVtuXSxnKSl7ej0hMDticmVha31pZih6KWZvcihuPTAscD1iLmxlbmd0aDtuPHA7bisrKWlmKGMoYltuXSxnKSl7ej0hMTticmVha31pZih6KXJldHVybiBlO3Rocm93IHphKCJpbnNlY3VybCIsZS50b1N0cmluZygpKTt9aWYoZD09PWthLkhUTUwpcmV0dXJuIGYoZSk7dGhyb3cgemEoInVuc2FmZSIpO30sdmFsdWVPZjpmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGc/YS4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpOmF9fX1dfWZ1bmN0aW9uIHZmKCl7dmFyIGE9ITA7dGhpcy5lbmFibGVkPWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPSEhYik7cmV0dXJuIGF9O3RoaXMuJGdldD1bIiRwYXJzZSIsIiRzY2VEZWxlZ2F0ZSIsZnVuY3Rpb24oYixkKXtpZihhJiYKOD5IYSl0aHJvdyB6YSgiaWVxdWlya3MiKTt2YXIgYz1mYShrYSk7Yy5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYX07Yy50cnVzdEFzPWQudHJ1c3RBcztjLmdldFRydXN0ZWQ9ZC5nZXRUcnVzdGVkO2MudmFsdWVPZj1kLnZhbHVlT2Y7YXx8KGMudHJ1c3RBcz1jLmdldFRydXN0ZWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYn0sYy52YWx1ZU9mPVphKTtjLnBhcnNlQXM9ZnVuY3Rpb24oYSxkKXt2YXIgZT1iKGQpO3JldHVybiBlLmxpdGVyYWwmJmUuY29uc3RhbnQ/ZTpiKGQsZnVuY3Rpb24oYil7cmV0dXJuIGMuZ2V0VHJ1c3RlZChhLGIpfSl9O3ZhciBlPWMucGFyc2VBcyxmPWMuZ2V0VHJ1c3RlZCxnPWMudHJ1c3RBcztwKGthLGZ1bmN0aW9uKGEsYil7dmFyIGQ9TShiKTtjW2ViKCJwYXJzZV9hc18iK2QpXT1mdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfTtjW2ViKCJnZXRfdHJ1c3RlZF8iK2QpXT1mdW5jdGlvbihiKXtyZXR1cm4gZihhLGIpfTtjW2ViKCJ0cnVzdF9hc18iKwpkKV09ZnVuY3Rpb24oYil7cmV0dXJuIGcoYSxiKX19KTtyZXR1cm4gY31dfWZ1bmN0aW9uIHhmKCl7dGhpcy4kZ2V0PVsiJHdpbmRvdyIsIiRkb2N1bWVudCIsZnVuY3Rpb24oYSxiKXt2YXIgZD17fSxjPWNhKCgvYW5kcm9pZCAoXGQrKS8uZXhlYyhNKChhLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCkpfHxbXSlbMV0pLGU9L0JveGVlL2kudGVzdCgoYS5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpLGY9YlswXXx8e30sZyxoPS9eKE1venx3ZWJraXR8bXMpKD89W0EtWl0pLyxrPWYuYm9keSYmZi5ib2R5LnN0eWxlLG09ITEsbD0hMTtpZihrKXtmb3IodmFyIG4gaW4gaylpZihtPWguZXhlYyhuKSl7Zz1tWzBdO2c9Zy5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpK2cuc3Vic3RyKDEpO2JyZWFrfWd8fChnPSJXZWJraXRPcGFjaXR5ImluIGsmJiJ3ZWJraXQiKTttPSEhKCJ0cmFuc2l0aW9uImluIGt8fGcrIlRyYW5zaXRpb24iaW4gayk7bD0hISgiYW5pbWF0aW9uImluIGt8fGcrIkFuaW1hdGlvbiJpbgprKTshY3x8bSYmbHx8KG09SChrLndlYmtpdFRyYW5zaXRpb24pLGw9SChrLndlYmtpdEFuaW1hdGlvbikpfXJldHVybntoaXN0b3J5OiEoIWEuaGlzdG9yeXx8IWEuaGlzdG9yeS5wdXNoU3RhdGV8fDQ+Y3x8ZSksaGFzRXZlbnQ6ZnVuY3Rpb24oYSl7aWYoImlucHV0Ij09PWEmJjExPj1IYSlyZXR1cm4hMTtpZihyKGRbYV0pKXt2YXIgYj1mLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2RbYV09Im9uIithIGluIGJ9cmV0dXJuIGRbYV19LGNzcDpDYSgpLHZlbmRvclByZWZpeDpnLHRyYW5zaXRpb25zOm0sYW5pbWF0aW9uczpsLGFuZHJvaWQ6Y319XX1mdW5jdGlvbiB6Zigpe3RoaXMuJGdldD1bIiR0ZW1wbGF0ZUNhY2hlIiwiJGh0dHAiLCIkcSIsIiRzY2UiLGZ1bmN0aW9uKGEsYixkLGMpe2Z1bmN0aW9uIGUoZixnKXtlLnRvdGFsUGVuZGluZ1JlcXVlc3RzKys7aWYoIUgoZil8fHIoYS5nZXQoZikpKWY9Yy5nZXRUcnVzdGVkUmVzb3VyY2VVcmwoZik7dmFyIGg9Yi5kZWZhdWx0cyYmYi5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZTsKTChoKT9oPWguZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhIT09JGJ9KTpoPT09JGImJihoPW51bGwpO3JldHVybiBiLmdldChmLHtjYWNoZTphLHRyYW5zZm9ybVJlc3BvbnNlOmh9KVsiZmluYWxseSJdKGZ1bmN0aW9uKCl7ZS50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tfSkudGhlbihmdW5jdGlvbihiKXthLnB1dChmLGIuZGF0YSk7cmV0dXJuIGIuZGF0YX0sZnVuY3Rpb24oYSl7aWYoIWcpdGhyb3cgZ2EoInRwbG9hZCIsZixhLnN0YXR1cyxhLnN0YXR1c1RleHQpO3JldHVybiBkLnJlamVjdChhKX0pfWUudG90YWxQZW5kaW5nUmVxdWVzdHM9MDtyZXR1cm4gZX1dfWZ1bmN0aW9uIEFmKCl7dGhpcy4kZ2V0PVsiJHJvb3RTY29wZSIsIiRicm93c2VyIiwiJGxvY2F0aW9uIixmdW5jdGlvbihhLGIsZCl7cmV0dXJue2ZpbmRCaW5kaW5nczpmdW5jdGlvbihhLGIsZCl7YT1hLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5nLWJpbmRpbmciKTt2YXIgZz1bXTtwKGEsZnVuY3Rpb24oYSl7dmFyIGM9CmRhLmVsZW1lbnQoYSkuZGF0YSgiJGJpbmRpbmciKTtjJiZwKGMsZnVuY3Rpb24oYyl7ZD8obmV3IFJlZ0V4cCgiKF58XFxzKSIrdmQoYikrIihcXHN8XFx8fCQpIikpLnRlc3QoYykmJmcucHVzaChhKTotMSE9Yy5pbmRleE9mKGIpJiZnLnB1c2goYSl9KX0pO3JldHVybiBnfSxmaW5kTW9kZWxzOmZ1bmN0aW9uKGEsYixkKXtmb3IodmFyIGc9WyJuZy0iLCJkYXRhLW5nLSIsIm5nXFw6Il0saD0wO2g8Zy5sZW5ndGg7KytoKXt2YXIgaz1hLnF1ZXJ5U2VsZWN0b3JBbGwoIlsiK2dbaF0rIm1vZGVsIisoZD8iPSI6Iio9IikrJyInK2IrJyJdJyk7aWYoay5sZW5ndGgpcmV0dXJuIGt9fSxnZXRMb2NhdGlvbjpmdW5jdGlvbigpe3JldHVybiBkLnVybCgpfSxzZXRMb2NhdGlvbjpmdW5jdGlvbihiKXtiIT09ZC51cmwoKSYmKGQudXJsKGIpLGEuJGRpZ2VzdCgpKX0sd2hlblN0YWJsZTpmdW5jdGlvbihhKXtiLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMoYSl9fX1dfWZ1bmN0aW9uIEJmKCl7dGhpcy4kZ2V0PQpbIiRyb290U2NvcGUiLCIkYnJvd3NlciIsIiRxIiwiJCRxIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLGZ1bmN0aW9uKGEsYixkLGMsZSl7ZnVuY3Rpb24gZihmLGssbSl7RyhmKXx8KG09ayxrPWYsZj12KTt2YXIgbD10YS5jYWxsKGFyZ3VtZW50cywzKSxuPXUobSkmJiFtLHA9KG4/YzpkKS5kZWZlcigpLHo9cC5wcm9taXNlLHQ7dD1iLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e3AucmVzb2x2ZShmLmFwcGx5KG51bGwsbCkpfWNhdGNoKGIpe3AucmVqZWN0KGIpLGUoYil9ZmluYWxseXtkZWxldGUgZ1t6LiQkdGltZW91dElkXX1ufHxhLiRhcHBseSgpfSxrKTt6LiQkdGltZW91dElkPXQ7Z1t0XT1wO3JldHVybiB6fXZhciBnPXt9O2YuY2FuY2VsPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLiQkdGltZW91dElkIGluIGc/KGdbYS4kJHRpbWVvdXRJZF0ucmVqZWN0KCJjYW5jZWxlZCIpLGRlbGV0ZSBnW2EuJCR0aW1lb3V0SWRdLGIuZGVmZXIuY2FuY2VsKGEuJCR0aW1lb3V0SWQpKTohMX07cmV0dXJuIGZ9XX0KZnVuY3Rpb24geGEoYSl7SGEmJihZLnNldEF0dHJpYnV0ZSgiaHJlZiIsYSksYT1ZLmhyZWYpO1kuc2V0QXR0cmlidXRlKCJocmVmIixhKTtyZXR1cm57aHJlZjpZLmhyZWYscHJvdG9jb2w6WS5wcm90b2NvbD9ZLnByb3RvY29sLnJlcGxhY2UoLzokLywiIik6IiIsaG9zdDpZLmhvc3Qsc2VhcmNoOlkuc2VhcmNoP1kuc2VhcmNoLnJlcGxhY2UoL15cPy8sIiIpOiIiLGhhc2g6WS5oYXNoP1kuaGFzaC5yZXBsYWNlKC9eIy8sIiIpOiIiLGhvc3RuYW1lOlkuaG9zdG5hbWUscG9ydDpZLnBvcnQscGF0aG5hbWU6Ii8iPT09WS5wYXRobmFtZS5jaGFyQXQoMCk/WS5wYXRobmFtZToiLyIrWS5wYXRobmFtZX19ZnVuY3Rpb24gZ2QoYSl7YT1IKGEpP3hhKGEpOmE7cmV0dXJuIGEucHJvdG9jb2w9PT14ZC5wcm90b2NvbCYmYS5ob3N0PT09eGQuaG9zdH1mdW5jdGlvbiBDZigpe3RoaXMuJGdldD1tYShSKX1mdW5jdGlvbiB5ZChhKXtmdW5jdGlvbiBiKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEpfWNhdGNoKGIpe3JldHVybiBhfX0KdmFyIGQ9YVswXXx8e30sYz17fSxlPSIiO3JldHVybiBmdW5jdGlvbigpe3ZhciBhLGcsaCxrLG07YT1kLmNvb2tpZXx8IiI7aWYoYSE9PWUpZm9yKGU9YSxhPWUuc3BsaXQoIjsgIiksYz17fSxoPTA7aDxhLmxlbmd0aDtoKyspZz1hW2hdLGs9Zy5pbmRleE9mKCI9IiksMDxrJiYobT1iKGcuc3Vic3RyaW5nKDAsaykpLHIoY1ttXSkmJihjW21dPWIoZy5zdWJzdHJpbmcoaysxKSkpKTtyZXR1cm4gY319ZnVuY3Rpb24gR2YoKXt0aGlzLiRnZXQ9eWR9ZnVuY3Rpb24gSmMoYSl7ZnVuY3Rpb24gYihkLGMpe2lmKEsoZCkpe3ZhciBlPXt9O3AoZCxmdW5jdGlvbihhLGMpe2VbY109YihjLGEpfSk7cmV0dXJuIGV9cmV0dXJuIGEuZmFjdG9yeShkKyJGaWx0ZXIiLGMpfXRoaXMucmVnaXN0ZXI9Yjt0aGlzLiRnZXQ9WyIkaW5qZWN0b3IiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5nZXQoYisiRmlsdGVyIil9fV07YigiY3VycmVuY3kiLHpkKTtiKCJkYXRlIixBZCk7CmIoImZpbHRlciIsamcpO2IoImpzb24iLGtnKTtiKCJsaW1pdFRvIixsZyk7YigibG93ZXJjYXNlIixtZyk7YigibnVtYmVyIixCZCk7Yigib3JkZXJCeSIsQ2QpO2IoInVwcGVyY2FzZSIsbmcpfWZ1bmN0aW9uIGpnKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYixkKXtpZighQWEoYSkpe2lmKG51bGw9PWEpcmV0dXJuIGE7dGhyb3cgQigiZmlsdGVyIikoIm5vdGFycmF5IixhKTt9dmFyIGM7c3dpdGNoKGhjKGIpKXtjYXNlICJmdW5jdGlvbiI6YnJlYWs7Y2FzZSAiYm9vbGVhbiI6Y2FzZSAibnVsbCI6Y2FzZSAibnVtYmVyIjpjYXNlICJzdHJpbmciOmM9ITA7Y2FzZSAib2JqZWN0IjpiPW9nKGIsZCxjKTticmVhaztkZWZhdWx0OnJldHVybiBhfXJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSxiKX19ZnVuY3Rpb24gb2coYSxiLGQpe3ZhciBjPUsoYSkmJiIkImluIGE7ITA9PT1iP2I9bGE6RyhiKXx8KGI9ZnVuY3Rpb24oYSxiKXtpZihyKGEpKXJldHVybiExO2lmKG51bGw9PT0KYXx8bnVsbD09PWIpcmV0dXJuIGE9PT1iO2lmKEsoYil8fEsoYSkmJiFxYyhhKSlyZXR1cm4hMTthPU0oIiIrYSk7Yj1NKCIiK2IpO3JldHVybi0xIT09YS5pbmRleE9mKGIpfSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBjJiYhSyhlKT9KYShlLGEuJCxiLCExKTpKYShlLGEsYixkKX19ZnVuY3Rpb24gSmEoYSxiLGQsYyxlKXt2YXIgZj1oYyhhKSxnPWhjKGIpO2lmKCJzdHJpbmciPT09ZyYmIiEiPT09Yi5jaGFyQXQoMCkpcmV0dXJuIUphKGEsYi5zdWJzdHJpbmcoMSksZCxjKTtpZihMKGEpKXJldHVybiBhLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIEphKGEsYixkLGMpfSk7c3dpdGNoKGYpe2Nhc2UgIm9iamVjdCI6dmFyIGg7aWYoYyl7Zm9yKGggaW4gYSlpZigiJCIhPT1oLmNoYXJBdCgwKSYmSmEoYVtoXSxiLGQsITApKXJldHVybiEwO3JldHVybiBlPyExOkphKGEsYixkLCExKX1pZigib2JqZWN0Ij09PWcpe2ZvcihoIGluIGIpaWYoZT1iW2hdLCFHKGUpJiYhcihlKSYmCihmPSIkIj09PWgsIUphKGY/YTphW2hdLGUsZCxmLGYpKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4gZChhLGIpO2Nhc2UgImZ1bmN0aW9uIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiBkKGEsYil9fWZ1bmN0aW9uIGhjKGEpe3JldHVybiBudWxsPT09YT8ibnVsbCI6dHlwZW9mIGF9ZnVuY3Rpb24gemQoYSl7dmFyIGI9YS5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYSxjLGUpe3IoYykmJihjPWIuQ1VSUkVOQ1lfU1lNKTtyKGUpJiYoZT1iLlBBVFRFUk5TWzFdLm1heEZyYWMpO3JldHVybiBudWxsPT1hP2E6RGQoYSxiLlBBVFRFUk5TWzFdLGIuR1JPVVBfU0VQLGIuREVDSU1BTF9TRVAsZSkucmVwbGFjZSgvXHUwMEE0L2csYyl9fWZ1bmN0aW9uIEJkKGEpe3ZhciBiPWEuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7cmV0dXJuIG51bGw9PWE/YTpEZChhLGIuUEFUVEVSTlNbMF0sYi5HUk9VUF9TRVAsYi5ERUNJTUFMX1NFUCxjKX19ZnVuY3Rpb24gcGcoYSl7dmFyIGI9CjAsZCxjLGUsZixnOy0xPChjPWEuaW5kZXhPZihFZCkpJiYoYT1hLnJlcGxhY2UoRWQsIiIpKTswPChlPWEuc2VhcmNoKC9lL2kpKT8oMD5jJiYoYz1lKSxjKz0rYS5zbGljZShlKzEpLGE9YS5zdWJzdHJpbmcoMCxlKSk6MD5jJiYoYz1hLmxlbmd0aCk7Zm9yKGU9MDthLmNoYXJBdChlKT09aWM7ZSsrKTtpZihlPT0oZz1hLmxlbmd0aCkpZD1bMF0sYz0xO2Vsc2V7Zm9yKGctLTthLmNoYXJBdChnKT09aWM7KWctLTtjLT1lO2Q9W107Zm9yKGY9MDtlPD1nO2UrKyxmKyspZFtmXT0rYS5jaGFyQXQoZSl9Yz5GZCYmKGQ9ZC5zcGxpY2UoMCxGZC0xKSxiPWMtMSxjPTEpO3JldHVybntkOmQsZTpiLGk6Y319ZnVuY3Rpb24gcWcoYSxiLGQsYyl7dmFyIGU9YS5kLGY9ZS5sZW5ndGgtYS5pO2I9cihiKT9NYXRoLm1pbihNYXRoLm1heChkLGYpLGMpOitiO2Q9YithLmk7Yz1lW2RdO2lmKDA8ZCllLnNwbGljZShkKTtlbHNle2EuaT0xO2UubGVuZ3RoPWQ9YisxO2Zvcih2YXIgZz0wO2c8ZDtnKyspZVtnXT0KMH1mb3IoNTw9YyYmZVtkLTFdKys7ZjxiO2YrKyllLnB1c2goMCk7aWYoYj1lLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uKGEsYixjLGQpe2IrPWE7ZFtjXT1iJTEwO3JldHVybiBNYXRoLmZsb29yKGIvMTApfSwwKSllLnVuc2hpZnQoYiksYS5pKyt9ZnVuY3Rpb24gRGQoYSxiLGQsYyxlKXtpZighSChhKSYmIVAoYSl8fGlzTmFOKGEpKXJldHVybiIiO3ZhciBmPSFpc0Zpbml0ZShhKSxnPSExLGg9TWF0aC5hYnMoYSkrIiIsaz0iIjtpZihmKWs9Ilx1MjIxZSI7ZWxzZXtnPXBnKGgpO3FnKGcsZSxiLm1pbkZyYWMsYi5tYXhGcmFjKTtrPWcuZDtoPWcuaTtlPWcuZTtmPVtdO2ZvcihnPWsucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJiFifSwhMCk7MD5oOylrLnVuc2hpZnQoMCksaCsrOzA8aD9mPWsuc3BsaWNlKGgsay5sZW5ndGgpOihmPWssaz1bMF0pO2g9W107Zm9yKGsubGVuZ3RoPj1iLmxnU2l6ZSYmaC51bnNoaWZ0KGsuc3BsaWNlKC1iLmxnU2l6ZSxrLmxlbmd0aCkuam9pbigiIikpO2subGVuZ3RoPgpiLmdTaXplOyloLnVuc2hpZnQoay5zcGxpY2UoLWIuZ1NpemUsay5sZW5ndGgpLmpvaW4oIiIpKTtrLmxlbmd0aCYmaC51bnNoaWZ0KGsuam9pbigiIikpO2s9aC5qb2luKGQpO2YubGVuZ3RoJiYoays9YytmLmpvaW4oIiIpKTtlJiYoays9ImUrIitlKX1yZXR1cm4gMD5hJiYhZz9iLm5lZ1ByZStrK2IubmVnU3VmOmIucG9zUHJlK2srYi5wb3NTdWZ9ZnVuY3Rpb24gR2IoYSxiLGQpe3ZhciBjPSIiOzA+YSYmKGM9Ii0iLGE9LWEpO2ZvcihhPSIiK2E7YS5sZW5ndGg8YjspYT1pYythO2QmJihhPWEuc3Vic3RyKGEubGVuZ3RoLWIpKTtyZXR1cm4gYythfWZ1bmN0aW9uIGJhKGEsYixkLGMpe2Q9ZHx8MDtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1lWyJnZXQiK2FdKCk7aWYoMDxkfHxlPi1kKWUrPWQ7MD09PWUmJi0xMj09ZCYmKGU9MTIpO3JldHVybiBHYihlLGIsYyl9fWZ1bmN0aW9uIEhiKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyl7dmFyIGU9ZFsiZ2V0IithXSgpLGY9cmIoYj8iU0hPUlQiKwphOmEpO3JldHVybiBjW2ZdW2VdfX1mdW5jdGlvbiBHZChhKXt2YXIgYj0obmV3IERhdGUoYSwwLDEpKS5nZXREYXkoKTtyZXR1cm4gbmV3IERhdGUoYSwwLCg0Pj1iPzU6MTIpLWIpfWZ1bmN0aW9uIEhkKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgZD1HZChiLmdldEZ1bGxZZWFyKCkpO2I9K25ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkrKDQtYi5nZXREYXkoKSkpLStkO2I9MStNYXRoLnJvdW5kKGIvNjA0OEU1KTtyZXR1cm4gR2IoYixhKX19ZnVuY3Rpb24gamMoYSxiKXtyZXR1cm4gMD49YS5nZXRGdWxsWWVhcigpP2IuRVJBU1swXTpiLkVSQVNbMV19ZnVuY3Rpb24gQWQoYSl7ZnVuY3Rpb24gYihhKXt2YXIgYjtpZihiPWEubWF0Y2goZCkpe2E9bmV3IERhdGUoMCk7dmFyIGY9MCxnPTAsaD1iWzhdP2Euc2V0VVRDRnVsbFllYXI6YS5zZXRGdWxsWWVhcixrPWJbOF0/YS5zZXRVVENIb3VyczphLnNldEhvdXJzO2JbOV0mJihmPWNhKGJbOV0rCmJbMTBdKSxnPWNhKGJbOV0rYlsxMV0pKTtoLmNhbGwoYSxjYShiWzFdKSxjYShiWzJdKS0xLGNhKGJbM10pKTtmPWNhKGJbNF18fDApLWY7Zz1jYShiWzVdfHwwKS1nO2g9Y2EoYls2XXx8MCk7Yj1NYXRoLnJvdW5kKDFFMypwYXJzZUZsb2F0KCIwLiIrKGJbN118fDApKSk7ay5jYWxsKGEsZixnLGgsYil9cmV0dXJuIGF9dmFyIGQ9L14oXGR7NH0pLT8oXGRcZCktPyhcZFxkKSg/OlQoXGRcZCkoPzo6PyhcZFxkKSg/Ojo/KFxkXGQpKD86XC4oXGQrKSk/KT8pPyhafChbKy1dKShcZFxkKTo/KFxkXGQpKT8pPyQvO3JldHVybiBmdW5jdGlvbihjLGQsZil7dmFyIGc9IiIsaD1bXSxrLG07ZD1kfHwibWVkaXVtRGF0ZSI7ZD1hLkRBVEVUSU1FX0ZPUk1BVFNbZF18fGQ7SChjKSYmKGM9cmcudGVzdChjKT9jYShjKTpiKGMpKTtQKGMpJiYoYz1uZXcgRGF0ZShjKSk7aWYoIWVhKGMpfHwhaXNGaW5pdGUoYy5nZXRUaW1lKCkpKXJldHVybiBjO2Zvcig7ZDspKG09c2cuZXhlYyhkKSk/KGg9YmIoaCwKbSwxKSxkPWgucG9wKCkpOihoLnB1c2goZCksZD1udWxsKTt2YXIgbD1jLmdldFRpbWV6b25lT2Zmc2V0KCk7ZiYmKGw9dmMoZixsKSxjPVBiKGMsZiwhMCkpO3AoaCxmdW5jdGlvbihiKXtrPXRnW2JdO2crPWs/ayhjLGEuREFURVRJTUVfRk9STUFUUyxsKToiJyciPT09Yj8iJyI6Yi5yZXBsYWNlKC8oXid8JyQpL2csIiIpLnJlcGxhY2UoLycnL2csIiciKX0pO3JldHVybiBnfX1mdW5jdGlvbiBrZygpe3JldHVybiBmdW5jdGlvbihhLGIpe3IoYikmJihiPTIpO3JldHVybiBjYihhLGIpfX1mdW5jdGlvbiBsZygpe3JldHVybiBmdW5jdGlvbihhLGIsZCl7Yj1JbmZpbml0eT09PU1hdGguYWJzKE51bWJlcihiKSk/TnVtYmVyKGIpOmNhKGIpO2lmKGlzTmFOKGIpKXJldHVybiBhO1AoYSkmJihhPWEudG9TdHJpbmcoKSk7aWYoIUwoYSkmJiFIKGEpKXJldHVybiBhO2Q9IWR8fGlzTmFOKGQpPzA6Y2EoZCk7ZD0wPmQ/TWF0aC5tYXgoMCxhLmxlbmd0aCtkKTpkO3JldHVybiAwPD1iP2Euc2xpY2UoZCwKZCtiKTowPT09ZD9hLnNsaWNlKGIsYS5sZW5ndGgpOmEuc2xpY2UoTWF0aC5tYXgoMCxkK2IpLGQpfX1mdW5jdGlvbiBDZChhKXtmdW5jdGlvbiBiKGIsZCl7ZD1kPy0xOjE7cmV0dXJuIGIubWFwKGZ1bmN0aW9uKGIpe3ZhciBjPTEsaD1aYTtpZihHKGIpKWg9YjtlbHNlIGlmKEgoYikpe2lmKCIrIj09Yi5jaGFyQXQoMCl8fCItIj09Yi5jaGFyQXQoMCkpYz0iLSI9PWIuY2hhckF0KDApPy0xOjEsYj1iLnN1YnN0cmluZygxKTtpZigiIiE9PWImJihoPWEoYiksaC5jb25zdGFudCkpdmFyIGs9aCgpLGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGFba119fXJldHVybntnZXQ6aCxkZXNjZW5kaW5nOmMqZH19KX1mdW5jdGlvbiBkKGEpe3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSAibnVtYmVyIjpjYXNlICJib29sZWFuIjpjYXNlICJzdHJpbmciOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fXJldHVybiBmdW5jdGlvbihhLGUsZil7aWYoIUFhKGEpKXJldHVybiBhO0woZSl8fChlPVtlXSk7MD09PQplLmxlbmd0aCYmKGU9WyIrIl0pO3ZhciBnPWIoZSxmKTtnLnB1c2goe2dldDpmdW5jdGlvbigpe3JldHVybnt9fSxkZXNjZW5kaW5nOmY/LTE6MX0pO2E9QXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGEsZnVuY3Rpb24oYSxiKXtyZXR1cm57dmFsdWU6YSxwcmVkaWNhdGVWYWx1ZXM6Zy5tYXAoZnVuY3Rpb24oYyl7dmFyIGU9Yy5nZXQoYSk7Yz10eXBlb2YgZTtpZihudWxsPT09ZSljPSJzdHJpbmciLGU9Im51bGwiO2Vsc2UgaWYoInN0cmluZyI9PT1jKWU9ZS50b0xvd2VyQ2FzZSgpO2Vsc2UgaWYoIm9iamVjdCI9PT1jKWE6e2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgZS52YWx1ZU9mJiYoZT1lLnZhbHVlT2YoKSxkKGUpKSlicmVhayBhO2lmKHFjKGUpJiYoZT1lLnRvU3RyaW5nKCksZChlKSkpYnJlYWsgYTtlPWJ9cmV0dXJue3ZhbHVlOmUsdHlwZTpjfX0pfX0pO2Euc29ydChmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9MCxlPWcubGVuZ3RoO2Q8ZTsrK2Qpe3ZhciBjPWEucHJlZGljYXRlVmFsdWVzW2RdLApmPWIucHJlZGljYXRlVmFsdWVzW2RdLHA9MDtjLnR5cGU9PT1mLnR5cGU/Yy52YWx1ZSE9PWYudmFsdWUmJihwPWMudmFsdWU8Zi52YWx1ZT8tMToxKTpwPWMudHlwZTxmLnR5cGU/LTE6MTtpZihjPXAqZ1tkXS5kZXNjZW5kaW5nKWJyZWFrfXJldHVybiBjfSk7cmV0dXJuIGE9YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudmFsdWV9KX19ZnVuY3Rpb24gS2EoYSl7RyhhKSYmKGE9e2xpbms6YX0pO2EucmVzdHJpY3Q9YS5yZXN0cmljdHx8IkFDIjtyZXR1cm4gbWEoYSl9ZnVuY3Rpb24gSWQoYSxiLGQsYyxlKXt2YXIgZj10aGlzLGc9W107Zi4kZXJyb3I9e307Zi4kJHN1Y2Nlc3M9e307Zi4kcGVuZGluZz14O2YuJG5hbWU9ZShiLm5hbWV8fGIubmdGb3JtfHwiIikoZCk7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7Zi4kdmFsaWQ9ITA7Zi4kaW52YWxpZD0hMTtmLiRzdWJtaXR0ZWQ9ITE7Zi4kJHBhcmVudEZvcm09SWI7Zi4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtwKGcsCmZ1bmN0aW9uKGEpe2EuJHJvbGxiYWNrVmlld1ZhbHVlKCl9KX07Zi4kY29tbWl0Vmlld1ZhbHVlPWZ1bmN0aW9uKCl7cChnLGZ1bmN0aW9uKGEpe2EuJGNvbW1pdFZpZXdWYWx1ZSgpfSl9O2YuJGFkZENvbnRyb2w9ZnVuY3Rpb24oYSl7U2EoYS4kbmFtZSwiaW5wdXQiKTtnLnB1c2goYSk7YS4kbmFtZSYmKGZbYS4kbmFtZV09YSk7YS4kJHBhcmVudEZvcm09Zn07Zi4kJHJlbmFtZUNvbnRyb2w9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLiRuYW1lO2ZbY109PT1hJiZkZWxldGUgZltjXTtmW2JdPWE7YS4kbmFtZT1ifTtmLiRyZW1vdmVDb250cm9sPWZ1bmN0aW9uKGEpe2EuJG5hbWUmJmZbYS4kbmFtZV09PT1hJiZkZWxldGUgZlthLiRuYW1lXTtwKGYuJHBlbmRpbmcsZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLG51bGwsYSl9KTtwKGYuJGVycm9yLGZ1bmN0aW9uKGIsYyl7Zi4kc2V0VmFsaWRpdHkoYyxudWxsLGEpfSk7cChmLiQkc3VjY2VzcyxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsCm51bGwsYSl9KTthYihnLGEpO2EuJCRwYXJlbnRGb3JtPUlifTtKZCh7Y3RybDp0aGlzLCRlbGVtZW50OmEsc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hW2JdO2Q/LTE9PT1kLmluZGV4T2YoYykmJmQucHVzaChjKTphW2JdPVtjXX0sdW5zZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWFbYl07ZCYmKGFiKGQsYyksMD09PWQubGVuZ3RoJiZkZWxldGUgYVtiXSl9LCRhbmltYXRlOmN9KTtmLiRzZXREaXJ0eT1mdW5jdGlvbigpe2MucmVtb3ZlQ2xhc3MoYSxYYSk7Yy5hZGRDbGFzcyhhLEpiKTtmLiRkaXJ0eT0hMDtmLiRwcmlzdGluZT0hMTtmLiQkcGFyZW50Rm9ybS4kc2V0RGlydHkoKX07Zi4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtjLnNldENsYXNzKGEsWGEsSmIrIiBuZy1zdWJtaXR0ZWQiKTtmLiRkaXJ0eT0hMTtmLiRwcmlzdGluZT0hMDtmLiRzdWJtaXR0ZWQ9ITE7cChnLGZ1bmN0aW9uKGEpe2EuJHNldFByaXN0aW5lKCl9KX07Zi4kc2V0VW50b3VjaGVkPWZ1bmN0aW9uKCl7cChnLApmdW5jdGlvbihhKXthLiRzZXRVbnRvdWNoZWQoKX0pfTtmLiRzZXRTdWJtaXR0ZWQ9ZnVuY3Rpb24oKXtjLmFkZENsYXNzKGEsIm5nLXN1Ym1pdHRlZCIpO2YuJHN1Ym1pdHRlZD0hMDtmLiQkcGFyZW50Rm9ybS4kc2V0U3VibWl0dGVkKCl9fWZ1bmN0aW9uIGtjKGEpe2EuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihiKXtyZXR1cm4gYS4kaXNFbXB0eShiKT9iOmIudG9TdHJpbmcoKX0pfWZ1bmN0aW9uIGliKGEsYixkLGMsZSxmKXt2YXIgZz1NKGJbMF0udHlwZSk7aWYoIWUuYW5kcm9pZCl7dmFyIGg9ITE7Yi5vbigiY29tcG9zaXRpb25zdGFydCIsZnVuY3Rpb24oYSl7aD0hMH0pO2Iub24oImNvbXBvc2l0aW9uZW5kIixmdW5jdGlvbigpe2g9ITE7bSgpfSl9dmFyIGssbT1mdW5jdGlvbihhKXtrJiYoZi5kZWZlci5jYW5jZWwoayksaz1udWxsKTtpZighaCl7dmFyIGU9Yi52YWwoKTthPWEmJmEudHlwZTsicGFzc3dvcmQiPT09Z3x8ZC5uZ1RyaW0mJiJmYWxzZSI9PT1kLm5nVHJpbXx8CihlPVQoZSkpOyhjLiR2aWV3VmFsdWUhPT1lfHwiIj09PWUmJmMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSYmYy4kc2V0Vmlld1ZhbHVlKGUsYSl9fTtpZihlLmhhc0V2ZW50KCJpbnB1dCIpKWIub24oImlucHV0IixtKTtlbHNle3ZhciBsPWZ1bmN0aW9uKGEsYixjKXtrfHwoaz1mLmRlZmVyKGZ1bmN0aW9uKCl7az1udWxsO2ImJmIudmFsdWU9PT1jfHxtKGEpfSkpfTtiLm9uKCJrZXlkb3duIixmdW5jdGlvbihhKXt2YXIgYj1hLmtleUNvZGU7OTE9PT1ifHwxNTxiJiYxOT5ifHwzNzw9YiYmNDA+PWJ8fGwoYSx0aGlzLHRoaXMudmFsdWUpfSk7aWYoZS5oYXNFdmVudCgicGFzdGUiKSliLm9uKCJwYXN0ZSBjdXQiLGwpfWIub24oImNoYW5nZSIsbSk7aWYoS2RbZ10mJmMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzJiZnPT09ZC50eXBlKWIub24oImtleWRvd24gd2hlZWwgbW91c2Vkb3duIixmdW5jdGlvbihhKXtpZighayl7dmFyIGI9dGhpcy52YWxpZGl0eSxjPWIuYmFkSW5wdXQsZD1iLnR5cGVNaXNtYXRjaDsKaz1mLmRlZmVyKGZ1bmN0aW9uKCl7az1udWxsO2IuYmFkSW5wdXQ9PT1jJiZiLnR5cGVNaXNtYXRjaD09PWR8fG0oYSl9KX19KTtjLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT1jLiRpc0VtcHR5KGMuJHZpZXdWYWx1ZSk/IiI6Yy4kdmlld1ZhbHVlO2IudmFsKCkhPT1hJiZiLnZhbChhKX19ZnVuY3Rpb24gS2IoYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjKXt2YXIgZSxmO2lmKGVhKGQpKXJldHVybiBkO2lmKEgoZCkpeyciJz09ZC5jaGFyQXQoMCkmJiciJz09ZC5jaGFyQXQoZC5sZW5ndGgtMSkmJihkPWQuc3Vic3RyaW5nKDEsZC5sZW5ndGgtMSkpO2lmKHVnLnRlc3QoZCkpcmV0dXJuIG5ldyBEYXRlKGQpO2EubGFzdEluZGV4PTA7aWYoZT1hLmV4ZWMoZCkpcmV0dXJuIGUuc2hpZnQoKSxmPWM/e3l5eXk6Yy5nZXRGdWxsWWVhcigpLE1NOmMuZ2V0TW9udGgoKSsxLGRkOmMuZ2V0RGF0ZSgpLEhIOmMuZ2V0SG91cnMoKSxtbTpjLmdldE1pbnV0ZXMoKSxzczpjLmdldFNlY29uZHMoKSwKc3NzOmMuZ2V0TWlsbGlzZWNvbmRzKCkvMUUzfTp7eXl5eToxOTcwLE1NOjEsZGQ6MSxISDowLG1tOjAsc3M6MCxzc3M6MH0scChlLGZ1bmN0aW9uKGEsYyl7YzxiLmxlbmd0aCYmKGZbYltjXV09K2EpfSksbmV3IERhdGUoZi55eXl5LGYuTU0tMSxmLmRkLGYuSEgsZi5tbSxmLnNzfHwwLDFFMypmLnNzc3x8MCl9cmV0dXJuIE5hTn19ZnVuY3Rpb24gamIoYSxiLGQsYyl7cmV0dXJuIGZ1bmN0aW9uKGUsZixnLGgsayxtLGwpe2Z1bmN0aW9uIG4oYSl7cmV0dXJuIGEmJiEoYS5nZXRUaW1lJiZhLmdldFRpbWUoKSE9PWEuZ2V0VGltZSgpKX1mdW5jdGlvbiBwKGEpe3JldHVybiB1KGEpJiYhZWEoYSk/ZChhKXx8eDphfUxkKGUsZixnLGgpO2liKGUsZixnLGgsayxtKTt2YXIgej1oJiZoLiRvcHRpb25zJiZoLiRvcHRpb25zLnRpbWV6b25lLHQ7aC4kJHBhcnNlck5hbWU9YTtoLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGguJGlzRW1wdHkoYSk/bnVsbDpiLnRlc3QoYSk/CihhPWQoYSx0KSx6JiYoYT1QYihhLHopKSxhKTp4fSk7aC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKGEmJiFlYShhKSl0aHJvdyBrYigiZGF0ZWZtdCIsYSk7aWYobihhKSlyZXR1cm4odD1hKSYmeiYmKHQ9UGIodCx6LCEwKSksbCgiZGF0ZSIpKGEsYyx6KTt0PW51bGw7cmV0dXJuIiJ9KTtpZih1KGcubWluKXx8Zy5uZ01pbil7dmFyIEE7aC4kdmFsaWRhdG9ycy5taW49ZnVuY3Rpb24oYSl7cmV0dXJuIW4oYSl8fHIoQSl8fGQoYSk+PUF9O2cuJG9ic2VydmUoIm1pbiIsZnVuY3Rpb24oYSl7QT1wKGEpO2guJHZhbGlkYXRlKCl9KX1pZih1KGcubWF4KXx8Zy5uZ01heCl7dmFyIHE7aC4kdmFsaWRhdG9ycy5tYXg9ZnVuY3Rpb24oYSl7cmV0dXJuIW4oYSl8fHIocSl8fGQoYSk8PXF9O2cuJG9ic2VydmUoIm1heCIsZnVuY3Rpb24oYSl7cT1wKGEpO2guJHZhbGlkYXRlKCl9KX19fWZ1bmN0aW9uIExkKGEsYixkLGMpeyhjLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz1LKGJbMF0udmFsaWRpdHkpKSYmCmMuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXt2YXIgYz1iLnByb3AoInZhbGlkaXR5Iil8fHt9O3JldHVybiBjLmJhZElucHV0JiYhYy50eXBlTWlzbWF0Y2g/eDphfSl9ZnVuY3Rpb24gTWQoYSxiLGQsYyxlKXtpZih1KGMpKXthPWEoYyk7aWYoIWEuY29uc3RhbnQpdGhyb3cga2IoImNvbnN0ZXhwciIsZCxjKTtyZXR1cm4gYShiKX1yZXR1cm4gZX1mdW5jdGlvbiBsYyhhLGIpe2E9Im5nQ2xhc3MiK2E7cmV0dXJuWyIkYW5pbWF0ZSIsZnVuY3Rpb24oZCl7ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPVtdLGQ9MDthOmZvcig7ZDxhLmxlbmd0aDtkKyspe2Zvcih2YXIgZT1hW2RdLGw9MDtsPGIubGVuZ3RoO2wrKylpZihlPT1iW2xdKWNvbnRpbnVlIGE7Yy5wdXNoKGUpfXJldHVybiBjfWZ1bmN0aW9uIGUoYSl7dmFyIGI9W107cmV0dXJuIEwoYSk/KHAoYSxmdW5jdGlvbihhKXtiPWIuY29uY2F0KGUoYSkpfSksYik6SChhKT9hLnNwbGl0KCIgIik6SyhhKT8ocChhLGZ1bmN0aW9uKGEsYyl7YSYmCihiPWIuY29uY2F0KGMuc3BsaXQoIiAiKSkpfSksYik6YX1yZXR1cm57cmVzdHJpY3Q6IkFDIixsaW5rOmZ1bmN0aW9uKGYsZyxoKXtmdW5jdGlvbiBrKGEpe2E9bShhLDEpO2guJGFkZENsYXNzKGEpfWZ1bmN0aW9uIG0oYSxiKXt2YXIgYz1nLmRhdGEoIiRjbGFzc0NvdW50cyIpfHxaKCksZD1bXTtwKGEsZnVuY3Rpb24oYSl7aWYoMDxifHxjW2FdKWNbYV09KGNbYV18fDApK2IsY1thXT09PSsoMDxiKSYmZC5wdXNoKGEpfSk7Zy5kYXRhKCIkY2xhc3NDb3VudHMiLGMpO3JldHVybiBkLmpvaW4oIiAiKX1mdW5jdGlvbiBsKGEsYil7dmFyIGU9YyhiLGEpLGY9YyhhLGIpLGU9bShlLDEpLGY9bShmLC0xKTtlJiZlLmxlbmd0aCYmZC5hZGRDbGFzcyhnLGUpO2YmJmYubGVuZ3RoJiZkLnJlbW92ZUNsYXNzKGcsZil9ZnVuY3Rpb24gbihhKXtpZighMD09PWJ8fGYuJGluZGV4JTI9PT1iKXt2YXIgYz1lKGF8fFtdKTtpZighcilrKGMpO2Vsc2UgaWYoIWxhKGEscikpe3ZhciBkPWUocik7bChkLApjKX19cj1MKGEpP2EubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBmYShhKX0pOmZhKGEpfXZhciByO2YuJHdhdGNoKGhbYV0sbiwhMCk7aC4kb2JzZXJ2ZSgiY2xhc3MiLGZ1bmN0aW9uKGIpe24oZi4kZXZhbChoW2FdKSl9KTsibmdDbGFzcyIhPT1hJiZmLiR3YXRjaCgiJGluZGV4IixmdW5jdGlvbihjLGQpe3ZhciBnPWMmMTtpZihnIT09KGQmMSkpe3ZhciBsPWUoZi4kZXZhbChoW2FdKSk7Zz09PWI/ayhsKTooZz1tKGwsLTEpLGguJHJlbW92ZUNsYXNzKGcpKX19KX19fV19ZnVuY3Rpb24gSmQoYSl7ZnVuY3Rpb24gYihhLGIpe2ImJiFmW2FdPyhrLmFkZENsYXNzKGUsYSksZlthXT0hMCk6IWImJmZbYV0mJihrLnJlbW92ZUNsYXNzKGUsYSksZlthXT0hMSl9ZnVuY3Rpb24gZChhLGMpe2E9YT8iLSIremMoYSwiLSIpOiIiO2IobGIrYSwhMD09PWMpO2IoTmQrYSwhMT09PWMpfXZhciBjPWEuY3RybCxlPWEuJGVsZW1lbnQsZj17fSxnPWEuc2V0LGg9YS51bnNldCxrPWEuJGFuaW1hdGU7CmZbTmRdPSEoZltsYl09ZS5oYXNDbGFzcyhsYikpO2MuJHNldFZhbGlkaXR5PWZ1bmN0aW9uKGEsZSxmKXtyKGUpPyhjLiRwZW5kaW5nfHwoYy4kcGVuZGluZz17fSksZyhjLiRwZW5kaW5nLGEsZikpOihjLiRwZW5kaW5nJiZoKGMuJHBlbmRpbmcsYSxmKSxPZChjLiRwZW5kaW5nKSYmKGMuJHBlbmRpbmc9eCkpO01hKGUpP2U/KGgoYy4kZXJyb3IsYSxmKSxnKGMuJCRzdWNjZXNzLGEsZikpOihnKGMuJGVycm9yLGEsZiksaChjLiQkc3VjY2VzcyxhLGYpKTooaChjLiRlcnJvcixhLGYpLGgoYy4kJHN1Y2Nlc3MsYSxmKSk7Yy4kcGVuZGluZz8oYihQZCwhMCksYy4kdmFsaWQ9Yy4kaW52YWxpZD14LGQoIiIsbnVsbCkpOihiKFBkLCExKSxjLiR2YWxpZD1PZChjLiRlcnJvciksYy4kaW52YWxpZD0hYy4kdmFsaWQsZCgiIixjLiR2YWxpZCkpO2U9Yy4kcGVuZGluZyYmYy4kcGVuZGluZ1thXT94OmMuJGVycm9yW2FdPyExOmMuJCRzdWNjZXNzW2FdPyEwOm51bGw7ZChhLGUpO2MuJCRwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eShhLAplLGMpfX1mdW5jdGlvbiBPZChhKXtpZihhKWZvcih2YXIgYiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuITE7cmV0dXJuITB9dmFyIHZnPS9eXC8oLispXC8oW2Etel0qKSQvLE09ZnVuY3Rpb24oYSl7cmV0dXJuIEgoYSk/YS50b0xvd2VyQ2FzZSgpOmF9LHNhPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkscmI9ZnVuY3Rpb24oYSl7cmV0dXJuIEgoYSk/YS50b1VwcGVyQ2FzZSgpOmF9LEhhLEQscGEsdGE9W10uc2xpY2UsWGY9W10uc3BsaWNlLHdnPVtdLnB1c2gsbmE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxyYz1PYmplY3QuZ2V0UHJvdG90eXBlT2YsQmE9QigibmciKSxkYT1SLmFuZ3VsYXJ8fChSLmFuZ3VsYXI9e30pLFNiLG1iPTA7SGE9VS5kb2N1bWVudE1vZGU7di4kaW5qZWN0PVtdO1phLiRpbmplY3Q9W107dmFyIEw9QXJyYXkuaXNBcnJheSxaZD0vXlxbb2JqZWN0ICg/OlVpbnQ4fFVpbnQ4Q2xhbXBlZHxVaW50MTZ8VWludDMyfEludDh8SW50MTZ8SW50MzJ8RmxvYXQzMnxGbG9hdDY0KUFycmF5XF0kLywKVD1mdW5jdGlvbihhKXtyZXR1cm4gSChhKT9hLnRyaW0oKTphfSx2ZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oWy0oKVxbXF17fSs/Ki4kXF58LDojPCFcXF0pL2csIlxcJDEiKS5yZXBsYWNlKC9ceDA4L2csIlxceDA4Iil9LENhPWZ1bmN0aW9uKCl7aWYoIXUoQ2EucnVsZXMpKXt2YXIgYT1VLnF1ZXJ5U2VsZWN0b3IoIltuZy1jc3BdIil8fFUucXVlcnlTZWxlY3RvcigiW2RhdGEtbmctY3NwXSIpO2lmKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJuZy1jc3AiKXx8YS5nZXRBdHRyaWJ1dGUoImRhdGEtbmctY3NwIik7Q2EucnVsZXM9e25vVW5zYWZlRXZhbDohYnx8LTEhPT1iLmluZGV4T2YoIm5vLXVuc2FmZS1ldmFsIiksbm9JbmxpbmVTdHlsZTohYnx8LTEhPT1iLmluZGV4T2YoIm5vLWlubGluZS1zdHlsZSIpfX1lbHNle2E9Q2E7dHJ5e25ldyBGdW5jdGlvbigiIiksYj0hMX1jYXRjaChkKXtiPSEwfWEucnVsZXM9e25vVW5zYWZlRXZhbDpiLG5vSW5saW5lU3R5bGU6ITF9fX1yZXR1cm4gQ2EucnVsZXN9LApvYj1mdW5jdGlvbigpe2lmKHUob2IubmFtZV8pKXJldHVybiBvYi5uYW1lXzt2YXIgYSxiLGQ9UGEubGVuZ3RoLGMsZTtmb3IoYj0wO2I8ZDsrK2IpaWYoYz1QYVtiXSxhPVUucXVlcnlTZWxlY3RvcigiWyIrYy5yZXBsYWNlKCI6IiwiXFw6IikrImpxXSIpKXtlPWEuZ2V0QXR0cmlidXRlKGMrImpxIik7YnJlYWt9cmV0dXJuIG9iLm5hbWVfPWV9LGJlPS86L2csUGE9WyJuZy0iLCJkYXRhLW5nLSIsIm5nOiIsIngtbmctIl0sZ2U9L1tBLVpdL2csQWM9ITEsUmIsT2E9MyxrZT17ZnVsbDoiMS40LjE0IixtYWpvcjoxLG1pbm9yOjQsZG90OjE0LGNvZGVOYW1lOiJtYXRlcmlhbC1kaXN0aW5jdGlvbiJ9O1MuZXhwYW5kbz0ibmczMzkiO3ZhciBmYj1TLmNhY2hlPXt9LE1mPTE7Uy5fZGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fX07dmFyIEhmPS8oW1w6XC1cX10rKC4pKS9nLElmPS9ebW96KFtBLVpdKS8sd2I9e21vdXNlbGVhdmU6Im1vdXNlb3V0IiwKbW91c2VlbnRlcjoibW91c2VvdmVyIn0sVWI9QigianFMaXRlIiksTGY9L148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyxUYj0vPHwmIz9cdys7LyxKZj0vPChbXHc6LV0rKS8sS2Y9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Oi1dKylbXj5dKilcLz4vZ2ksamE9e29wdGlvbjpbMSwnPHNlbGVjdCBtdWx0aXBsZT0ibXVsdGlwbGUiPicsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtqYS5vcHRncm91cD1qYS5vcHRpb247amEudGJvZHk9amEudGZvb3Q9amEuY29sZ3JvdXA9amEuY2FwdGlvbj1qYS50aGVhZDsKamEudGg9amEudGQ7dmFyIFJmPU5vZGUucHJvdG90eXBlLmNvbnRhaW5zfHxmdW5jdGlvbihhKXtyZXR1cm4hISh0aGlzLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpJjE2KX0sUWE9Uy5wcm90b3R5cGU9e3JlYWR5OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtkfHwoZD0hMCxhKCkpfXZhciBkPSExOyJjb21wbGV0ZSI9PT1VLnJlYWR5U3RhdGU/c2V0VGltZW91dChiKToodGhpcy5vbigiRE9NQ29udGVudExvYWRlZCIsYiksUyhSKS5vbigibG9hZCIsYikpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBhPVtdO3AodGhpcyxmdW5jdGlvbihiKXthLnB1c2goIiIrYil9KTtyZXR1cm4iWyIrYS5qb2luKCIsICIpKyJdIn0sZXE6ZnVuY3Rpb24oYSl7cmV0dXJuIDA8PWE/RCh0aGlzW2FdKTpEKHRoaXNbdGhpcy5sZW5ndGgrYV0pfSxsZW5ndGg6MCxwdXNoOndnLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSxCYj17fTtwKCJtdWx0aXBsZSBzZWxlY3RlZCBjaGVja2VkIGRpc2FibGVkIHJlYWRPbmx5IHJlcXVpcmVkIG9wZW4iLnNwbGl0KCIgIiksCmZ1bmN0aW9uKGEpe0JiW00oYSldPWF9KTt2YXIgU2M9e307cCgiaW5wdXQgc2VsZWN0IG9wdGlvbiB0ZXh0YXJlYSBidXR0b24gZm9ybSBkZXRhaWxzIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEpe1NjW2FdPSEwfSk7dmFyIGFkPXtuZ01pbmxlbmd0aDoibWlubGVuZ3RoIixuZ01heGxlbmd0aDoibWF4bGVuZ3RoIixuZ01pbjoibWluIixuZ01heDoibWF4IixuZ1BhdHRlcm46InBhdHRlcm4ifTtwKHtkYXRhOldiLHJlbW92ZURhdGE6dWIsaGFzRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gZmJbYS5uZzMzOV0pcmV0dXJuITA7cmV0dXJuITF9fSxmdW5jdGlvbihhLGIpe1NbYl09YX0pO3Aoe2RhdGE6V2IsaW5oZXJpdGVkRGF0YTpBYixzY29wZTpmdW5jdGlvbihhKXtyZXR1cm4gRC5kYXRhKGEsIiRzY29wZSIpfHxBYihhLnBhcmVudE5vZGV8fGEsWyIkaXNvbGF0ZVNjb3BlIiwiJHNjb3BlIl0pfSxpc29sYXRlU2NvcGU6ZnVuY3Rpb24oYSl7cmV0dXJuIEQuZGF0YShhLCIkaXNvbGF0ZVNjb3BlIil8fApELmRhdGEoYSwiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGUiKX0sY29udHJvbGxlcjpQYyxpbmplY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gQWIoYSwiJGluamVjdG9yIil9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXthLnJlbW92ZUF0dHJpYnV0ZShiKX0saGFzQ2xhc3M6eGIsY3NzOmZ1bmN0aW9uKGEsYixkKXtiPWViKGIpO2lmKHUoZCkpYS5zdHlsZVtiXT1kO2Vsc2UgcmV0dXJuIGEuc3R5bGVbYl19LGF0dHI6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjPWEubm9kZVR5cGU7aWYoYyE9PU9hJiYyIT09YyYmOCE9PWMpaWYoYz1NKGIpLEJiW2NdKWlmKHUoZCkpZD8oYVtiXT0hMCxhLnNldEF0dHJpYnV0ZShiLGMpKTooYVtiXT0hMSxhLnJlbW92ZUF0dHJpYnV0ZShjKSk7ZWxzZSByZXR1cm4gYVtiXXx8KGEuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oYil8fHYpLnNwZWNpZmllZD9jOng7ZWxzZSBpZih1KGQpKWEuc2V0QXR0cmlidXRlKGIsZCk7ZWxzZSBpZihhLmdldEF0dHJpYnV0ZSlyZXR1cm4gYT0KYS5nZXRBdHRyaWJ1dGUoYiwyKSxudWxsPT09YT94OmF9LHByb3A6ZnVuY3Rpb24oYSxiLGQpe2lmKHUoZCkpYVtiXT1kO2Vsc2UgcmV0dXJuIGFbYl19LHRleHQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZCl7aWYocihkKSl7dmFyIGM9YS5ub2RlVHlwZTtyZXR1cm4gMT09PWN8fGM9PT1PYT9hLnRleHRDb250ZW50OiIifWEudGV4dENvbnRlbnQ9ZH1hLiRkdj0iIjtyZXR1cm4gYX0oKSx2YWw6ZnVuY3Rpb24oYSxiKXtpZihyKGIpKXtpZihhLm11bHRpcGxlJiYic2VsZWN0Ij09PW9hKGEpKXt2YXIgZD1bXTtwKGEub3B0aW9ucyxmdW5jdGlvbihhKXthLnNlbGVjdGVkJiZkLnB1c2goYS52YWx1ZXx8YS50ZXh0KX0pO3JldHVybiAwPT09ZC5sZW5ndGg/bnVsbDpkfXJldHVybiBhLnZhbHVlfWEudmFsdWU9Yn0saHRtbDpmdW5jdGlvbihhLGIpe2lmKHIoYikpcmV0dXJuIGEuaW5uZXJIVE1MO3RiKGEsITApO2EuaW5uZXJIVE1MPWJ9LGVtcHR5OlFjfSxmdW5jdGlvbihhLGIpe1MucHJvdG90eXBlW2JdPQpmdW5jdGlvbihiLGMpe3ZhciBlLGYsZz10aGlzLmxlbmd0aDtpZihhIT09UWMmJnIoMj09YS5sZW5ndGgmJmEhPT14YiYmYSE9PVBjP2I6Yykpe2lmKEsoYikpe2ZvcihlPTA7ZTxnO2UrKylpZihhPT09V2IpYSh0aGlzW2VdLGIpO2Vsc2UgZm9yKGYgaW4gYilhKHRoaXNbZV0sZixiW2ZdKTtyZXR1cm4gdGhpc31lPWEuJGR2O2c9cihlKT9NYXRoLm1pbihnLDEpOmc7Zm9yKGY9MDtmPGc7ZisrKXt2YXIgaD1hKHRoaXNbZl0sYixjKTtlPWU/ZStoOmh9cmV0dXJuIGV9Zm9yKGU9MDtlPGc7ZSsrKWEodGhpc1tlXSxiLGMpO3JldHVybiB0aGlzfX0pO3Aoe3JlbW92ZURhdGE6dWIsb246ZnVuY3Rpb24oYSxiLGQsYyl7aWYodShjKSl0aHJvdyBVYigib25hcmdzIik7aWYoS2MoYSkpe2M9dmIoYSwhMCk7dmFyIGU9Yy5ldmVudHMsZj1jLmhhbmRsZTtmfHwoZj1jLmhhbmRsZT1PZihhLGUpKTtjPTA8PWIuaW5kZXhPZigiICIpP2Iuc3BsaXQoIiAiKTpbYl07Zm9yKHZhciBnPWMubGVuZ3RoLApoPWZ1bmN0aW9uKGIsYyxnKXt2YXIgaD1lW2JdO2h8fChoPWVbYl09W10saC5zcGVjaWFsSGFuZGxlcldyYXBwZXI9YywiJGRlc3Ryb3kiPT09Ynx8Z3x8YS5hZGRFdmVudExpc3RlbmVyKGIsZiwhMSkpO2gucHVzaChkKX07Zy0tOyliPWNbZ10sd2JbYl0/KGgod2JbYl0sUWYpLGgoYix4LCEwKSk6aChiKX19LG9mZjpPYyxvbmU6ZnVuY3Rpb24oYSxiLGQpe2E9RChhKTthLm9uKGIsZnVuY3Rpb24gZSgpe2Eub2ZmKGIsZCk7YS5vZmYoYixlKX0pO2Eub24oYixkKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYSxiKXt2YXIgZCxjPWEucGFyZW50Tm9kZTt0YihhKTtwKG5ldyBTKGIpLGZ1bmN0aW9uKGIpe2Q/Yy5pbnNlcnRCZWZvcmUoYixkLm5leHRTaWJsaW5nKTpjLnJlcGxhY2VDaGlsZChiLGEpO2Q9Yn0pfSxjaGlsZHJlbjpmdW5jdGlvbihhKXt2YXIgYj1bXTtwKGEuY2hpbGROb2RlcyxmdW5jdGlvbihhKXsxPT09YS5ub2RlVHlwZSYmYi5wdXNoKGEpfSk7cmV0dXJuIGJ9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8CmEuY2hpbGROb2Rlc3x8W119LGFwcGVuZDpmdW5jdGlvbihhLGIpe3ZhciBkPWEubm9kZVR5cGU7aWYoMT09PWR8fDExPT09ZCl7Yj1uZXcgUyhiKTtmb3IodmFyIGQ9MCxjPWIubGVuZ3RoO2Q8YztkKyspYS5hcHBlbmRDaGlsZChiW2RdKX19LHByZXBlbmQ6ZnVuY3Rpb24oYSxiKXtpZigxPT09YS5ub2RlVHlwZSl7dmFyIGQ9YS5maXJzdENoaWxkO3AobmV3IFMoYiksZnVuY3Rpb24oYil7YS5pbnNlcnRCZWZvcmUoYixkKX0pfX0sd3JhcDpmdW5jdGlvbihhLGIpe01jKGEsRChiKS5lcSgwKS5jbG9uZSgpWzBdKX0scmVtb3ZlOlhiLGRldGFjaDpmdW5jdGlvbihhKXtYYihhLCEwKX0sYWZ0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hLGM9YS5wYXJlbnROb2RlO2I9bmV3IFMoYik7Zm9yKHZhciBlPTAsZj1iLmxlbmd0aDtlPGY7ZSsrKXt2YXIgZz1iW2VdO2MuaW5zZXJ0QmVmb3JlKGcsZC5uZXh0U2libGluZyk7ZD1nfX0sYWRkQ2xhc3M6emIscmVtb3ZlQ2xhc3M6eWIsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSwKYixkKXtiJiZwKGIuc3BsaXQoIiAiKSxmdW5jdGlvbihiKXt2YXIgZT1kO3IoZSkmJihlPSF4YihhLGIpKTsoZT96Yjp5YikoYSxiKX0pfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGE9YS5wYXJlbnROb2RlKSYmMTEhPT1hLm5vZGVUeXBlP2E6bnVsbH0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5uZXh0RWxlbWVudFNpYmxpbmd9LGZpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpOltdfSxjbG9uZTpWYix0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIsZCl7dmFyIGMsZSxmPWIudHlwZXx8YixnPXZiKGEpO2lmKGc9KGc9ZyYmZy5ldmVudHMpJiZnW2ZdKWM9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuZGVmYXVsdFByZXZlbnRlZH0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9CiEwfSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWR9LHN0b3BQcm9wYWdhdGlvbjp2LHR5cGU6Zix0YXJnZXQ6YX0sYi50eXBlJiYoYz1OKGMsYikpLGI9ZmEoZyksZT1kP1tjXS5jb25jYXQoZCk6W2NdLHAoYixmdW5jdGlvbihiKXtjLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCl8fGIuYXBwbHkoYSxlKX0pfX0sZnVuY3Rpb24oYSxiKXtTLnByb3RvdHlwZVtiXT1mdW5jdGlvbihiLGMsZSl7Zm9yKHZhciBmLGc9MCxoPXRoaXMubGVuZ3RoO2c8aDtnKyspcihmKT8oZj1hKHRoaXNbZ10sYixjLGUpLHUoZikmJihmPUQoZikpKTpOYyhmLGEodGhpc1tnXSxiLGMsZSkpO3JldHVybiB1KGYpP2Y6dGhpc307Uy5wcm90b3R5cGUuYmluZD1TLnByb3RvdHlwZS5vbjtTLnByb3RvdHlwZS51bmJpbmQ9Uy5wcm90b3R5cGUub2ZmfSk7VGEucHJvdG90eXBlPXtwdXQ6ZnVuY3Rpb24oYSwKYil7dGhpc1tEYShhLHRoaXMubmV4dFVpZCldPWJ9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1tEYShhLHRoaXMubmV4dFVpZCldfSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1thPURhKGEsdGhpcy5uZXh0VWlkKV07ZGVsZXRlIHRoaXNbYV07cmV0dXJuIGJ9fTt2YXIgRmY9W2Z1bmN0aW9uKCl7dGhpcy4kZ2V0PVtmdW5jdGlvbigpe3JldHVybiBUYX1dfV0sVWM9L15bXlwoXSpcKFxzKihbXlwpXSopXCkvbSx4Zz0vLC8seWc9L15ccyooXz8pKFxTKz8pXDFccyokLyxUYz0vKChcL1wvLiokKXwoXC9cKltcc1xTXSo/XCpcLykpL21nLEVhPUIoIiRpbmplY3RvciIpO2RiLiQkYW5ub3RhdGU9ZnVuY3Rpb24oYSxiLGQpe3ZhciBjO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgYSl7aWYoIShjPWEuJGluamVjdCkpe2M9W107aWYoYS5sZW5ndGgpe2lmKGIpdGhyb3cgSChkKSYmZHx8KGQ9YS5uYW1lfHxTZihhKSksRWEoInN0cmljdGRpIixkKTtiPWEudG9TdHJpbmcoKS5yZXBsYWNlKFRjLAoiIik7Yj1iLm1hdGNoKFVjKTtwKGJbMV0uc3BsaXQoeGcpLGZ1bmN0aW9uKGEpe2EucmVwbGFjZSh5ZyxmdW5jdGlvbihhLGIsZCl7Yy5wdXNoKGQpfSl9KX1hLiRpbmplY3Q9Y319ZWxzZSBMKGEpPyhiPWEubGVuZ3RoLTEsUmEoYVtiXSwiZm4iKSxjPWEuc2xpY2UoMCxiKSk6UmEoYSwiZm4iLCEwKTtyZXR1cm4gY307dmFyIFFkPUIoIiRhbmltYXRlIiksWWU9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXt9fSxaZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUYSxiPVtdO3RoaXMuJGdldD1bIiQkQW5pbWF0ZVJ1bm5lciIsIiRyb290U2NvcGUiLGZ1bmN0aW9uKGQsYyl7ZnVuY3Rpb24gZShhLGIsYyl7dmFyIGQ9ITE7YiYmKGI9SChiKT9iLnNwbGl0KCIgIik6TChiKT9iOltdLHAoYixmdW5jdGlvbihiKXtiJiYoZD0hMCxhW2JdPWMpfSkpO3JldHVybiBkfWZ1bmN0aW9uIGYoKXtwKGIsZnVuY3Rpb24oYil7dmFyIGM9YS5nZXQoYik7aWYoYyl7dmFyIGQ9VGYoYi5hdHRyKCJjbGFzcyIpKSwKZT0iIixmPSIiO3AoYyxmdW5jdGlvbihhLGIpe2EhPT0hIWRbYl0mJihhP2UrPShlLmxlbmd0aD8iICI6IiIpK2I6Zis9KGYubGVuZ3RoPyIgIjoiIikrYil9KTtwKGIsZnVuY3Rpb24oYSl7ZSYmemIoYSxlKTtmJiZ5YihhLGYpfSk7YS5yZW1vdmUoYil9fSk7Yi5sZW5ndGg9MH1yZXR1cm57ZW5hYmxlZDp2LG9uOnYsb2ZmOnYscGluOnYscHVzaDpmdW5jdGlvbihnLGgsayxtKXttJiZtKCk7az1rfHx7fTtrLmZyb20mJmcuY3NzKGsuZnJvbSk7ay50byYmZy5jc3Moay50byk7aWYoay5hZGRDbGFzc3x8ay5yZW1vdmVDbGFzcylpZihoPWsuYWRkQ2xhc3MsbT1rLnJlbW92ZUNsYXNzLGs9YS5nZXQoZyl8fHt9LGg9ZShrLGgsITApLG09ZShrLG0sITEpLGh8fG0pYS5wdXQoZyxrKSxiLnB1c2goZyksMT09PWIubGVuZ3RoJiZjLiQkcG9zdERpZ2VzdChmKTtnPW5ldyBkO2cuY29tcGxldGUoKTtyZXR1cm4gZ319fV19LFdlPVsiJHByb3ZpZGUiLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7CnRoaXMuJCRyZWdpc3RlcmVkQW5pbWF0aW9ucz1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oZCxjKXtpZihkJiYiLiIhPT1kLmNoYXJBdCgwKSl0aHJvdyBRZCgibm90Y3NlbCIsZCk7dmFyIGU9ZCsiLWFuaW1hdGlvbiI7Yi4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW2Quc3Vic3RyKDEpXT1lO2EuZmFjdG9yeShlLGMpfTt0aGlzLmNsYXNzTmFtZUZpbHRlcj1mdW5jdGlvbihhKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCYmKHRoaXMuJCRjbGFzc05hbWVGaWx0ZXI9YSBpbnN0YW5jZW9mIFJlZ0V4cD9hOm51bGwpJiYvKFxzK3xcLyluZy1hbmltYXRlKFxzK3xcLykvLnRlc3QodGhpcy4kJGNsYXNzTmFtZUZpbHRlci50b1N0cmluZygpKSl0aHJvdyBRZCgibm9uZ2NscyIsIm5nLWFuaW1hdGUiKTtyZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcn07dGhpcy4kZ2V0PVsiJCRhbmltYXRlUXVldWUiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe2lmKGQpe3ZhciBoOwphOntmb3IoaD0wO2g8ZC5sZW5ndGg7aCsrKXt2YXIgaz1kW2hdO2lmKDE9PT1rLm5vZGVUeXBlKXtoPWs7YnJlYWsgYX19aD12b2lkIDB9IWh8fGgucGFyZW50Tm9kZXx8aC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nfHwoZD1udWxsKX1kP2QuYWZ0ZXIoYSk6Yy5wcmVwZW5kKGEpfXJldHVybntvbjphLm9uLG9mZjphLm9mZixwaW46YS5waW4sZW5hYmxlZDphLmVuYWJsZWQsY2FuY2VsOmZ1bmN0aW9uKGEpe2EuZW5kJiZhLmVuZCgpfSxlbnRlcjpmdW5jdGlvbihlLGYsZyxoKXtmPWYmJkQoZik7Zz1nJiZEKGcpO2Y9Znx8Zy5wYXJlbnQoKTtiKGUsZixnKTtyZXR1cm4gYS5wdXNoKGUsImVudGVyIixGYShoKSl9LG1vdmU6ZnVuY3Rpb24oZSxmLGcsaCl7Zj1mJiZEKGYpO2c9ZyYmRChnKTtmPWZ8fGcucGFyZW50KCk7YihlLGYsZyk7cmV0dXJuIGEucHVzaChlLCJtb3ZlIixGYShoKSl9LGxlYXZlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucHVzaChiLCJsZWF2ZSIsRmEoYyksZnVuY3Rpb24oKXtiLnJlbW92ZSgpfSl9LAphZGRDbGFzczpmdW5jdGlvbihiLGMsZyl7Zz1GYShnKTtnLmFkZENsYXNzPWdiKGcuYWRkY2xhc3MsYyk7cmV0dXJuIGEucHVzaChiLCJhZGRDbGFzcyIsZyl9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGIsYyxnKXtnPUZhKGcpO2cucmVtb3ZlQ2xhc3M9Z2IoZy5yZW1vdmVDbGFzcyxjKTtyZXR1cm4gYS5wdXNoKGIsInJlbW92ZUNsYXNzIixnKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYixjLGcsaCl7aD1GYShoKTtoLmFkZENsYXNzPWdiKGguYWRkQ2xhc3MsYyk7aC5yZW1vdmVDbGFzcz1nYihoLnJlbW92ZUNsYXNzLGcpO3JldHVybiBhLnB1c2goYiwic2V0Q2xhc3MiLGgpfSxhbmltYXRlOmZ1bmN0aW9uKGIsYyxnLGgsayl7az1GYShrKTtrLmZyb209ay5mcm9tP04oay5mcm9tLGMpOmM7ay50bz1rLnRvP04oay50byxnKTpnO2sudGVtcENsYXNzZXM9Z2Ioay50ZW1wQ2xhc3NlcyxofHwibmctaW5saW5lLWFuaW1hdGUiKTtyZXR1cm4gYS5wdXNoKGIsImFuaW1hdGUiLGspfX19XX1dLGFmPQpmdW5jdGlvbigpe3RoaXMuJGdldD1bIiQkckFGIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe2QucHVzaChiKTsxPGQubGVuZ3RofHxhKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxkLmxlbmd0aDthKyspZFthXSgpO2Q9W119KX12YXIgZD1bXTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT0hMTtiKGZ1bmN0aW9uKCl7YT0hMH0pO3JldHVybiBmdW5jdGlvbihkKXthP2QoKTpiKGQpfX19XX0sJGU9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9WyIkcSIsIiRzbmlmZmVyIiwiJCRhbmltYXRlQXN5bmNSdW4iLCIkZG9jdW1lbnQiLCIkdGltZW91dCIsZnVuY3Rpb24oYSxiLGQsYyxlKXtmdW5jdGlvbiBmKGEpe3RoaXMuc2V0SG9zdChhKTt2YXIgYj1kKCk7dGhpcy5fZG9uZUNhbGxiYWNrcz1bXTt0aGlzLl90aWNrPWZ1bmN0aW9uKGEpe3ZhciBkPWNbMF07ZCYmZC5oaWRkZW4/ZShhLDAsITEpOmIoYSl9O3RoaXMuX3N0YXRlPTB9Zi5jaGFpbj1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtpZihkPT09CmEubGVuZ3RoKWIoITApO2Vsc2UgYVtkXShmdW5jdGlvbihhKXshMT09PWE/YighMSk6KGQrKyxjKCkpfSl9dmFyIGQ9MDtjKCl9O2YuYWxsPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhmKXtlPWUmJmY7KytkPT09YS5sZW5ndGgmJmIoZSl9dmFyIGQ9MCxlPSEwO3AoYSxmdW5jdGlvbihhKXthLmRvbmUoYyl9KX07Zi5wcm90b3R5cGU9e3NldEhvc3Q6ZnVuY3Rpb24oYSl7dGhpcy5ob3N0PWF8fHt9fSxkb25lOmZ1bmN0aW9uKGEpezI9PT10aGlzLl9zdGF0ZT9hKCk6dGhpcy5fZG9uZUNhbGxiYWNrcy5wdXNoKGEpfSxwcm9ncmVzczp2LGdldFByb21pc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5wcm9taXNlKXt2YXIgYj10aGlzO3RoaXMucHJvbWlzZT1hKGZ1bmN0aW9uKGEsYyl7Yi5kb25lKGZ1bmN0aW9uKGIpeyExPT09Yj9jKCk6YSgpfSl9KX1yZXR1cm4gdGhpcy5wcm9taXNlfSx0aGVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpLnRoZW4oYSxiKX0sImNhdGNoIjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRQcm9taXNlKClbImNhdGNoIl0oYSl9LAoiZmluYWxseSI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpWyJmaW5hbGx5Il0oYSl9LHBhdXNlOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LnBhdXNlJiZ0aGlzLmhvc3QucGF1c2UoKX0scmVzdW1lOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LnJlc3VtZSYmdGhpcy5ob3N0LnJlc3VtZSgpfSxlbmQ6ZnVuY3Rpb24oKXt0aGlzLmhvc3QuZW5kJiZ0aGlzLmhvc3QuZW5kKCk7dGhpcy5fcmVzb2x2ZSghMCl9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuaG9zdC5jYW5jZWwmJnRoaXMuaG9zdC5jYW5jZWwoKTt0aGlzLl9yZXNvbHZlKCExKX0sY29tcGxldGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczswPT09Yi5fc3RhdGUmJihiLl9zdGF0ZT0xLGIuX3RpY2soZnVuY3Rpb24oKXtiLl9yZXNvbHZlKGEpfSkpfSxfcmVzb2x2ZTpmdW5jdGlvbihhKXsyIT09dGhpcy5fc3RhdGUmJihwKHRoaXMuX2RvbmVDYWxsYmFja3MsZnVuY3Rpb24oYil7YihhKX0pLHRoaXMuX2RvbmVDYWxsYmFja3MubGVuZ3RoPQowLHRoaXMuX3N0YXRlPTIpfX07cmV0dXJuIGZ9XX0sWGU9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9WyIkJHJBRiIsIiRxIiwiJCRBbmltYXRlUnVubmVyIixmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGIsZSl7ZnVuY3Rpb24gZigpe2EoZnVuY3Rpb24oKXtnLmFkZENsYXNzJiYoYi5hZGRDbGFzcyhnLmFkZENsYXNzKSxnLmFkZENsYXNzPW51bGwpO2cucmVtb3ZlQ2xhc3MmJihiLnJlbW92ZUNsYXNzKGcucmVtb3ZlQ2xhc3MpLGcucmVtb3ZlQ2xhc3M9bnVsbCk7Zy50byYmKGIuY3NzKGcudG8pLGcudG89bnVsbCk7aHx8ay5jb21wbGV0ZSgpO2g9ITB9KTtyZXR1cm4ga312YXIgZz1lfHx7fTtnLiQkcHJlcGFyZWR8fChnPU5hKGcpKTtnLmNsZWFudXBTdHlsZXMmJihnLmZyb209Zy50bz1udWxsKTtnLmZyb20mJihiLmNzcyhnLmZyb20pLGcuZnJvbT1udWxsKTt2YXIgaCxrPW5ldyBkO3JldHVybntzdGFydDpmLGVuZDpmfX19XX0sZ2E9QigiJGNvbXBpbGUiKTtDYy4kaW5qZWN0PQpbIiRwcm92aWRlIiwiJCRzYW5pdGl6ZVVyaVByb3ZpZGVyIl07dmFyIFdjPS9eKCg/Onh8ZGF0YSlbXDpcLV9dKS9pLFlmPUIoIiRjb250cm9sbGVyIiksWmM9L14oXFMrKShccythc1xzKyhbXHckXSspKT8kLyxnZj1mdW5jdGlvbigpe3RoaXMuJGdldD1bIiRkb2N1bWVudCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2I/IWIubm9kZVR5cGUmJmIgaW5zdGFuY2VvZiBEJiYoYj1iWzBdKTpiPWFbMF0uYm9keTtyZXR1cm4gYi5vZmZzZXRXaWR0aCsxfX1dfSxiZD0iYXBwbGljYXRpb24vanNvbiIsYWM9eyJDb250ZW50LVR5cGUiOmJkKyI7Y2hhcnNldD11dGYtOCJ9LCRmPS9eXFt8Xlx7KD8hXHspLyxhZz17IlsiOi9dJC8sInsiOi99JC99LFpmPS9eXClcXVx9Jyw/XG4vLHpnPUIoIiRodHRwIiksZmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhyb3cgemcoImxlZ2FjeSIsYSk7fX0sSWE9ZGEuJGludGVycG9sYXRlTWluRXJyPUIoIiRpbnRlcnBvbGF0ZSIpOwpJYS50aHJvd05vY29uY2F0PWZ1bmN0aW9uKGEpe3Rocm93IElhKCJub2NvbmNhdCIsYSk7fTtJYS5pbnRlcnI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSWEoImludGVyciIsYSxiLnRvU3RyaW5nKCkpfTt2YXIgQWc9L14oW15cPyNdKikoXD8oW14jXSopKT8oIyguKikpPyQvLGNnPXtodHRwOjgwLGh0dHBzOjQ0MyxmdHA6MjF9LENiPUIoIiRsb2NhdGlvbiIpLEJnPXskJGh0bWw1OiExLCQkcmVwbGFjZTohMSxhYnNVcmw6RGIoIiQkYWJzVXJsIiksdXJsOmZ1bmN0aW9uKGEpe2lmKHIoYSkpcmV0dXJuIHRoaXMuJCR1cmw7dmFyIGI9QWcuZXhlYyhhKTsoYlsxXXx8IiI9PT1hKSYmdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChiWzFdKSk7KGJbMl18fGJbMV18fCIiPT09YSkmJnRoaXMuc2VhcmNoKGJbM118fCIiKTt0aGlzLmhhc2goYls1XXx8IiIpO3JldHVybiB0aGlzfSxwcm90b2NvbDpEYigiJCRwcm90b2NvbCIpLGhvc3Q6RGIoIiQkaG9zdCIpLHBvcnQ6RGIoIiQkcG9ydCIpLApwYXRoOmtkKCIkJHBhdGgiLGZ1bmN0aW9uKGEpe2E9bnVsbCE9PWE/YS50b1N0cmluZygpOiIiO3JldHVybiIvIj09YS5jaGFyQXQoMCk/YToiLyIrYX0pLHNlYXJjaDpmdW5jdGlvbihhLGIpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHRoaXMuJCRzZWFyY2g7Y2FzZSAxOmlmKEgoYSl8fFAoYSkpYT1hLnRvU3RyaW5nKCksdGhpcy4kJHNlYXJjaD14YyhhKTtlbHNlIGlmKEsoYSkpYT1OYShhLHt9KSxwKGEsZnVuY3Rpb24oYixjKXtudWxsPT1iJiZkZWxldGUgYVtjXX0pLHRoaXMuJCRzZWFyY2g9YTtlbHNlIHRocm93IENiKCJpc3JjaGFyZyIpO2JyZWFrO2RlZmF1bHQ6cihiKXx8bnVsbD09PWI/ZGVsZXRlIHRoaXMuJCRzZWFyY2hbYV06dGhpcy4kJHNlYXJjaFthXT1ifXRoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9LGhhc2g6a2QoIiQkaGFzaCIsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPT1hP2EudG9TdHJpbmcoKToiIn0pLHJlcGxhY2U6ZnVuY3Rpb24oKXt0aGlzLiQkcmVwbGFjZT0KITA7cmV0dXJuIHRoaXN9fTtwKFtqZCxkYyxjY10sZnVuY3Rpb24oYSl7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShCZyk7YS5wcm90b3R5cGUuc3RhdGU9ZnVuY3Rpb24oYil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuJCRzdGF0ZTtpZihhIT09Y2N8fCF0aGlzLiQkaHRtbDUpdGhyb3cgQ2IoIm5vc3RhdGUiKTt0aGlzLiQkc3RhdGU9cihiKT9udWxsOmI7cmV0dXJuIHRoaXN9fSk7dmFyIGFhPUIoIiRwYXJzZSIpLGRnPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLGVnPUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSxmZz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCxMYj1aKCk7cCgiKyAtICogLyAlID09PSAhPT0gPT0gIT0gPCA+IDw9ID49ICYmIHx8ICEgPSB8Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGEpe0xiW2FdPSEwfSk7dmFyIENnPXtuOiJcbiIsZjoiXGYiLHI6IlxyIix0OiJcdCIsdjoiXHYiLCInIjoiJyIsJyInOiciJ30sZmM9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zPQphfTtmYy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmZjLGxleDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLmluZGV4PTA7Zm9yKHRoaXMudG9rZW5zPVtdO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspaWYoYT10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLCciJz09PWF8fCInIj09PWEpdGhpcy5yZWFkU3RyaW5nKGEpO2Vsc2UgaWYodGhpcy5pc051bWJlcihhKXx8Ii4iPT09YSYmdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpdGhpcy5yZWFkTnVtYmVyKCk7ZWxzZSBpZih0aGlzLmlzSWRlbnQoYSkpdGhpcy5yZWFkSWRlbnQoKTtlbHNlIGlmKHRoaXMuaXMoYSwiKCl7fVtdLiw7Oj8iKSl0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YX0pLHRoaXMuaW5kZXgrKztlbHNlIGlmKHRoaXMuaXNXaGl0ZXNwYWNlKGEpKXRoaXMuaW5kZXgrKztlbHNle3ZhciBiPWErdGhpcy5wZWVrKCksZD1iK3RoaXMucGVlaygyKSxjPUxiW2JdLGU9TGJbZF07CkxiW2FdfHxjfHxlPyhhPWU/ZDpjP2I6YSx0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YSxvcGVyYXRvcjohMH0pLHRoaXMuaW5kZXgrPWEubGVuZ3RoKTp0aGlzLnRocm93RXJyb3IoIlVuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgIix0aGlzLmluZGV4LHRoaXMuaW5kZXgrMSl9cmV0dXJuIHRoaXMudG9rZW5zfSxpczpmdW5jdGlvbihhLGIpe3JldHVybi0xIT09Yi5pbmRleE9mKGEpfSxwZWVrOmZ1bmN0aW9uKGEpe2E9YXx8MTtyZXR1cm4gdGhpcy5pbmRleCthPHRoaXMudGV4dC5sZW5ndGg/dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4K2EpOiExfSxpc051bWJlcjpmdW5jdGlvbihhKXtyZXR1cm4iMCI8PWEmJiI5Ij49YSYmInN0cmluZyI9PT10eXBlb2YgYX0saXNXaGl0ZXNwYWNlOmZ1bmN0aW9uKGEpe3JldHVybiIgIj09PWF8fCJcciI9PT1hfHwiXHQiPT09YXx8IlxuIj09PWF8fCJcdiI9PT1hfHwiXHUwMGEwIj09PWF9LGlzSWRlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuImEiPD0KYSYmInoiPj1hfHwiQSI8PWEmJiJaIj49YXx8Il8iPT09YXx8IiQiPT09YX0saXNFeHBPcGVyYXRvcjpmdW5jdGlvbihhKXtyZXR1cm4iLSI9PT1hfHwiKyI9PT1hfHx0aGlzLmlzTnVtYmVyKGEpfSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYixkKXtkPWR8fHRoaXMuaW5kZXg7Yj11KGIpPyJzICIrYisiLSIrdGhpcy5pbmRleCsiIFsiK3RoaXMudGV4dC5zdWJzdHJpbmcoYixkKSsiXSI6IiAiK2Q7dGhyb3cgYWEoImxleGVyciIsYSxiLHRoaXMudGV4dCk7fSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5pbmRleDt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgZD1NKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO2lmKCIuIj09ZHx8dGhpcy5pc051bWJlcihkKSlhKz1kO2Vsc2V7dmFyIGM9dGhpcy5wZWVrKCk7aWYoImUiPT1kJiZ0aGlzLmlzRXhwT3BlcmF0b3IoYykpYSs9ZDtlbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihkKSYmCmMmJnRoaXMuaXNOdW1iZXIoYykmJiJlIj09YS5jaGFyQXQoYS5sZW5ndGgtMSkpYSs9ZDtlbHNlIGlmKCF0aGlzLmlzRXhwT3BlcmF0b3IoZCl8fGMmJnRoaXMuaXNOdW1iZXIoYyl8fCJlIiE9YS5jaGFyQXQoYS5sZW5ndGgtMSkpYnJlYWs7ZWxzZSB0aGlzLnRocm93RXJyb3IoIkludmFsaWQgZXhwb25lbnQiKX10aGlzLmluZGV4Kyt9dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yix0ZXh0OmEsY29uc3RhbnQ6ITAsdmFsdWU6TnVtYmVyKGEpfSl9LHJlYWRJZGVudDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBiPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYoIXRoaXMuaXNJZGVudChiKSYmIXRoaXMuaXNOdW1iZXIoYikpYnJlYWs7dGhpcy5pbmRleCsrfXRoaXMudG9rZW5zLnB1c2goe2luZGV4OmEsdGV4dDp0aGlzLnRleHQuc2xpY2UoYSx0aGlzLmluZGV4KSxpZGVudGlmaWVyOiEwfSl9LHJlYWRTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuaW5kZXg7dGhpcy5pbmRleCsrO2Zvcih2YXIgZD0iIixjPWEsZT0hMTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgZj10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLGM9YytmO2lmKGUpInUiPT09Zj8oZT10aGlzLnRleHQuc3Vic3RyaW5nKHRoaXMuaW5kZXgrMSx0aGlzLmluZGV4KzUpLGUubWF0Y2goL1tcZGEtZl17NH0vaSl8fHRoaXMudGhyb3dFcnJvcigiSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFx1IitlKyJdIiksdGhpcy5pbmRleCs9NCxkKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGUsMTYpKSk6ZCs9Q2dbZl18fGYsZT0hMTtlbHNlIGlmKCJcXCI9PT1mKWU9ITA7ZWxzZXtpZihmPT09YSl7dGhpcy5pbmRleCsrO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OmIsdGV4dDpjLGNvbnN0YW50OiEwLHZhbHVlOmR9KTtyZXR1cm59ZCs9Zn10aGlzLmluZGV4Kyt9dGhpcy50aHJvd0Vycm9yKCJVbnRlcm1pbmF0ZWQgcXVvdGUiLGIpfX07dmFyIHM9CmZ1bmN0aW9uKGEsYil7dGhpcy5sZXhlcj1hO3RoaXMub3B0aW9ucz1ifTtzLlByb2dyYW09IlByb2dyYW0iO3MuRXhwcmVzc2lvblN0YXRlbWVudD0iRXhwcmVzc2lvblN0YXRlbWVudCI7cy5Bc3NpZ25tZW50RXhwcmVzc2lvbj0iQXNzaWdubWVudEV4cHJlc3Npb24iO3MuQ29uZGl0aW9uYWxFeHByZXNzaW9uPSJDb25kaXRpb25hbEV4cHJlc3Npb24iO3MuTG9naWNhbEV4cHJlc3Npb249IkxvZ2ljYWxFeHByZXNzaW9uIjtzLkJpbmFyeUV4cHJlc3Npb249IkJpbmFyeUV4cHJlc3Npb24iO3MuVW5hcnlFeHByZXNzaW9uPSJVbmFyeUV4cHJlc3Npb24iO3MuQ2FsbEV4cHJlc3Npb249IkNhbGxFeHByZXNzaW9uIjtzLk1lbWJlckV4cHJlc3Npb249Ik1lbWJlckV4cHJlc3Npb24iO3MuSWRlbnRpZmllcj0iSWRlbnRpZmllciI7cy5MaXRlcmFsPSJMaXRlcmFsIjtzLkFycmF5RXhwcmVzc2lvbj0iQXJyYXlFeHByZXNzaW9uIjtzLlByb3BlcnR5PSJQcm9wZXJ0eSI7cy5PYmplY3RFeHByZXNzaW9uPQoiT2JqZWN0RXhwcmVzc2lvbiI7cy5UaGlzRXhwcmVzc2lvbj0iVGhpc0V4cHJlc3Npb24iO3MuTkdWYWx1ZVBhcmFtZXRlcj0iTkdWYWx1ZVBhcmFtZXRlciI7cy5wcm90b3R5cGU9e2FzdDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLnRva2Vucz10aGlzLmxleGVyLmxleChhKTthPXRoaXMucHJvZ3JhbSgpOzAhPT10aGlzLnRva2Vucy5sZW5ndGgmJnRoaXMudGhyb3dFcnJvcigiaXMgYW4gdW5leHBlY3RlZCB0b2tlbiIsdGhpcy50b2tlbnNbMF0pO3JldHVybiBhfSxwcm9ncmFtOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdOzspaWYoMDx0aGlzLnRva2Vucy5sZW5ndGgmJiF0aGlzLnBlZWsoIn0iLCIpIiwiOyIsIl0iKSYmYS5wdXNoKHRoaXMuZXhwcmVzc2lvblN0YXRlbWVudCgpKSwhdGhpcy5leHBlY3QoIjsiKSlyZXR1cm57dHlwZTpzLlByb2dyYW0sYm9keTphfX0sZXhwcmVzc2lvblN0YXRlbWVudDpmdW5jdGlvbigpe3JldHVybnt0eXBlOnMuRXhwcmVzc2lvblN0YXRlbWVudCwKZXhwcmVzc2lvbjp0aGlzLmZpbHRlckNoYWluKCl9fSxmaWx0ZXJDaGFpbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV4cHJlc3Npb24oKTt0aGlzLmV4cGVjdCgifCIpOylhPXRoaXMuZmlsdGVyKGEpO3JldHVybiBhfSxleHByZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNzaWdubWVudCgpfSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXJuYXJ5KCk7dGhpcy5leHBlY3QoIj0iKSYmKGE9e3R5cGU6cy5Bc3NpZ25tZW50RXhwcmVzc2lvbixsZWZ0OmEscmlnaHQ6dGhpcy5hc3NpZ25tZW50KCksb3BlcmF0b3I6Ij0ifSk7cmV0dXJuIGF9LHRlcm5hcnk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxvZ2ljYWxPUigpLGIsZDtyZXR1cm4gdGhpcy5leHBlY3QoIj8iKSYmKGI9dGhpcy5leHByZXNzaW9uKCksdGhpcy5jb25zdW1lKCI6IikpPyhkPXRoaXMuZXhwcmVzc2lvbigpLHt0eXBlOnMuQ29uZGl0aW9uYWxFeHByZXNzaW9uLHRlc3Q6YSxhbHRlcm5hdGU6YiwKY29uc2VxdWVudDpkfSk6YX0sbG9naWNhbE9SOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubG9naWNhbEFORCgpO3RoaXMuZXhwZWN0KCJ8fCIpOylhPXt0eXBlOnMuTG9naWNhbEV4cHJlc3Npb24sb3BlcmF0b3I6Inx8IixsZWZ0OmEscmlnaHQ6dGhpcy5sb2dpY2FsQU5EKCl9O3JldHVybiBhfSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXF1YWxpdHkoKTt0aGlzLmV4cGVjdCgiJiYiKTspYT17dHlwZTpzLkxvZ2ljYWxFeHByZXNzaW9uLG9wZXJhdG9yOiImJiIsbGVmdDphLHJpZ2h0OnRoaXMuZXF1YWxpdHkoKX07cmV0dXJuIGF9LGVxdWFsaXR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMucmVsYXRpb25hbCgpLGI7Yj10aGlzLmV4cGVjdCgiPT0iLCIhPSIsIj09PSIsIiE9PSIpOylhPXt0eXBlOnMuQmluYXJ5RXhwcmVzc2lvbixvcGVyYXRvcjpiLnRleHQsbGVmdDphLHJpZ2h0OnRoaXMucmVsYXRpb25hbCgpfTtyZXR1cm4gYX0scmVsYXRpb25hbDpmdW5jdGlvbigpe2Zvcih2YXIgYT0KdGhpcy5hZGRpdGl2ZSgpLGI7Yj10aGlzLmV4cGVjdCgiPCIsIj4iLCI8PSIsIj49Iik7KWE9e3R5cGU6cy5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmIudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy5hZGRpdGl2ZSgpfTtyZXR1cm4gYX0sYWRkaXRpdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5tdWx0aXBsaWNhdGl2ZSgpLGI7Yj10aGlzLmV4cGVjdCgiKyIsIi0iKTspYT17dHlwZTpzLkJpbmFyeUV4cHJlc3Npb24sb3BlcmF0b3I6Yi50ZXh0LGxlZnQ6YSxyaWdodDp0aGlzLm11bHRpcGxpY2F0aXZlKCl9O3JldHVybiBhfSxtdWx0aXBsaWNhdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnVuYXJ5KCksYjtiPXRoaXMuZXhwZWN0KCIqIiwiLyIsIiUiKTspYT17dHlwZTpzLkJpbmFyeUV4cHJlc3Npb24sb3BlcmF0b3I6Yi50ZXh0LGxlZnQ6YSxyaWdodDp0aGlzLnVuYXJ5KCl9O3JldHVybiBhfSx1bmFyeTpmdW5jdGlvbigpe3ZhciBhO3JldHVybihhPXRoaXMuZXhwZWN0KCIrIiwKIi0iLCIhIikpP3t0eXBlOnMuVW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmEudGV4dCxwcmVmaXg6ITAsYXJndW1lbnQ6dGhpcy51bmFyeSgpfTp0aGlzLnByaW1hcnkoKX0scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBhO3RoaXMuZXhwZWN0KCIoIik/KGE9dGhpcy5maWx0ZXJDaGFpbigpLHRoaXMuY29uc3VtZSgiKSIpKTp0aGlzLmV4cGVjdCgiWyIpP2E9dGhpcy5hcnJheURlY2xhcmF0aW9uKCk6dGhpcy5leHBlY3QoInsiKT9hPXRoaXMub2JqZWN0KCk6dGhpcy5jb25zdGFudHMuaGFzT3duUHJvcGVydHkodGhpcy5wZWVrKCkudGV4dCk/YT1OYSh0aGlzLmNvbnN0YW50c1t0aGlzLmNvbnN1bWUoKS50ZXh0XSk6dGhpcy5wZWVrKCkuaWRlbnRpZmllcj9hPXRoaXMuaWRlbnRpZmllcigpOnRoaXMucGVlaygpLmNvbnN0YW50P2E9dGhpcy5jb25zdGFudCgpOnRoaXMudGhyb3dFcnJvcigibm90IGEgcHJpbWFyeSBleHByZXNzaW9uIix0aGlzLnBlZWsoKSk7Zm9yKHZhciBiO2I9dGhpcy5leHBlY3QoIigiLAoiWyIsIi4iKTspIigiPT09Yi50ZXh0PyhhPXt0eXBlOnMuQ2FsbEV4cHJlc3Npb24sY2FsbGVlOmEsYXJndW1lbnRzOnRoaXMucGFyc2VBcmd1bWVudHMoKX0sdGhpcy5jb25zdW1lKCIpIikpOiJbIj09PWIudGV4dD8oYT17dHlwZTpzLk1lbWJlckV4cHJlc3Npb24sb2JqZWN0OmEscHJvcGVydHk6dGhpcy5leHByZXNzaW9uKCksY29tcHV0ZWQ6ITB9LHRoaXMuY29uc3VtZSgiXSIpKToiLiI9PT1iLnRleHQ/YT17dHlwZTpzLk1lbWJlckV4cHJlc3Npb24sb2JqZWN0OmEscHJvcGVydHk6dGhpcy5pZGVudGlmaWVyKCksY29tcHV0ZWQ6ITF9OnRoaXMudGhyb3dFcnJvcigiSU1QT1NTSUJMRSIpO3JldHVybiBhfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7YT1bYV07Zm9yKHZhciBiPXt0eXBlOnMuQ2FsbEV4cHJlc3Npb24sY2FsbGVlOnRoaXMuaWRlbnRpZmllcigpLGFyZ3VtZW50czphLGZpbHRlcjohMH07dGhpcy5leHBlY3QoIjoiKTspYS5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtyZXR1cm4gYn0sCnBhcnNlQXJndW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYoIikiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkbyBhLnB1c2godGhpcy5leHByZXNzaW9uKCkpO3doaWxlKHRoaXMuZXhwZWN0KCIsIikpfXJldHVybiBhfSxpZGVudGlmaWVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb25zdW1lKCk7YS5pZGVudGlmaWVyfHx0aGlzLnRocm93RXJyb3IoImlzIG5vdCBhIHZhbGlkIGlkZW50aWZpZXIiLGEpO3JldHVybnt0eXBlOnMuSWRlbnRpZmllcixuYW1lOmEudGV4dH19LGNvbnN0YW50OmZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6cy5MaXRlcmFsLHZhbHVlOnRoaXMuY29uc3VtZSgpLnZhbHVlfX0sYXJyYXlEZWNsYXJhdGlvbjpmdW5jdGlvbigpe3ZhciBhPVtdO2lmKCJdIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKCJdIikpYnJlYWs7YS5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKX13aGlsZSh0aGlzLmV4cGVjdCgiLCIpKX10aGlzLmNvbnN1bWUoIl0iKTsKcmV0dXJue3R5cGU6cy5BcnJheUV4cHJlc3Npb24sZWxlbWVudHM6YX19LG9iamVjdDpmdW5jdGlvbigpe3ZhciBhPVtdLGI7aWYoIn0iIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoIn0iKSlicmVhaztiPXt0eXBlOnMuUHJvcGVydHksa2luZDoiaW5pdCJ9O3RoaXMucGVlaygpLmNvbnN0YW50P2Iua2V5PXRoaXMuY29uc3RhbnQoKTp0aGlzLnBlZWsoKS5pZGVudGlmaWVyP2Iua2V5PXRoaXMuaWRlbnRpZmllcigpOnRoaXMudGhyb3dFcnJvcigiaW52YWxpZCBrZXkiLHRoaXMucGVlaygpKTt0aGlzLmNvbnN1bWUoIjoiKTtiLnZhbHVlPXRoaXMuZXhwcmVzc2lvbigpO2EucHVzaChiKX13aGlsZSh0aGlzLmV4cGVjdCgiLCIpKX10aGlzLmNvbnN1bWUoIn0iKTtyZXR1cm57dHlwZTpzLk9iamVjdEV4cHJlc3Npb24scHJvcGVydGllczphfX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGIpe3Rocm93IGFhKCJzeW50YXgiLGIudGV4dCxhLGIuaW5kZXgrMSx0aGlzLnRleHQsCnRoaXMudGV4dC5zdWJzdHJpbmcoYi5pbmRleCkpO30sY29uc3VtZTpmdW5jdGlvbihhKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IGFhKCJ1ZW9lIix0aGlzLnRleHQpO3ZhciBiPXRoaXMuZXhwZWN0KGEpO2J8fHRoaXMudGhyb3dFcnJvcigiaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFsiK2ErIl0iLHRoaXMucGVlaygpKTtyZXR1cm4gYn0scGVla1Rva2VuOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMudG9rZW5zLmxlbmd0aCl0aHJvdyBhYSgidWVvZSIsdGhpcy50ZXh0KTtyZXR1cm4gdGhpcy50b2tlbnNbMF19LHBlZWs6ZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuIHRoaXMucGVla0FoZWFkKDAsYSxiLGQsYyl9LHBlZWtBaGVhZDpmdW5jdGlvbihhLGIsZCxjLGUpe2lmKHRoaXMudG9rZW5zLmxlbmd0aD5hKXthPXRoaXMudG9rZW5zW2FdO3ZhciBmPWEudGV4dDtpZihmPT09Ynx8Zj09PWR8fGY9PT1jfHxmPT09ZXx8IShifHxkfHxjfHxlKSlyZXR1cm4gYX1yZXR1cm4hMX0sCmV4cGVjdDpmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4oYT10aGlzLnBlZWsoYSxiLGQsYykpPyh0aGlzLnRva2Vucy5zaGlmdCgpLGEpOiExfSxjb25zdGFudHM6eyJ0cnVlIjp7dHlwZTpzLkxpdGVyYWwsdmFsdWU6ITB9LCJmYWxzZSI6e3R5cGU6cy5MaXRlcmFsLHZhbHVlOiExfSwibnVsbCI6e3R5cGU6cy5MaXRlcmFsLHZhbHVlOm51bGx9LHVuZGVmaW5lZDp7dHlwZTpzLkxpdGVyYWwsdmFsdWU6eH0sInRoaXMiOnt0eXBlOnMuVGhpc0V4cHJlc3Npb259fX07c2QucHJvdG90eXBlPXtjb21waWxlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxjPXRoaXMuYXN0QnVpbGRlci5hc3QoYSk7dGhpcy5zdGF0ZT17bmV4dElkOjAsZmlsdGVyczp7fSxleHBlbnNpdmVDaGVja3M6Yixmbjp7dmFyczpbXSxib2R5OltdLG93bjp7fX0sYXNzaWduOnt2YXJzOltdLGJvZHk6W10sb3duOnt9fSxpbnB1dHM6W119O1goYyxkLiRmaWx0ZXIpO3ZhciBlPSIiLGY7dGhpcy5zdGFnZT0iYXNzaWduIjsKaWYoZj1xZChjKSl0aGlzLnN0YXRlLmNvbXB1dGluZz0iYXNzaWduIixlPXRoaXMubmV4dElkKCksdGhpcy5yZWN1cnNlKGYsZSksdGhpcy5yZXR1cm5fKGUpLGU9ImZuLmFzc2lnbj0iK3RoaXMuZ2VuZXJhdGVGdW5jdGlvbigiYXNzaWduIiwicyx2LGwiKTtmPW9kKGMuYm9keSk7ZC5zdGFnZT0iaW5wdXRzIjtwKGYsZnVuY3Rpb24oYSxiKXt2YXIgYz0iZm4iK2I7ZC5zdGF0ZVtjXT17dmFyczpbXSxib2R5OltdLG93bjp7fX07ZC5zdGF0ZS5jb21wdXRpbmc9Yzt2YXIgZT1kLm5leHRJZCgpO2QucmVjdXJzZShhLGUpO2QucmV0dXJuXyhlKTtkLnN0YXRlLmlucHV0cy5wdXNoKGMpO2Eud2F0Y2hJZD1ifSk7dGhpcy5zdGF0ZS5jb21wdXRpbmc9ImZuIjt0aGlzLnN0YWdlPSJtYWluIjt0aGlzLnJlY3Vyc2UoYyk7ZT0nIicrdGhpcy5VU0UrIiAiK3RoaXMuU1RSSUNUKyciO1xuJyt0aGlzLmZpbHRlclByZWZpeCgpKyJ2YXIgZm49Iit0aGlzLmdlbmVyYXRlRnVuY3Rpb24oImZuIiwicyxsLGEsaSIpKwplK3RoaXMud2F0Y2hGbnMoKSsicmV0dXJuIGZuOyI7ZT0obmV3IEZ1bmN0aW9uKCIkZmlsdGVyIiwiZW5zdXJlU2FmZU1lbWJlck5hbWUiLCJlbnN1cmVTYWZlT2JqZWN0IiwiZW5zdXJlU2FmZUZ1bmN0aW9uIiwiZ2V0U3RyaW5nVmFsdWUiLCJlbnN1cmVTYWZlQXNzaWduQ29udGV4dCIsImlmRGVmaW5lZCIsInBsdXMiLCJ0ZXh0IixlKSkodGhpcy4kZmlsdGVyLFdhLHlhLG1kLGxkLEViLGdnLG5kLGEpO3RoaXMuc3RhdGU9dGhpcy5zdGFnZT14O2UubGl0ZXJhbD1yZChjKTtlLmNvbnN0YW50PWMuY29uc3RhbnQ7cmV0dXJuIGV9LFVTRToidXNlIixTVFJJQ1Q6InN0cmljdCIsd2F0Y2hGbnM6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuc3RhdGUuaW5wdXRzLGQ9dGhpcztwKGIsZnVuY3Rpb24oYil7YS5wdXNoKCJ2YXIgIitiKyI9IitkLmdlbmVyYXRlRnVuY3Rpb24oYiwicyIpKX0pO2IubGVuZ3RoJiZhLnB1c2goImZuLmlucHV0cz1bIitiLmpvaW4oIiwiKSsiXTsiKTtyZXR1cm4gYS5qb2luKCIiKX0sCmdlbmVyYXRlRnVuY3Rpb246ZnVuY3Rpb24oYSxiKXtyZXR1cm4iZnVuY3Rpb24oIitiKyIpeyIrdGhpcy52YXJzUHJlZml4KGEpK3RoaXMuYm9keShhKSsifTsifSxmaWx0ZXJQcmVmaXg6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXM7cCh0aGlzLnN0YXRlLmZpbHRlcnMsZnVuY3Rpb24oZCxjKXthLnB1c2goZCsiPSRmaWx0ZXIoIitiLmVzY2FwZShjKSsiKSIpfSk7cmV0dXJuIGEubGVuZ3RoPyJ2YXIgIithLmpvaW4oIiwiKSsiOyI6IiJ9LHZhcnNQcmVmaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhdGVbYV0udmFycy5sZW5ndGg/InZhciAiK3RoaXMuc3RhdGVbYV0udmFycy5qb2luKCIsIikrIjsiOiIifSxib2R5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN0YXRlW2FdLmJvZHkuam9pbigiIil9LHJlY3Vyc2U6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe3ZhciBnLGgsaz10aGlzLG0sbDtjPWN8fHY7aWYoIWYmJnUoYS53YXRjaElkKSliPWJ8fHRoaXMubmV4dElkKCksdGhpcy5pZl8oImkiLAp0aGlzLmxhenlBc3NpZ24oYix0aGlzLmNvbXB1dGVkTWVtYmVyKCJpIixhLndhdGNoSWQpKSx0aGlzLmxhenlSZWN1cnNlKGEsYixkLGMsZSwhMCkpO2Vsc2Ugc3dpdGNoKGEudHlwZSl7Y2FzZSBzLlByb2dyYW06cChhLmJvZHksZnVuY3Rpb24oYixjKXtrLnJlY3Vyc2UoYi5leHByZXNzaW9uLHgseCxmdW5jdGlvbihhKXtoPWF9KTtjIT09YS5ib2R5Lmxlbmd0aC0xP2suY3VycmVudCgpLmJvZHkucHVzaChoLCI7Iik6ay5yZXR1cm5fKGgpfSk7YnJlYWs7Y2FzZSBzLkxpdGVyYWw6bD10aGlzLmVzY2FwZShhLnZhbHVlKTt0aGlzLmFzc2lnbihiLGwpO2MobCk7YnJlYWs7Y2FzZSBzLlVuYXJ5RXhwcmVzc2lvbjp0aGlzLnJlY3Vyc2UoYS5hcmd1bWVudCx4LHgsZnVuY3Rpb24oYSl7aD1hfSk7bD1hLm9wZXJhdG9yKyIoIit0aGlzLmlmRGVmaW5lZChoLDApKyIpIjt0aGlzLmFzc2lnbihiLGwpO2MobCk7YnJlYWs7Y2FzZSBzLkJpbmFyeUV4cHJlc3Npb246dGhpcy5yZWN1cnNlKGEubGVmdCwKeCx4LGZ1bmN0aW9uKGEpe2c9YX0pO3RoaXMucmVjdXJzZShhLnJpZ2h0LHgseCxmdW5jdGlvbihhKXtoPWF9KTtsPSIrIj09PWEub3BlcmF0b3I/dGhpcy5wbHVzKGcsaCk6Ii0iPT09YS5vcGVyYXRvcj90aGlzLmlmRGVmaW5lZChnLDApK2Eub3BlcmF0b3IrdGhpcy5pZkRlZmluZWQoaCwwKToiKCIrZysiKSIrYS5vcGVyYXRvcisiKCIraCsiKSI7dGhpcy5hc3NpZ24oYixsKTtjKGwpO2JyZWFrO2Nhc2Ugcy5Mb2dpY2FsRXhwcmVzc2lvbjpiPWJ8fHRoaXMubmV4dElkKCk7ay5yZWN1cnNlKGEubGVmdCxiKTtrLmlmXygiJiYiPT09YS5vcGVyYXRvcj9iOmsubm90KGIpLGsubGF6eVJlY3Vyc2UoYS5yaWdodCxiKSk7YyhiKTticmVhaztjYXNlIHMuQ29uZGl0aW9uYWxFeHByZXNzaW9uOmI9Ynx8dGhpcy5uZXh0SWQoKTtrLnJlY3Vyc2UoYS50ZXN0LGIpO2suaWZfKGIsay5sYXp5UmVjdXJzZShhLmFsdGVybmF0ZSxiKSxrLmxhenlSZWN1cnNlKGEuY29uc2VxdWVudCxiKSk7YyhiKTsKYnJlYWs7Y2FzZSBzLklkZW50aWZpZXI6Yj1ifHx0aGlzLm5leHRJZCgpO2QmJihkLmNvbnRleHQ9ImlucHV0cyI9PT1rLnN0YWdlPyJzIjp0aGlzLmFzc2lnbih0aGlzLm5leHRJZCgpLHRoaXMuZ2V0SGFzT3duUHJvcGVydHkoImwiLGEubmFtZSkrIj9sOnMiKSxkLmNvbXB1dGVkPSExLGQubmFtZT1hLm5hbWUpO1dhKGEubmFtZSk7ay5pZl8oImlucHV0cyI9PT1rLnN0YWdlfHxrLm5vdChrLmdldEhhc093blByb3BlcnR5KCJsIixhLm5hbWUpKSxmdW5jdGlvbigpe2suaWZfKCJpbnB1dHMiPT09ay5zdGFnZXx8InMiLGZ1bmN0aW9uKCl7ZSYmMSE9PWUmJmsuaWZfKGsubm90KGsubm9uQ29tcHV0ZWRNZW1iZXIoInMiLGEubmFtZSkpLGsubGF6eUFzc2lnbihrLm5vbkNvbXB1dGVkTWVtYmVyKCJzIixhLm5hbWUpLCJ7fSIpKTtrLmFzc2lnbihiLGsubm9uQ29tcHV0ZWRNZW1iZXIoInMiLGEubmFtZSkpfSl9LGImJmsubGF6eUFzc2lnbihiLGsubm9uQ29tcHV0ZWRNZW1iZXIoImwiLAphLm5hbWUpKSk7KGsuc3RhdGUuZXhwZW5zaXZlQ2hlY2tzfHxGYihhLm5hbWUpKSYmay5hZGRFbnN1cmVTYWZlT2JqZWN0KGIpO2MoYik7YnJlYWs7Y2FzZSBzLk1lbWJlckV4cHJlc3Npb246Zz1kJiYoZC5jb250ZXh0PXRoaXMubmV4dElkKCkpfHx0aGlzLm5leHRJZCgpO2I9Ynx8dGhpcy5uZXh0SWQoKTtrLnJlY3Vyc2UoYS5vYmplY3QsZyx4LGZ1bmN0aW9uKCl7ay5pZl8oay5ub3ROdWxsKGcpLGZ1bmN0aW9uKCl7ZSYmMSE9PWUmJmsuYWRkRW5zdXJlU2FmZUFzc2lnbkNvbnRleHQoZyk7aWYoYS5jb21wdXRlZCloPWsubmV4dElkKCksay5yZWN1cnNlKGEucHJvcGVydHksaCksay5nZXRTdHJpbmdWYWx1ZShoKSxrLmFkZEVuc3VyZVNhZmVNZW1iZXJOYW1lKGgpLGUmJjEhPT1lJiZrLmlmXyhrLm5vdChrLmNvbXB1dGVkTWVtYmVyKGcsaCkpLGsubGF6eUFzc2lnbihrLmNvbXB1dGVkTWVtYmVyKGcsaCksInt9IikpLGw9ay5lbnN1cmVTYWZlT2JqZWN0KGsuY29tcHV0ZWRNZW1iZXIoZywKaCkpLGsuYXNzaWduKGIsbCksZCYmKGQuY29tcHV0ZWQ9ITAsZC5uYW1lPWgpO2Vsc2V7V2EoYS5wcm9wZXJ0eS5uYW1lKTtlJiYxIT09ZSYmay5pZl8oay5ub3Qoay5ub25Db21wdXRlZE1lbWJlcihnLGEucHJvcGVydHkubmFtZSkpLGsubGF6eUFzc2lnbihrLm5vbkNvbXB1dGVkTWVtYmVyKGcsYS5wcm9wZXJ0eS5uYW1lKSwie30iKSk7bD1rLm5vbkNvbXB1dGVkTWVtYmVyKGcsYS5wcm9wZXJ0eS5uYW1lKTtpZihrLnN0YXRlLmV4cGVuc2l2ZUNoZWNrc3x8RmIoYS5wcm9wZXJ0eS5uYW1lKSlsPWsuZW5zdXJlU2FmZU9iamVjdChsKTtrLmFzc2lnbihiLGwpO2QmJihkLmNvbXB1dGVkPSExLGQubmFtZT1hLnByb3BlcnR5Lm5hbWUpfX0sZnVuY3Rpb24oKXtrLmFzc2lnbihiLCJ1bmRlZmluZWQiKX0pO2MoYil9LCEhZSk7YnJlYWs7Y2FzZSBzLkNhbGxFeHByZXNzaW9uOmI9Ynx8dGhpcy5uZXh0SWQoKTthLmZpbHRlcj8oaD1rLmZpbHRlcihhLmNhbGxlZS5uYW1lKSxtPVtdLHAoYS5hcmd1bWVudHMsCmZ1bmN0aW9uKGEpe3ZhciBiPWsubmV4dElkKCk7ay5yZWN1cnNlKGEsYik7bS5wdXNoKGIpfSksbD1oKyIoIittLmpvaW4oIiwiKSsiKSIsay5hc3NpZ24oYixsKSxjKGIpKTooaD1rLm5leHRJZCgpLGc9e30sbT1bXSxrLnJlY3Vyc2UoYS5jYWxsZWUsaCxnLGZ1bmN0aW9uKCl7ay5pZl8oay5ub3ROdWxsKGgpLGZ1bmN0aW9uKCl7ay5hZGRFbnN1cmVTYWZlRnVuY3Rpb24oaCk7cChhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXtrLnJlY3Vyc2UoYSxrLm5leHRJZCgpLHgsZnVuY3Rpb24oYSl7bS5wdXNoKGsuZW5zdXJlU2FmZU9iamVjdChhKSl9KX0pO2cubmFtZT8oay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fGsuYWRkRW5zdXJlU2FmZU9iamVjdChnLmNvbnRleHQpLGw9ay5tZW1iZXIoZy5jb250ZXh0LGcubmFtZSxnLmNvbXB1dGVkKSsiKCIrbS5qb2luKCIsIikrIikiKTpsPWgrIigiK20uam9pbigiLCIpKyIpIjtsPWsuZW5zdXJlU2FmZU9iamVjdChsKTtrLmFzc2lnbihiLGwpfSwKZnVuY3Rpb24oKXtrLmFzc2lnbihiLCJ1bmRlZmluZWQiKX0pO2MoYil9KSk7YnJlYWs7Y2FzZSBzLkFzc2lnbm1lbnRFeHByZXNzaW9uOmg9dGhpcy5uZXh0SWQoKTtnPXt9O2lmKCFwZChhLmxlZnQpKXRocm93IGFhKCJsdmFsIik7dGhpcy5yZWN1cnNlKGEubGVmdCx4LGcsZnVuY3Rpb24oKXtrLmlmXyhrLm5vdE51bGwoZy5jb250ZXh0KSxmdW5jdGlvbigpe2sucmVjdXJzZShhLnJpZ2h0LGgpO2suYWRkRW5zdXJlU2FmZU9iamVjdChrLm1lbWJlcihnLmNvbnRleHQsZy5uYW1lLGcuY29tcHV0ZWQpKTtrLmFkZEVuc3VyZVNhZmVBc3NpZ25Db250ZXh0KGcuY29udGV4dCk7bD1rLm1lbWJlcihnLmNvbnRleHQsZy5uYW1lLGcuY29tcHV0ZWQpK2Eub3BlcmF0b3IraDtrLmFzc2lnbihiLGwpO2MoYnx8bCl9KX0sMSk7YnJlYWs7Y2FzZSBzLkFycmF5RXhwcmVzc2lvbjptPVtdO3AoYS5lbGVtZW50cyxmdW5jdGlvbihhKXtrLnJlY3Vyc2UoYSxrLm5leHRJZCgpLHgsZnVuY3Rpb24oYSl7bS5wdXNoKGEpfSl9KTsKbD0iWyIrbS5qb2luKCIsIikrIl0iO3RoaXMuYXNzaWduKGIsbCk7YyhsKTticmVhaztjYXNlIHMuT2JqZWN0RXhwcmVzc2lvbjptPVtdO3AoYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe2sucmVjdXJzZShhLnZhbHVlLGsubmV4dElkKCkseCxmdW5jdGlvbihiKXttLnB1c2goay5lc2NhcGUoYS5rZXkudHlwZT09PXMuSWRlbnRpZmllcj9hLmtleS5uYW1lOiIiK2Eua2V5LnZhbHVlKSsiOiIrYil9KX0pO2w9InsiK20uam9pbigiLCIpKyJ9Ijt0aGlzLmFzc2lnbihiLGwpO2MobCk7YnJlYWs7Y2FzZSBzLlRoaXNFeHByZXNzaW9uOnRoaXMuYXNzaWduKGIsInMiKTtjKCJzIik7YnJlYWs7Y2FzZSBzLk5HVmFsdWVQYXJhbWV0ZXI6dGhpcy5hc3NpZ24oYiwidiIpLGMoInYiKX19LGdldEhhc093blByb3BlcnR5OmZ1bmN0aW9uKGEsYil7dmFyIGQ9YSsiLiIrYixjPXRoaXMuY3VycmVudCgpLm93bjtjLmhhc093blByb3BlcnR5KGQpfHwoY1tkXT10aGlzLm5leHRJZCghMSxhKyImJigiKwp0aGlzLmVzY2FwZShiKSsiIGluICIrYSsiKSIpKTtyZXR1cm4gY1tkXX0sYXNzaWduOmZ1bmN0aW9uKGEsYil7aWYoYSlyZXR1cm4gdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKGEsIj0iLGIsIjsiKSxhfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5zdGF0ZS5maWx0ZXJzLmhhc093blByb3BlcnR5KGEpfHwodGhpcy5zdGF0ZS5maWx0ZXJzW2FdPXRoaXMubmV4dElkKCEwKSk7cmV0dXJuIHRoaXMuc3RhdGUuZmlsdGVyc1thXX0saWZEZWZpbmVkOmZ1bmN0aW9uKGEsYil7cmV0dXJuImlmRGVmaW5lZCgiK2ErIiwiK3RoaXMuZXNjYXBlKGIpKyIpIn0scGx1czpmdW5jdGlvbihhLGIpe3JldHVybiJwbHVzKCIrYSsiLCIrYisiKSJ9LHJldHVybl86ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKCJyZXR1cm4gIixhLCI7Iil9LGlmXzpmdW5jdGlvbihhLGIsZCl7aWYoITA9PT1hKWIoKTtlbHNle3ZhciBjPXRoaXMuY3VycmVudCgpLmJvZHk7Yy5wdXNoKCJpZigiLGEsCiIpeyIpO2IoKTtjLnB1c2goIn0iKTtkJiYoYy5wdXNoKCJlbHNleyIpLGQoKSxjLnB1c2goIn0iKSl9fSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIiEoIithKyIpIn0sbm90TnVsbDpmdW5jdGlvbihhKXtyZXR1cm4gYSsiIT1udWxsIn0sbm9uQ29tcHV0ZWRNZW1iZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSsiLiIrYn0sY29tcHV0ZWRNZW1iZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSsiWyIrYisiXSJ9LG1lbWJlcjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGQ/dGhpcy5jb21wdXRlZE1lbWJlcihhLGIpOnRoaXMubm9uQ29tcHV0ZWRNZW1iZXIoYSxiKX0sYWRkRW5zdXJlU2FmZU9iamVjdDpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2godGhpcy5lbnN1cmVTYWZlT2JqZWN0KGEpLCI7Iil9LGFkZEVuc3VyZVNhZmVNZW1iZXJOYW1lOmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudCgpLmJvZHkucHVzaCh0aGlzLmVuc3VyZVNhZmVNZW1iZXJOYW1lKGEpLCI7Iil9LAphZGRFbnN1cmVTYWZlRnVuY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKHRoaXMuZW5zdXJlU2FmZUZ1bmN0aW9uKGEpLCI7Iil9LGFkZEVuc3VyZVNhZmVBc3NpZ25Db250ZXh0OmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudCgpLmJvZHkucHVzaCh0aGlzLmVuc3VyZVNhZmVBc3NpZ25Db250ZXh0KGEpLCI7Iil9LGVuc3VyZVNhZmVPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuImVuc3VyZVNhZmVPYmplY3QoIithKyIsdGV4dCkifSxlbnN1cmVTYWZlTWVtYmVyTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4iZW5zdXJlU2FmZU1lbWJlck5hbWUoIithKyIsdGV4dCkifSxlbnN1cmVTYWZlRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImVuc3VyZVNhZmVGdW5jdGlvbigiK2ErIix0ZXh0KSJ9LGdldFN0cmluZ1ZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuYXNzaWduKGEsImdldFN0cmluZ1ZhbHVlKCIrYSsiLHRleHQpIil9LGVuc3VyZVNhZmVBc3NpZ25Db250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiJlbnN1cmVTYWZlQXNzaWduQ29udGV4dCgiKwphKyIsdGV4dCkifSxsYXp5UmVjdXJzZTpmdW5jdGlvbihhLGIsZCxjLGUsZil7dmFyIGc9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtnLnJlY3Vyc2UoYSxiLGQsYyxlLGYpfX0sbGF6eUFzc2lnbjpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7ZC5hc3NpZ24oYSxiKX19LHN0cmluZ0VzY2FwZVJlZ2V4Oi9bXiBhLXpBLVowLTldL2csc3RyaW5nRXNjYXBlRm46ZnVuY3Rpb24oYSl7cmV0dXJuIlxcdSIrKCIwMDAwIithLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCl9LGVzY2FwZTpmdW5jdGlvbihhKXtpZihIKGEpKXJldHVybiInIithLnJlcGxhY2UodGhpcy5zdHJpbmdFc2NhcGVSZWdleCx0aGlzLnN0cmluZ0VzY2FwZUZuKSsiJyI7aWYoUChhKSlyZXR1cm4gYS50b1N0cmluZygpO2lmKCEwPT09YSlyZXR1cm4idHJ1ZSI7aWYoITE9PT1hKXJldHVybiJmYWxzZSI7aWYobnVsbD09PWEpcmV0dXJuIm51bGwiO2lmKCJ1bmRlZmluZWQiPT09CnR5cGVvZiBhKXJldHVybiJ1bmRlZmluZWQiO3Rocm93IGFhKCJlc2MiKTt9LG5leHRJZDpmdW5jdGlvbihhLGIpe3ZhciBkPSJ2Iit0aGlzLnN0YXRlLm5leHRJZCsrO2F8fHRoaXMuY3VycmVudCgpLnZhcnMucHVzaChkKyhiPyI9IitiOiIiKSk7cmV0dXJuIGR9LGN1cnJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZVt0aGlzLnN0YXRlLmNvbXB1dGluZ119fTt0ZC5wcm90b3R5cGU9e2NvbXBpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLGM9dGhpcy5hc3RCdWlsZGVyLmFzdChhKTt0aGlzLmV4cHJlc3Npb249YTt0aGlzLmV4cGVuc2l2ZUNoZWNrcz1iO1goYyxkLiRmaWx0ZXIpO3ZhciBlLGY7aWYoZT1xZChjKSlmPXRoaXMucmVjdXJzZShlKTtlPW9kKGMuYm9keSk7dmFyIGc7ZSYmKGc9W10scChlLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZC5yZWN1cnNlKGEpO2EuaW5wdXQ9YztnLnB1c2goYyk7YS53YXRjaElkPWJ9KSk7dmFyIGg9W107cChjLmJvZHksZnVuY3Rpb24oYSl7aC5wdXNoKGQucmVjdXJzZShhLmV4cHJlc3Npb24pKX0pOwplPTA9PT1jLmJvZHkubGVuZ3RoP2Z1bmN0aW9uKCl7fToxPT09Yy5ib2R5Lmxlbmd0aD9oWzBdOmZ1bmN0aW9uKGEsYil7dmFyIGM7cChoLGZ1bmN0aW9uKGQpe2M9ZChhLGIpfSk7cmV0dXJuIGN9O2YmJihlLmFzc2lnbj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGYoYSxjLGIpfSk7ZyYmKGUuaW5wdXRzPWcpO2UubGl0ZXJhbD1yZChjKTtlLmNvbnN0YW50PWMuY29uc3RhbnQ7cmV0dXJuIGV9LHJlY3Vyc2U6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjLGUsZj10aGlzLGc7aWYoYS5pbnB1dClyZXR1cm4gdGhpcy5pbnB1dHMoYS5pbnB1dCxhLndhdGNoSWQpO3N3aXRjaChhLnR5cGUpe2Nhc2Ugcy5MaXRlcmFsOnJldHVybiB0aGlzLnZhbHVlKGEudmFsdWUsYik7Y2FzZSBzLlVuYXJ5RXhwcmVzc2lvbjpyZXR1cm4gZT10aGlzLnJlY3Vyc2UoYS5hcmd1bWVudCksdGhpc1sidW5hcnkiK2Eub3BlcmF0b3JdKGUsYik7Y2FzZSBzLkJpbmFyeUV4cHJlc3Npb246cmV0dXJuIGM9dGhpcy5yZWN1cnNlKGEubGVmdCksCmU9dGhpcy5yZWN1cnNlKGEucmlnaHQpLHRoaXNbImJpbmFyeSIrYS5vcGVyYXRvcl0oYyxlLGIpO2Nhc2Ugcy5Mb2dpY2FsRXhwcmVzc2lvbjpyZXR1cm4gYz10aGlzLnJlY3Vyc2UoYS5sZWZ0KSxlPXRoaXMucmVjdXJzZShhLnJpZ2h0KSx0aGlzWyJiaW5hcnkiK2Eub3BlcmF0b3JdKGMsZSxiKTtjYXNlIHMuQ29uZGl0aW9uYWxFeHByZXNzaW9uOnJldHVybiB0aGlzWyJ0ZXJuYXJ5PzoiXSh0aGlzLnJlY3Vyc2UoYS50ZXN0KSx0aGlzLnJlY3Vyc2UoYS5hbHRlcm5hdGUpLHRoaXMucmVjdXJzZShhLmNvbnNlcXVlbnQpLGIpO2Nhc2Ugcy5JZGVudGlmaWVyOnJldHVybiBXYShhLm5hbWUsZi5leHByZXNzaW9uKSxmLmlkZW50aWZpZXIoYS5uYW1lLGYuZXhwZW5zaXZlQ2hlY2tzfHxGYihhLm5hbWUpLGIsZCxmLmV4cHJlc3Npb24pO2Nhc2Ugcy5NZW1iZXJFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLm9iamVjdCwhMSwhIWQpLGEuY29tcHV0ZWR8fChXYShhLnByb3BlcnR5Lm5hbWUsCmYuZXhwcmVzc2lvbiksZT1hLnByb3BlcnR5Lm5hbWUpLGEuY29tcHV0ZWQmJihlPXRoaXMucmVjdXJzZShhLnByb3BlcnR5KSksYS5jb21wdXRlZD90aGlzLmNvbXB1dGVkTWVtYmVyKGMsZSxiLGQsZi5leHByZXNzaW9uKTp0aGlzLm5vbkNvbXB1dGVkTWVtYmVyKGMsZSxmLmV4cGVuc2l2ZUNoZWNrcyxiLGQsZi5leHByZXNzaW9uKTtjYXNlIHMuQ2FsbEV4cHJlc3Npb246cmV0dXJuIGc9W10scChhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXtnLnB1c2goZi5yZWN1cnNlKGEpKX0pLGEuZmlsdGVyJiYoZT10aGlzLiRmaWx0ZXIoYS5jYWxsZWUubmFtZSkpLGEuZmlsdGVyfHwoZT10aGlzLnJlY3Vyc2UoYS5jYWxsZWUsITApKSxhLmZpbHRlcj9mdW5jdGlvbihhLGMsZCxmKXtmb3IodmFyIG49W10scD0wO3A8Zy5sZW5ndGg7KytwKW4ucHVzaChnW3BdKGEsYyxkLGYpKTthPWUuYXBwbHkoeCxuLGYpO3JldHVybiBiP3tjb250ZXh0OngsbmFtZTp4LHZhbHVlOmF9OmF9OmZ1bmN0aW9uKGEsCmMsZCxsKXt2YXIgbj1lKGEsYyxkLGwpLHA7aWYobnVsbCE9bi52YWx1ZSl7eWEobi5jb250ZXh0LGYuZXhwcmVzc2lvbik7bWQobi52YWx1ZSxmLmV4cHJlc3Npb24pO3A9W107Zm9yKHZhciByPTA7cjxnLmxlbmd0aDsrK3IpcC5wdXNoKHlhKGdbcl0oYSxjLGQsbCksZi5leHByZXNzaW9uKSk7cD15YShuLnZhbHVlLmFwcGx5KG4uY29udGV4dCxwKSxmLmV4cHJlc3Npb24pfXJldHVybiBiP3t2YWx1ZTpwfTpwfTtjYXNlIHMuQXNzaWdubWVudEV4cHJlc3Npb246cmV0dXJuIGM9dGhpcy5yZWN1cnNlKGEubGVmdCwhMCwxKSxlPXRoaXMucmVjdXJzZShhLnJpZ2h0KSxmdW5jdGlvbihhLGQsZyxsKXt2YXIgbj1jKGEsZCxnLGwpO2E9ZShhLGQsZyxsKTt5YShuLnZhbHVlLGYuZXhwcmVzc2lvbik7RWIobi5jb250ZXh0KTtuLmNvbnRleHRbbi5uYW1lXT1hO3JldHVybiBiP3t2YWx1ZTphfTphfTtjYXNlIHMuQXJyYXlFeHByZXNzaW9uOnJldHVybiBnPVtdLHAoYS5lbGVtZW50cyxmdW5jdGlvbihhKXtnLnB1c2goZi5yZWN1cnNlKGEpKX0pLApmdW5jdGlvbihhLGMsZCxlKXtmb3IodmFyIGY9W10scD0wO3A8Zy5sZW5ndGg7KytwKWYucHVzaChnW3BdKGEsYyxkLGUpKTtyZXR1cm4gYj97dmFsdWU6Zn06Zn07Y2FzZSBzLk9iamVjdEV4cHJlc3Npb246cmV0dXJuIGc9W10scChhLnByb3BlcnRpZXMsZnVuY3Rpb24oYSl7Zy5wdXNoKHtrZXk6YS5rZXkudHlwZT09PXMuSWRlbnRpZmllcj9hLmtleS5uYW1lOiIiK2Eua2V5LnZhbHVlLHZhbHVlOmYucmVjdXJzZShhLnZhbHVlKX0pfSksZnVuY3Rpb24oYSxjLGQsZSl7Zm9yKHZhciBmPXt9LHA9MDtwPGcubGVuZ3RoOysrcClmW2dbcF0ua2V5XT1nW3BdLnZhbHVlKGEsYyxkLGUpO3JldHVybiBiP3t2YWx1ZTpmfTpmfTtjYXNlIHMuVGhpc0V4cHJlc3Npb246cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBiP3t2YWx1ZTphfTphfTtjYXNlIHMuTkdWYWx1ZVBhcmFtZXRlcjpyZXR1cm4gZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGI/e3ZhbHVlOmR9OmR9fX0sInVuYXJ5KyI6ZnVuY3Rpb24oYSwKYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyxlLGYpe2Q9YShkLGMsZSxmKTtkPXUoZCk/K2Q6MDtyZXR1cm4gYj97dmFsdWU6ZH06ZH19LCJ1bmFyeS0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyxlLGYpe2Q9YShkLGMsZSxmKTtkPXUoZCk/LWQ6MDtyZXR1cm4gYj97dmFsdWU6ZH06ZH19LCJ1bmFyeSEiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyxlLGYpe2Q9IWEoZCxjLGUsZik7cmV0dXJuIGI/e3ZhbHVlOmR9OmR9fSwiYmluYXJ5KyI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXt2YXIgaD1hKGMsZSxmLGcpO2M9YihjLGUsZixnKTtoPW5kKGgsYyk7cmV0dXJuIGQ/e3ZhbHVlOmh9Omh9fSwiYmluYXJ5LSI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXt2YXIgaD1hKGMsZSxmLGcpO2M9YihjLGUsZixnKTtoPSh1KGgpP2g6MCktKHUoYyk/YzowKTtyZXR1cm4gZD97dmFsdWU6aH06aH19LCJiaW5hcnkqIjpmdW5jdGlvbihhLApiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZykqYihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LCJiaW5hcnkvIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKS9iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sImJpbmFyeSUiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpJWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5PT09IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKT09PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5IT09IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKSE9PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5PT0iOmZ1bmN0aW9uKGEsYiwKZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKT09YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LCJiaW5hcnkhPSI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZykhPWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwiYmluYXJ5PCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk8YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LCJiaW5hcnk+IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKT5iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sImJpbmFyeTw9IjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKTw9YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LCJiaW5hcnk+PSI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLAplLGYsZyl7Yz1hKGMsZSxmLGcpPj1iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sImJpbmFyeSYmIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKSYmYihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LCJiaW5hcnl8fCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyl8fGIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSwidGVybmFyeT86IjpmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpP2IoZSxmLGcsaCk6ZChlLGYsZyxoKTtyZXR1cm4gYz97dmFsdWU6ZX06ZX19LHZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGI/e2NvbnRleHQ6eCxuYW1lOngsdmFsdWU6YX06YX19LGlkZW50aWZpZXI6ZnVuY3Rpb24oYSxiLGQsYyxlKXtyZXR1cm4gZnVuY3Rpb24oZixnLGgsayl7Zj0KZyYmYSBpbiBnP2c6ZjtjJiYxIT09YyYmZiYmIWZbYV0mJihmW2FdPXt9KTtnPWY/ZlthXTp4O2ImJnlhKGcsZSk7cmV0dXJuIGQ/e2NvbnRleHQ6ZixuYW1lOmEsdmFsdWU6Z306Z319LGNvbXB1dGVkTWVtYmVyOmZ1bmN0aW9uKGEsYixkLGMsZSl7cmV0dXJuIGZ1bmN0aW9uKGYsZyxoLGspe3ZhciBtPWEoZixnLGgsayksbCxuO251bGwhPW0mJihsPWIoZixnLGgsayksbD1sZChsKSxXYShsLGUpLGMmJjEhPT1jJiYoRWIobSksbSYmIW1bbF0mJihtW2xdPXt9KSksbj1tW2xdLHlhKG4sZSkpO3JldHVybiBkP3tjb250ZXh0Om0sbmFtZTpsLHZhbHVlOm59Om59fSxub25Db21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIsZCxjLGUsZil7cmV0dXJuIGZ1bmN0aW9uKGcsaCxrLG0pe2c9YShnLGgsayxtKTtlJiYxIT09ZSYmKEViKGcpLGcmJiFnW2JdJiYoZ1tiXT17fSkpO2g9bnVsbCE9Zz9nW2JdOng7KGR8fEZiKGIpKSYmeWEoaCxmKTtyZXR1cm4gYz97Y29udGV4dDpnLG5hbWU6Yix2YWx1ZTpofToKaH19LGlucHV0czpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihkLGMsZSxmKXtyZXR1cm4gZj9mW2JdOmEoZCxjLGUpfX19O3ZhciBnYz1mdW5jdGlvbihhLGIsZCl7dGhpcy5sZXhlcj1hO3RoaXMuJGZpbHRlcj1iO3RoaXMub3B0aW9ucz1kO3RoaXMuYXN0PW5ldyBzKHRoaXMubGV4ZXIpO3RoaXMuYXN0Q29tcGlsZXI9ZC5jc3A/bmV3IHRkKHRoaXMuYXN0LGIpOm5ldyBzZCh0aGlzLmFzdCxiKX07Z2MucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpnYyxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hc3RDb21waWxlci5jb21waWxlKGEsdGhpcy5vcHRpb25zLmV4cGVuc2l2ZUNoZWNrcyl9fTt2YXIgaGc9T2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mLHphPUIoIiRzY2UiKSxrYT17SFRNTDoiaHRtbCIsQ1NTOiJjc3MiLFVSTDoidXJsIixSRVNPVVJDRV9VUkw6InJlc291cmNlVXJsIixKUzoianMifSxnYT1CKCIkY29tcGlsZSIpLFk9VS5jcmVhdGVFbGVtZW50KCJhIiksCnhkPXhhKFIubG9jYXRpb24uaHJlZik7eWQuJGluamVjdD1bIiRkb2N1bWVudCJdO0pjLiRpbmplY3Q9WyIkcHJvdmlkZSJdO3ZhciBGZD0yMixFZD0iLiIsaWM9IjAiO3pkLiRpbmplY3Q9WyIkbG9jYWxlIl07QmQuJGluamVjdD1bIiRsb2NhbGUiXTt2YXIgdGc9e3l5eXk6YmEoIkZ1bGxZZWFyIiw0KSx5eTpiYSgiRnVsbFllYXIiLDIsMCwhMCkseTpiYSgiRnVsbFllYXIiLDEpLE1NTU06SGIoIk1vbnRoIiksTU1NOkhiKCJNb250aCIsITApLE1NOmJhKCJNb250aCIsMiwxKSxNOmJhKCJNb250aCIsMSwxKSxkZDpiYSgiRGF0ZSIsMiksZDpiYSgiRGF0ZSIsMSksSEg6YmEoIkhvdXJzIiwyKSxIOmJhKCJIb3VycyIsMSksaGg6YmEoIkhvdXJzIiwyLC0xMiksaDpiYSgiSG91cnMiLDEsLTEyKSxtbTpiYSgiTWludXRlcyIsMiksbTpiYSgiTWludXRlcyIsMSksc3M6YmEoIlNlY29uZHMiLDIpLHM6YmEoIlNlY29uZHMiLDEpLHNzczpiYSgiTWlsbGlzZWNvbmRzIiwzKSxFRUVFOkhiKCJEYXkiKSwKRUVFOkhiKCJEYXkiLCEwKSxhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDEyPmEuZ2V0SG91cnMoKT9iLkFNUE1TWzBdOmIuQU1QTVNbMV19LFo6ZnVuY3Rpb24oYSxiLGQpe2E9LTEqZDtyZXR1cm4gYT0oMDw9YT8iKyI6IiIpKyhHYihNYXRoWzA8YT8iZmxvb3IiOiJjZWlsIl0oYS82MCksMikrR2IoTWF0aC5hYnMoYSU2MCksMikpfSx3dzpIZCgyKSx3OkhkKDEpLEc6amMsR0c6amMsR0dHOmpjLEdHR0c6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMD49YS5nZXRGdWxsWWVhcigpP2IuRVJBTkFNRVNbMF06Yi5FUkFOQU1FU1sxXX19LHNnPS8oKD86W155TWRIaG1zYVpFd0cnXSspfCg/OicoPzpbXiddfCcnKSonKXwoPzpFK3x5K3xNK3xkK3xIK3xoK3xtK3xzK3xhfFp8Ryt8dyspKSguKikvLHJnPS9eXC0/XGQrJC87QWQuJGluamVjdD1bIiRsb2NhbGUiXTt2YXIgbWc9bWEoTSksbmc9bWEocmIpO0NkLiRpbmplY3Q9WyIkcGFyc2UiXTt2YXIgbWU9bWEoe3Jlc3RyaWN0OiJFIixjb21waWxlOmZ1bmN0aW9uKGEsCmIpe2lmKCFiLmhyZWYmJiFiLnhsaW5rSHJlZilyZXR1cm4gZnVuY3Rpb24oYSxiKXtpZigiYSI9PT1iWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBlPSJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXSI9PT1uYS5jYWxsKGIucHJvcCgiaHJlZiIpKT8ieGxpbms6aHJlZiI6ImhyZWYiO2Iub24oImNsaWNrIixmdW5jdGlvbihhKXtiLmF0dHIoZSl8fGEucHJldmVudERlZmF1bHQoKX0pfX19fSksc2I9e307cChCYixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSxkLGUpe2EuJHdhdGNoKGVbY10sZnVuY3Rpb24oYSl7ZS4kc2V0KGIsISFhKX0pfWlmKCJtdWx0aXBsZSIhPWEpe3ZhciBjPXZhKCJuZy0iK2IpLGU9ZDsiY2hlY2tlZCI9PT1hJiYoZT1mdW5jdGlvbihhLGIsZSl7ZS5uZ01vZGVsIT09ZVtjXSYmZChhLGIsZSl9KTtzYltjXT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiQSIscHJpb3JpdHk6MTAwLGxpbms6ZX19fX0pO3AoYWQsZnVuY3Rpb24oYSxiKXtzYltiXT0KZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6MTAwLGxpbms6ZnVuY3Rpb24oYSxjLGUpe2lmKCJuZ1BhdHRlcm4iPT09YiYmIi8iPT1lLm5nUGF0dGVybi5jaGFyQXQoMCkmJihjPWUubmdQYXR0ZXJuLm1hdGNoKHZnKSkpe2UuJHNldCgibmdQYXR0ZXJuIixuZXcgUmVnRXhwKGNbMV0sY1syXSkpO3JldHVybn1hLiR3YXRjaChlW2JdLGZ1bmN0aW9uKGEpe2UuJHNldChiLGEpfSl9fX19KTtwKFsic3JjIiwic3Jjc2V0IiwiaHJlZiJdLGZ1bmN0aW9uKGEpe3ZhciBiPXZhKCJuZy0iK2EpO3NiW2JdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5Ojk5LGxpbms6ZnVuY3Rpb24oZCxjLGUpe3ZhciBmPWEsZz1hOyJocmVmIj09PWEmJiJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXSI9PT1uYS5jYWxsKGMucHJvcCgiaHJlZiIpKSYmKGc9InhsaW5rSHJlZiIsZS4kYXR0cltnXT0ieGxpbms6aHJlZiIsZj1udWxsKTtlLiRvYnNlcnZlKGIsZnVuY3Rpb24oYil7Yj8oZS4kc2V0KGcsYiksCkhhJiZmJiZjLnByb3AoZixlW2ddKSk6ImhyZWYiPT09YSYmZS4kc2V0KGcsbnVsbCl9KX19fX0pO3ZhciBJYj17JGFkZENvbnRyb2w6diwkJHJlbmFtZUNvbnRyb2w6ZnVuY3Rpb24oYSxiKXthLiRuYW1lPWJ9LCRyZW1vdmVDb250cm9sOnYsJHNldFZhbGlkaXR5OnYsJHNldERpcnR5OnYsJHNldFByaXN0aW5lOnYsJHNldFN1Ym1pdHRlZDp2fTtJZC4kaW5qZWN0PVsiJGVsZW1lbnQiLCIkYXR0cnMiLCIkc2NvcGUiLCIkYW5pbWF0ZSIsIiRpbnRlcnBvbGF0ZSJdO3ZhciBSZD1mdW5jdGlvbihhKXtyZXR1cm5bIiR0aW1lb3V0IiwiJHBhcnNlIixmdW5jdGlvbihiLGQpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIiI9PT1hP2QoJ3RoaXNbIiJdJykuYXNzaWduOmQoYSkuYXNzaWdufHx2fXJldHVybntuYW1lOiJmb3JtIixyZXN0cmljdDphPyJFQUMiOiJFIixyZXF1aXJlOlsiZm9ybSIsIl5eP2Zvcm0iXSxjb250cm9sbGVyOklkLGNvbXBpbGU6ZnVuY3Rpb24oZCxmKXtkLmFkZENsYXNzKFhhKS5hZGRDbGFzcyhsYik7CnZhciBnPWYubmFtZT8ibmFtZSI6YSYmZi5uZ0Zvcm0/Im5nRm9ybSI6ITE7cmV0dXJue3ByZTpmdW5jdGlvbihhLGQsZSxmKXt2YXIgbj1mWzBdO2lmKCEoImFjdGlvbiJpbiBlKSl7dmFyIHA9ZnVuY3Rpb24oYil7YS4kYXBwbHkoZnVuY3Rpb24oKXtuLiRjb21taXRWaWV3VmFsdWUoKTtuLiRzZXRTdWJtaXR0ZWQoKX0pO2IucHJldmVudERlZmF1bHQoKX07ZFswXS5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLHAsITEpO2Qub24oIiRkZXN0cm95IixmdW5jdGlvbigpe2IoZnVuY3Rpb24oKXtkWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoInN1Ym1pdCIscCwhMSl9LDAsITEpfSl9KGZbMV18fG4uJCRwYXJlbnRGb3JtKS4kYWRkQ29udHJvbChuKTt2YXIgcj1nP2Mobi4kbmFtZSk6djtnJiYocihhLG4pLGUuJG9ic2VydmUoZyxmdW5jdGlvbihiKXtuLiRuYW1lIT09YiYmKHIoYSx4KSxuLiQkcGFyZW50Rm9ybS4kJHJlbmFtZUNvbnRyb2wobixiKSxyPWMobi4kbmFtZSkscihhLG4pKX0pKTsKZC5vbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7bi4kJHBhcmVudEZvcm0uJHJlbW92ZUNvbnRyb2wobik7cihhLHgpO04obixJYil9KX19fX19XX0sbmU9UmQoKSxBZT1SZCghMCksdWc9L1xkezR9LVswMV1cZC1bMC0zXVxkVFswLTJdXGQ6WzAtNV1cZDpbMC01XVxkXC5cZCsoWystXVswLTJdXGQ6WzAtNV1cZHxaKS8sRGc9L15bYS16XVthLXpcZC4rLV0qOlwvKig/OlteOkBdKyg/OjpbXkBdKyk/QCk/KD86W15cczovPyNdK3xcW1thLWZcZDpdK1xdKSg/OjpcZCspPyg/OlwvW14/I10qKT8oPzpcP1teI10qKT8oPzojLiopPyQvaSxFZz0vXlthLXowLTkhIyQlJicqK1wvPT9eX2B7fH1+Li1dK0BbYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPyhcLlthLXowLTldKFthLXowLTktXSpbYS16MC05XSk/KSokL2ksRmc9L15ccyooXC18XCspPyhcZCt8KFxkKihcLlxkKikpKShbZUVdWystXT9cZCspP1xzKiQvLFNkPS9eKFxkezR9KS0oXGR7Mn0pLShcZHsyfSkkLyxUZD0vXihcZHs0fSktKFxkXGQpLShcZFxkKVQoXGRcZCk6KFxkXGQpKD86OihcZFxkKShcLlxkezEsM30pPyk/JC8sCm1jPS9eKFxkezR9KS1XKFxkXGQpJC8sVWQ9L14oXGR7NH0pLShcZFxkKSQvLFZkPS9eKFxkXGQpOihcZFxkKSg/OjooXGRcZCkoXC5cZHsxLDN9KT8pPyQvLEtkPVooKTtwKFsiZGF0ZSIsImRhdGV0aW1lLWxvY2FsIiwibW9udGgiLCJ0aW1lIiwid2VlayJdLGZ1bmN0aW9uKGEpe0tkW2FdPSEwfSk7dmFyIFdkPXt0ZXh0OmZ1bmN0aW9uKGEsYixkLGMsZSxmKXtpYihhLGIsZCxjLGUsZik7a2MoYyl9LGRhdGU6amIoImRhdGUiLFNkLEtiKFNkLFsieXl5eSIsIk1NIiwiZGQiXSksInl5eXktTU0tZGQiKSwiZGF0ZXRpbWUtbG9jYWwiOmpiKCJkYXRldGltZWxvY2FsIixUZCxLYihUZCwieXl5eSBNTSBkZCBISCBtbSBzcyBzc3MiLnNwbGl0KCIgIikpLCJ5eXl5LU1NLWRkVEhIOm1tOnNzLnNzcyIpLHRpbWU6amIoInRpbWUiLFZkLEtiKFZkLFsiSEgiLCJtbSIsInNzIiwic3NzIl0pLCJISDptbTpzcy5zc3MiKSx3ZWVrOmpiKCJ3ZWVrIixtYyxmdW5jdGlvbihhLGIpe2lmKGVhKGEpKXJldHVybiBhOwppZihIKGEpKXttYy5sYXN0SW5kZXg9MDt2YXIgZD1tYy5leGVjKGEpO2lmKGQpe3ZhciBjPStkWzFdLGU9K2RbMl0sZj1kPTAsZz0wLGg9MCxrPUdkKGMpLGU9NyooZS0xKTtiJiYoZD1iLmdldEhvdXJzKCksZj1iLmdldE1pbnV0ZXMoKSxnPWIuZ2V0U2Vjb25kcygpLGg9Yi5nZXRNaWxsaXNlY29uZHMoKSk7cmV0dXJuIG5ldyBEYXRlKGMsMCxrLmdldERhdGUoKStlLGQsZixnLGgpfX1yZXR1cm4gTmFOfSwieXl5eS1Xd3ciKSxtb250aDpqYigibW9udGgiLFVkLEtiKFVkLFsieXl5eSIsIk1NIl0pLCJ5eXl5LU1NIiksbnVtYmVyOmZ1bmN0aW9uKGEsYixkLGMsZSxmKXtMZChhLGIsZCxjKTtpYihhLGIsZCxjLGUsZik7Yy4kJHBhcnNlck5hbWU9Im51bWJlciI7Yy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBjLiRpc0VtcHR5KGEpP251bGw6RmcudGVzdChhKT9wYXJzZUZsb2F0KGEpOnh9KTtjLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoIWMuJGlzRW1wdHkoYSkpe2lmKCFQKGEpKXRocm93IGtiKCJudW1mbXQiLAphKTthPWEudG9TdHJpbmcoKX1yZXR1cm4gYX0pO2lmKHUoZC5taW4pfHxkLm5nTWluKXt2YXIgZztjLiR2YWxpZGF0b3JzLm1pbj1mdW5jdGlvbihhKXtyZXR1cm4gYy4kaXNFbXB0eShhKXx8cihnKXx8YT49Z307ZC4kb2JzZXJ2ZSgibWluIixmdW5jdGlvbihhKXt1KGEpJiYhUChhKSYmKGE9cGFyc2VGbG9hdChhLDEwKSk7Zz1QKGEpJiYhaXNOYU4oYSk/YTp4O2MuJHZhbGlkYXRlKCl9KX1pZih1KGQubWF4KXx8ZC5uZ01heCl7dmFyIGg7Yy4kdmFsaWRhdG9ycy5tYXg9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuJGlzRW1wdHkoYSl8fHIoaCl8fGE8PWh9O2QuJG9ic2VydmUoIm1heCIsZnVuY3Rpb24oYSl7dShhKSYmIVAoYSkmJihhPXBhcnNlRmxvYXQoYSwxMCkpO2g9UChhKSYmIWlzTmFOKGEpP2E6eDtjLiR2YWxpZGF0ZSgpfSl9fSx1cmw6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe2liKGEsYixkLGMsZSxmKTtrYyhjKTtjLiQkcGFyc2VyTmFtZT0idXJsIjtjLiR2YWxpZGF0b3JzLnVybD0KZnVuY3Rpb24oYSxiKXt2YXIgZD1hfHxiO3JldHVybiBjLiRpc0VtcHR5KGQpfHxEZy50ZXN0KGQpfX0sZW1haWw6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe2liKGEsYixkLGMsZSxmKTtrYyhjKTtjLiQkcGFyc2VyTmFtZT0iZW1haWwiO2MuJHZhbGlkYXRvcnMuZW1haWw9ZnVuY3Rpb24oYSxiKXt2YXIgZD1hfHxiO3JldHVybiBjLiRpc0VtcHR5KGQpfHxFZy50ZXN0KGQpfX0scmFkaW86ZnVuY3Rpb24oYSxiLGQsYyl7cihkLm5hbWUpJiZiLmF0dHIoIm5hbWUiLCsrbWIpO2Iub24oImNsaWNrIixmdW5jdGlvbihhKXtiWzBdLmNoZWNrZWQmJmMuJHNldFZpZXdWYWx1ZShkLnZhbHVlLGEmJmEudHlwZSl9KTtjLiRyZW5kZXI9ZnVuY3Rpb24oKXtiWzBdLmNoZWNrZWQ9ZC52YWx1ZT09Yy4kdmlld1ZhbHVlfTtkLiRvYnNlcnZlKCJ2YWx1ZSIsYy4kcmVuZGVyKX0sY2hlY2tib3g6ZnVuY3Rpb24oYSxiLGQsYyxlLGYsZyxoKXt2YXIgaz1NZChoLGEsIm5nVHJ1ZVZhbHVlIixkLm5nVHJ1ZVZhbHVlLAohMCksbT1NZChoLGEsIm5nRmFsc2VWYWx1ZSIsZC5uZ0ZhbHNlVmFsdWUsITEpO2Iub24oImNsaWNrIixmdW5jdGlvbihhKXtjLiRzZXRWaWV3VmFsdWUoYlswXS5jaGVja2VkLGEmJmEudHlwZSl9KTtjLiRyZW5kZXI9ZnVuY3Rpb24oKXtiWzBdLmNoZWNrZWQ9Yy4kdmlld1ZhbHVlfTtjLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiExPT09YX07Yy4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBsYShhLGspfSk7Yy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhP2s6bX0pfSxoaWRkZW46dixidXR0b246dixzdWJtaXQ6dixyZXNldDp2LGZpbGU6dn0sRGM9WyIkYnJvd3NlciIsIiRzbmlmZmVyIiwiJGZpbHRlciIsIiRwYXJzZSIsZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJue3Jlc3RyaWN0OiJFIixyZXF1aXJlOlsiP25nTW9kZWwiXSxsaW5rOntwcmU6ZnVuY3Rpb24oZSxmLGcsaCl7aFswXSYmKFdkW00oZy50eXBlKV18fFdkLnRleHQpKGUsZiwKZyxoWzBdLGIsYSxkLGMpfX19fV0sR2c9L14odHJ1ZXxmYWxzZXxcZCspJC8sU2U9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEdnLnRlc3QoYi5uZ1ZhbHVlKT9mdW5jdGlvbihhLGIsZSl7ZS4kc2V0KCJ2YWx1ZSIsYS4kZXZhbChlLm5nVmFsdWUpKX06ZnVuY3Rpb24oYSxiLGUpe2EuJHdhdGNoKGUubmdWYWx1ZSxmdW5jdGlvbihhKXtlLiRzZXQoInZhbHVlIixhKX0pfX19fSxzZT1bIiRjb21waWxlIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6IkFDIixjb21waWxlOmZ1bmN0aW9uKGIpe2EuJCRhZGRCaW5kaW5nQ2xhc3MoYik7cmV0dXJuIGZ1bmN0aW9uKGIsYyxlKXthLiQkYWRkQmluZGluZ0luZm8oYyxlLm5nQmluZCk7Yz1jWzBdO2IuJHdhdGNoKGUubmdCaW5kLGZ1bmN0aW9uKGEpe2MudGV4dENvbnRlbnQ9cihhKT8iIjphfSl9fX19XSx1ZT1bIiRpbnRlcnBvbGF0ZSIsIiRjb21waWxlIiwKZnVuY3Rpb24oYSxiKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihkKXtiLiQkYWRkQmluZGluZ0NsYXNzKGQpO3JldHVybiBmdW5jdGlvbihjLGQsZil7Yz1hKGQuYXR0cihmLiRhdHRyLm5nQmluZFRlbXBsYXRlKSk7Yi4kJGFkZEJpbmRpbmdJbmZvKGQsYy5leHByZXNzaW9ucyk7ZD1kWzBdO2YuJG9ic2VydmUoIm5nQmluZFRlbXBsYXRlIixmdW5jdGlvbihhKXtkLnRleHRDb250ZW50PXIoYSk/IiI6YX0pfX19fV0sdGU9WyIkc2NlIiwiJHBhcnNlIiwiJGNvbXBpbGUiLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm57cmVzdHJpY3Q6IkEiLGNvbXBpbGU6ZnVuY3Rpb24oYyxlKXt2YXIgZj1iKGUubmdCaW5kSHRtbCksZz1iKGUubmdCaW5kSHRtbCxmdW5jdGlvbihiKXtyZXR1cm4gYS52YWx1ZU9mKGIpfSk7ZC4kJGFkZEJpbmRpbmdDbGFzcyhjKTtyZXR1cm4gZnVuY3Rpb24oYixjLGUpe2QuJCRhZGRCaW5kaW5nSW5mbyhjLGUubmdCaW5kSHRtbCk7Yi4kd2F0Y2goZyxmdW5jdGlvbigpe3ZhciBkPQpmKGIpO2MuaHRtbChhLmdldFRydXN0ZWRIdG1sKGQpfHwiIil9KX19fX1dLFJlPW1hKHtyZXN0cmljdDoiQSIscmVxdWlyZToibmdNb2RlbCIsbGluazpmdW5jdGlvbihhLGIsZCxjKXtjLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXthLiRldmFsKGQubmdDaGFuZ2UpfSl9fSksdmU9bGMoIiIsITApLHhlPWxjKCJPZGQiLDApLHdlPWxjKCJFdmVuIiwxKSx5ZT1LYSh7Y29tcGlsZTpmdW5jdGlvbihhLGIpe2IuJHNldCgibmdDbG9hayIseCk7YS5yZW1vdmVDbGFzcygibmctY2xvYWsiKX19KSx6ZT1bZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHNjb3BlOiEwLGNvbnRyb2xsZXI6IkAiLHByaW9yaXR5OjUwMH19XSxJYz17fSxIZz17Ymx1cjohMCxmb2N1czohMH07cCgiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZSIuc3BsaXQoIiAiKSwKZnVuY3Rpb24oYSl7dmFyIGI9dmEoIm5nLSIrYSk7SWNbYl09WyIkcGFyc2UiLCIkcm9vdFNjb3BlIixmdW5jdGlvbihkLGMpe3JldHVybntyZXN0cmljdDoiQSIsY29tcGlsZTpmdW5jdGlvbihlLGYpe3ZhciBnPWQoZltiXSxudWxsLCEwKTtyZXR1cm4gZnVuY3Rpb24oYixkKXtkLm9uKGEsZnVuY3Rpb24oZCl7dmFyIGU9ZnVuY3Rpb24oKXtnKGIseyRldmVudDpkfSl9O0hnW2FdJiZjLiQkcGhhc2U/Yi4kZXZhbEFzeW5jKGUpOmIuJGFwcGx5KGUpfSl9fX19XX0pO3ZhciBDZT1bIiRhbmltYXRlIixmdW5jdGlvbihhKXtyZXR1cm57bXVsdGlFbGVtZW50OiEwLHRyYW5zY2x1ZGU6ImVsZW1lbnQiLHByaW9yaXR5OjYwMCx0ZXJtaW5hbDohMCxyZXN0cmljdDoiQSIsJCR0bGI6ITAsbGluazpmdW5jdGlvbihiLGQsYyxlLGYpe3ZhciBnLGgsaztiLiR3YXRjaChjLm5nSWYsZnVuY3Rpb24oYil7Yj9ofHxmKGZ1bmN0aW9uKGIsZSl7aD1lO2JbYi5sZW5ndGgrK109VS5jcmVhdGVDb21tZW50KCIgZW5kIG5nSWY6ICIrCmMubmdJZisiICIpO2c9e2Nsb25lOmJ9O2EuZW50ZXIoYixkLnBhcmVudCgpLGQpfSk6KGsmJihrLnJlbW92ZSgpLGs9bnVsbCksaCYmKGguJGRlc3Ryb3koKSxoPW51bGwpLGcmJihrPXFiKGcuY2xvbmUpLGEubGVhdmUoaykudGhlbihmdW5jdGlvbigpe2s9bnVsbH0pLGc9bnVsbCkpfSl9fX1dLERlPVsiJHRlbXBsYXRlUmVxdWVzdCIsIiRhbmNob3JTY3JvbGwiLCIkYW5pbWF0ZSIsZnVuY3Rpb24oYSxiLGQpe3JldHVybntyZXN0cmljdDoiRUNBIixwcmlvcml0eTo0MDAsdGVybWluYWw6ITAsdHJhbnNjbHVkZToiZWxlbWVudCIsY29udHJvbGxlcjpkYS5ub29wLGNvbXBpbGU6ZnVuY3Rpb24oYyxlKXt2YXIgZj1lLm5nSW5jbHVkZXx8ZS5zcmMsZz1lLm9ubG9hZHx8IiIsaD1lLmF1dG9zY3JvbGw7cmV0dXJuIGZ1bmN0aW9uKGMsZSxsLG4scCl7dmFyIHI9MCx0LHMscSx5PWZ1bmN0aW9uKCl7cyYmKHMucmVtb3ZlKCkscz1udWxsKTt0JiYodC4kZGVzdHJveSgpLHQ9bnVsbCk7cSYmCihkLmxlYXZlKHEpLnRoZW4oZnVuY3Rpb24oKXtzPW51bGx9KSxzPXEscT1udWxsKX07Yy4kd2F0Y2goZixmdW5jdGlvbihmKXt2YXIgbD1mdW5jdGlvbigpeyF1KGgpfHxoJiYhYy4kZXZhbChoKXx8YigpfSxzPSsrcjtmPyhhKGYsITApLnRoZW4oZnVuY3Rpb24oYSl7aWYoIWMuJCRkZXN0cm95ZWQmJnM9PT1yKXt2YXIgYj1jLiRuZXcoKTtuLnRlbXBsYXRlPWE7YT1wKGIsZnVuY3Rpb24oYSl7eSgpO2QuZW50ZXIoYSxudWxsLGUpLnRoZW4obCl9KTt0PWI7cT1hO3QuJGVtaXQoIiRpbmNsdWRlQ29udGVudExvYWRlZCIsZik7Yy4kZXZhbChnKX19LGZ1bmN0aW9uKCl7Yy4kJGRlc3Ryb3llZHx8cyE9PXJ8fCh5KCksYy4kZW1pdCgiJGluY2x1ZGVDb250ZW50RXJyb3IiLGYpKX0pLGMuJGVtaXQoIiRpbmNsdWRlQ29udGVudFJlcXVlc3RlZCIsZikpOih5KCksbi50ZW1wbGF0ZT1udWxsKX0pfX19fV0sVWU9WyIkY29tcGlsZSIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OiJFQ0EiLApwcmlvcml0eTotNDAwLHJlcXVpcmU6Im5nSW5jbHVkZSIsbGluazpmdW5jdGlvbihiLGQsYyxlKXsvU1ZHLy50ZXN0KGRbMF0udG9TdHJpbmcoKSk/KGQuZW1wdHkoKSxhKExjKGUudGVtcGxhdGUsVSkuY2hpbGROb2RlcykoYixmdW5jdGlvbihhKXtkLmFwcGVuZChhKX0se2Z1dHVyZVBhcmVudEVsZW1lbnQ6ZH0pKTooZC5odG1sKGUudGVtcGxhdGUpLGEoZC5jb250ZW50cygpKShiKSl9fX1dLEVlPUthKHtwcmlvcml0eTo0NTAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxiLGQpe2EuJGV2YWwoZC5uZ0luaXQpfX19fSksUWU9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHByaW9yaXR5OjEwMCxyZXF1aXJlOiJuZ01vZGVsIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe3ZhciBlPWIuYXR0cihkLiRhdHRyLm5nTGlzdCl8fCIsICIsZj0iZmFsc2UiIT09ZC5uZ1RyaW0sZz1mP1QoZSk6ZTtjLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoIXIoYSkpe3ZhciBiPQpbXTthJiZwKGEuc3BsaXQoZyksZnVuY3Rpb24oYSl7YSYmYi5wdXNoKGY/VChhKTphKX0pO3JldHVybiBifX0pO2MuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gTChhKT9hLmpvaW4oZSk6eH0pO2MuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fCFhLmxlbmd0aH19fX0sbGI9Im5nLXZhbGlkIixOZD0ibmctaW52YWxpZCIsWGE9Im5nLXByaXN0aW5lIixKYj0ibmctZGlydHkiLFBkPSJuZy1wZW5kaW5nIixrYj1CKCJuZ01vZGVsIiksSWc9WyIkc2NvcGUiLCIkZXhjZXB0aW9uSGFuZGxlciIsIiRhdHRycyIsIiRlbGVtZW50IiwiJHBhcnNlIiwiJGFuaW1hdGUiLCIkdGltZW91dCIsIiRyb290U2NvcGUiLCIkcSIsIiRpbnRlcnBvbGF0ZSIsZnVuY3Rpb24oYSxiLGQsYyxlLGYsZyxoLGssbSl7dGhpcy4kbW9kZWxWYWx1ZT10aGlzLiR2aWV3VmFsdWU9TnVtYmVyLk5hTjt0aGlzLiQkcmF3TW9kZWxWYWx1ZT14O3RoaXMuJHZhbGlkYXRvcnM9e307dGhpcy4kYXN5bmNWYWxpZGF0b3JzPQp7fTt0aGlzLiRwYXJzZXJzPVtdO3RoaXMuJGZvcm1hdHRlcnM9W107dGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycz1bXTt0aGlzLiR1bnRvdWNoZWQ9ITA7dGhpcy4kdG91Y2hlZD0hMTt0aGlzLiRwcmlzdGluZT0hMDt0aGlzLiRkaXJ0eT0hMTt0aGlzLiR2YWxpZD0hMDt0aGlzLiRpbnZhbGlkPSExO3RoaXMuJGVycm9yPXt9O3RoaXMuJCRzdWNjZXNzPXt9O3RoaXMuJHBlbmRpbmc9eDt0aGlzLiRuYW1lPW0oZC5uYW1lfHwiIiwhMSkoYSk7dGhpcy4kJHBhcmVudEZvcm09SWI7dmFyIGw9ZShkLm5nTW9kZWwpLG49bC5hc3NpZ24scz1sLHo9bix0PW51bGwsQSxxPXRoaXM7dGhpcy4kJHNldE9wdGlvbnM9ZnVuY3Rpb24oYSl7aWYoKHEuJG9wdGlvbnM9YSkmJmEuZ2V0dGVyU2V0dGVyKXt2YXIgYj1lKGQubmdNb2RlbCsiKCkiKSxmPWUoZC5uZ01vZGVsKyIoJCQkcCkiKTtzPWZ1bmN0aW9uKGEpe3ZhciBjPWwoYSk7RyhjKSYmKGM9YihhKSk7cmV0dXJuIGN9O3o9ZnVuY3Rpb24oYSwKYil7RyhsKGEpKT9mKGEseyQkJHA6cS4kbW9kZWxWYWx1ZX0pOm4oYSxxLiRtb2RlbFZhbHVlKX19ZWxzZSBpZighbC5hc3NpZ24pdGhyb3cga2IoIm5vbmFzc2lnbiIsZC5uZ01vZGVsLHVhKGMpKTt9O3RoaXMuJHJlbmRlcj12O3RoaXMuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIHIoYSl8fCIiPT09YXx8bnVsbD09PWF8fGEhPT1hfTt2YXIgeT0wO0pkKHtjdHJsOnRoaXMsJGVsZW1lbnQ6YyxzZXQ6ZnVuY3Rpb24oYSxiKXthW2JdPSEwfSx1bnNldDpmdW5jdGlvbihhLGIpe2RlbGV0ZSBhW2JdfSwkYW5pbWF0ZTpmfSk7dGhpcy4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtxLiRkaXJ0eT0hMTtxLiRwcmlzdGluZT0hMDtmLnJlbW92ZUNsYXNzKGMsSmIpO2YuYWRkQ2xhc3MoYyxYYSl9O3RoaXMuJHNldERpcnR5PWZ1bmN0aW9uKCl7cS4kZGlydHk9ITA7cS4kcHJpc3RpbmU9ITE7Zi5yZW1vdmVDbGFzcyhjLFhhKTtmLmFkZENsYXNzKGMsSmIpO3EuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpfTsKdGhpcy4kc2V0VW50b3VjaGVkPWZ1bmN0aW9uKCl7cS4kdG91Y2hlZD0hMTtxLiR1bnRvdWNoZWQ9ITA7Zi5zZXRDbGFzcyhjLCJuZy11bnRvdWNoZWQiLCJuZy10b3VjaGVkIil9O3RoaXMuJHNldFRvdWNoZWQ9ZnVuY3Rpb24oKXtxLiR0b3VjaGVkPSEwO3EuJHVudG91Y2hlZD0hMTtmLnNldENsYXNzKGMsIm5nLXRvdWNoZWQiLCJuZy11bnRvdWNoZWQiKX07dGhpcy4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtnLmNhbmNlbCh0KTtxLiR2aWV3VmFsdWU9cS4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7cS4kcmVuZGVyKCl9O3RoaXMuJHZhbGlkYXRlPWZ1bmN0aW9uKCl7aWYoIVAocS4kbW9kZWxWYWx1ZSl8fCFpc05hTihxLiRtb2RlbFZhbHVlKSl7dmFyIGE9cS4kJHJhd01vZGVsVmFsdWUsYj1xLiR2YWxpZCxjPXEuJG1vZGVsVmFsdWUsZD1xLiRvcHRpb25zJiZxLiRvcHRpb25zLmFsbG93SW52YWxpZDtxLiQkcnVuVmFsaWRhdG9ycyhhLHEuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlLApmdW5jdGlvbihlKXtkfHxiPT09ZXx8KHEuJG1vZGVsVmFsdWU9ZT9hOngscS4kbW9kZWxWYWx1ZSE9PWMmJnEuJCR3cml0ZU1vZGVsVG9TY29wZSgpKX0pfX07dGhpcy4kJHJ1blZhbGlkYXRvcnM9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXt2YXIgYz0hMDtwKHEuJHZhbGlkYXRvcnMsZnVuY3Rpb24oZCxlKXt2YXIgZz1kKGEsYik7Yz1jJiZnO2YoZSxnKX0pO3JldHVybiBjPyEwOihwKHEuJGFzeW5jVmFsaWRhdG9ycyxmdW5jdGlvbihhLGIpe2YoYixudWxsKX0pLCExKX1mdW5jdGlvbiBlKCl7dmFyIGM9W10sZD0hMDtwKHEuJGFzeW5jVmFsaWRhdG9ycyxmdW5jdGlvbihlLGcpe3ZhciBoPWUoYSxiKTtpZighaHx8IUcoaC50aGVuKSl0aHJvdyBrYigibm9wcm9taXNlIixoKTtmKGcseCk7Yy5wdXNoKGgudGhlbihmdW5jdGlvbigpe2YoZywhMCl9LGZ1bmN0aW9uKGEpe2Q9ITE7ZihnLCExKX0pKX0pO2MubGVuZ3RoP2suYWxsKGMpLnRoZW4oZnVuY3Rpb24oKXtnKGQpfSwKdik6ZyghMCl9ZnVuY3Rpb24gZihhLGIpe2g9PT15JiZxLiRzZXRWYWxpZGl0eShhLGIpfWZ1bmN0aW9uIGcoYSl7aD09PXkmJmMoYSl9eSsrO3ZhciBoPXk7KGZ1bmN0aW9uKCl7dmFyIGE9cS4kJHBhcnNlck5hbWV8fCJwYXJzZSI7aWYocihBKSlmKGEsbnVsbCk7ZWxzZSByZXR1cm4gQXx8KHAocS4kdmFsaWRhdG9ycyxmdW5jdGlvbihhLGIpe2YoYixudWxsKX0pLHAocS4kYXN5bmNWYWxpZGF0b3JzLGZ1bmN0aW9uKGEsYil7ZihiLG51bGwpfSkpLGYoYSxBKSxBO3JldHVybiEwfSkoKT9kKCk/ZSgpOmcoITEpOmcoITEpfTt0aGlzLiRjb21taXRWaWV3VmFsdWU9ZnVuY3Rpb24oKXt2YXIgYT1xLiR2aWV3VmFsdWU7Zy5jYW5jZWwodCk7aWYocS4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUhPT1hfHwiIj09PWEmJnEuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKXEuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWEscS4kcHJpc3RpbmUmJnRoaXMuJHNldERpcnR5KCksdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUoKX07CnRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlPWZ1bmN0aW9uKCl7dmFyIGI9cS4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7aWYoQT1yKGIpP3g6ITApZm9yKHZhciBjPTA7YzxxLiRwYXJzZXJzLmxlbmd0aDtjKyspaWYoYj1xLiRwYXJzZXJzW2NdKGIpLHIoYikpe0E9ITE7YnJlYWt9UChxLiRtb2RlbFZhbHVlKSYmaXNOYU4ocS4kbW9kZWxWYWx1ZSkmJihxLiRtb2RlbFZhbHVlPXMoYSkpO3ZhciBkPXEuJG1vZGVsVmFsdWUsZT1xLiRvcHRpb25zJiZxLiRvcHRpb25zLmFsbG93SW52YWxpZDtxLiQkcmF3TW9kZWxWYWx1ZT1iO2UmJihxLiRtb2RlbFZhbHVlPWIscS4kbW9kZWxWYWx1ZSE9PWQmJnEuJCR3cml0ZU1vZGVsVG9TY29wZSgpKTtxLiQkcnVuVmFsaWRhdG9ycyhiLHEuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlLGZ1bmN0aW9uKGEpe2V8fChxLiRtb2RlbFZhbHVlPWE/Yjp4LHEuJG1vZGVsVmFsdWUhPT1kJiZxLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSl9KX07dGhpcy4kJHdyaXRlTW9kZWxUb1Njb3BlPQpmdW5jdGlvbigpe3ooYSxxLiRtb2RlbFZhbHVlKTtwKHEuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsZnVuY3Rpb24oYSl7dHJ5e2EoKX1jYXRjaChjKXtiKGMpfX0pfTt0aGlzLiRzZXRWaWV3VmFsdWU9ZnVuY3Rpb24oYSxiKXtxLiR2aWV3VmFsdWU9YTtxLiRvcHRpb25zJiYhcS4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHR8fHEuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChiKX07dGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0PWZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1xLiRvcHRpb25zO2QmJnUoZC5kZWJvdW5jZSkmJihkPWQuZGVib3VuY2UsUChkKT9jPWQ6UChkW2JdKT9jPWRbYl06UChkWyJkZWZhdWx0Il0pJiYoYz1kWyJkZWZhdWx0Il0pKTtnLmNhbmNlbCh0KTtjP3Q9ZyhmdW5jdGlvbigpe3EuJGNvbW1pdFZpZXdWYWx1ZSgpfSxjKTpoLiQkcGhhc2U/cS4kY29tbWl0Vmlld1ZhbHVlKCk6YS4kYXBwbHkoZnVuY3Rpb24oKXtxLiRjb21taXRWaWV3VmFsdWUoKX0pfTthLiR3YXRjaChmdW5jdGlvbigpe3ZhciBiPQpzKGEpO2lmKGIhPT1xLiRtb2RlbFZhbHVlJiYocS4kbW9kZWxWYWx1ZT09PXEuJG1vZGVsVmFsdWV8fGI9PT1iKSl7cS4kbW9kZWxWYWx1ZT1xLiQkcmF3TW9kZWxWYWx1ZT1iO0E9eDtmb3IodmFyIGM9cS4kZm9ybWF0dGVycyxkPWMubGVuZ3RoLGU9YjtkLS07KWU9Y1tkXShlKTtxLiR2aWV3VmFsdWUhPT1lJiYocS4kdmlld1ZhbHVlPXEuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWUscS4kcmVuZGVyKCkscS4kJHJ1blZhbGlkYXRvcnMoYixlLHYpKX1yZXR1cm4gYn0pfV0sUGU9WyIkcm9vdFNjb3BlIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6WyJuZ01vZGVsIiwiXj9mb3JtIiwiXj9uZ01vZGVsT3B0aW9ucyJdLGNvbnRyb2xsZXI6SWcscHJpb3JpdHk6MSxjb21waWxlOmZ1bmN0aW9uKGIpe2IuYWRkQ2xhc3MoWGEpLmFkZENsYXNzKCJuZy11bnRvdWNoZWQiKS5hZGRDbGFzcyhsYik7cmV0dXJue3ByZTpmdW5jdGlvbihhLGIsZSxmKXt2YXIgZz0KZlswXTtiPWZbMV18fGcuJCRwYXJlbnRGb3JtO2cuJCRzZXRPcHRpb25zKGZbMl0mJmZbMl0uJG9wdGlvbnMpO2IuJGFkZENvbnRyb2woZyk7ZS4kb2JzZXJ2ZSgibmFtZSIsZnVuY3Rpb24oYSl7Zy4kbmFtZSE9PWEmJmcuJCRwYXJlbnRGb3JtLiQkcmVuYW1lQ29udHJvbChnLGEpfSk7YS4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2cuJCRwYXJlbnRGb3JtLiRyZW1vdmVDb250cm9sKGcpfSl9LHBvc3Q6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGc9ZlswXTtpZihnLiRvcHRpb25zJiZnLiRvcHRpb25zLnVwZGF0ZU9uKWMub24oZy4kb3B0aW9ucy51cGRhdGVPbixmdW5jdGlvbihhKXtnLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoYSYmYS50eXBlKX0pO2Mub24oImJsdXIiLGZ1bmN0aW9uKGMpe2cuJHRvdWNoZWR8fChhLiQkcGhhc2U/Yi4kZXZhbEFzeW5jKGcuJHNldFRvdWNoZWQpOmIuJGFwcGx5KGcuJHNldFRvdWNoZWQpKX0pfX19fX1dLEpnPS8oXHMrfF4pZGVmYXVsdChccyt8JCkvLApUZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiQSIsY29udHJvbGxlcjpbIiRzY29wZSIsIiRhdHRycyIsZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzO3RoaXMuJG9wdGlvbnM9TmEoYS4kZXZhbChiLm5nTW9kZWxPcHRpb25zKSk7dSh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uKT8odGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITEsdGhpcy4kb3B0aW9ucy51cGRhdGVPbj1UKHRoaXMuJG9wdGlvbnMudXBkYXRlT24ucmVwbGFjZShKZyxmdW5jdGlvbigpe2QuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0PSEwO3JldHVybiIgIn0pKSk6dGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITB9XX19LEZlPUthKHt0ZXJtaW5hbDohMCxwcmlvcml0eToxRTN9KSxLZz1CKCJuZ09wdGlvbnMiKSxMZz0vXlxzKihbXHNcU10rPykoPzpccythc1xzKyhbXHNcU10rPykpPyg/OlxzK2dyb3VwXHMrYnlccysoW1xzXFNdKz8pKT8oPzpccytkaXNhYmxlXHMrd2hlblxzKyhbXHNcU10rPykpP1xzK2ZvclxzKyg/OihbXCRcd11bXCRcd10qKXwoPzpcKFxzKihbXCRcd11bXCRcd10qKVxzKixccyooW1wkXHddW1wkXHddKilccypcKSkpXHMraW5ccysoW1xzXFNdKz8pKD86XHMrdHJhY2tccytieVxzKyhbXHNcU10rPykpPyQvLApOZT1bIiRjb21waWxlIiwiJHBhcnNlIixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSxjLGQpe2Z1bmN0aW9uIGUoYSxiLGMsZCxmKXt0aGlzLnNlbGVjdFZhbHVlPWE7dGhpcy52aWV3VmFsdWU9Yjt0aGlzLmxhYmVsPWM7dGhpcy5ncm91cD1kO3RoaXMuZGlzYWJsZWQ9Zn1mdW5jdGlvbiBtKGEpe3ZhciBiO2lmKCFwJiZBYShhKSliPWE7ZWxzZXtiPVtdO2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJiIkIiE9PWMuY2hhckF0KDApJiZiLnB1c2goYyl9cmV0dXJuIGJ9dmFyIGw9YS5tYXRjaChMZyk7aWYoIWwpdGhyb3cgS2coImlleHAiLGEsdWEoYykpO3ZhciBuPWxbNV18fGxbN10scD1sWzZdO2E9LyBhcyAvLnRlc3QobFswXSkmJmxbMV07dmFyIHI9bFs5XTtjPWIobFsyXT9sWzFdOm4pO3ZhciB0PWEmJmIoYSl8fGMscz1yJiZiKHIpLHE9cj9mdW5jdGlvbihhLGIpe3JldHVybiBzKGQsYil9OmZ1bmN0aW9uKGEpe3JldHVybiBEYShhKX0seT1mdW5jdGlvbihhLApiKXtyZXR1cm4gcShhLEMoYSxiKSl9LHc9YihsWzJdfHxsWzFdKSx4PWIobFszXXx8IiIpLEY9YihsWzRdfHwiIiksdT1iKGxbOF0pLHY9e30sQz1wP2Z1bmN0aW9uKGEsYil7dltwXT1iO3Zbbl09YTtyZXR1cm4gdn06ZnVuY3Rpb24oYSl7dltuXT1hO3JldHVybiB2fTtyZXR1cm57dHJhY2tCeTpyLGdldFRyYWNrQnlWYWx1ZTp5LGdldFdhdGNoYWJsZXM6Yih1LGZ1bmN0aW9uKGEpe3ZhciBiPVtdO2E9YXx8W107Zm9yKHZhciBjPW0oYSksZT1jLmxlbmd0aCxmPTA7ZjxlO2YrKyl7dmFyIGc9YT09PWM/ZjpjW2ZdLGs9QyhhW2ddLGcpLGc9cShhW2ddLGspO2IucHVzaChnKTtpZihsWzJdfHxsWzFdKWc9dyhkLGspLGIucHVzaChnKTtsWzRdJiYoaz1GKGQsayksYi5wdXNoKGspKX1yZXR1cm4gYn0pLGdldE9wdGlvbnM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj17fSxjPXUoZCl8fFtdLGY9bShjKSxnPWYubGVuZ3RoLGw9MDtsPGc7bCsrKXt2YXIgbj1jPT09Zj9sOmZbbF0scD0KQyhjW25dLG4pLHM9dChkLHApLG49cShzLHApLHY9dyhkLHApLEE9eChkLHApLHA9RihkLHApLHM9bmV3IGUobixzLHYsQSxwKTthLnB1c2gocyk7YltuXT1zfXJldHVybntpdGVtczphLHNlbGVjdFZhbHVlTWFwOmIsZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYlt5KGEpXX0sZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gcj9kYS5jb3B5KGEudmlld1ZhbHVlKTphLnZpZXdWYWx1ZX19fX19dmFyIGM9VS5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSxlPVUuY3JlYXRlRWxlbWVudCgib3B0Z3JvdXAiKTtyZXR1cm57cmVzdHJpY3Q6IkEiLHRlcm1pbmFsOiEwLHJlcXVpcmU6WyJzZWxlY3QiLCI/bmdNb2RlbCJdLGxpbms6e3ByZTpmdW5jdGlvbihhLGIsYyxkKXtkWzBdLnJlZ2lzdGVyT3B0aW9uPXZ9LHBvc3Q6ZnVuY3Rpb24oYixnLGgsayl7ZnVuY3Rpb24gbShhLGIpe2EuZWxlbWVudD1iO2IuZGlzYWJsZWQ9YS5kaXNhYmxlZDsKYS5sYWJlbCE9PWIubGFiZWwmJihiLmxhYmVsPWEubGFiZWwsYi50ZXh0Q29udGVudD1hLmxhYmVsKTthLnZhbHVlIT09Yi52YWx1ZSYmKGIudmFsdWU9YS5zZWxlY3RWYWx1ZSl9ZnVuY3Rpb24gbChhLGIsYyxkKXtiJiZNKGIubm9kZU5hbWUpPT09Yz9jPWI6KGM9ZC5jbG9uZU5vZGUoITEpLGI/YS5pbnNlcnRCZWZvcmUoYyxiKTphLmFwcGVuZENoaWxkKGMpKTtyZXR1cm4gY31mdW5jdGlvbiBuKGEpe2Zvcih2YXIgYjthOyliPWEubmV4dFNpYmxpbmcsWGIoYSksYT1ifWZ1bmN0aW9uIHIoYSl7dmFyIGI9eSYmeVswXSxjPXUmJnVbMF07aWYoYnx8Yylmb3IoO2EmJihhPT09Ynx8YT09PWN8fDg9PT1hLm5vZGVUeXBlfHwib3B0aW9uIj09PW9hKGEpJiYiIj09PWEudmFsdWUpOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gcygpe3ZhciBhPUUmJngucmVhZFZhbHVlKCk7RT1DLmdldE9wdGlvbnMoKTt2YXIgYj17fSxkPWdbMF0uZmlyc3RDaGlsZDtGJiZnLnByZXBlbmQoeSk7CmQ9cihkKTtFLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGYsaDthLmdyb3VwPyhmPWJbYS5ncm91cF0sZnx8KGY9bChnWzBdLGQsIm9wdGdyb3VwIixlKSxkPWYubmV4dFNpYmxpbmcsZi5sYWJlbD1hLmdyb3VwLGY9YlthLmdyb3VwXT17Z3JvdXBFbGVtZW50OmYsY3VycmVudE9wdGlvbkVsZW1lbnQ6Zi5maXJzdENoaWxkfSksaD1sKGYuZ3JvdXBFbGVtZW50LGYuY3VycmVudE9wdGlvbkVsZW1lbnQsIm9wdGlvbiIsYyksbShhLGgpLGYuY3VycmVudE9wdGlvbkVsZW1lbnQ9aC5uZXh0U2libGluZyk6KGg9bChnWzBdLGQsIm9wdGlvbiIsYyksbShhLGgpLGQ9aC5uZXh0U2libGluZyl9KTtPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe24oYlthXS5jdXJyZW50T3B0aW9uRWxlbWVudCl9KTtuKGQpO3QuJHJlbmRlcigpO2lmKCF0LiRpc0VtcHR5KGEpKXt2YXIgZj14LnJlYWRWYWx1ZSgpOyhDLnRyYWNrQnl8fHE/bGEoYSxmKTphPT09Zil8fCh0LiRzZXRWaWV3VmFsdWUoZiksCnQuJHJlbmRlcigpKX19dmFyIHQ9a1sxXTtpZih0KXt2YXIgeD1rWzBdLHE9aC5tdWx0aXBsZSx5O2s9MDtmb3IodmFyIHc9Zy5jaGlsZHJlbigpLHY9dy5sZW5ndGg7azx2O2srKylpZigiIj09PXdba10udmFsdWUpe3k9dy5lcShrKTticmVha312YXIgRj0hIXksdT1EKGMuY2xvbmVOb2RlKCExKSk7dS52YWwoIj8iKTt2YXIgRSxDPWQoaC5uZ09wdGlvbnMsZyxiKTtxPyh0LiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwwPT09YS5sZW5ndGh9LHgud3JpdGVWYWx1ZT1mdW5jdGlvbihhKXtFLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oYSl7YS5lbGVtZW50LnNlbGVjdGVkPSExfSk7YSYmYS5mb3JFYWNoKGZ1bmN0aW9uKGEpeyhhPUUuZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZShhKSkmJiFhLmRpc2FibGVkJiYoYS5lbGVtZW50LnNlbGVjdGVkPSEwKX0pfSx4LnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPWcudmFsKCl8fFtdLGI9W107cChhLGZ1bmN0aW9uKGEpeyhhPUUuc2VsZWN0VmFsdWVNYXBbYV0pJiYKIWEuZGlzYWJsZWQmJmIucHVzaChFLmdldFZpZXdWYWx1ZUZyb21PcHRpb24oYSkpfSk7cmV0dXJuIGJ9LEMudHJhY2tCeSYmYi4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCl7aWYoTCh0LiR2aWV3VmFsdWUpKXJldHVybiB0LiR2aWV3VmFsdWUubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBDLmdldFRyYWNrQnlWYWx1ZShhKX0pfSxmdW5jdGlvbigpe3QuJHJlbmRlcigpfSkpOih4LndyaXRlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9RS5nZXRPcHRpb25Gcm9tVmlld1ZhbHVlKGEpO2ImJiFiLmRpc2FibGVkPyhnWzBdLnZhbHVlIT09Yi5zZWxlY3RWYWx1ZSYmKHUucmVtb3ZlKCksRnx8eS5yZW1vdmUoKSxnWzBdLnZhbHVlPWIuc2VsZWN0VmFsdWUsYi5lbGVtZW50LnNlbGVjdGVkPSEwKSxiLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJzZWxlY3RlZCIsInNlbGVjdGVkIikpOm51bGw9PT1hfHxGPyh1LnJlbW92ZSgpLEZ8fGcucHJlcGVuZCh5KSxnLnZhbCgiIikseS5wcm9wKCJzZWxlY3RlZCIsCiEwKSx5LmF0dHIoInNlbGVjdGVkIiwhMCkpOihGfHx5LnJlbW92ZSgpLGcucHJlcGVuZCh1KSxnLnZhbCgiPyIpLHUucHJvcCgic2VsZWN0ZWQiLCEwKSx1LmF0dHIoInNlbGVjdGVkIiwhMCkpfSx4LnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPUUuc2VsZWN0VmFsdWVNYXBbZy52YWwoKV07cmV0dXJuIGEmJiFhLmRpc2FibGVkPyhGfHx5LnJlbW92ZSgpLHUucmVtb3ZlKCksRS5nZXRWaWV3VmFsdWVGcm9tT3B0aW9uKGEpKTpudWxsfSxDLnRyYWNrQnkmJmIuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIEMuZ2V0VHJhY2tCeVZhbHVlKHQuJHZpZXdWYWx1ZSl9LGZ1bmN0aW9uKCl7dC4kcmVuZGVyKCl9KSk7Rj8oeS5yZW1vdmUoKSxhKHkpKGIpLHkucmVtb3ZlQ2xhc3MoIm5nLXNjb3BlIikpOnk9RChjLmNsb25lTm9kZSghMSkpO3MoKTtiLiR3YXRjaENvbGxlY3Rpb24oQy5nZXRXYXRjaGFibGVzLHMpfX19fX1dLEdlPVsiJGxvY2FsZSIsIiRpbnRlcnBvbGF0ZSIsIiRsb2ciLApmdW5jdGlvbihhLGIsZCl7dmFyIGM9L3t9L2csZT0vXndoZW4oTWludXMpPyguKykkLztyZXR1cm57bGluazpmdW5jdGlvbihmLGcsaCl7ZnVuY3Rpb24gayhhKXtnLnRleHQoYXx8IiIpfXZhciBtPWguY291bnQsbD1oLiRhdHRyLndoZW4mJmcuYXR0cihoLiRhdHRyLndoZW4pLG49aC5vZmZzZXR8fDAscz1mLiRldmFsKGwpfHx7fSx4PXt9LHQ9Yi5zdGFydFN5bWJvbCgpLHU9Yi5lbmRTeW1ib2woKSxxPXQrbSsiLSIrbit1LHk9ZGEubm9vcCx3O3AoaCxmdW5jdGlvbihhLGIpe3ZhciBjPWUuZXhlYyhiKTtjJiYoYz0oY1sxXT8iLSI6IiIpK00oY1syXSksc1tjXT1nLmF0dHIoaC4kYXR0cltiXSkpfSk7cChzLGZ1bmN0aW9uKGEsZCl7eFtkXT1iKGEucmVwbGFjZShjLHEpKX0pO2YuJHdhdGNoKG0sZnVuY3Rpb24oYil7dmFyIGM9cGFyc2VGbG9hdChiKSxlPWlzTmFOKGMpO2V8fGMgaW4gc3x8KGM9YS5wbHVyYWxDYXQoYy1uKSk7Yz09PXd8fGUmJlAodykmJmlzTmFOKHcpfHwoeSgpLAplPXhbY10scihlKT8obnVsbCE9YiYmZC5kZWJ1ZygibmdQbHVyYWxpemU6IG5vIHJ1bGUgZGVmaW5lZCBmb3IgJyIrYysiJyBpbiAiK2wpLHk9dixrKCkpOnk9Zi4kd2F0Y2goZSxrKSx3PWMpfSl9fX1dLEhlPVsiJHBhcnNlIiwiJGFuaW1hdGUiLGZ1bmN0aW9uKGEsYil7dmFyIGQ9QigibmdSZXBlYXQiKSxjPWZ1bmN0aW9uKGEsYixjLGQsayxtLGwpe2FbY109ZDtrJiYoYVtrXT1tKTthLiRpbmRleD1iO2EuJGZpcnN0PTA9PT1iO2EuJGxhc3Q9Yj09PWwtMTthLiRtaWRkbGU9IShhLiRmaXJzdHx8YS4kbGFzdCk7YS4kb2RkPSEoYS4kZXZlbj0wPT09KGImMSkpfTtyZXR1cm57cmVzdHJpY3Q6IkEiLG11bHRpRWxlbWVudDohMCx0cmFuc2NsdWRlOiJlbGVtZW50Iixwcmlvcml0eToxRTMsdGVybWluYWw6ITAsJCR0bGI6ITAsY29tcGlsZTpmdW5jdGlvbihlLGYpe3ZhciBnPWYubmdSZXBlYXQsaD1VLmNyZWF0ZUNvbW1lbnQoIiBlbmQgbmdSZXBlYXQ6ICIrZysiICIpLGs9Zy5tYXRjaCgvXlxzKihbXHNcU10rPylccytpblxzKyhbXHNcU10rPykoPzpccythc1xzKyhbXHNcU10rPykpPyg/OlxzK3RyYWNrXHMrYnlccysoW1xzXFNdKz8pKT9ccyokLyk7CmlmKCFrKXRocm93IGQoImlleHAiLGcpO3ZhciBtPWtbMV0sbD1rWzJdLG49a1szXSxyPWtbNF0saz1tLm1hdGNoKC9eKD86KFxzKltcJFx3XSspfFwoXHMqKFtcJFx3XSspXHMqLFxzKihbXCRcd10rKVxzKlwpKSQvKTtpZighayl0aHJvdyBkKCJpaWRleHAiLG0pO3ZhciBzPWtbM118fGtbMV0sdD1rWzJdO2lmKG4mJighL15bJGEtekEtWl9dWyRhLXpBLVowLTlfXSokLy50ZXN0KG4pfHwvXihudWxsfHVuZGVmaW5lZHx0aGlzfFwkaW5kZXh8XCRmaXJzdHxcJG1pZGRsZXxcJGxhc3R8XCRldmVufFwkb2RkfFwkcGFyZW50fFwkcm9vdHxcJGlkKSQvLnRlc3QobikpKXRocm93IGQoImJhZGlkZW50IixuKTt2YXIgdSxxLHksdyx2PXskaWQ6RGF9O3I/dT1hKHIpOih5PWZ1bmN0aW9uKGEsYil7cmV0dXJuIERhKGIpfSx3PWZ1bmN0aW9uKGEpe3JldHVybiBhfSk7cmV0dXJuIGZ1bmN0aW9uKGEsZSxmLGssbSl7dSYmKHE9ZnVuY3Rpb24oYixjLGQpe3QmJih2W3RdPWIpO3Zbc109Yzt2LiRpbmRleD0KZDtyZXR1cm4gdShhLHYpfSk7dmFyIHI9WigpO2EuJHdhdGNoQ29sbGVjdGlvbihsLGZ1bmN0aW9uKGYpe3ZhciBrLGwsdT1lWzBdLHYsQT1aKCksQyxELEosRSxHLEIsSDtuJiYoYVtuXT1mKTtpZihBYShmKSlHPWYsbD1xfHx5O2Vsc2UgZm9yKEggaW4gbD1xfHx3LEc9W10sZilzYS5jYWxsKGYsSCkmJiIkIiE9PUguY2hhckF0KDApJiZHLnB1c2goSCk7Qz1HLmxlbmd0aDtIPUFycmF5KEMpO2ZvcihrPTA7azxDO2srKylpZihEPWY9PT1HP2s6R1trXSxKPWZbRF0sRT1sKEQsSixrKSxyW0VdKUI9cltFXSxkZWxldGUgcltFXSxBW0VdPUIsSFtrXT1CO2Vsc2V7aWYoQVtFXSl0aHJvdyBwKEgsZnVuY3Rpb24oYSl7YSYmYS5zY29wZSYmKHJbYS5pZF09YSl9KSxkKCJkdXBlcyIsZyxFLEopO0hba109e2lkOkUsc2NvcGU6eCxjbG9uZTp4fTtBW0VdPSEwfWZvcih2IGluIHIpe0I9clt2XTtFPXFiKEIuY2xvbmUpO2IubGVhdmUoRSk7aWYoRVswXS5wYXJlbnROb2RlKWZvcihrPTAsbD1FLmxlbmd0aDtrPApsO2srKylFW2tdLiQkTkdfUkVNT1ZFRD0hMDtCLnNjb3BlLiRkZXN0cm95KCl9Zm9yKGs9MDtrPEM7aysrKWlmKEQ9Zj09PUc/azpHW2tdLEo9ZltEXSxCPUhba10sQi5zY29wZSl7dj11O2RvIHY9di5uZXh0U2libGluZzt3aGlsZSh2JiZ2LiQkTkdfUkVNT1ZFRCk7Qi5jbG9uZVswXSE9diYmYi5tb3ZlKHFiKEIuY2xvbmUpLG51bGwsdSk7dT1CLmNsb25lW0IuY2xvbmUubGVuZ3RoLTFdO2MoQi5zY29wZSxrLHMsSix0LEQsQyl9ZWxzZSBtKGZ1bmN0aW9uKGEsZCl7Qi5zY29wZT1kO3ZhciBlPWguY2xvbmVOb2RlKCExKTthW2EubGVuZ3RoKytdPWU7Yi5lbnRlcihhLG51bGwsdSk7dT1lO0IuY2xvbmU9YTtBW0IuaWRdPUI7YyhCLnNjb3BlLGsscyxKLHQsRCxDKX0pO3I9QX0pfX19fV0sSWU9WyIkYW5pbWF0ZSIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OiJBIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihiLGQsYyl7Yi4kd2F0Y2goYy5uZ1Nob3csZnVuY3Rpb24oYil7YVtiPwoicmVtb3ZlQ2xhc3MiOiJhZGRDbGFzcyJdKGQsIm5nLWhpZGUiLHt0ZW1wQ2xhc3NlczoibmctaGlkZS1hbmltYXRlIn0pfSl9fX1dLEJlPVsiJGFuaW1hdGUiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDoiQSIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYixkLGMpe2IuJHdhdGNoKGMubmdIaWRlLGZ1bmN0aW9uKGIpe2FbYj8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKGQsIm5nLWhpZGUiLHt0ZW1wQ2xhc3NlczoibmctaGlkZS1hbmltYXRlIn0pfSl9fX1dLEplPUthKGZ1bmN0aW9uKGEsYixkKXthLiR3YXRjaChkLm5nU3R5bGUsZnVuY3Rpb24oYSxkKXtkJiZhIT09ZCYmcChkLGZ1bmN0aW9uKGEsYyl7Yi5jc3MoYywiIil9KTthJiZiLmNzcyhhKX0sITApfSksS2U9WyIkYW5pbWF0ZSIsZnVuY3Rpb24oYSl7cmV0dXJue3JlcXVpcmU6Im5nU3dpdGNoIixjb250cm9sbGVyOlsiJHNjb3BlIixmdW5jdGlvbigpe3RoaXMuY2FzZXM9e319XSxsaW5rOmZ1bmN0aW9uKGIsCmQsYyxlKXt2YXIgZj1bXSxnPVtdLGg9W10saz1bXSxtPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zcGxpY2UoYiwxKX19O2IuJHdhdGNoKGMubmdTd2l0Y2h8fGMub24sZnVuY3Rpb24oYil7dmFyIGMsZDtjPTA7Zm9yKGQ9aC5sZW5ndGg7YzxkOysrYylhLmNhbmNlbChoW2NdKTtjPWgubGVuZ3RoPTA7Zm9yKGQ9ay5sZW5ndGg7YzxkOysrYyl7dmFyIHI9cWIoZ1tjXS5jbG9uZSk7a1tjXS4kZGVzdHJveSgpOyhoW2NdPWEubGVhdmUocikpLnRoZW4obShoLGMpKX1nLmxlbmd0aD0wO2subGVuZ3RoPTA7KGY9ZS5jYXNlc1siISIrYl18fGUuY2FzZXNbIj8iXSkmJnAoZixmdW5jdGlvbihiKXtiLnRyYW5zY2x1ZGUoZnVuY3Rpb24oYyxkKXtrLnB1c2goZCk7dmFyIGU9Yi5lbGVtZW50O2NbYy5sZW5ndGgrK109VS5jcmVhdGVDb21tZW50KCIgZW5kIG5nU3dpdGNoV2hlbjogIik7Zy5wdXNoKHtjbG9uZTpjfSk7YS5lbnRlcihjLGUucGFyZW50KCksZSl9KX0pfSl9fX1dLApMZT1LYSh7dHJhbnNjbHVkZToiZWxlbWVudCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOiJebmdTd2l0Y2giLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGEsYixkLGMsZSl7Yy5jYXNlc1siISIrZC5uZ1N3aXRjaFdoZW5dPWMuY2FzZXNbIiEiK2QubmdTd2l0Y2hXaGVuXXx8W107Yy5jYXNlc1siISIrZC5uZ1N3aXRjaFdoZW5dLnB1c2goe3RyYW5zY2x1ZGU6ZSxlbGVtZW50OmJ9KX19KSxNZT1LYSh7dHJhbnNjbHVkZToiZWxlbWVudCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOiJebmdTd2l0Y2giLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGEsYixkLGMsZSl7Yy5jYXNlc1siPyJdPWMuY2FzZXNbIj8iXXx8W107Yy5jYXNlc1siPyJdLnB1c2goe3RyYW5zY2x1ZGU6ZSxlbGVtZW50OmJ9KX19KSxPZT1LYSh7cmVzdHJpY3Q6IkVBQyIsbGluazpmdW5jdGlvbihhLGIsZCxjLGUpe2lmKCFlKXRocm93IEIoIm5nVHJhbnNjbHVkZSIpKCJvcnBoYW4iLHVhKGIpKTtlKGZ1bmN0aW9uKGEpe2IuZW1wdHkoKTsKYi5hcHBlbmQoYSl9KX19KSxvZT1bIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6IkUiLHRlcm1pbmFsOiEwLGNvbXBpbGU6ZnVuY3Rpb24oYixkKXsidGV4dC9uZy10ZW1wbGF0ZSI9PWQudHlwZSYmYS5wdXQoZC5pZCxiWzBdLnRleHQpfX19XSxNZz17JHNldFZpZXdWYWx1ZTp2LCRyZW5kZXI6dn0sTmc9WyIkZWxlbWVudCIsIiRzY29wZSIsIiRhdHRycyIsZnVuY3Rpb24oYSxiLGQpe3ZhciBjPXRoaXMsZT1uZXcgVGE7Yy5uZ01vZGVsQ3RybD1NZztjLnVua25vd25PcHRpb249RChVLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtjLnJlbmRlclVua25vd25PcHRpb249ZnVuY3Rpb24oYil7Yj0iPyAiK0RhKGIpKyIgPyI7Yy51bmtub3duT3B0aW9uLnZhbChiKTthLnByZXBlbmQoYy51bmtub3duT3B0aW9uKTthLnZhbChiKX07Yi4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2MucmVuZGVyVW5rbm93bk9wdGlvbj12fSk7Yy5yZW1vdmVVbmtub3duT3B0aW9uPQpmdW5jdGlvbigpe2MudW5rbm93bk9wdGlvbi5wYXJlbnQoKSYmYy51bmtub3duT3B0aW9uLnJlbW92ZSgpfTtjLnJlYWRWYWx1ZT1mdW5jdGlvbigpe2MucmVtb3ZlVW5rbm93bk9wdGlvbigpO3JldHVybiBhLnZhbCgpfTtjLndyaXRlVmFsdWU9ZnVuY3Rpb24oYil7Yy5oYXNPcHRpb24oYik/KGMucmVtb3ZlVW5rbm93bk9wdGlvbigpLGEudmFsKGIpLCIiPT09YiYmYy5lbXB0eU9wdGlvbi5wcm9wKCJzZWxlY3RlZCIsITApKTpudWxsPT1iJiZjLmVtcHR5T3B0aW9uPyhjLnJlbW92ZVVua25vd25PcHRpb24oKSxhLnZhbCgiIikpOmMucmVuZGVyVW5rbm93bk9wdGlvbihiKX07Yy5hZGRPcHRpb249ZnVuY3Rpb24oYSxiKXtpZig4IT09YlswXS5ub2RlVHlwZSl7U2EoYSwnIm9wdGlvbiB2YWx1ZSInKTsiIj09PWEmJihjLmVtcHR5T3B0aW9uPWIpO3ZhciBkPWUuZ2V0KGEpfHwwO2UucHV0KGEsZCsxKTtjLm5nTW9kZWxDdHJsLiRyZW5kZXIoKTtiWzBdLmhhc0F0dHJpYnV0ZSgic2VsZWN0ZWQiKSYmCihiWzBdLnNlbGVjdGVkPSEwKX19O2MucmVtb3ZlT3B0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPWUuZ2V0KGEpO2ImJigxPT09Yj8oZS5yZW1vdmUoYSksIiI9PT1hJiYoYy5lbXB0eU9wdGlvbj14KSk6ZS5wdXQoYSxiLTEpKX07Yy5oYXNPcHRpb249ZnVuY3Rpb24oYSl7cmV0dXJuISFlLmdldChhKX07Yy5yZWdpc3Rlck9wdGlvbj1mdW5jdGlvbihhLGIsZCxlLG0pe2lmKGUpe3ZhciBsO2QuJG9ic2VydmUoInZhbHVlIixmdW5jdGlvbihhKXt1KGwpJiZjLnJlbW92ZU9wdGlvbihsKTtsPWE7Yy5hZGRPcHRpb24oYSxiKX0pfWVsc2UgbT9hLiR3YXRjaChtLGZ1bmN0aW9uKGEsZSl7ZC4kc2V0KCJ2YWx1ZSIsYSk7ZSE9PWEmJmMucmVtb3ZlT3B0aW9uKGUpO2MuYWRkT3B0aW9uKGEsYil9KTpjLmFkZE9wdGlvbihkLnZhbHVlLGIpO2Iub24oIiRkZXN0cm95IixmdW5jdGlvbigpe2MucmVtb3ZlT3B0aW9uKGQudmFsdWUpO2MubmdNb2RlbEN0cmwuJHJlbmRlcigpfSl9fV0scGU9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkUiLApyZXF1aXJlOlsic2VsZWN0IiwiP25nTW9kZWwiXSxjb250cm9sbGVyOk5nLHByaW9yaXR5OjEsbGluazp7cHJlOmZ1bmN0aW9uKGEsYixkLGMpe3ZhciBlPWNbMV07aWYoZSl7dmFyIGY9Y1swXTtmLm5nTW9kZWxDdHJsPWU7Yi5vbigiY2hhbmdlIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7ZS4kc2V0Vmlld1ZhbHVlKGYucmVhZFZhbHVlKCkpfSl9KTtpZihkLm11bHRpcGxlKXtmLnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPVtdO3AoYi5maW5kKCJvcHRpb24iKSxmdW5jdGlvbihiKXtiLnNlbGVjdGVkJiZhLnB1c2goYi52YWx1ZSl9KTtyZXR1cm4gYX07Zi53cml0ZVZhbHVlPWZ1bmN0aW9uKGEpe3ZhciBjPW5ldyBUYShhKTtwKGIuZmluZCgib3B0aW9uIiksZnVuY3Rpb24oYSl7YS5zZWxlY3RlZD11KGMuZ2V0KGEudmFsdWUpKX0pfTt2YXIgZyxoPU5hTjthLiR3YXRjaChmdW5jdGlvbigpe2ghPT1lLiR2aWV3VmFsdWV8fGxhKGcsZS4kdmlld1ZhbHVlKXx8KGc9CmZhKGUuJHZpZXdWYWx1ZSksZS4kcmVuZGVyKCkpO2g9ZS4kdmlld1ZhbHVlfSk7ZS4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8MD09PWEubGVuZ3RofX19fSxwb3N0OmZ1bmN0aW9uKGEsYixkLGMpe3ZhciBlPWNbMV07aWYoZSl7dmFyIGY9Y1swXTtlLiRyZW5kZXI9ZnVuY3Rpb24oKXtmLndyaXRlVmFsdWUoZS4kdmlld1ZhbHVlKX19fX19fSxyZT1bIiRpbnRlcnBvbGF0ZSIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OiJFIixwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbihiLGQpe2lmKHUoZC52YWx1ZSkpdmFyIGM9YShkLnZhbHVlLCEwKTtlbHNle3ZhciBlPWEoYi50ZXh0KCksITApO2V8fGQuJHNldCgidmFsdWUiLGIudGV4dCgpKX1yZXR1cm4gZnVuY3Rpb24oYSxiLGQpe3ZhciBrPWIucGFyZW50KCk7KGs9ay5kYXRhKCIkc2VsZWN0Q29udHJvbGxlciIpfHxrLnBhcmVudCgpLmRhdGEoIiRzZWxlY3RDb250cm9sbGVyIikpJiZrLnJlZ2lzdGVyT3B0aW9uKGEsCmIsZCxjLGUpfX19fV0scWU9bWEoe3Jlc3RyaWN0OiJFIix0ZXJtaW5hbDohMX0pLEZjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixyZXF1aXJlOiI/bmdNb2RlbCIsbGluazpmdW5jdGlvbihhLGIsZCxjKXtjJiYoZC5yZXF1aXJlZD0hMCxjLiR2YWxpZGF0b3JzLnJlcXVpcmVkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIWQucmVxdWlyZWR8fCFjLiRpc0VtcHR5KGIpfSxkLiRvYnNlcnZlKCJyZXF1aXJlZCIsZnVuY3Rpb24oKXtjLiR2YWxpZGF0ZSgpfSkpfX19LEVjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixyZXF1aXJlOiI/bmdNb2RlbCIsbGluazpmdW5jdGlvbihhLGIsZCxjKXtpZihjKXt2YXIgZSxmPWQubmdQYXR0ZXJufHxkLnBhdHRlcm47ZC4kb2JzZXJ2ZSgicGF0dGVybiIsZnVuY3Rpb24oYSl7SChhKSYmMDxhLmxlbmd0aCYmKGE9bmV3IFJlZ0V4cCgiXiIrYSsiJCIpKTtpZihhJiYhYS50ZXN0KXRocm93IEIoIm5nUGF0dGVybiIpKCJub3JlZ2V4cCIsCmYsYSx1YShiKSk7ZT1hfHx4O2MuJHZhbGlkYXRlKCl9KTtjLiR2YWxpZGF0b3JzLnBhdHRlcm49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy4kaXNFbXB0eShiKXx8cihlKXx8ZS50ZXN0KGIpfX19fX0sSGM9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6Ij9uZ01vZGVsIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2lmKGMpe3ZhciBlPS0xO2QuJG9ic2VydmUoIm1heGxlbmd0aCIsZnVuY3Rpb24oYSl7YT1jYShhKTtlPWlzTmFOKGEpPy0xOmE7Yy4kdmFsaWRhdGUoKX0pO2MuJHZhbGlkYXRvcnMubWF4bGVuZ3RoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIDA+ZXx8Yy4kaXNFbXB0eShiKXx8Yi5sZW5ndGg8PWV9fX19fSxHYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiQSIscmVxdWlyZToiP25nTW9kZWwiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyl7aWYoYyl7dmFyIGU9MDtkLiRvYnNlcnZlKCJtaW5sZW5ndGgiLGZ1bmN0aW9uKGEpe2U9Y2EoYSl8fDA7Yy4kdmFsaWRhdGUoKX0pOwpjLiR2YWxpZGF0b3JzLm1pbmxlbmd0aD1mdW5jdGlvbihhLGIpe3JldHVybiBjLiRpc0VtcHR5KGIpfHxiLmxlbmd0aD49ZX19fX19O1IuYW5ndWxhci5ib290c3RyYXA/Ui5jb25zb2xlJiZjb25zb2xlLmxvZygiV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLiIpOihoZSgpLGplKGRhKSxkYS5tb2R1bGUoIm5nTG9jYWxlIixbXSxbIiRwcm92aWRlIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2ErPSIiO3ZhciBiPWEuaW5kZXhPZigiLiIpO3JldHVybi0xPT1iPzA6YS5sZW5ndGgtYi0xfWEudmFsdWUoIiRsb2NhbGUiLHtEQVRFVElNRV9GT1JNQVRTOntBTVBNUzpbIkFNIiwiUE0iXSxEQVk6IlN1bmRheSBNb25kYXkgVHVlc2RheSBXZWRuZXNkYXkgVGh1cnNkYXkgRnJpZGF5IFNhdHVyZGF5Ii5zcGxpdCgiICIpLEVSQU5BTUVTOlsiQmVmb3JlIENocmlzdCIsIkFubm8gRG9taW5pIl0sRVJBUzpbIkJDIiwiQUQiXSxGSVJTVERBWU9GV0VFSzo2LApNT05USDoiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlciIuc3BsaXQoIiAiKSxTSE9SVERBWToiU3VuIE1vbiBUdWUgV2VkIFRodSBGcmkgU2F0Ii5zcGxpdCgiICIpLFNIT1JUTU9OVEg6IkphbiBGZWIgTWFyIEFwciBNYXkgSnVuIEp1bCBBdWcgU2VwIE9jdCBOb3YgRGVjIi5zcGxpdCgiICIpLFNUQU5EQUxPTkVNT05USDoiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlciIuc3BsaXQoIiAiKSxXRUVLRU5EUkFOR0U6WzUsNl0sZnVsbERhdGU6IkVFRUUsIE1NTU0gZCwgeSIsbG9uZ0RhdGU6Ik1NTU0gZCwgeSIsbWVkaXVtOiJNTU0gZCwgeSBoOm1tOnNzIGEiLG1lZGl1bURhdGU6Ik1NTSBkLCB5IixtZWRpdW1UaW1lOiJoOm1tOnNzIGEiLCJzaG9ydCI6Ik0vZC95eSBoOm1tIGEiLApzaG9ydERhdGU6Ik0vZC95eSIsc2hvcnRUaW1lOiJoOm1tIGEifSxOVU1CRVJfRk9STUFUUzp7Q1VSUkVOQ1lfU1lNOiIkIixERUNJTUFMX1NFUDoiLiIsR1JPVVBfU0VQOiIsIixQQVRURVJOUzpbe2dTaXplOjMsbGdTaXplOjMsbWF4RnJhYzozLG1pbkZyYWM6MCxtaW5JbnQ6MSxuZWdQcmU6Ii0iLG5lZ1N1ZjoiIixwb3NQcmU6IiIscG9zU3VmOiIifSx7Z1NpemU6MyxsZ1NpemU6MyxtYXhGcmFjOjIsbWluRnJhYzoyLG1pbkludDoxLG5lZ1ByZToiLVx1MDBhNCIsbmVnU3VmOiIiLHBvc1ByZToiXHUwMGE0Iixwb3NTdWY6IiJ9XX0saWQ6ImVuLXVzIixsb2NhbGVJRDoiZW5fVVMiLHBsdXJhbENhdDpmdW5jdGlvbihhLGMpe3ZhciBlPWF8MCxmPWM7eD09PWYmJihmPU1hdGgubWluKGIoYSksMykpO01hdGgucG93KDEwLGYpO3JldHVybiAxPT1lJiYwPT1mPyJvbmUiOiJvdGhlciJ9fSl9XSksRChVKS5yZWFkeShmdW5jdGlvbigpe2RlKFUseWMpfSkpfSkod2luZG93LGRvY3VtZW50KTsKIXdpbmRvdy5hbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSYmd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5oZWFkKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPkBjaGFyc2V0ICJVVEYtOCI7W25nXFw6Y2xvYWtdLFtuZy1jbG9ha10sW2RhdGEtbmctY2xvYWtdLFt4LW5nLWNsb2FrXSwubmctY2xvYWssLngtbmctY2xvYWssLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcOmZvcm17ZGlzcGxheTpibG9jazt9Lm5nLWFuaW1hdGUtc2hpbXt2aXNpYmlsaXR5OmhpZGRlbjt9Lm5nLWFuY2hvcntwb3NpdGlvbjphYnNvbHV0ZTt9PC9zdHlsZT4nKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci5taW4uanMubWFwCjsKZGVmaW5lKCJhbmd1bGFyIiwgKGZ1bmN0aW9uIChnbG9iYWwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHJldCwgZm47CiAgICAgICAgcmV0dXJuIHJldCB8fCBnbG9iYWwuYW5ndWxhcjsKICAgIH07Cn0odGhpcykpKTsKCi8qISBqUXVlcnkgdjIuMS40IHwgKGMpIDIwMDUsIDIwMTUgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi8KIWZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO3JldHVybiBiKGEpfTpiKGEpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9YS5kb2N1bWVudCxtPSIyLjEuNCIsbj1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbi5mbi5pbml0KGEsYil9LG89L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLHA9L14tbXMtLyxxPS8tKFtcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTpkLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1uLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihuLmlzUGxhaW5PYmplY3QoZCl8fChlPW4uaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmbi5pc0FycmF5KGMpP2M6W10pOmY9YyYmbi5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1uLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZhPT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSkrMT49MH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4ib2JqZWN0IiE9PW4udHlwZShhKXx8YS5ub2RlVHlwZXx8bi5pc1dpbmRvdyhhKT8hMTphLmNvbnN0cnVjdG9yJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIik/ITE6ITB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aFtpLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1uLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoInVzZSBzdHJpY3QiKT8oYj1sLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLGIudGV4dD1hLGwuaGVhZC5hcHBlbmRDaGlsZChiKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTpjKGEpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9MCxmPWEubGVuZ3RoLGc9cyhhKTtpZihjKXtpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmcuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXMoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihjPWFbYl0sYj1hLGE9Yyksbi5pc0Z1bmN0aW9uKGEpPyhlPWQuY2FsbChhcmd1bWVudHMsMiksZj1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsZS5jb25jYXQoZC5jYWxsKGFyZ3VtZW50cykpKX0sZi5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGYpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6a30pLG4uZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2hbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0ibGVuZ3RoImluIGEmJmEubGVuZ3RoLGM9bi50eXBlKGEpO3JldHVybiJmdW5jdGlvbiI9PT1jfHxuLmlzV2luZG93KGEpPyExOjE9PT1hLm5vZGVUeXBlJiZiPyEwOiJhcnJheSI9PT1jfHwwPT09Ynx8Im51bWJlciI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfXZhciB0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9InNpenpsZSIrMSpuZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWhhKCksej1oYSgpLEE9aGEoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz0xPDwzMSxEPXt9Lmhhc093blByb3BlcnR5LEU9W10sRj1FLnBvcCxHPUUucHVzaCxIPUUucHVzaCxJPUUuc2xpY2UsSj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSz0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLEw9IltcXHgyMFxcdFxcclxcblxcZl0iLE09Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixOPU0ucmVwbGFjZSgidyIsIncjIiksTz0iXFxbIitMKyIqKCIrTSsiKSg/OiIrTCsiKihbKl4kfCF+XT89KSIrTCsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK04rIikpfCkiK0wrIipcXF0iLFA9IjooIitNKyIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitPKyIpKil8LiopXFwpfCkiLFE9bmV3IFJlZ0V4cChMKyIrIiwiZyIpLFI9bmV3IFJlZ0V4cCgiXiIrTCsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitMKyIrJCIsImciKSxTPW5ldyBSZWdFeHAoIl4iK0wrIiosIitMKyIqIiksVD1uZXcgUmVnRXhwKCJeIitMKyIqKFs+K35dfCIrTCsiKSIrTCsiKiIpLFU9bmV3IFJlZ0V4cCgiPSIrTCsiKihbXlxcXSdcIl0qPykiK0wrIipcXF0iLCJnIiksVj1uZXcgUmVnRXhwKFApLFc9bmV3IFJlZ0V4cCgiXiIrTisiJCIpLFg9e0lEOm5ldyBSZWdFeHAoIl4jKCIrTSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitNKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitNLnJlcGxhY2UoInciLCJ3KiIpKyIpIiksQVRUUjpuZXcgUmVnRXhwKCJeIitPKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrUCksQ0hJTEQ6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitMKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitMKyIqKD86KFsrLV18KSIrTCsiKihcXGQrKXwpKSIrTCsiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrSysiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK0wrIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrTCsiKigoPzotXFxkKT9cXGQqKSIrTCsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sWT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFo9L15oXGQkL2ksJD0vXltee10rXHtccypcW25hdGl2ZSBcdy8sXz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGFhPS9bK35dLyxiYT0vJ3xcXC9nLGNhPW5ldyBSZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrTCsiP3woIitMKyIpfC4pIiwiaWciKSxkYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9IjB4IitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sZWE9ZnVuY3Rpb24oKXttKCl9O3RyeXtILmFwcGx5KEU9SS5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxFW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGZhKXtIPXthcHBseTpFLmxlbmd0aD9mdW5jdGlvbihhLGIpe0cuYXBwbHkoYSxJLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBnYShhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHcseDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixkPWR8fFtdLGs9Yi5ub2RlVHlwZSwic3RyaW5nIiE9dHlwZW9mIGF8fCFhfHwxIT09ayYmOSE9PWsmJjExIT09aylyZXR1cm4gZDtpZighZSYmcCl7aWYoMTEhPT1rJiYoZj1fLmV4ZWMoYSkpKWlmKGo9ZlsxXSl7aWYoOT09PWspe2lmKGg9Yi5nZXRFbGVtZW50QnlJZChqKSwhaHx8IWgucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihoPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChqKSkmJnQoYixoKSYmaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGo9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9MSE9PWsmJmEsMT09PWsmJiJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtvPWcoYSksKHI9Yi5nZXRBdHRyaWJ1dGUoImlkIikpP3M9ci5yZXBsYWNlKGJhLCJcXCQmIik6Yi5zZXRBdHRyaWJ1dGUoImlkIixzKSxzPSJbaWQ9JyIrcysiJ10gIixsPW8ubGVuZ3RoO3doaWxlKGwtLSlvW2xdPXMrcmEob1tsXSk7dz1hYS50ZXN0KGEpJiZwYShiLnBhcmVudE5vZGUpfHxiLHg9by5qb2luKCIsIil9aWYoeCl0cnl7cmV0dXJuIEguYXBwbHkoZCx3LnF1ZXJ5U2VsZWN0b3JBbGwoeCkpLGR9Y2F0Y2goeSl7fWZpbmFsbHl7cnx8Yi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUiwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gaGEoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGlhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gamEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWEubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBsYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG9hKGEpe3JldHVybiBpYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHBhKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09Z2Euc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPWcuZG9jdW1lbnRFbGVtZW50LGU9Zy5kZWZhdWx0VmlldyxlJiZlIT09ZS50b3AmJihlLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGVhLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZWEpKSxwPSFmKGcpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKGcuY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPSQudGVzdChnLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFnLmdldEVsZW1lbnRzQnlOYW1lfHwhZy5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYyYmYy5wYXJlbnROb2RlP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYSxkYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaWQiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNhLGRhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoIioiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4gcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPSQudGVzdChnLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGphKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPSI8YSBpZD0nIit1KyInPjwvYT48c2VsZWN0IGlkPSciK3UrIi1cZl0nIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixhLnF1ZXJ5U2VsZWN0b3JBbGwoIlttc2FsbG93Y2FwdHVyZV49JyddIikubGVuZ3RoJiZxLnB1c2goIlsqXiRdPSIrTCsiKig/OicnfFwiXCIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RofHxxLnB1c2goIlxcWyIrTCsiKig/OnZhbHVlfCIrSysiKSIpLGEucXVlcnlTZWxlY3RvckFsbCgiW2lkfj0iK3UrIi1dIikubGVuZ3RofHxxLnB1c2goIn49IiksYS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8cS5wdXNoKCI6Y2hlY2tlZCIpLGEucXVlcnlTZWxlY3RvckFsbCgiYSMiK3UrIisqIikubGVuZ3RofHxxLnB1c2goIi4jLitbK35dIil9KSxqYShmdW5jdGlvbihhKXt2YXIgYj1nLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZSgibmFtZSIsIkQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoJiZxLnB1c2goIm5hbWUiK0wrIipbKl4kfCF+XT89IiksYS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aHx8cS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLGEucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpLHEucHVzaCgiLC4qOiIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj0kLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmphKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsImRpdiIpLHMuY2FsbChhLCJbcyE9JyddOngiKSxyLnB1c2goIiE9IixQKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKCJ8IikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKCJ8IikpLGI9JC50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8JC50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09Z3x8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1nfHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0ooayxhKS1KKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09Zz8tMTpiPT09Zz8xOmU/LTE6Zj8xOms/SihrLGEpLUooayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/bGEoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGcpOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLCI9JyQxJ10iKSwhKCFjLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fHImJnIudGVzdChiKXx8cSYmcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZ2EoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZ2EuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxnYS5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRC5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZ2EuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2EpfSxnYS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9Z2EuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPSIiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKCJzdHJpbmciPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWdhLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmlhLG1hdGNoOlgsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6ITB9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6ITB9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYSxkYSksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8IiIpLnJlcGxhY2UoY2EsZGEpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZnYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gWC5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNhLGRhKS50b0xvd2VyQ2FzZSgpO3JldHVybiIqIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErIiAiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cCgiKF58IitMKyIpIithKyIoIitMKyJ8JCkiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KCJzdHJpbmciPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHwidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1nYS5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/IiE9Ij09PWI6Yj8oZSs9IiIsIj0iPT09Yj9lPT09YzoiIT0iPT09Yj9lIT09YzoiXj0iPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOiIqPSI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMToiJD0iPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOiJ+PSI9PT1iPygiICIrZS5yZXBsYWNlKFEsIiAiKSsiICIpLmluZGV4T2YoYyk+LTE6Inw9Ij09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Im50aCIhPT1hLnNsaWNlKDAsMyksZz0ibGFzdCIhPT1hLnNsaWNlKC00KSxoPSJvZi10eXBlIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWg7aWYocSl7aWYoZil7d2hpbGUocCl7bD1iO3doaWxlKGw9bFtwXSlpZihoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXtrPXFbdV18fChxW3VdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sbT1qWzBdPT09dyYmalsyXSxsPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigxPT09bC5ub2RlVHlwZSYmKyttJiZsPT09Yil7a1thXT1bdyxuLG1dO2JyZWFrfX1lbHNlIGlmKHMmJihqPShiW3VdfHwoYlt1XT17fSkpW2FdKSYmalswXT09PXcpbT1qWzFdO2Vsc2Ugd2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSkmJisrbSYmKHMmJigobFt1XXx8KGxbdV09e30pKVthXT1bdyxtXSksbD09PWIpKWJyZWFrO3JldHVybiBtLT1lLG09PT1kfHxtJWQ9PT0wJiZtL2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShSLCIkMSIpKTtyZXR1cm4gZFt1XT9pYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2EoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoY2EsZGEpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBXLnRlc3QoYXx8IiIpfHxnYS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShjYSxkYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFoudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6b2EoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om9hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpvYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6b2EoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpvYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcWEoKXt9cWEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBxYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpeyghY3x8KGU9Uy5leGVjKGgpKSkmJihlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVQuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUiwiICIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVhbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9nYS5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHJhKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD0iIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gc2EoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmInBhcmVudE5vZGUiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaj1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGk9Ylt1XXx8KGJbdV09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGpbMl09aFsyXTtpZihpW2RdPWosalsyXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHRhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHVhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZ2EoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHZhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJighY3x8YyhmLGQsZSkpJiYoZy5wdXNoKGYpLGomJmIucHVzaChoKSk7cmV0dXJuIGd9ZnVuY3Rpb24gd2EoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9d2EoZCkpLGUmJiFlW3VdJiYoZT13YShlLGYpKSxpYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx1YShifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp2YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dmEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXZhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB4YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXNhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1zYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtzYSh0YShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gd2EoaT4xJiZ0YShtKSxpPjEmJnJhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUiwiJDEiKSxjLGU+aSYmeGEoYS5zbGljZShpLGUpKSxmPmUmJnhhKGE9YS5zbGljZShlKSksZj5lJiZyYShhKSl9bS5wdXNoKGMpfXJldHVybiB0YShtKX1mdW5jdGlvbiB5YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxtLG8scD0wLHE9IjAiLHI9ZiYmW10scz1bXSx0PWosdT1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1GLmNhbGwoaSkpO3M9dmEocyl9SC5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmdhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9pYShmKTpmfXJldHVybiBoPWdhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj14YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseWEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWdhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2EsZGEpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYSxkYSksYWEudGVzdChqWzBdLnR5cGUpJiZwYShiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcmEoaiksIWEpcmV0dXJuIEguYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWEudGVzdChhKSYmcGEoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoIiIpLnNvcnQoQikuam9pbigiIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWphKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KCJkaXYiKSl9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iLCIjIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKX0pfHxrYSgidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphLmdldEF0dHJpYnV0ZShiLCJ0eXBlIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9IjxpbnB1dC8+IixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpLCIiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgidmFsdWUiKX0pfHxrYSgidmFsdWUiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY3x8ImlucHV0IiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIil9KXx8a2EoSyxmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOmFbYl09PT0hMD9iLnRvTG93ZXJDYXNlKCk6KGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZC5zcGVjaWZpZWQ/ZC52YWx1ZTpudWxsfSksZ2F9KGEpO24uZmluZD10LG4uZXhwcj10LnNlbGVjdG9ycyxuLmV4cHJbIjoiXT1uLmV4cHIucHNldWRvcyxuLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsdj0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvLHc9L14uW146I1xbXC4sXSokLztmdW5jdGlvbiB4KGEsYixjKXtpZihuLmlzRnVuY3Rpb24oYikpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZigic3RyaW5nIj09dHlwZW9mIGIpe2lmKHcudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGcuY2FsbChiLGEpPj0wIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT0iOm5vdCgiK2ErIikiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP24uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bi5maW5kLm1hdGNoZXMoYSxuLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG4uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5sZW5ndGgsZD1bXSxlPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsInN0cmluZyI9PXR5cGVvZiBhJiZ1LnRlc3QoYSk/bihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciB5LHo9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBhKXtpZihjPSI8Ij09PWFbMF0mJiI+Ij09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgeS5yZWFkeT95LnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0EucHJvdG90eXBlPW4uZm4seT1uKGwpO3ZhciBCPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEM9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5leHRlbmQoe2RpcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmbihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9fSksbi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1uKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDtjPmE7YSsrKWlmKG4uY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz11LnRlc3QoYSl8fCJzdHJpbmciIT10eXBlb2YgYT9uKGEsYnx8dGhpcy5jb250ZXh0KTowO2U+ZDtkKyspZm9yKGM9dGhpc1tkXTtjJiZjIT09YjtjPWMucGFyZW50Tm9kZSlpZihjLm5vZGVUeXBlPDExJiYoZz9nLmluZGV4KGMpPi0xOjE9PT1jLm5vZGVUeXBlJiZuLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGMsYSkpKXtmLnB1c2goYyk7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYubGVuZ3RoPjE/bi51bmlxdWUoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhPyJzdHJpbmciPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLCJwYXJlbnROb2RlIixjKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gRChhLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSwibmV4dFNpYmxpbmciLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKChhLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8bi5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9bi5tYXAodGhpcyxiLGMpO3JldHVybiJVbnRpbCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmInN0cmluZyI9PXR5cGVvZiBkJiYoZT1uLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoQ1thXXx8bi51bmlxdWUoZSksQi50ZXN0KGEpJiZlLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEU9L1xTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPSJzdHJpbmciPT10eXBlb2YgYT9GW2FdfHxHKGEpOm4uZXh0ZW5kKHt9LGEpO3ZhciBiLGMsZCxlLGYsZyxoPVtdLGk9IWEub25jZSYmW10saj1mdW5jdGlvbihsKXtmb3IoYj1hLm1lbW9yeSYmbCxjPSEwLGc9ZXx8MCxlPTAsZj1oLmxlbmd0aCxkPSEwO2gmJmY+ZztnKyspaWYoaFtnXS5hcHBseShsWzBdLGxbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2Upe2I9ITE7YnJlYWt9ZD0hMSxoJiYoaT9pLmxlbmd0aCYmaihpLnNoaWZ0KCkpOmI/aD1bXTprLmRpc2FibGUoKSl9LGs9e2FkZDpmdW5jdGlvbigpe2lmKGgpe3ZhciBjPWgubGVuZ3RoOyFmdW5jdGlvbiBnKGIpe24uZWFjaChiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi50eXBlKGMpOyJmdW5jdGlvbiI9PT1kP2EudW5pcXVlJiZrLmhhcyhjKXx8aC5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bWyJyZXNvbHZlIiwiZG9uZSIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixuLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIixuLkNhbGxiYWNrcygibWVtb3J5IildXSxjPSJwZW5kaW5nIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdKyJXaXRoIl0odGhpcz09PWQ/Yy5wcm9taXNlKCk6dGhpcyxnP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/bi5leHRlbmQoYSxkKTpkfX0sZT17fTtyZXR1cm4gZC5waXBlPWQudGhlbixuLmVhY2goYixmdW5jdGlvbihhLGYpe3ZhciBnPWZbMl0saD1mWzNdO2RbZlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtjPWh9LGJbMV5hXVsyXS5kaXNhYmxlLGJbMl1bMl0ubG9jayksZVtmWzBdXT1mdW5jdGlvbigpe3JldHVybiBlW2ZbMF0rIldpdGgiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rIldpdGgiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoInJlYWR5IiksbihsKS5vZmYoInJlYWR5IikpKSl9fSk7ZnVuY3Rpb24gSSgpe2wucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixJLCExKSxuLnJlYWR5KCl9bi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGIpe3JldHVybiBIfHwoSD1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWwucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KG4ucmVhZHkpOihsLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsSSwhMSkpKSxILnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBKPW4uYWNjZXNzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYyluLmFjY2VzcyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxuLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobihhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfTtuLmFjY2VwdERhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfHw5PT09YS5ub2RlVHlwZXx8ISthLm5vZGVUeXBlfTtmdW5jdGlvbiBLKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY2FjaGU9e30sMCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319fSksdGhpcy5leHBhbmRvPW4uZXhwYW5kbytLLnVpZCsrfUsudWlkPTEsSy5hY2NlcHRzPW4uYWNjZXB0RGF0YSxLLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGEpe2lmKCFLLmFjY2VwdHMoYSkpcmV0dXJuIDA7dmFyIGI9e30sYz1hW3RoaXMuZXhwYW5kb107aWYoIWMpe2M9Sy51aWQrKzt0cnl7Ylt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLGIpfWNhdGNoKGQpe2JbdGhpcy5leHBhbmRvXT1jLG4uZXh0ZW5kKGEsYil9fXJldHVybiB0aGlzLmNhY2hlW2NdfHwodGhpcy5jYWNoZVtjXT17fSksY30sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMua2V5KGEpLGY9dGhpcy5jYWNoZVtlXTtpZigic3RyaW5nIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiYic3RyaW5nIj09dHlwZW9mIGImJnZvaWQgMD09PWM/KGQ9dGhpcy5nZXQoYSxiKSx2b2lkIDAhPT1kP2Q6dGhpcy5nZXQoYSxuLmNhbWVsQ2FzZShiKSkpOih0aGlzLnNldChhLGIsYyksdm9pZCAwIT09Yz9jOmIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzLmtleShhKSxnPXRoaXMuY2FjaGVbZl07aWYodm9pZCAwPT09Yil0aGlzLmNhY2hlW2ZdPXt9O2Vsc2V7bi5pc0FycmF5KGIpP2Q9Yi5jb25jYXQoYi5tYXAobi5jYW1lbENhc2UpKTooZT1uLmNhbWVsQ2FzZShiKSxiIGluIGc/ZD1bYixlXTooZD1lLGQ9ZCBpbiBnP1tkXTpkLm1hdGNoKEUpfHxbXSkpLGM9ZC5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBnW2RbY11dfX0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGEpe2FbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXX19O3ZhciBMPW5ldyBLLE09bmV3IEssTj0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLE89LyhbQS1aXSkvZztmdW5jdGlvbiBQKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXsKcmV0dXJuIE0uYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe00ucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTC5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe0wucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1NLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIUwuZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7TC5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe00uc2V0KHRoaXMsYSl9KTpKKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZD1uLmNhbWVsQ2FzZShhKTtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU0uZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPU0uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVAoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPU0uZ2V0KHRoaXMsZCk7TS5zZXQodGhpcyxkLGIpLC0xIT09YS5pbmRleE9mKCItIikmJnZvaWQgMCE9PWMmJk0uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtNLnJlbW92ZSh0aGlzLGEpfSl9fSksbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8ImZ4IikrInF1ZXVlIixkPUwuZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1MLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8ImZ4Ijt2YXIgYz1uLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW4uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bi5kZXF1ZXVlKGEsYil9OyJpbnByb2dyZXNzIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJigiZngiPT09YiYmYy51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YisicXVldWVIb29rcyI7cmV0dXJuIEwuZ2V0KGEsYyl8fEwuYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7TC5yZW1vdmUoYSxbYisicXVldWUiLGNdKX0pfSl9fSksbi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT0iZngiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLCJmeCI9PT1hJiYiaW5wcm9ncmVzcyIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTsic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8ImZ4Ijt3aGlsZShnLS0pYz1MLmdldChmW2ddLGErInF1ZXVlSG9va3MiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUT0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxSPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sUz1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09bi5jc3MoYSwiZGlzcGxheSIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9LFQ9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudCgiZGl2IikpLGM9bC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Muc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxjLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxjLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxiLmFwcGVuZENoaWxkKGMpLGsuY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIsay5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBVPSJ1bmRlZmluZWQiO2suZm9jdXNpbkJ1YmJsZXM9Im9uZm9jdXNpbiJpbiBhO3ZhciBWPS9ea2V5LyxXPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFg9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFk9L14oW14uXSopKD86XC4oLispfCkkLztmdW5jdGlvbiBaKCl7cmV0dXJuITB9ZnVuY3Rpb24gJCgpe3JldHVybiExfWZ1bmN0aW9uIF8oKXt0cnl7cmV0dXJuIGwuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiB0eXBlb2YgbiE9PVUmJm4uZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP24uZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fCIiKS5tYXRjaChFKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8mJihsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30saz1uLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZuLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbigiLiIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnLCExKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmhhc0RhdGEoYSkmJkwuZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEUpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9WS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyl7bD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbT1pW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK3Auam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksZz1mPW0ubGVuZ3RoO3doaWxlKGYtLSlrPW1bZl0sIWUmJnEhPT1rLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1rLmd1aWR8fGgmJiFoLnRlc3Qoay5uYW1lc3BhY2UpfHxkJiZkIT09ay5zZWxlY3RvciYmKCIqKiIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG4ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUgaVtvXSl9ZWxzZSBmb3IobyBpbiBpKW4uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bi5pc0VtcHR5T2JqZWN0KGkpJiYoZGVsZXRlIHIuaGFuZGxlLEwucmVtb3ZlKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoLGksayxtLG8scD1bZHx8bF0scT1qLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ai5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoZz1oPWQ9ZHx8bCwzIT09ZC5ub2RlVHlwZSYmOCE9PWQubm9kZVR5cGUmJiFYLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoIi4iKT49MCYmKHI9cS5zcGxpdCgiLiIpLHE9ci5zaGlmdCgpLHIuc29ydCgpKSxrPXEuaW5kZXhPZigiOiIpPDAmJiJvbiIrcSxiPWJbbi5leHBhbmRvXT9iOm5ldyBuLkV2ZW50KHEsIm9iamVjdCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1yLmpvaW4oIi4iKSxiLm5hbWVzcGFjZV9yZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIityLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZCksYz1udWxsPT1jP1tiXTpuLm1ha2VBcnJheShjLFtiXSksbz1uLmV2ZW50LnNwZWNpYWxbcV18fHt9LGV8fCFvLnRyaWdnZXJ8fG8udHJpZ2dlci5hcHBseShkLGMpIT09ITEpKXtpZighZSYmIW8ubm9CdWJibGUmJiFuLmlzV2luZG93KGQpKXtmb3IoaT1vLmRlbGVnYXRlVHlwZXx8cSxYLnRlc3QoaStxKXx8KGc9Zy5wYXJlbnROb2RlKTtnO2c9Zy5wYXJlbnROb2RlKXAucHVzaChnKSxoPWc7aD09PShkLm93bmVyRG9jdW1lbnR8fGwpJiZwLnB1c2goaC5kZWZhdWx0Vmlld3x8aC5wYXJlbnRXaW5kb3d8fGEpfWY9MDt3aGlsZSgoZz1wW2YrK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1mPjE/aTpvLmJpbmRUeXBlfHxxLG09KEwuZ2V0KGcsImV2ZW50cyIpfHx7fSlbYi50eXBlXSYmTC5nZXQoZywiaGFuZGxlIiksbSYmbS5hcHBseShnLGMpLG09ayYmZ1trXSxtJiZtLmFwcGx5JiZuLmFjY2VwdERhdGEoZykmJihiLnJlc3VsdD1tLmFwcGx5KGcsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZXx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFuLmFjY2VwdERhdGEoZCl8fGsmJm4uaXNGdW5jdGlvbihkW3FdKSYmIW4uaXNXaW5kb3coZCkmJihoPWRba10saCYmKGRba109bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cSxkW3FdKCksbi5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGgmJihkW2tdPWgpKSxiLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bi5ldmVudC5maXgoYSk7dmFyIGIsYyxlLGYsZyxoPVtdLGk9ZC5jYWxsKGFyZ3VtZW50cyksaj0oTC5nZXQodGhpcywiZXZlbnRzIil8fHt9KVthLnR5cGVdfHxbXSxrPW4uZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtpZihpWzBdPWEsYS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxhKSE9PSExKXtoPW4uZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEsaiksYj0wO3doaWxlKChmPWhbYisrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1mLmVsZW0sYz0wO3doaWxlKChnPWYuaGFuZGxlcnNbYysrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFhLm5hbWVzcGFjZV9yZXx8YS5uYW1lc3BhY2VfcmUudGVzdChnLm5hbWVzcGFjZSkpJiYoYS5oYW5kbGVPYmo9ZyxhLmRhdGE9Zy5kYXRhLGU9KChuLmV2ZW50LnNwZWNpYWxbZy5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGcuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWUmJihhLnJlc3VsdD1lKT09PSExJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxhKSxhLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz1bXSxoPWIuZGVsZWdhdGVDb3VudCxpPWEudGFyZ2V0O2lmKGgmJmkubm9kZVR5cGUmJighYS5idXR0b258fCJjbGljayIhPT1hLnR5cGUpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoaS5kaXNhYmxlZCE9PSEwfHwiY2xpY2siIT09YS50eXBlKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+PTA6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1iLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoYz1hLnRhcmdldC5vd25lckRvY3VtZW50fHxsLGQ9Yy5kb2N1bWVudEVsZW1lbnQsZT1jLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGQmJmQuc2Nyb2xsTGVmdHx8ZSYmZS5zY3JvbGxMZWZ0fHwwKS0oZCYmZC5jbGllbnRMZWZ0fHxlJiZlLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhkJiZkLnNjcm9sbFRvcHx8ZSYmZS5zY3JvbGxUb3B8fDApLShkJiZkLmNsaWVudFRvcHx8ZSYmZS5jbGllbnRUb3B8fDApKSxhLndoaWNofHx2b2lkIDA9PT1mfHwoYS53aGljaD0xJmY/MToyJmY/Mzo0JmY/MjowKSxhfX0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbi5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGQsZT1hLnR5cGUsZj1hLGc9dGhpcy5maXhIb29rc1tlXTtnfHwodGhpcy5maXhIb29rc1tlXT1nPVcudGVzdChlKT90aGlzLm1vdXNlSG9va3M6Vi50ZXN0KGUpP3RoaXMua2V5SG9va3M6e30pLGQ9Zy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChnLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZiksYj1kLmxlbmd0aDt3aGlsZShiLS0pYz1kW2JdLGFbY109ZltjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1sKSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxnLmZpbHRlcj9nLmZpbHRlcihhLGYpOmF9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09XygpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09XygpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJm4ubm9kZU5hbWUodGhpcywiaW5wdXQiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBuLm5vZGVOYW1lKGEudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmV4dGVuZChuZXcgbi5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/bi5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTpuLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxuLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSxuLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9aOiQpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOiQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6JCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDokLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVosYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxuLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKGEsYil7bi5ldmVudC5zcGVjaWFsW2FdPXtkZWxlZ2F0ZVR5cGU6YixiaW5kVHlwZTpiLGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYyxkPXRoaXMsZT1hLnJlbGF0ZWRUYXJnZXQsZj1hLmhhbmRsZU9iajtyZXR1cm4oIWV8fGUhPT1kJiYhbi5jb250YWlucyhkLGUpKSYmKGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksay5mb2N1c2luQnViYmxlc3x8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSwhMCl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLEwuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKS0xO2U/TC5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLnJlbW92ZShkLGIpKX19fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztpZigib2JqZWN0Ij09dHlwZW9mIGEpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGcgaW4gYSl0aGlzLm9uKGcsYixjLGFbZ10sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJigic3RyaW5nIj09dHlwZW9mIGI/KGQ9YyxjPXZvaWQgMCk6KGQ9YyxjPWIsYj12b2lkIDApKSxkPT09ITEpZD0kO2Vsc2UgaWYoIWQpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1lJiYoZj1kLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oKS5vZmYoYSksZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQuZ3VpZD1mLmd1aWR8fChmLmd1aWQ9bi5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LmFkZCh0aGlzLGEsZCxjLGIpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbihhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZSsiLiIrZC5uYW1lc3BhY2U6ZC5vcmlnVHlwZSxkLnNlbGVjdG9yLGQuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fCJmdW5jdGlvbiI9PXR5cGVvZiBiKSYmKGM9YixiPXZvaWQgMCksYz09PSExJiYoYz0kKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP24uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO3ZhciBhYT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpLGJhPS88KFtcdzpdKykvLGNhPS88fCYjP1x3KzsvLGRhPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksZWE9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksZmE9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdhPS9edHJ1ZVwvKC4qKS8saGE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLGlhPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07aWEub3B0Z3JvdXA9aWEub3B0aW9uLGlhLnRib2R5PWlhLnRmb290PWlhLmNvbGdyb3VwPWlhLmNhcHRpb249aWEudGhlYWQsaWEudGg9aWEudGQ7ZnVuY3Rpb24gamEoYSxiKXtyZXR1cm4gbi5ub2RlTmFtZShhLCJ0YWJsZSIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCwidHIiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTphfWZ1bmN0aW9uIGthKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gbGEoYSl7dmFyIGI9Z2EuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBtYShhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylMLnNldChhW2NdLCJnbG9iYWxFdmFsIiwhYnx8TC5nZXQoYltjXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBuYShhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKEwuaGFzRGF0YShhKSYmKGY9TC5hY2Nlc3MoYSksZz1MLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7ZD5jO2MrKyluLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9TS5oYXNEYXRhKGEpJiYoaD1NLmFjY2VzcyhhKSxpPW4uZXh0ZW5kKHt9LGgpLE0uc2V0KGIsaSkpfX1mdW5jdGlvbiBvYShhLGIpe3ZhciBjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOmEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8IioiKTpbXTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbi5ub2RlTmFtZShhLGIpP24ubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gcGEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PWMmJlQudGVzdChhLnR5cGUpP2IuY2hlY2tlZD1hLmNoZWNrZWQ6KCJpbnB1dCI9PT1jfHwidGV4dGFyZWEiPT09YykmJihiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9bi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoay5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bi5pc1hNTERvYyhhKSkpZm9yKGc9b2EoaCksZj1vYShhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXBhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG9hKGEpLGc9Z3x8b2EoaCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyluYShmW2RdLGdbZF0pO2Vsc2UgbmEoYSxoKTtyZXR1cm4gZz1vYShoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZtYShnLCFpJiZvYShhLCJzY3JpcHQiKSksaH0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGs9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD1bXSxtPTAsbz1hLmxlbmd0aDtvPm07bSsrKWlmKGU9YVttXSxlfHwwPT09ZSlpZigib2JqZWN0Ij09PW4udHlwZShlKSluLm1lcmdlKGwsZS5ub2RlVHlwZT9bZV06ZSk7ZWxzZSBpZihjYS50ZXN0KGUpKXtmPWZ8fGsuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksZz0oYmEuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSxoPWlhW2ddfHxpYS5fZGVmYXVsdCxmLmlubmVySFRNTD1oWzFdK2UucmVwbGFjZShhYSwiPCQxPjwvJDI+IikraFsyXSxqPWhbMF07d2hpbGUoai0tKWY9Zi5sYXN0Q2hpbGQ7bi5tZXJnZShsLGYuY2hpbGROb2RlcyksZj1rLmZpcnN0Q2hpbGQsZi50ZXh0Q29udGVudD0iIn1lbHNlIGwucHVzaChiLmNyZWF0ZVRleHROb2RlKGUpKTtrLnRleHRDb250ZW50PSIiLG09MDt3aGlsZShlPWxbbSsrXSlpZigoIWR8fC0xPT09bi5pbkFycmF5KGUsZCkpJiYoaT1uLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKSxmPW9hKGsuYXBwZW5kQ2hpbGQoZSksInNjcmlwdCIpLGkmJm1hKGYpLGMpKXtqPTA7d2hpbGUoZT1mW2orK10pZmEudGVzdChlLnR5cGV8fCIiKSYmYy5wdXNoKGUpfXJldHVybiBrfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlLGY9bi5ldmVudC5zcGVjaWFsLGc9MDt2b2lkIDAhPT0oYz1hW2ddKTtnKyspe2lmKG4uYWNjZXB0RGF0YShjKSYmKGU9Y1tMLmV4cGFuZG9dLGUmJihiPUwuY2FjaGVbZV0pKSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZltkXT9uLmV2ZW50LnJlbW92ZShjLGQpOm4ucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtMLmNhY2hlW2VdJiZkZWxldGUgTC5jYWNoZVtlXX1kZWxldGUgTS5jYWNoZVtjW00uZXhwYW5kb11dfX19KSxuLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJih0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWphKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9uLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bi5jbGVhbkRhdGEob2EoYykpLGMucGFyZW50Tm9kZSYmKGImJm4uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZtYShvYShjLCJzY3JpcHQiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9hKGEsITEpKSxhLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIWRhLnRlc3QoYSkmJiFpYVsoYmEuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKGFhLCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYShiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbi5jbGVhbkRhdGEob2EodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG09dGhpcyxvPWwtMSxwPWFbMF0scT1uLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiYic3RyaW5nIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJmVhLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1tLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoYz1uLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksZD1jLmZpcnN0Q2hpbGQsMT09PWMuY2hpbGROb2Rlcy5sZW5ndGgmJihjPWQpLGQpKXtmb3IoZj1uLm1hcChvYShjLCJzY3JpcHQiKSxrYSksZz1mLmxlbmd0aDtsPmo7aisrKWg9YyxqIT09byYmKGg9bi5jbG9uZShoLCEwLCEwKSxnJiZuLm1lcmdlKGYsb2EoaCwic2NyaXB0IikpKSxiLmNhbGwodGhpc1tqXSxoLGopO2lmKGcpZm9yKGk9ZltmLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGYsbGEpLGo9MDtnPmo7aisrKWg9ZltqXSxmYS50ZXN0KGgudHlwZXx8IiIpJiYhTC5hY2Nlc3MoaCwiZ2xvYmFsRXZhbCIpJiZuLmNvbnRhaW5zKGksaCkmJihoLnNyYz9uLl9ldmFsVXJsJiZuLl9ldmFsVXJsKGguc3JjKTpuLmdsb2JhbEV2YWwoaC50ZXh0Q29udGVudC5yZXBsYWNlKGhhLCIiKSkpfXJldHVybiB0aGlzfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW4oYSksZz1lLmxlbmd0aC0xLGg9MDtnPj1oO2grKyljPWg9PT1nP3RoaXM6dGhpcy5jbG9uZSghMCksbihlW2hdKVtiXShjKSxmLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciBxYSxyYT17fTtmdW5jdGlvbiBzYShiLGMpe3ZhciBkLGU9bihjLmNyZWF0ZUVsZW1lbnQoYikpLmFwcGVuZFRvKGMuYm9keSksZj1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYoZD1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGVbMF0pKT9kLmRpc3BsYXk6bi5jc3MoZVswXSwiZGlzcGxheSIpO3JldHVybiBlLmRldGFjaCgpLGZ9ZnVuY3Rpb24gdGEoYSl7dmFyIGI9bCxjPXJhW2FdO3JldHVybiBjfHwoYz1zYShhLGIpLCJub25lIiE9PWMmJmN8fChxYT0ocWF8fG4oIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz4iKSkuYXBwZW5kVG8oYi5kb2N1bWVudEVsZW1lbnQpLGI9cWFbMF0uY29udGVudERvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1zYShhLGIpLHFhLmRldGFjaCgpKSxyYVthXT1jKSxjfXZhciB1YT0vXm1hcmdpbi8sdmE9bmV3IFJlZ0V4cCgiXigiK1ErIikoPyFweClbYS16JV0rJCIsImkiKSx3YT1mdW5jdGlvbihiKXtyZXR1cm4gYi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lm9wZW5lcj9iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmEuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfTtmdW5jdGlvbiB4YShhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fHdhKGEpLGMmJihnPWMuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXSksYyYmKCIiIT09Z3x8bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW4uc3R5bGUoYSxiKSksdmEudGVzdChnKSYmdWEudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nKyIiOmd9ZnVuY3Rpb24geWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19IWZ1bmN0aW9uKCl7dmFyIGIsYyxkPWwuZG9jdW1lbnRFbGVtZW50LGU9bC5jcmVhdGVFbGVtZW50KCJkaXYiKSxmPWwuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoZi5zdHlsZSl7Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGYuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixrLmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxlLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixlLmFwcGVuZENoaWxkKGYpO2Z1bmN0aW9uIGcoKXtmLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlIixmLmlubmVySFRNTD0iIixkLmFwcGVuZENoaWxkKGUpO3ZhciBnPWEuZ2V0Q29tcHV0ZWRTdHlsZShmLG51bGwpO2I9IjElIiE9PWcudG9wLGM9IjRweCI9PT1nLndpZHRoLGQucmVtb3ZlQ2hpbGQoZSl9YS5nZXRDb21wdXRlZFN0eWxlJiZuLmV4dGVuZChrLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxifSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZnKCksY30scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciBiLGM9Zi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyZXR1cm4gYy5zdHlsZS5jc3NUZXh0PWYuc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9IjAiLGYuc3R5bGUud2lkdGg9IjFweCIsZC5hcHBlbmRDaGlsZChlKSxiPSFwYXJzZUZsb2F0KGEuZ2V0Q29tcHV0ZWRTdHlsZShjLG51bGwpLm1hcmdpblJpZ2h0KSxkLnJlbW92ZUNoaWxkKGUpLGYucmVtb3ZlQ2hpbGQoYyksYn19KX19KCksbi5zd2FwPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfTt2YXIgemE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLEFhPW5ldyBSZWdFeHAoIl4oIitRKyIpKC4qKSQiLCJpIiksQmE9bmV3IFJlZ0V4cCgiXihbKy1dKT0oIitRKyIpIiwiaSIpLENhPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxEYT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sRWE9WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXTtmdW5jdGlvbiBGYShhLGIpe2lmKGIgaW4gYSlyZXR1cm4gYjt2YXIgYz1iWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1FYS5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9RWFbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gR2EoYSxiLGMpe3ZhciBkPUFhLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzFdLShjfHwwKSkrKGRbMl18fCJweCIpOmJ9ZnVuY3Rpb24gSGEoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKSJtYXJnaW4iPT09YyYmKGcrPW4uY3NzKGEsYytSW2ZdLCEwLGUpKSxkPygiY29udGVudCI9PT1jJiYoZy09bi5jc3MoYSwicGFkZGluZyIrUltmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09bi5jc3MoYSwiYm9yZGVyIitSW2ZdKyJXaWR0aCIsITAsZSkpKTooZys9bi5jc3MoYSwicGFkZGluZyIrUltmXSwhMCxlKSwicGFkZGluZyIhPT1jJiYoZys9bi5jc3MoYSwiYm9yZGVyIitSW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBJYShhLGIsYyl7dmFyIGQ9ITAsZT0id2lkdGgiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9d2EoYSksZz0iYm9yZGVyLWJveCI9PT1uLmNzcyhhLCJib3hTaXppbmciLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9eGEoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSx2YS50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGsuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStIYShhLGIsY3x8KGc/ImJvcmRlciI6ImNvbnRlbnQiKSxkLGYpKyJweCJ9ZnVuY3Rpb24gSmEoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109TC5nZXQoZCwib2xkZGlzcGxheSIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fCJub25lIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9IiIpLCIiPT09ZC5zdHlsZS5kaXNwbGF5JiZTKGQpJiYoZltnXT1MLmFjY2VzcyhkLCJvbGRkaXNwbGF5Iix0YShkLm5vZGVOYW1lKSkpKTooZT1TKGQpLCJub25lIj09PWMmJmV8fEwuc2V0KGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfW4uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9eGEoYSwib3BhY2l0eSIpO3JldHVybiIiPT09Yz8iMSI6Y319fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7ImZsb2F0IjoiY3NzRmxvYXQifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYShpLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sdm9pZCAwPT09Yz9nJiYiZ2V0ImluIGcmJnZvaWQgMCE9PShlPWcuZ2V0KGEsITEsZCkpP2U6aVtiXTooZj10eXBlb2YgYywic3RyaW5nIj09PWYmJihlPUJhLmV4ZWMoYykpJiYoYz0oZVsxXSsxKSplWzJdK3BhcnNlRmxvYXQobi5jc3MoYSxiKSksZj0ibnVtYmVyIiksbnVsbCE9YyYmYz09PWMmJigibnVtYmVyIiE9PWZ8fG4uY3NzTnVtYmVyW2hdfHwoYys9InB4Iiksay5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLGcmJiJzZXQiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmEoYS5zdHlsZSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLGcmJiJnZXQiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9eGEoYSxiLGQpKSwibm9ybWFsIj09PWUmJmIgaW4gRGEmJihlPURhW2JdKSwiIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fG4uaXNOdW1lcmljKGYpP2Z8fDA6ZSk6ZX19KSxuLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz96YS50ZXN0KG4uY3NzKGEsImRpc3BsYXkiKSkmJjA9PT1hLm9mZnNldFdpZHRoP24uc3dhcChhLENhLGZ1bmN0aW9uKCl7cmV0dXJuIElhKGEsYixkKX0pOklhKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCYmd2EoYSk7cmV0dXJuIEdhKGEsYyxkP0hhKGEsYixkLCJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZSksZSk6MCl9fX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9eWEoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bi5zd2FwKGEse2Rpc3BsYXk6ImlubGluZS1ibG9jayJ9LHhhLFthLCJtYXJnaW5SaWdodCJdKTp2b2lkIDB9KSxuLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYStiXT17ZXhwYW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgZD0wLGU9e30sZj0ic3RyaW5nIj09dHlwZW9mIGM/Yy5zcGxpdCgiICIpOltjXTs0PmQ7ZCsrKWVbYStSW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LHVhLnRlc3QoYSl8fChuLmNzc0hvb2tzW2ErYl0uc2V0PUdhKX0pLG4uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG4uaXNBcnJheShiKSl7Zm9yKGQ9d2EoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09bi5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP24uc3R5bGUoYSxiLGMpOm4uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEphKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEphKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe1ModGhpcyk/bih0aGlzKS5zaG93KCk6bih0aGlzKS5oaWRlKCl9KX19KTtmdW5jdGlvbiBLYShhLGIsYyxkLGUpe3JldHVybiBuZXcgS2EucHJvdG90eXBlLmluaXQoYSxiLGMsZCxlKX1uLlR3ZWVuPUthLEthLnByb3RvdHlwZT17Y29uc3RydWN0b3I6S2EsaW5pdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5lbGVtPWEsdGhpcy5wcm9wPWMsdGhpcy5lYXNpbmc9ZXx8InN3aW5nIix0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1LYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6S2EucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9S2EucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPW4uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpLYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxLYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9S2EucHJvdG90eXBlLEthLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbnVsbD09YS5lbGVtW2EucHJvcF18fGEuZWxlbS5zdHlsZSYmbnVsbCE9YS5lbGVtLnN0eWxlW2EucHJvcF0/KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV18fG4uY3NzSG9va3NbYS5wcm9wXSk/bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sS2EucHJvcEhvb2tzLnNjcm9sbFRvcD1LYS5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxuLmZ4PUthLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgTGEsTWEsTmE9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLE9hPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitRKyIpKFthLXolXSopJCIsImkiKSxQYT0vcXVldWVIb29rcyQvLFFhPVtWYV0sUmE9eyIqIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYiksZD1jLmN1cigpLGU9T2EuZXhlYyhiKSxmPWUmJmVbM118fChuLmNzc051bWJlclthXT8iIjoicHgiKSxnPShuLmNzc051bWJlclthXXx8InB4IiE9PWYmJitkKSYmT2EuZXhlYyhuLmNzcyhjLmVsZW0sYSkpLGg9MSxpPTIwO2lmKGcmJmdbM10hPT1mKXtmPWZ8fGdbM10sZT1lfHxbXSxnPStkfHwxO2RvIGg9aHx8Ii41IixnLz1oLG4uc3R5bGUoYy5lbGVtLGEsZytmKTt3aGlsZShoIT09KGg9Yy5jdXIoKS9kKSYmMSE9PWgmJi0taSl9cmV0dXJuIGUmJihnPWMuc3RhcnQ9K2d8fCtkfHwwLGMudW5pdD1mLGMuZW5kPWVbMV0/ZysoZVsxXSsxKSplWzJdOitlWzJdKSxjfV19O2Z1bmN0aW9uIFNhKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtMYT12b2lkIDB9KSxMYT1uLm5vdygpfWZ1bmN0aW9uIFRhKGEsYil7dmFyIGMsZD0wLGU9e2hlaWdodDphfTtmb3IoYj1iPzE6MDs0PmQ7ZCs9Mi1iKWM9UltkXSxlWyJtYXJnaW4iK2NdPWVbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIFVhKGEsYixjKXtmb3IodmFyIGQsZT0oUmFbYl18fFtdKS5jb25jYXQoUmFbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gVmEoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD10aGlzLG09e30sbz1hLnN0eWxlLHA9YS5ub2RlVHlwZSYmUyhhKSxxPUwuZ2V0KGEsImZ4c2hvdyIpO2MucXVldWV8fChoPW4uX3F1ZXVlSG9va3MoYSwiZngiKSxudWxsPT1oLnVucXVldWVkJiYoaC51bnF1ZXVlZD0wLGk9aC5lbXB0eS5maXJlLGguZW1wdHkuZmlyZT1mdW5jdGlvbigpe2gudW5xdWV1ZWR8fGkoKX0pLGgudW5xdWV1ZWQrKyxsLmFsd2F5cyhmdW5jdGlvbigpe2wuYWx3YXlzKGZ1bmN0aW9uKCl7aC51bnF1ZXVlZC0tLG4ucXVldWUoYSwiZngiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJigiaGVpZ2h0ImluIGJ8fCJ3aWR0aCJpbiBiKSYmKGMub3ZlcmZsb3c9W28ub3ZlcmZsb3csby5vdmVyZmxvd1gsby5vdmVyZmxvd1ldLGo9bi5jc3MoYSwiZGlzcGxheSIpLGs9Im5vbmUiPT09aj9MLmdldChhLCJvbGRkaXNwbGF5Iil8fHRhKGEubm9kZU5hbWUpOmosImlubGluZSI9PT1rJiYibm9uZSI9PT1uLmNzcyhhLCJmbG9hdCIpJiYoby5kaXNwbGF5PSJpbmxpbmUtYmxvY2siKSksYy5vdmVyZmxvdyYmKG8ub3ZlcmZsb3c9ImhpZGRlbiIsbC5hbHdheXMoZnVuY3Rpb24oKXtvLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0sby5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxvLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLE5hLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocD8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXF8fHZvaWQgMD09PXFbZF0pY29udGludWU7cD0hMH1tW2RdPXEmJnFbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChtKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP3RhKGEubm9kZU5hbWUpOmopJiYoby5kaXNwbGF5PWopO2Vsc2V7cT8iaGlkZGVuImluIHEmJihwPXEuaGlkZGVuKTpxPUwuYWNjZXNzKGEsImZ4c2hvdyIse30pLGYmJihxLmhpZGRlbj0hcCkscD9uKGEpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXtuKGEpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciBiO0wucmVtb3ZlKGEsImZ4c2hvdyIpO2ZvcihiIGluIG0pbi5zdHlsZShhLGIsbVtiXSl9KTtmb3IoZCBpbiBtKWc9VWEocD9xW2RdOjAsZCxsKSxkIGluIHF8fChxW2RdPWcuc3RhcnQscCYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD0id2lkdGgiPT09ZHx8ImhlaWdodCI9PT1kPzE6MCkpfX1mdW5jdGlvbiBXYShhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPW4uY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sbi5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1uLmNzc0hvb2tzW2RdLGcmJiJleHBhbmQiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIFhhKGEsYixjKXt2YXIgZCxlLGY9MCxnPVFhLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPUxhfHxTYSgpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6TGF8fFNhKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1uLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihXYShrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9UWFbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBuLm1hcChrLFVhLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoWGEse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEuc3BsaXQoIiAiKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyljPWFbZF0sUmFbY109UmFbY118fFtdLFJhW2NdLnVuc2hpZnQoYil9LHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/UWEudW5zaGlmdChhKTpRYS5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PWQucXVldWV8fGQucXVldWU9PT0hMCkmJihkLnF1ZXVlPSJmeCIpLGQub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbigpe24uaXNGdW5jdGlvbihkLm9sZCkmJmQub2xkLmNhbGwodGhpcyksZC5xdWV1ZSYmbi5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSl9LGR9LG4uZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKFMpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uaXNFbXB0eU9iamVjdChhKSxmPW4uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1YYSh0aGlzLG4uZXh0ZW5kKHt9LGEpLGYpOyhlfHxMLmdldCh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9TC5nZXQodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmUGEudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTsoYnx8IWMpJiZuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1MLmdldCh0aGlzKSxkPWNbYSsicXVldWUiXSxlPWNbYSsicXVldWVIb29rcyJdLGY9bi50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLG4ucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2c+YjtiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksbi5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihhLGIpe3ZhciBjPW4uZm5bYl07bi5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fCJib29sZWFuIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKFRhKGIsITApLGEsZCxlKX19KSxuLmVhY2goe3NsaWRlRG93bjpUYSgic2hvdyIpLHNsaWRlVXA6VGEoImhpZGUiKSxzbGlkZVRvZ2dsZTpUYSgidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksbi50aW1lcnM9W10sbi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9bi50aW1lcnM7Zm9yKExhPW4ubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8bi5meC5zdG9wKCksTGE9dm9pZCAwfSxuLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe24udGltZXJzLnB1c2goYSksYSgpP24uZnguc3RhcnQoKTpuLnRpbWVycy5wb3AoKX0sbi5meC5pbnRlcnZhbD0xMyxuLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7TWF8fChNYT1zZXRJbnRlcnZhbChuLmZ4LnRpY2ssbi5meC5pbnRlcnZhbCkpfSxuLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKE1hKSxNYT1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bi5meD9uLmZ4LnNwZWVkc1thXXx8YTphLGI9Ynx8ImZ4Iix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiPWwuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksYz1iLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2EudHlwZT0iY2hlY2tib3giLGsuY2hlY2tPbj0iIiE9PWEudmFsdWUsay5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGIuZGlzYWJsZWQ9ITAsay5vcHREaXNhYmxlZD0hYy5kaXNhYmxlZCxhPWwuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhLnZhbHVlPSJ0IixhLnR5cGU9InJhZGlvIixrLnJhZGlvVmFsdWU9InQiPT09YS52YWx1ZX0oKTt2YXIgWWEsWmEsJGE9bi5leHByLmF0dHJIYW5kbGU7bi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09VT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP1phOllhKSksCnZvaWQgMD09PWM/ZCYmImdldCJpbiBkJiZudWxsIT09KGU9ZC5nZXQoYSxiKSk/ZTooZT1uLmZpbmQuYXR0cihhLGIpLG51bGw9PWU/dm9pZCAwOmUpOm51bGwhPT1jP2QmJiJzZXQiaW4gZCYmdm9pZCAwIT09KGU9ZC5zZXQoYSxjLGIpKT9lOihhLnNldEF0dHJpYnV0ZShiLGMrIiIpLGMpOnZvaWQgbi5yZW1vdmVBdHRyKGEsYikpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEUpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighay5yYWRpb1ZhbHVlJiYicmFkaW8iPT09YiYmbi5ub2RlTmFtZShhLCJpbnB1dCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZSgidHlwZSIsYiksYyYmKGEudmFsdWU9YyksYn19fX19KSxaYT17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPSRhW2JdfHxuLmZpbmQuYXR0cjskYVtiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9JGFbYl0sJGFbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLCRhW2JdPWYpLGV9fSk7dmFyIF9hPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7bi5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbbi5wcm9wRml4W2FdfHxhXX0pfX0pLG4uZXh0ZW5kKHtwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YS5ub2RlVHlwZTtpZihhJiYzIT09ZyYmOCE9PWcmJjIhPT1nKXJldHVybiBmPTEhPT1nfHwhbi5pc1hNTERvYyhhKSxmJiYoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKCJ0YWJpbmRleCIpfHxfYS50ZXN0KGEubm9kZU5hbWUpfHxhLmhyZWY/YS50YWJJbmRleDotMX19fX0pLGsub3B0U2VsZWN0ZWR8fChuLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhYj0vW1x0XHJcblxmXS9nO24uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0ic3RyaW5nIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHwiIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oIiAiK2MuY2xhc3NOYW1lKyIgIikucmVwbGFjZShhYiwiICIpOiIgIikpe2Y9MDt3aGlsZShlPWJbZisrXSlkLmluZGV4T2YoIiAiK2UrIiAiKTwwJiYoZCs9ZSsiICIpO2c9bi50cmltKGQpLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wPT09YXJndW1lbnRzLmxlbmd0aHx8InN0cmluZyI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8IiIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KCIgIitjLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoYWIsIiAiKToiIikpe2Y9MDt3aGlsZShlPWJbZisrXSl3aGlsZShkLmluZGV4T2YoIiAiK2UrIiAiKT49MClkPWQucmVwbGFjZSgiICIrZSsiICIsIiAiKTtnPWE/bi50cmltKGQpOiIiLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVybiJib29sZWFuIj09dHlwZW9mIGImJiJzdHJpbmciPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTp0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGMpe24odGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyx0aGlzLmNsYXNzTmFtZSxiKSxiKX06ZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PWMpe3ZhciBiLGQ9MCxlPW4odGhpcyksZj1hLm1hdGNoKEUpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlKGM9PT1VfHwiYm9vbGVhbiI9PT1jKSYmKHRoaXMuY2xhc3NOYW1lJiZMLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT8iIjpMLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXtmb3IodmFyIGI9IiAiK2ErIiAiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJigiICIrdGhpc1tjXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKGFiLCIgIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYmI9L1xyL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGJiLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9InNlbGVjdC1vbmUiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwoay5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSl8fGMucGFyZW50Tm9kZS5kaXNhYmxlZCYmbi5ub2RlTmFtZShjLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KGQudmFsdWUsZik+PTApJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT49MDp2b2lkIDB9fSxrLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSksbi5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLCIqKiIpOnRoaXMub2ZmKGIsYXx8IioqIixjKX19KTt2YXIgY2I9bi5ub3coKSxkYj0vXD8vO24ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErIiIpfSxuLnBhcnNlWE1MPWZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoIWF8fCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gbnVsbDt0cnl7Yz1uZXcgRE9NUGFyc2VyLGI9Yy5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKX1jYXRjaChkKXtiPXZvaWQgMH1yZXR1cm4oIWJ8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmbi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYSksYn07dmFyIGViPS8jLiokLyxmYj0vKFs/Jl0pXz1bXiZdKi8sZ2I9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxoYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxpYj0vXig/OkdFVHxIRUFEKSQvLGpiPS9eXC9cLy8sa2I9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sbGI9e30sbWI9e30sbmI9IiovIi5jb25jYXQoIioiKSxvYj1hLmxvY2F0aW9uLmhyZWYscGI9a2IuZXhlYyhvYi50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gcWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7InN0cmluZyIhPXR5cGVvZiBiJiYoYz1iLGI9IioiKTt2YXIgZCxlPTAsZj1iLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFtdO2lmKG4uaXNGdW5jdGlvbihjKSl3aGlsZShkPWZbZSsrXSkiKyI9PT1kWzBdPyhkPWQuc2xpY2UoMSl8fCIqIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIHJiKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PW1iO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsbi5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBqfHxmfHxlW2pdP2Y/IShpPWopOnZvaWQgMDooYi5kYXRhVHlwZXMudW5zaGlmdChqKSxnKGopLCExKX0pLGl9cmV0dXJuIGcoYi5kYXRhVHlwZXNbMF0pfHwhZVsiKiJdJiZnKCIqIil9ZnVuY3Rpb24gc2IoYSxiKXt2YXIgYyxkLGU9bi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKChlW2NdP2E6ZHx8KGQ9e30pKVtjXT1iW2NdKTtyZXR1cm4gZCYmbi5leHRlbmQoITAsYSxkKSxhfWZ1bmN0aW9uIHRiKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZSgiKiI9PT1pWzBdKWkuc2hpZnQoKSx2b2lkIDA9PT1kJiYoZD1hLm1pbWVUeXBlfHxiLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYoZClmb3IoZSBpbiBoKWlmKGhbZV0mJmhbZV0udGVzdChkKSl7aS51bnNoaWZ0KGUpO2JyZWFrfWlmKGlbMF1pbiBjKWY9aVswXTtlbHNle2ZvcihlIGluIGMpe2lmKCFpWzBdfHxhLmNvbnZlcnRlcnNbZSsiICIraVswXV0pe2Y9ZTticmVha31nfHwoZz1lKX1mPWZ8fGd9cmV0dXJuIGY/KGYhPT1pWzBdJiZpLnVuc2hpZnQoZiksY1tmXSk6dm9pZCAwfWZ1bmN0aW9uIHViKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoIioiPT09ZilmPWk7ZWxzZSBpZigiKiIhPT1pJiZpIT09Zil7aWYoZz1qW2krIiAiK2ZdfHxqWyIqICIrZl0sIWcpZm9yKGUgaW4gailpZihoPWUuc3BsaXQoIiAiKSxoWzFdPT09ZiYmKGc9altpKyIgIitoWzBdXXx8alsiKiAiK2hbMF1dKSl7Zz09PSEwP2c9altlXTpqW2VdIT09ITAmJihmPWhbMF0say51bnNoaWZ0KGhbMV0pKTticmVha31pZihnIT09ITApaWYoZyYmYVsidGhyb3dzIl0pYj1nKGIpO2Vsc2UgdHJ5e2I9ZyhiKX1jYXRjaChsKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpnP2w6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK2krIiB0byAiK2Z9fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6Yn19bi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOm9iLHR5cGU6IkdFVCIsaXNMb2NhbDpoYi50ZXN0KHBiWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOm5iLHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6bi5wYXJzZUpTT04sInRleHQgeG1sIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9zYihzYihhLG4uYWpheFNldHRpbmdzKSxiKTpzYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpxYihsYiksYWpheFRyYW5zcG9ydDpxYihtYiksYWpheDpmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYj1ifHx7fTt2YXIgYyxkLGUsZixnLGgsaSxqLGs9bi5hamF4U2V0dXAoe30sYiksbD1rLmNvbnRleHR8fGssbT1rLmNvbnRleHQmJihsLm5vZGVUeXBlfHxsLmpxdWVyeSk/bihsKTpuLmV2ZW50LG89bi5EZWZlcnJlZCgpLHA9bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikscT1rLnN0YXR1c0NvZGV8fHt9LHI9e30scz17fSx0PTAsdT0iY2FuY2VsZWQiLHY9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dCl7aWYoIWYpe2Y9e307d2hpbGUoYj1nYi5leGVjKGUpKWZbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9ZlthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT10P2U6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdHx8KGE9c1tjXT1zW2NdfHxhLHJbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdHx8KGsubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dClmb3IoYiBpbiBhKXFbYl09W3FbYl0sYVtiXV07ZWxzZSB2LmFsd2F5cyhhW3Yuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHU7cmV0dXJuIGMmJmMuYWJvcnQoYikseCgwLGIpLHRoaXN9fTtpZihvLnByb21pc2UodikuY29tcGxldGU9cC5hZGQsdi5zdWNjZXNzPXYuZG9uZSx2LmVycm9yPXYuZmFpbCxrLnVybD0oKGF8fGsudXJsfHxvYikrIiIpLnJlcGxhY2UoZWIsIiIpLnJlcGxhY2UoamIscGJbMV0rIi8vIiksay50eXBlPWIubWV0aG9kfHxiLnR5cGV8fGsubWV0aG9kfHxrLnR5cGUsay5kYXRhVHlwZXM9bi50cmltKGsuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8WyIiXSxudWxsPT1rLmNyb3NzRG9tYWluJiYoaD1rYi5leGVjKGsudXJsLnRvTG93ZXJDYXNlKCkpLGsuY3Jvc3NEb21haW49ISghaHx8aFsxXT09PXBiWzFdJiZoWzJdPT09cGJbMl0mJihoWzNdfHwoImh0dHA6Ij09PWhbMV0/IjgwIjoiNDQzIikpPT09KHBiWzNdfHwoImh0dHA6Ij09PXBiWzFdPyI4MCI6IjQ0MyIpKSkpLGsuZGF0YSYmay5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBrLmRhdGEmJihrLmRhdGE9bi5wYXJhbShrLmRhdGEsay50cmFkaXRpb25hbCkpLHJiKGxiLGssYix2KSwyPT09dClyZXR1cm4gdjtpPW4uZXZlbnQmJmsuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGsudHlwZT1rLnR5cGUudG9VcHBlckNhc2UoKSxrLmhhc0NvbnRlbnQ9IWliLnRlc3Qoay50eXBlKSxkPWsudXJsLGsuaGFzQ29udGVudHx8KGsuZGF0YSYmKGQ9ay51cmwrPShkYi50ZXN0KGQpPyImIjoiPyIpK2suZGF0YSxkZWxldGUgay5kYXRhKSxrLmNhY2hlPT09ITEmJihrLnVybD1mYi50ZXN0KGQpP2QucmVwbGFjZShmYiwiJDFfPSIrY2IrKyk6ZCsoZGIudGVzdChkKT8iJiI6Ij8iKSsiXz0iK2NiKyspKSxrLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtkXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsbi5sYXN0TW9kaWZpZWRbZF0pLG4uZXRhZ1tkXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixuLmV0YWdbZF0pKSwoay5kYXRhJiZrLmhhc0NvbnRlbnQmJmsuY29udGVudFR5cGUhPT0hMXx8Yi5jb250ZW50VHlwZSkmJnYuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixrLmNvbnRlbnRUeXBlKSx2LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsay5kYXRhVHlwZXNbMF0mJmsuYWNjZXB0c1trLmRhdGFUeXBlc1swXV0/ay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXSsoIioiIT09ay5kYXRhVHlwZXNbMF0/IiwgIituYisiOyBxPTAuMDEiOiIiKTprLmFjY2VwdHNbIioiXSk7Zm9yKGogaW4gay5oZWFkZXJzKXYuc2V0UmVxdWVzdEhlYWRlcihqLGsuaGVhZGVyc1tqXSk7aWYoay5iZWZvcmVTZW5kJiYoay5iZWZvcmVTZW5kLmNhbGwobCx2LGspPT09ITF8fDI9PT10KSlyZXR1cm4gdi5hYm9ydCgpO3U9ImFib3J0Ijtmb3IoaiBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl2W2pdKGtbal0pO2lmKGM9cmIobWIsayxiLHYpKXt2LnJlYWR5U3RhdGU9MSxpJiZtLnRyaWdnZXIoImFqYXhTZW5kIixbdixrXSksay5hc3luYyYmay50aW1lb3V0PjAmJihnPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2LmFib3J0KCJ0aW1lb3V0Iil9LGsudGltZW91dCkpO3RyeXt0PTEsYy5zZW5kKHIseCl9Y2F0Y2godyl7aWYoISgyPnQpKXRocm93IHc7eCgtMSx3KX19ZWxzZSB4KC0xLCJObyBUcmFuc3BvcnQiKTtmdW5jdGlvbiB4KGEsYixmLGgpe3ZhciBqLHIscyx1LHcseD1iOzIhPT10JiYodD0yLGcmJmNsZWFyVGltZW91dChnKSxjPXZvaWQgMCxlPWh8fCIiLHYucmVhZHlTdGF0ZT1hPjA/NDowLGo9YT49MjAwJiYzMDA+YXx8MzA0PT09YSxmJiYodT10YihrLHYsZikpLHU9dWIoayx1LHYsaiksaj8oay5pZk1vZGlmaWVkJiYodz12LmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIiksdyYmKG4ubGFzdE1vZGlmaWVkW2RdPXcpLHc9di5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpLHcmJihuLmV0YWdbZF09dykpLDIwND09PWF8fCJIRUFEIj09PWsudHlwZT94PSJub2NvbnRlbnQiOjMwND09PWE/eD0ibm90bW9kaWZpZWQiOih4PXUuc3RhdGUscj11LmRhdGEscz11LmVycm9yLGo9IXMpKToocz14LChhfHwheCkmJih4PSJlcnJvciIsMD5hJiYoYT0wKSkpLHYuc3RhdHVzPWEsdi5zdGF0dXNUZXh0PShifHx4KSsiIixqP28ucmVzb2x2ZVdpdGgobCxbcix4LHZdKTpvLnJlamVjdFdpdGgobCxbdix4LHNdKSx2LnN0YXR1c0NvZGUocSkscT12b2lkIDAsaSYmbS50cmlnZ2VyKGo/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbdixrLGo/cjpzXSkscC5maXJlV2l0aChsLFt2LHhdKSxpJiYobS50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFt2LGtdKSwtLW4uYWN0aXZlfHxuLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKX1yZXR1cm4gdn0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZ2V0KGEsYixjLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmdldChhLHZvaWQgMCxiLCJzY3JpcHQiKX19KSxuLmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oYSxiKXtuW2JdPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBuLmlzRnVuY3Rpb24oYykmJihlPWV8fGQsZD1jLGM9dm9pZCAwKSxuLmFqYXgoe3VybDphLHR5cGU6YixkYXRhVHlwZTplLGRhdGE6YyxzdWNjZXNzOmR9KX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX06ZnVuY3Rpb24oKXt2YXIgYj1uKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPW4uaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe24odGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtuLm5vZGVOYW1lKHRoaXMsImJvZHkiKXx8bih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSksbi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPD0wJiZhLm9mZnNldEhlaWdodDw9MH0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgdmI9LyUyMC9nLHdiPS9cW1xdJC8seGI9L1xyP1xuL2cseWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLHpiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBBYihhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx3Yi50ZXN0KGEpP2QoYSxlKTpBYihhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpQWIoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlBYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSh2YiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmemIudGVzdCh0aGlzLm5vZGVOYW1lKSYmIXliLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFULnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoeGIsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKHhiLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYSl7fX07dmFyIEJiPTAsQ2I9e30sRGI9ezA6MjAwLDEyMjM6MjA0fSxFYj1uLmFqYXhTZXR0aW5ncy54aHIoKTthLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gQ2IpQ2JbYV0oKX0pLGsuY29ycz0hIUViJiYid2l0aENyZWRlbnRpYWxzImluIEViLGsuYWpheD1FYj0hIUViLG4uYWpheFRyYW5zcG9ydChmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gay5jb3JzfHxFYiYmIWEuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEueGhyKCksZz0rK0JiO2lmKGYub3BlbihhLnR5cGUsYS51cmwsYS5hc3luYyxhLnVzZXJuYW1lLGEucGFzc3dvcmQpLGEueGhyRmllbGRzKWZvcihlIGluIGEueGhyRmllbGRzKWZbZV09YS54aHJGaWVsZHNbZV07YS5taW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUoYS5taW1lVHlwZSksYS5jcm9zc0RvbWFpbnx8Y1siWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoY1siWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO2ZvcihlIGluIGMpZi5zZXRSZXF1ZXN0SGVhZGVyKGUsY1tlXSk7Yj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtiJiYoZGVsZXRlIENiW2ddLGI9Zi5vbmxvYWQ9Zi5vbmVycm9yPW51bGwsImFib3J0Ij09PWE/Zi5hYm9ydCgpOiJlcnJvciI9PT1hP2QoZi5zdGF0dXMsZi5zdGF0dXNUZXh0KTpkKERiW2Yuc3RhdHVzXXx8Zi5zdGF0dXMsZi5zdGF0dXNUZXh0LCJzdHJpbmciPT10eXBlb2YgZi5yZXNwb25zZVRleHQ/e3RleHQ6Zi5yZXNwb25zZVRleHR9OnZvaWQgMCxmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxmLm9ubG9hZD1iKCksZi5vbmVycm9yPWIoImVycm9yIiksYj1DYltnXT1iKCJhYm9ydCIpO3RyeXtmLnNlbmQoYS5oYXNDb250ZW50JiZhLmRhdGF8fG51bGwpfWNhdGNoKGgpe2lmKGIpdGhyb3cgaH19LGFib3J0OmZ1bmN0aW9uKCl7YiYmYigpfX06dm9pZCAwfSksbi5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihhKXtyZXR1cm4gbi5nbG9iYWxFdmFsKGEpLGF9fX0pLG4uYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihhKXt2b2lkIDA9PT1hLmNhY2hlJiYoYS5jYWNoZT0hMSksYS5jcm9zc0RvbWFpbiYmKGEudHlwZT0iR0VUIil9KSxuLmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oYSl7aWYoYS5jcm9zc0RvbWFpbil7dmFyIGIsYztyZXR1cm57c2VuZDpmdW5jdGlvbihkLGUpe2I9bigiPHNjcmlwdD4iKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmEuc2NyaXB0Q2hhcnNldCxzcmM6YS51cmx9KS5vbigibG9hZCBlcnJvciIsYz1mdW5jdGlvbihhKXtiLnJlbW92ZSgpLGM9bnVsbCxhJiZlKCJlcnJvciI9PT1hLnR5cGU/NDA0OjIwMCxhLnR5cGUpfSksbC5oZWFkLmFwcGVuZENoaWxkKGJbMF0pfSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19fX0pO3ZhciBGYj1bXSxHYj0vKD0pXD8oPz0mfCQpfFw/XD8vO24uYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1GYi5wb3AoKXx8bi5leHBhbmRvKyJfIitjYisrO3JldHVybiB0aGlzW2FdPSEwLGF9fSksbi5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGg9Yi5qc29ucCE9PSExJiYoR2IudGVzdChiLnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiBiLmRhdGEmJiEoYi5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZHYi50ZXN0KGIuZGF0YSkmJiJkYXRhIik7cmV0dXJuIGh8fCJqc29ucCI9PT1iLmRhdGFUeXBlc1swXT8oZT1iLmpzb25wQ2FsbGJhY2s9bi5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoR2IsIiQxIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KGRiLnRlc3QoYi51cmwpPyImIjoiPyIpK2IuanNvbnArIj0iK2UpLGIuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBnfHxuLmVycm9yKGUrIiB3YXMgbm90IGNhbGxlZCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPSJqc29uIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe2FbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxGYi5wdXNoKGUpKSxnJiZuLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLCJzY3JpcHQiKTp2b2lkIDB9KSxuLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gbnVsbDsiYm9vbGVhbiI9PXR5cGVvZiBiJiYoYz1iLGI9ITEpLGI9Ynx8bDt2YXIgZD12LmV4ZWMoYSksZT0hYyYmW107cmV0dXJuIGQ/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9bi5idWlsZEZyYWdtZW50KFthXSxiLGUpLGUmJmUubGVuZ3RoJiZuKGUpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZC5jaGlsZE5vZGVzKSl9O3ZhciBIYj1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZigic3RyaW5nIiE9dHlwZW9mIGEmJkhiKXJldHVybiBIYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZigiICIpO3JldHVybiBoPj0wJiYoZD1uLnRyaW0oYS5zbGljZShoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmUsZGF0YVR5cGU6Imh0bWwiLGRhdGE6Yn0pLmRvbmUoZnVuY3Rpb24oYSl7Zj1hcmd1bWVudHMsZy5odG1sKGQ/bigiPGRpdj4iKS5hcHBlbmQobi5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5jb21wbGV0ZShjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChjLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pLHRoaXN9LG4uZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG4uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBuLmdyZXAobi50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciBJYj1hLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmdW5jdGlvbiBKYihhKXtyZXR1cm4gbi5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlJiZhLmRlZmF1bHRWaWV3fW4ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bi5jc3MoYSwicG9zaXRpb24iKSxsPW4oYSksbT17fTsic3RhdGljIj09PWsmJihhLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIpLGg9bC5vZmZzZXQoKSxmPW4uY3NzKGEsInRvcCIpLGk9bi5jc3MoYSwibGVmdCIpLGo9KCJhYnNvbHV0ZSI9PT1rfHwiZml4ZWQiPT09aykmJihmK2kpLmluZGV4T2YoImF1dG8iKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLGgpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sbi5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9dGhpc1swXSxlPXt0b3A6MCxsZWZ0OjB9LGY9ZCYmZC5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbi5jb250YWlucyhiLGQpPyh0eXBlb2YgZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1VJiYoZT1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxjPUpiKGYpLHt0b3A6ZS50b3ArYy5wYWdlWU9mZnNldC1iLmNsaWVudFRvcCxsZWZ0OmUubGVmdCtjLnBhZ2VYT2Zmc2V0LWIuY2xpZW50TGVmdH0pOmV9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXRoaXNbMF0sZD17dG9wOjAsbGVmdDowfTtyZXR1cm4iZml4ZWQiPT09bi5jc3MoYywicG9zaXRpb24iKT9iPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLCJodG1sIil8fChkPWEub2Zmc2V0KCkpLGQudG9wKz1uLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGQubGVmdCs9bi5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6Yi50b3AtZC50b3Atbi5jc3MoYywibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LW4uY3NzKGMsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8SWI7d2hpbGUoYSYmIW4ubm9kZU5hbWUoYSwiaHRtbCIpJiYic3RhdGljIj09PW4uY3NzKGEsInBvc2l0aW9uIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8SWJ9KX19KSxuLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oYixjKXt2YXIgZD0icGFnZVlPZmZzZXQiPT09YztuLmZuW2JdPWZ1bmN0aW9uKGUpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixlLGYpe3ZhciBnPUpiKGIpO3JldHVybiB2b2lkIDA9PT1mP2c/Z1tjXTpiW2VdOnZvaWQoZz9nLnNjcm9sbFRvKGQ/YS5wYWdlWE9mZnNldDpmLGQ/ZjphLnBhZ2VZT2Zmc2V0KTpiW2VdPWYpfSxiLGUsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxuLmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXlhKGsucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGMpe3JldHVybiBjPyhjPXhhKGEsYiksdmEudGVzdChjKT9uKGEpLnBvc2l0aW9uKClbYl0rInB4IjpjKTp2b2lkIDB9KX0pLG4uZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKGEsYil7bi5lYWNoKHtwYWRkaW5nOiJpbm5lciIrYSxjb250ZW50OmIsIiI6Im91dGVyIithfSxmdW5jdGlvbihjLGQpe24uZm5bZF09ZnVuY3Rpb24oZCxlKXt2YXIgZj1hcmd1bWVudHMubGVuZ3RoJiYoY3x8ImJvb2xlYW4iIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/Im1hcmdpbiI6ImJvcmRlciIpO3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixjLGQpe3ZhciBlO3JldHVybiBuLmlzV2luZG93KGIpP2IuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVsic2Nyb2xsIithXSxlWyJzY3JvbGwiK2FdLGIuYm9keVsib2Zmc2V0IithXSxlWyJvZmZzZXQiK2FdLGVbImNsaWVudCIrYV0pKTp2b2lkIDA9PT1kP24uY3NzKGIsYyxnKTpuLnN0eWxlKGIsYyxkLGcpfSxiLGY/ZDp2b2lkIDAsZixudWxsKX19KX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjaywiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBLYj1hLmpRdWVyeSxMYj1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1MYiksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9S2IpLG59LHR5cGVvZiBiPT09VSYmKGEualF1ZXJ5PWEuJD1uKSxufSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWpxdWVyeS5taW4ubWFwOwovKiEKICogQm9vdHN0cmFwIHYzLjMuNyAoaHR0cDovL2dldGJvb3RzdHJhcC5jb20pCiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICovCmlmKCJ1bmRlZmluZWQiPT10eXBlb2YgalF1ZXJ5KXRocm93IG5ldyBFcnJvcigiQm9vdHN0cmFwJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnkiKTsrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEuZm4uanF1ZXJ5LnNwbGl0KCIgIilbMF0uc3BsaXQoIi4iKTtpZihiWzBdPDImJmJbMV08OXx8MT09YlswXSYmOT09YlsxXSYmYlsyXTwxfHxiWzBdPjMpdGhyb3cgbmV3IEVycm9yKCJCb290c3RyYXAncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeSB2ZXJzaW9uIDEuOS4xIG9yIGhpZ2hlciwgYnV0IGxvd2VyIHRoYW4gdmVyc2lvbiA0Iil9KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYm9vdHN0cmFwIiksYj17V2Via2l0VHJhbnNpdGlvbjoid2Via2l0VHJhbnNpdGlvbkVuZCIsTW96VHJhbnNpdGlvbjoidHJhbnNpdGlvbmVuZCIsT1RyYW5zaXRpb246Im9UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kIix0cmFuc2l0aW9uOiJ0cmFuc2l0aW9uZW5kIn07Zm9yKHZhciBjIGluIGIpaWYodm9pZCAwIT09YS5zdHlsZVtjXSlyZXR1cm57ZW5kOmJbY119O3JldHVybiExfWEuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYil7dmFyIGM9ITEsZD10aGlzO2EodGhpcykub25lKCJic1RyYW5zaXRpb25FbmQiLGZ1bmN0aW9uKCl7Yz0hMH0pO3ZhciBlPWZ1bmN0aW9uKCl7Y3x8YShkKS50cmlnZ2VyKGEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCl9O3JldHVybiBzZXRUaW1lb3V0KGUsYiksdGhpc30sYShmdW5jdGlvbigpe2Euc3VwcG9ydC50cmFuc2l0aW9uPWIoKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmKGEuZXZlbnQuc3BlY2lhbC5ic1RyYW5zaXRpb25FbmQ9e2JpbmRUeXBlOmEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxkZWxlZ2F0ZVR5cGU6YS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLGhhbmRsZTpmdW5jdGlvbihiKXtpZihhKGIudGFyZ2V0KS5pcyh0aGlzKSlyZXR1cm4gYi5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZT1jLmRhdGEoImJzLmFsZXJ0Iik7ZXx8Yy5kYXRhKCJicy5hbGVydCIsZT1uZXcgZCh0aGlzKSksInN0cmluZyI9PXR5cGVvZiBiJiZlW2JdLmNhbGwoYyl9KX12YXIgYz0nW2RhdGEtZGlzbWlzcz0iYWxlcnQiXScsZD1mdW5jdGlvbihiKXthKGIpLm9uKCJjbGljayIsYyx0aGlzLmNsb3NlKX07ZC5WRVJTSU9OPSIzLjMuNyIsZC5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxkLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7Zy5kZXRhY2goKS50cmlnZ2VyKCJjbG9zZWQuYnMuYWxlcnQiKS5yZW1vdmUoKX12YXIgZT1hKHRoaXMpLGY9ZS5hdHRyKCJkYXRhLXRhcmdldCIpO2Z8fChmPWUuYXR0cigiaHJlZiIpLGY9ZiYmZi5yZXBsYWNlKC8uKig/PSNbXlxzXSokKS8sIiIpKTt2YXIgZz1hKCIjIj09PWY/W106Zik7YiYmYi5wcmV2ZW50RGVmYXVsdCgpLGcubGVuZ3RofHwoZz1lLmNsb3Nlc3QoIi5hbGVydCIpKSxnLnRyaWdnZXIoYj1hLkV2ZW50KCJjbG9zZS5icy5hbGVydCIpKSxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoZy5yZW1vdmVDbGFzcygiaW4iKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmZy5oYXNDbGFzcygiZmFkZSIpP2cub25lKCJic1RyYW5zaXRpb25FbmQiLGMpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGQuVFJBTlNJVElPTl9EVVJBVElPTik6YygpKX07dmFyIGU9YS5mbi5hbGVydDthLmZuLmFsZXJ0PWIsYS5mbi5hbGVydC5Db25zdHJ1Y3Rvcj1kLGEuZm4uYWxlcnQubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmFsZXJ0PWUsdGhpc30sYShkb2N1bWVudCkub24oImNsaWNrLmJzLmFsZXJ0LmRhdGEtYXBpIixjLGQucHJvdG90eXBlLmNsb3NlKX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoImJzLmJ1dHRvbiIpLGY9Im9iamVjdCI9PXR5cGVvZiBiJiZiO2V8fGQuZGF0YSgiYnMuYnV0dG9uIixlPW5ldyBjKHRoaXMsZikpLCJ0b2dnbGUiPT1iP2UudG9nZ2xlKCk6YiYmZS5zZXRTdGF0ZShiKX0pfXZhciBjPWZ1bmN0aW9uKGIsZCl7dGhpcy4kZWxlbWVudD1hKGIpLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQpLHRoaXMuaXNMb2FkaW5nPSExfTtjLlZFUlNJT049IjMuMy43IixjLkRFRkFVTFRTPXtsb2FkaW5nVGV4dDoibG9hZGluZy4uLiJ9LGMucHJvdG90eXBlLnNldFN0YXRlPWZ1bmN0aW9uKGIpe3ZhciBjPSJkaXNhYmxlZCIsZD10aGlzLiRlbGVtZW50LGU9ZC5pcygiaW5wdXQiKT8idmFsIjoiaHRtbCIsZj1kLmRhdGEoKTtiKz0iVGV4dCIsbnVsbD09Zi5yZXNldFRleHQmJmQuZGF0YSgicmVzZXRUZXh0IixkW2VdKCkpLHNldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe2RbZV0obnVsbD09ZltiXT90aGlzLm9wdGlvbnNbYl06ZltiXSksImxvYWRpbmdUZXh0Ij09Yj8odGhpcy5pc0xvYWRpbmc9ITAsZC5hZGRDbGFzcyhjKS5hdHRyKGMsYykucHJvcChjLCEwKSk6dGhpcy5pc0xvYWRpbmcmJih0aGlzLmlzTG9hZGluZz0hMSxkLnJlbW92ZUNsYXNzKGMpLnJlbW92ZUF0dHIoYykucHJvcChjLCExKSl9LHRoaXMpLDApfSxjLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXt2YXIgYT0hMCxiPXRoaXMuJGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtdG9nZ2xlPSJidXR0b25zIl0nKTtpZihiLmxlbmd0aCl7dmFyIGM9dGhpcy4kZWxlbWVudC5maW5kKCJpbnB1dCIpOyJyYWRpbyI9PWMucHJvcCgidHlwZSIpPyhjLnByb3AoImNoZWNrZWQiKSYmKGE9ITEpLGIuZmluZCgiLmFjdGl2ZSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKSx0aGlzLiRlbGVtZW50LmFkZENsYXNzKCJhY3RpdmUiKSk6ImNoZWNrYm94Ij09Yy5wcm9wKCJ0eXBlIikmJihjLnByb3AoImNoZWNrZWQiKSE9PXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoImFjdGl2ZSIpJiYoYT0hMSksdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygiYWN0aXZlIikpLGMucHJvcCgiY2hlY2tlZCIsdGhpcy4kZWxlbWVudC5oYXNDbGFzcygiYWN0aXZlIikpLGEmJmMudHJpZ2dlcigiY2hhbmdlIil9ZWxzZSB0aGlzLiRlbGVtZW50LmF0dHIoImFyaWEtcHJlc3NlZCIsIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoImFjdGl2ZSIpKSx0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKCJhY3RpdmUiKX07dmFyIGQ9YS5mbi5idXR0b247YS5mbi5idXR0b249YixhLmZuLmJ1dHRvbi5Db25zdHJ1Y3Rvcj1jLGEuZm4uYnV0dG9uLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5idXR0b249ZCx0aGlzfSxhKGRvY3VtZW50KS5vbigiY2xpY2suYnMuYnV0dG9uLmRhdGEtYXBpIiwnW2RhdGEtdG9nZ2xlXj0iYnV0dG9uIl0nLGZ1bmN0aW9uKGMpe3ZhciBkPWEoYy50YXJnZXQpLmNsb3Nlc3QoIi5idG4iKTtiLmNhbGwoZCwidG9nZ2xlIiksYShjLnRhcmdldCkuaXMoJ2lucHV0W3R5cGU9InJhZGlvIl0sIGlucHV0W3R5cGU9ImNoZWNrYm94Il0nKXx8KGMucHJldmVudERlZmF1bHQoKSxkLmlzKCJpbnB1dCxidXR0b24iKT9kLnRyaWdnZXIoImZvY3VzIik6ZC5maW5kKCJpbnB1dDp2aXNpYmxlLGJ1dHRvbjp2aXNpYmxlIikuZmlyc3QoKS50cmlnZ2VyKCJmb2N1cyIpKX0pLm9uKCJmb2N1cy5icy5idXR0b24uZGF0YS1hcGkgYmx1ci5icy5idXR0b24uZGF0YS1hcGkiLCdbZGF0YS10b2dnbGVePSJidXR0b24iXScsZnVuY3Rpb24oYil7YShiLnRhcmdldCkuY2xvc2VzdCgiLmJ0biIpLnRvZ2dsZUNsYXNzKCJmb2N1cyIsL15mb2N1cyhpbik/JC8udGVzdChiLnR5cGUpKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YSgiYnMuY2Fyb3VzZWwiKSxmPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZC5kYXRhKCksIm9iamVjdCI9PXR5cGVvZiBiJiZiKSxnPSJzdHJpbmciPT10eXBlb2YgYj9iOmYuc2xpZGU7ZXx8ZC5kYXRhKCJicy5jYXJvdXNlbCIsZT1uZXcgYyh0aGlzLGYpKSwibnVtYmVyIj09dHlwZW9mIGI/ZS50byhiKTpnP2VbZ10oKTpmLmludGVydmFsJiZlLnBhdXNlKCkuY3ljbGUoKX0pfXZhciBjPWZ1bmN0aW9uKGIsYyl7dGhpcy4kZWxlbWVudD1hKGIpLHRoaXMuJGluZGljYXRvcnM9dGhpcy4kZWxlbWVudC5maW5kKCIuY2Fyb3VzZWwtaW5kaWNhdG9ycyIpLHRoaXMub3B0aW9ucz1jLHRoaXMucGF1c2VkPW51bGwsdGhpcy5zbGlkaW5nPW51bGwsdGhpcy5pbnRlcnZhbD1udWxsLHRoaXMuJGFjdGl2ZT1udWxsLHRoaXMuJGl0ZW1zPW51bGwsdGhpcy5vcHRpb25zLmtleWJvYXJkJiZ0aGlzLiRlbGVtZW50Lm9uKCJrZXlkb3duLmJzLmNhcm91c2VsIixhLnByb3h5KHRoaXMua2V5ZG93bix0aGlzKSksImhvdmVyIj09dGhpcy5vcHRpb25zLnBhdXNlJiYhKCJvbnRvdWNoc3RhcnQiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSYmdGhpcy4kZWxlbWVudC5vbigibW91c2VlbnRlci5icy5jYXJvdXNlbCIsYS5wcm94eSh0aGlzLnBhdXNlLHRoaXMpKS5vbigibW91c2VsZWF2ZS5icy5jYXJvdXNlbCIsYS5wcm94eSh0aGlzLmN5Y2xlLHRoaXMpKX07Yy5WRVJTSU9OPSIzLjMuNyIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTYwMCxjLkRFRkFVTFRTPXtpbnRlcnZhbDo1ZTMscGF1c2U6ImhvdmVyIix3cmFwOiEwLGtleWJvYXJkOiEwfSxjLnByb3RvdHlwZS5rZXlkb3duPWZ1bmN0aW9uKGEpe2lmKCEvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGEudGFyZ2V0LnRhZ05hbWUpKXtzd2l0Y2goYS53aGljaCl7Y2FzZSAzNzp0aGlzLnByZXYoKTticmVhaztjYXNlIDM5OnRoaXMubmV4dCgpO2JyZWFrO2RlZmF1bHQ6cmV0dXJufWEucHJldmVudERlZmF1bHQoKX19LGMucHJvdG90eXBlLmN5Y2xlPWZ1bmN0aW9uKGIpe3JldHVybiBifHwodGhpcy5wYXVzZWQ9ITEpLHRoaXMuaW50ZXJ2YWwmJmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpcy5vcHRpb25zLmludGVydmFsJiYhdGhpcy5wYXVzZWQmJih0aGlzLmludGVydmFsPXNldEludGVydmFsKGEucHJveHkodGhpcy5uZXh0LHRoaXMpLHRoaXMub3B0aW9ucy5pbnRlcnZhbCkpLHRoaXN9LGMucHJvdG90eXBlLmdldEl0ZW1JbmRleD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kaXRlbXM9YS5wYXJlbnQoKS5jaGlsZHJlbigiLml0ZW0iKSx0aGlzLiRpdGVtcy5pbmRleChhfHx0aGlzLiRhY3RpdmUpfSxjLnByb3RvdHlwZS5nZXRJdGVtRm9yRGlyZWN0aW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRJdGVtSW5kZXgoYiksZD0icHJldiI9PWEmJjA9PT1jfHwibmV4dCI9PWEmJmM9PXRoaXMuJGl0ZW1zLmxlbmd0aC0xO2lmKGQmJiF0aGlzLm9wdGlvbnMud3JhcClyZXR1cm4gYjt2YXIgZT0icHJldiI9PWE/LTE6MSxmPShjK2UpJXRoaXMuJGl0ZW1zLmxlbmd0aDtyZXR1cm4gdGhpcy4kaXRlbXMuZXEoZil9LGMucHJvdG90eXBlLnRvPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz10aGlzLmdldEl0ZW1JbmRleCh0aGlzLiRhY3RpdmU9dGhpcy4kZWxlbWVudC5maW5kKCIuaXRlbS5hY3RpdmUiKSk7aWYoIShhPnRoaXMuJGl0ZW1zLmxlbmd0aC0xfHxhPDApKXJldHVybiB0aGlzLnNsaWRpbmc/dGhpcy4kZWxlbWVudC5vbmUoInNsaWQuYnMuY2Fyb3VzZWwiLGZ1bmN0aW9uKCl7Yi50byhhKX0pOmM9PWE/dGhpcy5wYXVzZSgpLmN5Y2xlKCk6dGhpcy5zbGlkZShhPmM/Im5leHQiOiJwcmV2Iix0aGlzLiRpdGVtcy5lcShhKSl9LGMucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKGIpe3JldHVybiBifHwodGhpcy5wYXVzZWQ9ITApLHRoaXMuJGVsZW1lbnQuZmluZCgiLm5leHQsIC5wcmV2IikubGVuZ3RoJiZhLnN1cHBvcnQudHJhbnNpdGlvbiYmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihhLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpLHRoaXMuY3ljbGUoITApKSx0aGlzLmludGVydmFsPWNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpc30sYy5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKCF0aGlzLnNsaWRpbmcpcmV0dXJuIHRoaXMuc2xpZGUoIm5leHQiKX0sYy5wcm90b3R5cGUucHJldj1mdW5jdGlvbigpe2lmKCF0aGlzLnNsaWRpbmcpcmV0dXJuIHRoaXMuc2xpZGUoInByZXYiKX0sYy5wcm90b3R5cGUuc2xpZGU9ZnVuY3Rpb24oYixkKXt2YXIgZT10aGlzLiRlbGVtZW50LmZpbmQoIi5pdGVtLmFjdGl2ZSIpLGY9ZHx8dGhpcy5nZXRJdGVtRm9yRGlyZWN0aW9uKGIsZSksZz10aGlzLmludGVydmFsLGg9Im5leHQiPT1iPyJsZWZ0IjoicmlnaHQiLGk9dGhpcztpZihmLmhhc0NsYXNzKCJhY3RpdmUiKSlyZXR1cm4gdGhpcy5zbGlkaW5nPSExO3ZhciBqPWZbMF0saz1hLkV2ZW50KCJzbGlkZS5icy5jYXJvdXNlbCIse3JlbGF0ZWRUYXJnZXQ6aixkaXJlY3Rpb246aH0pO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihrKSwhay5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7aWYodGhpcy5zbGlkaW5nPSEwLGcmJnRoaXMucGF1c2UoKSx0aGlzLiRpbmRpY2F0b3JzLmxlbmd0aCl7dGhpcy4kaW5kaWNhdG9ycy5maW5kKCIuYWN0aXZlIikucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpO3ZhciBsPWEodGhpcy4kaW5kaWNhdG9ycy5jaGlsZHJlbigpW3RoaXMuZ2V0SXRlbUluZGV4KGYpXSk7bCYmbC5hZGRDbGFzcygiYWN0aXZlIil9dmFyIG09YS5FdmVudCgic2xpZC5icy5jYXJvdXNlbCIse3JlbGF0ZWRUYXJnZXQ6aixkaXJlY3Rpb246aH0pO3JldHVybiBhLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcygic2xpZGUiKT8oZi5hZGRDbGFzcyhiKSxmWzBdLm9mZnNldFdpZHRoLGUuYWRkQ2xhc3MoaCksZi5hZGRDbGFzcyhoKSxlLm9uZSgiYnNUcmFuc2l0aW9uRW5kIixmdW5jdGlvbigpe2YucmVtb3ZlQ2xhc3MoW2IsaF0uam9pbigiICIpKS5hZGRDbGFzcygiYWN0aXZlIiksZS5yZW1vdmVDbGFzcyhbImFjdGl2ZSIsaF0uam9pbigiICIpKSxpLnNsaWRpbmc9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe2kuJGVsZW1lbnQudHJpZ2dlcihtKX0sMCl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pKTooZS5yZW1vdmVDbGFzcygiYWN0aXZlIiksZi5hZGRDbGFzcygiYWN0aXZlIiksdGhpcy5zbGlkaW5nPSExLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihtKSksZyYmdGhpcy5jeWNsZSgpLHRoaXN9fTt2YXIgZD1hLmZuLmNhcm91c2VsO2EuZm4uY2Fyb3VzZWw9YixhLmZuLmNhcm91c2VsLkNvbnN0cnVjdG9yPWMsYS5mbi5jYXJvdXNlbC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uY2Fyb3VzZWw9ZCx0aGlzfTt2YXIgZT1mdW5jdGlvbihjKXt2YXIgZCxlPWEodGhpcyksZj1hKGUuYXR0cigiZGF0YS10YXJnZXQiKXx8KGQ9ZS5hdHRyKCJocmVmIikpJiZkLnJlcGxhY2UoLy4qKD89I1teXHNdKyQpLywiIikpO2lmKGYuaGFzQ2xhc3MoImNhcm91c2VsIikpe3ZhciBnPWEuZXh0ZW5kKHt9LGYuZGF0YSgpLGUuZGF0YSgpKSxoPWUuYXR0cigiZGF0YS1zbGlkZS10byIpO2gmJihnLmludGVydmFsPSExKSxiLmNhbGwoZixnKSxoJiZmLmRhdGEoImJzLmNhcm91c2VsIikudG8oaCksYy5wcmV2ZW50RGVmYXVsdCgpfX07YShkb2N1bWVudCkub24oImNsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpIiwiW2RhdGEtc2xpZGVdIixlKS5vbigiY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGkiLCJbZGF0YS1zbGlkZS10b10iLGUpLGEod2luZG93KS5vbigibG9hZCIsZnVuY3Rpb24oKXthKCdbZGF0YS1yaWRlPSJjYXJvdXNlbCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyk7Yi5jYWxsKGMsYy5kYXRhKCkpfSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7dmFyIGMsZD1iLmF0dHIoImRhdGEtdGFyZ2V0Iil8fChjPWIuYXR0cigiaHJlZiIpKSYmYy5yZXBsYWNlKC8uKig/PSNbXlxzXSskKS8sIiIpO3JldHVybiBhKGQpfWZ1bmN0aW9uIGMoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZT1jLmRhdGEoImJzLmNvbGxhcHNlIiksZj1hLmV4dGVuZCh7fSxkLkRFRkFVTFRTLGMuZGF0YSgpLCJvYmplY3QiPT10eXBlb2YgYiYmYik7IWUmJmYudG9nZ2xlJiYvc2hvd3xoaWRlLy50ZXN0KGIpJiYoZi50b2dnbGU9ITEpLGV8fGMuZGF0YSgiYnMuY29sbGFwc2UiLGU9bmV3IGQodGhpcyxmKSksInN0cmluZyI9PXR5cGVvZiBiJiZlW2JdKCl9KX12YXIgZD1mdW5jdGlvbihiLGMpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sZC5ERUZBVUxUUyxjKSx0aGlzLiR0cmlnZ2VyPWEoJ1tkYXRhLXRvZ2dsZT0iY29sbGFwc2UiXVtocmVmPSIjJytiLmlkKyciXSxbZGF0YS10b2dnbGU9ImNvbGxhcHNlIl1bZGF0YS10YXJnZXQ9IiMnK2IuaWQrJyJdJyksdGhpcy50cmFuc2l0aW9uaW5nPW51bGwsdGhpcy5vcHRpb25zLnBhcmVudD90aGlzLiRwYXJlbnQ9dGhpcy5nZXRQYXJlbnQoKTp0aGlzLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyh0aGlzLiRlbGVtZW50LHRoaXMuJHRyaWdnZXIpLHRoaXMub3B0aW9ucy50b2dnbGUmJnRoaXMudG9nZ2xlKCl9O2QuVkVSU0lPTj0iMy4zLjciLGQuVFJBTlNJVElPTl9EVVJBVElPTj0zNTAsZC5ERUZBVUxUUz17dG9nZ2xlOiEwfSxkLnByb3RvdHlwZS5kaW1lbnNpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJ3aWR0aCIpO3JldHVybiBhPyJ3aWR0aCI6ImhlaWdodCJ9LGQucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXtpZighdGhpcy50cmFuc2l0aW9uaW5nJiYhdGhpcy4kZWxlbWVudC5oYXNDbGFzcygiaW4iKSl7dmFyIGIsZT10aGlzLiRwYXJlbnQmJnRoaXMuJHBhcmVudC5jaGlsZHJlbigiLnBhbmVsIikuY2hpbGRyZW4oIi5pbiwgLmNvbGxhcHNpbmciKTtpZighKGUmJmUubGVuZ3RoJiYoYj1lLmRhdGEoImJzLmNvbGxhcHNlIiksYiYmYi50cmFuc2l0aW9uaW5nKSkpe3ZhciBmPWEuRXZlbnQoInNob3cuYnMuY29sbGFwc2UiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoZiksIWYuaXNEZWZhdWx0UHJldmVudGVkKCkpe2UmJmUubGVuZ3RoJiYoYy5jYWxsKGUsImhpZGUiKSxifHxlLmRhdGEoImJzLmNvbGxhcHNlIixudWxsKSk7dmFyIGc9dGhpcy5kaW1lbnNpb24oKTt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJjb2xsYXBzZSIpLmFkZENsYXNzKCJjb2xsYXBzaW5nIilbZ10oMCkuYXR0cigiYXJpYS1leHBhbmRlZCIsITApLHRoaXMuJHRyaWdnZXIucmVtb3ZlQ2xhc3MoImNvbGxhcHNlZCIpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCEwKSx0aGlzLnRyYW5zaXRpb25pbmc9MTt2YXIgaD1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoImNvbGxhcHNpbmciKS5hZGRDbGFzcygiY29sbGFwc2UgaW4iKVtnXSgiIiksdGhpcy50cmFuc2l0aW9uaW5nPTAsdGhpcy4kZWxlbWVudC50cmlnZ2VyKCJzaG93bi5icy5jb2xsYXBzZSIpfTtpZighYS5zdXBwb3J0LnRyYW5zaXRpb24pcmV0dXJuIGguY2FsbCh0aGlzKTt2YXIgaT1hLmNhbWVsQ2FzZShbInNjcm9sbCIsZ10uam9pbigiLSIpKTt0aGlzLiRlbGVtZW50Lm9uZSgiYnNUcmFuc2l0aW9uRW5kIixhLnByb3h5KGgsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGQuVFJBTlNJVElPTl9EVVJBVElPTilbZ10odGhpcy4kZWxlbWVudFswXVtpXSl9fX19LGQucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtpZighdGhpcy50cmFuc2l0aW9uaW5nJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJpbiIpKXt2YXIgYj1hLkV2ZW50KCJoaWRlLmJzLmNvbGxhcHNlIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpLCFiLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgYz10aGlzLmRpbWVuc2lvbigpO3RoaXMuJGVsZW1lbnRbY10odGhpcy4kZWxlbWVudFtjXSgpKVswXS5vZmZzZXRIZWlnaHQsdGhpcy4kZWxlbWVudC5hZGRDbGFzcygiY29sbGFwc2luZyIpLnJlbW92ZUNsYXNzKCJjb2xsYXBzZSBpbiIpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCExKSx0aGlzLiR0cmlnZ2VyLmFkZENsYXNzKCJjb2xsYXBzZWQiKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMSksdGhpcy50cmFuc2l0aW9uaW5nPTE7dmFyIGU9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zaXRpb25pbmc9MCx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJjb2xsYXBzaW5nIikuYWRkQ2xhc3MoImNvbGxhcHNlIikudHJpZ2dlcigiaGlkZGVuLmJzLmNvbGxhcHNlIil9O3JldHVybiBhLnN1cHBvcnQudHJhbnNpdGlvbj92b2lkIHRoaXMuJGVsZW1lbnRbY10oMCkub25lKCJic1RyYW5zaXRpb25FbmQiLGEucHJveHkoZSx0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoZC5UUkFOU0lUSU9OX0RVUkFUSU9OKTplLmNhbGwodGhpcyl9fX0sZC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7dGhpc1t0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJpbiIpPyJoaWRlIjoic2hvdyJdKCl9LGQucHJvdG90eXBlLmdldFBhcmVudD1mdW5jdGlvbigpe3JldHVybiBhKHRoaXMub3B0aW9ucy5wYXJlbnQpLmZpbmQoJ1tkYXRhLXRvZ2dsZT0iY29sbGFwc2UiXVtkYXRhLXBhcmVudD0iJyt0aGlzLm9wdGlvbnMucGFyZW50KyciXScpLmVhY2goYS5wcm94eShmdW5jdGlvbihjLGQpe3ZhciBlPWEoZCk7dGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoYihlKSxlKX0sdGhpcykpLmVuZCgpfSxkLnByb3RvdHlwZS5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3M9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmhhc0NsYXNzKCJpbiIpO2EuYXR0cigiYXJpYS1leHBhbmRlZCIsYyksYi50b2dnbGVDbGFzcygiY29sbGFwc2VkIiwhYykuYXR0cigiYXJpYS1leHBhbmRlZCIsYyl9O3ZhciBlPWEuZm4uY29sbGFwc2U7YS5mbi5jb2xsYXBzZT1jLGEuZm4uY29sbGFwc2UuQ29uc3RydWN0b3I9ZCxhLmZuLmNvbGxhcHNlLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5jb2xsYXBzZT1lLHRoaXN9LGEoZG9jdW1lbnQpLm9uKCJjbGljay5icy5jb2xsYXBzZS5kYXRhLWFwaSIsJ1tkYXRhLXRvZ2dsZT0iY29sbGFwc2UiXScsZnVuY3Rpb24oZCl7dmFyIGU9YSh0aGlzKTtlLmF0dHIoImRhdGEtdGFyZ2V0Iil8fGQucHJldmVudERlZmF1bHQoKTt2YXIgZj1iKGUpLGc9Zi5kYXRhKCJicy5jb2xsYXBzZSIpLGg9Zz8idG9nZ2xlIjplLmRhdGEoKTtjLmNhbGwoZixoKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXt2YXIgYz1iLmF0dHIoImRhdGEtdGFyZ2V0Iik7Y3x8KGM9Yi5hdHRyKCJocmVmIiksYz1jJiYvI1tBLVphLXpdLy50ZXN0KGMpJiZjLnJlcGxhY2UoLy4qKD89I1teXHNdKiQpLywiIikpO3ZhciBkPWMmJmEoYyk7cmV0dXJuIGQmJmQubGVuZ3RoP2Q6Yi5wYXJlbnQoKX1mdW5jdGlvbiBjKGMpe2MmJjM9PT1jLndoaWNofHwoYShlKS5yZW1vdmUoKSxhKGYpLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9YihkKSxmPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2UuaGFzQ2xhc3MoIm9wZW4iKSYmKGMmJiJjbGljayI9PWMudHlwZSYmL2lucHV0fHRleHRhcmVhL2kudGVzdChjLnRhcmdldC50YWdOYW1lKSYmYS5jb250YWlucyhlWzBdLGMudGFyZ2V0KXx8KGUudHJpZ2dlcihjPWEuRXZlbnQoImhpZGUuYnMuZHJvcGRvd24iLGYpKSxjLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoZC5hdHRyKCJhcmlhLWV4cGFuZGVkIiwiZmFsc2UiKSxlLnJlbW92ZUNsYXNzKCJvcGVuIikudHJpZ2dlcihhLkV2ZW50KCJoaWRkZW4uYnMuZHJvcGRvd24iLGYpKSkpKX0pKX1mdW5jdGlvbiBkKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yy5kYXRhKCJicy5kcm9wZG93biIpO2R8fGMuZGF0YSgiYnMuZHJvcGRvd24iLGQ9bmV3IGcodGhpcykpLCJzdHJpbmciPT10eXBlb2YgYiYmZFtiXS5jYWxsKGMpfSl9dmFyIGU9Ii5kcm9wZG93bi1iYWNrZHJvcCIsZj0nW2RhdGEtdG9nZ2xlPSJkcm9wZG93biJdJyxnPWZ1bmN0aW9uKGIpe2EoYikub24oImNsaWNrLmJzLmRyb3Bkb3duIix0aGlzLnRvZ2dsZSl9O2cuVkVSU0lPTj0iMy4zLjciLGcucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihkKXt2YXIgZT1hKHRoaXMpO2lmKCFlLmlzKCIuZGlzYWJsZWQsIDpkaXNhYmxlZCIpKXt2YXIgZj1iKGUpLGc9Zi5oYXNDbGFzcygib3BlbiIpO2lmKGMoKSwhZyl7Im9udG91Y2hzdGFydCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJiFmLmNsb3Nlc3QoIi5uYXZiYXItbmF2IikubGVuZ3RoJiZhKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5hZGRDbGFzcygiZHJvcGRvd24tYmFja2Ryb3AiKS5pbnNlcnRBZnRlcihhKHRoaXMpKS5vbigiY2xpY2siLGMpO3ZhciBoPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2lmKGYudHJpZ2dlcihkPWEuRXZlbnQoInNob3cuYnMuZHJvcGRvd24iLGgpKSxkLmlzRGVmYXVsdFByZXZlbnRlZCgpKXJldHVybjtlLnRyaWdnZXIoImZvY3VzIikuYXR0cigiYXJpYS1leHBhbmRlZCIsInRydWUiKSxmLnRvZ2dsZUNsYXNzKCJvcGVuIikudHJpZ2dlcihhLkV2ZW50KCJzaG93bi5icy5kcm9wZG93biIsaCkpfXJldHVybiExfX0sZy5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihjKXtpZigvKDM4fDQwfDI3fDMyKS8udGVzdChjLndoaWNoKSYmIS9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoYy50YXJnZXQudGFnTmFtZSkpe3ZhciBkPWEodGhpcyk7aWYoYy5wcmV2ZW50RGVmYXVsdCgpLGMuc3RvcFByb3BhZ2F0aW9uKCksIWQuaXMoIi5kaXNhYmxlZCwgOmRpc2FibGVkIikpe3ZhciBlPWIoZCksZz1lLmhhc0NsYXNzKCJvcGVuIik7aWYoIWcmJjI3IT1jLndoaWNofHxnJiYyNz09Yy53aGljaClyZXR1cm4gMjc9PWMud2hpY2gmJmUuZmluZChmKS50cmlnZ2VyKCJmb2N1cyIpLGQudHJpZ2dlcigiY2xpY2siKTt2YXIgaD0iIGxpOm5vdCguZGlzYWJsZWQpOnZpc2libGUgYSIsaT1lLmZpbmQoIi5kcm9wZG93bi1tZW51IitoKTtpZihpLmxlbmd0aCl7dmFyIGo9aS5pbmRleChjLnRhcmdldCk7Mzg9PWMud2hpY2gmJmo+MCYmai0tLDQwPT1jLndoaWNoJiZqPGkubGVuZ3RoLTEmJmorKyx+anx8KGo9MCksaS5lcShqKS50cmlnZ2VyKCJmb2N1cyIpfX19fTt2YXIgaD1hLmZuLmRyb3Bkb3duO2EuZm4uZHJvcGRvd249ZCxhLmZuLmRyb3Bkb3duLkNvbnN0cnVjdG9yPWcsYS5mbi5kcm9wZG93bi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uZHJvcGRvd249aCx0aGlzfSxhKGRvY3VtZW50KS5vbigiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGkiLGMpLm9uKCJjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaSIsIi5kcm9wZG93biBmb3JtIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSkub24oImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpIixmLGcucHJvdG90eXBlLnRvZ2dsZSkub24oImtleWRvd24uYnMuZHJvcGRvd24uZGF0YS1hcGkiLGYsZy5wcm90b3R5cGUua2V5ZG93bikub24oImtleWRvd24uYnMuZHJvcGRvd24uZGF0YS1hcGkiLCIuZHJvcGRvd24tbWVudSIsZy5wcm90b3R5cGUua2V5ZG93bil9KGpRdWVyeSksK2Z1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsZCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWEodGhpcyksZj1lLmRhdGEoImJzLm1vZGFsIiksZz1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGUuZGF0YSgpLCJvYmplY3QiPT10eXBlb2YgYiYmYik7Znx8ZS5kYXRhKCJicy5tb2RhbCIsZj1uZXcgYyh0aGlzLGcpKSwic3RyaW5nIj09dHlwZW9mIGI/ZltiXShkKTpnLnNob3cmJmYuc2hvdyhkKX0pfXZhciBjPWZ1bmN0aW9uKGIsYyl7dGhpcy5vcHRpb25zPWMsdGhpcy4kYm9keT1hKGRvY3VtZW50LmJvZHkpLHRoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLiRkaWFsb2c9dGhpcy4kZWxlbWVudC5maW5kKCIubW9kYWwtZGlhbG9nIiksdGhpcy4kYmFja2Ryb3A9bnVsbCx0aGlzLmlzU2hvd249bnVsbCx0aGlzLm9yaWdpbmFsQm9keVBhZD1udWxsLHRoaXMuc2Nyb2xsYmFyV2lkdGg9MCx0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2s9ITEsdGhpcy5vcHRpb25zLnJlbW90ZSYmdGhpcy4kZWxlbWVudC5maW5kKCIubW9kYWwtY29udGVudCIpLmxvYWQodGhpcy5vcHRpb25zLnJlbW90ZSxhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC50cmlnZ2VyKCJsb2FkZWQuYnMubW9kYWwiKX0sdGhpcykpfTtjLlZFUlNJT049IjMuMy43IixjLlRSQU5TSVRJT05fRFVSQVRJT049MzAwLGMuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsYy5ERUZBVUxUUz17YmFja2Ryb3A6ITAsa2V5Ym9hcmQ6ITAsc2hvdzohMH0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzU2hvd24/dGhpcy5oaWRlKCk6dGhpcy5zaG93KGEpfSxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsZT1hLkV2ZW50KCJzaG93LmJzLm1vZGFsIix7cmVsYXRlZFRhcmdldDpifSk7dGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpLHRoaXMuaXNTaG93bnx8ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KHRoaXMuaXNTaG93bj0hMCx0aGlzLmNoZWNrU2Nyb2xsYmFyKCksdGhpcy5zZXRTY3JvbGxiYXIoKSx0aGlzLiRib2R5LmFkZENsYXNzKCJtb2RhbC1vcGVuIiksdGhpcy5lc2NhcGUoKSx0aGlzLnJlc2l6ZSgpLHRoaXMuJGVsZW1lbnQub24oImNsaWNrLmRpc21pc3MuYnMubW9kYWwiLCdbZGF0YS1kaXNtaXNzPSJtb2RhbCJdJyxhLnByb3h5KHRoaXMuaGlkZSx0aGlzKSksdGhpcy4kZGlhbG9nLm9uKCJtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbCIsZnVuY3Rpb24oKXtkLiRlbGVtZW50Lm9uZSgibW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsIixmdW5jdGlvbihiKXthKGIudGFyZ2V0KS5pcyhkLiRlbGVtZW50KSYmKGQuaWdub3JlQmFja2Ryb3BDbGljaz0hMCl9KX0pLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXt2YXIgZT1hLnN1cHBvcnQudHJhbnNpdGlvbiYmZC4kZWxlbWVudC5oYXNDbGFzcygiZmFkZSIpO2QuJGVsZW1lbnQucGFyZW50KCkubGVuZ3RofHxkLiRlbGVtZW50LmFwcGVuZFRvKGQuJGJvZHkpLGQuJGVsZW1lbnQuc2hvdygpLnNjcm9sbFRvcCgwKSxkLmFkanVzdERpYWxvZygpLGUmJmQuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsZC4kZWxlbWVudC5hZGRDbGFzcygiaW4iKSxkLmVuZm9yY2VGb2N1cygpO3ZhciBmPWEuRXZlbnQoInNob3duLmJzLm1vZGFsIix7cmVsYXRlZFRhcmdldDpifSk7ZT9kLiRkaWFsb2cub25lKCJic1RyYW5zaXRpb25FbmQiLGZ1bmN0aW9uKCl7ZC4kZWxlbWVudC50cmlnZ2VyKCJmb2N1cyIpLnRyaWdnZXIoZil9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOmQuJGVsZW1lbnQudHJpZ2dlcigiZm9jdXMiKS50cmlnZ2VyKGYpfSkpfSxjLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGIpe2ImJmIucHJldmVudERlZmF1bHQoKSxiPWEuRXZlbnQoImhpZGUuYnMubW9kYWwiKSx0aGlzLiRlbGVtZW50LnRyaWdnZXIoYiksdGhpcy5pc1Nob3duJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKHRoaXMuaXNTaG93bj0hMSx0aGlzLmVzY2FwZSgpLHRoaXMucmVzaXplKCksYShkb2N1bWVudCkub2ZmKCJmb2N1c2luLmJzLm1vZGFsIiksdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiaW4iKS5vZmYoImNsaWNrLmRpc21pc3MuYnMubW9kYWwiKS5vZmYoIm1vdXNldXAuZGlzbWlzcy5icy5tb2RhbCIpLHRoaXMuJGRpYWxvZy5vZmYoIm1vdXNlZG93bi5kaXNtaXNzLmJzLm1vZGFsIiksYS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoImZhZGUiKT90aGlzLiRlbGVtZW50Lm9uZSgiYnNUcmFuc2l0aW9uRW5kIixhLnByb3h5KHRoaXMuaGlkZU1vZGFsLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOnRoaXMuaGlkZU1vZGFsKCkpfSxjLnByb3RvdHlwZS5lbmZvcmNlRm9jdXM9ZnVuY3Rpb24oKXthKGRvY3VtZW50KS5vZmYoImZvY3VzaW4uYnMubW9kYWwiKS5vbigiZm9jdXNpbi5icy5tb2RhbCIsYS5wcm94eShmdW5jdGlvbihhKXtkb2N1bWVudD09PWEudGFyZ2V0fHx0aGlzLiRlbGVtZW50WzBdPT09YS50YXJnZXR8fHRoaXMuJGVsZW1lbnQuaGFzKGEudGFyZ2V0KS5sZW5ndGh8fHRoaXMuJGVsZW1lbnQudHJpZ2dlcigiZm9jdXMiKX0sdGhpcykpfSxjLnByb3RvdHlwZS5lc2NhcGU9ZnVuY3Rpb24oKXt0aGlzLmlzU2hvd24mJnRoaXMub3B0aW9ucy5rZXlib2FyZD90aGlzLiRlbGVtZW50Lm9uKCJrZXlkb3duLmRpc21pc3MuYnMubW9kYWwiLGEucHJveHkoZnVuY3Rpb24oYSl7Mjc9PWEud2hpY2gmJnRoaXMuaGlkZSgpfSx0aGlzKSk6dGhpcy5pc1Nob3dufHx0aGlzLiRlbGVtZW50Lm9mZigia2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsIil9LGMucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbigpe3RoaXMuaXNTaG93bj9hKHdpbmRvdykub24oInJlc2l6ZS5icy5tb2RhbCIsYS5wcm94eSh0aGlzLmhhbmRsZVVwZGF0ZSx0aGlzKSk6YSh3aW5kb3cpLm9mZigicmVzaXplLmJzLm1vZGFsIil9LGMucHJvdG90eXBlLmhpZGVNb2RhbD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy4kZWxlbWVudC5oaWRlKCksdGhpcy5iYWNrZHJvcChmdW5jdGlvbigpe2EuJGJvZHkucmVtb3ZlQ2xhc3MoIm1vZGFsLW9wZW4iKSxhLnJlc2V0QWRqdXN0bWVudHMoKSxhLnJlc2V0U2Nyb2xsYmFyKCksYS4kZWxlbWVudC50cmlnZ2VyKCJoaWRkZW4uYnMubW9kYWwiKX0pfSxjLnByb3RvdHlwZS5yZW1vdmVCYWNrZHJvcD1mdW5jdGlvbigpe3RoaXMuJGJhY2tkcm9wJiZ0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKSx0aGlzLiRiYWNrZHJvcD1udWxsfSxjLnByb3RvdHlwZS5iYWNrZHJvcD1mdW5jdGlvbihiKXt2YXIgZD10aGlzLGU9dGhpcy4kZWxlbWVudC5oYXNDbGFzcygiZmFkZSIpPyJmYWRlIjoiIjtpZih0aGlzLmlzU2hvd24mJnRoaXMub3B0aW9ucy5iYWNrZHJvcCl7dmFyIGY9YS5zdXBwb3J0LnRyYW5zaXRpb24mJmU7aWYodGhpcy4kYmFja2Ryb3A9YShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuYWRkQ2xhc3MoIm1vZGFsLWJhY2tkcm9wICIrZSkuYXBwZW5kVG8odGhpcy4kYm9keSksdGhpcy4kZWxlbWVudC5vbigiY2xpY2suZGlzbWlzcy5icy5tb2RhbCIsYS5wcm94eShmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrP3ZvaWQodGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrPSExKTp2b2lkKGEudGFyZ2V0PT09YS5jdXJyZW50VGFyZ2V0JiYoInN0YXRpYyI9PXRoaXMub3B0aW9ucy5iYWNrZHJvcD90aGlzLiRlbGVtZW50WzBdLmZvY3VzKCk6dGhpcy5oaWRlKCkpKX0sdGhpcykpLGYmJnRoaXMuJGJhY2tkcm9wWzBdLm9mZnNldFdpZHRoLHRoaXMuJGJhY2tkcm9wLmFkZENsYXNzKCJpbiIpLCFiKXJldHVybjtmP3RoaXMuJGJhY2tkcm9wLm9uZSgiYnNUcmFuc2l0aW9uRW5kIixiKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pOmIoKX1lbHNlIGlmKCF0aGlzLmlzU2hvd24mJnRoaXMuJGJhY2tkcm9wKXt0aGlzLiRiYWNrZHJvcC5yZW1vdmVDbGFzcygiaW4iKTt2YXIgZz1mdW5jdGlvbigpe2QucmVtb3ZlQmFja2Ryb3AoKSxiJiZiKCl9O2Euc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJmYWRlIik/dGhpcy4kYmFja2Ryb3Aub25lKCJic1RyYW5zaXRpb25FbmQiLGcpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik6ZygpfWVsc2UgYiYmYigpfSxjLnByb3RvdHlwZS5oYW5kbGVVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmFkanVzdERpYWxvZygpfSxjLnByb3RvdHlwZS5hZGp1c3REaWFsb2c9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50WzBdLnNjcm9sbEhlaWdodD5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O3RoaXMuJGVsZW1lbnQuY3NzKHtwYWRkaW5nTGVmdDohdGhpcy5ib2R5SXNPdmVyZmxvd2luZyYmYT90aGlzLnNjcm9sbGJhcldpZHRoOiIiLHBhZGRpbmdSaWdodDp0aGlzLmJvZHlJc092ZXJmbG93aW5nJiYhYT90aGlzLnNjcm9sbGJhcldpZHRoOiIifSl9LGMucHJvdG90eXBlLnJlc2V0QWRqdXN0bWVudHM9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmNzcyh7cGFkZGluZ0xlZnQ6IiIscGFkZGluZ1JpZ2h0OiIifSl9LGMucHJvdG90eXBlLmNoZWNrU2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LmlubmVyV2lkdGg7aWYoIWEpe3ZhciBiPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTthPWIucmlnaHQtTWF0aC5hYnMoYi5sZWZ0KX10aGlzLmJvZHlJc092ZXJmbG93aW5nPWRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg8YSx0aGlzLnNjcm9sbGJhcldpZHRoPXRoaXMubWVhc3VyZVNjcm9sbGJhcigpfSxjLnByb3RvdHlwZS5zZXRTY3JvbGxiYXI9ZnVuY3Rpb24oKXt2YXIgYT1wYXJzZUludCh0aGlzLiRib2R5LmNzcygicGFkZGluZy1yaWdodCIpfHwwLDEwKTt0aGlzLm9yaWdpbmFsQm9keVBhZD1kb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodHx8IiIsdGhpcy5ib2R5SXNPdmVyZmxvd2luZyYmdGhpcy4kYm9keS5jc3MoInBhZGRpbmctcmlnaHQiLGErdGhpcy5zY3JvbGxiYXJXaWR0aCl9LGMucHJvdG90eXBlLnJlc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dGhpcy4kYm9keS5jc3MoInBhZGRpbmctcmlnaHQiLHRoaXMub3JpZ2luYWxCb2R5UGFkKX0sYy5wcm90b3R5cGUubWVhc3VyZVNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2EuY2xhc3NOYW1lPSJtb2RhbC1zY3JvbGxiYXItbWVhc3VyZSIsdGhpcy4kYm9keS5hcHBlbmQoYSk7dmFyIGI9YS5vZmZzZXRXaWR0aC1hLmNsaWVudFdpZHRoO3JldHVybiB0aGlzLiRib2R5WzBdLnJlbW92ZUNoaWxkKGEpLGJ9O3ZhciBkPWEuZm4ubW9kYWw7YS5mbi5tb2RhbD1iLGEuZm4ubW9kYWwuQ29uc3RydWN0b3I9YyxhLmZuLm1vZGFsLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5tb2RhbD1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKCJjbGljay5icy5tb2RhbC5kYXRhLWFwaSIsJ1tkYXRhLXRvZ2dsZT0ibW9kYWwiXScsZnVuY3Rpb24oYyl7dmFyIGQ9YSh0aGlzKSxlPWQuYXR0cigiaHJlZiIpLGY9YShkLmF0dHIoImRhdGEtdGFyZ2V0Iil8fGUmJmUucmVwbGFjZSgvLiooPz0jW15cc10rJCkvLCIiKSksZz1mLmRhdGEoImJzLm1vZGFsIik/InRvZ2dsZSI6YS5leHRlbmQoe3JlbW90ZTohLyMvLnRlc3QoZSkmJmV9LGYuZGF0YSgpLGQuZGF0YSgpKTtkLmlzKCJhIikmJmMucHJldmVudERlZmF1bHQoKSxmLm9uZSgic2hvdy5icy5tb2RhbCIsZnVuY3Rpb24oYSl7YS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Zi5vbmUoImhpZGRlbi5icy5tb2RhbCIsZnVuY3Rpb24oKXtkLmlzKCI6dmlzaWJsZSIpJiZkLnRyaWdnZXIoImZvY3VzIil9KX0pLGIuY2FsbChmLGcsdGhpcyl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoImJzLnRvb2x0aXAiKSxmPSJvYmplY3QiPT10eXBlb2YgYiYmYjshZSYmL2Rlc3Ryb3l8aGlkZS8udGVzdChiKXx8KGV8fGQuZGF0YSgiYnMudG9vbHRpcCIsZT1uZXcgYyh0aGlzLGYpKSwic3RyaW5nIj09dHlwZW9mIGImJmVbYl0oKSl9KX12YXIgYz1mdW5jdGlvbihhLGIpe3RoaXMudHlwZT1udWxsLHRoaXMub3B0aW9ucz1udWxsLHRoaXMuZW5hYmxlZD1udWxsLHRoaXMudGltZW91dD1udWxsLHRoaXMuaG92ZXJTdGF0ZT1udWxsLHRoaXMuJGVsZW1lbnQ9bnVsbCx0aGlzLmluU3RhdGU9bnVsbCx0aGlzLmluaXQoInRvb2x0aXAiLGEsYil9O2MuVkVSU0lPTj0iMy4zLjciLGMuVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsYy5ERUZBVUxUUz17YW5pbWF0aW9uOiEwLHBsYWNlbWVudDoidG9wIixzZWxlY3RvcjohMSx0ZW1wbGF0ZTonPGRpdiBjbGFzcz0idG9vbHRpcCIgcm9sZT0idG9vbHRpcCI+PGRpdiBjbGFzcz0idG9vbHRpcC1hcnJvdyI+PC9kaXY+PGRpdiBjbGFzcz0idG9vbHRpcC1pbm5lciI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOiJob3ZlciBmb2N1cyIsdGl0bGU6IiIsZGVsYXk6MCxodG1sOiExLGNvbnRhaW5lcjohMSx2aWV3cG9ydDp7c2VsZWN0b3I6ImJvZHkiLHBhZGRpbmc6MH19LGMucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oYixjLGQpe2lmKHRoaXMuZW5hYmxlZD0hMCx0aGlzLnR5cGU9Yix0aGlzLiRlbGVtZW50PWEoYyksdGhpcy5vcHRpb25zPXRoaXMuZ2V0T3B0aW9ucyhkKSx0aGlzLiR2aWV3cG9ydD10aGlzLm9wdGlvbnMudmlld3BvcnQmJmEoYS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy52aWV3cG9ydCk/dGhpcy5vcHRpb25zLnZpZXdwb3J0LmNhbGwodGhpcyx0aGlzLiRlbGVtZW50KTp0aGlzLm9wdGlvbnMudmlld3BvcnQuc2VsZWN0b3J8fHRoaXMub3B0aW9ucy52aWV3cG9ydCksdGhpcy5pblN0YXRlPXtjbGljazohMSxob3ZlcjohMSxmb2N1czohMX0sdGhpcy4kZWxlbWVudFswXWluc3RhbmNlb2YgZG9jdW1lbnQuY29uc3RydWN0b3ImJiF0aGlzLm9wdGlvbnMuc2VsZWN0b3IpdGhyb3cgbmV3IEVycm9yKCJgc2VsZWN0b3JgIG9wdGlvbiBtdXN0IGJlIHNwZWNpZmllZCB3aGVuIGluaXRpYWxpemluZyAiK3RoaXMudHlwZSsiIG9uIHRoZSB3aW5kb3cuZG9jdW1lbnQgb2JqZWN0ISIpO2Zvcih2YXIgZT10aGlzLm9wdGlvbnMudHJpZ2dlci5zcGxpdCgiICIpLGY9ZS5sZW5ndGg7Zi0tOyl7dmFyIGc9ZVtmXTtpZigiY2xpY2siPT1nKXRoaXMuJGVsZW1lbnQub24oImNsaWNrLiIrdGhpcy50eXBlLHRoaXMub3B0aW9ucy5zZWxlY3RvcixhLnByb3h5KHRoaXMudG9nZ2xlLHRoaXMpKTtlbHNlIGlmKCJtYW51YWwiIT1nKXt2YXIgaD0iaG92ZXIiPT1nPyJtb3VzZWVudGVyIjoiZm9jdXNpbiIsaT0iaG92ZXIiPT1nPyJtb3VzZWxlYXZlIjoiZm9jdXNvdXQiO3RoaXMuJGVsZW1lbnQub24oaCsiLiIrdGhpcy50eXBlLHRoaXMub3B0aW9ucy5zZWxlY3RvcixhLnByb3h5KHRoaXMuZW50ZXIsdGhpcykpLHRoaXMuJGVsZW1lbnQub24oaSsiLiIrdGhpcy50eXBlLHRoaXMub3B0aW9ucy5zZWxlY3RvcixhLnByb3h5KHRoaXMubGVhdmUsdGhpcykpfX10aGlzLm9wdGlvbnMuc2VsZWN0b3I/dGhpcy5fb3B0aW9ucz1hLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMse3RyaWdnZXI6Im1hbnVhbCIsc2VsZWN0b3I6IiJ9KTp0aGlzLmZpeFRpdGxlKCl9LGMucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuREVGQVVMVFN9LGMucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oYil7cmV0dXJuIGI9YS5leHRlbmQoe30sdGhpcy5nZXREZWZhdWx0cygpLHRoaXMuJGVsZW1lbnQuZGF0YSgpLGIpLGIuZGVsYXkmJiJudW1iZXIiPT10eXBlb2YgYi5kZWxheSYmKGIuZGVsYXk9e3Nob3c6Yi5kZWxheSxoaWRlOmIuZGVsYXl9KSxifSxjLnByb3RvdHlwZS5nZXREZWxlZ2F0ZU9wdGlvbnM9ZnVuY3Rpb24oKXt2YXIgYj17fSxjPXRoaXMuZ2V0RGVmYXVsdHMoKTtyZXR1cm4gdGhpcy5fb3B0aW9ucyYmYS5lYWNoKHRoaXMuX29wdGlvbnMsZnVuY3Rpb24oYSxkKXtjW2FdIT1kJiYoYlthXT1kKX0pLGJ9LGMucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKGIpe3ZhciBjPWIgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yP2I6YShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoImJzLiIrdGhpcy50eXBlKTtyZXR1cm4gY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKCJicy4iK3RoaXMudHlwZSxjKSksYiBpbnN0YW5jZW9mIGEuRXZlbnQmJihjLmluU3RhdGVbImZvY3VzaW4iPT1iLnR5cGU/ImZvY3VzIjoiaG92ZXIiXT0hMCksYy50aXAoKS5oYXNDbGFzcygiaW4iKXx8ImluIj09Yy5ob3ZlclN0YXRlP3ZvaWQoYy5ob3ZlclN0YXRlPSJpbiIpOihjbGVhclRpbWVvdXQoYy50aW1lb3V0KSxjLmhvdmVyU3RhdGU9ImluIixjLm9wdGlvbnMuZGVsYXkmJmMub3B0aW9ucy5kZWxheS5zaG93P3ZvaWQoYy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXsiaW4iPT1jLmhvdmVyU3RhdGUmJmMuc2hvdygpfSxjLm9wdGlvbnMuZGVsYXkuc2hvdykpOmMuc2hvdygpKX0sYy5wcm90b3R5cGUuaXNJblN0YXRlVHJ1ZT1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmluU3RhdGUpaWYodGhpcy5pblN0YXRlW2FdKXJldHVybiEwO3JldHVybiExfSxjLnByb3RvdHlwZS5sZWF2ZT1mdW5jdGlvbihiKXt2YXIgYz1iIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9iOmEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKCJicy4iK3RoaXMudHlwZSk7aWYoY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKCJicy4iK3RoaXMudHlwZSxjKSksYiBpbnN0YW5jZW9mIGEuRXZlbnQmJihjLmluU3RhdGVbImZvY3Vzb3V0Ij09Yi50eXBlPyJmb2N1cyI6ImhvdmVyIl09ITEpLCFjLmlzSW5TdGF0ZVRydWUoKSlyZXR1cm4gY2xlYXJUaW1lb3V0KGMudGltZW91dCksYy5ob3ZlclN0YXRlPSJvdXQiLGMub3B0aW9ucy5kZWxheSYmYy5vcHRpb25zLmRlbGF5LmhpZGU/dm9pZChjLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpeyJvdXQiPT1jLmhvdmVyU3RhdGUmJmMuaGlkZSgpfSxjLm9wdGlvbnMuZGVsYXkuaGlkZSkpOmMuaGlkZSgpfSxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7dmFyIGI9YS5FdmVudCgic2hvdy5icy4iK3RoaXMudHlwZSk7aWYodGhpcy5oYXNDb250ZW50KCkmJnRoaXMuZW5hYmxlZCl7dGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpO3ZhciBkPWEuY29udGFpbnModGhpcy4kZWxlbWVudFswXS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCx0aGlzLiRlbGVtZW50WzBdKTtpZihiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwhZClyZXR1cm47dmFyIGU9dGhpcyxmPXRoaXMudGlwKCksZz10aGlzLmdldFVJRCh0aGlzLnR5cGUpO3RoaXMuc2V0Q29udGVudCgpLGYuYXR0cigiaWQiLGcpLHRoaXMuJGVsZW1lbnQuYXR0cigiYXJpYS1kZXNjcmliZWRieSIsZyksdGhpcy5vcHRpb25zLmFuaW1hdGlvbiYmZi5hZGRDbGFzcygiZmFkZSIpO3ZhciBoPSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9wdGlvbnMucGxhY2VtZW50P3RoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLGZbMF0sdGhpcy4kZWxlbWVudFswXSk6dGhpcy5vcHRpb25zLnBsYWNlbWVudCxpPS9ccz9hdXRvP1xzPy9pLGo9aS50ZXN0KGgpO2omJihoPWgucmVwbGFjZShpLCIiKXx8InRvcCIpLGYuZGV0YWNoKCkuY3NzKHt0b3A6MCxsZWZ0OjAsZGlzcGxheToiYmxvY2sifSkuYWRkQ2xhc3MoaCkuZGF0YSgiYnMuIit0aGlzLnR5cGUsdGhpcyksdGhpcy5vcHRpb25zLmNvbnRhaW5lcj9mLmFwcGVuZFRvKHRoaXMub3B0aW9ucy5jb250YWluZXIpOmYuaW5zZXJ0QWZ0ZXIodGhpcy4kZWxlbWVudCksdGhpcy4kZWxlbWVudC50cmlnZ2VyKCJpbnNlcnRlZC5icy4iK3RoaXMudHlwZSk7dmFyIGs9dGhpcy5nZXRQb3NpdGlvbigpLGw9ZlswXS5vZmZzZXRXaWR0aCxtPWZbMF0ub2Zmc2V0SGVpZ2h0O2lmKGope3ZhciBuPWgsbz10aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KTtoPSJib3R0b20iPT1oJiZrLmJvdHRvbSttPm8uYm90dG9tPyJ0b3AiOiJ0b3AiPT1oJiZrLnRvcC1tPG8udG9wPyJib3R0b20iOiJyaWdodCI9PWgmJmsucmlnaHQrbD5vLndpZHRoPyJsZWZ0IjoibGVmdCI9PWgmJmsubGVmdC1sPG8ubGVmdD8icmlnaHQiOmgsZi5yZW1vdmVDbGFzcyhuKS5hZGRDbGFzcyhoKX12YXIgcD10aGlzLmdldENhbGN1bGF0ZWRPZmZzZXQoaCxrLGwsbSk7dGhpcy5hcHBseVBsYWNlbWVudChwLGgpO3ZhciBxPWZ1bmN0aW9uKCl7dmFyIGE9ZS5ob3ZlclN0YXRlO2UuJGVsZW1lbnQudHJpZ2dlcigic2hvd24uYnMuIitlLnR5cGUpLGUuaG92ZXJTdGF0ZT1udWxsLCJvdXQiPT1hJiZlLmxlYXZlKGUpfTthLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kdGlwLmhhc0NsYXNzKCJmYWRlIik/Zi5vbmUoImJzVHJhbnNpdGlvbkVuZCIscSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTpxKCl9fSxjLnByb3RvdHlwZS5hcHBseVBsYWNlbWVudD1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMudGlwKCksZT1kWzBdLm9mZnNldFdpZHRoLGY9ZFswXS5vZmZzZXRIZWlnaHQsZz1wYXJzZUludChkLmNzcygibWFyZ2luLXRvcCIpLDEwKSxoPXBhcnNlSW50KGQuY3NzKCJtYXJnaW4tbGVmdCIpLDEwKTtpc05hTihnKSYmKGc9MCksaXNOYU4oaCkmJihoPTApLGIudG9wKz1nLGIubGVmdCs9aCxhLm9mZnNldC5zZXRPZmZzZXQoZFswXSxhLmV4dGVuZCh7dXNpbmc6ZnVuY3Rpb24oYSl7ZC5jc3Moe3RvcDpNYXRoLnJvdW5kKGEudG9wKSxsZWZ0Ok1hdGgucm91bmQoYS5sZWZ0KX0pfX0sYiksMCksZC5hZGRDbGFzcygiaW4iKTt2YXIgaT1kWzBdLm9mZnNldFdpZHRoLGo9ZFswXS5vZmZzZXRIZWlnaHQ7InRvcCI9PWMmJmohPWYmJihiLnRvcD1iLnRvcCtmLWopO3ZhciBrPXRoaXMuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhKGMsYixpLGopO2subGVmdD9iLmxlZnQrPWsubGVmdDpiLnRvcCs9ay50b3A7dmFyIGw9L3RvcHxib3R0b20vLnRlc3QoYyksbT1sPzIqay5sZWZ0LWUraToyKmsudG9wLWYraixuPWw/Im9mZnNldFdpZHRoIjoib2Zmc2V0SGVpZ2h0IjtkLm9mZnNldChiKSx0aGlzLnJlcGxhY2VBcnJvdyhtLGRbMF1bbl0sbCl9LGMucHJvdG90eXBlLnJlcGxhY2VBcnJvdz1mdW5jdGlvbihhLGIsYyl7dGhpcy5hcnJvdygpLmNzcyhjPyJsZWZ0IjoidG9wIiw1MCooMS1hL2IpKyIlIikuY3NzKGM/InRvcCI6ImxlZnQiLCIiKX0sYy5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMudGlwKCksYj10aGlzLmdldFRpdGxlKCk7YS5maW5kKCIudG9vbHRpcC1pbm5lciIpW3RoaXMub3B0aW9ucy5odG1sPyJodG1sIjoidGV4dCJdKGIpLGEucmVtb3ZlQ2xhc3MoImZhZGUgaW4gdG9wIGJvdHRvbSBsZWZ0IHJpZ2h0Iil9LGMucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oYil7ZnVuY3Rpb24gZCgpeyJpbiIhPWUuaG92ZXJTdGF0ZSYmZi5kZXRhY2goKSxlLiRlbGVtZW50JiZlLiRlbGVtZW50LnJlbW92ZUF0dHIoImFyaWEtZGVzY3JpYmVkYnkiKS50cmlnZ2VyKCJoaWRkZW4uYnMuIitlLnR5cGUpLGImJmIoKX12YXIgZT10aGlzLGY9YSh0aGlzLiR0aXApLGc9YS5FdmVudCgiaGlkZS5icy4iK3RoaXMudHlwZSk7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGcpLCFnLmlzRGVmYXVsdFByZXZlbnRlZCgpKXJldHVybiBmLnJlbW92ZUNsYXNzKCJpbiIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZmLmhhc0NsYXNzKCJmYWRlIik/Zi5vbmUoImJzVHJhbnNpdGlvbkVuZCIsZCkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTpkKCksdGhpcy5ob3ZlclN0YXRlPW51bGwsdGhpc30sYy5wcm90b3R5cGUuZml4VGl0bGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50OyhhLmF0dHIoInRpdGxlIil8fCJzdHJpbmciIT10eXBlb2YgYS5hdHRyKCJkYXRhLW9yaWdpbmFsLXRpdGxlIikpJiZhLmF0dHIoImRhdGEtb3JpZ2luYWwtdGl0bGUiLGEuYXR0cigidGl0bGUiKXx8IiIpLmF0dHIoInRpdGxlIiwiIil9LGMucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfSxjLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbihiKXtiPWJ8fHRoaXMuJGVsZW1lbnQ7dmFyIGM9YlswXSxkPSJCT0RZIj09Yy50YWdOYW1lLGU9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtudWxsPT1lLndpZHRoJiYoZT1hLmV4dGVuZCh7fSxlLHt3aWR0aDplLnJpZ2h0LWUubGVmdCxoZWlnaHQ6ZS5ib3R0b20tZS50b3B9KSk7dmFyIGY9d2luZG93LlNWR0VsZW1lbnQmJmMgaW5zdGFuY2VvZiB3aW5kb3cuU1ZHRWxlbWVudCxnPWQ/e3RvcDowLGxlZnQ6MH06Zj9udWxsOmIub2Zmc2V0KCksaD17c2Nyb2xsOmQ/ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A6Yi5zY3JvbGxUb3AoKX0saT1kP3t3aWR0aDphKHdpbmRvdykud2lkdGgoKSxoZWlnaHQ6YSh3aW5kb3cpLmhlaWdodCgpfTpudWxsO3JldHVybiBhLmV4dGVuZCh7fSxlLGgsaSxnKX0sYy5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlZE9mZnNldD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4iYm90dG9tIj09YT97dG9wOmIudG9wK2IuaGVpZ2h0LGxlZnQ6Yi5sZWZ0K2Iud2lkdGgvMi1jLzJ9OiJ0b3AiPT1hP3t0b3A6Yi50b3AtZCxsZWZ0OmIubGVmdCtiLndpZHRoLzItYy8yfToibGVmdCI9PWE/e3RvcDpiLnRvcCtiLmhlaWdodC8yLWQvMixsZWZ0OmIubGVmdC1jfTp7dG9wOmIudG9wK2IuaGVpZ2h0LzItZC8yLGxlZnQ6Yi5sZWZ0K2Iud2lkdGh9fSxjLnByb3RvdHlwZS5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e3RvcDowLGxlZnQ6MH07aWYoIXRoaXMuJHZpZXdwb3J0KXJldHVybiBlO3ZhciBmPXRoaXMub3B0aW9ucy52aWV3cG9ydCYmdGhpcy5vcHRpb25zLnZpZXdwb3J0LnBhZGRpbmd8fDAsZz10aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KTtpZigvcmlnaHR8bGVmdC8udGVzdChhKSl7dmFyIGg9Yi50b3AtZi1nLnNjcm9sbCxpPWIudG9wK2YtZy5zY3JvbGwrZDtoPGcudG9wP2UudG9wPWcudG9wLWg6aT5nLnRvcCtnLmhlaWdodCYmKGUudG9wPWcudG9wK2cuaGVpZ2h0LWkpfWVsc2V7dmFyIGo9Yi5sZWZ0LWYsaz1iLmxlZnQrZitjO2o8Zy5sZWZ0P2UubGVmdD1nLmxlZnQtajprPmcucmlnaHQmJihlLmxlZnQ9Zy5sZWZ0K2cud2lkdGgtayl9cmV0dXJuIGV9LGMucHJvdG90eXBlLmdldFRpdGxlPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLiRlbGVtZW50LGM9dGhpcy5vcHRpb25zO3JldHVybiBhPWIuYXR0cigiZGF0YS1vcmlnaW5hbC10aXRsZSIpfHwoImZ1bmN0aW9uIj09dHlwZW9mIGMudGl0bGU/Yy50aXRsZS5jYWxsKGJbMF0pOmMudGl0bGUpfSxjLnByb3RvdHlwZS5nZXRVSUQ9ZnVuY3Rpb24oYSl7ZG8gYSs9fn4oMWU2Kk1hdGgucmFuZG9tKCkpO3doaWxlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpKTtyZXR1cm4gYX0sYy5wcm90b3R5cGUudGlwPWZ1bmN0aW9uKCl7aWYoIXRoaXMuJHRpcCYmKHRoaXMuJHRpcD1hKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSksMSE9dGhpcy4kdGlwLmxlbmd0aCkpdGhyb3cgbmV3IEVycm9yKHRoaXMudHlwZSsiIGB0ZW1wbGF0ZWAgb3B0aW9uIG11c3QgY29uc2lzdCBvZiBleGFjdGx5IDEgdG9wLWxldmVsIGVsZW1lbnQhIik7cmV0dXJuIHRoaXMuJHRpcH0sYy5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYXJyb3c9dGhpcy4kYXJyb3d8fHRoaXMudGlwKCkuZmluZCgiLnRvb2x0aXAtYXJyb3ciKX0sYy5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSEwfSxjLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSExfSxjLnByb3RvdHlwZS50b2dnbGVFbmFibGVkPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSF0aGlzLmVuYWJsZWR9LGMucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihiKXt2YXIgYz10aGlzO2ImJihjPWEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKCJicy4iK3RoaXMudHlwZSksY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKCJicy4iK3RoaXMudHlwZSxjKSkpLGI/KGMuaW5TdGF0ZS5jbGljaz0hYy5pblN0YXRlLmNsaWNrLGMuaXNJblN0YXRlVHJ1ZSgpP2MuZW50ZXIoYyk6Yy5sZWF2ZShjKSk6Yy50aXAoKS5oYXNDbGFzcygiaW4iKT9jLmxlYXZlKGMpOmMuZW50ZXIoYyl9LGMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMuaGlkZShmdW5jdGlvbigpe2EuJGVsZW1lbnQub2ZmKCIuIithLnR5cGUpLnJlbW92ZURhdGEoImJzLiIrYS50eXBlKSxhLiR0aXAmJmEuJHRpcC5kZXRhY2goKSxhLiR0aXA9bnVsbCxhLiRhcnJvdz1udWxsLGEuJHZpZXdwb3J0PW51bGwsYS4kZWxlbWVudD1udWxsfSl9O3ZhciBkPWEuZm4udG9vbHRpcDthLmZuLnRvb2x0aXA9YixhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3I9YyxhLmZuLnRvb2x0aXAubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnRvb2x0aXA9ZCx0aGlzfX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoImJzLnBvcG92ZXIiKSxmPSJvYmplY3QiPT10eXBlb2YgYiYmYjshZSYmL2Rlc3Ryb3l8aGlkZS8udGVzdChiKXx8KGV8fGQuZGF0YSgiYnMucG9wb3ZlciIsZT1uZXcgYyh0aGlzLGYpKSwic3RyaW5nIj09dHlwZW9mIGImJmVbYl0oKSl9KX12YXIgYz1mdW5jdGlvbihhLGIpe3RoaXMuaW5pdCgicG9wb3ZlciIsYSxiKX07aWYoIWEuZm4udG9vbHRpcCl0aHJvdyBuZXcgRXJyb3IoIlBvcG92ZXIgcmVxdWlyZXMgdG9vbHRpcC5qcyIpO2MuVkVSU0lPTj0iMy4zLjciLGMuREVGQVVMVFM9YS5leHRlbmQoe30sYS5mbi50b29sdGlwLkNvbnN0cnVjdG9yLkRFRkFVTFRTLHtwbGFjZW1lbnQ6InJpZ2h0Iix0cmlnZ2VyOiJjbGljayIsY29udGVudDoiIix0ZW1wbGF0ZTonPGRpdiBjbGFzcz0icG9wb3ZlciIgcm9sZT0idG9vbHRpcCI+PGRpdiBjbGFzcz0iYXJyb3ciPjwvZGl2PjxoMyBjbGFzcz0icG9wb3Zlci10aXRsZSI+PC9oMz48ZGl2IGNsYXNzPSJwb3BvdmVyLWNvbnRlbnQiPjwvZGl2PjwvZGl2Pid9KSxjLnByb3RvdHlwZT1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlKSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLGMucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuREVGQVVMVFN9LGMucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcCgpLGI9dGhpcy5nZXRUaXRsZSgpLGM9dGhpcy5nZXRDb250ZW50KCk7YS5maW5kKCIucG9wb3Zlci10aXRsZSIpW3RoaXMub3B0aW9ucy5odG1sPyJodG1sIjoidGV4dCJdKGIpLGEuZmluZCgiLnBvcG92ZXItY29udGVudCIpLmNoaWxkcmVuKCkuZGV0YWNoKCkuZW5kKClbdGhpcy5vcHRpb25zLmh0bWw/InN0cmluZyI9PXR5cGVvZiBjPyJodG1sIjoiYXBwZW5kIjoidGV4dCJdKGMpLGEucmVtb3ZlQ2xhc3MoImZhZGUgdG9wIGJvdHRvbSBsZWZ0IHJpZ2h0IGluIiksYS5maW5kKCIucG9wb3Zlci10aXRsZSIpLmh0bWwoKXx8YS5maW5kKCIucG9wb3Zlci10aXRsZSIpLmhpZGUoKX0sYy5wcm90b3R5cGUuaGFzQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpdGxlKCl8fHRoaXMuZ2V0Q29udGVudCgpfSxjLnByb3RvdHlwZS5nZXRDb250ZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudCxiPXRoaXMub3B0aW9ucztyZXR1cm4gYS5hdHRyKCJkYXRhLWNvbnRlbnQiKXx8KCJmdW5jdGlvbiI9PXR5cGVvZiBiLmNvbnRlbnQ/Yi5jb250ZW50LmNhbGwoYVswXSk6Yi5jb250ZW50KX0sYy5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYXJyb3c9dGhpcy4kYXJyb3d8fHRoaXMudGlwKCkuZmluZCgiLmFycm93Iil9O3ZhciBkPWEuZm4ucG9wb3ZlcjthLmZuLnBvcG92ZXI9YixhLmZuLnBvcG92ZXIuQ29uc3RydWN0b3I9YyxhLmZuLnBvcG92ZXIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnBvcG92ZXI9ZCx0aGlzfX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYyxkKXt0aGlzLiRib2R5PWEoZG9jdW1lbnQuYm9keSksdGhpcy4kc2Nyb2xsRWxlbWVudD1hKGEoYykuaXMoZG9jdW1lbnQuYm9keSk/d2luZG93OmMpLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxiLkRFRkFVTFRTLGQpLHRoaXMuc2VsZWN0b3I9KHRoaXMub3B0aW9ucy50YXJnZXR8fCIiKSsiIC5uYXYgbGkgPiBhIix0aGlzLm9mZnNldHM9W10sdGhpcy50YXJnZXRzPVtdLHRoaXMuYWN0aXZlVGFyZ2V0PW51bGwsdGhpcy5zY3JvbGxIZWlnaHQ9MCx0aGlzLiRzY3JvbGxFbGVtZW50Lm9uKCJzY3JvbGwuYnMuc2Nyb2xsc3B5IixhLnByb3h5KHRoaXMucHJvY2Vzcyx0aGlzKSksdGhpcy5yZWZyZXNoKCksdGhpcy5wcm9jZXNzKCl9ZnVuY3Rpb24gYyhjKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YSgiYnMuc2Nyb2xsc3B5IiksZj0ib2JqZWN0Ij09dHlwZW9mIGMmJmM7ZXx8ZC5kYXRhKCJicy5zY3JvbGxzcHkiLGU9bmV3IGIodGhpcyxmKSksInN0cmluZyI9PXR5cGVvZiBjJiZlW2NdKCl9KX1iLlZFUlNJT049IjMuMy43IixiLkRFRkFVTFRTPXtvZmZzZXQ6MTB9LGIucHJvdG90eXBlLmdldFNjcm9sbEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRzY3JvbGxFbGVtZW50WzBdLnNjcm9sbEhlaWdodHx8TWF0aC5tYXgodGhpcy4kYm9keVswXS5zY3JvbGxIZWlnaHQsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCl9LGIucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Im9mZnNldCIsZD0wO3RoaXMub2Zmc2V0cz1bXSx0aGlzLnRhcmdldHM9W10sdGhpcy5zY3JvbGxIZWlnaHQ9dGhpcy5nZXRTY3JvbGxIZWlnaHQoKSxhLmlzV2luZG93KHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0pfHwoYz0icG9zaXRpb24iLGQ9dGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSksdGhpcy4kYm9keS5maW5kKHRoaXMuc2VsZWN0b3IpLm1hcChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyksZT1iLmRhdGEoInRhcmdldCIpfHxiLmF0dHIoImhyZWYiKSxmPS9eIy4vLnRlc3QoZSkmJmEoZSk7cmV0dXJuIGYmJmYubGVuZ3RoJiZmLmlzKCI6dmlzaWJsZSIpJiZbW2ZbY10oKS50b3ArZCxlXV18fG51bGx9KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGFbMF0tYlswXX0pLmVhY2goZnVuY3Rpb24oKXtiLm9mZnNldHMucHVzaCh0aGlzWzBdKSxiLnRhcmdldHMucHVzaCh0aGlzWzFdKX0pfSxiLnByb3RvdHlwZS5wcm9jZXNzPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpK3RoaXMub3B0aW9ucy5vZmZzZXQsYz10aGlzLmdldFNjcm9sbEhlaWdodCgpLGQ9dGhpcy5vcHRpb25zLm9mZnNldCtjLXRoaXMuJHNjcm9sbEVsZW1lbnQuaGVpZ2h0KCksZT10aGlzLm9mZnNldHMsZj10aGlzLnRhcmdldHMsZz10aGlzLmFjdGl2ZVRhcmdldDtpZih0aGlzLnNjcm9sbEhlaWdodCE9YyYmdGhpcy5yZWZyZXNoKCksYj49ZClyZXR1cm4gZyE9KGE9ZltmLmxlbmd0aC0xXSkmJnRoaXMuYWN0aXZhdGUoYSk7aWYoZyYmYjxlWzBdKXJldHVybiB0aGlzLmFjdGl2ZVRhcmdldD1udWxsLHRoaXMuY2xlYXIoKTtmb3IoYT1lLmxlbmd0aDthLS07KWchPWZbYV0mJmI+PWVbYV0mJih2b2lkIDA9PT1lW2ErMV18fGI8ZVthKzFdKSYmdGhpcy5hY3RpdmF0ZShmW2FdKX0sYi5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oYil7CnRoaXMuYWN0aXZlVGFyZ2V0PWIsdGhpcy5jbGVhcigpO3ZhciBjPXRoaXMuc2VsZWN0b3IrJ1tkYXRhLXRhcmdldD0iJytiKyciXSwnK3RoaXMuc2VsZWN0b3IrJ1tocmVmPSInK2IrJyJdJyxkPWEoYykucGFyZW50cygibGkiKS5hZGRDbGFzcygiYWN0aXZlIik7ZC5wYXJlbnQoIi5kcm9wZG93bi1tZW51IikubGVuZ3RoJiYoZD1kLmNsb3Nlc3QoImxpLmRyb3Bkb3duIikuYWRkQ2xhc3MoImFjdGl2ZSIpKSxkLnRyaWdnZXIoImFjdGl2YXRlLmJzLnNjcm9sbHNweSIpfSxiLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2EodGhpcy5zZWxlY3RvcikucGFyZW50c1VudGlsKHRoaXMub3B0aW9ucy50YXJnZXQsIi5hY3RpdmUiKS5yZW1vdmVDbGFzcygiYWN0aXZlIil9O3ZhciBkPWEuZm4uc2Nyb2xsc3B5O2EuZm4uc2Nyb2xsc3B5PWMsYS5mbi5zY3JvbGxzcHkuQ29uc3RydWN0b3I9YixhLmZuLnNjcm9sbHNweS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uc2Nyb2xsc3B5PWQsdGhpc30sYSh3aW5kb3cpLm9uKCJsb2FkLmJzLnNjcm9sbHNweS5kYXRhLWFwaSIsZnVuY3Rpb24oKXthKCdbZGF0YS1zcHk9InNjcm9sbCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyk7Yy5jYWxsKGIsYi5kYXRhKCkpfSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoImJzLnRhYiIpO2V8fGQuZGF0YSgiYnMudGFiIixlPW5ldyBjKHRoaXMpKSwic3RyaW5nIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBjPWZ1bmN0aW9uKGIpe3RoaXMuZWxlbWVudD1hKGIpfTtjLlZFUlNJT049IjMuMy43IixjLlRSQU5TSVRJT05fRFVSQVRJT049MTUwLGMucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmVsZW1lbnQsYz1iLmNsb3Nlc3QoInVsOm5vdCguZHJvcGRvd24tbWVudSkiKSxkPWIuZGF0YSgidGFyZ2V0Iik7aWYoZHx8KGQ9Yi5hdHRyKCJocmVmIiksZD1kJiZkLnJlcGxhY2UoLy4qKD89I1teXHNdKiQpLywiIikpLCFiLnBhcmVudCgibGkiKS5oYXNDbGFzcygiYWN0aXZlIikpe3ZhciBlPWMuZmluZCgiLmFjdGl2ZTpsYXN0IGEiKSxmPWEuRXZlbnQoImhpZGUuYnMudGFiIix7cmVsYXRlZFRhcmdldDpiWzBdfSksZz1hLkV2ZW50KCJzaG93LmJzLnRhYiIse3JlbGF0ZWRUYXJnZXQ6ZVswXX0pO2lmKGUudHJpZ2dlcihmKSxiLnRyaWdnZXIoZyksIWcuaXNEZWZhdWx0UHJldmVudGVkKCkmJiFmLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgaD1hKGQpO3RoaXMuYWN0aXZhdGUoYi5jbG9zZXN0KCJsaSIpLGMpLHRoaXMuYWN0aXZhdGUoaCxoLnBhcmVudCgpLGZ1bmN0aW9uKCl7ZS50cmlnZ2VyKHt0eXBlOiJoaWRkZW4uYnMudGFiIixyZWxhdGVkVGFyZ2V0OmJbMF19KSxiLnRyaWdnZXIoe3R5cGU6InNob3duLmJzLnRhYiIscmVsYXRlZFRhcmdldDplWzBdfSl9KX19fSxjLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihiLGQsZSl7ZnVuY3Rpb24gZigpe2cucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpLmZpbmQoIj4gLmRyb3Bkb3duLW1lbnUgPiAuYWN0aXZlIikucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpLmVuZCgpLmZpbmQoJ1tkYXRhLXRvZ2dsZT0idGFiIl0nKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMSksYi5hZGRDbGFzcygiYWN0aXZlIikuZmluZCgnW2RhdGEtdG9nZ2xlPSJ0YWIiXScpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCEwKSxoPyhiWzBdLm9mZnNldFdpZHRoLGIuYWRkQ2xhc3MoImluIikpOmIucmVtb3ZlQ2xhc3MoImZhZGUiKSxiLnBhcmVudCgiLmRyb3Bkb3duLW1lbnUiKS5sZW5ndGgmJmIuY2xvc2VzdCgibGkuZHJvcGRvd24iKS5hZGRDbGFzcygiYWN0aXZlIikuZW5kKCkuZmluZCgnW2RhdGEtdG9nZ2xlPSJ0YWIiXScpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCEwKSxlJiZlKCl9dmFyIGc9ZC5maW5kKCI+IC5hY3RpdmUiKSxoPWUmJmEuc3VwcG9ydC50cmFuc2l0aW9uJiYoZy5sZW5ndGgmJmcuaGFzQ2xhc3MoImZhZGUiKXx8ISFkLmZpbmQoIj4gLmZhZGUiKS5sZW5ndGgpO2cubGVuZ3RoJiZoP2cub25lKCJic1RyYW5zaXRpb25FbmQiLGYpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6ZigpLGcucmVtb3ZlQ2xhc3MoImluIil9O3ZhciBkPWEuZm4udGFiO2EuZm4udGFiPWIsYS5mbi50YWIuQ29uc3RydWN0b3I9YyxhLmZuLnRhYi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4udGFiPWQsdGhpc307dmFyIGU9ZnVuY3Rpb24oYyl7Yy5wcmV2ZW50RGVmYXVsdCgpLGIuY2FsbChhKHRoaXMpLCJzaG93Iil9O2EoZG9jdW1lbnQpLm9uKCJjbGljay5icy50YWIuZGF0YS1hcGkiLCdbZGF0YS10b2dnbGU9InRhYiJdJyxlKS5vbigiY2xpY2suYnMudGFiLmRhdGEtYXBpIiwnW2RhdGEtdG9nZ2xlPSJwaWxsIl0nLGUpfShqUXVlcnkpLCtmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YSgiYnMuYWZmaXgiKSxmPSJvYmplY3QiPT10eXBlb2YgYiYmYjtlfHxkLmRhdGEoImJzLmFmZml4IixlPW5ldyBjKHRoaXMsZikpLCJzdHJpbmciPT10eXBlb2YgYiYmZVtiXSgpfSl9dmFyIGM9ZnVuY3Rpb24oYixkKXt0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkKSx0aGlzLiR0YXJnZXQ9YSh0aGlzLm9wdGlvbnMudGFyZ2V0KS5vbigic2Nyb2xsLmJzLmFmZml4LmRhdGEtYXBpIixhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSkub24oImNsaWNrLmJzLmFmZml4LmRhdGEtYXBpIixhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3AsdGhpcykpLHRoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLmFmZml4ZWQ9bnVsbCx0aGlzLnVucGluPW51bGwsdGhpcy5waW5uZWRPZmZzZXQ9bnVsbCx0aGlzLmNoZWNrUG9zaXRpb24oKX07Yy5WRVJTSU9OPSIzLjMuNyIsYy5SRVNFVD0iYWZmaXggYWZmaXgtdG9wIGFmZml4LWJvdHRvbSIsYy5ERUZBVUxUUz17b2Zmc2V0OjAsdGFyZ2V0OndpbmRvd30sYy5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLGY9dGhpcy4kZWxlbWVudC5vZmZzZXQoKSxnPXRoaXMuJHRhcmdldC5oZWlnaHQoKTtpZihudWxsIT1jJiYidG9wIj09dGhpcy5hZmZpeGVkKXJldHVybiBlPGMmJiJ0b3AiO2lmKCJib3R0b20iPT10aGlzLmFmZml4ZWQpcmV0dXJuIG51bGwhPWM/IShlK3RoaXMudW5waW48PWYudG9wKSYmImJvdHRvbSI6IShlK2c8PWEtZCkmJiJib3R0b20iO3ZhciBoPW51bGw9PXRoaXMuYWZmaXhlZCxpPWg/ZTpmLnRvcCxqPWg/ZzpiO3JldHVybiBudWxsIT1jJiZlPD1jPyJ0b3AiOm51bGwhPWQmJmkraj49YS1kJiYiYm90dG9tIn0sYy5wcm90b3R5cGUuZ2V0UGlubmVkT2Zmc2V0PWZ1bmN0aW9uKCl7aWYodGhpcy5waW5uZWRPZmZzZXQpcmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0O3RoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoYy5SRVNFVCkuYWRkQ2xhc3MoImFmZml4Iik7dmFyIGE9dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLGI9dGhpcy4kZWxlbWVudC5vZmZzZXQoKTtyZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ9Yi50b3AtYX0sYy5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3A9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGEucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLHRoaXMpLDEpfSxjLnByb3RvdHlwZS5jaGVja1Bvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy4kZWxlbWVudC5pcygiOnZpc2libGUiKSl7dmFyIGI9dGhpcy4kZWxlbWVudC5oZWlnaHQoKSxkPXRoaXMub3B0aW9ucy5vZmZzZXQsZT1kLnRvcCxmPWQuYm90dG9tLGc9TWF0aC5tYXgoYShkb2N1bWVudCkuaGVpZ2h0KCksYShkb2N1bWVudC5ib2R5KS5oZWlnaHQoKSk7Im9iamVjdCIhPXR5cGVvZiBkJiYoZj1lPWQpLCJmdW5jdGlvbiI9PXR5cGVvZiBlJiYoZT1kLnRvcCh0aGlzLiRlbGVtZW50KSksImZ1bmN0aW9uIj09dHlwZW9mIGYmJihmPWQuYm90dG9tKHRoaXMuJGVsZW1lbnQpKTt2YXIgaD10aGlzLmdldFN0YXRlKGcsYixlLGYpO2lmKHRoaXMuYWZmaXhlZCE9aCl7bnVsbCE9dGhpcy51bnBpbiYmdGhpcy4kZWxlbWVudC5jc3MoInRvcCIsIiIpO3ZhciBpPSJhZmZpeCIrKGg/Ii0iK2g6IiIpLGo9YS5FdmVudChpKyIuYnMuYWZmaXgiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoaiksai5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm47dGhpcy5hZmZpeGVkPWgsdGhpcy51bnBpbj0iYm90dG9tIj09aD90aGlzLmdldFBpbm5lZE9mZnNldCgpOm51bGwsdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhjLlJFU0VUKS5hZGRDbGFzcyhpKS50cmlnZ2VyKGkucmVwbGFjZSgiYWZmaXgiLCJhZmZpeGVkIikrIi5icy5hZmZpeCIpfSJib3R0b20iPT1oJiZ0aGlzLiRlbGVtZW50Lm9mZnNldCh7dG9wOmctYi1mfSl9fTt2YXIgZD1hLmZuLmFmZml4O2EuZm4uYWZmaXg9YixhLmZuLmFmZml4LkNvbnN0cnVjdG9yPWMsYS5mbi5hZmZpeC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uYWZmaXg9ZCx0aGlzfSxhKHdpbmRvdykub24oImxvYWQiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtc3B5PSJhZmZpeCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1jLmRhdGEoKTtkLm9mZnNldD1kLm9mZnNldHx8e30sbnVsbCE9ZC5vZmZzZXRCb3R0b20mJihkLm9mZnNldC5ib3R0b209ZC5vZmZzZXRCb3R0b20pLG51bGwhPWQub2Zmc2V0VG9wJiYoZC5vZmZzZXQudG9wPWQub2Zmc2V0VG9wKSxiLmNhbGwoYyxkKX0pfSl9KGpRdWVyeSk7CmRlZmluZSgiYm9vdHN0cmFwIiwgWyJqcXVlcnkiXSwgZnVuY3Rpb24oKXt9KTsKCi8qIQogKiBqUHVzaE1lbnUuanMKICogMS4xLjEKICogQGF1dGhvcjogdGFraWVuCiAqIGh0dHA6Ly90YWtpZW4uY29tCiAqIE9yaWdpbmFsIHZlcnNpb24gKHB1cmUgSlMpIGlzIGNyZWF0ZWQgYnkgTWFyeSBMb3UgaHR0cDovL3R5bXBhbnVzLm5ldC8KICovCgooZnVuY3Rpb24oJCkgewoKICAgICQuZm4ualB1c2hNZW51ID0gZnVuY3Rpb24oY3VzdG9tT3B0aW9ucykgewogICAgICAgIHZhciBvID0gJC5leHRlbmQoe30sICQuZm4ualB1c2hNZW51LmRlZmF1bHRPcHRpb25zLCBjdXN0b21PcHRpb25zKTsKCiAgICAgICAgLyogYWRkIGNsYXNzIHRvIHRoZSBib2R5LiovCgogICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcyhvLmJvZHlDbGFzcyk7CiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnalB1c2hNZW51QnRuJyk7CiAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIHRhcmdldCAgICAgICAgID0gJycsCiAgICAgICAgICAgICAgICBwdXNoX2RpcmVjdGlvbiAgICAgPSAnJzsKCgogICAgICAgICAgICBpZigkKHRoaXMpLmlzKCcuJytvLnNob3dMZWZ0Q2xhc3MpKSB7CiAgICAgICAgICAgICAgICB0YXJnZXQgICAgICAgICA9ICcuY2JwLXNwbWVudS1sZWZ0JzsKICAgICAgICAgICAgICAgIHB1c2hfZGlyZWN0aW9uID0gJ3RvcmlnaHQnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYoJCh0aGlzKS5pcygnLicrby5zaG93UmlnaHRDbGFzcykpIHsKICAgICAgICAgICAgICAgIHRhcmdldCAgICAgICAgID0gJy5jYnAtc3BtZW51LXJpZ2h0JzsKICAgICAgICAgICAgICAgIHB1c2hfZGlyZWN0aW9uID0gJ3RvbGVmdCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZigkKHRoaXMpLmlzKCcuJytvLnNob3dUb3BDbGFzcykpIHsKICAgICAgICAgICAgICAgIHRhcmdldCAgICAgICAgID0gJy5jYnAtc3BtZW51LXRvcCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZigkKHRoaXMpLmlzKCcuJytvLnNob3dCb3R0b21DbGFzcykpIHsKICAgICAgICAgICAgICAgIHRhcmdldCAgICAgICAgID0gJy5jYnAtc3BtZW51LWJvdHRvbSc7CiAgICAgICAgICAgIH0KCgogICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKG8uYWN0aXZlQ2xhc3MpOwogICAgICAgICAgICAkKHRhcmdldCkudG9nZ2xlQ2xhc3Moby5tZW51T3BlbkNsYXNzKTsKCiAgICAgICAgICAgIGlmKCQodGhpcykuaXMoJy4nK28ucHVzaEJvZHlDbGFzcykpIHsKICAgICAgICAgICAgICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcyggJ2NicC1zcG1lbnUtcHVzaC0nK3B1c2hfZGlyZWN0aW9uICk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIGRpc2FibGUgYWxsIG90aGVyIGJ1dHRvbiovCiAgICAgICAgICAgICQoJy5qUHVzaE1lbnVCdG4nKS5ub3QoJCh0aGlzKSkudG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGpQdXNoTWVudSA9IHsKICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICAgICAgICAkKCcualB1c2hNZW51QnRuLGJvZHksLmNicC1zcG1lbnUnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQgYWN0aXZlIGNicC1zcG1lbnUtb3BlbiBjYnAtc3BtZW51LXB1c2gtdG9sZWZ0IGNicC1zcG1lbnUtcHVzaC10b3JpZ2h0Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmKG8uY2xvc2VPbkNsaWNrT3V0c2lkZSkgewogICAgICAgICAgICAkKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGpQdXNoTWVudS5jbG9zZSgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICQoJy5jYnAtc3BtZW51LC50b2dnbGUtbWVudScpLmNsaWNrKGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKCiAgICAvKiBpbiBjYXNlIHlvdSB3YW50IHRvIGN1c3RvbWl6ZSBjbGFzcyBuYW1lLAogICAgICogIGRvIG5vdCBkaXJlY3RseSBlZGl0IGhlcmUsIHVzZSBmdW5jdGlvbiBwYXJhbWV0ZXIgd2hlbiBjYWxsIGpQdXNoTWVudS4KICAgICAqLwogICAgJC5mbi5qUHVzaE1lbnUuZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgYm9keUNsYXNzICAgICAgIDogJ2NicC1zcG1lbnUtcHVzaCcsCiAgICAgICAgYWN0aXZlQ2xhc3MgICAgIDogJ21lbnUtYWN0aXZlJywKICAgICAgICBzaG93TGVmdENsYXNzICAgOiAnbWVudS1sZWZ0JywKICAgICAgICBzaG93UmlnaHRDbGFzcyAgOiAnbWVudS1yaWdodCcsCiAgICAgICAgc2hvd1RvcENsYXNzICAgIDogJ21lbnUtdG9wJywKICAgICAgICBzaG93Qm90dG9tQ2xhc3MgOiAnbWVudS1ib3R0b20nLAogICAgICAgIG1lbnVPcGVuQ2xhc3MgICA6ICdjYnAtc3BtZW51LW9wZW4nLAogICAgICAgIHB1c2hCb2R5Q2xhc3MgICA6ICdwdXNoLWJvZHknLAogICAgICAgIGNsb3NlT25DbGlja091dHNpZGU6IHRydWUKICAgIH07Cn0pKGpRdWVyeSk7CmRlZmluZSgialB1c2hNZW51IiwgWyJqcXVlcnkiXSwgZnVuY3Rpb24oKXt9KTsKCi8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KCmRlZmluZSgnYXBwL2NvbmZpZ3VyYXRpb24vYXBwQ29uZmlnJyxbXSwgZnVuY3Rpb24gKCkgewoKICAgIGZ1bmN0aW9uIGNvbmZpZygkdHJhbnNsYXRlUHJvdmlkZXIsICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIvKiwgJGxvY2F0aW9uUHJvdmlkZXIqLykgewoKICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5KCdlc2NhcGVQYXJhbWV0ZXJzJyk7CgogICAgICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ2VuJywgZW5nbGlzaCk7CgogICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoIi8jIik7CgogICAgICAgIC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpLmhhc2hQcmVmaXgoIiMiKTsKCiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnByZWZlcnJlZExhbmd1YWdlKCdlbicpOwoKICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnZGVmYXVsdCcsIHsKICAgICAgICAgICAgICAgIHVybDogJy8nLAogICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdmlld3MvaG9tZS1wYWdlLmh0bWwnLAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2NhdGVnb3JpZXNDdHJsJywKICAgICAgICAgICAgICAgIHJlc29sdmU6IHsKCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVBhcmFtczogZnVuY3Rpb24gKHVzZXJTZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIGRlYWxTZXJ2aWNlLCAkcSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdXNlclNlcnZpY2UuaGF2ZUNvbmZpZ3VyYXRpb24oKS50aGVuKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcmllcygpLnRoZW4oZnVuY3Rpb24gKGNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFsU2VydmljZS5nZXREZWFsT2ZUaGVEYXkoKS50aGVuKGZ1bmN0aW9uIChkZWFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZS5nZXRQb3B1bGFyUHJvZHVjdHMoKS50aGVuKGZ1bmN0aW9uIChwb3B1bGFyUHJvZHVjdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZS5udkhhbmRsZXIoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpYWxPZmZlcjogZGVhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhclByb2R1Y3RzOiBwb3B1bGFyUHJvZHVjdHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocGFyYW1zVG9SZXR1cm4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgIC5zdGF0ZSgnZG93bmxvYWRzJywgewogICAgICAgICAgICAgICAgdXJsOiAnL2Rvd25sb2FkcycsCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aWV3cy9kb3dubG9hZHMuaHRtbCcsCiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZG93bmxvYWRzQ3RybCcsCiAgICAgICAgICAgICAgICByZXNvbHZlOiB7fQogICAgICAgICAgICB9KSovCiAgICAgICAgICAgIC5zdGF0ZSgncmVnaXN0ZXInLCB7CiAgICAgICAgICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLAogICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdXNlci92aWV3cy9yZWdpc3Rlci1wYWdlLmh0bWwnLAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3JlZ2lzdGVyQ3RybCcsCiAgICAgICAgICAgICAgICByZXNvbHZlOiB7fQogICAgICAgICAgICB9KQogICAgICAgICAgICAuc3RhdGUoJ2Fib3V0JywgewogICAgICAgICAgICAgICAgdXJsOiAnL2Fib3V0JywKICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3VzZXIvdmlld3MvYWJvdXQtcGFnZS5odG1sJywKICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhYm91dEN0cmwnLAogICAgICAgICAgICAgICAgcmVzb2x2ZToge30KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnN0YXRlKCd2ZXJzaW9uJywgewogICAgICAgICAgICAgICAgdXJsOiAnL3ZlcnNpb24nLAogICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdXNlci92aWV3cy92ZXJzaW9uLXBhZ2UuaHRtbCcsCiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmVyc2lvbkN0cmwnLAogICAgICAgICAgICAgICAgcmVzb2x2ZToge30KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnN0YXRlKCdzdXBwb3J0JywgewogICAgICAgICAgICAgICAgdXJsOiAnL3N1cHBvcnQnLAogICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdmlld3Mvc3VwcG9ydC1wYWdlLmh0bWwnLAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3N1cHBvcnRDdHJsJywKICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3N1cHBDdHJsJywKICAgICAgICAgICAgICAgIHJlc29sdmU6IHsKICAgICAgICAgICAgICAgICAgICBwYXJhbXNUb1Jlc29ydmU6IGZ1bmN0aW9uIChjYXRlZ29yeVNlcnZpY2UsICRxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3JpZXMoKS50aGVuKGZ1bmN0aW9uIChjYXRlZ29yaWVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzOiBjYXRlZ29yaWVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5zdGF0ZSgnc2hvcHBpbmdDYXJ0JywgewogICAgICAgICAgICAgICAgdXJsOiAnL3Nob3BwaW5nQ2FydCcsCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aWV3cy9zaG9wcGluZ0NhcnQuaHRtbCcsCiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2hvcHBpbmdDYXJ0Q3RybCcsCiAgICAgICAgICAgICAgICByZXNvbHZlOiB7CiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGZ1bmN0aW9uIChwcm9kdWN0c0NhcnRTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2R1Y3RzQ2FydFNlcnZpY2UubG9hZENhcnRQcm9kdWN0cygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnN0YXRlKCdjYXRlZ29yeScsIHsKICAgICAgICAgICAgICAgIHVybDogJy9jYXRlZ29yeS86bmFtZS86aWQ/dmlld0FsbCcsCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aWV3cy9jYXRlZ29yeS1wYWdlLmh0bWwnLAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2NhdGVnb3J5Q3RybCcsCiAgICAgICAgICAgICAgICByZXNvbHZlOiB7CiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGZ1bmN0aW9uIChjYXRlZ29yeVNlcnZpY2UsIHByb2R1Y3RTZXJ2aWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlUGFyYW1zLCAkcSwgdXNlclNlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5QnlJZCgkc3RhdGVQYXJhbXMuaWQsICRzdGF0ZVBhcmFtcy5uYW1lKS4KICAgICAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbiAoY2F0ZWdvcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RTZXJ2aWNlLmdldEFsbENhdGVnb3JpZXNBdHRyaWJ1dGVzKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYXR0cmlidXRlcykgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodXNlclNlcnZpY2UubnZfc2xvd1BhZ2UoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcmllcygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeVNlcnZpY2UubnZfbG9hZFVudXNlU2NyaXB0cygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFJlc3VsdDogW2NhdGVnb3J5XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeU5hbWU6IGNhdGVnb3J5LmNhdGVnb3J5TmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0OiBbY2F0ZWdvcnldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5TmFtZTogY2F0ZWdvcnkuY2F0ZWdvcnlOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0FuIGVycm9yIG9jY3VycmVkLCBwbGVhc2UgdHJ5IGFnYWluJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlamVjdCgnZXJyb3IgaW4gbG9hZCBjYXRlZ29yeScpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnN0YXRlKCdzZWFyY2gnLCB7CiAgICAgICAgICAgICAgICB1cmw6ICcvc2VhcmNoLzppZD92aWV3QWxsJywKICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3ZpZXdzL3NlYXJjaC1wYWdlLmh0bWwnLAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NlYXJjaEN0cmwnLAogICAgICAgICAgICAgICAgcmVzb2x2ZTogewogICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBmdW5jdGlvbiAoY2F0ZWdvcnlTZXJ2aWNlLCBwcm9kdWN0U2VydmljZSwgJHN0YXRlUGFyYW1zLCAkcSwgJGZpbHRlcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0U2VydmljZS5nZXRQcm9kdWN0c0J5U2VhcmNoKCRzdGF0ZVBhcmFtcy52aWV3QWxsLCAtMSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2F0ZWdvcmllc0ZpbHRlciA9ICRmaWx0ZXIoImdldENhdGVnb3JpZXNJbkFycmF5IikoW10sIHJlc3VsdCwgJHN0YXRlUGFyYW1zLmlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtc1RvUmV0dXJuID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFJlc3VsdDogcmVzdWx0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdBbGw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hLZXk6ICRzdGF0ZVBhcmFtcy52aWV3QWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNGaWx0ZXI6IGNhdGVnb3JpZXNGaWx0ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHBhcmFtc1RvUmV0dXJuKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC8vLnN0YXRlKCdwcm9kdWN0JywgewogICAgICAgICAgICAvLyAgICB1cmw6ICcvcHJvZHVjdC86aWQ/Y29sb3ImcXVhbnRpdHkmcGFnZVN0YXRlJywKICAgICAgICAgICAgLy8gICAgdGVtcGxhdGVVcmw6ICdhcHAvdmlld3MvcHJvZHVjdC1wYWdlLmh0bWwnLAogICAgICAgICAgICAvLyAgICBjb250cm9sbGVyOiAncHJvZHVjdEN0cmwnLAogICAgICAgICAgICAvLyAgICByZXNvbHZlOiB7CiAgICAgICAgICAgIC8vICAgICAgICByZXNvbHZlUGFyYW1zOiBmdW5jdGlvbiAocHJvZHVjdFNlcnZpY2UsIGNhdGVnb3J5U2VydmljZSwgJHN0YXRlUGFyYW1zLCAkcSkgewogICAgICAgICAgICAvLyAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgcHJvZHVjdFNlcnZpY2UuZ2V0UHJvZHVjdEJ5SWQoJHN0YXRlUGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRxLmFsbChbY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5QnlJZChwcm9kdWN0LmNhdGVnb3J5SWQpLAogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZS5oYXZlSW50ZXJuZXQocHJvZHVjdC5jYXRlZ29yeUlkKSwKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeVNlcnZpY2UuZ2V0TW9zdFBvcHVsYXJDb21tZW50cyhwcm9kdWN0LmNhdGVnb3J5SWQpLAogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0gcmVzWzBdOwogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgdmFyIGhhdmVJbnRlcm5ldCA9IHJlc1sxXTsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHZhciBtb3N0UG9wdWxhckNvbW1lbnRzID0gcmVzWzJdOwogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtc1RvUmV0dXJuID0gewogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ29sb3I6ICRzdGF0ZVBhcmFtcy5jb2xvciwKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogJHN0YXRlUGFyYW1zLnF1YW50aXR5LAogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTdGF0ZTogJHN0YXRlUGFyYW1zLnBhZ2VTdGF0ZSwKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeU5hbWU6IGNhdGVnb3J5LmNhdGVnb3J5TmFtZSwKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LAogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIGhhdmVJbnRlcm5ldDogaGF2ZUludGVybmV0LAogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RQb3B1bGFyQ29tbWVudHM6IG1vc3RQb3B1bGFyQ29tbWVudHMKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocGFyYW1zVG9SZXR1cm4pCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAvLyAgICAgICAgfQogICAgICAgICAgICAvLyAgICB9CiAgICAgICAgICAgIC8vfSkuCgogICAgICAgICAgICAuc3RhdGUoJ3Byb2R1Y3QnLCB7CiAgICAgICAgICAgICAgICB1cmw6ICcvcHJvZHVjdC86aWQ/Y29sb3ImcXVhbnRpdHkmcGFnZVN0YXRlJywKICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3ZpZXdzL3Byb2R1Y3QtcGFnZS5odG1sJywKICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwcm9kdWN0Q3RybCcsCiAgICAgICAgICAgICAgICByZXNvbHZlOiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVBhcmFtczogZnVuY3Rpb24gKHByb2R1Y3RTZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsICRzdGF0ZVBhcmFtcywgJHEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFNlcnZpY2UuZ2V0UHJvZHVjdEJ5SWQoJHN0YXRlUGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChwcm9kdWN0KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHEuYWxsKFtjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcnlCeUlkKHByb2R1Y3QuY2F0ZWdvcnlJZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZS5oYXZlSW50ZXJuZXQocHJvZHVjdC5jYXRlZ29yeUlkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2F0ZWdvcnkgPSByZXNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhdmVJbnRlcm5ldCA9IHJlc1sxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LmNvbG9ycyA9IHByb2R1Y3QuY29sb3JzLmZpbHRlcihmdW5jdGlvbihjb2wpe3JldHVybiBjb2wuaW5TdG9jayA+IDB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXNUb1JldHVybiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ29sb3I6ICRzdGF0ZVBhcmFtcy5jb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAkc3RhdGVQYXJhbXMucXVhbnRpdHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlU3RhdGU6ICRzdGF0ZVBhcmFtcy5wYWdlU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeU5hbWU6IGNhdGVnb3J5LmNhdGVnb3J5TmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXZlSW50ZXJuZXQ6IGhhdmVJbnRlcm5ldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHBhcmFtc1RvUmV0dXJuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0FuIGVycm9yIG9jY3VycmVkLCBwbGVhc2UgdHJ5IGFnYWluJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlamVjdCgnZXJyb3IgaW4gbG9hZCBwcm9kdWN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLgogICAgICAgIHN0YXRlKCc0MDQnLCB7CiAgICAgICAgICAgIHVybDogJy80MDQnLAogICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aWV3cy80MDQuaHRtbCcsCiAgICAgICAgfSk7CiAgICB9CgogICAgY29uZmlnLiRpbmplY3QgPSBbJyR0cmFuc2xhdGVQcm92aWRlcicsICckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInXTsKICAgIHJldHVybiBjb25maWc7Cgp9KTsKCgovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTEvMTYvMjAxNS4KICovCgpkZWZpbmUoJ2FwcC91c2VyL3VzZXJDb25maWcnLFtdLGZ1bmN0aW9uKCl7CiAgICBmdW5jdGlvbiBjb25maWcoJHRyYW5zbGF0ZVByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCAkc3RhdGVQcm92aWRlcikgewoKICAgIH0KICAgIGNvbmZpZy4kaW5qZWN0PVsnJHRyYW5zbGF0ZVByb3ZpZGVyJywgJyRodHRwUHJvdmlkZXInLCAnJHN0YXRlUHJvdmlkZXInXTsKICAgIHJldHVybiBjb25maWc7Cn0pOwovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAzMS8xMi8yMDE1LgogKi8KCmRlZmluZSgnYXBwL29yZGVyL29yZGVyQ29uZmlnJyxbXSwgZnVuY3Rpb24gKCkgewoKICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlcikgewoKICAgICAgICAkc3RhdGVQcm92aWRlci4KICAgICAgICBzdGF0ZSgnb3JkZXJQYXltZW50JywgewogICAgICAgICAgICB1cmw6ICcvb3JkZXJQYXltZW50JywKICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvb3JkZXIvdmlld3Mvb3JkZXJQYXltZW50LXBhZ2UuaHRtbCcsCiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdvcmRlclBheW1lbnRDdHJsJywKICAgICAgICAgICAgY29udHJvbGxlckFzOiAnb3BDdHJsJywKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgLy9yZXF1aXJlTG9naW46IHRydWUsICAvLyB0aGlzIHByb3BlcnR5IHdpbGwgYXBwbHkgdG8gYWxsIGNoaWxkcmVuIG9mICdhcHAnCiAgICAgICAgICAgICAgICBicmVhZGNydW1iTmFtZTogIm9yZGVyUGF5bWVudCIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlc29sdmU6IHsKICAgICAgICAgICAgICAgIHJlc29sdmVQYXJhbXM6IGZ1bmN0aW9uICgkcSwgb3JkZXJTZXJ2aWNlLCBhY2NvdW50U2VydmljZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CgogICAgICAgICAgICAgICAgICAgIG9yZGVyU2VydmljZS5nZXRBY2NvdW50QnlJZCgpLgogICAgICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXIpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UuZ2V0QWNjb3VudERldGFpbHMoKS50aGVuKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYWNjb3VudERldGFpbHMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlclNlcnZpY2UuZ2V0U2hpcHBpbmdDb3N0KHVzZXIpLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbiAoc2hpcHBpbmdDb3N0KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRTZXJ2aWNlLmdldEFjY291bnRQYXltZW50UHJlZmVyZW5jZXMoKS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uIChwYXltZW50UHJlZmVyZW5jZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50UHJlZmVyZW5jZXM6IHBheW1lbnRQcmVmZXJlbmNlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBwaW5nQ29zdDogc2hpcHBpbmdDb3N0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogdXNlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnREZXRhaWxzOiBhY2NvdW50RGV0YWlscywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwcGluZ0Nvc3Q6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pLgogICAgICAgIHN0YXRlKCdsb2dpbicsIHsKICAgICAgICAgICAgdXJsOiAnL2xvZ2luJywKICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvb3JkZXIvdmlld3MvdXNlci1ub3QtbG9naW4tcGFnZS5odG1sJywKICAgICAgICAgICAgY29udHJvbGxlcjogJ3VzZXJOb3RMb2dpbkN0cmwnLAogICAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBbJyRzdGF0ZVByb3ZpZGVyJywgY29uZmlnXTsKCn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDMxLzEyLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvYWNjb3VudC9hY2NvdW50Q29uZmlnJyxbXSwgZnVuY3Rpb24gKCkgewoKICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlcikgewoKICAgICAgICAkc3RhdGVQcm92aWRlci4KICAgICAgICBzdGF0ZSgnbXlBY2NvdW50JywgewogICAgICAgICAgICB1cmw6ICcvbXlBY2NvdW50JywKICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvYWNjb3VudC92aWV3cy9teUFjY291bnQtcGFnZS5odG1sJywKICAgICAgICAgICAgY29udHJvbGxlcjogJ215QWNjb3VudEN0cmwnLAogICAgICAgICAgICBjb250cm9sbGVyQXM6ICdtYUN0cmwnLAogICAgICAgICAgICByZXNvbHZlOiB7CiAgICAgICAgICAgICAgICByZXNvbHZlUGFyYW1zOiBmdW5jdGlvbiAoJHEsIGFjY291bnRTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS5nZXRBY2NvdW50RGV0YWlscygpLnRoZW4oCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhY2NvdW50RGV0YWlscykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UuZ2V0U2hpcHBpbmdEZXRhaWxzKGFjY291bnREZXRhaWxzKS50aGVuKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChzaGlwcGluZ0RldGFpbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UuZ2V0QWNjb3VudFBheW1lbnRQcmVmZXJlbmNlcygpLnRoZW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocGF5bWVudFByZWZlcmVuY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnREZXRhaWxzOiBhY2NvdW50RGV0YWlscywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcHBpbmdEZXRhaWxzOiBzaGlwcGluZ0RldGFpbHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRQcmVmZXJlbmNlczogcGF5bWVudFByZWZlcmVuY2VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSkuCiAgICAgICAgc3RhdGUoJ2FjY291bnREZXRhaWxzJywgewogICAgICAgICAgICB1cmw6ICcvYWNjb3VudERldGFpbHMnLAogICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9hY2NvdW50L3ZpZXdzL2FjY291bnREZXRhaWxzLXBhZ2UuaHRtbCcsCiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhY2NvdW50RGV0YWlsc0N0cmwnLAogICAgICAgICAgICBjb250cm9sbGVyQXM6ICdhZEN0cmwnLAogICAgICAgICAgICByZXNvbHZlOiB7CiAgICAgICAgICAgICAgICByZXNvbHZlUGFyYW1zOiBmdW5jdGlvbiAoJHEsIGFjY291bnRTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKQogICAgICAgICAgICAgICAgICAgIGFjY291bnRTZXJ2aWNlLmdldEFjY291bnREZXRhaWxzKCkudGhlbigKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGFjY291bnREZXRhaWxzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50RGV0YWlsczogYWNjb3VudERldGFpbHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KS4KICAgICAgICBzdGF0ZSgnYWNjb3VudFBheW1lbnRFZGl0JywgewogICAgICAgICAgICB1cmw6ICcvYWNjb3VudFBheW1lbnRFZGl0JywKICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvYWNjb3VudC92aWV3cy9hY2NvdW50UGF5bWVudEVkaXQtcGFnZS5odG1sJywKICAgICAgICAgICAgY29udHJvbGxlcjogJ2FjY291bnRQYXltZW50RWRpdEN0cmwnLAogICAgICAgICAgICBjb250cm9sbGVyQXM6ICdhcGVDdHJsJywKICAgICAgICAgICAgcmVzb2x2ZTogewogICAgICAgICAgICAgICAgcmVzb2x2ZVBhcmFtczogZnVuY3Rpb24gKCRxLCBhY2NvdW50U2VydmljZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCkKICAgICAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS5nZXRBY2NvdW50RGV0YWlscygpLnRoZW4oCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhY2NvdW50RGV0YWlscykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UuZ2V0QWNjb3VudFBheW1lbnRQcmVmZXJlbmNlcygpLnRoZW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHBheW1lbnRQcmVmZXJlbmNlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRQcmVmZXJlbmNlczogcGF5bWVudFByZWZlcmVuY2VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudERldGFpbHM6IGFjY291bnREZXRhaWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KS4KICAgICAgICBzdGF0ZSgnTXlPcmRlcnMnLCB7CiAgICAgICAgICAgIHVybDogJy9NeU9yZGVycycsCiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2FjY291bnQvdmlld3MvTXlPcmRlcnMtcGFnZS5odG1sJywKICAgICAgICAgICAgY29udHJvbGxlcjogJ215T3JkZXJzQ3RybCcsCiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ215T3JkZXJzQ3RybCcsCiAgICAgICAgICAgIHJlc29sdmU6IHsKICAgICAgICAgICAgICAgIHJlc29sdmVQYXJhbXM6IGZ1bmN0aW9uICgkcSwgYWNjb3VudFNlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpCiAgICAgICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UuZ2V0QWNjb3VudE9yZGVyKCkudGhlbigKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKG9yZGVycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzOiBvcmRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBbJyRzdGF0ZVByb3ZpZGVyJywgY29uZmlnXTsKCn0pOwoKCi8vdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKLy9vcmRlclNlcnZpY2UuZ2V0QWNjb3VudEJ5SWQoKS4KLy90aGVuKGZ1bmN0aW9uICh1c2VyKSB7Ci8vICAgIGlmKHVzZXIpCi8vICAgIHsKLy8gICAgICAgIG9yZGVyU2VydmljZS5nZXRTaGlwcGluZ0Nvc3QodXNlcikuCi8vICAgICAgICB0aGVuKGZ1bmN0aW9uIChzaGlwcGluZ0Nvc3QpIHsKLy8KLy8gICAgICAgICAgICBkZWZlci5yZXNvbHZlKHsKLy8gICAgICAgICAgICAgICAgc2hpcHBpbmdDb3N0IDogc2hpcHBpbmdDb3N0LAovLyAgICAgICAgICAgICAgICB1c2VyIDogdXNlciwKLy8gICAgICAgICAgICAgICAgbm9DYXJkczogdHJ1ZSwKLy8gICAgICAgICAgICAgICAgQ2FyZE51bWJlcjogW10sCi8vICAgICAgICAgICAgfSk7Ci8vICAgICAgICB9KTsKLy8gICAgfQovLyAgICBlbHNlIHsKLy8gICAgICAgIGRlZmVyLnJlc29sdmUoewovLyAgICAgICAgICAgIHNoaXBwaW5nQ29zdCA6IG51bGwsCi8vICAgICAgICAgICAgdXNlciA6IG51bGwKLy8gICAgICAgIH0pOwovLyAgICB9Ci8vfSk7Ci8vcmV0dXJuIGRlZmVyLnByb21pc2U7CgoKCgoKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDcvMjUvMjAxNy4KICovCmRlZmluZSgnYXBwL2NvbmZpZ3VyYXRpb24vY29tbW9uQ29uZmlnJyxbXSwgZnVuY3Rpb24gKCkgewoKICAgIGZ1bmN0aW9uIGNvbmZpZyhBbmFseXRpY3NQcm92aWRlcikgewogICAgICAgIEFuYWx5dGljc1Byb3ZpZGVyLnNldEFjY291bnQoJ1VBLTgxMzM0MjI3LTEnKTsKICAgICAgICBBbmFseXRpY3NQcm92aWRlci50cmFja1VybFBhcmFtcyh0cnVlKTsKICAgICAgICBBbmFseXRpY3NQcm92aWRlci50cmFja1BhZ2VzKHRydWUpOwogICAgICAgIEFuYWx5dGljc1Byb3ZpZGVyLnNldFBhZ2VFdmVudCgnJHN0YXRlQ2hhbmdlU3VjY2VzcycpOwogICAgfQoKICAgIHJldHVybiBbJ0FuYWx5dGljc1Byb3ZpZGVyJywgY29uZmlnXTsKCn0pOwovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTAvMTMvMjAxNS4KICovCmRlZmluZSgnYXBwL2NvbnRyb2xsZXJzL21vZHVsZScsWydhbmd1bGFyJ10sIGZ1bmN0aW9uIChhbmd1bGFyKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICByZXR1cm4gYW5ndWxhci5tb2R1bGUoJ2Fvcy5jb250cm9sbGVycycsIFtdKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KZGVmaW5lKCdhcHAvY29udHJvbGxlcnMvbWFpbkN0cmwnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGNvbnRyb2xsZXJzKSB7CgoKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ21haW5DdHJsJywgWyckc2NvcGUnLCAnJHEnLCAncHJvZHVjdFNlcnZpY2UnLCAnc21vb3RoU2Nyb2xsJywgJ3VzZXJTZXJ2aWNlJywgJ29yZGVyU2VydmljZScsCiAgICAgICAgJyRsb2NhdGlvbicsICdpcENvb2tpZScsICckcm9vdFNjb3BlJywgJ3Byb2R1Y3RzQ2FydFNlcnZpY2UnLCAnJGZpbHRlcicsICckc3RhdGUnLCAnJHRpbWVvdXQnLCAnY2F0ZWdvcnlTZXJ2aWNlJywKICAgICAgICAnQW5hbHl0aWNzJywKICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkcSwgcHJvZHVjdFNlcnZpY2UsIHNtb290aFNjcm9sbCwgdXNlclNlcnZpY2UsIG9yZGVyU2VydmljZSwgJGxvY2F0aW9uLCAkY29va2llLCAkcm9vdFNjb3BlLAogICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhcnRTZXJ2aWNlLCAkZmlsdGVyLCAkc3RhdGUsICR0aW1lb3V0LCBjYXRlZ29yeVNlcnZpY2UsIEFuYWx5dGljcykgewoKICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzOwogICAgICAgICAgICBjdHJsLmNvbmZpZyA9IHt9OwogICAgICAgICAgICAkc2NvcGUuY2FydDsKICAgICAgICAgICAgJHNjb3BlLmF1dG9Db21wbGV0ZVZhbHVlID0gJyc7CiAgICAgICAgICAgICRzY29wZS5hdXRvQ29tcGxldGVSZXN1bHQgPSB7fTsKCgogICAgICAgICAgICB2YXIgRW50ZXJJbkZvY3VzID0gewogICAgICAgICAgICAgICAgbG9naW46ICdsb2dpbicsCiAgICAgICAgICAgICAgICBzZWFyY2g6ICdzZWFyY2gnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBlbnRlckluRm9jdXMgPSAiIjsKCiAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZS5sb2FkU2VydmVyKCkudGhlbihmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oewogICAgICAgICAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlID09PSAxMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlbnRlckluRm9jdXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudGVySW5Gb2N1cy5sb2dpbjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5sb2dpblVzZXIubG9naW5QYXNzd29yZCAhPSAiIiAmJiAkc2NvcGUubG9naW5Vc2VyLmxvZ2luVXNlciAhPSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5sb2dpblVzZXIuZW1haWwgPT0gIiIgJiYgY3RybC5jb25maWcuZW1haWxBZGRyZXNzSW5Mb2dpbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2lnbkluKCRzY29wZS5sb2dpblVzZXIsIGN0cmwucmVtZW1iZXJNZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnRlckluRm9jdXMuc2VhcmNoOgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvKiBHZXQgYWxsIHByb2R1Y3RzIGRhdGEgKi8KICAgICAgICAgICAgICAgIC8vY2F0ZWdvcnlTZXJ2aWNlLmdldEFsbERhdGEoKTsKICAgICAgICAgICAgICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09ICBlbmQgR2V0IGFsbCBwcm9kdWN0cyBkYXRhID09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCiAgICAgICAgICAgICAgICAvKiBHZXQgY29uZmlndXJhdGlvbiAqLwogICAgICAgICAgICAgICAgLy9CVUc6ICMxNjEwMDEgLSBSZW1vdmUgZHVwbGljYXRlIHJlcXVlc3RzCiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCdjb25maWd1cmF0aW9uTG9hZGVkJywgZnVuY3Rpb24gKGV2ZW50LCBkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgY3RybC5jb25maWcgPSBkYXRhLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWZyZXNoVGltZU91dCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyB1c2VyU2VydmljZS5nZXRDb25maWd1cmF0aW9uKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIC8vICAgICBjdHJsLmNvbmZpZyA9IHJlc3BvbnNlOwogICAgICAgICAgICAgICAgLy8gICAgICRzY29wZS5yZWZyZXNoVGltZU91dCgpOwogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PSAgZW5kIEdldCBjb25maWd1cmF0aW9uID09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKICAgICAgICAgICAgICAgIC8qIGxvYWRpbmcgQ2FydCBzZWN0aW9uICAqLwoKICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2FydFNlcnZpY2UubG9hZENhcnRQcm9kdWN0cygpLnRoZW4oZnVuY3Rpb24gKGNhcnQpIHsKICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2FydCA9IGNhcnQ7CiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhcnRTZXJ2aWNlLmNoZWNrT3V0T2ZTdG9ja1Byb2R1Y3RzSW5DYXJ0KCkudGhlbihmdW5jdGlvbiAoX2NhcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXJ0ID0gX2NhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8qIGVuZCBsb2FkaW5nIENhcnQgc2VjdGlvbiAgKi8KCgogICAgICAgICAgICAgICAgJHNjb3BlLmdvX3VwID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICQoJ2JvZHksIGh0bWwnKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LCAxMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgiLmF1dG9Db21wbGV0ZUNvdmVyIikud2lkdGgoKSA8IDEwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgibmF2IC5uYXZMaW5rcyIpLmNzcygiZGlzcGxheSIsICJibG9jayIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8qIEFib3V0IHNlY3Rpb24gKi8KCiAgICAgICAgICAgICAgICAkc2NvcGUuaGVscCA9IGZ1bmN0aW9uIChtaW5pVGl0bGVJZCkgewogICAgICAgICAgICAgICAgICAgICQoIiNsb2dpbk1pbmlUaXRsZSIpLmZhZGVPdXQoMzAwKTsKICAgICAgICAgICAgICAgICAgICAkKCIjbG9naW5Nb2JpbGVNaW5pVGl0bGUiKS5mYWRlT3V0KDMwMCk7CiAgICAgICAgICAgICAgICAgICAgJCgiIyIgKyBtaW5pVGl0bGVJZCkuZmFkZVRvZ2dsZSgzMDApOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgLyogVXNlciBzZWN0aW9uICovCgoKICAgICAgICAgICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uIChtaW5pVGl0bGVJZCkgewogICAgICAgICAgICAgICAgICAgICQoIiNoZWxwTWluaVRpdGxlIikuZmFkZU91dCgzMDApOwoKICAgICAgICAgICAgICAgICAgICBpZiAoJHJvb3RTY29wZS51c2VyQ29va2llKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIiNoZWxwTW9iaWxlTWluaVRpdGxlIikuZmFkZU91dCgzMDApOwogICAgICAgICAgICAgICAgICAgICAgICAkKCIjIiArIG1pbmlUaXRsZUlkKS5mYWRlVG9nZ2xlKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGVudGVySW5Gb2N1cyA9IEVudGVySW5Gb2N1cy5sb2dpbjsKICAgICAgICAgICAgICAgICAgICB2YXIgdXNlckluZm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVtZW1iZXJNZScpOwogICAgICAgICAgICAgICAgICAgIGlmICh1c2VySW5mbykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyc2VkVXNlckluZm8gPSBKU09OLnBhcnNlKHVzZXJJbmZvKTsKICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2luVXNlci5sb2dpblVzZXIgPSBwYXJzZWRVc2VySW5mby5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9naW5Vc2VyLmxvZ2luUGFzc3dvcmQgPSBwYXJzZWRVc2VySW5mby51c2VyUGFzc3dvcmQ7CiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tYWluQ3RybC5yZW1lbWJlck1lID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIEhlbHBlci5tb2JpbGVTZWN0aW9uQ2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAkKCcjdG9vbFRpcENhcnQnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgICAgICAgICAgICAgICAgIHZhciB3aW5kb3dzV2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gIjUlIjsKICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93c1dpZHRoIDwgNDgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9ICIwIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvd3NXaWR0aCA8IDcwMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSAiMTglIjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICQoIi5Qb3BVcCIpLmZhZGVJbigxMDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiLlBvcFVwID4gZGl2Om50aC1jaGlsZCgxKSIpLmFuaW1hdGUoeyJ0b3AiOiB0b3B9LCA2MDApOwogICAgICAgICAgICAgICAgICAgICAgICAkKCJib2R5IikuY3NzKHsibGVmdCI6ICIwcHgifSkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidXNlcm5hbWUiKVswXS5mb2N1cygpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAkKCIuUG9wVXAsIC5jbG9zZUJ0bi5sb2dpblBvcFVwQ2xvc2VCdG4iKS5jbGljayhmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgICAgIHNldEVudGVySW5Gb2N1c0hhbmRsZXIoKTsKCiAgICAgICAgICAgICAgICAgICAgJCgiLlBvcFVwID4gZGl2Om50aC1jaGlsZCgxKSIpLmFuaW1hdGUoewogICAgICAgICAgICAgICAgICAgICAgICAidG9wIjogIi0xNTAlIgogICAgICAgICAgICAgICAgICAgIH0sIDYwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCIuUG9wVXAiKS5mYWRlT3V0KDEwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiYm9keSIpLmNzcygib3ZlcmZsb3cteSIsICJzY3JvbGwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCgogICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0RW50ZXJJbkZvY3VzSGFuZGxlcigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQubG9jYXRpb24uaGFzaC5pbmRleE9mKCIjL3NlYXJjaCIpICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVySW5Gb2N1cyA9IGVudGVySW5Gb2N1cy5zZWFyY2g7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJJbkZvY3VzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAkKCIuUG9wVXAgPiBkaXYiKS5jbGljayhmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvKiBFTkQgVXNlciBzZWN0aW9uICovCgoKICAgICAgICAgICAgICAgIC8qIEFwcGxpY2F0aW9uIGhlbHBlciBzZWN0aW9uICovCgoKICAgICAgICAgICAgICAgICRzY29wZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgICAgICAgICAgICAgSGVscGVyLm1vYmlsZVNlY3Rpb25DbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKHBhdGgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAkc2NvcGUubW9iaWxlUmVkaXJlY3QgPSBmdW5jdGlvbiAocGF0aCkgewogICAgICAgICAgICAgICAgICAgIEhlbHBlci5tb2JpbGVTZWN0aW9uQ2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28ocGF0aCkKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgJHNjb3BlLm1vYmlsZVJlZGlyZWN0SGVscCA9IGZ1bmN0aW9uIChwYXRoKSB7CgogICAgICAgICAgICAgICAgICAgIEhlbHBlci5tb2JpbGVTZWN0aW9uQ2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28ocGF0aCkKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAvLyAgICAkc2NvcGUuZ290b0VsZW1lbnQoImNvbnRhY3RfdXMiKQogICAgICAgICAgICAgICAgLy99LCAxNTAwKQoKICAgICAgICAgICAgICAgICRzY29wZS5nb3RvRWxlbWVudCA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gJCgiIyIgKyBpZCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCJib2R5LCBodG1sIikuYW5pbWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IChlbGVtZW50Lm9mZnNldCgpLnRvcCAtIDY1KSArICJweCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICB2YXIgX19fX19hdXRvTG9nT3V0OwogICAgICAgICAgICAgICAgJHNjb3BlLnJlZnJlc2hUaW1lT3V0ID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoY3RybC5jb25maWcgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShjdHJsLmNvbmZpZykgPT0gSlNPTi5zdHJpbmdpZnkoe30pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChvcmRlclNlcnZpY2UudXNlcklzTG9naW4oKSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKF9fX19fYXV0b0xvZ091dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIF9fX19fYXV0b0xvZ091dCA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaWduT3V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgY3RybC5jb25maWcudXNlckxvZ2luVGltZU91dCA9PSAwID8gKDYwICogNjAwMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChjdHJsLmNvbmZpZy51c2VyTG9naW5UaW1lT3V0ICogNjAwMDApKTsKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvKiBFTkQgQXBwbGljYXRpb24gaGVscGVyIHNlY3Rpb24gKi8KCgogICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ2NsZWFyQ2FydEV2ZW50JywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXJ0U2VydmljZS5jbGVhckNhcnQoKS50aGVuKGZ1bmN0aW9uIChjYXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXJ0ID0gY2FydDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnQsIHByZXZpb3VzKSB7CiAgICAgICAgICAgICAgICAgICAgLy8kKCJodG1sLCBib2R5IikuY3NzKHtvcGFjaXR5OiAwfSk7CiAgICAgICAgICAgICAgICAgICAgLy8kKCIud2FpdEJhY2tncm91bmQiKS5jc3Moe29wYWNpdHk6IDEsIGRpc3BsYXk6ICJibG9jayIsfSk7CiAgICAgICAgICAgICAgICAgICAgLy8kKCJkaXYubG9hZGVyIikuY3NzKHtvcGFjaXR5OiAxLCBkaXNwbGF5OiAiYmxvY2siLH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnQsIHByZXZpb3VzKSB7CgogICAgICAgICAgICAgICAgICAgICRzY29wZS53ZWxjb21lID0gJGxvY2F0aW9uLnBhdGgoKS5pbmRleE9mKCcvd2VsY29tZScpIDw9IC0xICYmICRsb2NhdGlvbi5wYXRoKCkuaW5kZXhPZignLzQwNCcpIDw9IC0xOwogICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93Q2F0ZWdvcnlIZWFkZXIgPSAkbG9jYXRpb24ucGF0aCgpLmluZGV4T2YoJy9zZWFyY2gnKSA8PSAtMTsKCiAgICAgICAgICAgICAgICAgICAgLy8kKCIjc2VhcmNoU2VjdGlvbiAjb3V0cHV0IikuY3NzKCJvcGFjaXR5IiwgJGxvY2F0aW9uLnBhdGgoKS5pbmRleE9mKCcvc2VhcmNoJykgPT0gLTEgPyAxIDogMCk7CgogICAgICAgICAgICAgICAgICAgIEhlbHBlci5VcGRhdGVQYWdlRml4ZWQoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCRsb2NhdGlvbi5wYXRoKCkuaW5kZXhPZignL3NlYXJjaCcpID09IC0xICYmICRzY29wZS5jbG9zZVNlYXJjaEZvcmNlICsgIiIgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlU2VhcmNoRm9yY2UoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgSGVscGVyLm1vYmlsZVNlY3Rpb25DbG9zZSgpOwoKICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24ucGF0aCgpID09ICcvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoIi5hdXRvQ29tcGxldGVDb3ZlciIpLndpZHRoKCkgPCAxMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCJuYXYgLm5hdkxpbmtzIikuY3NzKCJkaXNwbGF5IiwgImJsb2NrIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCJuYXYgLm5hdkxpbmtzIikuY3NzKCJkaXNwbGF5IiwgIm5vbmUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDEwNTApOwogICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWZyZXNoVGltZU91dCgpOwogICAgICAgICAgICAgICAgICAgICRzY29wZS5taW5pVGl0bGVPdXQoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICQoIiNtb2JpbGUtc2VjdGlvbiIpLmNzcygibGVmdCIsICItIiArICQoIiNtb2JpbGUtc2VjdGlvbiIpLmNzcygid2lkdGgiKSk7CiAgICAgICAgICAgICAgICBIZWxwZXIubW9iaWxlX3NlY3Rpb25fbW92ZWQgPSAkKCIjbW9iaWxlLXNlY3Rpb24iKS53aWR0aCgpOwoKICAgICAgICAgICAgICAgICRzY29wZS5vcGVuTW9iaWxlU2VjdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIubW9iaWxlU2VjdGlvbkhhbmRsZXIoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmZvckFsbFBhZ2UoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkc2NvcGUubG9naW5Vc2VyID0ge2VtYWlsOiAnJywgbG9naW5QYXNzd29yZDogJycsIGxvZ2luVXNlcjogJyd9OwogICAgICAgICAgICB0aGlzLnJlbWVtYmVyTWUgPSBmYWxzZTsKCiAgICAgICAgICAgICRzY29wZS5jaGVja0NhcnQgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jYXJ0ICsgIiIgPT0gInVuZGVmaW5lZCIgfHwgJHNjb3BlLmNhcnQucHJvZHVjdHNJbkNhcnQubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCRsb2NhdGlvbi4kJHBhdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnL2xvZ2luJzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnL015T3JkZXJzJzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnL29yZGVyUGF5bWVudCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oImRlZmF1bHQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICRzY29wZS5jaGVja0xvZ2luID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHVzZXIgPSAkcm9vdFNjb3BlLnVzZXJDb29raWU7CiAgICAgICAgICAgICAgICBpZiAoISh1c2VyICYmIHVzZXIucmVzcG9uc2UgJiYgdXNlci5yZXNwb25zZS51c2VySWQgIT0gLTEgJiYgdXNlci5yZXNwb25zZS50X2F1dGhvcml6YXRpb24pKSB7CiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCJkZWZhdWx0Iik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgdmFyIF9zZXRVc2VyID0gMDsKICAgICAgICAgICAgJHNjb3BlLnNldFVzZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoX3NldFVzZXIgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNpZ25Jbih7ZW1haWw6ICIiLCBsb2dpblBhc3N3b3JkOiAiQWExMjMiLCBsb2dpblVzZXI6ICJzZXJnaW8ifSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfc2V0VXNlcisrOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgX3NldFVzZXIgPSAwOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgJHNjb3BlLmFjY291bnRTZWN0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdteUFjY291bnQnKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICRzY29wZS5vcGVuQWRtaW5DbGllbnQgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgQW5hbHl0aWNzLnRyYWNrRXZlbnQoJ01hbmFnZW1lbnQgQ29uc29sZScsICdOYXZpZ2F0ZScpOwogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJy9hZG1pbicpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgJHNjb3BlLnNpZ25PdXQgPSBmdW5jdGlvbiAoZXZlbikgewoKICAgICAgICAgICAgICAgIGlmIChldmVuKSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHVzZXJTZXJ2aWNlLnNpbmdPdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkY29va2llLnJlbW92ZSh1c2VyQ29va2llLmdldEtleSgkcm9vdFNjb3BlLnVzZXJDb29raWUpLnJlcGxhY2UoL1teYS16QS1aIF0vZywgIiIpKTsKICAgICAgICAgICAgICAgICAgICAkY29va2llLnJlbW92ZSgnbGFzdExvZ2luJyk7CiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyQ29va2llID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2dpblVzZXIgPSB7ZW1haWw6ICcnLCBsb2dpblBhc3N3b3JkOiAnJywgbG9naW5Vc2VyOiAnJ307CgogICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2FydFNlcnZpY2UubG9hZENhcnRQcm9kdWN0cygpLnRoZW4oZnVuY3Rpb24gKGNhcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhcnQgPSBjYXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tDYXJ0KCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJCgiLm1pbmktdGl0bGUiKS5jc3MoImRpc3BsYXkiLCAibm9uZSIpOwogICAgICAgICAgICAgICAgICAgICQoIi5taW5pLXRpdGxlLWhlbHAiKS5jc3MoImRpc3BsYXkiLCAibm9uZSIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAkc2NvcGUubWluaVRpdGxlSW4gPSBmdW5jdGlvbiAobWluaVRpdGxlSWQpIHsKICAgICAgICAgICAgICAgIGlmICgkcm9vdFNjb3BlLnVzZXJDb29raWUpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjIiArIG1pbmlUaXRsZUlkKS5zdG9wKCkuZGVsYXkoNTAwKS5mYWRlSW4oMzAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICRzY29wZS5taW5pVGl0bGVPdXQgPSBmdW5jdGlvbiAobWluaVRpdGxlSWQpIHsKICAgICAgICAgICAgICAgIGlmICgkcm9vdFNjb3BlLnVzZXJDb29raWUpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjIiArIG1pbmlUaXRsZUlkKS5zdG9wKCkuZGVsYXkoNTAwKS5mYWRlT3V0KDMwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgX19fX2xvZ2luSW50ZXJ2YWw7CiAgICAgICAgICAgICRzY29wZS5taW5pVGl0bGVJbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmIChfX19fbG9naW5JbnRlcnZhbCkgewogICAgICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbChfX19fbG9naW5JbnRlcnZhbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAkc2NvcGUubWluaVRpdGxlT3V0ID0gZnVuY3Rpb24gKG1pbmlUaXRsZUlkKSB7CiAgICAgICAgICAgICAgICBpZiAoJCgiIyIgKyBtaW5pVGl0bGVJZCkuY3NzKCdkaXNwbGF5JykgIT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICAgICAgX19fX2xvZ2luSW50ZXJ2YWwgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIiMiICsgbWluaVRpdGxlSWQpLmZhZGVPdXQoMzAwKTsKICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8qIENhcnQgc2VjdGlvbiAgKi8KCiAgICAgICAgICAgICRzY29wZS5yZW1vdmVQcm9kdWN0ID0gZnVuY3Rpb24gKGluZGV4LCBldmVudCkgewoKICAgICAgICAgICAgICAgIGlmIChldmVudCkgewogICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcHJvZHVjdHNDYXJ0U2VydmljZS5yZW1vdmVQcm9kdWN0KGluZGV4KS50aGVuKGZ1bmN0aW9uIChjYXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhcnQgPSBjYXJ0OwogICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja0NhcnQoKTsKICAgICAgICAgICAgICAgICAgICBmaXhUb29sVGlwQ2FydEhlaWdodCgpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA0ODApIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiI3RvYXN0IGEiKS5odG1sKCRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJQcm9kdWN0X3JlbW92ZWQiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIiN0b2FzdCIpLnN0b3AoKS5mYWRlSW4oNTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIjdG9hc3QiKS5zdG9wKCkuZmFkZU91dCgxNTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTUwMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAkc2NvcGUuYWRkUHJvZHVjdCA9IGZ1bmN0aW9uIChwcm9kdWN0LCBxdWFudGl0eSwgaGFzV2FycmFudHksIHRvYXN0TWVzc2FnZSkgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChIZWxwZXIuX19fX2Nsb3NlVG9vVGlwQ2FydCk7CiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgcHJvZHVjdHNDYXJ0U2VydmljZS5hZGRQcm9kdWN0KHByb2R1Y3QsIHF1YW50aXR5LCBoYXNXYXJyYW50eSkudGhlbihmdW5jdGlvbiAoY2FydCkgewogICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXJ0ID0gY2FydDsKICAgICAgICAgICAgICAgICAgICBhbmltYXRlVG9vbFRpcENhcnQodG9hc3RNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICBmaXhUb29sVGlwQ2FydEhlaWdodCgpOwogICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChlcnIpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVByb2R1Y3QgPSBmdW5jdGlvbiAocHJvZHVjdCwgY29sb3IsIHF1YW50aXR5LCBvbGRDb2xvciwgdG9hc3RNZXNzYWdlKSB7CiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgcHJvZHVjdHNDYXJ0U2VydmljZS51cGRhdGVQcm9kdWN0KHByb2R1Y3QsIGNvbG9yLCBxdWFudGl0eSwgb2xkQ29sb3IpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhcnQgPSBjYXJ0OwogICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlVG9vbFRpcENhcnQodG9hc3RNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShjYXJ0KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZVRvb2xUaXBDYXJ0KHRvYXN0TWVzc2FnZSkgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChIZWxwZXIuX19fX2Nsb3NlVG9vVGlwQ2FydCk7CgogICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNDgwKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiI3RvYXN0IGEiKS5odG1sKHRvYXN0TWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgJCgiI3RvYXN0Iikuc3RvcCgpLmZhZGVJbigyMDApOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCIjdG9hc3QiKS5zdG9wKCkuZmFkZU91dCg2MDApOwogICAgICAgICAgICAgICAgICAgIH0sIDE1MDApCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJCgnI3Rvb2xUaXBDYXJ0JykuZGVsYXkoMTAwKS5zbGlkZURvd24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICQoJyN0b29sVGlwQ2FydCB0Ym9keScpLnN0b3AoKS5hbmltYXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwICsgJ3B4JwogICAgICAgICAgICAgICAgICAgIH0sIDUwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuX19fX2Nsb3NlVG9vVGlwQ2FydCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Rvb2xUaXBDYXJ0Jykuc3RvcCgpLnNsaWRlVXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgNDAwMCkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgX19fX19lbnRlckNhcnQ7CiAgICAgICAgICAgIHZhciBlbnRlckluQ2FydCA9IGZhbHNlOwogICAgICAgICAgICAkc2NvcGUuZW50ZXJDYXJ0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChIZWxwZXIuX19fX2Nsb3NlVG9vVGlwQ2FydCk7IC8vIGRlZmluZWQgaW4gY2F0ZWdvcnlUeXBlUHJvZHVjdHNEcnR2IC0+IGFkZFByb2R1Y3QKICAgICAgICAgICAgICAgIGVudGVySW5DYXJ0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9fX19fZW50ZXJDYXJ0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI3Rvb2xUaXBDYXJ0Jykuc3RvcCgpLnNsaWRlRG93bigpOwogICAgICAgICAgICAgICAgICAgIGZpeFRvb2xUaXBDYXJ0SGVpZ2h0KCk7CiAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgJHNjb3BlLmxlYXZlQ2FydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGVudGVySW5DYXJ0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF9fX19fZW50ZXJDYXJ0KTsKICAgICAgICAgICAgICAgIGNsb3NlVG9vbFRpcENhcnQoKTsKICAgICAgICAgICAgfTsKCgogICAgICAgICAgICBmdW5jdGlvbiBjbG9zZVRvb2xUaXBDYXJ0KCkgewoKICAgICAgICAgICAgICAgIHZhciB0b29sVGlwQ2FydCA9ICQoJyN0b29sVGlwQ2FydCcpOwogICAgICAgICAgICAgICAgaWYgKHRvb2xUaXBDYXJ0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbnRlckluQ2FydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFRpcENhcnQuc3RvcCgpLnNsaWRlVXAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyN0b29sVGlwQ2FydCB0Ym9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogMH0sIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDMwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBmaXhUb29sVGlwQ2FydEhlaWdodCgpIHsKICAgICAgICAgICAgICAgIHZhciB3aW5IZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCkgLSAyMDA7CiAgICAgICAgICAgICAgICB2YXIgcHJvZHNIZWlnaHQgPSAoJHNjb3BlLmNhcnQucHJvZHVjdHNJbkNhcnQubGVuZ3RoICogMTA0KTsKICAgICAgICAgICAgICAgIHZhciBoZWlnaHRUb0FzaWduID0gKE1hdGgucm91bmQod2luSGVpZ2h0IC8gMTA0KSAqIDEwNCk7CiAgICAgICAgICAgICAgICBpZiAod2luSGVpZ2h0IDwgcHJvZHNIZWlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjdG9vbFRpcENhcnQgdGJvZHkiKS5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogaGVpZ2h0VG9Bc2lnbiArICJweCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJvdmVyZmxvdy15IjogImF1dG8iCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkKCIjdG9vbFRpcENhcnQgdGJvZHkiKS5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogcHJvZHNIZWlnaHQgKyAicHgiLAogICAgICAgICAgICAgICAgICAgICAgICAib3ZlcmZsb3cteSI6ICJoaWRkZW4iCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIEVORCBDYXJ0IHNlY3Rpb24gKi8KCgogICAgICAgICAgICB0aGlzLmdldFJlcXVpcmUgPSBmdW5jdGlvbiAobmFtZVJlcXVpcmUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICRmaWx0ZXIoInRyYW5zbGF0ZSIpKG5hbWVSZXF1aXJlKSArICIgIiArICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJmaWVsZF9pc19yZXF1aXJlZCIpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCgogICAgICAgICAgICB0aGlzLmdldENvbXBhcmUgPSBmdW5jdGlvbiAobmFtZSwgbW9kZWwpIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lQWZ0ZXJUcmFuc2xhdGUgPSAkZmlsdGVyKCJ0cmFuc2xhdGUiKShuYW1lKTsKICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG5hbWVBZnRlclRyYW5zbGF0ZSArICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCdUaGlzX2ZpZWxkX25vdF9tYXRjaF93aXRoJyksCiAgICAgICAgICAgICAgICAgICAgaW5mbzogIi0gIiArICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJTYW1lX2FzIikgKyAiICIgKyBuYW1lQWZ0ZXJUcmFuc2xhdGUsCiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IG1vZGVsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuZ2V0Q2FyZE51bWJlciA9IGZ1bmN0aW9uIChleGFjdGx5TnVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgIGVycm9yOiAkZmlsdGVyKCJ0cmFuc2xhdGUiKSgnSW52YWxpZF9DYXJkX251bWJlcicpLAogICAgICAgICAgICAgICAgICAgIGluZm86ICItICIgKyAkZmlsdGVyKCJ0cmFuc2xhdGUiKSgiVXNlX2V4YWN0bHkiKSArICIgIiArIGV4YWN0bHlOdW0gKyAiICIgKyAkZmlsdGVyKCJ0cmFuc2xhdGUiKSgnbnVtYmVycycpLAogICAgICAgICAgICAgICAgICAgIGV4YWN0bHk6IGV4YWN0bHlOdW0sCiAgICAgICAgICAgICAgICAgICAgcmVnZXg6ICJeWzAtOV0qJCIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpcy5nZXRQYXR0ZXJuID0gZnVuY3Rpb24gKGRhdGEpIHsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1VzZXJuYW1lJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydsZXR0ZXJzX251bWJlcl9zeW1ib2xzX29ubHknLCAnbGV0dGVyc19udW1iZXJfc3ltYm9sc19vbmx5JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15bQS1aYS16MC05Xy4tXXswLDk5OX0kJ11dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VtYWlsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBbWydlbWFpbF9ub19mb3JtYXR0ZWRfY29ycmVjdGx5JywgJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ15bX0EtWmEtejAtOS1cK10rKFwuW19BLVphLXowLTktXSspKkBbQS1aYS16MC05LV0rKFwuW0EtWmEtejAtOV0rKSooXC5bQS1aYS16XXsyLDEwMH0pJCddXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdQYXNzd29yZCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnb25lX2xvd2VyX2xldHRlcl9yZXF1aXJlZCcsICdJbmNsdWRpbmdfb25lX2xvd2VyX2xldHRlcicsICcoPz0uKlthLXpdKSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnb25lX3VwcGVyX2xldHRlcl9yZXF1aXJlZCcsICdJbmNsdWRpbmdfb25lX3VwcGVyX2xldHRlcicsICcoPz0uKltBLVpdKSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnb25lX251bWJlcl9yZXF1aXJlZCcsICdJbmNsdWRpbmdfb25lX251bWJlcicsICcoPz0uKlswLTldKSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NvbXBhcmUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2xldHRlcnNfbnVtYmVyX3N5bWJvbHNfb25seScsICdsZXR0ZXJzX251bWJlcl9zeW1ib2xzX29ubHknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXltBLVphLXowLTlfLi1dezAsOTk5fSQnXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ0NWX051bWJlcic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnSW52YWxpZF9DQ1ZfbnVtYmVyJywgJ1ZhbGlkX0NDVl9udW1iZXJfcmVxdWlyZWQnLCAnXlswLTldezMsM30kJ11dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAidHlwZSBvZiBwYXR0ZXJuIG5vdCBtYXRjaCAodGhpcy5nZXRQYXR0ZXJuKCciICsgZGF0YSArICInKTsiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSAkZmlsdGVyKCJ0cmFuc2xhdGUiKShkYXRhW2ldWzFdKTsKICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAkZmlsdGVyKCJ0cmFuc2xhdGUiKShkYXRhW2ldWzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgaW5mbzogaW5mbyAhPSAnJyA/ICItICIgKyBpbmZvIDogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4OiBkYXRhW2ldWzJdCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgIHJlZ2V4ZXM6IGFycgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmdldE1pbiA9IGZ1bmN0aW9uIChtaW4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJVc2VfdXBfb2YiKSArICIgIiArIG1pbiArICIgIiArICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJjaGFyYWN0ZXJfb3JfbG9uZ2VyIiksCiAgICAgICAgICAgICAgICAgICAgaW5mbzogIi0gIiArICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJVc2VfdXBfb2YiKSArICIgIiArIG1pbiArICIgIiArICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJjaGFyYWN0ZXJfb3JfbG9uZ2VyIiksCiAgICAgICAgICAgICAgICAgICAgbWluOiBtaW4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKCiAgICAgICAgICAgIHRoaXMuZ2V0TWF4ID0gZnVuY3Rpb24gKG1heCkgewogICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBlcnJvcjogJGZpbHRlcigidHJhbnNsYXRlIikoIlVzZV9tYXhpbXVtIikgKyAiICIgKyBtYXggKyAiICIgKyAkZmlsdGVyKCJ0cmFuc2xhdGUiKSgiY2hhcmFjdGVyIiksCiAgICAgICAgICAgICAgICAgICAgaW5mbzogIi0gIiArICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJVc2VfbWF4aW11bSIpICsgIiAiICsgbWF4ICsgIiAiICsgJGZpbHRlcigidHJhbnNsYXRlIikoImNoYXJhY3RlciIpLAogICAgICAgICAgICAgICAgICAgIG1heDogbWF4CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuZ2V0QWdyZWVBZ3JlZW1lbnRSZXF1aXJlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBlcnJvcjogJGZpbHRlcigidHJhbnNsYXRlIikoIkFncmVlQWdyZWVtZW50UmVxdWlyZSIpLAogICAgICAgICAgICAgICAgICAgIGluZm86ICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJBZ3JlZUFncmVlbWVudFJlcXVpcmUiKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmdldE5vdGljZUluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoWwogICAgICAgICAgICAgICAgICAgICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJUaGlzX2lzX2FfZGVtbyIpLAogICAgICAgICAgICAgICAgICAgICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJQbGVhc2VfZW50ZXJfYV9mYWtlX2RhdGEiKQogICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmNsb3NlSW1nVGVhbSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICQoIiN0ZWFtSWRUb0FuaW1hdGUiKS5hZGRDbGFzcygiaGluZ2UiKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICQoIiN0ZWFtIikuZmFkZU91dCgxMDAwKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiI3RlYW1JZFRvQW5pbWF0ZSIpLnJlbW92ZUNsYXNzKCJoaW5nZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAkKCIjdGVhbUlkVG9BbmltYXRlIikuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJub25lIgogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKQogICAgICAgICAgICAgICAgfSwgMjUwMCkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIF0pOwp9KTsKCgoKCgoKCgoKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzEzLzIwMTUuCiAqLwpkZWZpbmUoJ2FwcC9jb250cm9sbGVycy9jYXRlZ29yaWVzQ3RybCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ2NhdGVnb3JpZXNDdHJsJywgWyckc2NvcGUnLCAnY2F0ZWdvcnlTZXJ2aWNlJywKICAgICAgICAnZGVhbFNlcnZpY2UnLCAnJGxvY2F0aW9uJywgJ3Jlc29sdmVQYXJhbXMnLCAnc3VwcG9ydFNlcnZpY2UnLCAnJHRpbWVvdXQnLAogICAgICAgICd1c2VyU2VydmljZScsCiAgICAgICAgZnVuY3Rpb24gKHMsIGNhdGVnb3J5U2VydmljZSwgZGVhbFNlcnZpY2UsICRsb2NhdGlvbiwgcmVzb2x2ZVBhcmFtcywKICAgICAgICAgICAgICAgICAgc3VwcG9ydFNlcnZpY2UsICR0aW1lb3V0LCB1c2VyU2VydmljZSkgewoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNvbHZlUGFyYW1zLmNhdGVnb3JpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBjYXRlID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgcmVzb2x2ZVBhcmFtcy5jYXRlZ29yaWVzW2ldLmNhdGVnb3J5TmFtZS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICBjYXRlLnB1c2goaW5kZXggPT0gMCA/IHJlc29sdmVQYXJhbXMuY2F0ZWdvcmllc1tpXS5jYXRlZ29yeU5hbWVbaW5kZXhdIDogcmVzb2x2ZVBhcmFtcy5jYXRlZ29yaWVzW2ldLmNhdGVnb3J5TmFtZVtpbmRleF0udG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXNvbHZlUGFyYW1zLmNhdGVnb3JpZXNbaV0uY2F0ZWdvcnlOYW1lID0gY2F0ZS5qb2luKCIiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy5jYXRlZ29yaWVzID0gcmVzb2x2ZVBhcmFtcy5jYXRlZ29yaWVzOwogICAgICAgICAgICBzLnNwZWNpYWxPZmZlciA9IHJlc29sdmVQYXJhbXMuc3BlY2lhbE9mZmVyOwogICAgICAgICAgICBzLnBvcHVsYXJQcm9kdWN0cyA9IHJlc29sdmVQYXJhbXMucG9wdWxhclByb2R1Y3RzOwogICAgICAgICAgICBzLmNhdGVnb3JpZXNGb3JDb250YWN0ID0gW107CiAgICAgICAgICAgIHMuY2F0ZWdvcmllc0ZvckNvbnRhY3QucHVzaCh7Y2F0ZWdvcnlJZDogMCwgY2F0ZWdvcnlOYW1lOiAnU2VsZWN0IENhdGVnb3J5JywgbWFuYWdlZEltYWdlSWQ6ICdsYXB0b3BzJywgcHJvZHVjdHM6IFtdfSk7CiAgICAgICAgICAgIHMuY2F0ZWdvcmllc0ZvckNvbnRhY3QgPSBzLmNhdGVnb3JpZXNGb3JDb250YWN0LmNvbmNhdChzLmNhdGVnb3JpZXMpOwogICAgICAgICAgICBzLnByb2R1Y3RzRm9yQ29udGFjdCA9IFtdOwogICAgICAgICAgICBzLnByb2R1Y3RzRm9yQ29udGFjdCA9IFsKICAgICAgICAgICAgICAgIHtwcm9kdWN0SWQ6IDAsIGNhdGVnb3J5SWQ6IDAsIHByb2R1Y3ROYW1lOiAnU2VsZWN0IFByb2R1Y3QnLCBwcmljZTogMTc5Ljk5LCBkZXNjcmlwdGlvbjogJ1RoZSB3b3JsZOKAmXMgbW9zdCBmYW1vdXMgaGVhZHBob25lIGhhcyBiZWVuIGNvbXBsZXTigKYgZnJvbSBCZWF0cywgcGx1cyBhIHBvd2VyZnVsLCByZWVuZ2luZWVyZWQgc291bmQuJ30KICAgICAgICAgICAgXTsKCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgIHVuY29tbWVudCB0aGlzIGxpbmUgZm9yIFVGVCB0eXBvIGRlbW8KICAgICAgICAgICAgICovCiAgICAgICAgICAgIC8vcy5jYXRlZ29yaWVzWzNdLmNhdGVnb3J5TmFtZSA9ICJBdWRpbyI7CgogICAgICAgICAgICB2YXIgX252ID0gdXNlclNlcnZpY2UubnZfc2xvd1BhZ2UoKSA/ICJfbnYiIDogIiI7CiAgICAgICAgICAgIHZhciBpbWFnZXNCYW5uZXIgPSBbCiAgICAgICAgICAgICAgICAnQmFubmVyMScgKyBfbnYgKyAnLmpwZycsCiAgICAgICAgICAgICAgICAnQmFubmVyMicgKyBfbnYgKyAnLmpwZycsCiAgICAgICAgICAgICAgICAnQmFubmVyMycgKyBfbnYgKyAnLmpwZycsCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHMuaW1hZ2VzID0gWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGltYWdlTmFtZTogaW1hZ2VzQmFubmVyWzBdLAogICAgICAgICAgICAgICAgICAgIGltYWdlSWQ6IDAsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIkFMTCBZT1UgV0FOVCBGUk9NIEEgVEFCTEVUIiwKICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiAyfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpbWFnZU5hbWU6IGltYWdlc0Jhbm5lclsxXSwKICAgICAgICAgICAgICAgICAgICBpbWFnZUlkOiAxLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJFWFBMT1JFIE9VUiBMQVRFU1QgPGJyIC8+SU5OT1ZBVElWRSBQUk9EVUNUUyIsCiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogMwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHtpbWFnZU5hbWU6IGltYWdlc0Jhbm5lclsyXSwgaW1hZ2VJZDogMiwgbWVzc2FnZTogIlNUQVJUIEVYUExPUklORyBIUCBOT1RFQk9PS1MiLCBjYXRlZ29yeUlkOiAwfQogICAgICAgICAgICBdOwoKICAgICAgICAgICAgLyogc3Vwb3J0IHNlY3Rpb24gKi8KCiAgICAgICAgICAgIHMuc3VwcG9ydFN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAgICAgcy5yZWdpc3RlckFuc3dlciA9IHtjbGFzczogIiIsIG1lc3NhZ2U6ICIifQogICAgICAgICAgICBzLnN1cHBvcnRNb2RlbCA9IHsKICAgICAgICAgICAgICAgICJjYXRlZ29yeSI6IHt9LAogICAgICAgICAgICAgICAgImVtYWlsIjogIiIsCiAgICAgICAgICAgICAgICAicHJvZHVjdCI6IHt9LAogICAgICAgICAgICAgICAgInN1YmplY3QiOiAiIgogICAgICAgICAgICB9CgogICAgICAgICAgICBzLnByb2R1Y3RzOwoKICAgICAgICAgICAgcy5jYXRlZ29yeUNoYW5nZSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkgewogICAgICAgICAgICAgICAgaWYoY2F0ZWdvcnkuY2F0ZWdvcnlJZCA9PSAwKXsKICAgICAgICAgICAgICAgICAgICAvLyBzLnByb2R1Y3RzID0gWwogICAgICAgICAgICAgICAgICAgIC8vICAgICB7cHJvZHVjdElkOiAwLCBjYXRlZ29yeUlkOiAwLCBwcm9kdWN0TmFtZTogJ1NlbGVjdCBQcm9kdWN0JywgcHJpY2U6IDE3OS45OSwgZGVzY3JpcHRpb246ICdUaGUgd29ybGTigJlzIG1vc3QgZmFtb3VzIGhlYWRwaG9uZSBoYXMgYmVlbiBjb21wbGV04oCmIGZyb20gQmVhdHMsIHBsdXMgYSBwb3dlcmZ1bCwgcmVlbmdpbmVlcmVkIHNvdW5kLid9CiAgICAgICAgICAgICAgICAgICAgLy8gXTsKCiAgICAgICAgICAgICAgICAgICAgcy5wcm9kdWN0c0ZvckNvbnRhY3QgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIHtwcm9kdWN0SWQ6IDAsIGNhdGVnb3J5SWQ6IDAsIHByb2R1Y3ROYW1lOiAnU2VsZWN0IFByb2R1Y3QnLCBwcmljZTogMTc5Ljk5LCBkZXNjcmlwdGlvbjogJ1RoZSB3b3JsZOKAmXMgbW9zdCBmYW1vdXMgaGVhZHBob25lIGhhcyBiZWVuIGNvbXBsZXTigKYgZnJvbSBCZWF0cywgcGx1cyBhIHBvd2VyZnVsLCByZWVuZ2luZWVyZWQgc291bmQuJ30KICAgICAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgICAgIHMucHJvZHVjdHNGb3JDb250YWN0LnByb2R1Y3QgPSB7cHJvZHVjdElkOiAwLCBjYXRlZ29yeUlkOiAwLCBwcm9kdWN0TmFtZTogJ1NlbGVjdCBQcm9kdWN0JywgcHJpY2U6IDE3OS45OSwgZGVzY3JpcHRpb246ICdUaGUgd29ybGTigJlzIG1vc3QgZmFtb3VzIGhlYWRwaG9uZSBoYXMgYmVlbiBjb21wbGV04oCmIGZyb20gQmVhdHMsIHBsdXMgYSBwb3dlcmZ1bCwgcmVlbmdpbmVlcmVkIHNvdW5kLid9CiAgICAgICAgICAgICAgICAgICAgcy5wcm9kdWN0c0ZvckNvbnRhY3QgPSBzLnByb2R1Y3RzCiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRlbXBUZXN0ID0gYW5ndWxhci5lbGVtZW50LmZpbmQoIltuYW1lPSdwcm9kdWN0TGlzdGJveENvbnRhY3RVcyddIilbMF0ub3B0aW9uczsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcFRlc3QgPSAkKCJbbmFtZT0ncHJvZHVjdExpc3Rib3hDb250YWN0VXMnXSIpWzBdLm9wdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgdGVtcFRlc3RbMF0uaW5uZXJIVE1MID0gIlNlbGVjdCBQcm9kdWN0IgogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHMuc3VwcG9ydE1vZGVsLmNhdGVnb3J5ID0gY2F0ZWdvcnk7CiAgICAgICAgICAgICAgICBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcnlCeUlkKHMuc3VwcG9ydE1vZGVsLmNhdGVnb3J5LmNhdGVnb3J5SWQpLgogICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbiAoY2F0ZWdvcnkpIHsKICAgICAgICAgICAgICAgICAgICBzLnByb2R1Y3RzID0gY2F0ZWdvcnkucHJvZHVjdHM7CiAgICAgICAgICAgICAgICAgICAgcy5wcm9kdWN0c0ZvckNvbnRhY3QgPSBjYXRlZ29yeS5wcm9kdWN0cwogICAgICAgICAgICAgICAgICAgIC8vcy5zdXBwb3J0TW9kZWwucHJvZHVjdCA9IGNhdGVnb3J5LnByb2R1Y3RzWzBdOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHMucHJvZHVjdENoYW5nZSA9IGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgICAgICAgICBzLnN1cHBvcnRNb2RlbC5wcm9kdWN0ID0gcHJvZHVjdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIF9fX19fY29udGludWVTaG9wcGluZzsKICAgICAgICAgICAgcy5zZW5kU3VwcG9ydEVtYWlsID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICAgIC8vIGlmIChzLnN1cHBvcnRNb2RlbC5zdWJqZWN0LnRyaW0oKS50b0xvd2VyQ2FzZSgpID09ICJ3aG8gYXJlIHlvdSIgfHwKICAgICAgICAgICAgICAgIC8vICAgICBzLnN1cHBvcnRNb2RlbC5zdWJqZWN0LnRyaW0oKS50b0xvd2VyQ2FzZSgpID09ICJ3aG8gYXJlIHlvdT8iKSB7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgICQoIiN0ZWFtIikuZmFkZUluKDUwMCkuY3NzKCJkaXNwbGF5IiwgInRhYmxlIik7CiAgICAgICAgICAgICAgICAvLyAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICQoIiN0ZWFtSWRUb0FuaW1hdGUiKS5jc3MoewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZGlzcGxheTogImJsb2NrIgogICAgICAgICAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgJCgiI3RlYW1JZFRvQW5pbWF0ZSIpLmFkZENsYXNzKCJ6b29tSW5Eb3duIik7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgJCgiI3RlYW1JZFRvQW5pbWF0ZSIpLnJlbW92ZUNsYXNzKCJ6b29tSW5Eb3duIik7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0sIDMwMDApOwogICAgICAgICAgICAgICAgLy8gICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgICAvLyAgICAgcy5zdXBwb3J0TW9kZWwgPSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICJjYXRlZ29yeSI6IHMuc3VwcG9ydE1vZGVsLmNhdGVnb3J5LAogICAgICAgICAgICAgICAgLy8gICAgICAgICAiZW1haWwiOiAiIiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgInByb2R1Y3QiOiBzLnN1cHBvcnRNb2RlbC5wcm9kdWN0LAogICAgICAgICAgICAgICAgLy8gICAgICAgICAic3ViamVjdCI6ICIiCiAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIHJldHVybjsKICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICBzdXBwb3J0U2VydmljZS5zZW5kU3VwcG9ydEVtYWlsKHMuc3VwcG9ydE1vZGVsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKCiAgICAgICAgICAgICAgICAgICAgcy5yZWdpc3RlckFuc3dlci5jbGFzcyA9IHJlcy5zdWNjZXNzID8gInZhbGlkIiA6ICJpbnZhbGlkIjsKICAgICAgICAgICAgICAgICAgICBzLnJlZ2lzdGVyQW5zd2VyLm1lc3NhZ2UgPSByZXMucmVhc29uOwogICAgICAgICAgICAgICAgICAgIHMuc3VwcG9ydFN1Y2Nlc3MgPSByZXMuc3VjY2VzczsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9fX19fY29udGludWVTaG9wcGluZyA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucmVnaXN0ZXJBbnN3ZXIgPSB7Y2xhc3M6ICIiLCBtZXNzYWdlOiAiIn0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMuc3VwcG9ydE1vZGVsID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNhdGVnb3J5Ijoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZW1haWwiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwcm9kdWN0Ijoge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic3ViamVjdCI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgX19fX19jb250aW51ZVNob3BwaW5nID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zdXBwb3J0U3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5yZWdpc3RlckFuc3dlciA9IHtjbGFzczogIiIsIG1lc3NhZ2U6ICIifQogICAgICAgICAgICAgICAgICAgICAgICB9LCA2MDAwMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewoKICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHMuY29udGludWVTaG9wcGluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmIChfX19fX2NvbnRpbnVlU2hvcHBpbmcpIHsKICAgICAgICAgICAgICAgICAgICBzLnN1cHBvcnRTdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgcy5yZWdpc3RlckFuc3dlciA9IHtjbGFzczogIiIsIG1lc3NhZ2U6ICIifQogICAgICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbChfX19fX2NvbnRpbnVlU2hvcHBpbmcpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzLmdvX3VwKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIGVuZCBzdXBvcnQgc2VjdGlvbiAqLwoKCiAgICAgICAgICAgIFNsaWRlci5BZGRTbGlkZXJMaXN0ZW5lcigpOwoKICAgICAgICAgICAgSGVscGVyLmZvckFsbFBhZ2UoKTsKCiAgICAgICAgICAgICQoJyNzY3JvbGxUb1RvcCcpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICQoJ2JvZHksIGh0bWwnKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LCAxMDAwKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oewogICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gODAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2Nyb2xsVG9Ub3AnKS5zdG9wKCkuZmFkZUluKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Njcm9sbFRvVG9wJykuc3RvcCgpLmZhZGVPdXQoMzAwKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogcmVzaXplLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXNpemUoKSB7CiAgICAgICAgICAgICAgICAgICAgdHVyblRoZU9yZGVyT2ZJbWFnZXNJbkNhdGVnb3JpZXNHcmlkKCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJlc2l6ZSwgMCkKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHR1cm5UaGVPcmRlck9mSW1hZ2VzSW5DYXRlZ29yaWVzR3JpZCgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbVRvTW92ZSA9ICQoIiNTcGVha2Vyc0ltZyIpOwogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleFRvRmluZCA9ICJUYWJsZXRzSW1nIjsKICAgICAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNDgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1Ub01vdmUgPSAkKCIjVGFibGV0c0ltZyIpOwogICAgICAgICAgICAgICAgICAgICAgICBpbmRleFRvRmluZCA9ICJTcGVha2Vyc0ltZyI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtVG9Nb3ZlLnByZXYoKS5hdHRyKCJpZCIpICYmIGVsZW1Ub01vdmUucHJldigpLmF0dHIoImlkIikuaW5kZXhPZihpbmRleFRvRmluZCkgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbVRvTW92ZS5wYXJlbnQoKS5wcmVwZW5kKGVsZW1Ub01vdmUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzLm9wZW5DaGF0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHBhdGggPSBzZXJ2ZXIuY2F0YWxvZy5nZXRLZXkoKS5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycsICIiKS5yZXBsYWNlKCIvYXBpL3YxIiwgIiIpOwogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgic2VydmVyS2V5IiwgcGF0aCk7CgogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4od2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgIi9jaGF0Lmh0bWwiLCAiQWR2YW50YWdlIE9ubGluZSBTaG9wcGluZyBDaGF0IFdpbmRvd3MiLAogICAgICAgICAgICAgICAgICAgICJ3aWR0aD02NTBweCwgaGVpZ2h0PTQ1MHB4LCB0b3A9MzAwcHgsIGxlZnQ9MzAwcHgsIHNjcm9sbGJhcnM9bm8sIHJlc2l6YWJsZT1ubywgIiArCiAgICAgICAgICAgICAgICAgICAgImRpcmVjdG9yaWVzPW5vLCB0aXRsZWJhcj1ubywgdG9vbGJhcj1ubywgbG9jYXRpb249bm8sIHN0YXR1cz1ubywgbWVudWJhcj0wLCIpOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgcy5zbG93UGFnZVN0cmluZyA9ICJ5dHJkdWhibDtraXlnaXl0ZyI7CiAgICAgICAgICAgIGNhdGVnb3J5U2VydmljZS5udl9sb2FkVW51c2VTY3JpcHRzKCkudGhlbihmdW5jdGlvbihyZXMpewogICAgICAgICAgICAgICAgcy5zbG93UGFnZVN0cmluZyA9IHJlczsKICAgICAgICAgICAgfSk7CgoKCiAgICAgICAgfV0pOwp9KTsKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzE4LzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvY29udHJvbGxlcnMvY2F0ZWdvcnlDdHJsJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuY29udHJvbGxlcignY2F0ZWdvcnlDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ2NhdGVnb3J5U2VydmljZScsICdjYXRlZ29yeScsCiAgICAgICAgZnVuY3Rpb24gKHMsICRzdGF0ZVBhcmFtcywgY2F0ZWdvcnlTZXJ2aWNlLCBwYXJhbXNUb1JldHVybikgewoKICAgICAgICAgICAgcy5jYXRJZCA9ICRzdGF0ZVBhcmFtcy5pZDsKCiAgICAgICAgICAgIHMucGFyYW1zVG9QYXNzID0gcGFyYW1zVG9SZXR1cm47CgogICAgICAgICAgICBzLnZpZXdBbGwgPSBwYXJhbXNUb1JldHVybi52aWV3QWxsOwoKICAgICAgICAgICAgcy5jYXRlZ29yeURhdGEgPSBwYXJhbXNUb1JldHVybi5zZWFyY2hSZXN1bHQubGVuZ3RoID4gMCA/IHBhcmFtc1RvUmV0dXJuLnNlYXJjaFJlc3VsdFswXSA6IFtdOwoKICAgICAgICAgICAgcy5ub1Byb2R1Y3RzID0gcy5jYXRlZ29yeURhdGEucHJvZHVjdHMgPT0gdW5kZWZpbmVkIHx8IHMuY2F0ZWdvcnlEYXRhLnByb2R1Y3RzLmxlbmd0aCA9PSAwOwoKICAgICAgICAgICAgcy5jYXRlZ29yeU5hbWUgPSBwYXJhbXNUb1JldHVybi5jYXRlZ29yeU5hbWU7CgogICAgICAgICAgICBIZWxwZXIuZm9yQWxsUGFnZSgpOwoKICAgIH1dKTsKCn0pOwoKCgoKLy8vKioKLy8gKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDIxLzExLzIwMTUuCi8vICovCi8vCi8vZGVmaW5lKFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGNvbnRyb2xsZXJzKSB7Ci8vICAgICd1c2Ugc3RyaWN0JzsKLy8gICAgY29udHJvbGxlcnMuY29udHJvbGxlcigncHJvZHVjdEN0cmwnLCBbJyRzY29wZScsICdyZXNvbHZlUGFyYW1zJywgJyRzdGF0ZScsICckZmlsdGVyJywKLy8gICAgICAgICckcm9vdFNjb3BlJywgJyR0aW1lb3V0JywKLy8KLy8gICAgICAgIGZ1bmN0aW9uIChzLCByZXNvbHZlUGFyYW1zLCAkc3RhdGUsICRmaWx0ZXIsICRyb290U2NvcGUsICR0aW1lb3V0KSB7Ci8vCi8vICAgICAgICAgICAgcy5wYWdlU3RhdGUgPSByZXNvbHZlUGFyYW1zLnBhZ2VTdGF0ZTsKLy8gICAgICAgICAgICB2YXIgcmVzb2x2ZVBhcmFtc19zZWxlY3RlZENvbG9yID0gcmVzb2x2ZVBhcmFtcy5zZWxlY3RlZENvbG9yOwovLwovLyAgICAgICAgICAgIHMubWVzc2FnZSA9IHt9OwovLyAgICAgICAgICAgIHMucXVhbnRpdHkgPSByZXNvbHZlUGFyYW1zLnF1YW50aXR5IHx8IDE7Ci8vICAgICAgICAgICAgcy5jYXRlZ29yeU5hbWUgPSByZXNvbHZlUGFyYW1zLmNhdGVnb3J5TmFtZTsKLy8gICAgICAgICAgICBzLnByb2R1Y3QgPSByZXNvbHZlUGFyYW1zLnByb2R1Y3Q7Ci8vICAgICAgICAgICAgcy5tb3N0UG9wdWxhckNvbW1lbnRzID0gcmVzb2x2ZVBhcmFtcy5tb3N0UG9wdWxhckNvbW1lbnRzCi8vCi8vICAgICAgICAgICAgcy5oYXZlSW50ZXJuZXQgPSByZXNvbHZlUGFyYW1zLmhhdmVJbnRlcm5ldDsKLy8KLy8gICAgICAgICAgICBzLnNob3dWaWRlbyA9IHMucHJvZHVjdC5wcm9kdWN0SWQgPT0gMjIgfHwgcy5wcm9kdWN0LnByb2R1Y3RJZCA9PSAxNSB8fCBzLnByb2R1Y3QucHJvZHVjdElkID09IDE2OwovLyAgICAgICAgICAgIHMuaW1hZ2VVcmwgPSBhbmd1bGFyLmNvcHkocy5wcm9kdWN0LmltYWdlVXJsKTsKLy8KLy8gICAgICAgICAgICBzLmdldEZpcnN0SW1hZ2VVcmwgPSBmdW5jdGlvbiAoKSB7Ci8vICAgICAgICAgICAgICAgIHMuaW1hZ2VzQXJyYXkgPSAkZmlsdGVyKCJnZXRBbGxJbWFnZXNCeUNvbG9yIikocy5wcm9kdWN0LmltYWdlcywgcy5jb2xvclNlbGVjdGVkLCBzLnByb2R1Y3QuaW1hZ2VVcmwpOwovLyAgICAgICAgICAgICAgICBzLmltYWdlVXJsID0gcy5pbWFnZXNBcnJheVswXTsKLy8gICAgICAgICAgICAgICAgcmV0dXJuIHMuaW1hZ2VzQXJyYXk7Ci8vICAgICAgICAgICAgfTsKLy8KLy8gICAgICAgICAgICBzLnByb2R1Y3RfYXR0cmlidXRlcyA9IEhlbHBlci5zb3J0QXR0cmlidXRlc0J5TmFtZShzLnByb2R1Y3QuYXR0cmlidXRlcyk7Ci8vCi8vICAgICAgICAgICAgaWYgKCFyZXNvbHZlUGFyYW1zLnNlbGVjdGVkQ29sb3IgJiYgcy5wcm9kdWN0LmNvbG9ycy5sZW5ndGggPiAwKSB7Ci8vICAgICAgICAgICAgICAgIHZhciBjb2xvcnMgPSBIZWxwZXIuc29ydEFycmF5QnlDb2xvck5hbWUocy5wcm9kdWN0LmNvbG9ycyk7Ci8vICAgICAgICAgICAgICAgIHMuY29sb3JTZWxlY3RlZCA9IGNvbG9yc1swXTsKLy8gICAgICAgICAgICB9Ci8vICAgICAgICAgICAgZWxzZSB7Ci8vICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5wcm9kdWN0LmNvbG9ycy5sZW5ndGg7IGkrKykgewovLyAgICAgICAgICAgICAgICAgICAgaWYgKHMucHJvZHVjdC5jb2xvcnNbaV0uY29kZSA9PSByZXNvbHZlUGFyYW1zLnNlbGVjdGVkQ29sb3IpIHsKLy8gICAgICAgICAgICAgICAgICAgICAgICBzLmNvbG9yU2VsZWN0ZWQgPSBzLnByb2R1Y3QuY29sb3JzW2ldOwovLyAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwovLyAgICAgICAgICAgICAgICAgICAgfQovLyAgICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgfQovLwovLyAgICAgICAgICAgIHMuY29sb3JTZWxlY3RlZCA9IHMuY29sb3JTZWxlY3RlZCB8fCBzLnByb2R1Y3QuY29sb3JzWzBdOwovLyAgICAgICAgICAgIHMuZ2V0Rmlyc3RJbWFnZVVybCgpOwovLwovLyAgICAgICAgICAgIHMuYWRkVG9DYXJ0ID0gZnVuY3Rpb24gKGRpc2FibGUpIHsKLy8KLy8gICAgICAgICAgICAgICAgaWYgKGRpc2FibGUpIHsKLy8gICAgICAgICAgICAgICAgICAgIHJldHVybjsKLy8gICAgICAgICAgICAgICAgfQovLwovLyAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdFRvQWRkID0gYW5ndWxhci5jb3B5KHMucHJvZHVjdCk7Ci8vICAgICAgICAgICAgICAgIHByb2R1Y3RUb0FkZC5jb2xvcnMgPSBbcy5jb2xvclNlbGVjdGVkXTsKLy8KLy8gICAgICAgICAgICAgICAgaWYgKHMucGFnZVN0YXRlID09ICdlZGl0JykgewovLyAgICAgICAgICAgICAgICAgICAgcy4kcGFyZW50LnVwZGF0ZVByb2R1Y3QocHJvZHVjdFRvQWRkLCBzLmNvbG9yU2VsZWN0ZWQsIHMucXVhbnRpdHksIHJlc29sdmVQYXJhbXNfc2VsZWN0ZWRDb2xvciwKLy8gICAgICAgICAgICAgICAgICAgICAgICAkZmlsdGVyKCJ0cmFuc2xhdGUiKSgidG9hc3RfUHJvZHVjdF9VcGRhdGVkX1N1Y2Nlc3NmdWxseSIpKS50aGVuKGZ1bmN0aW9uKHJlcyl7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzLm1lc3NhZ2UpewovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1lc3NhZ2UudGV4dCA9IHJlcy5tZXNzYWdlOyAvL3MuX2NsYXNzID0gcmVzLnN1Y2Nlc3MgPyAidmFsaWQiIDogImludmFsaWQiOwovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihfX19fX3Byb2R1Y3RBZGRlZCl7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoX19fX19wcm9kdWN0QWRkZWQpOwovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fX19fcHJvZHVjdEFkZGVkID0gJHRpbWVvdXQoZnVuY3Rpb24oKXsKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubWVzc2FnZS50ZXh0ID0gIiI7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1lc3NhZ2UuX2NsYXNzID0gIiI7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3Nob3BwaW5nQ2FydCcpOwovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKLy8gICAgICAgICAgICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXsKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzaG9wcGluZ0NhcnQnKTsKLy8gICAgICAgICAgICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgICAgICAgICB9KTsKLy8gICAgICAgICAgICAgICAgfQovLyAgICAgICAgICAgICAgICBlbHNlIHsKLy8gICAgICAgICAgICAgICAgICAgIHZhciBxdWFudGl0eSA9IHMucXVhbnRpdHk7Ci8vCi8vICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKLy8gICAgICAgICAgICAgICAgICAgIGlmICghKHVzZXIgJiYgdXNlci5yZXNwb25zZSAmJiB1c2VyLnJlc3BvbnNlLnVzZXJJZCAhPSAtMSkpIHsKLy8gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHMuJHBhcmVudC5jYXJ0LnByb2R1Y3RzSW5DYXJ0Lmxlbmd0aDsgaSsrKSB7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9kID0gcy4kcGFyZW50LmNhcnQucHJvZHVjdHNJbkNhcnRbaV07Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9kLnByb2R1Y3RJZCA9PSBwcm9kdWN0VG9BZGQucHJvZHVjdElkICYmIHByb2QuY29sb3IuY29kZSA9PSBzLmNvbG9yU2VsZWN0ZWQuY29kZSkgewovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2QucXVhbnRpdHkgKyBxdWFudGl0eSA+IHMucHJvZHVjdC5jb2xvcnNbMF0uaW5TdG9jaykgewovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5ID0gcy5wcm9kdWN0LmNvbG9yc1swXS5pblN0b2NrIC0gcHJvZC5xdWFudGl0eTsKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfQovLyAgICAgICAgICAgICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgICAgICAgIGlmIChxdWFudGl0eSA+IDApIHsKLy8gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IHMuJHBhcmVudC5hZGRQcm9kdWN0KHByb2R1Y3RUb0FkZCwgcXVhbnRpdHksICRmaWx0ZXIoInRyYW5zbGF0ZSIpKCJ0b2FzdF9Qcm9kdWN0X0FkZGVkX1N1Y2Nlc3NmdWxseSIpKTsKLy8gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnRoZW4oZnVuY3Rpb24gKHJlcykgewovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXMubWVzc2FnZSl7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1lc3NhZ2UudGV4dCA9IHJlcy5tZXNzYWdlOyAvL3MuX2NsYXNzID0gcmVzLnN1Y2Nlc3MgPyAidmFsaWQiIDogImludmFsaWQiOwovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoX19fX19wcm9kdWN0QWRkZWQpewovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbChfX19fX3Byb2R1Y3RBZGRlZCk7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX19fX3Byb2R1Y3RBZGRlZCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCl7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5tZXNzYWdlLnRleHQgPSAiIjsKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1lc3NhZ2UuX2NsYXNzID0gIiI7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA0MDAwKTsKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfQovLyAgICAgICAgICAgICAgICAgICAgICAgIH0pOwovLyAgICAgICAgICAgICAgICAgICAgfQovLyAgICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgfTsKLy8gICAgICAgICAgICB2YXIgX19fX19wcm9kdWN0QWRkZWQ7Ci8vCi8vCi8vICAgICAgICAgICAgcy5jaGFuZ2VJbWFnZSA9IGZ1bmN0aW9uIChpbWcpIHsKLy8gICAgICAgICAgICAgICAgcy5pbWFnZVVybCA9IGltZzsKLy8gICAgICAgICAgICB9OwovLwovLyAgICAgICAgICAgIHMuc2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHsKLy8gICAgICAgICAgICAgICAgcy5pbWFnZVVybCA9IHMucHJvZHVjdC5pbWFnZVVybDsKLy8gICAgICAgICAgICAgICAgcy5jb2xvclNlbGVjdGVkID0gY29sb3I7Ci8vICAgICAgICAgICAgICAgIHMuZ2V0Rmlyc3RJbWFnZVVybCgpOwovLyAgICAgICAgICAgIH07Ci8vCi8vICAgICAgICAgICAgSGVscGVyLmZvckFsbFBhZ2UoKTsKLy8KLy8gICAgICAgICAgICBjb25zb2xlLmxvZygicmVzb2x2ZVBhcmFtcyIpOwovLyAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc29sdmVQYXJhbXMpOwovLwovLwovLyAgICAgICAgICAgIHMubmV4dFJldmlldyA9IGZ1bmN0aW9uKCl7Ci8vICAgICAgICAgICAgICAgIGlmKHNsaWRlckluZGV4ICsgMSA+PSBzLm1vc3RQb3B1bGFyQ29tbWVudHMubGVuZ3RoKXsKLy8gICAgICAgICAgICAgICAgICAgIHJldHVybjsKLy8gICAgICAgICAgICAgICAgfQovLyAgICAgICAgICAgICAgICBzbGlkZXJJbmRleCsrOwovLyAgICAgICAgICAgICAgICByZXZpZXdHbygpOwovLyAgICAgICAgICAgIH07Ci8vICAgICAgICAgICAgcy5wcmV2aW91c1JldmlldyA9IGZ1bmN0aW9uKCl7Ci8vICAgICAgICAgICAgICAgIGlmKHNsaWRlckluZGV4ID09IDApewovLyAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwovLyAgICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgICAgIHNsaWRlckluZGV4LS07Ci8vICAgICAgICAgICAgICAgIHJldmlld0dvKCk7Ci8vICAgICAgICAgICAgfTsKLy8gICAgICAgICAgICBmdW5jdGlvbiByZXZpZXdHbygpewovLyAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoc2xpZGVyX2ludGVydmFsKTsKLy8gICAgICAgICAgICAgICAgc2xpZGVySGFuZGxlcigpOwovLyAgICAgICAgICAgIH0KLy8gICAgICAgICAgICBmdW5jdGlvbiByZXZpZXdHb3RvTmV3KCl7Ci8vICAgICAgICAgICAgICAgIHNsaWRlckluZGV4Kys7Ci8vICAgICAgICAgICAgICAgIHNsaWRlckhhbmRsZXIoKTsKLy8gICAgICAgICAgICB9Ci8vCi8vCi8vICAgICAgICAgICAgdmFyIHNsaWRlckluZGV4ID0gMDsKLy8gICAgICAgICAgICB2YXIgc2xpZGVyX2ludGVydmFsOwovLyAgICAgICAgICAgIHJldmlld0dvKCk7Ci8vICAgICAgICAgICAgZnVuY3Rpb24gc2xpZGVySGFuZGxlcigpewovLwovLyAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHNsaWRlckluZGV4IDwgcy5tb3N0UG9wdWxhckNvbW1lbnRzLmxlbmd0aCA/Ci8vICAgICAgICAgICAgICAgICItIiArICgkKCIjcHJvZHVjdF8yIC5yZXZpZXdzIikud2lkdGgoKSAqIHNsaWRlckluZGV4KSA6IDA7Ci8vCi8vICAgICAgICAgICAgICAgIGlmKGxlZnQgPT0gMCl7IHNsaWRlckluZGV4ID0gMDsgfQovLwovLyAgICAgICAgICAgICAgICAkKCIjcHJvZHVjdF8yIC5yZXZpZXdzIC5yZXZpZXdzQ292ZXIiKS5jc3MoeyBsZWZ0OiBsZWZ0ICsgInB4IiB9KTsKLy8KLy8gICAgICAgICAgICAgICAgJCgiI3Byb2R1Y3RfMiAucmV2aWV3cyAucmlnaHRBcnJvdyBpbWciKS5hdHRyKCJzcmMiLCIuLi8uLi9jc3MvaW1hZ2VzL3Jldmlld19yaWdodCIgKwovLyAgICAgICAgICAgICAgICAgICAgKHNsaWRlckluZGV4ICsgMSA8IHMubW9zdFBvcHVsYXJDb21tZW50cy5sZW5ndGggPyAiIiA6ICJfZGlzYWJsZWQiKSArIi5wbmciKQovLwovLyAgICAgICAgICAgICAgICAkKCIjcHJvZHVjdF8yIC5yZXZpZXdzIC5sZWZ0QXJyb3cgaW1nIikuYXR0cigic3JjIiwgIi4uLy4uL2Nzcy9pbWFnZXMvcmV2aWV3X0xlZnQiCi8vICAgICAgICAgICAgICAgICAgICArIChzbGlkZXJJbmRleCA9PSAwID8gIl9kaXNhYmxlZCIgOiAiIikgKyIucG5nIikKLy8KLy8gICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQubG9jYXRpb24uaGFzaC5pbmRleE9mKCIvcHJvZHVjdC8iKSAhPSAtMSl7Ci8vICAgICAgICAgICAgICAgICAgICBzbGlkZXJfaW50ZXJ2YWwgPSAkdGltZW91dChyZXZpZXdHb3RvTmV3LCAxMjAwMCk7Ci8vICAgICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICB9Ci8vICAgICAgICB9XSk7Ci8vfSk7Ci8vCi8vCi8vCi8vCi8vCi8vLyoqCi8vICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAyMS8xMS8yMDE1LgovLyAqLwovLwovLwovLwovLy8qCi8vIHZhciBpbWcgPSAkKCIjaW1nVG9CdXkiKS5jbG9uZSgpOwovLyB2YXIgaW1nUG9zcyA9ICQoIiNpbWdUb0J1eSIpLm9mZnNldCgpOwovLyB2YXIgbWFpbkNhcnRQb3NzaXRpb24gPSAkKCIjbWFpbkNhcnQiKS5vZmZzZXQoKTsKLy8KLy8gaW1nLmNzcyh7Ci8vICJwb3NpdGlvbiIgOiAiYWJzb2x1dGUiLAovLyAidG9wIjogaW1nUG9zcy50b3AgKyAicHgiLAovLyAibGVmdCI6IGltZ1Bvc3MubGVmdCArICJweCIsCi8vICJkaXNwbGF5IiA6ICJub25lIiwKLy8gfSkKLy8gaW1nLmFwcGVuZFRvKCIjcHJvZHVjdC1pbWFnZSIpOwovLyBpbWcuZmFkZUluKDEwMDAsIGZ1bmN0aW9uKCl7Ci8vIGltZy5hbmltYXRlKHsKLy8gdG9wIDogbWFpbkNhcnRQb3NzaXRpb24udG9wICsgNSwKLy8gbGVmdCA6IG1haW5DYXJ0UG9zc2l0aW9uLmxlZnQgKyAxMCwKLy8gd2lkdGg6IDEwLAovLyBoZWlnaHQ6IDEwLAovLyBvcGFjaXR5OiAwLjMKLy8gfSwgMTAwMCwgZnVuY3Rpb24oKXsKLy8gaW1nLnJlbW92ZSgpOwovLyAvLyRyb290U2NvcGUudXNlci5jYXJ0LmxhcHRvcHMucHVzaCgkc2NvcGUucHJvZHVjdCkgPSBnZXQgdXNlcgovLyB9KTsKLy8gfSkKLy8gKi8KLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMjEvMTEvMjAxNS4KICovCgpkZWZpbmUoJ2FwcC9jb250cm9sbGVycy9wcm9kdWN0Q3RybCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ3Byb2R1Y3RDdHJsJywgWyckc2NvcGUnLCAncmVzb2x2ZVBhcmFtcycsICckc3RhdGUnLCAnJGZpbHRlcicsCiAgICAgICAgJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLCAnY2F0ZWdvcnlTZXJ2aWNlJywgJyRzY2UnLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnLCAndXNlclNlcnZpY2UnLAoKICAgICAgICBmdW5jdGlvbiAocywgcmVzb2x2ZVBhcmFtcywgJHN0YXRlLCAkZmlsdGVyLCAkcm9vdFNjb3BlLCAkdGltZW91dCwgY2F0ZWdvcnlTZXJ2aWNlLCAkc2NlLCBkb2N1bWVudCwgJHdpbmRvdywgdXNlclNlcnZpY2UpIHsKCiAgICAgICAgICAgIHMucGFnZVN0YXRlID0gcmVzb2x2ZVBhcmFtcy5wYWdlU3RhdGU7CiAgICAgICAgICAgIHZhciByZXNvbHZlUGFyYW1zX3NlbGVjdGVkQ29sb3IgPSByZXNvbHZlUGFyYW1zLnNlbGVjdGVkQ29sb3I7CgogICAgICAgICAgICBzLm1lc3NhZ2UgPSB7fTsKICAgICAgICAgICAgcy5xdWFudGl0eSA9IHJlc29sdmVQYXJhbXMucXVhbnRpdHkgfHwgMTsKICAgICAgICAgICAgcy5jYXRlZ29yeU5hbWUgPSByZXNvbHZlUGFyYW1zLmNhdGVnb3J5TmFtZTsKICAgICAgICAgICAgcy5wcm9kdWN0ID0gcmVzb2x2ZVBhcmFtcy5wcm9kdWN0OwogICAgICAgICAgICBzLm1vc3RQb3B1bGFyQ29tbWVudHMgPSBbXTsKICAgICAgICAgICAgcy53YXJyYW50eVByaWNlID0gMTAwOwogICAgICAgICAgICBzLmhhdmVJbnRlcm5ldCA9IHJlc29sdmVQYXJhbXMuaGF2ZUludGVybmV0OwogICAgICAgICAgICBzLndhcnJhbnR5UHJvcGVydGllcyA9IHtlbmFibGVXYXJyYW50eSA6IGZhbHNlfQogICAgICAgICAgICB1c2VyU2VydmljZS5oYXZlQ29uZmlndXJhdGlvbigpLnRoZW4oZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICAgICAgICBzLndhcnJhbnR5UHJvcGVydGllcyA9IHVzZXJTZXJ2aWNlLmdldFdhcnJhbnR5UHJvcGVydGllcygpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycil7CgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzLndhcnJhbnR5Q2hlY2tib3ggPSBmYWxzZTsKICAgICAgICAgICAgcy5icmVhZENydW1iQ2F0ZWdvcnlOYW1lID0gcy5jYXRlZ29yeU5hbWUuc3Vic3RyaW5nKDAsMSkgKyBzLmNhdGVnb3J5TmFtZS5zdWJzdHJpbmcoMSwgcy5jYXRlZ29yeU5hbWUubGVuZ3RoLTEpLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgaWYocy5wcm9kdWN0LnByb2R1Y3RJZCA9PSAyMiB8fCBzLnByb2R1Y3QucHJvZHVjdElkID09IDE1IHx8IHMucHJvZHVjdC5wcm9kdWN0SWQgPT0gMTYpewogICAgICAgICAgICAgICAgcy5zcmNWMSA9ICRzY2UudHJ1c3RBc0h0bWwoIjx2aWRlbyBjb250cm9scyA+PHNvdXJjZSBzcmM9Jy4uLy4uL2Nzcy92aWRlb3MvMTM1NDMzNjFfMjk5ODIzOTIzNjg4ODI0XzE0MTAwMDUxNDRfbi5tcDQnPjwvdmlkZW8+Iik7CiAgICAgICAgICAgICAgICBzLnNob3dWaWRlbyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHMuc2hvd1ZpZGVvID0gZmFsc2U7CiAgICAgICAgICAgICAgICBzLnNyY1YxID0gIiI7fQoKICAgICAgICAgICAgcy5pbWFnZVVybCA9IGFuZ3VsYXIuY29weShzLnByb2R1Y3QuaW1hZ2VVcmwpOwoKICAgICAgICAgICAgcy5nZXRGaXJzdEltYWdlVXJsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcy5pbWFnZXNBcnJheSA9ICRmaWx0ZXIoImdldEFsbEltYWdlc0J5Q29sb3IiKShzLnByb2R1Y3QuaW1hZ2VzLCBzLmNvbG9yU2VsZWN0ZWQsIHMucHJvZHVjdC5pbWFnZVVybCk7CiAgICAgICAgICAgICAgICBzLmltYWdlVXJsID0gcy5pbWFnZXNBcnJheVswXTsKICAgICAgICAgICAgICAgIHJldHVybiBzLmltYWdlc0FycmF5OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcy5wcm9kdWN0X2F0dHJpYnV0ZXMgPSBIZWxwZXIuc29ydEF0dHJpYnV0ZXNCeU5hbWUocy5wcm9kdWN0LmF0dHJpYnV0ZXMpOwoKICAgICAgICAgICAgaWYgKCFyZXNvbHZlUGFyYW1zLnNlbGVjdGVkQ29sb3IgJiYgcy5wcm9kdWN0LmNvbG9ycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB2YXIgY29sb3JzID0gSGVscGVyLnNvcnRBcnJheUJ5Q29sb3JOYW1lKHMucHJvZHVjdC5jb2xvcnMpOwogICAgICAgICAgICAgICAgLy9Gcm9tIGhlcmUgdG8gbGluZSAyNjcgd2Ugb3JnYW5pemUgdGhlIGNvbG9yIGFycmF5IHRvIHN0YXJ0IHdpdGggdGhlIGNvbG9yIGluIHRoZQogICAgICAgICAgICAgICAgLy9jYXRlZ29yeSBzZWN0aW9uLgogICAgICAgICAgICAgICAgLy8gdmFyIGltYWdlVXJsSW5Qcm9kdWN0SW1hZ2VzID0gcy5wcm9kdWN0LmltYWdlcy5maW5kKGZ1bmN0aW9uKGltYWdlKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIGltYWdlLnN1YnN0cmluZyg4KT09IHMuaW1hZ2VVcmw7CiAgICAgICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgICAgIHZhciBpbWFnZVVybEluUHJvZHVjdEltYWdlcyA9IGFsdEZpbmQocy5wcm9kdWN0LmltYWdlcywgZnVuY3Rpb24oaW1hZ2UpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2Uuc3Vic3RyaW5nKDgpPT0gcy5pbWFnZVVybDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8gcy5maXJzdEltYWdlVG9TaG93ID0gY29sb3JzLmZpbmQoZnVuY3Rpb24gKGNvbG9yKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIGNvbG9yLmNvZGUgPT0gaW1hZ2VVcmxJblByb2R1Y3RJbWFnZXMuc3Vic3RyaW5nKDAsIDYpOwogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICBzLmZpcnN0SW1hZ2VUb1Nob3cgPSBhbHRGaW5kKGNvbG9ycywgZnVuY3Rpb24oY29sb3IpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IuY29kZSA9PSBpbWFnZVVybEluUHJvZHVjdEltYWdlcy5zdWJzdHJpbmcoMCwgNik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vRGFtYWdlZCBpbWFnZXMgcHJvZHVjdHMuCiAgICAgICAgICAgICAgICBpZiAoIXMuZmlyc3RJbWFnZVRvU2hvdyl7CiAgICAgICAgICAgICAgICAgICAgcy5jb2xvclNlbGVjdGVkID0gY29sb3JzWzBdOwogICAgICAgICAgICAgICAgICAgIC8vVGVzdGluZyBpc3N1ZSBvdmVyIGhlcmUuIFNpbmNlIHRoZXJlIGFyZSB0d28gaWRlbnRpY2FsIGVsZW1lbnRzIGhlcmUgICdsZWFuRlQgJyBnZXRzIGNvbmZ1c2VkLCB0aGlzIGlzIHRoZSByZWFzb24gZm9yIHRoaXMgY2xhc3Nlcy4KICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvbWVWYXIgPSBkb2N1bWVudFswXS5nZXRFbGVtZW50QnlJZCgncmFiYml0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoc29tZVZhcikucmVtb3ZlQ2xhc3MoJ3JhYmJpdCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vU29ydGluZyB0aGUgaW1hZ2UgZnJvbSBjYXRlZ29yeSBwYWdlIHRvIGJlIHRoZSBiZSBpbWFnZSB0byBzaG93IGFuZCBmaXJzdCBpbiAnY29sb3JzJy4KICAgICAgICAgICAgICAgICAgICBjb2xvcnMgPSAkZmlsdGVyKCdmaWx0ZXInKShjb2xvcnMsIGZ1bmN0aW9uIChjb2xvcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IubmFtZSAhPSBzLmZpcnN0SW1hZ2VUb1Nob3cubmFtZTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIGNvbG9ycy51bnNoaWZ0KHMuZmlyc3RJbWFnZVRvU2hvdyk7CiAgICAgICAgICAgICAgICAgICAgcy5jb2xvclNlbGVjdGVkID0gY29sb3JzWzBdOwogICAgICAgICAgICAgICAgICAgIHMuY29sb3JzID0gY29sb3JzOwogICAgICAgICAgICAgICAgICAgIC8vVGVzdGluZyBpc3N1ZSBvdmVyIGhlcmUuIFNpbmNlIHRoZXJlIGFyZSB0d28gaWRlbnRpY2FsIGVsZW1lbnRzIGhlcmUgICdsZWFuRlQgJyBnZXRzIGNvbmZ1c2VkLCB0aGlzIGlzIHRoZSByZWFzb24gZm9yIHRoaXMgY2xhc3Nlcy4KICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvbWVWYXIgPSBkb2N1bWVudFswXS5nZXRFbGVtZW50QnlJZCgnYnVubnknKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChzb21lVmFyKS5yZW1vdmVDbGFzcygnYnVubnknKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLnByb2R1Y3QuY29sb3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHMucHJvZHVjdC5jb2xvcnNbaV0uY29kZSA9PSByZXNvbHZlUGFyYW1zLnNlbGVjdGVkQ29sb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy5jb2xvclNlbGVjdGVkID0gcy5wcm9kdWN0LmNvbG9yc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgoKICAgICAgICAgICAgZnVuY3Rpb24gYWx0RmluZChsaXN0LCBjYWxsYmFjaykgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gY2FsbGJhY2sobGlzdFtpXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0W2ldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy5jb2xvclNlbGVjdGVkID0gcy5jb2xvclNlbGVjdGVkIHx8IHMucHJvZHVjdC5jb2xvcnNbMF07CiAgICAgICAgICAgIHMuZ2V0Rmlyc3RJbWFnZVVybCgpOwoKICAgICAgICAgICAgcy5hZGRUb0NhcnQgPSBmdW5jdGlvbiAoZGlzYWJsZSkgewoKICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0VG9BZGQgPSBhbmd1bGFyLmNvcHkocy5wcm9kdWN0KTsKICAgICAgICAgICAgICAgIHByb2R1Y3RUb0FkZC5jb2xvcnMgPSBbcy5jb2xvclNlbGVjdGVkXTsKCiAgICAgICAgICAgICAgICBpZiAocy5wYWdlU3RhdGUgPT0gJ2VkaXQnKSB7CiAgICAgICAgICAgICAgICAgICAgcy4kcGFyZW50LnVwZGF0ZVByb2R1Y3QocHJvZHVjdFRvQWRkLCBzLmNvbG9yU2VsZWN0ZWQsIHMucXVhbnRpdHksIHJlc29sdmVQYXJhbXNfc2VsZWN0ZWRDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgJGZpbHRlcigidHJhbnNsYXRlIikoInRvYXN0X1Byb2R1Y3RfVXBkYXRlZF9TdWNjZXNzZnVsbHkiKSkudGhlbihmdW5jdGlvbihyZXMpewogICAgICAgICAgICAgICAgICAgICAgICBpZihyZXMubWVzc2FnZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1lc3NhZ2UudGV4dCA9IHJlcy5tZXNzYWdlOyAvL3MuX2NsYXNzID0gcmVzLnN1Y2Nlc3MgPyAidmFsaWQiIDogImludmFsaWQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoX19fX19wcm9kdWN0QWRkZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbChfX19fX3Byb2R1Y3RBZGRlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX19fX3Byb2R1Y3RBZGRlZCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5tZXNzYWdlLnRleHQgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1lc3NhZ2UuX2NsYXNzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzaG9wcGluZ0NhcnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3Nob3BwaW5nQ2FydCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcXVhbnRpdHkgPSBzLnF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgICAgIGlmICghKHVzZXIgJiYgdXNlci5yZXNwb25zZSAmJiB1c2VyLnJlc3BvbnNlLnVzZXJJZCAhPSAtMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocy5wcm9kdWN0LmNvbG9yc1swXSA9PSBudWxsIHx8IHF1YW50aXR5ID4gcy5wcm9kdWN0LmNvbG9yc1swXS5pblN0b2NrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubWVzc2FnZS50ZXh0ID0gJGZpbHRlcigidHJhbnNsYXRlIikoJ1BST0RVQ1RfUVVBTlRJVFlfRVJST1JfTUVTU0FHRScpLmZvcm1hdChzLnByb2R1Y3QuY29sb3JzWzBdID09IG51bGwgPyAwIDogcy5wcm9kdWN0LmNvbG9yc1swXS5pblN0b2NrKTsgLy9zLl9jbGFzcyA9IHJlcy5zdWNjZXNzID8gInZhbGlkIiA6ICJpbnZhbGlkIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9fX19fcHJvZHVjdEFkZGVkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoX19fX19wcm9kdWN0QWRkZWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX19fX19wcm9kdWN0QWRkZWQgPSAkdGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubWVzc2FnZS50ZXh0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5tZXNzYWdlLl9jbGFzcyA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNDAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eSA9IHMucHJvZHVjdC5jb2xvcnNbMF0uaW5TdG9jazsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLiRwYXJlbnQuY2FydC5wcm9kdWN0c0luQ2FydC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2QgPSBzLiRwYXJlbnQuY2FydC5wcm9kdWN0c0luQ2FydFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9kLnByb2R1Y3RJZCA9PSBwcm9kdWN0VG9BZGQucHJvZHVjdElkICYmIHByb2QuY29sb3IuY29kZSA9PSBzLmNvbG9yU2VsZWN0ZWQuY29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9kLnF1YW50aXR5ICsgcXVhbnRpdHkgPiBzLnByb2R1Y3QuY29sb3JzWzBdLmluU3RvY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHkgPSBzLnByb2R1Y3QuY29sb3JzWzBdLmluU3RvY2sgLSBwcm9kLnF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocXVhbnRpdHkgPiAwKSB7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IHMuJHBhcmVudC5hZGRQcm9kdWN0KHByb2R1Y3RUb0FkZCwgcXVhbnRpdHksIHMud2FycmFudHlDaGVja2JveCwgJGZpbHRlcigidHJhbnNsYXRlIikoInRvYXN0X1Byb2R1Y3RfQWRkZWRfU3VjY2Vzc2Z1bGx5IikpOwogICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzLm1lc3NhZ2UpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubWVzc2FnZS50ZXh0ID0gcmVzLm1lc3NhZ2U7IC8vcy5fY2xhc3MgPSByZXMuc3VjY2VzcyA/ICJ2YWxpZCIgOiAiaW52YWxpZCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoX19fX19wcm9kdWN0QWRkZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoX19fX19wcm9kdWN0QWRkZWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX19fX3Byb2R1Y3RBZGRlZCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubWVzc2FnZS50ZXh0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubWVzc2FnZS5fY2xhc3MgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA0MDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKXsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIF9fX19fcHJvZHVjdEFkZGVkOwoKCiAgICAgICAgICAgIHMuY2hhbmdlSW1hZ2UgPSBmdW5jdGlvbiAoaW1nKSB7CiAgICAgICAgICAgICAgICBzLmltYWdlVXJsID0gaW1nOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcy5zZXRDb2xvciA9IGZ1bmN0aW9uIChjb2xvciwgZSkgewogICAgICAgICAgICAgICAgcy5pbWFnZVVybCA9IHMucHJvZHVjdC5pbWFnZVVybDsKICAgICAgICAgICAgICAgIHMuY29sb3JTZWxlY3RlZCA9IGNvbG9yOwogICAgICAgICAgICAgICAgcy5nZXRGaXJzdEltYWdlVXJsKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBIZWxwZXIuZm9yQWxsUGFnZSgpOwoKICAgICAgICAgICAgcy5uZXh0UmV2aWV3ID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmKHNsaWRlckluZGV4ICsgMSA+PSBzLm1vc3RQb3B1bGFyQ29tbWVudHMubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzbGlkZXJJbmRleCsrOwogICAgICAgICAgICAgICAgcmV2aWV3R28oKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHMucHJldmlvdXNSZXZpZXcgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoc2xpZGVySW5kZXggPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2xpZGVySW5kZXgtLTsKICAgICAgICAgICAgICAgIHJldmlld0dvKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBmdW5jdGlvbiByZXZpZXdHbygpewogICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHNsaWRlcl9pbnRlcnZhbCk7CiAgICAgICAgICAgICAgICBzbGlkZXJIYW5kbGVyKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHJldmlld0dvdG9OZXcoKXsKICAgICAgICAgICAgICAgIHNsaWRlckluZGV4Kys7CiAgICAgICAgICAgICAgICBzbGlkZXJIYW5kbGVyKCk7CiAgICAgICAgICAgIH0KCgogICAgICAgICAgICB2YXIgc2xpZGVySW5kZXggPSAwOwogICAgICAgICAgICB2YXIgc2xpZGVyX2ludGVydmFsOwoKICAgICAgICAgICAgZnVuY3Rpb24gc2xpZGVySGFuZGxlcigpewoKICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gc2xpZGVySW5kZXggPCBzLm1vc3RQb3B1bGFyQ29tbWVudHMubGVuZ3RoID8KICAgICAgICAgICAgICAgICItIiArICgkKCIjcHJvZHVjdF8yIC5yZXZpZXdzIikud2lkdGgoKSAqIHNsaWRlckluZGV4KSA6IDA7CgogICAgICAgICAgICAgICAgaWYobGVmdCA9PSAwKXsgc2xpZGVySW5kZXggPSAwOyB9CgogICAgICAgICAgICAgICAgJCgiI3Byb2R1Y3RfMiAucmV2aWV3cyAucmV2aWV3c0NvdmVyIikuY3NzKHsgbGVmdDogbGVmdCArICJweCIgfSk7CgogICAgICAgICAgICAgICAgJCgiI3Byb2R1Y3RfMiAucmV2aWV3cyAucmlnaHRBcnJvdyBpbWciKS5hdHRyKCJzcmMiLCIuLi8uLi9jc3MvaW1hZ2VzL3Jldmlld19yaWdodCIgKwogICAgICAgICAgICAgICAgICAgIChzbGlkZXJJbmRleCArIDEgPCBzLm1vc3RQb3B1bGFyQ29tbWVudHMubGVuZ3RoID8gIiIgOiAiX2Rpc2FibGVkIikgKyIucG5nIikKCiAgICAgICAgICAgICAgICAkKCIjcHJvZHVjdF8yIC5yZXZpZXdzIC5sZWZ0QXJyb3cgaW1nIikuYXR0cigic3JjIiwgIi4uLy4uL2Nzcy9pbWFnZXMvcmV2aWV3X0xlZnQiCiAgICAgICAgICAgICAgICAgICAgKyAoc2xpZGVySW5kZXggPT0gMCA/ICJfZGlzYWJsZWQiIDogIiIpICsiLnBuZyIpCgogICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQubG9jYXRpb24uaGFzaC5pbmRleE9mKCIvcHJvZHVjdC8iKSAhPSAtMSl7CiAgICAgICAgICAgICAgICAgICAgc2xpZGVyX2ludGVydmFsID0gJHRpbWVvdXQocmV2aWV3R290b05ldywgMTIwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihzLnByb2R1Y3QuY2F0ZWdvcnlJZCA9PSAyKQogICAgICAgICAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlLmdldE1vc3RQb3B1bGFyQ29tbWVudHMocy5wcm9kdWN0LmNhdGVnb3J5SWQpLnRoZW4oZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICAgICAgICBzLm1vc3RQb3B1bGFyQ29tbWVudHMgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgcmV2aWV3R28oKTsKICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgIHMuYWRkV2FycmVudHkgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYocy53YXJyYW50eUNoZWNrYm94KXsKICAgICAgICAgICAgICAgICAgICBzLnByb2R1Y3QucHJpY2UgKz0gcy53YXJyYW50eVByaWNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICBzLnByb2R1Y3QucHJpY2UgLT0gcy53YXJyYW50eVByaWNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKCiAgICAgICAgfV0pOwoKCgoKCn0pOwoKCgoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTgvMDIvMjAxNi4KICovCgpkZWZpbmUoJ2FwcC9jb250cm9sbGVycy9zdXBwb3J0Q3RybCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ3N1cHBvcnRDdHJsJywgWyckc2NvcGUnLCAncmVnaXN0ZXJTZXJ2aWNlJywKCiAgICAgICAgZnVuY3Rpb24gKHMsIHJlZ2lzdGVyU2VydmljZSkgewoKICAgICAgICAgICAgcy5ob2xhX211bmRvID0gImhvbGFfbXVuZG9ob2xhX211bmRvaG9sYV9tdW5kb2hvbGFfbXVuZG8iCgogICAgICAgICAgICAvL3MubW9kZWwgPSAiIjsKICAgICAgICAgICAgcy5tb2RlbDIgPSAidEB5LnNlYyI7CiAgICAgICAgICAgIHMubW9kZWwzID0gImVAZS5zZWMiOwogICAgICAgICAgICBzLm1vZGVsNCA9ICJyQHIuc2VjIjsKCiAgICAgICAgICAgIHMubW9kZWwzMCA9IG51bGw7CgogICAgICAgICAgICBzLmlzU2VuZGVkID0gZnVuY3Rpb24gKHNlbmRlZCkgewogICAgICAgICAgICAgICAgYWxlcnQoc2VuZGVkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9zLmlzU2VuZGVkID0gZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgICAgIC8vICAgIGNvbnNvbGUubG9nKHZhbGlkKTsKICAgICAgICAgICAgLy99CgogICAgICAgICAgICAvL25nLW9wdGlvbnM9ImNvdW50cnkubmFtZSBmb3IgY291bnRyeSBpbiBjb3VudHJpZXMgdHJhY2sgYnkgY291bnRyeS5pZCIKCgogICAgICAgICAgICBzLmNvdW50cmllczsKICAgICAgICAgICAgcmVnaXN0ZXJTZXJ2aWNlLmdldEFsbENvdW50cmllcygpLnRoZW4oZnVuY3Rpb24gKGNvdW50cmllcykgewogICAgICAgICAgICAgICAgcy5jb3VudHJpZXMgPSBjb3VudHJpZXM7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcy5zZWNfc2VsZWN0X29yZGVyID0gewogICAgICAgICAgICAgICAgc2hvd0J5IDogJ25hbWUnLAogICAgICAgICAgICB9CgogICAgICAgICAgICAvL29wdGlvbi5uYW1lIGZvciBvcHRpb24gaW4gZGF0YS5hdmFpbGFibGVPcHRpb25zIHRyYWNrIGJ5IG9wdGlvbi5pZAoKCgogICAgICAgICAgICBzLnJlcXVpcmUgPSB7CiAgICAgICAgICAgICAgICBlcnJvcjogJ3RoaXMgZmllbGQgaXMgcmVxdWlyZWQgJywKICAgICAgICAgICAgICAgIGluZm86ICctIHRoaXMgZmllbGQgaGF2ZSB0byBoYXZlIHZhbHVlJywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy5jaGVja2JveFJlcXVpcmUgPSB7CiAgICAgICAgICAgICAgICBlcnJvcjogJyBZb3UgbXVzdCBhZ3JlZSB0byB0aGUgd3d3LkFkdmFudGFnZU9ubGluZVNob3BwaW5nLmNvbSBDb25kaXRpb25zIG9mIFVzZSBhbmQgUHJpdmFjeSBOb3RpY2UuICcsCiAgICAgICAgICAgICAgICBpbmZvOiAnSSBhZ3JlZSB0byB0aGUgd3d3LkFkdmFudGFnZU9ubGluZVNob3BwaW5nLmNvbSBDb25kaXRpb25zIG9mIFVzZSBhbmQgUHJpdmFjeSBOb3RpY2UnLAogICAgICAgICAgICB9CgoKICAgICAgICAgICAgcy5taW5MZW5ndGggPSB7CiAgICAgICAgICAgICAgICBlcnJvcjogJ1VzZSB1cCBvZiA0IGNoYXJhY3RlcicsCiAgICAgICAgICAgICAgICBpbmZvOiAnLSBVc2UgdXAgb2YgNCBjaGFyYWN0ZXInLAogICAgICAgICAgICAgICAgbWluOiA0LAogICAgICAgICAgICB9CgogICAgICAgICAgICBzLm1heExlbmd0aCA9IHsKICAgICAgICAgICAgICAgIGVycm9yOiAnVXNlIG1heGltdW0gOCBjaGFyYWN0ZXInLAogICAgICAgICAgICAgICAgaW5mbzogJy0gVXNlIG1heGltdW0gOCBjaGFyYWN0ZXInLAogICAgICAgICAgICAgICAgbWF4OiA4LAogICAgICAgICAgICB9CgogICAgICAgICAgICBzLmVtYWlsID0gewogICAgICAgICAgICAgICAgZXJyb3IgOiAiWW91ciBlbWFpbCBhZGRyZXNzIGlzbuKAmXQgZm9ybWF0dGVkIGNvcnJlY3RseSIsCiAgICAgICAgICAgICAgICBpbmZvOiAiLSBBIHZhbGlkIGVtYWlsIHJlcXVpcmVkIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIl5bX0EtWmEtejAtOS1cK10rKFwuW19BLVphLXowLTktXSspKkBbQS1aYS16MC05LV0rKFwuW0EtWmEtejAtOV0rKSooXC5bQS1aYS16XXsyLH0pJCIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy5jb21wYXJlVG8gPSB7CiAgICAgICAgICAgICAgICBlcnJvciA6ICJTYW1lIGFzIFVzZXJuYW1lIiwKICAgICAgICAgICAgICAgIGluZm86ICItIEEgcGFyYW0gaGF2ZSB0byBiZSBleGFjdGx5IGxpa2UgVXNlck5hbWUiLAogICAgICAgICAgICAgICAgbW9kZWwgOiBzLm1vZGVsCiAgICAgICAgICAgIH0KICAgICAgICB9XSk7Cn0pOwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovL2wocGFyYW1zVG9SZXNvcnZlLmNhdGVnb3JpZXMpCgoKLy9zLnN1cHBvcnRTdWNjZXNzID0gZmFsc2U7Ci8vcy5yZWdpc3RlckFuc3dlciA9IHsgY2xhc3M6ICIiLCBtZXNzYWdlOiAiIiB9Ci8vcy5zdXBwb3J0TW9kZWwgPSB7Ci8vICAgICJjYXRlZ29yeSI6IHt9LAovLyAgICAiZW1haWwiOiAiIiwKLy8gICAgInByb2R1Y3QiOiB7fSwKLy8gICAgInN1YmplY3QiOiAiIgovL30KLy8KLy9zLmNhdGVnb3JpZXMgPSBwYXJhbXNUb1Jlc29ydmUuY2F0ZWdvcmllczsKLy9zLnByb2R1Y3RzOwovLwovL3MuY2F0ZWdvcnlDaGFuZ2UgPSBmdW5jdGlvbigpIHsKLy8gICAgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5QnlJZChzLnN1cHBvcnRNb2RlbC5jYXRlZ29yeS5jYXRlZ29yeUlkKS4KLy8gICAgdGhlbihmdW5jdGlvbiAoY2F0ZWdvcnkpIHsKLy8gICAgICAgIGwoY2F0ZWdvcnkucHJvZHVjdHMpCi8vICAgICAgICBzLnByb2R1Y3RzID0gY2F0ZWdvcnkucHJvZHVjdHM7Ci8vICAgICAgICBzLnN1cHBvcnRNb2RlbC5wcm9kdWN0ID0gY2F0ZWdvcnkucHJvZHVjdHNbMF07Ci8vICAgIH0pOwovL30KLy8KLy9zLnByb2R1Y3RDaGFuZ2UgPSBmdW5jdGlvbigpIHsKLy8gICAgbCgicy5zdXBwb3J0TW9kZWwuPT09PT09PT09PT09PT09PSIpCi8vICAgIGwocy5zdXBwb3J0TW9kZWwucHJvZHVjdCk7Ci8vICAgIGwocy5zdXBwb3J0TW9kZWwuY2F0ZWdvcnkuY2F0ZWdvcnlJZCk7Ci8vICAgIGwocy5zdXBwb3J0TW9kZWwuY2F0ZWdvcnkuY2F0ZWdvcnlOYW1lKTsKLy8gICAgbChzLnN1cHBvcnRNb2RlbC50ZXh0KTsKLy8gICAgbChzLnN1cHBvcnRNb2RlbC5wcm9kdWN0LnByb2R1Y3RJZCk7Ci8vICAgIGwocy5zdXBwb3J0TW9kZWwucHJvZHVjdC5wcm9kdWN0TmFtZSk7Ci8vICAgIGwocy5zdXBwb3J0TW9kZWwuc3ViamVjdCk7Ci8vICAgIGwoInMuc3VwcG9ydE1vZGVsLnByb2R1Y3QgKysrKysrKysrKysrKysrKysrKysiKQovL30KLy8KLy9zLnNlbmRTdXBwb3J0RW1haWwgPSBmdW5jdGlvbigpewovLwovLyAgICBzdXBwb3J0U2VydmljZS5zZW5kU3VwcG9ydEVtYWlsKHMuc3VwcG9ydE1vZGVsKS50aGVuKGZ1bmN0aW9uKHJlcyl7Ci8vCi8vICAgICAgICBzLnJlZ2lzdGVyQW5zd2VyLmNsYXNzID0gcmVzLnN1Y2Nlc3MgPyAidmFsaWQiIDogImludmFsaWQiOwovLyAgICAgICAgcy5zdXBwb3J0U3VjY2VzcyA9IHJlcy5zdWNjZXNzOwovLyAgICAgICAgcy5yZWdpc3RlckFuc3dlci5tZXNzYWdlID0gcmVzLnJlYXNvbjsKLy8KLy8gICAgfSwgZnVuY3Rpb24oZXJyKXsKLy8gICAgfSk7Ci8vCi8vfQovLwoKLy9IZWxwZXIuZm9yQWxsUGFnZSgpOwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMDYvMTIvMjAxNS4KICovCgpkZWZpbmUoJ2FwcC9jb250cm9sbGVycy9zaG9wcGluZ0NhcnRDdHJsJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uKGNvbnRyb2xsZXJzKXsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ3Nob3BwaW5nQ2FydEN0cmwnLCBbJyRzY29wZScsICdwcm9kdWN0c0NhcnRTZXJ2aWNlJywgJ3VzZXJTZXJ2aWNlJywKICAgICAgICBmdW5jdGlvbihzLCBjYXJ0U2VydmljZSwgdXNlclNlcnZpY2UpewoKICAgICAgICAgICAgSGVscGVyLmZvckFsbFBhZ2UoKTsKICAgICAgICAgICAgcy5lbmFibGVXYXJyYW50eSA9IGZhbHNlOwogICAgICAgICAgICB1c2VyU2VydmljZS5oYXZlQ29uZmlndXJhdGlvbigpLnRoZW4oZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICAgICAgICBzLmVuYWJsZVdhcnJhbnR5ID0gdXNlclNlcnZpY2UuZ2V0V2FycmFudHlQcm9wZXJ0aWVzKCkuZW5hYmxlV2FycmFudHk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKXsKCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInVmdC1jbGFzcyIpOwoKICAgICAgICAgICAgICAgIHZhciBjaGVja291dEJ0biA9IGFuZ3VsYXIuZWxlbWVudChyZXN1bHQpOwoKICAgICAgICAgICAgICAgIGNoZWNrb3V0QnRuLmF0dHIoImlkIiwgImNoZWNrT3V0QnV0dG9uIik7CiAgICAgICAgICAgICAgICBjaGVja291dEJ0bi5hdHRyKCJuYW1lIiwgImNoZWNrX291dF9idG4iKTsKICAgICAgICAgICAgfSk7CgoKCgogICAgICAgICAgICBzLnNhdmVDYXJ0ID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGNhcnRTZXJ2aWNlLnNhdmVDYXJ0KHMuY2FydCk7CiAgICAgICAgICAgIH0KICAgIH1dKTsKfSk7CgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAyNC8wMi8yMDE2LgogKi8KCgoKZGVmaW5lKCdhcHAvY29udHJvbGxlcnMvc2VhcmNoQ3RybCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ3NlYXJjaEN0cmwnLCBbJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnY2F0ZWdvcnlTZXJ2aWNlJywgJ2NhdGVnb3J5JywKICAgICAgICBmdW5jdGlvbiAocywgJHN0YXRlUGFyYW1zLCBjYXRlZ29yeVNlcnZpY2UsIHBhcmFtc1RvUmV0dXJuKSB7CgogICAgICAgICAgICBzLmNhdElkID0gJHN0YXRlUGFyYW1zLmlkOwoKICAgICAgICAgICAgcy5wYXJhbXNUb1Bhc3MgPSBwYXJhbXNUb1JldHVybjsKCiAgICAgICAgICAgIHMuY2F0ZWdvcnlEYXRhID0gcGFyYW1zVG9SZXR1cm4uc2VhcmNoUmVzdWx0Lmxlbmd0aCA+IDAgPyBwYXJhbXNUb1JldHVybi5zZWFyY2hSZXN1bHRbMF0gOiBbXTsKCiAgICAgICAgICAgIHMubm9Qcm9kdWN0cyA9IHMuY2F0ZWdvcnlEYXRhLnByb2R1Y3RzID09IHVuZGVmaW5lZCB8fCBzLmNhdGVnb3J5RGF0YS5wcm9kdWN0cy5sZW5ndGggPT0gMDsKCiAgICAgICAgICAgIHMuc2VhcmNoS2V5ID0gcGFyYW1zVG9SZXR1cm4uc2VhcmNoS2V5OwoKICAgICAgICAgICAgSGVscGVyLmZvckFsbFBhZ2UoKTsKCiAgICAgICAgfV0pOwoKfSk7CgoKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzEzLzIwMTUuCiAqLwoKCmRlZmluZSgnYXBwL2NvbnRyb2xsZXJzL2luZGV4JyxbCiAgICAnLi9tYWluQ3RybCcsCiAgICAnLi9jYXRlZ29yaWVzQ3RybCcsCiAgICAnLi9jYXRlZ29yeUN0cmwnLAogICAgJy4vcHJvZHVjdEN0cmwnLAogICAgJy4vc3VwcG9ydEN0cmwnLAogICAgJy4vc2hvcHBpbmdDYXJ0Q3RybCcsCiAgICAnLi9zZWFyY2hDdHJsJywKXQogICAgLCBmdW5jdGlvbigpIHt9KTsKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzEzLzIwMTUuCiAqLwpkZWZpbmUoJ2FwcC91c2VyL2NvbnRyb2xsZXJzL21vZHVsZScsWydhbmd1bGFyJ10sIGZ1bmN0aW9uIChhbmd1bGFyKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICByZXR1cm4gYW5ndWxhci5tb2R1bGUoJ2Fvcy51c2VyLmNvbnRyb2xsZXJzJywgW10pOwp9KTsKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDExLzExLzIwMTUuCiAqLwpkZWZpbmUoJ2FwcC91c2VyL2NvbnRyb2xsZXJzL3VzZXJDb250cm9sbGVyJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuY29udHJvbGxlcigndXNlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsICdpcENvb2tpZScsCiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsLCAkbG9nLCAkY29va2llKSB7CgogICAgICAgICAgICAkc2NvcGUuYWNjb3VudFNlY3Rpb24gPSBmdW5jdGlvbigpewoKICAgICAgICAgICAgICAgICRyb290U2NvcGUudXNlcmlkID0gbnVsbDsKICAgICAgICAgICAgICAgICRjb29raWUucmVtb3ZlKCJ1c2VyQ29va2llIik7CiAgICAgICAgICAgIH0KCgogICAgICAgIH1dKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDI5LzExLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvdXNlci9jb250cm9sbGVycy9yZWdpc3RlckN0cmwnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGNvbnRyb2xsZXJzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb250cm9sbGVycy5jb250cm9sbGVyKCdyZWdpc3RlckN0cmwnLCBbJyRzY29wZScsICdyZWdpc3RlclNlcnZpY2UnLCAnJGxvY2F0aW9uJywKICAgICAgICAnJHRpbWVvdXQnLCAnJGZpbHRlcicsICckc3RhdGUnLCAnQW5hbHl0aWNzJywKICAgICAgICBmdW5jdGlvbiAocywgcmVnaXN0ZXJTZXJ2aWNlLCAkbG9jYXRpb24sICR0aW1lb3V0LCAkZmlsdGVyLCAkc3RhdGUsIEFuYWx5dGljcykgewoKCiAgICAgICAgICAgIHMucmVnaXN0ZXJTdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICAgIHMuV2VsbGNvbWVOYW1lID0gIiI7CgogICAgICAgICAgICBzLmNvdW50cmllcyA9IHt9OwogICAgICAgICAgICBzLnJlZ2lzdGVyQW5zd2VyID0gewogICAgICAgICAgICAgICAgbWVzc2FnZTogJycsCiAgICAgICAgICAgICAgICBjbGFzczogJ2ludmFsaWQnCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlZ2lzdGVyU2VydmljZS5nZXRBbGxDb3VudHJpZXMoKS50aGVuKGZ1bmN0aW9uIChjb3VudHJpZXMpIHsKICAgICAgICAgICAgICAgIHMuY291bnRyaWVzID0gY291bnRyaWVzOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHMubW9kZWwgPSB7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogJycsIGVtYWlsOiAnJywgcGFzc3dvcmQ6ICcnLCBjb25maXJtX3Bhc3N3b3JkOiAnJywKICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywgcGhvbmVOdW1iZXI6ICcnLCBjb3VudHJ5OiB7fSwgYWRkcmVzczogJycsCiAgICAgICAgICAgICAgICBjaXR5OiAnJywgcG9zdGFsQ29kZTogJycsIHN0YXRlOiAnJywgb2ZmZXJzX3Byb21vdGlvbjogdHJ1ZSwKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIHMucmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgcmVnaXN0ZXJTZXJ2aWNlLnJlZ2lzdGVyKHMubW9kZWwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CgogICAgICAgICAgICAgICAgICAgIHMucmVnaXN0ZXJBbnN3ZXIubWVzc2FnZSA9IHJlc3BvbnNlLnJlYXNvbiB8fCAkZmlsdGVyKCd0cmFuc2xhdGUnKSgncmVnaXN0ZXJfZmFpbGQnKTsKICAgICAgICAgICAgICAgICAgICBzLnJlZ2lzdGVyQW5zd2VyLmNsYXNzID0gcmVzcG9uc2Uuc3VjY2VzcyA/ICd2YWxpZCcgOiAnaW52YWxpZCc7CgogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBBbmFseXRpY3MudHJhY2tFdmVudCgnQWNjb3VudCcsICdyZWdpc3RlcicsIHMubW9kZWwpOwogICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICBzLldlbGxjb21lTmFtZSA9IHMubW9kZWwuZmlyc3ROYW1lLnJlcGxhY2UoL1xzL2csICIiKS5sZW5ndGggPiAwID8gcy5tb2RlbC5maXJzdE5hbWUgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5tb2RlbC5sYXN0TmFtZS5yZXBsYWNlKC9ccy9nLCAiIikubGVuZ3RoID4gMCA/IHMubW9kZWwubGFzdE5hbWUgOiBzLm1vZGVsLnVzZXJuYW1lOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogcy5tb2RlbC5lbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luUGFzc3dvcmQ6IHMubW9kZWwucGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpblVzZXI6IHMubW9kZWwudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBzLnNpZ25Jbih1c2VyLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRvY3VtZW50LmxvY2F0aW9uLmhhc2ggPT0gIiMvcmVnaXN0ZXIiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucmVnaXN0ZXJBbnN3ZXIubWVzc2FnZSA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5yZWdpc3RlckFuc3dlci5jbGFzcyA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgICAgIHMucmVnaXN0ZXJBbnN3ZXIubWVzc2FnZSA9ICRmaWx0ZXIoJ3RyYW5zbGF0ZScpKCdyZWdpc3Rlcl9mYWlsZCcpOwogICAgICAgICAgICAgICAgICAgIHMucmVnaXN0ZXJBbnN3ZXIuY2xhc3MgPSAnaW52YWxpZCc7CiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzLnJlZ2lzdGVyQW5zd2VyLm1lc3NhZ2UgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgcy5yZWdpc3RlckFuc3dlci5jbGFzcyA9ICIiOwogICAgICAgICAgICAgICAgICAgIH0sIDUwMDApCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy52YWxpZEZvcm0gID0gZmFsc2U7CiAgICAgICAgICAgIHMuaXNWYWxpZEZvcm0gPSBmdW5jdGlvbih2YWxpZCl7CiAgICAgICAgICAgICAgICBzLnZhbGlkRm9ybSAgPSB2YWxpZDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImtleWRvd24iLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDEzICYmIHMudmFsaWRGb3JtKSB7CiAgICAgICAgICAgICAgICAgICAgcy5yZWdpc3RlcigpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBIZWxwZXIuZm9yQWxsUGFnZSgpOwoKICAgICAgICB9XSk7Cgp9KTsKZGVmaW5lKCdhcHAvdXNlci9jb250cm9sbGVycy9hYm91dEN0cmwnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGNvbnRyb2xsZXJzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb250cm9sbGVycy5jb250cm9sbGVyKCdhYm91dEN0cmwnLCBbJyRzY29wZScsICdhYm91dFNlcnZpY2UnLCAnJGxvY2F0aW9uJywKICAgICAgICAnJHRpbWVvdXQnLCAnJGZpbHRlcicsICckc3RhdGUnLCAnQW5hbHl0aWNzJywKICAgICAgICBmdW5jdGlvbiAocywgYWJvdXRTZXJ2aWNlLCAkbG9jYXRpb24sICR0aW1lb3V0LCAkZmlsdGVyLCAkc3RhdGUsIEFuYWx5dGljcykgewoKICAgICAgICB9XSk7Cgp9KTsKZGVmaW5lKCdhcHAvdXNlci9jb250cm9sbGVycy92ZXJzaW9uQ3RybCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ3ZlcnNpb25DdHJsJywgWyckc2NvcGUnLCAndmVyc2lvblNlcnZpY2UnLCAnJGxvY2F0aW9uJywKICAgICAgICAnJHRpbWVvdXQnLCAnJGZpbHRlcicsICckc3RhdGUnLCAnQW5hbHl0aWNzJywKICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCB2ZXJzaW9uU2VydmljZSwgJGxvY2F0aW9uLCAkdGltZW91dCwgJGZpbHRlciwgJHN0YXRlLCBBbmFseXRpY3MpIHsKCiAgICAgICAgICAgIC8qIHJlY29yZCBvZiB0aGUgdmVyc2lvbnMgKi8KICAgICAgICAgICAgJHNjb3BlLnJlY29yZHMgPSBbCiAgICAgICAgICAgICAgICAiVkVSU0lPTiAzLjMiLAogICAgICAgICAgICAgICAgIlZFUlNJT04gMy4yIiwKICAgICAgICAgICAgICAgICJWRVJTSU9OIDMuMSIsCiAgICAgICAgICAgICAgICAiVkVSU0lPTiAzLjAiLAogICAgICAgICAgICAgICAgIlZFUlNJT04gMi41IiwKICAgICAgICAgICAgICAgICJWRVJTSU9OIDIuNCIsCiAgICAgICAgICAgICAgICAiVkVSU0lPTiAyLjMiLAogICAgICAgICAgICAgICAgIlZFUlNJT04gMi4yIiwKICAgICAgICAgICAgICAgICJWRVJTSU9OIDIuMSIsCiAgICAgICAgICAgICAgICAiVkVSU0lPTiAyLjAiLAogICAgICAgICAgICAgICAgIlZFUlNJT04gMS4xLjciLAogICAgICAgICAgICBdCgoKICAgICAgICAgICAgLyogU2V0IGRlZmF1bHQgdmFsdWUgdG8gcmVsZWFzZV92ZXJzaW9uICovCiAgICAgICAgICAgIHZhciByZWxlYXNlX3ZlcnNpb247CiAgICAgICAgICAgIHZhciByZWxlYXNlX3ZlcnNpb25fb25seTsKICAgICAgICAgICAgJHNjb3BlLnJlbGVhc2VfdmVyc2lvbj0kc2NvcGUucmVjb3Jkc1swXTsKICAgICAgICAgICAgJHNjb3BlLnJlbGVhc2VfdmVyc2lvbl9vbmx5PSRzY29wZS5yZWNvcmRzWzBdLnNwbGl0KCcgJylbMV07CgogICAgICAgICAgICAvKiBTZXQgdmFsdWUgYWNjb3JkaW5nIHRvIHZhbHVlIGNob3NlIGZyb20gdGhlIGxpc3QgKi8KICAgICAgICAgICAgJHNjb3BlLmdldFZlcnNpb24gPSBmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICAgICAgICAgICRzY29wZS5yZWxlYXNlX3ZlcnNpb249JHNjb3BlLnJlY29yZHNbaW5kZXhdOwogICAgICAgICAgICAgICAgJHNjb3BlLnJlbGVhc2VfdmVyc2lvbl9vbmx5PSRzY29wZS5yZWNvcmRzW2luZGV4XS5zcGxpdCgnICcpWzFdOwogICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRlbnRVcmwgPSAnYXBwL3VzZXIvdmlld3MvdmVyc2lvbi1wYWdlLScgKyAkc2NvcGUucmVsZWFzZV92ZXJzaW9uX29ubHkgKyAnLmh0bWwnOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLyogc2hvdyBhbmQgaGlkZGVuIGxpc3Qgb2YgdmVyc2lvbnMqLwogICAgICAgICAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAobWluaVRpdGxlSWQpIHsKICAgICAgICAgICAgICAgICQoIiMiICsgbWluaVRpdGxlSWQpLmZhZGVUb2dnbGUoMzAwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIF9fX19sb2dpbkludGVydmFsOwogICAgICAgICAgICAkc2NvcGUubWluaVRpdGxlT3V0ID0gZnVuY3Rpb24gKG1pbmlUaXRsZUlkKSB7CiAgICAgICAgICAgICAgICBpZiAoJCgiIyIgKyBtaW5pVGl0bGVJZCkuY3NzKCdkaXNwbGF5JykgIT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICAgICAgX19fX2xvZ2luSW50ZXJ2YWwgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIiMiICsgbWluaVRpdGxlSWQpLmZhZGVPdXQoMzAwKTsKICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBjdXJyZW50X3NlbGVjdGVkX2xpbms7CgogICAgICAgICAgICAkc2NvcGUuZ290b0VsZW1lbnQgPSBmdW5jdGlvbiAoc2VjdGlvbklkLCBpZCkgewogICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkX21lbnVfc2lkZV9saW5rKGlkKTsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gJCgiIyIgKyBzZWN0aW9uSWQpOwogICAgICAgICAgICAgICAgdmFyIG5hdkhlaWdodCA9ICQoIm5hdi5wYWdlcyIpLmhlaWdodCgpOwogICAgICAgICAgICAgICAgdmFyIHNjcm9sbEhpZ2h0ID0gJCgiYm9keSwgaHRtbCIpLnNjcm9sbFRvcCgpOwogICAgICAgICAgICAgICAgaWYgKCBzY3JvbGxIaWdodCA9PSAwKQogICAgICAgICAgICAgICAgICAgIG5hdkhlaWdodCA9IDIqbmF2SGVpZ2h0OwogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAgICAgJCgiYm9keSwgaHRtbCIpLmFuaW1hdGUoewogICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IChlbGVtZW50Lm9mZnNldCgpLnRvcCAtIChuYXZIZWlnaHQpIC0gNjUgKQogICAgICAgICAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRfbWVudV9zaWRlX2xpbmsgPSBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gJCgiIyIgKyBpZCk7CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudF9zZWxlY3RlZF9saW5rKQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfc2VsZWN0ZWRfbGluay5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7CiAgICAgICAgICAgICAgICBjdXJyZW50X3NlbGVjdGVkX2xpbms9ZWxlbWVudDsKICAgICAgICAgICAgfTsKCiAgICB9XSk7Cgp9KTsKCi8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KCgpkZWZpbmUoJ2FwcC91c2VyL2NvbnRyb2xsZXJzL2luZGV4JyxbCiAgICAnLi91c2VyQ29udHJvbGxlcicsCiAgICAnLi9yZWdpc3RlckN0cmwnLAogICAgJy4vYWJvdXRDdHJsJywKICAgICcuL3ZlcnNpb25DdHJsJwpdLCBmdW5jdGlvbigpIHt9KTsKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzEzLzIwMTUuCiAqLwpkZWZpbmUoJ2FwcC9vcmRlci9jb250cm9sbGVycy9tb2R1bGUnLFsnYW5ndWxhciddLCBmdW5jdGlvbiAoYW5ndWxhcikgewogICAgJ3VzZSBzdHJpY3QnOwogICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKCdhb3Mub3JkZXIuY29udHJvbGxlcnMnLCBbXSk7Cn0pOwovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAzMS8xMi8yMDE1LgogKi8KCgpkZWZpbmUoJ2FwcC9vcmRlci9jb250cm9sbGVycy9vcmRlclBheW1lbnRDdHJsJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuY29udHJvbGxlcignb3JkZXJQYXltZW50Q3RybCcsIFsnJHNjb3BlJywgJyRyb290U2NvcGUnLCAncmVzb2x2ZVBhcmFtcycsCiAgICAgICAgJ29yZGVyU2VydmljZScsICdwcm9kdWN0c0NhcnRTZXJ2aWNlJywgJyRmaWx0ZXInLCAnJGxvY2F0aW9uJywKICAgICAgICBmdW5jdGlvbiAocywgcnMsIHJlc29sdmVQYXJhbXMsIG9yZGVyU2VydmljZSwgY2FydFNlcnZpY2UsICRmaWx0ZXIsICRsb2NhdGlvbikgewoKCiAgICAgICAgICAgIGlmIChyZXNvbHZlUGFyYW1zLnVzZXIgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJ2xvZ2luJykKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBzLnVzZXIgPSByZXNvbHZlUGFyYW1zLnVzZXI7CiAgICAgICAgICAgIHMuYWNjb3VudERldGFpbHMgPSByZXNvbHZlUGFyYW1zLmFjY291bnREZXRhaWxzOwogICAgICAgICAgICBzLmNoZWNrQ2FydCgpOwoKICAgICAgICAgICAgLy8vLy8gUEFZTUVOVCBTVUNDRVNTIC8vLy8KICAgICAgICAgICAgcy5wYXltZW50RW5kID0gZmFsc2U7CiAgICAgICAgICAgIHMuJG9uKCd1cGRhdGVQYXltZW50RW5kJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7CiAgICAgICAgICAgICAgICBzLnBheW1lbnRFbmQgPSBhcmdzLnBheW1lbnRFbmQ7CiAgICAgICAgICAgICAgICBzLm9yZGVyTnVtYmVyID0gYXJncy5vcmRlck51bWJlcjsKICAgICAgICAgICAgICAgIHMudHJhY2tpbmdOdW1iZXIgPSBhcmdzLnRyYWNraW5nTnVtYmVyOwogICAgICAgICAgICAgICAgcy5oYXNXYXJyYW50eSA9IGFyZ3MuaGFzV2FycmFudHk7CiAgICAgICAgICAgICAgICBzLndhcnJhbnR5TnVtYmVyID0gYXJncy53YXJyYW50eU51bWJlcjsKICAgICAgICAgICAgICAgIHMuY2FyZE51bWJlciA9IFsnMDAwMCcsICcwMDAwJywgJzAwMDAnLCBhcmdzLmNhcmROdW1iZXIuc3Vic3RyaW5nKGFyZ3MuY2FyZE51bWJlci5sZW5ndGggLSA0KV07CiAgICAgICAgICAgICAgICBzLnN1YlRvdGFsID0gKCRmaWx0ZXIoInByb2R1Y3RzQ2FydFN1bSIpKHMuY2FydCkpOwogICAgICAgICAgICAgICAgcy50b3RhbCA9ICgkZmlsdGVyKCJwcm9kdWN0c0NhcnRTdW0iKShzLmNhcnQsIHMuc2hpcHBpbmdDb3N0KSk7CiAgICAgICAgICAgICAgICBzLlRyYW5zUGF5bWVudE1ldGhvZCA9IGFyZ3MuVHJhbnNQYXltZW50TWV0aG9kOwogICAgICAgICAgICAgICAgcnMuJGJyb2FkY2FzdCgnY2xlYXJDYXJ0RXZlbnQnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vLy8vIEVORCBQQVlNRU5UIFNVQ0NFU1MgLy8vLwoKICAgICAgICAgICAgcy5ub0NhcmRzID0gIShyZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcyAmJiByZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcy5tYXN0ZXJDcmVkaXQpOwogICAgICAgICAgICBzLnNob3dNYXN0ZXJDYXJ0ID0gZmFsc2U7CiAgICAgICAgICAgIHMuY2FyZCA9IHtudW1iZXI6ICcnLCBjdnY6ICcnLCBleHBpcmF0aW9uRGF0ZToge21vbnRoOiAnJywgeWVhcjogJyd9LCBuYW1lOiAnJ30KICAgICAgICAgICAgcy5zYXZlUGF5ID0ge3VzZXJuYW1lOiAnJywgcGFzc3dvcmQ6ICcnfQoKICAgICAgICAgICAgdmFyIG1hc3RlckNyZWRpdCA9IHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzICYmIHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzLm1hc3RlckNyZWRpdCA/CiAgICAgICAgICAgICAgICByZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcy5tYXN0ZXJDcmVkaXQgOiBudWxsOwoKICAgICAgICAgICAgcy5DYXJkTnVtYmVyID0gW107CiAgICAgICAgICAgIGlmIChtYXN0ZXJDcmVkaXQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgLy9ub2luc3BlY3Rpb24gSlNBbm5vdGF0b3IKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBtYXN0ZXJDcmVkaXQuZXhwaXJhdGlvbkRhdGUuc3Vic3RyaW5nKDAsIDIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBtID0gKCBtYXN0ZXJDcmVkaXQuZXhwaXJhdGlvbkRhdGUgKz0gIiIpLnN1YnN0cmluZygwLDIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzLmNhcmQgPSB7CiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiBtYXN0ZXJDcmVkaXQuY2FyZE51bWJlci5zdWJzdHJpbmcoNCksCiAgICAgICAgICAgICAgICAgICAgY3Z2OiBtYXN0ZXJDcmVkaXQuY3Z2TnVtYmVyLAogICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiBtLAogICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBtYXN0ZXJDcmVkaXQuZXhwaXJhdGlvbkRhdGUuc3Vic3RyaW5nKDIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjYXJ0RXhwaXJlZDogbWFzdGVyQ3JlZGl0LmNhcnRFeHBpcmVkLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IG1hc3RlckNyZWRpdC5jdXN0b21lcm5hbWUsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzLkNhcmROdW1iZXIgPSBzcGxpdENhcnROdW1iZXIobWFzdGVyQ3JlZGl0LmNhcmROdW1iZXIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBzcGxpdENhcnROdW1iZXIoY2FydE51bSkgewogICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYXJ0TnVtLmxlbmd0aCAmJiBpICsgMyA8IGNhcnROdW0ubGVuZ3RoOyBpICs9IDQpIHsKICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChjYXJ0TnVtLnN1YnN0cmluZyhpLCBpICsgNCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHNhZmVQYXkgPSByZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcyAmJiByZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcy5zYWZlUGF5ID8KICAgICAgICAgICAgICAgIHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzLnNhZmVQYXkgOiBudWxsOwogICAgICAgICAgICBzLnNlY3JldFBhc3N3b3JkID0gIioqKioiOwogICAgICAgICAgICBpZiAoc2FmZVBheSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzLnNhdmVQYXkudXNlcm5hbWUgPSBzYWZlUGF5LnNhZmVwYXlVc2VybmFtZTsKICAgICAgICAgICAgICAgIHMuc2VjcmV0UGFzc3dvcmQgPSBzYWZlUGF5LnNhZmVwYXlQYXNzd29yZDsKICAgICAgICAgICAgICAgIHMuc2F2ZVBheS5wYXNzd29yZCA9IHMuc2VjcmV0UGFzc3dvcmQuc3Vic3RyaW5nKDAsIDEyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzLnNhdmVTYWZlUGF5ID0gdHJ1ZTsKICAgICAgICAgICAgcy5zYXZlTWFzdGVyQ3JlZGl0ID0gdHJ1ZTsKCiAgICAgICAgICAgIHMuYWdyZWVfQWdyZWVtZW50ID0gdHJ1ZTsKCiAgICAgICAgICAgIHMuc2hpcHBpbmcgPSByZXNvbHZlUGFyYW1zLnNoaXBwaW5nQ29zdDsKICAgICAgICAgICAgcy5zaGlwcGluZ0Nvc3QgPSByZXNvbHZlUGFyYW1zLnNoaXBwaW5nQ29zdCA/IHJlc29sdmVQYXJhbXMuc2hpcHBpbmdDb3N0LmFtb3VudCA6IG51bGw7CiAgICAgICAgICAgIHMuaXRlbXNQYWlkID0gcy5jYXJ0ID8gcy5jYXJ0LnByb2R1Y3RzSW5DYXJ0Lmxlbmd0aCA6IDA7CgogICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIHMuRGF0ZV9PcmRlcmVkID0gW2QuZ2V0RGF0ZSgpLCAoZC5nZXRNb250aCgpICsgMSksIGQuZ2V0RnVsbFllYXIoKV0uam9pbignLycpOwoKICAgICAgICAgICAgSGVscGVyLmZvckFsbFBhZ2UoKTsKCiAgICAgICAgfV0pOwp9KTsKCgoKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAyNS8wMS8yMDE2LgogKi8KCgpkZWZpbmUoJ2FwcC9vcmRlci9jb250cm9sbGVycy91c2VyTm90TG9naW5DdHJsJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuY29udHJvbGxlcigndXNlck5vdExvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRzdGF0ZScsICckbG9jYXRpb24nLAogICAgICAgIGZ1bmN0aW9uIChzLCAkc3RhdGUsICRsb2NhdGlvbikgewoKICAgICAgICAgICAgcy5jaGVja0NhcnQoKTsKCiAgICAgICAgICAgIEhlbHBlci5mb3JBbGxQYWdlKCk7CgogICAgICAgICAgICBzLm9yZGVyUGF5bWVudExvZ2luID0gewogICAgICAgICAgICAgICAgbG9naW5Vc2VyIDogJycsCiAgICAgICAgICAgICAgICBsb2dpblBhc3N3b3JkIDogJycsCiAgICAgICAgICAgICAgICBlbWFpbCA6ICcnLAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgPCEtLUQzNzAxOC0gQ2hhbmdpbmcgdGFyZ2V0IHNpZ25JbiBmdW5jdGlvbiBmcm9tICd1c2VyTm90TG9naW5DdHJsLm9yZGVyUGF5bWVudExvZ2luX3NpZ25JbicgdG8gZGlyZWN0bHkgZ28gJ2xvZ2luTW9kYWwuc2lnbkluJy0tPgogICAgICAgICAgICAvLyBzLm9yZGVyUGF5bWVudExvZ2luX3NpZ25JbiA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIC8vICAgICBzLnNpZ25JbihzLm9yZGVyUGF5bWVudExvZ2luLCBmYWxzZSk7CiAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgIHMucmVnaXN0cmF0aW9uUmVkaXJlY3QgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9yZWdpc3RlcicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzLiR3YXRjaCgidXNlckNvb2tpZS5yZXNwb25zZSIsIGZ1bmN0aW9uKHVzZXIpewogICAgICAgICAgICAgICAgaWYodXNlciAmJiB1c2VyLnVzZXJJZCl7CiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdvcmRlclBheW1lbnQnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH1dKTsKfSk7CgoKCgoKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzEzLzIwMTUuCiAqLwoKCmRlZmluZSgnYXBwL29yZGVyL2NvbnRyb2xsZXJzL2luZGV4JyxbJy4vb3JkZXJQYXltZW50Q3RybCcsICcuL3VzZXJOb3RMb2dpbkN0cmwnXSwgZnVuY3Rpb24oKSB7fSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KZGVmaW5lKCdhcHAvYWNjb3VudC9jb250cm9sbGVycy9tb2R1bGUnLFsnYW5ndWxhciddLCBmdW5jdGlvbiAoYW5ndWxhcikgewogICAgJ3VzZSBzdHJpY3QnOwogICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKCdhb3MuYWNjb3VudC5jb250cm9sbGVycycsIFtdKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDMxLzEyLzIwMTUuCiAqLwoKCmRlZmluZSgnYXBwL2FjY291bnQvY29udHJvbGxlcnMvbXlBY2NvdW50Q3RybCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ215QWNjb3VudEN0cmwnLCBbJyRzY29wZScsICckdGltZW91dCcsCiAgICAgICAgJyRsb2NhdGlvbicsICdyZXNvbHZlUGFyYW1zJywgJ2FjY291bnRTZXJ2aWNlJywgJ2lwQ29va2llJywKICAgICAgICBmdW5jdGlvbiAocywgJHRpbWVvdXQsICRsb2NhdGlvbiwgcmVzb2x2ZVBhcmFtcywgYWNjb3VudFNlcnZpY2UsICRjb29raWUpIHsKCiAgICAgICAgICAgIGNoZWNrTG9naW4oKTsKICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tMb2dpbigpewogICAgICAgICAgICAgICAgcy5jaGVja0xvZ2luKCk7CiAgICAgICAgICAgICAgICBpZigkbG9jYXRpb24ucGF0aCgpLmluZGV4T2YoJy9teUFjY291bnQnKSAhPSAtMSl7CiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoY2hlY2tMb2dpbiwgMjAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJChkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgICAgIGlmICghJChldmVudC50YXJnZXQpLmNsb3Nlc3QoIi5kZWxldGVBY2NvdW50UG9wdXAsLmRlbGV0ZU1haW5CdG5Db250YWluZXIiKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAkKCJib2R5IikuZmluZCgiLmRlbGV0ZUFjY291bnRQb3B1cCIpLmZhZGVPdXQoMzUwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzLmNsb3NlRGVsZXRlRGlhbG9nQm94ID0gZnVuY3Rpb24oKXsKCgogICAgICAgICAgICAgICAgJCgiLmRlbGV0ZUFjY291bnRQb3B1cCIpLmZhZGVPdXQoMzUwKTsKICAgICAgICAgICAgICAgICQoIi5Qb3BVcCA+IGRpdjpudGgtY2hpbGQoMSkiKS5hbmltYXRlKHsKICAgICAgICAgICAgICAgICAgICAidG9wIjogIi0xNTAlIgogICAgICAgICAgICAgICAgfSwgMzAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiLlBvcFVwIikuZmFkZU91dCgxMDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiYm9keSIpLmNzcygib3ZlcmZsb3cteSIsICJzY3JvbGwiKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIHMubWFzdGVyQ3JlZGl0NERpZ2l0cyA9IHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzICYmCiAgICAgICAgICAgIHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzLm1hc3RlckNyZWRpdCAmJgogICAgICAgICAgICByZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcy5tYXN0ZXJDcmVkaXQuY2FyZE51bWJlciA/CiAgICAgICAgICAgICAgICByZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcy5tYXN0ZXJDcmVkaXQuY2FyZE51bWJlci5zdWJzdHJpbmcocmVzb2x2ZVBhcmFtcy5wYXltZW50UHJlZmVyZW5jZXMubWFzdGVyQ3JlZGl0LmNhcmROdW1iZXIubGVuZ3RoIC0gNCkgOiBudWxsOwoKICAgICAgICAgICAgcy5zYWZlUGF5TmFtZSA9IHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzICYmCiAgICAgICAgICAgIHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzLnNhZmVQYXkgJiYKICAgICAgICAgICAgcmVzb2x2ZVBhcmFtcy5wYXltZW50UHJlZmVyZW5jZXMuc2FmZVBheS5zYWZlcGF5VXNlcm5hbWUgPwogICAgICAgICAgICAgICAgcmVzb2x2ZVBhcmFtcy5wYXltZW50UHJlZmVyZW5jZXMuc2FmZVBheS5zYWZlcGF5VXNlcm5hbWUgOiBudWxsOwoKICAgICAgICAgICAgcy5hY2NvdW50RGV0YWlscyA9IHJlc29sdmVQYXJhbXMuYWNjb3VudERldGFpbHM7CiAgICAgICAgICAgIHMuc2hpcHBpbmdEZXRhaWxzID0gcmVzb2x2ZVBhcmFtcy5zaGlwcGluZ0RldGFpbHM7CgogICAgICAgICAgICBzLmRlZmF1bHRQYXltZW50TWV0aG9kSWQgPSByZXNvbHZlUGFyYW1zLmFjY291bnREZXRhaWxzLmRlZmF1bHRQYXltZW50TWV0aG9kSWQgPT0gMCA/CiAgICAgICAgICAgICAgICBzLm1hc3RlckNyZWRpdDREaWdpdHMgIT0gbnVsbCA/IDIwIDogcy5zYWZlUGF5TmFtZSAhPSBudWxsID8gMTAgOiAwIDogcmVzb2x2ZVBhcmFtcy5hY2NvdW50RGV0YWlscy5kZWZhdWx0UGF5bWVudE1ldGhvZElkOwoKICAgICAgICAgICAgcy5jYXRlZ29yaWVzUHJvbW90aW9ucyA9IFsKICAgICAgICAgICAgICAgIHsgY2F0ZWdvcnlOYW1lIDogJ1RhYmxldHMnLCBjYXRlZ29yeVZhbHVlIDogdHJ1ZSwgfSwKICAgICAgICAgICAgICAgIHsgY2F0ZWdvcnlOYW1lIDogJ0xhcHRvcHMnLCBjYXRlZ29yeVZhbHVlIDogdHJ1ZSwgfSwKICAgICAgICAgICAgICAgIHsgY2F0ZWdvcnlOYW1lIDogJ0hlYWRwaG9uZXMnLCBjYXRlZ29yeVZhbHVlIDogdHJ1ZSwgfSwKICAgICAgICAgICAgICAgIHsgY2F0ZWdvcnlOYW1lIDogJ1NwZWFrZXJzJywgY2F0ZWdvcnlWYWx1ZSA6IHRydWUsIH0sCiAgICAgICAgICAgICAgICB7IGNhdGVnb3J5TmFtZSA6ICdNaWNlJywgY2F0ZWdvcnlWYWx1ZSA6IHRydWUsIH0sCiAgICAgICAgICAgIF07CgogICAgICAgICAgICBzLmFsbG93T2ZmZXJzUHJvbW90aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS5hY2NvdW50VXBkYXRlKHMuYWNjb3VudERldGFpbHMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHMuZGVsZXRlQWNjb3VudFVpID0gZnVuY3Rpb24oKXsKCiAgICAgICAgICAgICAgICAkKCIuUG9wVXAiKS5mYWRlSW4oMTAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiLlBvcFVwID4gZGl2Om50aC1jaGlsZCgxKSIpLmFuaW1hdGUoeyJ0b3AiOiB0b3B9LCA2MDApOwogICAgICAgICAgICAgICAgICAgICQoImJvZHkiKS5jc3MoeyJsZWZ0IjogIjBweCJ9KQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgJCgnLmRlbGV0ZUFjY291bnRQb3B1cCcpLmZhZGVJbigzNTApOwoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy5kZWxldGVBY2NvdW50Q29uZmlybWVkID0gZnVuY3Rpb24oKXsKCiAgICAgICAgICAgICAgICBzLmNsb3NlRGVsZXRlRGlhbG9nQm94KCk7CgogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlUHJvbWlzZSA9IGFjY291bnRTZXJ2aWNlLmRlbGV0ZUFjY291bnQoKTsKICAgICAgICAgICAgICAgIHJlc3BvbnNlUHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkgewoKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIG9ubHkgcnVuIGFmdGVyIGdldERhdGEoKSByZXNvbHZlcwogICAgICAgICAgICAgICAgICAgIHZhciBpc1N1Y2Nlc3MgID0gcmVzdWx0LlN0YXR1c01lc3NhZ2Uuc3VjY2VzczsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicmVzdWx0IGlzIHN1Y2Nlc3MgLSAiK2lzU3VjY2VzcyArIiAgUmVzdWx0IG91dGNvbWUgLSAiKyByZXN1bHQuU3RhdHVzTWVzc2FnZS5yZWFzb24gKTsKICAgICAgICAgICAgICAgICAgICBpZihpc1N1Y2Nlc3MpewoKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3JlbWVtYmVyTWUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGNvb2tpZS5yZW1vdmUoJGNvb2tpZSgnbGFzdExvZ2luJykpOwoKICAgICAgICAgICAgICAgICAgICAgICAgJCgiLlBvcFVwIikuZmFkZUluKDEwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiLlBvcFVwID4gZGl2Om50aC1jaGlsZCgxKSIpLmFuaW1hdGUoeyJ0b3AiOiB0b3B9LCA2MDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiYm9keSIpLmNzcyh7ImxlZnQiOiAiMHB4In0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnN1Y2Nlc3NmdWxEZWxldGVNZXNzYWdlJykuZmFkZUluKDM1MCk7CgogICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIuc3VjY2Vzc2Z1bERlbGV0ZU1lc3NhZ2UiKS5mYWRlT3V0KDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIuUG9wVXAgPiBkaXY6bnRoLWNoaWxkKDEpIikuYW5pbWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInRvcCI6ICItMTUwJSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIi5Qb3BVcCIpLmZhZGVPdXQoMTAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoImJvZHkiKS5jc3MoIm92ZXJmbG93LXkiLCAic2Nyb2xsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgSGVscGVyLmZvckFsbFBhZ2UoKTsKCiAgICAgICAgfV0pOwp9KTsKCgoKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAzMS8xMi8yMDE1LgogKi8KCmRlZmluZSgnYXBwL2FjY291bnQvY29udHJvbGxlcnMvYWNjb3VudERldGFpbHNDdHJsJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuY29udHJvbGxlcignYWNjb3VudERldGFpbHNDdHJsJywgWyckc2NvcGUnLCAnJHRpbWVvdXQnLAogICAgICAgICckbG9jYXRpb24nLCAncmVzb2x2ZVBhcmFtcycsICdyZWdpc3RlclNlcnZpY2UnLCAnYWNjb3VudFNlcnZpY2UnLAogICAgICAgIGZ1bmN0aW9uIChzLCAkdGltZW91dCwgJGxvY2F0aW9uLCByZXNvbHZlUGFyYW1zLCByZWdpc3RlclNlcnZpY2UsIGFjY291bnRTZXJ2aWNlKSB7CgogICAgICAgICAgICBjaGVja0xvZ2luKCk7CiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrTG9naW4oKSB7CiAgICAgICAgICAgICAgICBzLmNoZWNrTG9naW4oKTsKICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24ucGF0aCgpLmluZGV4T2YoJy9hY2NvdW50RGV0YWlscycpICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoY2hlY2tMb2dpbiwgMjAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0vL01vdmluZyB0byBBV1MhCgogICAgICAgICAgICBzLmFjY291bnREZXRhaWxzID0gcmVzb2x2ZVBhcmFtcy5hY2NvdW50RGV0YWlsczsKICAgICAgICAgICAgcy5hY2NvdW50RGV0YWlsc0Fuc3dlciA9IHttZXNzYWdlOiAnJywgY2xhc3M6ICdpbnZhbGlkJ30KICAgICAgICAgICAgcy5zYXZlQWNjb3VudERldGFpbHMgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgcy5hY2NvdW50RGV0YWlscy5jb3VudHJ5SWQgPSBzLmNvdW50cnkuaWQ7CiAgICAgICAgICAgICAgICBzLmFjY291bnREZXRhaWxzLmNvdW50cnlJZCA9IHMuY291bnRyeS5uYW1lICsgIiwiICsgcy5jb3VudHJ5Lmlzb05hbWU7CiAgICAgICAgICAgICAgICBzLmFjY291bnREZXRhaWxzLmNvdW50cnlJc29OYW1lID0gcy5jb3VudHJ5Lmlzb05hbWU7CiAgICAgICAgICAgICAgICBzLmFjY291bnREZXRhaWxzLmNvdW50cnlOYW1lID0gcy5jb3VudHJ5Lm5hbWU7CiAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS5jaGFuZ2VVc2VyUGFzc3dvcmQocy5hY2NvdW50RGV0YWlscy5pZCwgcy5wYXNzd29yZHMpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNoYW5nZVVzZXJQYXNzd29yZFJlcykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlVXNlclBhc3N3b3JkUmVzICYmIGNoYW5nZVVzZXJQYXNzd29yZFJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS5hY2NvdW50VXBkYXRlKHMuYWNjb3VudERldGFpbHMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnJlYXNvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmFjY291bnREZXRhaWxzQW5zd2VyID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UucmVhc29uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiByZXNwb25zZS5zdWNjZXNzID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnbXlBY2NvdW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5hY2NvdW50RGV0YWlsc0Fuc3dlciA9IHttZXNzYWdlOiAnJywgY2xhc3M6ICdpbnZhbGlkJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDQwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmFjY291bnREZXRhaWxzQW5zd2VyID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnaW52YWxpZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hhbmdlVXNlclBhc3N3b3JkUmVzLnJlYXNvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmFjY291bnREZXRhaWxzQW5zd2VyID0ge21lc3NhZ2U6ICcnLCBjbGFzczogJ2ludmFsaWQnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNDAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy5jb3VudHJpZXMgPSBudWxsOwogICAgICAgICAgICByZWdpc3RlclNlcnZpY2UuZ2V0QWxsQ291bnRyaWVzKCkudGhlbihmdW5jdGlvbiAoY291bnRyaWVzKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpICBpbiBjb3VudHJpZXMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRyaWVzW2ldLmlkID09IHMuYWNjb3VudERldGFpbHMuY291bnRyeUlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMuY291bnRyeSA9IGNvdW50cmllc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcy5jb3VudHJpZXMgPSBjb3VudHJpZXM7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcy5wYXNzd29yZHMgPSB7CiAgICAgICAgICAgICAgICBuZXc6ICcnLAogICAgICAgICAgICAgICAgb2xkOiAnJywKICAgICAgICAgICAgICAgIGNvbmZpcm1fbmV3OiAnJywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy5zbGlkZVRvZ2dsZSA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgJCgiIyIgKyBpZCArICIsIC4iICsgaWQpLnNsaWRlVG9nZ2xlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEhlbHBlci5mb3JBbGxQYWdlKCk7CgogICAgICAgIH1dKTsKfSk7CgoKCgoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMDIvMDIvMjAxNi4KICovCgoKZGVmaW5lKCdhcHAvYWNjb3VudC9jb250cm9sbGVycy9hY2NvdW50UGF5bWVudEVkaXRDdHJsJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuY29udHJvbGxlcignYWNjb3VudFBheW1lbnRFZGl0Q3RybCcsIFsnJHNjb3BlJywgJyR0aW1lb3V0JywKICAgICAgICAnJGxvY2F0aW9uJywgJ3Jlc29sdmVQYXJhbXMnLCAnYWNjb3VudFNlcnZpY2UnLAogICAgICAgIGZ1bmN0aW9uIChzLCAkdGltZW91dCwgJGxvY2F0aW9uLCByZXNvbHZlUGFyYW1zLCBhY2NvdW50U2VydmljZSkgewoKICAgICAgICAgICAgY2hlY2tMb2dpbigpOwogICAgICAgICAgICBmdW5jdGlvbiBjaGVja0xvZ2luKCkgewogICAgICAgICAgICAgICAgcy5jaGVja0xvZ2luKCk7CiAgICAgICAgICAgICAgICBpZiAoJGxvY2F0aW9uLnBhdGgoKS5pbmRleE9mKCcvYWNjb3VudFBheW1lbnRFZGl0JykgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAkdGltZW91dChjaGVja0xvZ2luLCAyMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcy55ZWFycyA9IFtdOwogICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAgICAgICAgICAgICAgICBzLnllYXJzLnB1c2goKG5vdy5nZXRGdWxsWWVhcigpICsgaSkgKyAiIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHMubW9udGggPSBbIjAxIiwgIjAyIiwgIjAzIiwgIjA0IiwgIjA1IiwgIjA2IiwgIjA3IiwgIjA4IiwgIjA5IiwgIjEwIiwgIjExIiwgIjEyIl07CiAgICAgICAgICAgIHMuY2FsY3VsYXRlTW9udGhzID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICB2YXIgYXJyID0gSGVscGVyLmdldE1vbnRoSW5ZZWFyRm9yTWFzdGVyQ3JlZGl0KHZhbHVlLCBzLm1vbnRoKTsKICAgICAgICAgICAgICAgIGlmIChhcnIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHMubW9udGggPSBhcnI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCgogICAgICAgICAgICBzLmNhcmQgPSB7bnVtYmVyOiAnJywgY3Z2OiAnJywgZXhwaXJhdGlvbkRhdGU6IHttb250aDogJycsIHllYXI6ICcnfSwgbmFtZTogJyd9CiAgICAgICAgICAgIHMuc2F2ZVBheSA9IHt1c2VybmFtZTogJycsIHBhc3N3b3JkOiAnJ30KCiAgICAgICAgICAgIHZhciBhbHJlYWR5SGF2ZU1hc3RlckNyZWRpdENhcnQgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIGFscmVhZHlIYXZlU2FmZVBheUNhcnQgPSBmYWxzZTsKICAgICAgICAgICAgdmFyIG1hc3RlckNyZWRpdCA9IHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzICYmIHJlc29sdmVQYXJhbXMucGF5bWVudFByZWZlcmVuY2VzLm1hc3RlckNyZWRpdCA/CiAgICAgICAgICAgICAgICByZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcy5tYXN0ZXJDcmVkaXQgOiBudWxsOwoKICAgICAgICAgICAgaWYgKG1hc3RlckNyZWRpdCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBtID0gbWFzdGVyQ3JlZGl0LmV4cGlyYXRpb25EYXRlLnN1YnN0cmluZygwLCAyKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgbSA9ICggbWFzdGVyQ3JlZGl0LmV4cGlyYXRpb25EYXRlICs9ICIiKS5zdWJzdHJpbmcoMCwyKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcy5jYXJkID0gewogICAgICAgICAgICAgICAgICAgIG51bWJlcjogbWFzdGVyQ3JlZGl0LmNhcmROdW1iZXIuc3Vic3RyaW5nKDQpLAogICAgICAgICAgICAgICAgICAgIGN2djogbWFzdGVyQ3JlZGl0LmN2dk51bWJlciwKICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uRGF0ZTogewogICAgICAgICAgICAgICAgICAgICAgICBtb250aDogbSwKICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogbWFzdGVyQ3JlZGl0LmV4cGlyYXRpb25EYXRlLnN1YnN0cmluZygyKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbmFtZTogbWFzdGVyQ3JlZGl0LmN1c3RvbWVybmFtZSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFscmVhZHlIYXZlTWFzdGVyQ3JlZGl0Q2FydCA9IHRydWU7CgogICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgaWYgKGRhdGUuZ2V0RnVsbFllYXIoKSA9PSBzLmNhcmQuZXhwaXJhdGlvbkRhdGUueWVhcikgewogICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICAgICAgICAgICAgICAgIHMubW9udGggPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gY3VycmVudE1vbnRoOyBpIDw9IDEyOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy5tb250aC5wdXNoKChpIDwgMTAgPyAiMCIgKyBpIDogIiIgKyBpKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBzYWZlUGF5ID0gcmVzb2x2ZVBhcmFtcy5wYXltZW50UHJlZmVyZW5jZXMgJiYgcmVzb2x2ZVBhcmFtcy5wYXltZW50UHJlZmVyZW5jZXMuc2FmZVBheSA/CiAgICAgICAgICAgICAgICByZXNvbHZlUGFyYW1zLnBheW1lbnRQcmVmZXJlbmNlcy5zYWZlUGF5IDogbnVsbDsKICAgICAgICAgICAgaWYgKHNhZmVQYXkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcy5zYXZlUGF5LnVzZXJuYW1lID0gc2FmZVBheS5zYWZlcGF5VXNlcm5hbWU7CiAgICAgICAgICAgICAgICAvL3Muc2F2ZVBheS5wYXNzd29yZCA9IHNhZmVQYXkuc2FmZXBheVBhc3N3b3JkOwogICAgICAgICAgICAgICAgYWxyZWFkeUhhdmVTYWZlUGF5Q2FydCA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHMucHJlZmVycmVkUGF5bWVudF9NYXN0ZXJDcmVkaXQgPSB0cnVlOwogICAgICAgICAgICBzLnByZWZlcnJlZFBheW1lbnRfU2FmZVBheSA9IHRydWU7CiAgICAgICAgICAgIHMuc2F2ZVBheUJsb2NrZWQgPSBzYWZlUGF5ID09IG51bGwgfHwgbWFzdGVyQ3JlZGl0ID09IG51bGw7CgogICAgICAgICAgICBzLmltZ1JhZGlvQnV0dG9uID0gcmVzb2x2ZVBhcmFtcy5hY2NvdW50RGV0YWlscy5kZWZhdWx0UGF5bWVudE1ldGhvZElkICsgIiIgPT0gIjIwIiA/IDIKICAgICAgICAgICAgICAgIDogc2FmZVBheSAhPSBudWxsID8gMQogICAgICAgICAgICAgICAgOiBtYXN0ZXJDcmVkaXQgIT0gbnVsbCA/IDIgOiAxOwoKICAgICAgICAgICAgcy5fc2F2ZU1hc3RlckNyZWRpdCA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgICAgICAgICBzLmNhcmQubnVtYmVyID0gcy5jYXJkLm51bWJlci5yZXBsYWNlKC9ccy9nLCcnKTsKICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeUhhdmVNYXN0ZXJDcmVkaXRDYXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhY2NvdW50U2VydmljZS5hZGRNYXN0ZXJDcmVkaXRNZXRob2Qocy5jYXJkKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhY2NvdW50U2VydmljZS51cGRhdGVNYXN0ZXJDcmVkaXRNZXRob2Qocy5jYXJkKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmVzcG9uc2UudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHMucHJlZmVycmVkUGF5bWVudF9NYXN0ZXJDcmVkaXQgJiYgcmVzcG9uc2UgJiYgcmVzcG9uc2UucmVhc29uICYmIHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFNlcnZpY2UudXBkYXRlUHJlZmZlcmVkUGF5bWVudE1ldGhvZCgyMCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZShyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHMuc2F2ZVNhZmVQYXkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlIYXZlU2FmZVBheUNhcnQpIHsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGFjY291bnRTZXJ2aWNlLmFkZFNhZmVQYXlNZXRob2Qocy5zYXZlUGF5KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhY2NvdW50U2VydmljZS51cGRhdGVTYWZlUGF5TWV0aG9kKHMuc2F2ZVBheSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CgogICAgICAgICAgICAgICAgICAgIGlmIChzLnByZWZlcnJlZFBheW1lbnRfU2FmZVBheSAmJiByZXNwb25zZSAmJiByZXNwb25zZS5yZWFzb24gJiYgcmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS51cGRhdGVQcmVmZmVyZWRQYXltZW50TWV0aG9kKDEwKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2UocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gc2V0TWVzc2FnZShyZXNwb25zZSkgewoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5yZWFzb24pIHsKICAgICAgICAgICAgICAgICAgICBzLmFjY291bnREZXRhaWxzQW5zd2VyID0gewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5yZWFzb24sCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiByZXNwb25zZS5zdWNjZXNzID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnbXlBY2NvdW50Jyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICAkKCIjc2FmZVBheURldGFpbEVycm9yTGFiZWwiKS5odG1sKHJlc3BvbnNlLnJlYXNvbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmFjY291bnREZXRhaWxzQW5zd2VyID0ge21lc3NhZ2U6ICcnLCBjbGFzczogJ2ludmFsaWQnfQogICAgICAgICAgICAgICAgICAgICAgICB9LCA0MDAwKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgSGVscGVyLmZvckFsbFBhZ2UoKTsKCiAgICAgICAgfV0pOwp9KTsKCgoKCgoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDI3LzA3LzIwMTYuCiAqLwoKCgpkZWZpbmUoJ2FwcC9hY2NvdW50L2NvbnRyb2xsZXJzL015T3JkZXJzQ3RybCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKY29udHJvbGxlcnMuY29udHJvbGxlcignbXlPcmRlcnNDdHJsJywgWydyZXNvbHZlUGFyYW1zJywgJyRzY29wZScsICdNb2RhbFNlcnZpY2UnLCAnb3JkZXJTZXJ2aWNlJywKCiAgICBmdW5jdGlvbiAocmVzb2x2ZVBhcmFtcywgJHNjb3BlLCBNb2RhbFNlcnZpY2UsIE9yZGVyU2VydmljZSkgewoKICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgIHZhciBtb2RhbElkID0gJ2RlbGV0ZS1vcmRlci1jb25maXJtYXRpb24nCiAgICAgICAgdm0ub3JkZXJzID0gcmVzb2x2ZVBhcmFtcy5vcmRlcnM7CgogICAgICAgIHZtLnJlbW92ZVByb2R1Y3RGcm9tT3JkZXJzID0gZnVuY3Rpb24ob3JkZXIpewogICAgICAgICAgICB2bS5kZWxldGVPcmRlckNhbmRpZGF0ZSA9IG9yZGVyOwogICAgICAgICAgICB2bS5vcGVuQ29uZmlybWF0aW9uTW9kYWwoKTsKICAgICAgICB9OwoKICAgICAgICB2bS5vcGVuQ29uZmlybWF0aW9uTW9kYWwgPSBmdW5jdGlvbihpZCl7CiAgICAgICAgICAgIE1vZGFsU2VydmljZS5PcGVuKG1vZGFsSWQpOwogICAgICAgIH0KCiAgICAgICAgJHNjb3BlLmNvbmZpcm1EZWxldGVPcmRlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgICAgICAgT3JkZXJTZXJ2aWNlLnJlbW92ZU9yZGVyKHZtLmRlbGV0ZU9yZGVyQ2FuZGlkYXRlKS50aGVuKGZ1bmN0aW9uKG9yZGVycyl7CiAgICAgICAgICAgICAgICB2bS5kZWxldGVPcmRlckNhbmRpZGF0ZSA9IG51bGw7CiAgICAgICAgICAgICAgICB2bS5vcmRlcnMgPSBvcmRlcnM7CiAgICAgICAgICAgIH0pOwoKICAgICAgICB9CgogICAgICAgICRzY29wZS5jYW5jZWxEZWxldGVPcmRlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgICAgICAgdm0uZGVsZXRlT3JkZXJDYW5kaWRhdGUgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgLy8gTW9kYWxTZXJ2aWNlLlNldEJ0bnNDYihtb2RhbElkLCBbJHNjb3BlLmNvbmZpcm1EZWxldGVPcmRlciwgJHNjb3BlLmNhbmNlbERlbGV0ZU9yZGVyXSk7CgogICAgICAgIHZtLmdldFRvdGFsUHJpY2UgPSBmdW5jdGlvbihhcnIpewogICAgICAgICAgICB2YXIgdG90YWwgPSAwOwogICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goYXJyLCBmdW5jdGlvbihwcm9kdWN0KXsKICAgICAgICAgICAgICAgIHRvdGFsICs9IHByb2R1Y3QuUHJpY2VQZXJVbml0ICogcHJvZHVjdC5RdWFudGl0eTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB0b3RhbDsKICAgICAgICB9CgogICAgfV0pOwp9KTsKCi8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KCgpkZWZpbmUoJ2FwcC9hY2NvdW50L2NvbnRyb2xsZXJzL2luZGV4JyxbCiAgICAnLi9teUFjY291bnRDdHJsJywKICAgICcuL2FjY291bnREZXRhaWxzQ3RybCcsCiAgICAnLi9hY2NvdW50UGF5bWVudEVkaXRDdHJsJywKICAgICcuL015T3JkZXJzQ3RybCcKXSwgZnVuY3Rpb24oKSB7fSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KZGVmaW5lKCdhcHAvdXNlci9zZXJ2aWNlcy9tb2R1bGUnLFsnYW5ndWxhciddLCBmdW5jdGlvbiAoYW5ndWxhcikgewogICAgJ3VzZSBzdHJpY3QnOwogICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKCdhb3MudXNlci5zZXJ2aWNlcycsIFtdKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMS8xMS8yMDE1LgogKi8KZGVmaW5lKCdhcHAvdXNlci9zZXJ2aWNlcy91c2VyU2VydmljZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLmZhY3RvcnkoJ3VzZXJTZXJ2aWNlJywgWyckcm9vdFNjb3BlJywgJyRxJywgJyRodHRwJywKCiAgICAgICAgZnVuY3Rpb24gKCRyb290U2NvcGUsICRxLCAkaHR0cCkgewoKICAgICAgICAgICAgcmV0dXJuICh7CiAgICAgICAgICAgICAgICBsb2dpbjogbG9naW4sCiAgICAgICAgICAgICAgICBnZXRDb25maWd1cmF0aW9uOiBnZXRDb25maWd1cmF0aW9uLAogICAgICAgICAgICAgICAgc2luZ091dDogc2luZ091dCwKICAgICAgICAgICAgICAgIGdldENhcnRJbmNyZW1lbnQ6IGdldENhcnRJbmNyZW1lbnQsCiAgICAgICAgICAgICAgICBnZXREdXBsaWNhdGVQcm9kdWN0UHJpY2U6IGdldER1cGxpY2F0ZVByb2R1Y3RQcmljZSwKICAgICAgICAgICAgICAgIG52X3Nsb3dQYWdlOiBudl9zbG93UGFnZSwKICAgICAgICAgICAgICAgIGhhdmVDb25maWd1cmF0aW9uOiBoYXZlQ29uZmlndXJhdGlvbiwKICAgICAgICAgICAgICAgIGZhY2Vib29rTG9naW4gOiBmYWNlYm9va0xvZ2luLAogICAgICAgICAgICAgICAgZ2V0V2FycmFudHlQcm9wZXJ0aWVzOiBnZXRXYXJyYW50eVByb3BlcnRpZXMsCiAgICAgICAgICAgICAgICBnZXRWb2x0YWdlUHJvcGVydGllczogZ2V0Vm9sdGFnZVByb3BlcnRpZXMKCiAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgIGZ1bmN0aW9uIGhhdmVDb25maWd1cmF0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgaWYoYXBwQ29uZmlndXJhdGlvbiAmJiBhcHBDb25maWd1cmF0aW9uLnNsb3dQYWdlKXsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgIGdldENvbmZpZ3VyYXRpb24oKS50aGVuKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRDYXJ0SW5jcmVtZW50KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGFwcENvbmZpZ3VyYXRpb24gJiYgYXBwQ29uZmlndXJhdGlvbi5jYXJ0SW5jcmVtZW50ID8gYXBwQ29uZmlndXJhdGlvbi5jYXJ0SW5jcmVtZW50IDogMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RHVwbGljYXRlUHJvZHVjdFByaWNlKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGFwcENvbmZpZ3VyYXRpb24gJiYgYXBwQ29uZmlndXJhdGlvbi5kdXBsaWNhdGVQcm9kdWN0UHJpY2UgPyBhcHBDb25maWd1cmF0aW9uLmR1cGxpY2F0ZVByb2R1Y3RQcmljZSA6IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFdhcnJhbnR5UHJvcGVydGllcygpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhcHBDb25maWd1cmF0aW9uICYmIGFwcENvbmZpZ3VyYXRpb24uZW5hYmxlV2FycmFudHkgPwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlV2FycmFudHk6IGFwcENvbmZpZ3VyYXRpb24uZW5hYmxlV2FycmFudHkgPT0gMiA/IHRydWUgOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgd2FycmFudHlVcmw6IGFwcENvbmZpZ3VyYXRpb24ud2FycmFudHlVcmwKICAgICAgICAgICAgICAgICAgICB9IDoge307CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFZvbHRhZ2VQcm9wZXJ0aWVzKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGFwcENvbmZpZ3VyYXRpb24gJiYgYXBwQ29uZmlndXJhdGlvbi5lbmFibGVWb2x0YWdlID8KICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZVZvbHRhZ2U6IGFwcENvbmZpZ3VyYXRpb24uZW5hYmxlVm9sdGFnZSA9PSAyID8gdHJ1ZSA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICB2b2x0YWdlVXJsOiBhcHBDb25maWd1cmF0aW9uLnZvbHRhZ2VVcmwgKyAnL3ZpYmVzaW1wbGUvcmVzdC92MS9wcm90ZWN0LWZpZWxkcycKICAgICAgICAgICAgICAgICAgICB9IDoge307CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHNpbmdPdXQoKSB7CgogICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgaWYgKHVzZXIgJiYgdXNlci5yZXNwb25zZSAmJiB1c2VyLnJlc3BvbnNlLnVzZXJJZCAhPSAtMSkgewoKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zVG9TZW5kID0gc2VydmVyLmFjY291bnQuYWNjb3VudExvZ291dCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBleHBlY3RUb1JlY2VpdmUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luVXNlcjogdXNlci5yZXNwb25zZS51c2VySWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NFRva2VuOiAiQmFzaWMgIiArIHVzZXIucmVzcG9uc2UudF9hdXRob3JpemF0aW9uLAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwoKICAgICAgICAgICAgICAgICAgICBMb2dlci5QYXJhbXMoZXhwZWN0VG9SZWNlaXZlLCBwYXJhbXNUb1NlbmQubWV0aG9kKTsKICAgICAgICAgICAgICAgICAgICAkLnNvYXAoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtc1RvU2VuZC5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHBhcmFtc1RvU2VuZC5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVVSTDogc2VydmVyLm5hbWVzcGFjZVVSTCwKICAgICAgICAgICAgICAgICAgICAgICAgU09BUEFjdGlvbjogc2VydmVyLm5hbWVzcGFjZVVSTCArIHBhcmFtc1RvU2VuZC5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGV4cGVjdFRvUmVjZWl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHNvYXBSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXNUb1NlbmQucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UuU3RhdHVzTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoIlJlcXVlc3QgZmFpbGVkISAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlTG9nZ2luZzogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSgibm8gdXNlciIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgIH0KCgogICAgICAgICAgICB2YXIgYXBwQ29uZmlndXJhdGlvbjsKCiAgICAgICAgICAgIGZ1bmN0aW9uIG52X3Nsb3dQYWdlKCl7CiAgICAgICAgICAgICAgICBpZihhcHBDb25maWd1cmF0aW9uPT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBwQ29uZmlndXJhdGlvbi5zbG93UGFnZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENvbmZpZ3VyYXRpb24oKSB7CgogICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHt9OwoKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICBpZiAoYXBwQ29uZmlndXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoYXBwQ29uZmlndXJhdGlvbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL0hlbHBlci5lbmFibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0Q29uZmlndXJhdGlvbnMoKSwKICAgICAgICAgICAgICAgICAgICB9KS4KICAgICAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zaG93Q2hhbmdlUGFzc3dvcmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhICYmIHJlcy5kYXRhLnBhcmFtZXRlcnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmRhdGEucGFyYW1ldGVycy5sZW5ndGg7IGkrKykgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlcy5kYXRhLnBhcmFtZXRlcnNbaV0ucGFyYW1ldGVyTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJFbWFpbF9pbl9sb2dpbiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuZW1haWxBZGRyZXNzSW5Mb2dpbiA9IHJlcy5kYXRhLnBhcmFtZXRlcnNbaV0ucGFyYW1ldGVyVmFsdWUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuZGF0YS5wYXJhbWV0ZXJzW2ldLnBhcmFtZXRlclZhbHVlLnRvTG93ZXJDYXNlKCkgPT0gInllcyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiU2hvd19zbG93X3BhZ2VzIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zbG93UGFnZSA9IHJlcy5kYXRhLnBhcmFtZXRlcnNbaV0ucGFyYW1ldGVyVmFsdWUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuZGF0YS5wYXJhbWV0ZXJzW2ldLnBhcmFtZXRlclZhbHVlLnRvTG93ZXJDYXNlKCkgPT0gInllcyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiSW1wbGVtZW50X0Rldk9wc19Qcm9jZXNzIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zaG93Q2hhbmdlUGFzc3dvcmQgPSByZXMuZGF0YS5wYXJhbWV0ZXJzW2ldLnBhcmFtZXRlclZhbHVlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmRhdGEucGFyYW1ldGVyc1tpXS5wYXJhbWV0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpID09ICJ5ZXMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlR5cG9zX29uX29yZGVyX3BheW1lbnQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnNwZWxsaW5nTWlzdGFrZXMgPSByZXMuZGF0YS5wYXJhbWV0ZXJzW2ldLnBhcmFtZXRlclZhbHVlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmRhdGEucGFyYW1ldGVyc1tpXS5wYXJhbWV0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpID09ICJ5ZXMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlN1bV9hZGRlZF90b19jYXJ0IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jYXJ0SW5jcmVtZW50ID0gcmVzLmRhdGEucGFyYW1ldGVyc1tpXS5wYXJhbWV0ZXJWYWx1ZSB8fCAiMCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuY2FydEluY3JlbWVudCA9IHBhcnNlSW50KGNvbmZpZy5jYXJ0SW5jcmVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlnLmNhcnRJbmNyZW1lbnQgfHwgY29uZmlnLmNhcnRJbmNyZW1lbnQgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmNhcnRJbmNyZW1lbnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlByaWNlX2RpZmZzX1VJX3ZzX0FQSSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuZHVwbGljYXRlUHJvZHVjdFByaWNlID0gcmVzLmRhdGEucGFyYW1ldGVyc1tpXS5wYXJhbWV0ZXJWYWx1ZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmRhdGEucGFyYW1ldGVyc1tpXS5wYXJhbWV0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpID09ICJ5ZXMiID8gMiA6IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiRW5hYmxlX1dhcnJhbnR5IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5lbmFibGVXYXJyYW50eSA9IHJlcy5kYXRhLnBhcmFtZXRlcnNbaV0ucGFyYW1ldGVyVmFsdWUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhLnBhcmFtZXRlcnNbaV0ucGFyYW1ldGVyVmFsdWUudG9Mb3dlckNhc2UoKSA9PSAieWVzIiA/IDIgOiAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLndhcnJhbnR5VXJsID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiRW5hYmxlX1ZvbHRhZ2VfRW5jcnlwdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuZW5hYmxlVm9sdGFnZSA9IHJlcy5kYXRhLnBhcmFtZXRlcnNbaV0ucGFyYW1ldGVyVmFsdWUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhLnBhcmFtZXRlcnNbaV0ucGFyYW1ldGVyVmFsdWUudG9Mb3dlckNhc2UoKSA9PSAieWVzIiA/IDIgOiAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlZvbHRhZ2VfU2VydmljZV9VUkwiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnZvbHRhZ2VVcmwgPSByZXMuZGF0YS5wYXJhbWV0ZXJzW2ldLnBhcmFtZXRlclZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgIldhcnJhbnR5X2xvY2F0aW9uIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbmZpZy53YXJyYW50eVVybCA9IHJlcy5kYXRhLnBhcmFtZXRlcnNbaV0ucGFyYW1ldGVyVmFsdWUgPT0gJ2RlZmF1bHQnID8gJycgOiByZXMuZGF0YS5wYXJhbWV0ZXJzW2ldLnBhcmFtZXRlclZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zVG9TZW5kID0gc2VydmVyLmNhdGFsb2cuZ2V0QWNjb3VudENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgJC5zb2FwKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcGFyYW1zVG9TZW5kLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHBhcmFtc1RvU2VuZC5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VVUkw6IHNlcnZlci5uYW1lc3BhY2VVUkwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTT0FQQWN0aW9uOiBzZXJ2ZXIubmFtZXNwYWNlVVJMICsgcGFyYW1zVG9TZW5kLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHNvYXBSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXNUb1NlbmQucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hbGxvd1VzZXJDb25maWd1cmF0aW9uID0ganNvbi5hbGxvd1VzZXJDb25maWd1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5sb2dpbkJsb2NraW5nSW50ZXJ2YWxJblNlY29uZHMgPSBqc29uLmxvZ2luQmxvY2tpbmdJbnRlcnZhbEluU2Vjb25kczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcubnVtYmVyT2ZGYWlsZWRMb2dpbkF0dGVtcHRzQmVmb3JlQmxvY2tpbmcgPSBqc29uLm51bWJlck9mRmFpbGVkTG9naW5BdHRlbXB0c0JlZm9yZUJsb2NraW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5wcm9kdWN0SW5TdG9ja0RlZmF1bHRWYWx1ZSA9IGpzb24ucHJvZHVjdEluU3RvY2tEZWZhdWx0VmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnVzZXJMb2dpblRpbWVPdXQgPSBqc29uLnVzZXJMb2dpblRpbWVvdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnVzZXJTZWNvbmRXU0RMID0ganNvbi51c2VyU2Vjb25kV3NkbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBDb25maWd1cmF0aW9uID0gY29uZmlnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0JVRzogIzE2MTAwMSAtIFJlbW92ZSBkdXBsaWNhdGUgcmVxdWVzdHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2NvbmZpZ3VyYXRpb25Mb2FkZWQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGNvbmZpZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdCgiUmVxdWVzdCBmYWlsZWQhICIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KCJwcm9ibC4iKQogICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGxvZ2luKHVzZXIpIHsKCiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5hY2NvdW50LmxvZ2luKCk7CgogICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwoKICAgICAgICAgICAgICAgIExvZ2VyLlBhcmFtcyh1c2VyLCBwYXJhbXMubWV0aG9kKTsKICAgICAgICAgICAgICAgIC8vIEhUVFBIZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAvLyAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIGJ0b2EodXNlci5sb2dpblVzZXIgKyAiOiIgKyB1c2VyLmxvZ2luUGFzc3dvcmQpCiAgICAgICAgICAgICAgICAvLyB9LAogICAgICAgICAgICAgICAgJC5zb2FwKHsKICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy5wYXRoLAogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VVUkw6IHNlcnZlci5uYW1lc3BhY2VVUkwsCiAgICAgICAgICAgICAgICAgICAgU09BUEFjdGlvbjogc2VydmVyLm5hbWVzcGFjZVVSTCArIHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogdXNlciwKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoc29hcFJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHNvYXBSZXNwb25zZS50b0pTT04ocGFyYW1zLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlLlN0YXR1c01lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdCgiUmVxdWVzdCBmYWlsZWQhICIpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZW5hYmxlTG9nZ2luZzogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGZhY2Vib29rTG9naW4oKXsKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zVG9TZW5kID0ge307CiAgICAgICAgICAgICAgICB2YXIgZXhwZWN0VG9SZWNlaXZlID0ge30KCiAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlTG9hZGVyKCk7CgogICAgICAgICAgICAgICAgTG9nZXIuUGFyYW1zKGV4cGVjdFRvUmVjZWl2ZSwgcGFyYW1zVG9TZW5kLm1ldGhvZCk7CiAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIuYWNjb3VudC5mYWNlYm9va0xvZ2luKCksCiAgICAgICAgICAgICAgICAgICAgZGF0YToge30sCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KS4KICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKTsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlcy5kYXRhKQogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoZXJyKTsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZXJyKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9CgogICAgICAgIH1dKTsKfSk7CgoKCi8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KZGVmaW5lKCdhcHAvdXNlci9zZXJ2aWNlcy9yZWdpc3RlclNlcnZpY2UnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKHNlcnZpY2VzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBzZXJ2aWNlcy5zZXJ2aWNlKCdyZWdpc3RlclNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkgewogICAgICAgICAgICAvLyBSZXR1cm4gcHVibGljIEFQSS4KICAgICAgICAgICAgcmV0dXJuICh7CiAgICAgICAgICAgICAgICByZWdpc3RlcjogcmVnaXN0ZXIsCiAgICAgICAgICAgICAgICBnZXRBbGxDb3VudHJpZXM6IGdldEFsbENvdW50cmllcywKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgY291bnRyaWVzOwoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QWxsQ291bnRyaWVzKCkgewoKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICBpZiAoY291bnRyaWVzKSB7CiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShjb3VudHJpZXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5hY2NvdW50LmdldEFsbENvdW50cmllcygpOwoKICAgICAgICAgICAgICAgICAgICAkLnNvYXAoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy5wYXRoICwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VVUkw6IHNlcnZlci5uYW1lc3BhY2VVUkwsCiAgICAgICAgICAgICAgICAgICAgICAgIFNPQVBBY3Rpb246IHNlcnZlci5uYW1lc3BhY2VVUkwgKyBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHNvYXBSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXMucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyaWVzID0gcmVzcG9uc2UuQ291bnRyeTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGNvdW50cmllcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoIlJlcXVlc3QgZmFpbGVkISAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlTG9nZ2luZzogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKG1vZGVsKSB7CgogICAgICAgICAgICAgICAgdmFyIGV4cGVjdFRvUmVjZWl2ZSA9IHsKICAgICAgICAgICAgICAgICAgICAiYWNjb3VudFR5cGUiOiAiVVNFUiIsCiAgICAgICAgICAgICAgICAgICAgImFkZHJlc3MiOiBtb2RlbC5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICJhbGxvd09mZmVyc1Byb21vdGlvbiI6IG1vZGVsLm9mZmVyc19wcm9tb3Rpb24gPyAndHJ1ZScgOiAnZmFsc2UnLAogICAgICAgICAgICAgICAgICAgICJjaXR5TmFtZSI6IG1vZGVsLmNpdHksCiAgICAgICAgICAgICAgICAgICAgImNvdW50cnlJZCI6IG1vZGVsLmNvdW50cnkgJiYgbW9kZWwuY291bnRyeS5pZCA/IG1vZGVsLmNvdW50cnkubmFtZSArICIsIiArIG1vZGVsLmNvdW50cnkuaXNvTmFtZSA6ICJVbml0ZWQgU3RhdGVzLHVzIiwKICAgICAgICAgICAgICAgICAgICAiZW1haWwiOiBtb2RlbC5lbWFpbCwKICAgICAgICAgICAgICAgICAgICAiZmlyc3ROYW1lIjogbW9kZWwuZmlyc3ROYW1lLAogICAgICAgICAgICAgICAgICAgICJsYXN0TmFtZSI6IG1vZGVsLmxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAgICJsb2dpbk5hbWUiOiBtb2RlbC51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgICAicGFzc3dvcmQiOiBtb2RlbC5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICAicGhvbmVOdW1iZXIiOiBtb2RlbC5waG9uZU51bWJlciwKICAgICAgICAgICAgICAgICAgICAic3RhdGVQcm92aW5jZSI6IG1vZGVsLnN0YXRlLAogICAgICAgICAgICAgICAgICAgICJ6aXBjb2RlIjogbW9kZWwucG9zdGFsQ29kZSwKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5hY2NvdW50LnJlZ2lzdGVyKCk7CiAgICAgICAgICAgICAgICBMb2dlci5QYXJhbXMoZXhwZWN0VG9SZWNlaXZlLCBwYXJhbXMubWV0aG9kKTsKCiAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlTG9hZGVyKDEwKTsKCiAgICAgICAgICAgICAgICAkLnNvYXAoewogICAgICAgICAgICAgICAgICAgIHVybDogcGFyYW1zLnBhdGggLAogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VVUkw6IHNlcnZlci5uYW1lc3BhY2VVUkwsCiAgICAgICAgICAgICAgICAgICAgU09BUEFjdGlvbjogc2VydmVyLm5hbWVzcGFjZVVSTCArIHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogZXhwZWN0VG9SZWNlaXZlLAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChzb2FwUmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXMucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UuU3RhdHVzTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KCJSZXF1ZXN0IGZhaWxlZCEgIik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlbmFibGVMb2dnaW5nOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICB9XSk7Cn0pOwpkZWZpbmUoJ2FwcC91c2VyL3NlcnZpY2VzL2Fib3V0U2VydmljZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLnNlcnZpY2UoJ2Fib3V0U2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7CgogICAgICAgICAgICAvLyBSZXR1cm4gcHVibGljIEFQSS4KICAgICAgICAgICAgcmV0dXJuICh7CiAgICAgICAgICAgICAgICAvLyByZWdpc3RlcjogcmVnaXN0ZXIsCiAgICAgICAgICAgICAgICAvLyBnZXRBbGxDb3VudHJpZXM6IGdldEFsbENvdW50cmllcwogICAgICAgICAgICB9KTsKCiAgICAgICAgfV0pOwp9KTsKZGVmaW5lKCdhcHAvdXNlci9zZXJ2aWNlcy92ZXJzaW9uU2VydmljZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLnNlcnZpY2UoJ3ZlcnNpb25TZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHsKCiAgICAgICAgICAgIC8vIFJldHVybiBwdWJsaWMgQVBJLgogICAgICAgICAgICByZXR1cm4gKHsKICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyOiByZWdpc3RlciwKICAgICAgICAgICAgICAgIC8vIGdldEFsbENvdW50cmllczogZ2V0QWxsQ291bnRyaWVzCiAgICAgICAgICAgIH0pOwoKICAgICAgICB9XSk7Cn0pOwovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTAvMTMvMjAxNS4KICovCgoKZGVmaW5lKCdhcHAvdXNlci9zZXJ2aWNlcy9pbmRleCcsWycuL3VzZXJTZXJ2aWNlJywKICAgICAgICAnLi9yZWdpc3RlclNlcnZpY2UnLAogICAgICAgICcuL2Fib3V0U2VydmljZScsCiAgICAgICAgJy4vdmVyc2lvblNlcnZpY2UnCiAgICAgICAgXSwgZnVuY3Rpb24oKSB7fSk7CiAvKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxMC8wMS8yMDE2LgogKi8KCmRlZmluZSgnYXBwL29yZGVyL3NlcnZpY2VzL21vZHVsZScsWydhbmd1bGFyJ10sIGZ1bmN0aW9uIChhbmd1bGFyKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICByZXR1cm4gYW5ndWxhci5tb2R1bGUoJ2Fvcy5vcmRlci5zZXJ2aWNlcycsIFtdKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDEwLzAxLzIwMTYuCgogW+KAjjI1L+KAjjAxL+KAjjIwMTYgMTE6MTJdIFJlZ2V2LCBCaW55YW1pbjoKIGFjY291bnRUeXBlOgogMTAgPSBhZG1pbgogMjAgPSB1c2VyCiAzMCA9IGd1ZXN0CgogKi8KCmRlZmluZSgnYXBwL29yZGVyL3NlcnZpY2VzL29yZGVyU2VydmljZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLnNlcnZpY2UoJ29yZGVyU2VydmljZScsIFsnJHJvb3RTY29wZScsICckcScsICckaHR0cCcsICckZmlsdGVyJywgJ3Byb2R1Y3RzQ2FydFNlcnZpY2UnLCAndXNlclNlcnZpY2UnLAoKICAgICAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHEsICRodHRwLCAkZmlsdGVyLCBwcm9kdWN0c0NhcnRTZXJ2aWNlLCB1c2VyU2VydmljZSkgewoKICAgICAgICAgICAgcmV0dXJuICh7CiAgICAgICAgICAgICAgICBnZXRBY2NvdW50QnlJZDogZ2V0QWNjb3VudEJ5SWQsCiAgICAgICAgICAgICAgICBnZXRTaGlwcGluZ0Nvc3Q6IGdldFNoaXBwaW5nQ29zdCwKICAgICAgICAgICAgICAgIFNhZmVQYXk6IFNhZmVQYXksCiAgICAgICAgICAgICAgICBhY2NvdW50VXBkYXRlOiBhY2NvdW50VXBkYXRlLAogICAgICAgICAgICAgICAgdXNlcklzTG9naW46IHVzZXJJc0xvZ2luLAogICAgICAgICAgICAgICAgcmVtb3ZlT3JkZXI6IHJlbW92ZU9yZGVyCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZnVuY3Rpb24gdXNlcklzTG9naW4oKSB7CiAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyICYmIHVzZXIucmVzcG9uc2UgJiYgdXNlci5yZXNwb25zZS51c2VySWQgIT0gLTE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIFNhZmVQYXkodXNlciwgc2F2ZVBheSwgY2FyZCwgc2hpcHBpbmcsIGNhcnQsIGFjY291bnROdW1iZXIsIFRyYW5zUGF5bWVudE1ldGhvZCwgY2FydEluY3JlbWVudCkgewogICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKCiAgICAgICAgICAgICAgICB2YXIgcHVyY2hhc2VkUHJvZHVjdHMgPSBbXTsKICAgICAgICAgICAgICAgIHZhciB1c2luZ1dhcnJhbnR5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY2FydC5wcm9kdWN0c0luQ2FydCwgZnVuY3Rpb24gKHByb2R1Y3QpIHsKICAgICAgICAgICAgICAgICAgICBwdXJjaGFzZWRQcm9kdWN0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgImhleENvbG9yIjogcHJvZHVjdC5jb2xvci5jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAicHJvZHVjdElkIjogcHJvZHVjdC5wcm9kdWN0SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICJxdWFudGl0eSI6IHByb2R1Y3QucXVhbnRpdHksCiAgICAgICAgICAgICAgICAgICAgICAgICJoYXNXYXJyYW50eSIgOiBwcm9kdWN0Lmhhc1dhcnJhbnR5CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYoIXVzaW5nV2FycmFudHkpewogICAgICAgICAgICAgICAgICAgICAgICB1c2luZ1dhcnJhbnR5ID0gcHJvZHVjdC5oYXNXYXJyYW50eTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHVzaW5nV2FycmFudHkgPyBBbmFseXRpY3MudHJhY2tFdmVudCgnU2FmZVBheScsICdXYXJyYW50eSBhY3RpdmF0ZWQnLCBjYXJ0LnByb2R1Y3RzSW5DYXJ0KSA6ICIiOwogICAgICAgICAgICAgICAgdmFyIHBhcmFtc1RvUGFzcyA9IHsKICAgICAgICAgICAgICAgICAgICAib3JkZXJQYXltZW50SW5mb3JtYXRpb24iOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9BY2NvdW50TnVtYmVyIjogYWNjb3VudE51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX0N1cnJlbmN5Ijogc2hpcHBpbmcuY3VycmVuY3ksCiAgICAgICAgICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9DdXN0b21lclBob25lIjogdXNlci5waG9uZU51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX01hc3RlckNyZWRpdF9DVlZOdW1iZXIiOiBjYXJkLmN2diwKICAgICAgICAgICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX01hc3RlckNyZWRpdF9DYXJkTnVtYmVyIjogJzQ4ODYnICsgY2FyZC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9NYXN0ZXJDcmVkaXRfQ3VzdG9tZXJOYW1lIjogY2FyZC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAiVHJhbnNhY3Rpb25fTWFzdGVyQ3JlZGl0X0V4cGlyYXRpb25EYXRlIjogY2FyZC5leHBpcmF0aW9uRGF0ZS5tb250aCArICIiICsgY2FyZC5leHBpcmF0aW9uRGF0ZS55ZWFyLAogICAgICAgICAgICAgICAgICAgICAgICAiVHJhbnNhY3Rpb25fUGF5bWVudE1ldGhvZCI6IFRyYW5zUGF5bWVudE1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX1JlZmVyZW5jZU51bWJlciI6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9TYWZlUGF5X1Bhc3N3b3JkIjogc2F2ZVBheS5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX1NhZmVQYXlfVXNlck5hbWUiOiBzYXZlUGF5LnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAiVHJhbnNhY3Rpb25fVHJhbnNhY3Rpb25EYXRlIjogc2hpcHBpbmcudHJhbnNhY3Rpb25EYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAiVHJhbnNhY3Rpb25fVHlwZSI6ICJQQVlNRU5UIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgIm9yZGVyU2hpcHBpbmdJbmZvcm1hdGlvbiI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nX0FkZHJlc3NfQWRkcmVzcyI6IHVzZXIuYWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nX0FkZHJlc3NfQ2l0eSI6IHVzZXIuY2l0eU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ19BZGRyZXNzX0NvdW50cnlDb2RlIjogdXNlci5jb3VudHJ5SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ19BZGRyZXNzX0N1c3RvbWVyTmFtZSI6IHVzZXIuZmlyc3ROYW1lICsgIiAiICsgdXNlci5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nX0FkZHJlc3NfQ3VzdG9tZXJQaG9uZSI6IHVzZXIucGhvbmVOdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ19BZGRyZXNzX1Bvc3RhbENvZGUiOiB1c2VyLnppcGNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ19BZGRyZXNzX1N0YXRlIjogdXNlci5zdGF0ZVByb3ZpbmNlLAogICAgICAgICAgICAgICAgICAgICAgICAiU2hpcHBpbmdfQ29zdCI6ICRmaWx0ZXIoJ3Byb2R1Y3RzQ2FydFN1bScpKGNhcnQpLAogICAgICAgICAgICAgICAgICAgICAgICAiU2hpcHBpbmdfTnVtYmVyT2ZQcm9kdWN0cyI6ICRmaWx0ZXIoJ3Byb2R1Y3RzQ2FydENvdW50JykoY2FydCksCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ19UcmFja2luZ051bWJlciI6IDAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICJwdXJjaGFzZWRQcm9kdWN0cyI6IHB1cmNoYXNlZFByb2R1Y3RzLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgTG9nZXIuUGFyYW1zKHBhcmFtc1RvUGFzcywgc2VydmVyLm9yZGVyLnNhZmVQYXkodXNlci5pZCkpOwogICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgdmFyIHZvbHRhZ2VQcm9wID0gdXNlclNlcnZpY2UuZ2V0Vm9sdGFnZVByb3BlcnRpZXMoKTsKICAgICAgICAgICAgICAgIGlmKHZvbHRhZ2VQcm9wLmVuYWJsZVZvbHRhZ2UpewogICAgICAgICAgICAgICAgICAgIGVuY3J5cHRDcmVkaXRDYXJkTnVtYmVyKHBhcmFtc1RvUGFzcy5vcmRlclBheW1lbnRJbmZvcm1hdGlvbi5UcmFuc2FjdGlvbl9NYXN0ZXJDcmVkaXRfQ2FyZE51bWJlciwgYWNjb3VudE51bWJlciwgdm9sdGFnZVByb3ApLnRoZW4oZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzLnN0YXR1cyA9PSAyMDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zVG9QYXNzLm9yZGVyUGF5bWVudEluZm9ybWF0aW9uLlRyYW5zYWN0aW9uX01hc3RlckNyZWRpdF9DYXJkTnVtYmVyID0gcmVzLmRhdGEuZmllbGRzWzBdLmRhdGFbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGRvUGF5KHVzZXIsIHBhcmFtc1RvUGFzcykudGhlbihmdW5jdGlvbihyZXMpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycil7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvUGF5KHVzZXIsIHBhcmFtc1RvUGFzcykudGhlbihmdW5jdGlvbihyZXMpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGVycil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgICAgICAgICAgZG9QYXkodXNlciwgcGFyYW1zVG9QYXNzKS50aGVuKGZ1bmN0aW9uKHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzKTsKICAgICAgICAgICAgICAgICAgICB9KTs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGRvUGF5KHVzZXIsIHBhcmFtc1RvUGFzcyl7CiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgJGh0dHAoewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLm9yZGVyLnNhZmVQYXkodXNlci5pZCksCiAgICAgICAgICAgICAgICAgICAgZGF0YTogcGFyYW1zVG9QYXNzLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmFzaWMgIiArICRyb290U2NvcGUudXNlckNvb2tpZS5yZXNwb25zZS50X2F1dGhvcml6YXRpb24sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0pLgogICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXMpOwogICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzLmRhdGEpCiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChlcnIpOwogICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChKU09OLnN0cmluZ2lmeShlcnIpKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gYWNjb3VudFVwZGF0ZSh1c2VyKSB7CgogICAgICAgICAgICAgICAgdmFyIHBhcmFtc1RvUGFzcyA9IHsKICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHVzZXIuZmlyc3ROYW1lLAogICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXNlci5pZCwKICAgICAgICAgICAgICAgICAgICBjb3VudHJ5SWQ6IHVzZXIuY291bnRyeUlkLAogICAgICAgICAgICAgICAgICAgIHN0YXRlUHJvdmluY2U6IHVzZXIuc3RhdGVQcm92aW5jZSwKICAgICAgICAgICAgICAgICAgICBjaXR5TmFtZTogdXNlci5jaXR5TmFtZSwKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiB1c2VyLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgemlwY29kZTogdXNlci56aXBjb2RlLAogICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiB1c2VyLnBob25lTnVtYmVyLAogICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIGFjY291bnRUeXBlOiAyMCwKICAgICAgICAgICAgICAgICAgICBhbGxvd09mZmVyc1Byb21vdGlvbjogdXNlci5hbGxvd09mZmVyc1Byb21vdGlvbgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIExvZ2VyLlBhcmFtcyhwYXJhbXNUb1Bhc3MsIHNlcnZlci5vcmRlci5hY2NvdW50VXBkYXRlKCkubWV0aG9kKTsKCiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5vcmRlci5hY2NvdW50VXBkYXRlKCk7CgogICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwoKICAgICAgICAgICAgICAgICQuc29hcCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOiBwYXJhbXMucGF0aCwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlVVJMOiBzZXJ2ZXIubmFtZXNwYWNlVVJMLAogICAgICAgICAgICAgICAgICAgIFNPQVBBY3Rpb246IHNlcnZlci5uYW1lc3BhY2VVUkwgKyBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IHBhcmFtc1RvUGFzcywKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoc29hcFJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHNvYXBSZXNwb25zZS50b0pTT04ocGFyYW1zLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlLkFjY291bnRSZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KCJSZXF1ZXN0IGZhaWxlZCEgIik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlbmFibGVMb2dnaW5nOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QWNjb3VudEJ5SWQoKSB7CgogICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgaWYgKHVzZXIgJiYgdXNlci5yZXNwb25zZSAmJiB1c2VyLnJlc3BvbnNlLnVzZXJJZCAhPSAtMSkgewoKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VydmVyLmFjY291bnQuZ2V0QWNjb3VudEJ5SWQoKTsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlTG9hZGVyKCk7CgogICAgICAgICAgICAgICAgICAgICQuc29hcCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcGFyYW1zLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlVVJMOiBzZXJ2ZXIubmFtZXNwYWNlVVJMLAogICAgICAgICAgICAgICAgICAgICAgICBTT0FQQWN0aW9uOiBzZXJ2ZXIubmFtZXNwYWNlVVJMICsgcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IHVzZXIucmVzcG9uc2UudXNlcklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NFRva2VuOiAiQmFzaWMgIit1c2VyLnJlc3BvbnNlLnRfYXV0aG9yaXphdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHNvYXBSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXMucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UgJiYgcmVzcG9uc2UuQWNjb3VudFJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5BY2NvdW50UmVzcG9uc2UuY291bnRyeSA9IHJlc3BvbnNlLkFjY291bnRSZXNwb25zZS5jb3VudHJ5SXNvTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlLkFjY291bnRSZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoIlJlcXVlc3QgZmFpbGVkISAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlTG9nZ2luZzogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShudWxsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRTaGlwcGluZ0Nvc3QodXNlcikgewoKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CgogICAgICAgICAgICAgICAgLy9pZigodXNlci5maXJzdE5hbWUgKyB1c2VyLmxhc3ROYW1lKS5yZXBsYWNlKC9ccy9nLCAiIikubGVuZ3RoIDwgMSl7CiAgICAgICAgICAgICAgICAvLyAgICBkZWZlci5yZXNvbHZlKG51bGwpOwogICAgICAgICAgICAgICAgLy99CgogICAgICAgICAgICAgICAgcHJvZHVjdHNDYXJ0U2VydmljZS5nZXRDYXJ0KCkudGhlbihmdW5jdGlvbiAoY2FydCkgewoKICAgICAgICAgICAgICAgICAgICAvLy8gcGxhc3RlcgogICAgICAgICAgICAgICAgICAgIGlmICgodXNlci5maXJzdE5hbWUgKyB1c2VyLmxhc3ROYW1lKS50cmltKCkubGVuZ3RoIDwgMSkgewogICAgICAgICAgICAgICAgICAgICAgICB1c2VyLmZpcnN0TmFtZSA9ICRyb290U2NvcGUudXNlckNvb2tpZS5uYW1lOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLy8gZW5kIHBsYXN0ZXIKCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtc1RvUGFzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgInNlYWRkcmVzcyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhZGRyZXNzTGluZTEiOiB1c2VyLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWRkcmVzc0xpbmUyIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2l0eSI6IHVzZXIuY2l0eU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY291bnRyeSI6IHVzZXIuY291bnRyeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwb3N0YWxDb2RlIjogdXNlci56aXBjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInN0YXRlIjogdXNlci5zdGF0ZVByb3ZpbmNlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICJzZWN1c3RvbWVyTmFtZSI6IHVzZXIuZmlyc3ROYW1lICsgIiAiICsgdXNlci5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgInNlY3VzdG9tZXJQaG9uZSI6IHVzZXIucGhvbmVOdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzZW51bWJlck9mUHJvZHVjdHMiOiAkZmlsdGVyKCdwcm9kdWN0c0NhcnRDb3VudCcpKGNhcnQpLAogICAgICAgICAgICAgICAgICAgICAgICAic2V0cmFuc2FjdGlvblR5cGUiOiAiU0hJUFBJTkdfQ09TVCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzZXNzaW9uSWQiIDogJHJvb3RTY29wZS5vcmRlclNlc3Npb25JZCA/ICRyb290U2NvcGUub3JkZXJTZXNzaW9uSWQgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgTG9nZXIuUGFyYW1zKHBhcmFtc1RvUGFzcywgc2VydmVyLm9yZGVyLmdldFNoaXBwaW5nQ29zdCgpKTsKCiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICRodHRwKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLm9yZGVyLmdldFNoaXBwaW5nQ29zdCgpLCAvLydodHRwczovLzkxeWpyNWx6cjcuZXhlY3V0ZS1hcGkudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vU2hpcEV4JwogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBwYXJhbXNUb1Bhc3MsCiAgICAgICAgICAgICAgICAgICAgfSkuCiAgICAgICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbiAoc2hpcHBpbmdDb3N0KSB7CgogICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChzaGlwcGluZ0Nvc3QpOwogICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHNoaXBwaW5nQ29zdC5kYXRhKQogICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KEpTT04uc3RyaW5naWZ5KGVycikpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVPcmRlcihvcmRlcil7CiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwoKICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwoKICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImRlbGV0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLm9yZGVyLmRlbGV0ZU9yZGVyKG9yZGVyLCB1c2VyLnJlc3BvbnNlLnVzZXJJZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCYXNpYyAiICsgJHJvb3RTY29wZS51c2VyQ29va2llLnJlc3BvbnNlLnRfYXV0aG9yaXphdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9KS4KICAgICAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uIChyZXMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmRlcnNPYmogPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGRhdGEuT3JkZXJMaW5lcywgZnVuY3Rpb24ob2JqKXsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcmRlcnNPYmpbb2JqLk9yZGVyTnVtYmVyXSA9PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnNPYmpbb2JqLk9yZGVyTnVtYmVyXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yZGVyRGF0ZSI6IG9iai5PcmRlckRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwcm9kdWN0cyI6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc09ialtvYmouT3JkZXJOdW1iZXJdLnByb2R1Y3RzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm9kdWN0SW1hZ2VVcmwiOiBvYmouUHJvZHVjdEltYWdlVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm9kdWN0TmFtZSI6IG9iai5Qcm9kdWN0TmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvZHVjdENvbG9yQ29kZSI6IG9iai5Qcm9kdWN0Q29sb3JDb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm9kdWN0Q29sb3JOYW1lIjogb2JqLlByb2R1Y3RDb2xvck5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlByaWNlUGVyVW5pdCI6IG9iai5QcmljZVBlclVuaXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlF1YW50aXR5Ijogb2JqLlF1YW50aXR5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaW5kZXggaW4gT2JqZWN0LmtleXMob3JkZXJzT2JqKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IE9iamVjdC5rZXlzKG9yZGVyc09iailbaW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyTnVtYmVyOiBuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRGF0ZTogb3JkZXJzT2JqW25hbWVdLm9yZGVyRGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0czogb3JkZXJzT2JqW25hbWVdLnByb2R1Y3RzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnMucHVzaChvcmRlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKG9yZGVycyk7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUob3JkZXJzKQogICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KEpTT04uc3RyaW5naWZ5KGVycikpCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGVuY3J5cHRDcmVkaXRDYXJkTnVtYmVyKGNhcmROdW0sIGFjY291bnQsIHZvbHRhZ2VQcm9wKXsKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zVG9QYXNzID0gJ3siZmllbGRzIjogW3siZmllbGROYW1lIjogIkNyZWRpdENhcmROdW1iZXIiLCAiZm9ybWF0IjogImNjLWZwZTIiLCAiZGF0YSI6IFsiJyArIGNhcmROdW0gKyAnIl19XX0nOwogICAgICAgICAgICAgICAgJGh0dHAoewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vdm9sdGFnZS1wcC0wMDAwLmRhdGFwcm90ZWN0aW9uLnZvbHRhZ2UuY29tL3ZpYmVzaW1wbGUvcmVzdC92MS9wcm90ZWN0LWZpZWxkcycsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICdWU0F1dGggdnNhdXRoX21ldGhvZD0ic2hhcmVkU2VjcmV0Iix2c2F1dGhfZGF0YT0iZG05c2RHRm5aVEV5TXc9PSIsdnNhdXRoX2lkZW50aXR5X2FzY2lpPSJhY2NvdW50czIyQGRhdGFwcm90ZWN0aW9uLnZvbHRhZ2UuY29tIix2c2F1dGhfdmVyc2lvbj0iMjAwIicsCiAgICAgICAgICAgICAgICAgICAgICAgICdyZWplY3RVbmF1dGhvcml6ZWQnOiAnZmFsc2UnLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGF0YTogcGFyYW1zVG9QYXNzCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXMpOwogICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXMpOwogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKGVycik7CiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoSlNPTi5zdHJpbmdpZnkoZXJyKSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9CiAgICAgICAgfV0pOwp9KTsKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxMC8wMS8yMDE2LgogKi8KCmRlZmluZSgnYXBwL29yZGVyL3NlcnZpY2VzL2luZGV4JyxbCiAgICAnLi9vcmRlclNlcnZpY2UnLAogICAgXSwgZnVuY3Rpb24oKSB7fSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KCmRlZmluZSgnYXBwL3NlcnZpY2VzL21vZHVsZScsWydhbmd1bGFyJ10sIGZ1bmN0aW9uIChhbmd1bGFyKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICByZXR1cm4gYW5ndWxhci5tb2R1bGUoJ2Fvcy5zZXJ2aWNlcycsIFtdKTsKfSk7CgoKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAwNi8xMi8yMDE1LgogKi8KCmRlZmluZSgnYXBwL3NlcnZpY2VzL3Byb2R1Y3RzQ2FydFNlcnZpY2UnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKHNlcnZpY2VzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBzZXJ2aWNlcy5zZXJ2aWNlKCdwcm9kdWN0c0NhcnRTZXJ2aWNlJywgWyckaHR0cCcsICckcScsICdyZXNIYW5kbGVTZXJ2aWNlJywgJ2lwQ29va2llJywKICAgICAgICAnJHJvb3RTY29wZScsICd0b2FzdGVyJywgJ3VzZXJTZXJ2aWNlJywKICAgICAgICBmdW5jdGlvbiAoJGh0dHAsICRxLCByZXNwb25zZVNlcnZpY2UsICRjb29raWUsICRyb290U2NvcGUsIHRvYXN0ZXIsIHVzZXJTZXJ2aWNlKSB7CgogICAgICAgICAgICB2YXIgY2FydCA9IG51bGw7CiAgICAgICAgICAgIHZhciBlbmFibGVXYXJyYW50eSA9IGZhbHNlOwogICAgICAgICAgICBmdW5jdGlvbiBnZXRUZW1wQ2FydCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7InVzZXJJZCI6IC0xLCAicHJvZHVjdHNJbkNhcnQiOiBbXSx9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAoewogICAgICAgICAgICAgICAgYWRkUHJvZHVjdDogYWRkUHJvZHVjdCwKICAgICAgICAgICAgICAgIHVwZGF0ZVByb2R1Y3Q6IHVwZGF0ZVByb2R1Y3QsCiAgICAgICAgICAgICAgICBsb2FkQ2FydFByb2R1Y3RzOiBsb2FkQ2FydFByb2R1Y3RzLAogICAgICAgICAgICAgICAgam9pbkNhcnRQcm9kdWN0czogam9pbkNhcnRQcm9kdWN0cywKICAgICAgICAgICAgICAgIHJlbW92ZVByb2R1Y3Q6IHJlbW92ZVByb2R1Y3QsCiAgICAgICAgICAgICAgICBjaGVja291dDogY2hlY2tvdXQsCiAgICAgICAgICAgICAgICBnZXRDYXJ0OiBnZXRDYXJ0LAogICAgICAgICAgICAgICAgc2F2ZUNhcnQ6IHNhdmVDYXJ0LAogICAgICAgICAgICAgICAgY2xlYXJDYXJ0OiBjbGVhckNhcnQsCiAgICAgICAgICAgICAgICBjaGVja091dE9mU3RvY2tQcm9kdWN0c0luQ2FydDogY2hlY2tPdXRPZlN0b2NrUHJvZHVjdHNJbkNhcnQsCiAgICAgICAgICAgICAgICBzZXRFbmFibGVXYXJyYW50eTogc2V0RW5hYmxlV2FycmFudHkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvKiByZXR1cm5lZCBmdW5jdGlvbnMgKi8KCiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyQ2FydCgpIHsKICAgICAgICAgICAgICAgIHZhciByZXNwb25jZSA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKICAgICAgICAgICAgICAgIGlmICh1c2VyICYmIHVzZXIucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodXNlci5yZXNwb25zZS51c2VySWQgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZGVsZXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogIkJhc2ljICIgKyB1c2VyLnJlc3BvbnNlLnRfYXV0aG9yaXphdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHNlcnZlci5vcmRlci5jbGVhckNhcnQodXNlci5yZXNwb25zZS51c2VySWQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FydCA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbmNlLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdBbiBlcnJvciBvY2N1cnJlZCwgcGxlYXNlIHRyeSBhZ2FpbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uY2UucmVqZWN0KCdlcnJvciBpbiBsb2FkIGNhcnQgKHByb2R1Y3RDYXJ0U2VydmljZSAtIGxvYWRDYXJ0UHJvZHVjdHMpJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3BvbmNlLnJlc29sdmUobnVsbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uY2UucHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gc2F2ZUNhcnQoX2NhcnQpIHsKICAgICAgICAgICAgICAgIHVwZGF0ZUNhcnQoX2NhcnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRDYXJ0KCkgewoKICAgICAgICAgICAgICAgIHZhciByZXNwb25jZSA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKICAgICAgICAgICAgICAgIGlmICh1c2VyICYmIHVzZXIucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodXNlci5yZXNwb25zZS51c2VySWQgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogIkJhc2ljICIgKyB1c2VyLnJlc3BvbnNlLnRfYXV0aG9yaXphdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHNlcnZlci5vcmRlci5sb2FkQ2FydFByb2R1Y3RzKHVzZXIucmVzcG9uc2UudXNlcklkKQogICAgICAgICAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcnQgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25jZS5yZXNvbHZlKGNhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnQW4gZXJyb3Igb2NjdXJyZWQsIHBsZWFzZSB0cnkgYWdhaW4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoZXJyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uY2UucmVqZWN0KCdlcnJvciBpbiBsb2FkIGNhcnQgKHByb2R1Y3RDYXJ0U2VydmljZSAtIGxvYWRDYXJ0UHJvZHVjdHMpJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3BvbmNlLnJlc29sdmUobnVsbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uY2UucHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tvdXQoKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uY2UgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgcmVzcG9uY2UucmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uY2UucHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdChpbmRleCkgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbmNlID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgdmFyIHByb2QgPSBjYXJ0LnByb2R1Y3RzSW5DYXJ0W2luZGV4XTsKICAgICAgICAgICAgICAgIGNhcnQucHJvZHVjdHNJbkNhcnQuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICAgIGlmICh1c2VyICYmIHVzZXIucmVzcG9uc2UgJiYgdXNlci5yZXNwb25zZS51c2VySWQgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZCgiZGVsZXRlZCBwcm9kdWN0LCBubyByZXR1cm5zISIpOwogICAgICAgICAgICAgICAgICAgICRodHRwKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZGVsZXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIub3JkZXIucmVtb3ZlUHJvZHVjdFRvVXNlcih1c2VyLnJlc3BvbnNlLnVzZXJJZCwgcHJvZC5wcm9kdWN0SWQsIHByb2QuY29sb3IuY29kZSksCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCYXNpYyAiICsgdXNlci5yZXNwb25zZS50X2F1dGhvcml6YXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNhcnQoY2FydCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXNwb25jZS5yZXNvbHZlKGNhcnQpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbmNlLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRDYXJ0UHJvZHVjdHMoKSB7CgogICAgICAgICAgICAgICAgdmFyIHJlc3BvbmNlID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgaWYgKHVzZXIgJiYgdXNlci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyLnJlc3BvbnNlLnVzZXJJZCAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmFzaWMgIiArIHVzZXIucmVzcG9uc2UudF9hdXRob3JpemF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLm9yZGVyLmxvYWRDYXJ0UHJvZHVjdHModXNlci5yZXNwb25zZS51c2VySWQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FydCA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbmNlLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKGVycikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdBbiBlcnJvciBvY2N1cnJlZCwgcGxlYXNlIHRyeSBhZ2FpbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25jZS5yZWplY3QoJ2Vycm9yIGluIGxvYWQgY2FydCAocHJvZHVjdENhcnRTZXJ2aWNlIC0gbG9hZENhcnRQcm9kdWN0cyknKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2FydCA9IGxvYWRHdWVzdENhcnRQcm9kdWN0cygpOwogICAgICAgICAgICAgICAgICAgIHJlc3BvbmNlLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uY2UucHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbG9hZEd1ZXN0Q2FydFByb2R1Y3RzKCkgewoKICAgICAgICAgICAgICAgIHZhciBndWVzdENhcnQgPSAkY29va2llKCJ1c2VyQ2FydCIpOwogICAgICAgICAgICAgICAgaWYgKCFndWVzdENhcnQpIHsKICAgICAgICAgICAgICAgICAgICBndWVzdENhcnQgPSBnZXRUZW1wQ2FydCgpOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNhcnQoZ3Vlc3RDYXJ0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBndWVzdENhcnQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGpvaW5DYXJ0UHJvZHVjdHMoKSB7CgogICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgIGxvYWRDYXJ0UHJvZHVjdHMoKS50aGVuKGZ1bmN0aW9uIChfY2FydCkgewogICAgICAgICAgICAgICAgICAgIGNhcnQgPSBfY2FydDsKICAgICAgICAgICAgICAgICAgICB2YXIgZ3Vlc3RDYXJ0ID0gbG9hZEd1ZXN0Q2FydFByb2R1Y3RzKCk7CgogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wQ2FydCA9IFtdOwogICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjYXJ0LnByb2R1Y3RzSW5DYXJ0LCBmdW5jdGlvbiAodXNlclByb2R1Y3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGd1ZXN0Q2FydC5wcm9kdWN0c0luQ2FydCwgZnVuY3Rpb24gKGd1ZXN0UHJvZHVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJQcm9kdWN0LnByb2R1Y3RJZCA9PSBndWVzdFByb2R1Y3QucHJvZHVjdElkICYmIHVzZXJQcm9kdWN0LmNvbG9yLmNvZGUgPT0gZ3Vlc3RQcm9kdWN0LmNvbG9yLmNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JvdGggdXNlciBhbmQgZ3Vlc3QgcHJvZHVjdCBxdWFudGl0eSBleGNlZWRlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGd1ZXN0UHJvZHVjdC5xdWFudGl0eSArIHVzZXJQcm9kdWN0LnF1YW50aXR5ID4gdXNlclByb2R1Y3QuY29sb3IuaW5TdG9jayl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBBUlQgT0YgQlVHICMxNDIwMDQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVE9ETyAtIHNob3cgcG9wVXAgIk9uZSBvciBtb3JlIG9mIHRoZSBpdGVtcyBpbiB5b3UgY2FydCBleGNlZWQgdGhlIHF1YW50aXR5IGluIHN0b2NrLiBXZSBoYXZlIGFkanVzdGVkIHlvdXIgY2FydCBhY2NvcmRpbmdseSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWVzdFByb2R1Y3QucXVhbnRpdHkgPSB1c2VyUHJvZHVjdC5jb2xvci5pblN0b2NrOyAvL3RoZSB1c2VyIHdpbGwgZ2V0IHRoZSBtYXggcXVhbnRpdHkgYWxsb3dlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdGVyLnBvcCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiAiT25lIG9yIG1vcmUgb2YgdGhlIGl0ZW1zIGluIHlvdSBjYXJ0IGV4Y2VlZCB0aGUgcXVhbnRpdHkgaW4gc3RvY2suICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJXZSBoYXZlIGFkanVzdGVkIHlvdXIgY2FydCBhY2NvcmRpbmdseSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBDYXJ0LnB1c2godXNlclByb2R1Y3QpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGd1ZXN0Q2FydC5wcm9kdWN0c0luQ2FydCwgZnVuY3Rpb24gKGd1ZXN0UHJvZHVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wQ2FydC5wdXNoKGd1ZXN0UHJvZHVjdCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNhcnQucHJvZHVjdHNJbkNhcnQgPSB0ZW1wQ2FydDsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVVc2VyQ2FydChjYXJ0KTsKICAgICAgICAgICAgICAgICAgICBpZihfY2FydC5zZXNzaW9uSWQpewogICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLm9yZGVyU2Vzc2lvbklkID0gX2NhcnQuc2Vzc2lvbklkCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRjb29raWUucmVtb3ZlKCJ1c2VyQ2FydCIpOwogICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVVzZXJDYXJ0KCkgewoKICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgaWYgKHVzZXIgJiYgdXNlci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyLnJlc3BvbnNlLnVzZXJJZCAhPSAtMSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcnRUb1JlcGxhY2UgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNhcnQucHJvZHVjdHNJbkNhcnQsIGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJ0VG9SZXBsYWNlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZXhDb2xvciI6IHByb2R1Y3QuY29sb3IuY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAicHJvZHVjdElkIjogcHJvZHVjdC5wcm9kdWN0SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInF1YW50aXR5IjogcHJvZHVjdC5xdWFudGl0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FydFRvUmVwbGFjZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAicHV0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShjYXJ0VG9SZXBsYWNlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogIkJhc2ljICIgKyB1c2VyLnJlc3BvbnNlLnRfYXV0aG9yaXphdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLm9yZGVyLnVwZGF0ZVVzZXJDYXJ0KHVzZXIucmVzcG9uc2UudXNlcklkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKF9lcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChfZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidXBkYXRlVXNlckNhcnQoKSByZWplY3RlZCEgID09PT09PSAiICsgX2VycikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVDYXJ0KGd1ZXN0Q2FydCkgewogICAgICAgICAgICAgICAgJGNvb2tpZSgidXNlckNhcnQiLCBndWVzdENhcnQsIHtleHBpcmVzOiAzNjUgKiA1fSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3QocHJvZHVjdCwgY29sb3IsIHF1YW50aXR5LCBvbGRDb2xvcikgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QuY29sb3JzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXIgJiYgdXNlci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlci5yZXNwb25zZS51c2VySWQgIT0gLTEpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9ICRodHRwKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJwdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmFzaWMgIiArIHVzZXIucmVzcG9uc2UudF9hdXRob3JpemF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLm9yZGVyLnVwZGF0ZVByb2R1Y3RUb1VzZXIodXNlci5yZXNwb25zZS51c2VySWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3QucHJvZHVjdElkLCBwcm9kdWN0LmNvbG9yc1swXS5jb2RlLCBxdWFudGl0eSwgb2xkQ29sb3IpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnRoZW4oZnVuY3Rpb24gKG5ld0NhcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChuZXdDYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJ0ID0gbmV3Q2FydC5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5wcm9taXNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdEluZGV4ID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGNhcnQucHJvZHVjdHNJbkNhcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0SW5DYXJ0ID0gY2FydC5wcm9kdWN0c0luQ2FydFtpbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdC5wcm9kdWN0SWQgPT0gcHJvZHVjdEluQ2FydC5wcm9kdWN0SWQgJiYgcHJvZHVjdEluQ2FydC5jb2xvci5jb2RlID09IG9sZENvbG9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEluZGV4ID0gaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yLmNvZGUgPT0gb2xkQ29sb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEluQ2FydC5xdWFudGl0eSA9IHF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2luZGV4IGluIGNhcnQucHJvZHVjdHNJbkNhcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcHJvZHVjdEluQ2FydCA9IGNhcnQucHJvZHVjdHNJbkNhcnRbX2luZGV4XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0LnByb2R1Y3RJZCA9PSBfcHJvZHVjdEluQ2FydC5wcm9kdWN0SWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3Byb2R1Y3RJbkNhcnQuY29sb3IuY29kZSA9PSBjb2xvci5jb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdG9jayA9IHByb2R1Y3QuY29sb3JzWzBdLmluU3RvY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wcm9kdWN0SW5DYXJ0LnF1YW50aXR5ID0gX3Byb2R1Y3RJbkNhcnQucXVhbnRpdHkgKyBxdWFudGl0eSA+ICBpbnN0b2NrID8gaW5zdG9jayA6IF9wcm9kdWN0SW5DYXJ0LnF1YW50aXR5ICsgcXVhbnRpdHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FydC5wcm9kdWN0c0luQ2FydC5zcGxpY2UocHJvZHVjdEluZGV4LCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RJbkNhcnQuY29sb3IgPSBjb2xvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEluQ2FydC5xdWFudGl0eSA9IHF1YW50aXR5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FtZVByb2R1Y3RJZENvdW50ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaW5kZXggaW4gY2FydC5wcm9kdWN0c0luQ2FydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3Byb2R1Y3RJbkNhcnQgPSBjYXJ0LnByb2R1Y3RzSW5DYXJ0W19pbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0LnByb2R1Y3RJZCA9PSBfcHJvZHVjdEluQ2FydC5wcm9kdWN0SWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVQcm9kdWN0SWRDb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYW1lUHJvZHVjdElkQ291bnQgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0SW5DYXJ0LmNvbG9yID0gY29sb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEluQ2FydC5xdWFudGl0eSA9IHF1YW50aXR5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVDYXJ0KGNhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZXNvbHZlKGNhcnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5wcm9taXNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBhZGRQcm9kdWN0KHByb2R1Y3QsIHF1YW50aXR5LCBoYXNXYXJyYW50eSkgewoKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKCiAgICAgICAgICAgICAgICBpZiAodXNlciAmJiB1c2VyLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXIucmVzcG9uc2UudXNlcklkICE9IC0xKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmFzaWMgIiArIHVzZXIucmVzcG9uc2UudF9hdXRob3JpemF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGZ1bmN0aW9uKG9iaikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIHAgaW4gb2JqKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIucHVzaChlbmNvZGVVUklDb21wb25lbnQocCkgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW3BdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5qb2luKCImIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge3Nlc3Npb25JZDogJHJvb3RTY29wZS5vcmRlclNlc3Npb25JZCx9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIub3JkZXIuYWRkUHJvZHVjdFRvVXNlcih1c2VyLnJlc3BvbnNlLnVzZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LnByb2R1Y3RJZCwgcHJvZHVjdC5jb2xvcnNbMF0uY29kZSwgcXVhbnRpdHksIGhhc1dhcnJhbnR5ID8gdHJ1ZSA6IGZhbHNlKSwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QudGhlbihmdW5jdGlvbiAobmV3Q2FydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKG5ld0NhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FydCA9IG5ld0NhcnQuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0SW5kZXggPSAwOwogICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjYXJ0LnByb2R1Y3RzSW5DYXJ0LCBmdW5jdGlvbiAocHJvZHVjdEluQ2FydCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QucHJvZHVjdElkID09IHByb2R1Y3RJbkNhcnQucHJvZHVjdElkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocHJvZHVjdC5jb2xvcnMsIGZ1bmN0aW9uIChjb2xvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0SW5DYXJ0LmNvbG9yLmNvZGUgPT0gY29sb3IuY29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0SW5kZXggPSBpbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEluQ2FydC5xdWFudGl0eSArPSBxdWFudGl0eTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluZCA9IHByb2R1Y3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhcnQucHJvZHVjdHNJbkNhcnQudW5zaGlmdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicHJvZHVjdElkIjogcHJvZHVjdC5wcm9kdWN0SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaW1hZ2VVcmwiOiBwcm9kdWN0LmltYWdlVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInByb2R1Y3ROYW1lIjogcHJvZHVjdC5wcm9kdWN0TmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjb2xvciI6IHByb2R1Y3QuY29sb3JzLmxlbmd0aCA+IDAgPyBwcm9kdWN0LmNvbG9yc1swXSA6ICdGRkYnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInF1YW50aXR5IjogcXVhbnRpdHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicHJpY2UiOiBwcm9kdWN0LnByaWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImhhc1dhcnJhbnR5IiA6IGhhc1dhcnJhbnR5CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FydC5wcm9kdWN0c0luQ2FydC5zcGxpY2UoMCwgMCwgY2FydC5wcm9kdWN0c0luQ2FydC5zcGxpY2UocHJvZHVjdEluZGV4LCAxKVswXSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB1cGRhdGVDYXJ0KGNhcnQpOwogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrT3V0T2ZTdG9ja1Byb2R1Y3RzSW5DYXJ0KCkgewoKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCkKCiAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKICAgICAgICAgICAgICAgIGlmICh1c2VyICYmIHVzZXIucmVzcG9uc2UgJiYgdXNlci5yZXNwb25zZS51c2VySWQgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGNhcnQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBjYXJ0VG9SZXBsYWNlID0gW107CgogICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvZEluZGV4ID0gMDsgcHJvZEluZGV4IDwgY2FydC5wcm9kdWN0c0luQ2FydC5sZW5ndGg7IHByb2RJbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSBjYXJ0LnByb2R1Y3RzSW5DYXJ0W3Byb2RJbmRleF07CiAgICAgICAgICAgICAgICAgICAgY2hlY2tPdXRPZlN0b2NrUHJvZHVjdChwcm9kdWN0LCBwcm9kSW5kZXgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5fcHJvZCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJ0VG9SZXBsYWNlLnB1c2gocmVzLnJlYWxfcHJvZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuX3Byb2RJbmRleCA9PSBjYXJ0LnByb2R1Y3RzSW5DYXJ0Lmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcnQucHJvZHVjdHNJbkNhcnQgPSBjYXJ0VG9SZXBsYWNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ2FydChjYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoY2FydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjYXJ0LnByb2R1Y3RzSW5DYXJ0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShjYXJ0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjaGVja091dE9mU3RvY2tQcm9kdWN0KHByb2R1Y3QsIHByb2RJbmRleCkgewoKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCkKICAgICAgICAgICAgICAgICRodHRwKHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0UHJvZHVjdEJ5SWQocHJvZHVjdC5wcm9kdWN0SWQpCiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXMpOwogICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzLnByb2R1Y3RTdGF0dXMgPT0gJ091dE9mU3RvY2snID8KICAgICAgICAgICAgICAgICAgICB7cmVhbF9wcm9kOiBwcm9kdWN0LCBfcHJvZDogbnVsbCwgX3Byb2RJbmRleDogcHJvZEluZGV4fSA6CiAgICAgICAgICAgICAgICAgICAge3JlYWxfcHJvZDogcHJvZHVjdCwgX3Byb2Q6IHJlcywgX3Byb2RJbmRleDogcHJvZEluZGV4fSk7CiAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoX2VycikgewogICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKF9lcnIpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjaGVja091dE9mU3RvY2tQcm9kdWN0KCkgcmVqZWN0ZWQhICA9PT09PT0gIiArIF9lcnIpCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2VycikKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHtyZWFsX3Byb2Q6IHByb2R1Y3QsIF9wcm9kOiByZXMsIF9wcm9kSW5kZXg6IHByb2RJbmRleH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHNldEVuYWJsZVdhcnJhbnR5KGlzRW5hYmxlZFdhcnJhbnR5KXsKICAgICAgICAgICAgICAgIGVuYWJsZVdhcnJhbnR5ID0gaXNFbmFibGVkV2FycmFudHk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfV0pOwoKCn0pOwovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTAvMTMvMjAxNS4KICovCmRlZmluZSgnYXBwL3NlcnZpY2VzL3Byb2R1Y3RTZXJ2aWNlJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChzZXJ2aWNlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgc2VydmljZXMuc2VydmljZSgncHJvZHVjdFNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgJ3Jlc0hhbmRsZVNlcnZpY2UnLCAnJHRpbWVvdXQnLCAnY2F0ZWdvcnlTZXJ2aWNlJywgJ3VzZXJTZXJ2aWNlJywKICAgICAgICBmdW5jdGlvbiAoJGh0dHAsICRxLCByZXNwb25zZVNlcnZpY2UsICR0aW1lb3V0LCBjYXRlZ29yeVNlcnZpY2UsIHVzZXJTZXJ2aWNlKSB7CiAgICAgICAgICAgIC8vIFJldHVybiBwdWJsaWMgQVBJLgogICAgICAgICAgICByZXR1cm4gKHsKICAgICAgICAgICAgICAgIGdldFByb2R1Y3RzOiBnZXRQcm9kdWN0cywKICAgICAgICAgICAgICAgIGdldFByb2R1Y3RCeUlkOiBnZXRQcm9kdWN0QnlJZCwKICAgICAgICAgICAgICAgIGdldFByb2R1Y3RzQnlTZWFyY2g6IGdldFByb2R1Y3RzQnlTZWFyY2gsCiAgICAgICAgICAgICAgICBnZXRBbGxDYXRlZ29yaWVzQXR0cmlidXRlczogZ2V0QWxsQ2F0ZWdvcmllc0F0dHJpYnV0ZXMsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UHJvZHVjdHMoKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9ICRodHRwKHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0UHJvZHVjdHMoKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gKCByZXF1ZXN0LnRoZW4ocmVzcG9uc2VTZXJ2aWNlLmhhbmRsZVN1Y2Nlc3MsIHJlc3BvbnNlU2VydmljZS5oYW5kbGVFcnJvcikgKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UHJvZHVjdEJ5SWQoaWQpIHsKCiAgICAgICAgICAgICAgICB2YXIgYWxsRGF0YSA9IGNhdGVnb3J5U2VydmljZS5nZXRFeGlzdGluZ0RhdGEoKTsKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChhbGxEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGxEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYWxsRGF0YVtpXS5wcm9kdWN0cy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSBhbGxEYXRhW2ldLnByb2R1Y3RzW2pdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QucHJvZHVjdElkID09IGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc29sdmUocHJvZHVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0UHJvZHVjdEJ5SWQoaWQpLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJlcXVlc3QudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkdXBsaWNhdGVQcm9kdWN0UHJpY2UgPSB1c2VyU2VydmljZS5nZXREdXBsaWNhdGVQcm9kdWN0UHJpY2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhLnByaWNlICo9IGR1cGxpY2F0ZVByb2R1Y3RQcmljZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc29sdmUocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlamVjdChyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFByb2R1Y3RzQnlTZWFyY2god29yZCwgcXVhbnRpdHkpIHsKCiAgICAgICAgICAgICAgICBpZighd29yZCl7CiAgICAgICAgICAgICAgICAgICAgd29yZCA9ICIiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBhbGxEYXRhID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEV4aXN0aW5nRGF0YSgpOwogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgIGlmIChhbGxEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsRGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGFsbERhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXRlZ29yeSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5SW1hZ2VJZDogZGF0YS5jYXRlZ29yeUltYWdlSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeU5hbWU6IGRhdGEuY2F0ZWdvcnlOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCB0aGUgZW50aXJlIGNhdGVnb3J5IHByb2R1Y3RzCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhdGVnb3J5LmNhdGVnb3J5TmFtZS50b0xvd2VyQ2FzZSgpID09PSB3b3JkLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS5wcm9kdWN0cyA9IGFsbERhdGFbaV0ucHJvZHVjdHM7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGEucHJvZHVjdHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9IGFsbERhdGFbaV0ucHJvZHVjdHNbal07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QucHJvZHVjdE5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHdvcmQudG9Mb3dlckNhc2UoKSkgIT0gLTEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgZGF0YS5jYXRlZ29yeU5hbWUudG9Mb3dlckNhc2UoKSA9PSB3b3JkLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkucHJvZHVjdHMucHVzaChwcm9kdWN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhdGVnb3J5LnByb2R1Y3RzLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goY2F0ZWdvcnkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc29sdmUoYXJyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9ICRodHRwKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIuY2F0YWxvZy5nZXRQcm9kdWN0c0J5U2VhcmNoKHdvcmQsIHF1YW50aXR5KSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVwbGljYXRlUHJvZHVjdFByaWNlID0gdXNlclNlcnZpY2UuZ2V0RHVwbGljYXRlUHJvZHVjdFByaWNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGluZGV4PSAwIDsgaW5kZXggPCByZXMuZGF0YS5sZW5ndGg7IGluZGV4KyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaW5kZXgyPSAwIDsgaW5kZXgyIDwgcmVzLmRhdGFbaW5kZXhdLnByb2R1Y3RzLmxlbmd0aDsgaW5kZXgyKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuZGF0YVtpbmRleF0ucHJvZHVjdHNbaW5kZXgyXS5wcmljZSAqPSBkdXBsaWNhdGVQcm9kdWN0UHJpY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzb2x2ZShyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzb2x2ZShyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBhbGxDYXRlZ29yaWVzQXR0cmlidXRlczsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFsbENhdGVnb3JpZXNBdHRyaWJ1dGVzKCkgewoKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICBpZiAoYWxsQ2F0ZWdvcmllc0F0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZXNvbHZlKGFsbENhdGVnb3JpZXNBdHRyaWJ1dGVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewoKICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0QWxsQ2F0ZWdvcmllc0F0dHJpYnV0ZXMoKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJlcXVlc3QudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbENhdGVnb3JpZXNBdHRyaWJ1dGVzID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZXNvbHZlKGFsbENhdGVnb3JpZXNBdHRyaWJ1dGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZXNvbHZlKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgfV0pOwp9KTsKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzE4LzIwMTUuCiAqLwpkZWZpbmUoJ2FwcC9zZXJ2aWNlcy9jYXRlZ29yeVNlcnZpY2UnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKHNlcnZpY2VzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBzZXJ2aWNlcy5zZXJ2aWNlKCdjYXRlZ29yeVNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgJ3VzZXJTZXJ2aWNlJywKICAgICAgICBmdW5jdGlvbiAoJGh0dHAsICRxLCB1c2VyU2VydmljZSkgewoKICAgICAgICAgICAgdmFyIGFsbERhdGE7CiAgICAgICAgICAgIHZhciBjYXRlZ29yaWVzOwogICAgICAgICAgICB2YXIgcG9wdWxhclByb2R1Y3RzOwoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGxvYWRTZXJ2ZXI6IGxvYWRTZXJ2ZXIsCiAgICAgICAgICAgICAgICBnZXRBbGxEYXRhOiBnZXRBbGxEYXRhLAogICAgICAgICAgICAgICAgZ2V0Q2F0ZWdvcmllczogZ2V0Q2F0ZWdvcmllcywKICAgICAgICAgICAgICAgIGdldENhdGVnb3J5QnlJZDogZ2V0Q2F0ZWdvcnlCeUlkLAogICAgICAgICAgICAgICAgZ2V0UG9wdWxhclByb2R1Y3RzOiBnZXRQb3B1bGFyUHJvZHVjdHMsCiAgICAgICAgICAgICAgICBnZXRFeGlzdGluZ0RhdGE6IGdldEV4aXN0aW5nRGF0YSwKICAgICAgICAgICAgICAgIGhhdmVJbnRlcm5ldDogaGF2ZUludGVybmV0LAogICAgICAgICAgICAgICAgZ2V0TW9zdFBvcHVsYXJDb21tZW50czogZ2V0TW9zdFBvcHVsYXJDb21tZW50cywKICAgICAgICAgICAgICAgIG52SGFuZGxlcjogbnZIYW5kbGVyLAogICAgICAgICAgICAgICAgbnZfbG9hZFVudXNlU2NyaXB0czogbnZfbG9hZFVudXNlU2NyaXB0cywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaGF2ZUludGVybmV0KCkgewoKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICAvLyAkaHR0cCh7CiAgICAgICAgICAgICAgICAvLyAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgIC8vICAgICB1cmw6IHNlcnZlci5nZXRLZXkoKSArICJjYXRhbG9nL2FwaS92MS9jYXRhbG9nL0xhc3RVcGRhdGUvdGltZXN0YW1wIgogICAgICAgICAgICAgICAgLy8gfSkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgcmVzcG9uc2UucmVzb2x2ZSh0cnVlKTsKICAgICAgICAgICAgICAgIC8vIH0pLmVycm9yKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vICAgICByZXNwb25zZS5yZXNvbHZlKGZhbHNlKTsKICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzb2x2ZSh0cnVlKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5wcm9taXNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRFeGlzdGluZ0RhdGEoKSB7CiAgICAgICAgICAgICAgICBpZiAoIWFsbERhdGEpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEFsbERhdGEoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBhbGxEYXRhOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRBbGxEYXRhKCkgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgICRodHRwKHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0QWxsRGF0YSgpCiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXMpCiAgICAgICAgICAgICAgICAgICAgdmFyIGR1cGxpY2F0ZVByb2R1Y3RQcmljZSA9IHVzZXJTZXJ2aWNlLmdldER1cGxpY2F0ZVByb2R1Y3RQcmljZSgpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4MSA9IDA7IGluZGV4MSA8IHJlcy5sZW5ndGg7IGluZGV4MSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4MiA9IDA7IGluZGV4MiA8IHJlc1tpbmRleDFdLnByb2R1Y3RzLmxlbmd0aDsgaW5kZXgyKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc1tpbmRleDFdLnByb2R1Y3RzW2luZGV4Ml0ucHJpY2UgKj0gZHVwbGljYXRlUHJvZHVjdFByaWNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uKGNhdCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhdC5wcm9kdWN0cy5mb3JFYWNoKGZ1bmN0aW9uKGQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5jb2xvcnMgPSBkLmNvbG9ycy5maWx0ZXIoZnVuY3Rpb24oY29sKXtyZXR1cm4gY29sLmluU3RvY2sgPiAwfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGFsbERhdGEgPSByZXM7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzb2x2ZShhbGxEYXRhKTsKICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KCdBbiBlcnJvciBvY2N1cnJlZCwgcGxlYXNlIHRyeSBhZ2FpbicpCiAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoZXJyKTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZWplY3QoJ2Vycm9yIGluIGxvYWQgY2FydCAocHJvZHVjdENhcnRTZXJ2aWNlIC0gbG9hZENhcnRQcm9kdWN0cyknKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE1vc3RQb3B1bGFyQ29tbWVudHMoY2F0ZWdvcnlJZCkgewoKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnlJZCAhPSAyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzb2x2ZShbXSk7CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICRodHRwKHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0TW9zdFBvcHVsYXJDb21tZW50cygpCiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJyID0gcmVzICYmIHJlcy5Vc2VyQ29tbWVudHMgPyByZXMuVXNlckNvbW1lbnRzIDogW107CiAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoYXJyKQoKICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goYXJyLCBmdW5jdGlvbiAoaXRtLCBpbmRleCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0bS5zY29yZSA+IDkuNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRtLnRpdGxlID0gIkV4Y2VsbGVudCI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRtLnNjb3JlID4gOC41KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdG0udGl0bGUgPSAiVmVyeSBnb29kIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpdG0uc2NvcmUgPiA3LjUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0bS50aXRsZSA9ICJHb29kIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpdG0uc2NvcmUgPiA1LjUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0bS50aXRsZSA9ICJBdmVyYWdlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpdG0uc2NvcmUgPiA0LjUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0bS50aXRsZSA9ICJQb29yIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpdG0uc2NvcmUgPiAyLjUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0bS50aXRsZSA9ICJWZXJ5IHBvb3IiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRtLnRpdGxlID0gIlNoYW1lZnVsIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpdG0ucmV2aWV3c0NvdW50ID0gKGl0bS5jb21tZW50Lmxlbmd0aCArIGl0bS50aXRsZS5sZW5ndGgpICogMjsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzb2x2ZShhcnIpOwoKICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChlcnIpOwogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlamVjdCgnZXJyb3IgaW4gbG9hZCBjYXJ0IChwcm9kdWN0Q2FydFNlcnZpY2UgLSBsb2FkQ2FydFByb2R1Y3RzKScpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENhdGVnb3JpZXMoKSB7CgogICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKCiAgICAgICAgICAgICAgICBpZiAodXNlclNlcnZpY2UubnZfc2xvd1BhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgICRxLmFsbChbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoNSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDYXRlZ29yeUJ5SWQoNSksCiAgICAgICAgICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXMsIGZ1bmN0aW9uKF9jYXRlZ29yeSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IF9jYXRlZ29yeS5wcm9kdWN0cy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXRlZ29yeS5wcm9kdWN0c1tpXS5pZCA9X2NhdGVnb3J5LnByb2R1Y3RzW2ldLnByb2R1Y3RJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhdGVnb3J5LnByb2R1Y3RzW2ldLm1hbmFnZWRJbWFnZUlkID1fY2F0ZWdvcnkucHJvZHVjdHNbaV0uaW1hZ2VVcmw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXRlZ29yeS5tYW5hZ2VkSW1hZ2VJZCA9X2NhdGVnb3J5LmNhdGVnb3J5SW1hZ2VJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLnB1c2goX2NhdGVnb3J5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzID0gZHVwbGljYXRlUHJvZHVjdFByaWNlKGNhdGVnb3JpZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShjYXRlZ29yaWVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcmllcykgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGNhdGVnb3JpZXMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIuY2F0YWxvZy5nZXRDYXRlZ29yaWVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IGR1cGxpY2F0ZVByb2R1Y3RQcmljZShyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcyA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzKQogICAgICAgICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoZXJyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBkdXBsaWNhdGVQcm9kdWN0UHJpY2UocmVzKXsKICAgICAgICAgICAgICAgIHZhciBkdXBsaWNhdGVQcm9kdWN0UHJpY2UgPSB1c2VyU2VydmljZS5nZXREdXBsaWNhdGVQcm9kdWN0UHJpY2UoKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4MSA9IDA7IGluZGV4MSA8IHJlcy5sZW5ndGg7IGluZGV4MSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXgyID0gMDsgaW5kZXgyIDwgcmVzW2luZGV4MV0ucHJvZHVjdHMubGVuZ3RoOyBpbmRleDIrKykgewogICAgICAgICAgICAgICAgICAgICAgICByZXNbaW5kZXgxXS5wcm9kdWN0c1tpbmRleDJdLnByaWNlICo9IGR1cGxpY2F0ZVByb2R1Y3RQcmljZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRDYXRlZ29yeUJ5SWQoaWQpIHsKCiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoYWxsRGF0YSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsRGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2F0ZWdvcnkgPSBhbGxEYXRhW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuY2F0ZWdvcnlJZCA9PSBpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShjYXRlZ29yeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiY2F0ZWdvcnkgcmV0dXJuIGZyb20gYXBwIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUobnVsbCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0Q2F0ZWdvcnlCeUlkKGlkKSwKICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiY2F0ZWdvcnkgcmV0dXJuIGZyb20gc2VydmVyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR1cGxpY2F0ZVByb2R1Y3RQcmljZSA9IHVzZXJTZXJ2aWNlLmdldER1cGxpY2F0ZVByb2R1Y3RQcmljZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHJlcy5wcm9kdWN0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMucHJvZHVjdHNbaW5kZXhdLnByaWNlICo9IGR1cGxpY2F0ZVByb2R1Y3RQcmljZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wcm9kdWN0cy5mb3JFYWNoKGZ1bmN0aW9uKGQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuY29sb3JzID0gZC5jb2xvcnMuZmlsdGVyKGZ1bmN0aW9uKGNvbCl7cmV0dXJuIGNvbC5pblN0b2NrID4gMH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChlcnIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZXJyKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFBvcHVsYXJQcm9kdWN0cygpIHsKCiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgaWYgKHBvcHVsYXJQcm9kdWN0cyAmJiAhdXNlclNlcnZpY2UubnZfc2xvd1BhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgIHByaW50KCJwb3B1bGFyUHJvZHVjdHMgcmV0dXJuIGZyb20gYXBwIik7CiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShwb3B1bGFyUHJvZHVjdHMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAgICAgICAgIHZhciB0aW1lcyA9IHVzZXJTZXJ2aWNlLm52X3Nsb3dQYWdlKCkgPyAzIDogMTsKICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRlckh0dHB0aW1lc0NhbGxzID0gMDsKICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGltZXM7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRodHRwKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0UG9wdWxhclByb2R1Y3RzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoInBvcHVsYXJQcm9kdWN0cyByZXR1cm4gZnJvbSBzZXJ2ZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVwbGljYXRlUHJvZHVjdFByaWNlID0gdXNlclNlcnZpY2UuZ2V0RHVwbGljYXRlUHJvZHVjdFByaWNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHJlcy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzW2luZGV4XS5wcmljZSAqPSBkdXBsaWNhdGVQcm9kdWN0UHJpY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVsYXJQcm9kdWN0cyA9IHJlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRlckh0dHB0aW1lc0NhbGxzICsgMSA+PSB0aW1lcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJIdHRwdGltZXNDYWxscysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChlcnIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgNjAwICogKGkgKyAxKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRTZXJ2ZXIoKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSAkcS5kZWZlcigpOwoKICAgICAgICAgICAgICAgIHZhciBmaWxlID0gJ3NlcnZpY2VzLnByb3BlcnRpZXMnCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXh0cmFjdGluZyBmaWxlOiAiICsgZmlsZSk7CgogICAgICAgICAgICAgICAgdmFyIHJhd0ZpbGUgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJhd0ZpbGUub3BlbigiR0VUIiwgZmlsZSwgZmFsc2UpOwogICAgICAgICAgICAgICAgcmF3RmlsZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGlmKHJhd0ZpbGUucmVhZHlTdGF0ZSA9PT0gNCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJhd0ZpbGUuc3RhdHVzID09PSAyMDAgfHwgcmF3RmlsZS5zdGF0dXMgPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc0pzb25TdHJpbmcocmF3RmlsZS5yZXNwb25zZVRleHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlU2VydmljZXNBc0pTT04ocmF3RmlsZS5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlU2VydmljZXNBc1R4dChyYXdGaWxlLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZXNvbHZlKCJPSyIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmF3RmlsZS5zZW5kKG51bGwpOwogICAgICAgICAgICAgICAgLy8gaWYoc2VydmVyLmdldEtleSgpICE9PSAndW5kZWZpbmVkJyl7CiAgICAgICAgICAgICAgICAvLyAgICAgcmVzcG9uc2UucmVzb2x2ZSgiT0siKTsKICAgICAgICAgICAgICAgIC8vIH1lbHNlewogICAgICAgICAgICAgICAgLy8gICAgICRodHRwKHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgdXJsOiBmaWxlLAogICAgICAgICAgICAgICAgLy8gICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgLy8gICAgICAgICBpZihpc0pzb25TdHJpbmcocmVzKSkKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHBhcnNlU2VydmljZXNBc0pTT04ocmVzKTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcGFyc2VTZXJ2aWNlc0FzVHh0KHJlcyk7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJlc3BvbnNlLnJlc29sdmUoIk9LIik7CiAgICAgICAgICAgICAgICAvLyAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIH0KCgoKICAgICAgICAgICAgICAgIC8vIHJhd0ZpbGUub3BlbigiR0VUIiwgZmlsZSwgZmFsc2UpOwogICAgICAgICAgICAgICAgLy8gcmF3RmlsZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgIGlmIChyYXdGaWxlLnJlYWR5U3RhdGUgPT09IDQpIHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYgKHJhd0ZpbGUuc3RhdHVzID09PSAyMDAgfHwgcmF3RmlsZS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHJlc3BvbnNlLnJlc29sdmUoIk9LIik7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgLy8gcmF3RmlsZS5zZW5kKG51bGwpCgoKICAgICAgICAgICAgICAgIC8vJGh0dHAoewogICAgICAgICAgICAgICAgLy8gICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgIC8vICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0QWxsRGF0YSgpCiAgICAgICAgICAgICAgICAvL30pLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgLy8gICAgTG9nZXIuUmVjZWl2ZWQocmVzKQogICAgICAgICAgICAgICAgLy8gICAgdmFyIGR1cGxpY2F0ZVByb2R1Y3RQcmljZSA9IHVzZXJTZXJ2aWNlLmdldER1cGxpY2F0ZVByb2R1Y3RQcmljZSgpOwogICAgICAgICAgICAgICAgLy8gICAgZm9yKHZhciBpbmRleDE9IDAgOyBpbmRleDEgPCByZXMubGVuZ3RoOyBpbmRleDErKyl7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgZm9yKHZhciBpbmRleDI9IDAgOyBpbmRleDIgPCByZXNbaW5kZXgxXS5wcm9kdWN0cy5sZW5ndGg7IGluZGV4MisrKXsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgcmVzW2luZGV4MV0ucHJvZHVjdHNbaW5kZXgyXS5wcmljZSAqPSBkdXBsaWNhdGVQcm9kdWN0UHJpY2U7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgfQogICAgICAgICAgICAgICAgLy8gICAgYWxsRGF0YSA9IHJlczsKICAgICAgICAgICAgICAgIC8vICAgIHJlc3BvbnNlLnJlc29sdmUoYWxsRGF0YSk7CiAgICAgICAgICAgICAgICAvL30pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIC8vICAgIGFsZXJ0KCdBbiBlcnJvciBvY2N1cnJlZCwgcGxlYXNlIHRyeSBhZ2FpbicpCiAgICAgICAgICAgICAgICAvLyAgICBMb2dlci5SZWNlaXZlZChlcnIpOwogICAgICAgICAgICAgICAgLy8gICAgcmVzcG9uc2UucmVqZWN0KCdlcnJvciBpbiBsb2FkIGNhcnQgKHByb2R1Y3RDYXJ0U2VydmljZSAtIGxvYWRDYXJ0UHJvZHVjdHMpJyk7CiAgICAgICAgICAgICAgICAvL30pOwoKCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucHJvbWlzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNKc29uU3RyaW5nKHN0cikgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gSlNPTi5wYXJzZShzdHIpOwoKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VTZXJ2aWNlc0FzSlNPTihqc29uKXsKICAgICAgICAgICAgICAgIHNlcnZpY2VzX3Byb3BlcnRpZXMgPSBKU09OLnBhcnNlKEpTT04ucGFyc2UoanNvbikpOwogICAgICAgICAgICAgICAgdmFyIHJldmVyc2VQcm94eSA9IHNlcnZpY2VzX3Byb3BlcnRpZXNbJ3JldmVyc2UucHJveHknXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBob3N0S2V5ID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lOwogICAgICAgICAgICAgICAgdmFyIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sOwogICAgICAgICAgICAgICAgdmFyIHBvcnQgPSB3aW5kb3cubG9jYXRpb24ucG9ydDsKICAgICAgICAgICAgICAgIHZhciBnYXRld2F5T24gPSBzZXJ2aWNlc19wcm9wZXJ0aWVzWydhb3MuZ2F0ZXdheSddLnZhbHVlOwoKICAgICAgICAgICAgICAgIGlmKHNlcnZpY2VzX3Byb3BlcnRpZXNbJ3NpbmdsZS5tYWNoaW5lLmRlcGxveW1lbnQnXS52YWx1ZSAmJiAhZ2F0ZXdheU9uKXsKCiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldEtleShwcm90b2NvbCArICIvLyIgKyBob3N0S2V5ICsKICAgICAgICAgICAgICAgICAgICAgICAgKHJldmVyc2VQcm94eSA/ICIiIDogIjoiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ2NhdGFsb2cuc2VydmljZS51cmwucG9ydCddLnZhbHVlKSsgIi8iKTsKCiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldENhdGFsb2dLZXkocHJvdG9jb2wgKyAiLy8iICsgaG9zdEtleSArCiAgICAgICAgICAgICAgICAgICAgICAgIChyZXZlcnNlUHJveHkgPyAiIiA6ICI6IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlc19wcm9wZXJ0aWVzWydjYXRhbG9nLnNlcnZpY2UudXJsLnBvcnQnXS52YWx1ZSkgKyAiLyIgKyBzZXJ2aWNlc19wcm9wZXJ0aWVzWydjYXRhbG9nLnNlcnZpY2UudXJsLnN1ZmZpeCddLnZhbHVlICsgIi8iKTsKCiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldE9yZGVyS2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKwogICAgICAgICAgICAgICAgICAgICAgICAocmV2ZXJzZVByb3h5ID8gIiIgOiAiOiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXIuc2VydmljZS51cmwucG9ydCddLnZhbHVlKSArICIvIiArIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ29yZGVyLnNlcnZpY2UudXJsLnN1ZmZpeCddLnZhbHVlICsgIi8iKTsKCiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldFdzZGxQYXRoKHByb3RvY29sICsgIi8vIiArCiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RLZXkgKwogICAgICAgICAgICAgICAgICAgICAgICAocmV2ZXJzZVByb3h5ID8gIiIgOiAiOiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudC5zb2Fwc2VydmljZS51cmwucG9ydCddLnZhbHVlKSArICIvIiArCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ2FjY291bnQuc29hcHNlcnZpY2UudXJsLnN1ZmZpeCddLnZhbHVlICsgIi8iKTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJldmVyc2VQcm94eSAmJiAhZ2F0ZXdheU9uKXsKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0S2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiLyIpOwogICAgICAgICAgICAgICAgICAgIHNlcnZlci5zZXRDYXRhbG9nS2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiLyIgICsgc2VydmljZXNfcHJvcGVydGllc1snY2F0YWxvZy5zZXJ2aWNlLnVybC5zdWZmaXgnXS52YWx1ZSArICIvIik7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldE9yZGVyS2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiLyIgICsgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXIuc2VydmljZS51cmwuc3VmZml4J10udmFsdWUgKyAiLyIpOwogICAgICAgICAgICAgICAgICAgIHNlcnZlci5zZXRXc2RsUGF0aChwcm90b2NvbCArICIvLyIgKyBob3N0S2V5ICsgIi8iICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudC5zb2Fwc2VydmljZS51cmwuc3VmZml4J10udmFsdWUgKyAiLyIpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2F0ZXdheU9uKXsKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0S2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiOiIgKyBwb3J0ICsgICIvIik7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldENhdGFsb2dLZXkocHJvdG9jb2wgKyAiLy8iICsgaG9zdEtleSArICI6IiArIHBvcnQgKyAiLyIgICsgc2VydmljZXNfcHJvcGVydGllc1snY2F0YWxvZy5zZXJ2aWNlLnVybC5zdWZmaXgnXS52YWx1ZSArICIvIik7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldE9yZGVyS2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiOiIgKyBwb3J0ICsgIi8iICArIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ29yZGVyLnNlcnZpY2UudXJsLnN1ZmZpeCddLnZhbHVlICsgIi8iKTsKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0V3NkbFBhdGgocHJvdG9jb2wgKyAiLy8iICsgaG9zdEtleSArICI6IiArIHBvcnQgKyAiLyIgKwogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlc19wcm9wZXJ0aWVzWydhY2NvdW50LnNvYXBzZXJ2aWNlLnVybC5zdWZmaXgnXS52YWx1ZSArICIvIik7CiAgICAgICAgICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldEtleSgiaHR0cDovLyIgKyBzZXJ2aWNlc19wcm9wZXJ0aWVzWydjYXRhbG9nLnNlcnZpY2UudXJsLmhvc3QnXS52YWx1ZSArICI6IiArCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ2NhdGFsb2cuc2VydmljZS51cmwucG9ydCddLnZhbHVlICsgIi8iKTsKCiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldENhdGFsb2dLZXkoImh0dHA6Ly8iICsgc2VydmljZXNfcHJvcGVydGllc1snY2F0YWxvZy5zZXJ2aWNlLnVybC5ob3N0J10udmFsdWUgKyAiOiIgKwogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlc19wcm9wZXJ0aWVzWydjYXRhbG9nLnNlcnZpY2UudXJsLnBvcnQnXS52YWx1ZSArICIvIiArIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ2NhdGFsb2cuc2VydmljZS51cmwuc3VmZml4J10udmFsdWUgKyAiLyIpOwoKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0T3JkZXJLZXkoImh0dHA6Ly8iICsgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXIuc2VydmljZS51cmwuaG9zdCddLnZhbHVlICsgIjoiICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXIuc2VydmljZS51cmwucG9ydCddLnZhbHVlICsgIi8iICsgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXIuc2VydmljZS51cmwuc3VmZml4J10udmFsdWUgKyAiLyIpOwoKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0V3NkbFBhdGgoImh0dHA6Ly8iICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudC5zb2Fwc2VydmljZS51cmwuaG9zdCddLnZhbHVlICsgIjoiICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudC5zb2Fwc2VydmljZS51cmwucG9ydCddLnZhbHVlICsgIi8iICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudC5zb2Fwc2VydmljZS51cmwuc3VmZml4J10udmFsdWUgKyAiLyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwYXJzZVNlcnZpY2VzQXNUeHQodHh0KXsKICAgICAgICAgICAgICAgIHZhciBmaWxlVGV4dCA9IHR4dDsKICAgICAgICAgICAgICAgIHZhciByYXdGaWxlX3Jlc3BvbnNlVGV4dCA9IGZpbGVUZXh0OwogICAgICAgICAgICAgICAgZmlsZVRleHQgPSBmaWxlVGV4dC5zcGxpdCgnJyk7CiAgICAgICAgICAgICAgICB2YXIgX3BhcmFtID0gJyc7CiAgICAgICAgICAgICAgICB2YXIgX3ZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IHRydWU7CiAgICAgICAgICAgICAgICB2YXIgYXJyYXlBcGkgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBpbnZhbGlkQ2hhcnMgPSAnIyc7CiAgICAgICAgICAgICAgICBmaWxlVGV4dC5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhLmNoYXJDb2RlQXQoMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZFBhcmFtID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW52YWxpZENoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9wYXJhbS5pbmRleE9mKGludmFsaWRDaGFyc1tpXSkgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRQYXJhbSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRQYXJhbSAmJiBfcGFyYW0gIT0gJycgJiYgX3ZhbHVlICE9ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlBcGkucHVzaCgie1wiIiArIF9wYXJhbS5zcGxpdCgiLiIpLmpvaW4oIl8iKSArICJcIjpcIiIgKyBfdmFsdWUgKyAiXCJ9Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhcmFtID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJhbSArPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdmFsdWUgKz0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGFycmF5QXBpLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIganNvbk9iaiA9IEpTT04ucGFyc2UoYSk7CiAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1tPYmplY3Qua2V5cyhqc29uT2JqKV0gPSBqc29uT2JqW09iamVjdC5rZXlzKGpzb25PYmopXTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHZhciByZXZlcnNlUHJveHkgPSBzZXJ2aWNlc19wcm9wZXJ0aWVzWydyZXZlcnNlX3Byb3h5J10gPT09ICd0cnVlJzsKICAgICAgICAgICAgICAgIHZhciBob3N0S2V5ID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lOwogICAgICAgICAgICAgICAgdmFyIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sOwogICAgICAgICAgICAgICAgdmFyIHBvcnQgPSB3aW5kb3cubG9jYXRpb24ucG9ydDsKICAgICAgICAgICAgICAgIHZhciBnYXRld2F5T24gPSBzZXJ2aWNlc19wcm9wZXJ0aWVzWydhb3NfZ2F0ZXdheSddID09PSAndHJ1ZSc7CgogICAgICAgICAgICAgICAgaWYoc2VydmljZXNfcHJvcGVydGllc1snc2luZ2xlX21hY2hpbmVfZGVwbG95bWVudCddID09PSAndHJ1ZScgJiYgIWdhdGV3YXlPbil7CgogICAgICAgICAgICAgICAgICAgIHNlcnZlci5zZXRLZXkocHJvdG9jb2wgKyAiLy8iICsgaG9zdEtleSArCiAgICAgICAgICAgICAgICAgICAgICAgIChyZXZlcnNlUHJveHkgPyAiIiA6ICI6IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlc19wcm9wZXJ0aWVzWydjYXRhbG9nX3NlcnZpY2VfdXJsX3BvcnQnXSkrICIvIik7CgogICAgICAgICAgICAgICAgICAgIHNlcnZlci5zZXRDYXRhbG9nS2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKwogICAgICAgICAgICAgICAgICAgICAgICAocmV2ZXJzZVByb3h5ID8gIiIgOiAiOiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snY2F0YWxvZ19zZXJ2aWNlX3VybF9wb3J0J10pICsgIi8iICsgc2VydmljZXNfcHJvcGVydGllc1snY2F0YWxvZ19zZXJ2aWNlX3VybF9zdWZmaXgnXSArICIvIik7CgogICAgICAgICAgICAgICAgICAgIHNlcnZlci5zZXRPcmRlcktleShwcm90b2NvbCArICIvLyIgKyBob3N0S2V5ICsKICAgICAgICAgICAgICAgICAgICAgICAgKHJldmVyc2VQcm94eSA/ICIiIDogIjoiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ29yZGVyX3NlcnZpY2VfdXJsX3BvcnQnXSkgKyAiLyIgKyBzZXJ2aWNlc19wcm9wZXJ0aWVzWydvcmRlcl9zZXJ2aWNlX3VybF9zdWZmaXgnXSArICIvIik7CgogICAgICAgICAgICAgICAgICAgIHNlcnZlci5zZXRXc2RsUGF0aChwcm90b2NvbCArICIvLyIgKwogICAgICAgICAgICAgICAgICAgICAgICBob3N0S2V5ICsKICAgICAgICAgICAgICAgICAgICAgICAgKHJldmVyc2VQcm94eSA/ICIiIDogIjoiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ2FjY291bnRfc29hcHNlcnZpY2VfdXJsX3BvcnQnXSkgKyAiLyIgKwogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlc19wcm9wZXJ0aWVzWydhY2NvdW50X3NvYXBzZXJ2aWNlX3VybF9zdWZmaXgnXSArICIvIik7CgoKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJldmVyc2VQcm94eSAmJiAhZ2F0ZXdheU9uKXsKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0S2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiLyIpOwogICAgICAgICAgICAgICAgICAgIHNlcnZlci5zZXRDYXRhbG9nS2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiLyIgICsgc2VydmljZXNfcHJvcGVydGllc1snY2F0YWxvZ19zZXJ2aWNlX3VybF9zdWZmaXgnXSArICIvIik7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldE9yZGVyS2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiLyIgICsgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXJfc2VydmljZV91cmxfc3VmZml4J10gKyAiLyIpOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wV3NkbFBhdGggPSBwcm90b2NvbCArICIvLyIgKyBob3N0S2V5ICsgIi8iICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudF9zb2Fwc2VydmljZV91cmxfc3VmZml4J10gKyAiLyI7CgogICAgICAgICAgICAgICAgICAgIHNlcnZlci5zZXRXc2RsUGF0aCh0ZW1wV3NkbFBhdGgucmVwbGFjZSgvKFteOl1cLylcLysvZywgIiQxIikpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2F0ZXdheU9uKXsKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0S2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiOiIgKyBwb3J0ICsgICIvIik7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldENhdGFsb2dLZXkocHJvdG9jb2wgKyAiLy8iICsgaG9zdEtleSArICI6IiArIHBvcnQgKyAiLyIgICsgc2VydmljZXNfcHJvcGVydGllc1snY2F0YWxvZ19zZXJ2aWNlX3VybF9zdWZmaXgnXSArICIvIik7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldE9yZGVyS2V5KHByb3RvY29sICsgIi8vIiArIGhvc3RLZXkgKyAiOiIgKyBwb3J0ICsgIi8iICArIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ29yZGVyX3NlcnZpY2VfdXJsX3N1ZmZpeCddICsgIi8iKTsKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0V3NkbFBhdGgocHJvdG9jb2wgKyAiLy8iICsgaG9zdEtleSArICI6IiArIHBvcnQgKyAiLyIgKwogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlc19wcm9wZXJ0aWVzWydhY2NvdW50X3NvYXBzZXJ2aWNlX3VybF9zdWZmaXgnXSArICIvIik7CiAgICAgICAgICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldEtleSgiaHR0cDovLyIgKyBzZXJ2aWNlc19wcm9wZXJ0aWVzWydjYXRhbG9nX3NlcnZpY2VfdXJsX2hvc3QnXSArICI6IiArCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ2NhdGFsb2dfc2VydmljZV91cmxfcG9ydCddICsgIi8iKTsKCiAgICAgICAgICAgICAgICAgICAgc2VydmVyLnNldENhdGFsb2dLZXkoImh0dHA6Ly8iICsgc2VydmljZXNfcHJvcGVydGllc1snY2F0YWxvZ19zZXJ2aWNlX3VybF9ob3N0J10gKyAiOiIgKwogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlc19wcm9wZXJ0aWVzWydjYXRhbG9nX3NlcnZpY2VfdXJsX3BvcnQnXSArICIvIiArIHNlcnZpY2VzX3Byb3BlcnRpZXNbJ2NhdGFsb2dfc2VydmljZV91cmxfc3VmZml4J10gKyAiLyIpOwoKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0T3JkZXJLZXkoImh0dHA6Ly8iICsgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXJfc2VydmljZV91cmxfaG9zdCddICsgIjoiICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXJfc2VydmljZV91cmxfcG9ydCddICsgIi8iICsgc2VydmljZXNfcHJvcGVydGllc1snb3JkZXJfc2VydmljZV91cmxfc3VmZml4J10gKyAiLyIpOwoKICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuc2V0V3NkbFBhdGgoImh0dHA6Ly8iICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudF9zb2Fwc2VydmljZV91cmxfaG9zdCddICsgIjoiICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudF9zb2Fwc2VydmljZV91cmxfcG9ydCddICsgIi8iICsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXNfcHJvcGVydGllc1snYWNjb3VudF9zb2Fwc2VydmljZV91cmxfc3VmZml4J10gKyAiLyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgoKCiAgICAgICAgICAgIGZ1bmN0aW9uIG52SGFuZGxlcigpIHsKCgogICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgIGlmICh1c2VyU2VydmljZS5udl9zbG93UGFnZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgIHZhciBjYWxscyA9IDY7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGNhbGxzOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RlOwogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGluZGV4KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlID0gNTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlID0gNDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZSA9IDUzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSA0OTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlID0gNDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSA0MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cubnZIYW5kbGVyKGNvZGUpLAogICAgICAgICAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoKQogICAgICAgICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChlcnIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2RlZmVyLnJlc29sdmUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICsgMSA+PSBjYWxscykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgZnVuY3Rpb24gbnZfbG9hZFVudXNlU2NyaXB0cygpewogICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKCiAgICAgICAgICAgICAgICBpZih1c2VyU2VydmljZS5udl9zbG93UGFnZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICJzY3JpcHRzL252X2ZpbGVzL2FuZ3VsYXItY29va2llcy1mb3ItbnYuanMiLAogICAgICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAic2NyaXB0cy9udl9maWxlcy9nZW5lcmF0ZS1zb3VyY2VtYXAtZm9yLW52LmpzIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICJzY3JpcHRzL252X2ZpbGVzL3JvdXRlLWZvci1udi5qcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogInNjcmlwdHMvbnZfZmlsZXMvU291cmNlTWFwcGVyLWZvci1udi5qcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUobnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChlcnIpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChudWxsKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICB9OwoKICAgICAgICB9XSk7Cn0pOwoKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzEzLzIwMTUuCiAqLwpkZWZpbmUoJ2FwcC9zZXJ2aWNlcy9kZWFsU2VydmljZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLnNlcnZpY2UoJ2RlYWxTZXJ2aWNlJywgWyckaHR0cCcsICckcScsCiAgICAgICAgJyR0aW1lb3V0JywgJ3VzZXJTZXJ2aWNlJywKICAgICAgICBmdW5jdGlvbiAoJGh0dHAsICRxLCAkdGltZW91dCwgdXNlclNlcnZpY2UpIHsKICAgICAgICAvLyBSZXR1cm4gcHVibGljIEFQSS4KICAgICAgICByZXR1cm4gKHsKICAgICAgICAgICAgZ2V0RGVhbHM6IGdldERlYWxzLAogICAgICAgICAgICBnZXREZWFsT2ZUaGVEYXk6IGdldERlYWxPZlRoZURheQogICAgICAgIH0pOwoKICAgICAgICB2YXIgZGVhbHM7CiAgICAgICAgdmFyIGRlYWxPZlRoZURheTsKCiAgICAgICAgZnVuY3Rpb24gZ2V0RGVhbHMoKSB7CiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgIGlmIChkZWFscykgewogICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkZWFscyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICB1cmw6IHNlcnZlci5jYXRhbG9nLmdldERlYWxzKCksCiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlcykKICAgICAgICAgICAgICAgICAgICBkZWFscyA9IHJlczsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlcykKICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKGVycikKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QobnVsbCkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIGdldERlYWxPZlRoZURheSgpIHsKCiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgIGlmIChkZWFsT2ZUaGVEYXkgJiYgIXVzZXJTZXJ2aWNlLm52X3Nsb3dQYWdlKCkpIHsKICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGVhbE9mVGhlRGF5KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBjb3VudGVySHR0cENhbGxzID0gMDsKICAgICAgICAgICAgICAgIHZhciB0aW1lcyA9IHVzZXJTZXJ2aWNlLm52X3Nsb3dQYWdlKCkgPyAzIDogMTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGltZXM7IGkrKykgewogICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmNhdGFsb2cuZ2V0RGVhbE9mVGhlRGF5KCksCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhbE9mVGhlRGF5ID0gcmVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY291bnRlckh0dHBDYWxscyArIDEgPT0gdGltZXMpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVySHR0cENhbGxzKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKGVycikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChudWxsKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LCA2MDAgKiAoaSArIDEpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICB9CiAgICB9XSk7Cn0pOwovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTAvMTgvMjAxNS4KICovCmRlZmluZSgnYXBwL3NlcnZpY2VzL3Jlc3BvbnNlSGFuZGxlU2VydmljZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLnNlcnZpY2UoJ3Jlc0hhbmRsZVNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCRodHRwLCAkcSwgJHRpbWVvdXQpIHsKCiAgICAgICAgcmV0dXJuKHsKCiAgICAgICAgICAgIGhhbmRsZVN1Y2Nlc3MgOiBmdW5jdGlvbiAoIHJlc3BvbnNlICkgewogICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UuZGF0YSkKICAgICAgICAgICAgICAgIHJldHVybiggcmVzcG9uc2UuZGF0YSApOwogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIGhhbmRsZUVycm9yOiBmdW5jdGlvbiAoIHJlc3BvbnNlICkgewogICAgICAgICAgICAgICAgaWYgKCAhIGFuZ3VsYXIuaXNPYmplY3QoIHJlc3BvbnNlLmRhdGEgKSB8fCAhIHJlc3BvbnNlLmRhdGEubWVzc2FnZSApIHsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4oIHJlc3BvbnNlIC8qJHEucmVqZWN0KCAiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC4iICkgKi8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UuZGF0YS5tZXNzYWdlKQogICAgICAgICAgICAgICAgcmV0dXJuKCAkcS5yZWplY3QoIHJlc3BvbnNlLmRhdGEubWVzc2FnZSApICk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBnZXRBbGxDb3VudHJpZXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9ICRodHRwKHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmFjY291bnQuZ2V0QWxsQ291bnRyaWVzKCksCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiggcmVxdWVzdC50aGVuKCB0aGlzLmhhbmRsZVN1Y2Nlc3MsIHRoaXMuaGFuZGxlRXJyb3IgKSApOwogICAgICAgICAgICB9LAoKICAgICAgICB9KTsKCgoKCiAgICAgICAgLy8gSSB0cmFuc2Zvcm0gdGhlIHN1Y2Nlc3NmdWwgcmVzcG9uc2UsIHVud3JhcHBpbmcgdGhlIGFwcGxpY2F0aW9uIGRhdGEKICAgICAgICAvLyBmcm9tIHRoZSBBUEkgcmVzcG9uc2UgcGF5bG9hZC4KCiAgICB9XSk7Cn0pOwovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxOC8wMi8yMDE2LgogKi8KCgpkZWZpbmUoJ2FwcC9zZXJ2aWNlcy9zdXBwb3J0U2VydmljZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLnNlcnZpY2UoJ3N1cHBvcnRTZXJ2aWNlJywgWyckZmlsdGVyJywgJyRxJywgJyRodHRwJywgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCRmaWx0ZXIsICRxLCAkaHR0cCwgJHRpbWVvdXQpIHsKCgogICAgICAgIHJldHVybiB7CgogICAgICAgICAgICBzZW5kU3VwcG9ydEVtYWlsOiBmdW5jdGlvbiAoc3VwcG9ydE1vZGVsKSB7CgogICAgICAgICAgICAgICAgdmFyIHBhcmFtc1RvUGFzcyA9IHsKICAgICAgICAgICAgICAgICAgICAiY2F0ZWdvcnlJZCI6IHN1cHBvcnRNb2RlbC5jYXRlZ29yeS5jYXRlZ29yeUlkIHx8IDAsCiAgICAgICAgICAgICAgICAgICAgImVtYWlsIjogc3VwcG9ydE1vZGVsLmVtYWlsLAogICAgICAgICAgICAgICAgICAgICJwcm9kdWN0SWQiOiBzdXBwb3J0TW9kZWwucHJvZHVjdC5wcm9kdWN0SWQgfHwgMCwKICAgICAgICAgICAgICAgICAgICAidGV4dCI6IHN1cHBvcnRNb2RlbC5zdWJqZWN0LAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCkKICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICRodHRwKHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgICAgICAgICB1cmw6IHNlcnZlci5jYXRhbG9nLnNlbmRTdXBwb3J0RW1haWwoKSwKICAgICAgICAgICAgICAgICAgICBkYXRhOiBwYXJhbXNUb1Bhc3MsCiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzKQogICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlcyk7CiAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoX2VycikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzZW5kU3VwcG9ydEVtYWlsKCkgcmVqZWN0ZWQhICA9PT09PT0gIiArIF9lcnIpCiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChfZXJyKTsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgInN1Y2Nlc3MiOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgInJlYXNvbiI6ICRmaWx0ZXIoJ3RyYW5zbGF0ZScpKCdQcm9ibGVtX3NlbmRpbmdfbWFpbF9wbGVhc2VfdHJ5X2xhdGVyJyksCiAgICAgICAgICAgICAgICAgICAgICAgICJyZXR1cm5Db2RlIjogMQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKCiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgIH1dKTsKfSk7CgoKZGVmaW5lKCdhcHAvc2VydmljZXMvc21vb3RoU2Nyb2xsJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChzZXJ2aWNlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgc2VydmljZXMuc2VydmljZSgnc21vb3RoU2Nyb2xsJywgW2Z1bmN0aW9uKCl7CgogICAgICAgIHRoaXMuc2Nyb2xsVG8gPSBmdW5jdGlvbihlSUQpIHsKCiAgICAgICAgICAgIHZhciBzdGFydFkgPSBjdXJyZW50WVBvc2l0aW9uKCk7CiAgICAgICAgICAgIHZhciBzdG9wWSA9IGVsbVlQb3NpdGlvbihlSUQpOwogICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBzdG9wWSA+IHN0YXJ0WSA/IHN0b3BZIC0gc3RhcnRZIDogc3RhcnRZIC0gc3RvcFk7CiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IDEwMCkgewogICAgICAgICAgICAgICAgc2Nyb2xsVG8oMCwgc3RvcFkpOyByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHNwZWVkID0gTWF0aC5yb3VuZChkaXN0YW5jZSAvIDEwMCk7CiAgICAgICAgICAgIGlmIChzcGVlZCA+PSAyMCkgc3BlZWQgPSAyMDsKICAgICAgICAgICAgdmFyIHN0ZXAgPSBNYXRoLnJvdW5kKGRpc3RhbmNlIC8gMjUpOwogICAgICAgICAgICB2YXIgbGVhcFkgPSBzdG9wWSA+IHN0YXJ0WSA/IHN0YXJ0WSArIHN0ZXAgOiBzdGFydFkgLSBzdGVwOwogICAgICAgICAgICB2YXIgdGltZXIgPSAwOwogICAgICAgICAgICBpZiAoc3RvcFkgPiBzdGFydFkpIHsKICAgICAgICAgICAgICAgIGZvciAoIHZhciBpPXN0YXJ0WTsgaTxzdG9wWTsgaSs9c3RlcCApIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCJ3aW5kb3cuc2Nyb2xsVG8oMCwgIitsZWFwWSsiKSIsIHRpbWVyICogc3BlZWQpOwogICAgICAgICAgICAgICAgICAgIGxlYXBZICs9IHN0ZXA7IGlmIChsZWFwWSA+IHN0b3BZKSBsZWFwWSA9IHN0b3BZOyB0aW1lcisrOwogICAgICAgICAgICAgICAgfSByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yICggdmFyIGk9c3RhcnRZOyBpPnN0b3BZOyBpLT1zdGVwICkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgid2luZG93LnNjcm9sbFRvKDAsICIrbGVhcFkrIikiLCB0aW1lciAqIHNwZWVkKTsKICAgICAgICAgICAgICAgIGxlYXBZIC09IHN0ZXA7IGlmIChsZWFwWSA8IHN0b3BZKSBsZWFwWSA9IHN0b3BZOyB0aW1lcisrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjdXJyZW50WVBvc2l0aW9uKCkgewogICAgICAgICAgICAgICAgLy8gRmlyZWZveCwgQ2hyb21lLCBPcGVyYSwgU2FmYXJpCiAgICAgICAgICAgICAgICBpZiAoc2VsZi5wYWdlWU9mZnNldCkgcmV0dXJuIHNlbGYucGFnZVlPZmZzZXQ7CiAgICAgICAgICAgICAgICAvLyBJbnRlcm5ldCBFeHBsb3JlciA2IC0gc3RhbmRhcmRzIG1vZGUKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIC8vIEludGVybmV0IEV4cGxvcmVyIDYsIDcgYW5kIDgKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkgcmV0dXJuIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGVsbVlQb3NpdGlvbihlSUQpIHsKICAgICAgICAgICAgICAgIHZhciBlbG0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlSUQpOwogICAgICAgICAgICAgICAgdmFyIHkgPSBlbG0ub2Zmc2V0VG9wOwogICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBlbG07CiAgICAgICAgICAgICAgICB3aGlsZSAobm9kZS5vZmZzZXRQYXJlbnQgJiYgbm9kZS5vZmZzZXRQYXJlbnQgIT0gZG9jdW1lbnQuYm9keSkgewogICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLm9mZnNldFBhcmVudDsKICAgICAgICAgICAgICAgICAgICB5ICs9IG5vZGUub2Zmc2V0VG9wOwogICAgICAgICAgICAgICAgfSByZXR1cm4geTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9XSkKfSk7CgoKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDMvMTUvMjAxNy4KICovCgpkZWZpbmUoJ2FwcC9zZXJ2aWNlcy9jb21tb25TZXJ2aWNlcycsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLnNlcnZpY2UoJ01vZGFsU2VydmljZScsIFsKICAgICAgICBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB2YXIgY2FydCA9IG51bGw7CiAgICAgICAgICAgIHZhciBtb2RhbHMgPSBbXTsgLy8gYXJyYXkgb2YgbW9kYWxzIG9uIHRoZSBwYWdlCiAgICAgICAgICAgIHZhciBzZXJ2aWNlID0ge307CiAgICAgICAgICAgIHJldHVybiAoewogICAgICAgICAgICAgICAgQWRkIDogQWRkLAogICAgICAgICAgICAgICAgUmVtb3ZlIDogUmVtb3ZlLAogICAgICAgICAgICAgICAgT3BlbiA6IE9wZW4sCiAgICAgICAgICAgICAgICBDbG9zZSA6IENsb3NlLAogICAgICAgICAgICAgICAgU2V0QnRuc0NiIDogU2V0QnRuc0NiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIEFkZChtb2RhbCkgewogICAgICAgICAgICAgICAgLy8gYWRkIG1vZGFsIHRvIGFycmF5IG9mIGFjdGl2ZSBtb2RhbHMKICAgICAgICAgICAgICAgIG1vZGFscy5wdXNoKG1vZGFsKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gUmVtb3ZlKGlkKSB7CiAgICAgICAgICAgICAgICAvLyByZW1vdmUgbW9kYWwgZnJvbSBhcnJheSBvZiBhY3RpdmUgbW9kYWxzCiAgICAgICAgICAgICAgICB2YXIgbW9kYWxUb1JlbW92ZSA9IF8uZmluZFdoZXJlKG1vZGFscywgeyBpZDogaWQgfSk7CiAgICAgICAgICAgICAgICBtb2RhbHMgPSBfLndpdGhvdXQobW9kYWxzLCBtb2RhbFRvUmVtb3ZlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gT3BlbihpZCkgewogICAgICAgICAgICAgICAgLy8gb3BlbiBtb2RhbCBzcGVjaWZpZWQgYnkgaWQKICAgICAgICAgICAgICAgIHZhciBtb2RhbCA9IF8uZmluZFdoZXJlKG1vZGFscywgeyBpZDogaWQgfSk7CiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIENsb3NlKGlkKSB7CiAgICAgICAgICAgICAgICAvLyBjbG9zZSBtb2RhbCBzcGVjaWZpZWQgYnkgaWQKICAgICAgICAgICAgICAgIHZhciBtb2RhbCA9IF8uZmluZFdoZXJlKG1vZGFscywgeyBpZDogaWQgfSk7CiAgICAgICAgICAgICAgICBtb2RhbC5jbG9zZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBTZXRCdG5zQ2IoaWQsIGNicykgewogICAgICAgICAgICAgICAgLy8gY2xvc2UgbW9kYWwgc3BlY2lmaWVkIGJ5IGlkCiAgICAgICAgICAgICAgICB2YXIgbW9kYWwgPSBfLmZpbmRXaGVyZShtb2RhbHMsIHsgaWQ6IGlkIH0pOwogICAgICAgICAgICAgICAgbW9kYWwuc2V0QnRuc0NiKGNicyk7CiAgICAgICAgICAgIH0KCgogICAgICAgIH1dKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xMy8yMDE1LgogKi8KCgpkZWZpbmUoJ2FwcC9zZXJ2aWNlcy9pbmRleCcsWwogICAgJy4vcHJvZHVjdHNDYXJ0U2VydmljZScsCiAgICAnLi9wcm9kdWN0U2VydmljZScsCiAgICAnLi9jYXRlZ29yeVNlcnZpY2UnLAogICAgJy4vZGVhbFNlcnZpY2UnLAogICAgJy4vcmVzcG9uc2VIYW5kbGVTZXJ2aWNlJywKICAgICcuL3N1cHBvcnRTZXJ2aWNlJywKICAgICcuL3Ntb290aFNjcm9sbCcsCiAgICAnLi9jb21tb25TZXJ2aWNlcyddLCBmdW5jdGlvbigpIHt9KTsKIC8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDEwLzAxLzIwMTYuCiAqLwoKZGVmaW5lKCdhcHAvYWNjb3VudC9zZXJ2aWNlcy9tb2R1bGUnLFsnYW5ndWxhciddLCBmdW5jdGlvbiAoYW5ndWxhcikgewogICAgJ3VzZSBzdHJpY3QnOwogICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKCdhb3MuYWNjb3VudC5zZXJ2aWNlcycsIFtdKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDI4LzAxLzIwMTYuCiAqLwoKZGVmaW5lKCdhcHAvYWNjb3VudC9zZXJ2aWNlcy9hY2NvdW50U2VydmljZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoc2VydmljZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHNlcnZpY2VzLnNlcnZpY2UoJ2FjY291bnRTZXJ2aWNlJywgWyckcm9vdFNjb3BlJywgJyRxJywgJyRmaWx0ZXInLCAnJGh0dHAnLAoKICAgICAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHEsICRmaWx0ZXIsICRodHRwKSB7CgogICAgICAgICAgICByZXR1cm4gewoKICAgICAgICAgICAgICAgIGdldEFjY291bnRPcmRlcjogZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAkaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLmFjY291bnQuZ2V0T3JkZXJzKHVzZXIucmVzcG9uc2UudXNlcklkKSwKICAgICAgICAgICAgICAgICAgICB9KS4KICAgICAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uIChyZXMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmRlcnNPYmogPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGRhdGEuT3JkZXJMaW5lcywgZnVuY3Rpb24ob2JqKXsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcmRlcnNPYmpbb2JqLk9yZGVyTnVtYmVyXSA9PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnNPYmpbb2JqLk9yZGVyTnVtYmVyXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yZGVyRGF0ZSI6IG9iai5PcmRlckRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwcm9kdWN0cyI6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3JkZXJUaW1lIjogb2JqLm9yZGVyVGltZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnNPYmpbb2JqLk9yZGVyTnVtYmVyXS5wcm9kdWN0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvZHVjdEltYWdlVXJsIjogb2JqLlByb2R1Y3RJbWFnZVVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvZHVjdE5hbWUiOiBvYmouUHJvZHVjdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlByb2R1Y3RDb2xvckNvZGUiOiBvYmouUHJvZHVjdENvbG9yQ29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvZHVjdENvbG9yTmFtZSI6IG9iai5Qcm9kdWN0Q29sb3JOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcmljZVBlclVuaXQiOiBvYmouUHJpY2VQZXJVbml0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJRdWFudGl0eSI6IG9iai5RdWFudGl0eQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVycyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGluZGV4IGluIE9iamVjdC5rZXlzKG9yZGVyc09iaikpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBPYmplY3Qua2V5cyhvcmRlcnNPYmopW2luZGV4XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmRlciA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlck51bWJlcjogbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRhdGU6IG9yZGVyc09ialtuYW1lXS5vcmRlckRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHM6IG9yZGVyc09ialtuYW1lXS5wcm9kdWN0cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlclRpbWU6IG5ldyBEYXRlKG9yZGVyc09ialtuYW1lXS5vcmRlclRpbWUpLnRvTG9jYWxlVGltZVN0cmluZygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcnMucHVzaChvcmRlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKG9yZGVycyk7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUob3JkZXJzKQogICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGVycikKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBnZXRBY2NvdW50RGV0YWlsczogZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBzZXJ2ZXIuYWNjb3VudC5nZXRBY2NvdW50QnlJZF9uZXcoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKCiAgICAgICAgICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignL215QWNjb3VudCcpICE9IC0xICYmIHVzZXIgPT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLm9yaWdpbik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKCiAgICAgICAgICAgICAgICAgICAgJC5zb2FwKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBwYXJhbXMucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VVUkw6IHNlcnZlci5uYW1lc3BhY2VVUkwsCiAgICAgICAgICAgICAgICAgICAgICAgIFNPQVBBY3Rpb246IHNlcnZlci5uYW1lc3BhY2VVUkwgKyBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IHVzZXIucmVzcG9uc2UudXNlcklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0VG9rZW46ICJCYXNpYyAiK3VzZXIucmVzcG9uc2UudF9hdXRob3JpemF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChzb2FwUmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHNvYXBSZXNwb25zZS50b0pTT04ocGFyYW1zLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5BY2NvdW50UmVzcG9uc2UgJiYgcmVzcG9uc2UuQWNjb3VudFJlc3BvbnNlLm1vYmlsZVBob25lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuQWNjb3VudFJlc3BvbnNlLm1vYmlsZVBob25lID0gcmVzcG9uc2UuQWNjb3VudFJlc3BvbnNlLm1vYmlsZVBob25lICsgIiI7IC8vd2FybmluZzogdGhpcyBmaWVsZCBjYW4gYmUgYSBpbnRlZ2VyLCBtdXN0IGJlIGNvbnZlcnRlZCB0byBzdHJpbmcvCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLkFjY291bnRSZXNwb25zZS5zdGF0ZVByb3ZpbmNlLmxlbmd0aCA+IDEwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuQWNjb3VudFJlc3BvbnNlLnN0YXRlUHJvdmluY2UgPSByZXNwb25zZS5BY2NvdW50UmVzcG9uc2Uuc3RhdGVQcm92aW5jZS5zdWJzdHJpbmcoMCwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlLkFjY291bnRSZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoIlJlcXVlc3QgZmFpbGVkISAoZ2V0QWNjb3VudERldGFpbHMpIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGdldFNoaXBwaW5nRGV0YWlsczogZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBzZXJ2ZXIuYWNjb3VudC5nZXRBZGRyZXNzZXNCeUFjY291bnRJZCgpOwogICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKCiAgICAgICAgICAgICAgICAgICAgJC5zb2FwKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBwYXJhbXMucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VVUkw6IHNlcnZlci5uYW1lc3BhY2VVUkwsCiAgICAgICAgICAgICAgICAgICAgICAgIFNPQVBBY3Rpb246IHNlcnZlci5uYW1lc3BhY2VVUkwgKyBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IHVzZXIucmVzcG9uc2UudXNlcklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0VG9rZW46ICJCYXNpYyAiK3VzZXIucmVzcG9uc2UudF9hdXRob3JpemF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoc29hcFJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBzb2FwUmVzcG9uc2UudG9KU09OKHBhcmFtcy5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoIlJlcXVlc3QgZmFpbGVkISAoZ2V0U2hpcHBpbmdEZXRhaWxzKSIpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVMb2dnaW5nOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBnZXRBY2NvdW50UGF5bWVudFByZWZlcmVuY2VzOiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5hY2NvdW50LmdldEFjY291bnRQYXltZW50UHJlZmVyZW5jZXMoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKCiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigxMCk7CgogICAgICAgICAgICAgICAgICAgICQuc29hcCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcGFyYW1zLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlVVJMOiBzZXJ2ZXIubmFtZXNwYWNlVVJMLAogICAgICAgICAgICAgICAgICAgICAgICBTT0FQQWN0aW9uOiBzZXJ2ZXIubmFtZXNwYWNlVVJMICsgcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiB1c2VyLnJlc3BvbnNlLnVzZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NFRva2VuOiAiQmFzaWMgIiskcm9vdFNjb3BlLnVzZXJDb29raWUucmVzcG9uc2UudF9hdXRob3JpemF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoc29hcFJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBzb2FwUmVzcG9uc2UudG9KU09OKHBhcmFtcy5yZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hc3RlckNyZWRpdCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FmZVBheSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTUNhcmQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgU1BheTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5wcmVmZXJlbmNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucHJlZmVyZW5jZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnBheW1lbnRNZXRob2QgKyAiIiA9PSAiMjAiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1DYXJkID0gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5wYXltZW50TWV0aG9kICsgIiIgPT0gIjEwIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUGF5ID0gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5sZW5ndGggJiYgcmVzcG9uc2UubGVuZ3RoID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTUNhcmQgPSByZXNwb25zZVswXS5wYXltZW50TWV0aG9kICsgIiIgPT0gIjIwIiA/IHJlc3BvbnNlWzBdIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlWzFdLnBheW1lbnRNZXRob2QgKyAiIiA9PSAiMjAiID8gcmVzcG9uc2VbMV0gOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUGF5ID0gcmVzcG9uc2VbMF0ucGF5bWVudE1ldGhvZCArICIiID09ICIxMCIgPyByZXNwb25zZVswXSA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVsxXS5wYXltZW50TWV0aG9kICsgIiIgPT0gIjEwIiA/IHJlc3BvbnNlWzFdIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1DYXJkICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFzdGVyQ3JlZGl0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImlkIjogTUNhcmQucHJlZmVyZW5jZUlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNhcmROdW1iZXIiOiBNQ2FyZC5jYXJkTnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImN2dk51bWJlciI6IE1DYXJkLmN2dk51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJleHBpcmF0aW9uRGF0ZSI6IE1DYXJkLmV4cGlyYXRpb25EYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBheW1lbnRNZXRob2QiOiBNQ2FyZC5wYXltZW50TWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImN1c3RvbWVybmFtZSI6IE1DYXJkLmN1c3RvbWVyTmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTUGF5ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZVBheSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpZCI6IFNQYXkucHJlZmVyZW5jZUlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNhZmVwYXlVc2VybmFtZSI6IFNQYXkuc2FmZVBheVVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBheW1lbnRNZXRob2QiOiBTUGF5LnBheW1lbnRNZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2FmZXBheVBhc3N3b3JkIjogU1BheS5zYWZlUGF5UGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXN0ZXJDcmVkaXQgJiYgbWFzdGVyQ3JlZGl0LmV4cGlyYXRpb25EYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gcGFyc2VJbnQoKG1hc3RlckNyZWRpdC5leHBpcmF0aW9uRGF0ZSArICIiKS5zdWJzdHJpbmcoMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gcGFyc2VJbnQoKG1hc3RlckNyZWRpdC5leHBpcmF0aW9uRGF0ZSArICIiKS5zdWJzdHJpbmcoMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZS5nZXRGdWxsWWVhcigpID09IHllYXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TW9udGggPiBtb250aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNb250aCA+IG1vbnRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgkZmlsdGVyKCd0cmFuc2xhdGUnKSgnRXhwaXJhdGlvbkNhcnQnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFzdGVyQ3JlZGl0LmNhcnRFeHBpcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbWFzdGVyQ3JlZGl0LmV4cGlyYXRpb25EYXRlID0gKGN1cnJlbnRNb250aCA8IDEwID8gIjAiICsgY3VycmVudE1vbnRoIDogY3VycmVudE1vbnRoKSArICIiICsgeWVhcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHttYXN0ZXJDcmVkaXQ6IG1hc3RlckNyZWRpdCwgc2FmZVBheTogc2FmZVBheX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSh7bWFzdGVyQ3JlZGl0OiBtYXN0ZXJDcmVkaXQsIHNhZmVQYXk6IHNhZmVQYXl9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdCgiUmVxdWVzdCBmYWlsZWQhIChnZXRBY2NvdW50UGF5bWVudFByZWZlcmVuY2VzKSIpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVMb2dnaW5nOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBkZWxldGVBY2NvdW50OiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VydmVyLmFjY291bnQuZGVsZXRlQWNjb3VudCgpOwogICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwoKICAgICAgICAgICAgICAgICAgICAkLnNvYXAoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVVSTDogc2VydmVyLm5hbWVzcGFjZVVSTCwKICAgICAgICAgICAgICAgICAgICAgICAgU09BUEFjdGlvbjogc2VydmVyLm5hbWVzcGFjZVVSTCArIHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXNlci5yZXNwb25zZS51c2VySWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlNjRUb2tlbjogIkJhc2ljICIrdXNlci5yZXNwb25zZS50X2F1dGhvcml6YXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChzb2FwUmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHNvYXBSZXNwb25zZS50b0pTT04ocGFyYW1zLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdCgiUmVxdWVzdCBkZWxldGVBY2NvdW50IGZhaWxlZCEgIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGNoYW5nZVVzZXJQYXNzd29yZDogZnVuY3Rpb24gKGFjY291bnRJZCwgcGFzc3dvcmRzKSB7CgogICAgICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhc3N3b3Jkcy5uZXcgPT0gJycgfHwgcGFzc3dvcmRzLm9sZCA9PSAnJyB8fCBwYXNzd29yZHMuY29uZmlybV9uZXcgPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSh7c3VjY2VzczogJ3RydWUnfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhwZWN0VG9SZWNlaXZlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBhY2NvdW50SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXNzd29yZDogcGFzc3dvcmRzLm5ldywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFBhc3N3b3JkOiBwYXNzd29yZHMub2xkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0VG9rZW46ICJCYXNpYyAiKyRyb290U2NvcGUudXNlckNvb2tpZS5yZXNwb25zZS50X2F1dGhvcml6YXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5hY2NvdW50LmNoYW5nZVBhc3N3b3JkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQuc29hcCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlVVJMOiBzZXJ2ZXIubmFtZXNwYWNlVVJMLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgU09BUEFjdGlvbjogc2VydmVyLm5hbWVzcGFjZVVSTCArIHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBleHBlY3RUb1JlY2VpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoc29hcFJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXMucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UuU3RhdHVzTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdCgiUmVxdWVzdCBmYWlsZWQhICIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBhY2NvdW50VXBkYXRlOiBmdW5jdGlvbiAoYWNjb3VudERldGFpbHMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpOwogICAgICAgICAgICAgICAgICAgIHZhciBleHBlY3RUb1JlY2VpdmUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBhY2NvdW50RGV0YWlscy5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBhY2NvdW50RGV0YWlscy5maXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogYWNjb3VudERldGFpbHMuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnlJZDogYWNjb3VudERldGFpbHMuY291bnRyeUlkLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZVByb3ZpbmNlOiBhY2NvdW50RGV0YWlscy5zdGF0ZVByb3ZpbmNlLAogICAgICAgICAgICAgICAgICAgICAgICBjaXR5TmFtZTogYWNjb3VudERldGFpbHMuY2l0eU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGFjY291bnREZXRhaWxzLmhvbWVBZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgICB6aXBjb2RlOiBhY2NvdW50RGV0YWlscy56aXBjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogYWNjb3VudERldGFpbHMubW9iaWxlUGhvbmUsCiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBhY2NvdW50RGV0YWlscy5lbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFR5cGU6IGFjY291bnREZXRhaWxzLmFjY291bnRUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICBhbGxvd09mZmVyc1Byb21vdGlvbjogYWNjb3VudERldGFpbHMuYWxsb3dPZmZlcnNQcm9tb3Rpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NFRva2VuOiAiQmFzaWMgIiskcm9vdFNjb3BlLnVzZXJDb29raWUucmVzcG9uc2UudF9hdXRob3JpemF0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBzZXJ2ZXIuYWNjb3VudC5hY2NvdW50VXBkYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZXIuUGFyYW1zKGV4cGVjdFRvUmVjZWl2ZSwgcGFyYW1zLm1ldGhvZCk7CgogICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKCiAgICAgICAgICAgICAgICAgICAgJC5zb2FwKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBwYXJhbXMucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VVUkw6IHNlcnZlci5uYW1lc3BhY2VVUkwsCiAgICAgICAgICAgICAgICAgICAgICAgIFNPQVBBY3Rpb246IHNlcnZlci5uYW1lc3BhY2VVUkwgKyBwYXJhbXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBleHBlY3RUb1JlY2VpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChzb2FwUmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHNvYXBSZXNwb25zZS50b0pTT04ocGFyYW1zLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlLlN0YXR1c01lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KCJSZXF1ZXN0IGZhaWxlZCEgIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGFkZE1hc3RlckNyZWRpdE1ldGhvZDogZnVuY3Rpb24gKGNhcmQpIHsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICRyb290U2NvcGUudXNlckNvb2tpZTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4cGVjdFRvUmVjZWl2ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcjogIjQ4ODYiICsgY2FyZC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlOiBjYXJkLmV4cGlyYXRpb25EYXRlLm1vbnRoICsgY2FyZC5leHBpcmF0aW9uRGF0ZS55ZWFyLAogICAgICAgICAgICAgICAgICAgICAgICBjdnZOdW1iZXI6IGNhcmQuY3Z2LAogICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lck5hbWU6IGNhcmQubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiB1c2VyLnJlc3BvbnNlLnVzZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0VG9rZW46ICJCYXNpYyAiK3VzZXIucmVzcG9uc2UudF9hdXRob3JpemF0aW9uCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VydmVyLmFjY291bnQuYWRkTWFzdGVyQ3JlZGl0TWV0aG9kKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZXIuUGFyYW1zKGV4cGVjdFRvUmVjZWl2ZSwgcGFyYW1zLm1ldGhvZCk7CgogICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAkLnNvYXAoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVVSTDogc2VydmVyLm5hbWVzcGFjZVVSTCwKICAgICAgICAgICAgICAgICAgICAgICAgU09BUEFjdGlvbjogc2VydmVyLm5hbWVzcGFjZVVSTCArIHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGV4cGVjdFRvUmVjZWl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHNvYXBSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXMucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJlc3BvbnNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTignQWRkTWFzdGVyQ3JlZGl0TWV0aG9kUmVzcG9uc2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5TdGF0dXNNZXNzYWdlLnN1Y2Nlc3MpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UuU3RhdHVzTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QocmVzcG9uc2UuU3RhdHVzTWVzc2FnZS5yZWFzb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KCJSZXF1ZXN0IGZhaWxlZCEgIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGFkZFNhZmVQYXlNZXRob2Q6IGZ1bmN0aW9uIChzYWZlUGF5KSB7CgogICAgICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSAkcm9vdFNjb3BlLnVzZXJDb29raWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGV4cGVjdFRvUmVjZWl2ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2FmZVBheVVzZXJuYW1lOiBzYWZlUGF5LnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IHVzZXIucmVzcG9uc2UudXNlcklkLAogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUGF5UGFzc3dvcmQ6IHNhZmVQYXkucGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NFRva2VuOiAiQmFzaWMgIit1c2VyLnJlc3BvbnNlLnRfYXV0aG9yaXphdGlvbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5hY2NvdW50LmFkZFNhZmVQYXlNZXRob2QoKTsKICAgICAgICAgICAgICAgICAgICBMb2dlci5QYXJhbXMoZXhwZWN0VG9SZWNlaXZlLCBwYXJhbXMubWV0aG9kKTsKCiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICQuc29hcCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcGFyYW1zLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlVVJMOiBzZXJ2ZXIubmFtZXNwYWNlVVJMLAogICAgICAgICAgICAgICAgICAgICAgICBTT0FQQWN0aW9uOiBzZXJ2ZXIubmFtZXNwYWNlVVJMICsgcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZXhwZWN0VG9SZWNlaXZlLAogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoc29hcFJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBzb2FwUmVzcG9uc2UudG9KU09OKHBhcmFtcy5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXNwb25zZS5TdGF0dXNNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdCgiUmVxdWVzdCBmYWlsZWQhICIpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVMb2dnaW5nOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHVwZGF0ZVNhZmVQYXlNZXRob2Q6IGZ1bmN0aW9uIChzYWZlUGF5KSB7CgogICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50SWQgPSAkcm9vdFNjb3BlLnVzZXJDb29raWUucmVzcG9uc2UudXNlcklkOwogICAgICAgICAgICAgICAgICAgIHZhciBleHBlY3RUb1JlY2VpdmUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogYWNjb3VudElkLAogICAgICAgICAgICAgICAgICAgICAgICBzYWZlUGF5VXNlcm5hbWU6IHNhZmVQYXkudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVQYXlQYXNzd29yZDogc2FmZVBheS5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlSWQ6ICIxMjM0NTY3ODkwIiwKICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0VG9rZW46ICJCYXNpYyAiKyRyb290U2NvcGUudXNlckNvb2tpZS5yZXNwb25zZS50X2F1dGhvcml6YXRpb24KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5hY2NvdW50LnVwZGF0ZVNhZmVQYXlNZXRob2QoKTsKICAgICAgICAgICAgICAgICAgICBMb2dlci5QYXJhbXMoZXhwZWN0VG9SZWNlaXZlLCBwYXJhbXMubWV0aG9kKTsKCiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICQuc29hcCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcGFyYW1zLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlVVJMOiBzZXJ2ZXIubmFtZXNwYWNlVVJMLAogICAgICAgICAgICAgICAgICAgICAgICBTT0FQQWN0aW9uOiBzZXJ2ZXIubmFtZXNwYWNlVVJMICsgcGFyYW1zLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZXhwZWN0VG9SZWNlaXZlLAogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoc29hcFJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBzb2FwUmVzcG9uc2UudG9KU09OKHBhcmFtcy5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXNwb25zZS5TdGF0dXNNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZXIuUmVjZWl2ZWQocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdCgiUmVxdWVzdCBmYWlsZWQhICIpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVMb2dnaW5nOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB1cGRhdGVNYXN0ZXJDcmVkaXRNZXRob2Q6IGZ1bmN0aW9uIChjYXJkKSB7CgogICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50SWQgPSAkcm9vdFNjb3BlLnVzZXJDb29raWUucmVzcG9uc2UudXNlcklkOwogICAgICAgICAgICAgICAgICAgIHZhciBleHBlY3RUb1JlY2VpdmUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogYWNjb3VudElkLAogICAgICAgICAgICAgICAgICAgICAgICBjYXJkTnVtYmVyOiAiNDg4NiIgKyBjYXJkLm51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGU6IGNhcmQuZXhwaXJhdGlvbkRhdGUubW9udGggKyBjYXJkLmV4cGlyYXRpb25EYXRlLnllYXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGN2dk51bWJlcjogY2FyZC5jdnYsCiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogY2FyZC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VJZDogIjEyMzQ1Njc4OTAiLAogICAgICAgICAgICAgICAgICAgICAgICBiYXNlNjRUb2tlbjogIkJhc2ljICIrJHJvb3RTY29wZS51c2VyQ29va2llLnJlc3BvbnNlLnRfYXV0aG9yaXphdGlvbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VydmVyLmFjY291bnQudXBkYXRlTWFzdGVyQ3JlZGl0TWV0aG9kKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZXIuUGFyYW1zKGV4cGVjdFRvUmVjZWl2ZSwgcGFyYW1zLm1ldGhvZCk7CgogICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAkLnNvYXAoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVVSTDogc2VydmVyLm5hbWVzcGFjZVVSTCwKICAgICAgICAgICAgICAgICAgICAgICAgU09BUEFjdGlvbjogc2VydmVyLm5hbWVzcGFjZVVSTCArIHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGV4cGVjdFRvUmVjZWl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHNvYXBSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXMucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLlN0YXR1c01lc3NhZ2Uuc3VjY2Vzcyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXNwb25zZS5TdGF0dXNNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChyZXNwb25zZS5TdGF0dXNNZXNzYWdlLnJlYXNvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dlci5SZWNlaXZlZChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KCJSZXF1ZXN0IGZhaWxlZCEgIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHVwZGF0ZVByZWZmZXJlZFBheW1lbnRNZXRob2Q6IGZ1bmN0aW9uIChwYXltZW50TWV0aG9kKSB7CgogICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJHJvb3RTY29wZS51c2VyQ29va2llOwogICAgICAgICAgICAgICAgICAgIHZhciBleHBlY3RUb1JlY2VpdmUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXNlci5yZXNwb25zZS51c2VySWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IHBheW1lbnRNZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NFRva2VuOiAiQmFzaWMgIisgdXNlci5yZXNwb25zZS50X2F1dGhvcml6YXRpb24KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNlcnZlci5hY2NvdW50LnBheW1lbnRNZXRob2RVcGRhdGUoKTsKICAgICAgICAgICAgICAgICAgICBMb2dlci5QYXJhbXMoZXhwZWN0VG9SZWNlaXZlLCBwYXJhbXMubWV0aG9kKTsKCiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUxvYWRlcigpOwoKICAgICAgICAgICAgICAgICAgICAkLnNvYXAoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZVVSTDogc2VydmVyLm5hbWVzcGFjZVVSTCwKICAgICAgICAgICAgICAgICAgICAgICAgU09BUEFjdGlvbjogc2VydmVyLm5hbWVzcGFjZVVSTCArIHBhcmFtcy5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGV4cGVjdFRvUmVjZWl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHNvYXBSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gc29hcFJlc3BvbnNlLnRvSlNPTihwYXJhbXMucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRpc2FibGVMb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UuU3RhdHVzTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2VyLlJlY2VpdmVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoIlJlcXVlc3QgZmFpbGVkISAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlTG9nZ2luZzogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9XSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDEwLzAxLzIwMTYuCiAqLwoKZGVmaW5lKCdhcHAvYWNjb3VudC9zZXJ2aWNlcy9pbmRleCcsWwogICAgJy4vYWNjb3VudFNlcnZpY2UnLAogICAgXSwgZnVuY3Rpb24oKSB7fSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xNC8yMDE1LgogKi8KZGVmaW5lKCdhcHAvZmlsdGVycy9tb2R1bGUnLFsnYW5ndWxhciddLCBmdW5jdGlvbiAoYW5ndWxhcikgewogICAgJ3VzZSBzdHJpY3QnOwogICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKCdhb3MuZmlsdGVycycsIFtdKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDIzLzExLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvZmlsdGVycy90cnVzdEhUTUwnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGNvbnRyb2xsZXJzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb250cm9sbGVycy5maWx0ZXIoJ3RydXN0SHRtbCcsIFsnJHNjZScsIGZ1bmN0aW9uKCRzY2UpewogICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKHRleHQpOwogICAgICAgIH07CiAgICB9XSk7Cn0pOwovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxMC8xMi8yMDE1LgogKi8KCmRlZmluZSgnYXBwL2ZpbHRlcnMvc2VjQ2F0V29yZCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmZpbHRlcignc2VjQ2F0V29yZCcsIGZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHRleHQsIG1heExlbmd0aCkgewogICAgICAgICAgICBpZih0ZXh0Lmxlbmd0aCA+IG1heExlbmd0aCl7CiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgbWF4TGVuZ3RoIC0gMykgKyAiLi4uIjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgICB9OwogICAgfSkKICAgIDsKfSk7CgoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTAvMTIvMjAxNS4KICovCgpkZWZpbmUoJ2FwcC9maWx0ZXJzL2xhc3Q0RGlnaXRzQ2FyZCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmZpbHRlcignc2hvd0xhc3Q0RGlnaXRzQ2FyZCcsIGZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG51bSwgbGFzdCkgewogICAgICAgICAgICByZXR1cm4gbGFzdCA/IG51bSArICIiIDogIioqKioiIDsKICAgICAgICB9OwogICAgfSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDEwLzEyLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvZmlsdGVycy9wcm9kdWN0c0NhcnRDb3VudCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICBjb250cm9sbGVycy5maWx0ZXIoJ3Byb2R1Y3RzQ2FydENvdW50JywgZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FydCkgewogICAgICAgICAgICB2YXIgY291bnQgPSAwOwogICAgICAgICAgICBpZihjYXJ0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY2FydC5wcm9kdWN0c0luQ2FydCwgZnVuY3Rpb24ocHJvZHVjdCl7CiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gcGFyc2VJbnQocHJvZHVjdC5xdWFudGl0eSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjb3VudDsKICAgICAgICB9OwogICAgfSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDEwLzEyLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvZmlsdGVycy9wcm9kdWN0c0NhcnRTdW0nLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGNvbnRyb2xsZXJzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb250cm9sbGVycy5maWx0ZXIoJ3Byb2R1Y3RzQ2FydFN1bScsIFsidXNlclNlcnZpY2UiLCBmdW5jdGlvbih1c2VyU2VydmljZSl7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhcnQsIHBsdXMpIHsKICAgICAgICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgICAgICAgdmFyIGluY3JlbWVudCA9IHBsdXMgfHwgMDsKICAgICAgICAgICAgaWYoY2FydCkgewogICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNhcnQucHJvZHVjdHNJbkNhcnQsIGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gKHByb2R1Y3QucHJpY2UgKiBwcm9kdWN0LnF1YW50aXR5KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGNhcnRJbmNyZW1lbnQgPSB1c2VyU2VydmljZS5nZXRDYXJ0SW5jcmVtZW50KCk7CiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGluY3JlbWVudCkgKyBjb3VudCArIGNhcnRJbmNyZW1lbnQ7CiAgICAgICAgfTsKICAgIH1dKS4KICAgIGZpbHRlcignc2VjQ2F0V29yZCcsIGZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHRleHQsIG1heExlbmd0aCkgewogICAgICAgICAgICBpZih0ZXh0Lmxlbmd0aCA+IG1heExlbmd0aCl7CiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgbWF4TGVuZ3RoIC0gMykgKyAiLi4uIjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgICB9OwogICAgfSkKICAgIDsKfSk7CgoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTAvMTIvMjAxNS4KICovCgpkZWZpbmUoJ2FwcC9maWx0ZXJzL3Byb2R1Y3RRdWFudGl0eScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmZpbHRlcigncHJvZHVjdFF1YW50aXR5JywgZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oX2FycmF5LCBxdWFudGl0eSkgewogICAgICAgICAgICBpZihxdWFudGl0eSA+IDkgJiYgX2FycmF5Lmxlbmd0aCA9PSA5KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSBfYXJyYXkubGVuZ3RoICsgMTsgaSA8PSBxdWFudGl0eTsgaSsrKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIF9hcnJheS5wdXNoKGkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfYXJyYXk7CiAgICAgICAgfTsKICAgIH0pOwp9KTsKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxNC8xMi8yMDE1LgogKi8KCmRlZmluZSgnYXBwL2ZpbHRlcnMvZmlsdGVyRnVsbEFycmF5Zm9yQXV0b0NvbXBsYXRlJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuZmlsdGVyKCdmaWx0ZXJGdWxsQXJyYXlmb3JBdXRvQ29tcGxhdGUnLCBmdW5jdGlvbigpewogICAgICAgIHJldHVybiBmdW5jdGlvbihfYSwgYXV0b0NvbXBsZXRlUmVzdWx0LCBjYXRlZ29yeUZpbHRlciwgbGltaXQpIHsKCiAgICAgICAgICAgIGlmKCFhdXRvQ29tcGxldGVSZXN1bHQgfHwgYXV0b0NvbXBsZXRlUmVzdWx0WzBdID09IHVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICByZXR1cm4gX2E7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHByb2R1Y3RzID0gW107CiAgICAgICAgICAgIHZhciBtYXggPSAwOwogICAgICAgICAgICBpZighbGltaXQpewogICAgICAgICAgICAgICAgbGltaXQgPSA2OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXV0b0NvbXBsZXRlUmVzdWx0Lmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgIG1heCA9IGF1dG9Db21wbGV0ZVJlc3VsdFtpXS5wcm9kdWN0cy5sZW5ndGggPiBtYXggPyBhdXRvQ29tcGxldGVSZXN1bHRbaV0ucHJvZHVjdHMubGVuZ3RoIDogbWF4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspewogICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhdXRvQ29tcGxldGVSZXN1bHQubGVuZ3RoOyBqKyspewoKICAgICAgICAgICAgICAgICAgICBpZihjYXRlZ29yeUZpbHRlciA9PSBhdXRvQ29tcGxldGVSZXN1bHRbal0uY2F0ZWdvcnlJZCB8fCBjYXRlZ29yeUZpbHRlciA9PSBudWxsIHx8IGNhdGVnb3J5RmlsdGVyID09ICcnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZCA9IGF1dG9Db21wbGV0ZVJlc3VsdFtqXS5wcm9kdWN0c1tpXQogICAgICAgICAgICAgICAgICAgICAgICBpZihwcmQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHMucHVzaChwcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJvZHVjdHMubGVuZ3RoID09IGxpbWl0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZHVjdHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHByb2R1Y3RzOwogICAgICAgIH07CiAgICB9KTsKfSk7CgoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTcvMDEvMjAxNi4KICovCgoKCmRlZmluZSgnYXBwL2ZpbHRlcnMvZ2V0Q2F0ZWdvcmllc0luQXJyYXknLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGNvbnRyb2xsZXJzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb250cm9sbGVycy5maWx0ZXIoJ2dldENhdGVnb3JpZXNJbkFycmF5JywgZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oX2EsIGNhdGVnb3JpZXNJbkFycmF5LCBjYXRlZ29yeUlkKSB7CgogICAgICAgICAgICBpZihjYXRlZ29yaWVzSW5BcnJheVswXSA9PSB1bmRlZmluZWQpewogICAgICAgICAgICAgICAgcmV0dXJuIF9hOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBjYXRlZ29yaWVzID0gW107CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2F0ZWdvcmllc0luQXJyYXkubGVuZ3RoOyBpKyspewogICAgICAgICAgICAgICAgdmFyIGNhdGVnID0gY2F0ZWdvcmllc0luQXJyYXlbaV07CiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLnB1c2goewogICAgICAgICAgICAgICAgICAgIGlkIDogY2F0ZWcuY2F0ZWdvcnlJZCwKICAgICAgICAgICAgICAgICAgICBuYW1lIDogY2F0ZWcuY2F0ZWdvcnlOYW1lLAogICAgICAgICAgICAgICAgICAgIGNoZWNrZWQgOiBjYXRlZ29yeUlkID09IGNhdGVnLmNhdGVnb3J5SWQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gY2F0ZWdvcmllczsKICAgICAgICB9OwogICAgfSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDEwLzEyLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvZmlsdGVycy9wcm9kdWN0c0ZpbHRlckZvckNhdGVnb3JpZXNQcm9kdWN0JyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuZmlsdGVyKCdwcm9kdWN0c0ZpbHRlckZvckNhdGVnb3JpZXNQcm9kdWN0JywgZnVuY3Rpb24gKCRmaWx0ZXIpIHsKCiAgICAgICAgZnVuY3Rpb24gYnVpbGRTZXBhcmF0b3IodmFsKSB7CiAgICAgICAgICAgIHJldHVybiAiKChTVEFSVCkgIiArIHZhbCArICIgKEVORCkpIjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX2EsIHNlYXJjaFJlc3VsdCwgbWluUHJpY2UsIG1heFByaWNlLCBwcm9kdWN0c0luY2x1ZGUpIHsKCiAgICAgICAgICAgIHZhciBjYXRlZ29yaWVzID0gc2VhcmNoUmVzdWx0OwoKICAgICAgICAgICAgdmFyIHByb2R1Y3RzVG9SZXR1cm4gPSBbXTsKCiAgICAgICAgICAgIGlmIChwcm9kdWN0c0luY2x1ZGUgJiYgT2JqZWN0LmtleXMocHJvZHVjdHNJbmNsdWRlKS5sZW5ndGggIT0gMCkgewoKICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjYXRlZ29yaWVzKSB7CgogICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0c0ZpbHRlcml6ZWQgPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBjYXRlZ29yaWVzW2tleV0ucHJvZHVjdHMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmQgPSBjYXRlZ29yaWVzW2tleV0ucHJvZHVjdHNbaW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJkLmF0dHJpYnV0ZXMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHByb2R1Y3RzSW5jbHVkZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIHByb2R1Y3RzSW5jbHVkZVtuYW1lXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wICs9IGJ1aWxkU2VwYXJhdG9yKHByb2R1Y3RzSW5jbHVkZVtuYW1lXVtpbmRleF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gcHJkLmF0dHJpYnV0ZXMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wLmluZGV4T2YoYnVpbGRTZXBhcmF0b3IocHJkLmF0dHJpYnV0ZXNbaW5kZXhdLmF0dHJpYnV0ZVZhbHVlKSkgPiAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvcnMgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIHByb2R1Y3RzSW5jbHVkZVsnQ09MT1InXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9ycyArPSAiKCIgKyBwcm9kdWN0c0luY2x1ZGVbJ0NPTE9SJ11baW5kZXhdLmNvZGUgKyAiKSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JGb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmQuY29sb3JzICYmIGNvbG9ycyAhPSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JGb3VuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gcHJkLmNvbG9ycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xvcnMuaW5kZXhPZihwcmQuY29sb3JzW2luZGV4XS5jb2RlKSA+IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yRm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXRlZ29yeUZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhdGVnb3JpZXNTdHIgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gcHJvZHVjdHNJbmNsdWRlWydDQVRFR09SSUVTJ10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNTdHIgKz0gIigiICsgcHJvZHVjdHNJbmNsdWRlWydDQVRFR09SSUVTJ11baW5kZXhdICsgIikiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmQuY2F0ZWdvcnlJZCAmJiBjYXRlZ29yaWVzU3RyICE9ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeUZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcmllc1N0ci5pbmRleE9mKHByZC5jYXRlZ29yeUlkKSA+IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlGb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PSBPYmplY3Qua2V5cyhwcm9kdWN0c0luY2x1ZGUpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJkLnByaWNlID49IG1pblByaWNlICYmIHByZC5wcmljZSA8PSBtYXhQcmljZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JGb3VuZCAmJiBjYXRlZ29yeUZvdW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0ZpbHRlcml6ZWQucHVzaChwcmQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzVG9SZXR1cm4ucHVzaCh7cHJvZHVjdHM6IHByb2R1Y3RzRmlsdGVyaXplZH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2F0ZWdvcmllcykgewogICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0c0ZpbHRlcml6ZWQgPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBjYXRlZ29yaWVzW2tleV0ucHJvZHVjdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZCA9IGNhdGVnb3JpZXNba2V5XS5wcm9kdWN0c1tpbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmQucHJpY2UgPj0gbWluUHJpY2UgJiYgcHJkLnByaWNlIDw9IG1heFByaWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0ZpbHRlcml6ZWQucHVzaChwcmQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNUb1JldHVybi5wdXNoKHtwcm9kdWN0czogcHJvZHVjdHNGaWx0ZXJpemVkfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgdiA9ICRmaWx0ZXIoImZpbHRlckZ1bGxBcnJheWZvckF1dG9Db21wbGF0ZSIpKFtdLCBwcm9kdWN0c1RvUmV0dXJuLCBudWxsLCAtMSk7CiAgICAgICAgICAgIHJldHVybiB2OwogICAgICAgIH0KICAgIH0pOwp9KTsKCgovL2ZvciAodmFyIHByZEF0dHJJbmRleCBpbiBwcmQuYXR0cmlidXRlcykgewovLyAgICB2YXIgcHJkQXR0ciA9IHByZC5hdHRyaWJ1dGVzW3ByZEF0dHJJbmRleF07Ci8vCi8vICAgIHZhciBpbmNsdWRlID0gcHJvZHVjdHNJbmNsdWRlW3ByZEF0dHIuYXR0cmlidXRlTmFtZV07Ci8vICAgIHZhciBmaW5kZWQgPSBmYWxzZTsKLy8gICAgaWYgKGluY2x1ZGUpIHsKLy8gICAgICAgIGZvciAodmFyIGluY2x1ZGVJbmRleCBpbiBpbmNsdWRlKSB7Ci8vICAgICAgICAgICAgaWYgKHByZEF0dHIuYXR0cmlidXRlVmFsdWUgPT0gaW5jbHVkZVtpbmNsdWRlSW5kZXhdKSB7Ci8vICAgICAgICAgICAgICAgIGZpbmRlZCA9IHRydWU7Ci8vICAgICAgICAgICAgICAgIGJyZWFrOwovLyAgICAgICAgICAgIH0KLy8gICAgICAgIH0KLy8gICAgICAgIGlmIChmaW5kZWQpIHsKLy8gICAgICAgICAgICBwcm9kdWN0c0ZpbHRlcml6ZWQucHVzaChwcmQpOwovLyAgICAgICAgfQovLyAgICB9Ci8vfQoKCi8vZm9yKHZhciBhdHRyaWIgaW4gcHJvZHVjdHNJbmNsdWRlKXsKLy8gICAgY29uc29sZS5sb2coIiIpCi8vICAgIGNvbnNvbGUubG9nKCI9PT09PT09PT09PT09PT09ICAgcHJvZHVjdHNJbmNsdWRlID09PT09PT09PT09PT09PT09PT09PT0iKQovLyAgICBjb25zb2xlLmxvZyhwcm9kdWN0c0luY2x1ZGUpCi8vICAgIGNvbnNvbGUubG9nKGkpCi8vICAgIGNvbnNvbGUubG9nKHByb2R1Y3RzSW5jbHVkZVtpXSkKLy8gICAgY29uc29sZS5sb2coIj09PT09PT09PT09PT09PT0gICBwcm9kdWN0c0luY2x1ZGUgPT09PT09PT09PT09PT09PT09PT09PSIpCi8vICAgIGNvbnNvbGUubG9nKCIiKQovL30KCi8vYW5ndWxhci5mb3JFYWNoKHByb2R1Y3RzLCBmdW5jdGlvbiAocHJvZHVjdCkgewovLwovLyAgICBpZiAoT2JqZWN0LmtleXMocHJvZHVjdHNJbmNsdWRlKS5sZW5ndGggPiAwKSB7Ci8vICAgICAgICB2YXIgZm91bmQgPSAwOwovLyAgICAgICAgZm9yICh2YXIga2V5IGluIHByb2R1Y3RzSW5jbHVkZSkgewovLyAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdHNJbmNsdWRlW2tleV0ubGVuZ3RoOyBpKyspIHsKLy8gICAgICAgICAgICAgICAgdmFyIHNlYXJjaE1hdGNoZXMgPSAwOwovLyAgICAgICAgICAgICAgICBpZiAocHJvZHVjdC5hdHRyaWJ1dGVzKSB7Ci8vICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyQXR0ciA9ICRmaWx0ZXIoJ2ZpbHRlcicpKHByb2R1Y3QuYXR0cmlidXRlcywge2F0dHJpYnV0ZVZhbHVlOiBwcm9kdWN0c0luY2x1ZGVba2V5XVtpXX0sIGZhbHNlKTsKLy8gICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkoZmlsdGVyQXR0clswXSk7Ci8vICAgICAgICAgICAgICAgICAgICB2YXIgbWFwID0gJC5tYXAocHJvZHVjdC5hdHRyaWJ1dGVzLCBKU09OLnN0cmluZ2lmeSk7Ci8vICAgICAgICAgICAgICAgICAgICBzZWFyY2hNYXRjaGVzID0gJC5pbkFycmF5KGpzb24sIG1hcCk7Ci8vICAgICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgICAgaWYgKHNlYXJjaE1hdGNoZXMgPiAtMSkgewovLyAgICAgICAgICAgICAgICAgICAgZm91bmQrKzsKLy8gICAgICAgICAgICAgICAgfQovLyAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2xvckluZGV4ID0gMDsgY29sb3JJbmRleCA8IHByb2R1Y3QuY29sb3JzLmxlbmd0aDsgY29sb3JJbmRleCsrKSB7Ci8vICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdC5jb2xvcnNbY29sb3JJbmRleF0uY29kZSA9PSBwcm9kdWN0c0luY2x1ZGVba2V5XVtpXS5jb2RlKSB7Ci8vICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQrKzsKLy8gICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKLy8gICAgICAgICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgICAgfQovLyAgICAgICAgICAgIH0KLy8gICAgICAgIH0KLy8gICAgICAgIGlmIChmb3VuZCA9PSBPYmplY3Qua2V5cyhwcm9kdWN0c0luY2x1ZGVba2V5XSkubGVuZ3RoICYmIHByb2R1Y3QucHJpY2UgPj0gbWluUHJpY2UgJiYgcHJvZHVjdC5wcmljZSA8PSBtYXhQcmljZSkgewovLyAgICAgICAgICAgIHByb2R1Y3RzVG9SZXR1cm4ucHVzaChwcm9kdWN0KTsKLy8gICAgICAgIH0KLy8gICAgfQovLyAgICBlbHNlIGlmIChwcm9kdWN0LnByaWNlID49IG1pblByaWNlICYmIHByb2R1Y3QucHJpY2UgPD0gbWF4UHJpY2UpIHsKLy8gICAgICAgIHByb2R1Y3RzVG9SZXR1cm4ucHVzaChwcm9kdWN0KTsKLy8gICAgfQovL30pOwovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAyNS8wMi8yMDE2LgogKi8KCgoKZGVmaW5lKCdhcHAvZmlsdGVycy9zb3J0QXJyYXlCeUNvbG9yTmFtZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoY29udHJvbGxlcnMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGNvbnRyb2xsZXJzLmZpbHRlcignc29ydEFycmF5QnlDb2xvck5hbWUnLCBmdW5jdGlvbigpewogICAgICAgIHJldHVybiBmdW5jdGlvbihhcnIsIGNvbG9ycykgewogICAgICAgICAgICByZXR1cm4gY29sb3JzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhLm5hbWUgPT0gYi5uYW1lID8gMCA6IGEubmFtZSA8IGIubmFtZSA/IC0xIDogMTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgIH0pCn0pOwoKCgoKCgoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDExLzA0LzIwMTYuCiAqLwoKZGVmaW5lKCdhcHAvZmlsdGVycy9nZXRBbGxJbWFnZXNCeUNvbG9yJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChjb250cm9sbGVycykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgY29udHJvbGxlcnMuZmlsdGVyKCdnZXRBbGxJbWFnZXNCeUNvbG9yJywgZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oaW1hZ2VzLCBjb2xvclNlbGVjdGVkLCBkZWZhdWx0SW1hZ2UpIHsKICAgICAgICAgICAgdmFyIF9kZWZhdWx0SW1nID0gdW5kZWZpbmVkOwogICAgICAgICAgICB2YXIgX2FiY2RlZkltZyA9IFtdOwogICAgICAgICAgICB2YXIgaW1hZ2VNYXRjaGVzID0gaW1hZ2VzLmZpbHRlcihmdW5jdGlvbihpbWcpewogICAgICAgICAgICAgICAgdmFyIGluZGV4U3ViU3RyaW5nID0gaW1nLmluZGV4T2YoIiMjIik7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEltZyA9IGltZy5zdWJzdHJpbmcoaW5kZXhTdWJTdHJpbmcgKyAyKTsKICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRJbWcgPT0gZGVmYXVsdEltYWdlKXsKICAgICAgICAgICAgICAgICAgICBfZGVmYXVsdEltZyA9IGltZzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihpbWcudG9Mb3dlckNhc2UoKS5pbmRleE9mKCgiYWJjZGVmIikpICE9IC0xIHx8IGluZGV4U3ViU3RyaW5nID09IC0xKXsKICAgICAgICAgICAgICAgICAgICBfYWJjZGVmSW1nLnB1c2goaW1nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBpbWcuc3Vic3RyaW5nKDAsIGluZGV4U3ViU3RyaW5nKTsKICAgICAgICAgICAgICAgIGlmIChjb2xvclNlbGVjdGVkLmNvZGUgPT0gY29sb3IpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmKGltYWdlTWF0Y2hlcy5sZW5ndGggPT0gMCAmJiBpbWFnZU1hdGNoZXMubGVuZ3RoID09IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGltYWdlTWF0Y2hlcy5wdXNoKGRlZmF1bHRJbWFnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZihfZGVmYXVsdEltZyl7CiAgICAgICAgICAgICAgICBpZihfZGVmYXVsdEltZy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoKCJhYmNkZWYiKSkgIT0gLTEgfHwKICAgICAgICAgICAgICAgICAgICBjb2xvclNlbGVjdGVkLmNvZGUgPT0gX2RlZmF1bHRJbWcuc3Vic3RyaW5nKDAsIF9kZWZhdWx0SW1nLmluZGV4T2YoIiMjIikpKXsKICAgICAgICAgICAgICAgICAgICBpbWFnZU1hdGNoZXMucHVzaChkZWZhdWx0SW1hZ2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGltYWdlTWF0Y2hlcyA9IGltYWdlTWF0Y2hlcy5jb25jYXQoX2FiY2RlZkltZyk7CiAgICAgICAgICAgIHJldHVybiBpbWFnZU1hdGNoZXM7CiAgICAgICAgfTsKICAgIH0pOwp9KTsKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxMS8wNC8yMDE2LgogKi8KCgpkZWZpbmUoJ2FwcC9maWx0ZXJzL2dldEltYWdlSWQnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGNvbnRyb2xsZXJzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb250cm9sbGVycy5maWx0ZXIoJ2dldEltYWdlSWQnLCBmdW5jdGlvbigpewogICAgICAgIHJldHVybiBmdW5jdGlvbihpbWFnZSkgewogICAgICAgICAgICB2YXIgaW5kZXhTdWJTdHJpbmcgPSBpbWFnZS5pbmRleE9mKCIjIyIpOwogICAgICAgICAgICBpZihpbmRleFN1YlN0cmluZyA9PSAtMSl7CiAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGltYWdlLnN1YnN0cmluZyhpbmRleFN1YlN0cmluZyArIDIpOwogICAgICAgIH07CiAgICB9KTsKfSk7CgoKCi8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xNC8yMDE1LgogKi8KCgpkZWZpbmUoJ2FwcC9maWx0ZXJzL2luZGV4JyxbCgogICAgJy4vdHJ1c3RIVE1MJywKICAgICcuL3NlY0NhdFdvcmQnLAogICAgJy4vbGFzdDREaWdpdHNDYXJkJywKICAgICcuL3Byb2R1Y3RzQ2FydENvdW50JywKICAgICcuL3Byb2R1Y3RzQ2FydFN1bScsCiAgICAnLi9wcm9kdWN0UXVhbnRpdHknLAogICAgJy4vZmlsdGVyRnVsbEFycmF5Zm9yQXV0b0NvbXBsYXRlJywKICAgICcuL2dldENhdGVnb3JpZXNJbkFycmF5JywKICAgICcuL3Byb2R1Y3RzRmlsdGVyRm9yQ2F0ZWdvcmllc1Byb2R1Y3QnLAogICAgJy4vc29ydEFycmF5QnlDb2xvck5hbWUnLAogICAgJy4vZ2V0QWxsSW1hZ2VzQnlDb2xvcicsCiAgICAnLi9nZXRJbWFnZUlkJwoKXSwgZnVuY3Rpb24oKSB7fSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xNC8yMDE1LgogKi8KZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9tb2R1bGUnLFsnYW5ndWxhciddLCBmdW5jdGlvbiAoYW5ndWxhcikgewogICAgJ3VzZSBzdHJpY3QnOwogICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKCdhb3MuZGlyZWN0aXZlcycsIFtdKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDI3LzEyLzIwMTUuCiAqLwoKCgpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2Utc2VjLXBsdXMtbWludXMnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMKICAgICAgICAuZGlyZWN0aXZlKCdlU2VjUGx1c01pbnVzJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJywKICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy9lLXNlYy1wbHVzLW1pbnVzLmh0bWwnKSwKICAgICAgICAgICAgICAgIHNjb3BlOiB7CiAgICAgICAgICAgICAgICAgICAgbnVtQXR0cjogJz0nLAogICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByb2R1Y3RBdHRyOiAnJicsCiAgICAgICAgICAgICAgICAgICAgYURpc2FibGU6ICc9JywKICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZTogJz0nLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgZnVuY3Rpb24gKHMpIHsKCiAgICAgICAgICAgICAgICAgICAgdmFyIG1heFZhbHVlID0gOTk5OwogICAgICAgICAgICAgICAgICAgIHZhciBtaW5WYWx1ZSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdmFyIG51bSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWR5VG9DaGVjayA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHMubnVtQXR0ciA9IHBhcnNlSW50KHMubnVtQXR0cik7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TmV3TnVtID0gZnVuY3Rpb24gKF9udW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gcGFyc2VJbnQoX251bSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLmluY3JlbWVudE51bUF0dHIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm51bUF0dHIgPiBtaW5WYWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5udW1BdHRyLS07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY3JlbWVudE51bUF0dHIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMubnVtQXR0cisrOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TWF4VmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXhWYWx1ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TWF4VmFsdWUgPSBmdW5jdGlvbiAoX21heFZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1heFZhbHVlID0gX21heFZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRNaW5WYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pblZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcy5pbmNyZW1lbnRWYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy4kYXBwbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IHMubnVtQXR0ciArIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9IHMubnVtQXR0ciA9IHBhcnNlSW50KG5ld1ZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgcy51cGRhdGVQcm9kdWN0QXR0cigpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLm51bUF0dHIgPj0gbWF4VmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBzLmRlY3JlbWVudFZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzLiRhcHBseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsID0gcy5udW1BdHRyIC0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gcy5udW1BdHRyID0gcGFyc2VJbnQobmV3VmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMudXBkYXRlUHJvZHVjdEF0dHIoKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMubnVtQXR0ciA8PSBtaW5WYWx1ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZU51bWJlciA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tOdW1iZXIoJGV2ZW50KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVhZHlUb0NoZWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeVRvQ2hlY2sgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9IHMubnVtQXR0cjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTnVtYmVyID0gZnVuY3Rpb24gKGFsbG93RW1wdHkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHlUb0NoZWNrID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcy51cGRhdGVQcm9kdWN0QXR0cigpCiAgICAgICAgICAgICAgICAgICAgICAgIHMuY2hlY2tEaXNhYmxlcyhhbGxvd0VtcHR5KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tOdW1iZXIoKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHMubnVtQXR0ciArICIiKS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc051bWJlciA9IChzLm51bUF0dHIgLSAwKSA9PSBzLm51bUF0dHIgJiYgKCcnICsgcy5udW1BdHRyKS50cmltKCkubGVuZ3RoID4gMDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOdW1iZXIgLyp8fCAocy5udW1BdHRyICsgIiIpLmxlbmd0aCA9PSAoY3RybC5nZXRNYXhWYWx1ZSgpICsgIiIpLmxlbmd0aCovKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMubnVtQXR0ciA+IG1heFZhbHVlIHx8IHMubnVtQXR0ciA8IG1pblZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm51bUF0dHIgPSBwYXJzZUludChudW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHMsIGUsIGEsIGN0cmwpIHsKCiAgICAgICAgICAgICAgICAgICAgZS5hZGRDbGFzcygic2VjLXBsdXMtbWludXMiKQogICAgICAgICAgICAgICAgICAgIGlmIChzLmFEaXNhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuYWRkQ2xhc3MoInNlYy1wbHVzLW1pbnVzLWRpc2FibGUiKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHMubWF4VmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRNYXhWYWx1ZShzLm1heFZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICB2YXIgbWluVmFsdWUgPSBjdHJsLmdldE1pblZhbHVlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1heFZhbHVlID0gY3RybC5nZXRNYXhWYWx1ZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChzLm51bUF0dHIgPD0gbWluVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy5udW1BdHRyID0gcGFyc2VJbnQobWluVmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAkKGUpLmZpbmQoJy5taW51cycpLmFkZENsYXNzKCdkaXNhYmxlQnRuJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMubnVtQXR0ciA+PSBtYXhWYWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzLm51bUF0dHIgPSBtYXhWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgJChlKS5maW5kKCcucGx1cycpLmFkZENsYXNzKCdkaXNhYmxlQnRuJykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHMuY2hlY2tEaXNhYmxlcyA9IGZ1bmN0aW9uIChhbGxvd0VtcHR5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm51bUF0dHIgPD0gbWluVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm51bUF0dHIgPT0gIiIgJiYgYWxsb3dFbXB0eSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5udW1BdHRyID0gcGFyc2VJbnQobWluVmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlKS5maW5kKCcubWludXMnKS5hZGRDbGFzcygnZGlzYWJsZUJ0bicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGUpLmZpbmQoJy5wbHVzJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVCdG4nKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlKS5maW5kKCcubWludXMnKS5yZW1vdmVDbGFzcygnZGlzYWJsZUJ0bicpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm51bUF0dHIgPj0gbWF4VmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubnVtQXR0ciA9IHBhcnNlSW50KG1heFZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZSkuZmluZCgnLnBsdXMnKS5hZGRDbGFzcygnZGlzYWJsZUJ0bicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGUpLmZpbmQoJy5taW51cycpLnJlbW92ZUNsYXNzKCdkaXNhYmxlQnRuJykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZSkuZmluZCgnLnBsdXMnKS5yZW1vdmVDbGFzcygnZGlzYWJsZUJ0bicpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzLm51bUF0dHIgLSAwKSA9PSBzLm51bUF0dHIgJiYgKCcnICsgcy5udW1BdHRyKS50cmltKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5udW1BdHRyID0gcGFyc2VJbnQocy5udW1BdHRyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH1dKQogICAgICAgIC5kaXJlY3RpdmUoJ251bWJlcnNPbmx5JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKICAgICAgICAgICAgICAgIHJlcXVpcmU6ICdeZVNlY1BsdXNNaW51cycsCiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAocywgZSwgYSwgY3RybCkgewoKICAgICAgICAgICAgICAgICAgICBlLm9uKCdjbGljaycsIGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICBzLiR3YXRjaCgnbnVtQXR0cicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC51cGRhdGVOdW1iZXIodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGUub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMuJGFwcGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoJGV2ZW50LmtleUNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmluY3JlbWVudE51bUF0dHIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuZGVjcmVtZW50TnVtQXR0cigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBlLm9uKCdibHVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzLiRhcHBseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnVwZGF0ZU51bWJlcihmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5kaXJlY3RpdmUoJ2luY3JlbWVudFZhbHVlQXR0cicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgICAgICByZXF1aXJlOiAnXmVTZWNQbHVzTWludXMnLAogICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHMsIGUsIGEsIGN0cmwpIHsKCiAgICAgICAgICAgICAgICAgICAgZS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5pbmNyZW1lbnRWYWx1ZUF0dHIgPT0gIisiKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuaGFzQ2xhc3MoImRpc2FibGVCdG4iKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmluY3JlbWVudFZhbHVlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmFkZENsYXNzKCJkaXNhYmxlQnRuIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGUpLnNpYmxpbmdzKCcubWludXMnKS5yZW1vdmVDbGFzcygiZGlzYWJsZUJ0biIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlbW92ZUNsYXNzKCJkaXNhYmxlQnRuIikKCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEuaW5jcmVtZW50VmFsdWVBdHRyID09ICItIikgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmhhc0NsYXNzKCJkaXNhYmxlQnRuIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5kZWNyZW1lbnRWYWx1ZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hZGRDbGFzcygiZGlzYWJsZUJ0biIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlKS5zaWJsaW5ncygnLnBsdXMnKS5yZW1vdmVDbGFzcygiZGlzYWJsZUJ0biIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlbW92ZUNsYXNzKCJkaXNhYmxlQnRuIikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIDsKCgp9KTsKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAwMy8wNi8yMDE2LgogKi8KCgoKCmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvaW5mby1kZW1vJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgnaW5mb0RlbW8nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJywKICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHMsIGUsIGEpIHsKICAgICAgICAgICAgICAgIGUuYWRkQ2xhc3MoJ2luZm8tZGVtbycpOwogICAgICAgICAgICAgICAgdmFyIGRpdklubmVyID0gJCgiPGRpdj48L2Rpdj4iKTsKICAgICAgICAgICAgICAgIGRpdklubmVyLmFwcGVuZCgiPGg0PiIgKyBhLmFUaXRsZSArICI8L2g0PiIpOwogICAgICAgICAgICAgICAgZGl2SW5uZXIuYXBwZW5kKCI8ZGl2IHN0eWxlPSdoZWlnaHQ6IDRweDsnPjwvZGl2PiIpOwogICAgICAgICAgICAgICAgdmFyIHBhcmFncmFwaGVzID0gSlNPTi5wYXJzZShhLmFMaW5lcyk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFncmFwaGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZGl2SW5uZXIuYXBwZW5kKCI8cCBjbGFzcz0ncm9ib3RvLWxpZ2h0Jz4iICsgcGFyYWdyYXBoZXNbaV0gKyAiPC9wPiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZS5hcHBlbmQoZGl2SW5uZXIpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfSk7CgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAyNy8xMi8yMDE1LgogKi8KCgoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9hLXNlYy1zcmMnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdhU2VjU3JjJywgZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHMsIGUsIGEsIGN0cmwpewoKICAgICAgICAgICAgICAgIC8vIG5nLXNyYz0iZmV0Y2hJbWFnZT9pbWFnZV9pZD17e3Byb2R1Y3QuaW1hZ2VVcmx9fSIKICAgICAgICAgICAgICAgIC8vIHNlcnZlci5jYXRhbG9nLmdldEtleSgpICsKICAgICAgICAgICAgICAgIGUuYXR0cignc3JjJywgJy9mZXRjaEltYWdlP2ltYWdlX2lkPScgKyBhLmFTZWNTcmMpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDI3LzEyLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9hLXNlYy1iYWNrLWltZycsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcwoKICAgICAgICAuZGlyZWN0aXZlKCdhU2VjQmFja0ltZycsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHJldHVybnsKICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzLCBlLCBhLCBjdHJsKXsKICAgICAgICAgICAgICAgICAgICAvLyAgc2VydmVyLmNhdGFsb2cuZ2V0S2V5KCkgKwogICAgICAgICAgICAgICAgICAgIGUuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgInVybCgnY2F0YWxvZy9mZXRjaEltYWdlP2ltYWdlX2lkPSIgKyBhLmFTZWNCYWNrSW1nICsgIicpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwp9KTsKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxOS8wNS8yMDE2LgogKi8KCmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvdmFsaWRhdGVJbnB1dCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ3NlY0Zvcm0nLCBbIiR0aW1lb3V0IiwgZnVuY3Rpb24gKCR0aW1lb3V0KSB7CgogICAgICAgIHZhciBpbnZhbGlkID0gImludmFsaWQiOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsCiAgICAgICAgICAgIHJlcXVpcmU6ICdzZWNGb3JtJywKICAgICAgICAgICAgc2NvcGU6IHsKICAgICAgICAgICAgICAgIHNlY0dldEZvcm1WYWxpZGF0aW9uV2hlblJlYWR5OiAiJiIsCiAgICAgICAgICAgICAgICBzZWNJc1ZhbGlkRm9ybTogIiYiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogInNlY0Zvcm1DdHJsIiwKICAgICAgICAgICAgY29udHJvbGxlcjogW2Z1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgICB2YXIgY3RybDsKICAgICAgICAgICAgICAgIHZhciB0b0xhdGVUb0NoZWNrID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmdldEZvcm1WYWxpZGF0aW9uV2hlblJlYWR5OwogICAgICAgICAgICAgICAgdGhpcy5tb2RlbHMgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMuc2VuZGVycyA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5zZXRCdXR0b25DdHJsID0gZnVuY3Rpb24gKGN0cmwpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRlcnMucHVzaChjdHJsKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IGZ1bmN0aW9uIChpZCwgdmFsaWQsIG93bmVyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkRm9ybSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1vZGVscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLm1vZGVsc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsLmlkID09IGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC52YWxpZCA9IHZhbGlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwub3duZXIgPSBvd25lcjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YWxpZEZvcm0gPSAhdmFsaWRGb3JtID8gZmFsc2UgOiBtb2RlbC52YWxpZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbmRlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kZXJzW2ldLmZvcm1Jc1ZhbGlkKHZhbGlkRm9ybSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRGb3JtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNWYWxpZEZvcm0oe3ZhbGlkOiB2YWxpZEZvcm19KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0b0xhdGVUb0NoZWNrICYmIHRoaXMuZ2V0Rm9ybVZhbGlkYXRpb25XaGVuUmVhZHkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRGb3JtVmFsaWRhdGlvbldoZW5SZWFkeSh7dmFsaWQ6IHZhbGlkRm9ybX0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1Jc1ZhbGlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb2RlbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gdGhpcy5tb2RlbHNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlbC52YWxpZCA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVdhdGNoZXIgPSBmdW5jdGlvbiAoaWQsIHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQ6IHZhbGlkCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9ybVZhbGlkYXRpb25XaGVuUmVhZHkgPSBmdW5jdGlvbiAoX2dldEZvcm1WYWxpZGF0aW9uV2hlblJlYWR5KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9nZXRGb3JtVmFsaWRhdGlvbldoZW5SZWFkeSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEZvcm1WYWxpZGF0aW9uV2hlblJlYWR5ID0gX2dldEZvcm1WYWxpZGF0aW9uV2hlblJlYWR5CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLnNldEN0cmwgPSBmdW5jdGlvbiAoX2N0cmwpIHsKICAgICAgICAgICAgICAgICAgICBjdHJsID0gX2N0cmw7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuaXNWYWxpZEZvcm07CiAgICAgICAgICAgICAgICB0aGlzLnNldElzVmFsaWRGb3JtID0gZnVuY3Rpb24gKF9pc1ZhbGlkRm9ybSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNWYWxpZEZvcm0gPSBfaXNWYWxpZEZvcm07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuc2V0VG9MYXRlVG9DaGVjayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0b0xhdGVUb0NoZWNrID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5zZXREaXNhYmxlVW50aWxTb21lQ2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zZW5kZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZGVyc1tpXS5zZXREaXNhYmxlVW50aWxTb21lQ2hhbmdlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUFsbG93VG9DaGFuZ2VJbnZhbGlkQ2xhc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbmRlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kZXJzW2ldLmNoYW5nZUFsbG93VG9DaGFuZ2VJbnZhbGlkQ2xhc3MoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBsaW5rOiB7CiAgICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uIChzLCBlLCBhLCBjdHJsKSB7CiAgICAgICAgICAgICAgICAgICAgZS5hZGRDbGFzcygic2VjRm9ybSIpOwogICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0Q3RybChjdHJsKTsKICAgICAgICAgICAgICAgICAgICBpZiAocy5zZWNJc1ZhbGlkRm9ybSkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldElzVmFsaWRGb3JtKHMuc2VjSXNWYWxpZEZvcm0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwb3N0OiBmdW5jdGlvbiAocywgZSwgYSwgY3RybCkgewogICAgICAgICAgICAgICAgICAgIGN0cmwudXBkYXRlU3RhdGUoLTEsIG51bGwsIG51bGwpOwogICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY0dldEZvcm1WYWxpZGF0aW9uV2hlblJlYWR5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0Rm9ybVZhbGlkYXRpb25XaGVuUmVhZHkocy5zZWNHZXRGb3JtVmFsaWRhdGlvbldoZW5SZWFkeSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChhLnNlY0Rpc2FibGVVbnRpbFNvbWVDaGFuZ2UgPT0gJ3RydWUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0RGlzYWJsZVVudGlsU29tZUNoYW5nZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9XSkuCiAgICBkaXJlY3RpdmUoJ3NlY1NlbmRlcicsIFsiJGNvbXBpbGUiLCBmdW5jdGlvbiAoJGNvbXBpbGUpIHsKCiAgICAgICAgdmFyIGludmFsaWQgPSAiaW52YWxpZCI7CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsCiAgICAgICAgICAgIHJlcXVpcmU6IFsnc2VjU2VuZGVyJywgJ15zZWNGb3JtJ10sCiAgICAgICAgICAgIHNjb3BlOiB7CiAgICAgICAgICAgICAgICBzZWNTZW5kOiAnJicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29udHJvbGxlckFzOiAic2VuZGVyQ3RybCIsCiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsiJHNjb3BlIiwgZnVuY3Rpb24gKHMpIHsKCiAgICAgICAgICAgICAgICB2YXIgYnV0dG9uOwogICAgICAgICAgICAgICAgdmFyIGFsbG93VG9DaGFuZ2VJbnZhbGlkQ2xhc3MgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5zZXRCdXR0b24gPSBmdW5jdGlvbiAoX2J1dHRvbikgewogICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IF9idXR0b247CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLmhhc0NsYXNzKGludmFsaWQpKSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzLnNlY1NlbmQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuZm9ybUlzVmFsaWQgPSBmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYWxsb3dUb0NoYW5nZUludmFsaWRDbGFzcykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcyhpbnZhbGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKGludmFsaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQWxsb3dUb0NoYW5nZUludmFsaWRDbGFzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBhbGxvd1RvQ2hhbmdlSW52YWxpZENsYXNzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5zZXREaXNhYmxlVW50aWxTb21lQ2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGFsbG93VG9DaGFuZ2VJbnZhbGlkQ2xhc3MgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoaW52YWxpZCk7CiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGxpbms6IHsKICAgICAgICAgICAgICAgIHByZTogZnVuY3Rpb24gKHMsIGUsIGEsIGN0cmxzKSB7CiAgICAgICAgICAgICAgICAgICAgZS5hZGRDbGFzcygic2VjLXNlbmRlciIpOwogICAgICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IGEuYUhpbnQgfHwgIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQoIjxidXR0b24gaWQ9JyIgKyBhLmFWYWx1ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyAvZywiXyIpICsgIl9idG4iICsgZGVzY3JpcHRpb24gKyAiJyB0eXBlPSdidXR0b24nIGNsYXNzPSdzZWMtc2VuZGVyLWEgaW52YWxpZCcgcm9sZT0nYnV0dG9uJyBkYXRhLW5nLWNsaWNrPSdzZW5kZXJDdHJsLnNlbmQoKSc+IiArIGEuYVZhbHVlICsgIjwvYnV0dG9uPiIpOwogICAgICAgICAgICAgICAgICAgICRjb21waWxlKGJ1dHRvbikocyk7CiAgICAgICAgICAgICAgICAgICAgZS5hcHBlbmQoYnV0dG9uKTsKCiAgICAgICAgICAgICAgICAgICAgY3RybHNbMF0uc2V0QnV0dG9uKGJ1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgY3RybHNbMV0uc2V0QnV0dG9uQ3RybChjdHJsc1swXSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcG9zdDogZnVuY3Rpb24gKHMsIGUsIGEsIGN0cmwpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9XSkuCiAgICBkaXJlY3RpdmUoJ3NlY1ZpZXcnLCBbIiRjb21waWxlIiwgIiR0aW1lb3V0IiwgZnVuY3Rpb24gKCRjb21waWxlLCAkdGltZW91dCkgewoKICAgICAgICBmdW5jdGlvbiB0aHJvd0ludmFsaWRPYmplY3RGb3JtYXQob2JqLCBlKSB7CgogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZSkpOwogICAgICAgICAgICB0aHJvdyAgIi0tLS0tLS0tLS0tICBJbnZhbGlkIG9iamVjdCBmb3JtYXQgISBcblxuIiArCiAgICAgICAgICAgICJUaGUgZWxlbWVudCBtdXN0IGJlIGxpa2UgdGhpczpcblxuIiArCiAgICAgICAgICAgICJ2YXIgb2JqID0ge1xuIiArCiAgICAgICAgICAgICIgICBlcnJvcjogJ3RoZSB1cHBlciB0ZXh0IG1lc3NhZ2UnLCBcbiIgKwogICAgICAgICAgICAiICAgaW5mbzogJ3RoZSBidXR0b24gaW5mb3JtYXRpb24gYWJvdXQgdGhpcyByZXF1aXJlbWVudCcsIFxuIiArCiAgICAgICAgICAgICIgICBtaW46ICdhZGQgdGhpcyBwYXJhbSBpZiB5b3UgdXNlIHNlY01pbkxlbmd0aCBkaXJlY3RpdmUnLCBcbiIgKwogICAgICAgICAgICAiICAgbWF4OiAnYWRkIHRoaXMgcGFyYW0gaWYgeW91IHVzZSBzZWNNYXhMZW5ndGggZGlyZWN0aXZlJywgXG4iICsKICAgICAgICAgICAgIiAgIHJlZ2V4OiAnYWRkIHRoaXMgcGFyYW0gaWYgeW91IHVzZSBzZWNQYXR0ZXJuIGRpcmVjdGl2ZScsIFxuIiArCiAgICAgICAgICAgICIgICBtb2RlbDogJ2FkZCB0aGlzIHBhcmFtIGlmIHlvdSB1c2Ugc2VjQ29tcGFyZVRvIGRpcmVjdGl2ZSwgbW9kZWwgaGF2ZSB0byBwYXNzIHNlY01vZGVsQ29tcGFyZVRvIG1vZGVsIHRvIGNvbXBhcmUnLCBcbiIgKwogICAgICAgICAgICAifVxuIiArCiAgICAgICAgICAgICJcbllvdSBvYmplY3QgaXM6ICIgKyBKU09OLnN0cmluZ2lmeShvYmopICsgIlxuXG5cblxuIjsKCiAgICAgICAgICAgIC8vZ2V0LWZvcm0tdmFsaWRhdGlvbi13aGVuLXJlYWR5CiAgICAgICAgICAgIC8vYS1oaW50OiBwYXNzIHRoaXMgdGV4dCBoYXMgYSB0ZXh0ICwKCiAgICAgICAgICAgIC8vIiAgIGEtdHlwZTogJ2FkZCB0aGlzIHBhcmFtIGlmIHlvdSB3b250IHRvIGRpc3BsYXkgYSBkaWZmZXJlbnQgY29udHJvbDonLCBcbiIgKwogICAgICAgICAgICAvLyIgICAgICAgICBzZWxlY3Q6ICd0byBzaG93IGEgc2VsZWN0IGRlc2lnbiAocmVxdWlyZWQgZGlyZWN0aXZlcyB0byB0aGlzIHR5cGU6IHNlYy1zZWxlY3Qtb3B0aW9ucywgYS1zaG93ICknLCBcbiIgKwoKICAgICAgICAgICAgLy9zZWMtc2VsZWN0LW9wdGlvbnMKICAgICAgICAgICAgLy9hLXNob3cKICAgICAgICAgICAgLy9hLXN0YXIKCiAgICAgICAgICAgIC8vc2VjTW9kZWw6ICc9JywKICAgICAgICAgICAgLy9zZWNSZXF1aXJlOiAnPScsCiAgICAgICAgICAgIC8vc2VjTWluTGVuZ3RoOiAnPScsCiAgICAgICAgICAgIC8vc2VjTWF4TGVuZ3RoOiAnPScsCiAgICAgICAgICAgIC8vc2VjUGF0dGVybjogJz0nLAogICAgICAgICAgICAvLwogICAgICAgICAgICAvL3NlY0NvbXBhcmVUbzogJz0nLAogICAgICAgICAgICAvL3NlY01vZGVsQ29tcGFyZVRvOiAnPScsCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vc2VjLXNlbmQ6ICcmJywKICAgICAgICB9CgogICAgICAgIHZhciBLZXlzID0gewogICAgICAgICAgICBzZWNSZXF1aXJlZDogMCwKICAgICAgICAgICAgc2VjTWluTGVuZ3RoOiAxLAogICAgICAgICAgICBzZWNNYXhMZW5ndGg6IDIsCiAgICAgICAgICAgIHNlY1BhdHRlcm46IDMsCiAgICAgICAgICAgIHNlY0NvbXBhcmVUbzogNAogICAgICAgIH07CgogICAgICAgIHZhciBUeXBlcyA9IHsKICAgICAgICAgICAgdGV4dDogInRleHQiLAogICAgICAgICAgICB0ZXh0YXJlYTogInRleHRhcmVhIiwKICAgICAgICAgICAgc2VsZWN0OiAic2VsZWN0IiwKICAgICAgICAgICAgcGFzc3dvcmQ6ICJwYXNzd29yZCIsCiAgICAgICAgICAgIGNyZWRpdENhcmQ6ICJjcmVkaXRDYXJkIiwKICAgICAgICAgICAgY2N2TnVtYmVyOiAiY2N2TnVtYmVyIiwKICAgICAgICAgICAgY2hlY2tib3g6ICJjaGVja2JveCIKICAgICAgICB9OwoKICAgICAgICB2YXIgaW52YWxpZCA9ICJpbnZhbGlkIjsKICAgICAgICB2YXIgYW5pbWF0ZWQgPSAiYW5pbWF0ZWQiOwogICAgICAgIHZhciBpbl9mb2N1cyA9ICJpbi1mb2N1cyI7CiAgICAgICAgdmFyIGhpZGRlbiA9ICJoaWRkZW4iOwogICAgICAgIHZhciBkaXNwbGF5ZWQgPSAiZGlzcGxheWVkIjsKICAgICAgICB2YXIgc2VsZWN0X3ZhbHVlID0gInNlbGVjdC12YWx1ZSI7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJywKICAgICAgICAgICAgcmVxdWlyZTogWydzZWNWaWV3JywgJ15zZWNGb3JtJ10sCiAgICAgICAgICAgIHNjb3BlOiB7CiAgICAgICAgICAgICAgICBzZWNNb2RlbDogJz0nLAogICAgICAgICAgICAgICAgc2VjUmVxdWlyZTogJz0nLAogICAgICAgICAgICAgICAgc2VjTWluTGVuZ3RoOiAnPScsCiAgICAgICAgICAgICAgICBzZWNNYXhMZW5ndGg6ICc9JywKICAgICAgICAgICAgICAgIHNlY1BhdHRlcm46ICc9JywKICAgICAgICAgICAgICAgIHNlY1NlbGVjdE9wdGlvbnM6ICc9JywKICAgICAgICAgICAgICAgIHNlY0Rpc2FibGVWYWxpZGF0aW9uOiAnPScsCiAgICAgICAgICAgICAgICBzZWNDYXJkTnVtYmVyOiAiPSIsCgogICAgICAgICAgICAgICAgc2VjQ29tcGFyZVRvOiAnPScsCiAgICAgICAgICAgICAgICBzZWNNb2RlbENvbXBhcmVUbzogJz0nLAoKICAgICAgICAgICAgICAgIHNlY0lzVmFsaWQ6ICcmJywKICAgICAgICAgICAgICAgIHNlY1NlbGVjdENoYW5nZTogJyYnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsiJHNjb3BlIiwgZnVuY3Rpb24gKHMpIHsKCiAgICAgICAgICAgICAgICB2YXIgaWQ7CiAgICAgICAgICAgICAgICB2YXIgaW5wdXQ7CiAgICAgICAgICAgICAgICB2YXIgbGFiZWw7CiAgICAgICAgICAgICAgICB2YXIgaXNGaWVsZFZhbGlkOwogICAgICAgICAgICAgICAgdmFyIGhpbnQ7CiAgICAgICAgICAgICAgICB2YXIgdWw7CiAgICAgICAgICAgICAgICB2YXIgZm9ybTsKICAgICAgICAgICAgICAgIHZhciBkb05vdFNob3dJbmZvID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgZGlzYWJsZVZhbGlkYXRpb24gPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZhciBpc0NhcmROdW1iZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZhciBjdHJsID0gdGhpczsKICAgICAgICAgICAgICAgIHZhciBzdGF0aWNsYWJlbDsKCiAgICAgICAgICAgICAgICBjdHJsLmNvbXBhcmVUbzsKICAgICAgICAgICAgICAgIHMudmFsaWRhdGlvbnMgPSBbXTsKICAgICAgICAgICAgICAgICQoJyNjcmVkaXRDYXJkJykub24oJ2tleXVwJywgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3ZhbCA9ICcnOwogICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKC9ccy9nLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCB2YWwubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaSU0ID09IDAgJiYgaSA+IDApIG5ld3ZhbCA9IG5ld3ZhbC5jb25jYXQoJyAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3dmFsID0gbmV3dmFsLmNvbmNhdCh2YWxbaV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChuZXd2YWwpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY3RybC5nZXRMaXN0VmFsaWRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpID0gIiI7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLnZhbGlkYXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gcy52YWxpZGF0aW9uc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRpb24uaW5mbyAmJiB2YWxpZGF0aW9uLmluZm8gIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpICs9ICI8bGk+PGE+IiArIHZhbGlkYXRpb24uaW5mbyArICIgPC9hPjwvbGk+IgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGkgKz0gIjxsaSBzdHlsZT0nZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgaGVpZ2h0OiAwJz48YT48L2E+PC9saT4iCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgY3RybC5zZXRDb21wYXJlVG8gPSBmdW5jdGlvbiAoX2NvbXBhcmVUbykgewogICAgICAgICAgICAgICAgICAgIGN0cmwuY29tcGFyZVRvID0gX2NvbXBhcmVUbzsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHNlY1NlbGVjdENoYW5nZTsKICAgICAgICAgICAgICAgIGN0cmwuc2V0U2VjU2VsZWN0Q2hhbmdlID0gZnVuY3Rpb24gKF9zZWNTZWxlY3RDaGFuZ2UpIHsKICAgICAgICAgICAgICAgICAgICBzZWNTZWxlY3RDaGFuZ2UgPSBfc2VjU2VsZWN0Q2hhbmdlOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgc2VjcmV0RmllbGQ7CiAgICAgICAgICAgICAgICBjdHJsLnNldFNlY3JldEZpZWxkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHNlY3JldEZpZWxkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZihzLnNlY01vZGVsLmxlbmd0aCA9PSAxMikgewogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnQoKS5hZGRDbGFzcygnY2FyZC1udW1iZXItZm91ci1zdGFyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbCgiKioqKioqKioiICsgcy5zZWNNb2RlbC5zdWJzdHJpbmcoOCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihzLnNlY01vZGVsLmxlbmd0aCA9PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbCgiKioqIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vaW5wdXQuYXR0cigidHlwZSIsICJwYXNzd29yZCIpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBjdHJsLnJlbW92ZVNlY3JldEZpZWxkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGlmKHNlY3JldEZpZWxkKXsKICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2NhcmQtbnVtYmVyLWZvdXItc3RhcicpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWNyZXRGaWVsZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY3JlZGl0Q2FyZCIpLnZhbHVlLmxlbmd0aCA+IDEpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zZWNNb2RlbCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhyZWYudG9TdHJpbmcoKS5pbmNsdWRlcygiYWNjb3VudFBheW1lbnRFZGl0IikpewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiY3Z2X251bWJlciIpLml0ZW0oMCkuc2V0QXR0cmlidXRlKCJtYXhsZW5ndGgiLCAzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIGN0cmwuc2V0RG9Ob3RTaG93SW5mbyA9IGZ1bmN0aW9uIChfZG9Ob3RTaG93SW5mbykgewogICAgICAgICAgICAgICAgICAgIGRvTm90U2hvd0luZm8gPSBfZG9Ob3RTaG93SW5mbzsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY3RybC5zZXRDYXJkTnVtYmVyRm91ckRpZ2l0cyA9IGZ1bmN0aW9uIChfQ2FyZE51bWJlckZvdXJEaWdpdHMpIHsKICAgICAgICAgICAgICAgICAgICBpc0NhcmROdW1iZXIgPSBfQ2FyZE51bWJlckZvdXJEaWdpdHM7CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICBjdHJsLnNldERpc2FibGVWYWxpZGF0aW9uID0gZnVuY3Rpb24gKF9kaXNhYmxlVmFsaWRhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGRpc2FibGVWYWxpZGF0aW9uID0gX2Rpc2FibGVWYWxpZGF0aW9uID09IHVuZGVmaW5lZCA/IGZhbHNlIDogX2Rpc2FibGVWYWxpZGF0aW9uOwogICAgICAgICAgICAgICAgICAgIGN0cmwuY2hhbmdlKGlucHV0LnZhbCgpKTsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIGN0cmwucHVzaFZhbGlkYXRpb24gPSBmdW5jdGlvbiAodmFsaWRhdGlvbiwga2V5KSB7CgogICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb24ua2V5ID0ga2V5OwogICAgICAgICAgICAgICAgICAgICAgICBzLnZhbGlkYXRpb25zLnB1c2godmFsaWRhdGlvbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbGlkYXRpb24ucmVnZXhlcykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByZWdleEluZGV4ID0gMDsgcmVnZXhJbmRleCA8IHZhbGlkYXRpb24ucmVnZXhlcy5sZW5ndGg7IHJlZ2V4SW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZ2V4Zm9ybWF0ID0gdmFsaWRhdGlvbi5yZWdleGVzW3JlZ2V4SW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhmb3JtYXQua2V5ID0ga2V5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy52YWxpZGF0aW9ucy5wdXNoKHJlZ2V4Zm9ybWF0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIGZpcnN0TG9hZGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGN0cmwubW9kZWxDb21wYXJlVG9DaGFuZ2UgPSBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdExvYWRlcikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbCsiIikudHJpbSgpID09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5jb21wYXJlVG8udmFsKHZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuY2hhbmdlKGlucHV0LnZhbCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5ibHVyKGlucHV0LnZhbCgpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZmlyc3RMb2FkZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkTGlzdDsKICAgICAgICAgICAgICAgIGN0cmwuZmlsbFNlbGVjdCA9IGZ1bmN0aW9uIChhcnIsIG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExpc3QgPSBhcnI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RMaXN0ID0gY3RybC5nZXRTZWxlY3RsaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdExpc3QuZW1wdHkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gc2VsZWN0ZWRMaXN0W2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4gPSAkKCI8c3BhbiBkYXRhLW5nLWNsaWNrPSdzZWxlY3RJdGVtQ2hhbmdlTW9kZWwoIiArIGkgKyAiKSciICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBkYXRhLW5nLW1vdXNlZW50ZXI9J3NlbGVjdEl0ZW1Nb3VzZUluKCknIGRhdGEtbmctbW91c2VsZWF2ZT0nc2VsZWN0SXRlbU1vdXNlT3V0KCknPiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBpdGVtW25hbWVdICsgIjwvc3Bhbj4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4gPSAkKCI8c3BhbiBkYXRhLW5nLWNsaWNrPSdzZWxlY3RJdGVtQ2hhbmdlTW9kZWwoIiArIGkgKyAiKSciICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBkYXRhLW5nLW1vdXNlZW50ZXI9J3NlbGVjdEl0ZW1Nb3VzZUluKCknIGRhdGEtbmctbW91c2VvdXQ9J3NlbGVjdEl0ZW1Nb3VzZU91dCgpJz4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgaXRlbSArICI8L3NwYW4+Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5zZWNNb2RlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY01vZGVsICsgIiIgPT0gaXRlbSArICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29tcGlsZShzcGFuKShzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdExpc3QuYXBwZW5kKHNwYW4pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQgJiYgcy5zZWNNb2RlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zZWNNb2RlbCA9IGFyclswXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcy5zZWxlY3RJdGVtQ2hhbmdlTW9kZWwgPSBmdW5jdGlvbiAoaW5kZXgpIHsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSBzZWxlY3RlZExpc3RbaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIGlmICghbGFiZWwuaGFzQ2xhc3MoYW5pbWF0ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLmFkZENsYXNzKGFuaW1hdGVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zZWNNb2RlbCA9IHZhbGlkYXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY01vZGVsID09IHZhbGlkYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuZ2V0U2VsZWN0bGlzdCgpLmZhZGVPdXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuc2VjTW9kZWwgPSB2YWxpZGF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzZWNTZWxlY3RDaGFuZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VjU2VsZWN0Q2hhbmdlKHt2YWx1ZTogdmFsaWRhdGlvbn0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcy5zZWxlY3RJdGVtTW91c2VJbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX19fX19zZWxlY3RJdGVtTW91c2VPdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKF9fX19fc2VsZWN0SXRlbU1vdXNlT3V0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBfX19fX3NlbGVjdEl0ZW1Nb3VzZU91dDsKICAgICAgICAgICAgICAgIHMuc2VsZWN0SXRlbU1vdXNlT3V0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RMaXN0ID0gY3RybC5nZXRTZWxlY3RsaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdExpc3QuY3NzKCJkaXNwbGF5IikgIT0gIm5vbmUiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9fX19fc2VsZWN0SXRlbU1vdXNlT3V0ID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5nZXRTZWxlY3RsaXN0KCkuZmFkZU91dCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAxMjAwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGN0cmwuY2hhbmdlID0gZnVuY3Rpb24gKHZhbCkgewoKICAgICAgICAgICAgICAgICAgICBpZiAodmFsID09IHVuZGVmaW5lZCB8fCBzLnNlY01vZGVsID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09ICdzdHJpbmcnICYmIHR5cGVvZiBzLnNlY01vZGVsID09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHMuc2VjTW9kZWwgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHMuc2VjTW9kZWw7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWQ7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc2FibGVWYWxpZGF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NoZWNrYm94RGVzaWduKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gY2hlY2tDaGVja2JveFZhbGlkYXRpb25zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUZXh0Q2hlY2tib3hWYWxpZGF0aW9ucyh2YWxpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNTZWxlY3RlZERlc2lnbigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGNoZWNrU2VsZWN0VmFsaWRhdGlvbnModmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJChsYWJlbCkuaGFzQ2xhc3MoYW5pbWF0ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobGFiZWwpLmFkZENsYXNzKGFuaW1hdGVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHMudmFsaWRhdGlvbnMubGVuZ3RoID09IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VjU2VsZWN0Q2hhbmdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjU2VsZWN0Q2hhbmdlKHt2YWx1ZSA6IHZhbH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCh2YWwrIiIpLnRyaW0oKSA9PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMudmFsaWRhdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocy5zZWNNb2RlbCsiIikudHJpbSgpID09ICcnICYmIGlucHV0Lmhhc0NsYXNzKGluX2ZvY3VzKSAmJiAhZG9Ob3RTaG93SW5mbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5maW5kKCdsaScpLnNsaWRlRG93bigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5oYXNDbGFzcyhpbl9mb2N1cykgJiYgbGFiZWwuaGFzQ2xhc3MoYW5pbWF0ZWQpICYmIHMuc2VjTW9kZWwgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5yZW1vdmVDbGFzcyhhbmltYXRlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ2FyZE51bWJlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDYXJkTnVtYmVyRm91ckRpZ2l0cygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBnZXRWYWxpZGF0aW9uKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJChsYWJlbCkuaGFzQ2xhc3MoYW5pbWF0ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChsYWJlbCkuYWRkQ2xhc3MoYW5pbWF0ZWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NhcmROdW1iZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2FyZE51bWJlckZvdXJEaWdpdHMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gY2hlY2tWaWV3VmFsaWRhdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewoKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS51cGRhdGVTdGF0ZShpZCwgdmFsaWQsIGhpbnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tTZWxlY3RWYWxpZGF0aW9ucyh2YWwpIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX3Byb3BlcnR5IGluIHZhbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC5oYXNPd25Qcm9wZXJ0eShfcHJvcGVydHkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsICE9ICIiICYmIHZhbCAhPSBudWxsICYmIHZhbCAhPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY3RybC5ibHVyID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT0gdW5kZWZpbmVkIHx8ICh2YWwrIiIpLnRyaW0oKSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICgodmFsKyIiKS50cmltKCkgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljbGFiZWwuYWRkQ2xhc3MoZGlzcGxheWVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljbGFiZWwucmVtb3ZlQ2xhc3MoaGlkZGVuKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwucmVtb3ZlQ2xhc3MoYW5pbWF0ZWQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYXJkTnVtYmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDYXJkTnVtYmVyRm91ckRpZ2l0cygpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljbGFiZWwuYWRkQ2xhc3MoaGlkZGVuKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljbGFiZWwucmVtb3ZlQ2xhc3MoZGlzcGxheWVkKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gZ2V0VmFsaWRhdGlvbih0cnVlKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaWVsZFZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmllbGRWYWxpZCh7dmFsaWQ6IHZhbGlkfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHVsLmZpbmQoJ2xpJykuc2xpZGVVcCgpOwogICAgICAgICAgICAgICAgICAgIGlucHV0LnJlbW92ZUNsYXNzKGluX2ZvY3VzKTsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIGN0cmwuZm9jdXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWwuYWRkQ2xhc3MoYW5pbWF0ZWQpOwogICAgICAgICAgICAgICAgICAgIGlucHV0LmFkZENsYXNzKGluX2ZvY3VzKTsKICAgICAgICAgICAgICAgICAgICBzdGF0aWNsYWJlbC5hZGRDbGFzcyhoaWRkZW4pOwogICAgICAgICAgICAgICAgICAgIHN0YXRpY2xhYmVsLnJlbW92ZUNsYXNzKGRpc3BsYXllZCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ2FyZE51bWJlcikgewogICAgICAgICAgICAgICAgICAgICAgICBhZGRDYXJkTnVtYmVyRm91ckRpZ2l0cygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN0cmwuY2hhbmdlKHMuc2VjTW9kZWwpOwogICAgICAgICAgICAgICAgICAgIHNldE5vcm1hbEhpbnQoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkQ2FyZE51bWJlckZvdXJEaWdpdHMoKSB7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50KCkuYWRkQ2xhc3MoJ2NhcmQtbnVtYmVyLWZvdXItZGlnaXRzJyk7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWRkQ2xhc3MoJ2NhcmQtbnVtYmVyLWZvdXItZGlnaXRzJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2FyZE51bWJlckZvdXJEaWdpdHMoKSB7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2NhcmQtbnVtYmVyLWZvdXItZGlnaXRzJyk7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQucmVtb3ZlQ2xhc3MoJ2NhcmQtbnVtYmVyLWZvdXItZGlnaXRzJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY3RybC5nZXRTZWxlY3RsaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dC5maW5kKCIuc2VsZWN0TGlzdCIpOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgcy5sYWJlbENsaWNrZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZm9ybS5zZXRUb0xhdGVUb0NoZWNrKCk7CgogICAgICAgICAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkRGVzaWduKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkTGlzdCA9IGN0cmwuZ2V0U2VsZWN0bGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRMaXN0LmNoaWxkcmVuKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMaXN0LmZhZGVUb2dnbGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChpc0NoZWNrYm94RGVzaWduKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy5zZWNNb2RlbCA9ICFzLnNlY01vZGVsOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghbGFiZWwuaGFzQ2xhc3MoYW5pbWF0ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICBzLmxhYmVsT3V0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF9fX19fc2VsZWN0SXRlbU1vdXNlT3V0ID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IGN0cmwuZ2V0U2VsZWN0bGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdC5jc3MoImRpc3BsYXkiKSAhPSAibm9uZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuZmFkZU91dCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCk7CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICBjdHJsLnNldEl0ZW1zID0gZnVuY3Rpb24gKF9pbnB1dCwgX2xhYmVsLCBfdWwsIF9mb3JtLCBfaWQsIF9zdGF0aWNMYWJlbCkgewoKICAgICAgICAgICAgICAgICAgICBpZCA9IF9pZDsKICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IF9pbnB1dDsKICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IF9sYWJlbDsKICAgICAgICAgICAgICAgICAgICBzdGF0aWNsYWJlbCA9IF9zdGF0aWNMYWJlbDsKICAgICAgICAgICAgICAgICAgICB1bCA9IF91bDsKICAgICAgICAgICAgICAgICAgICBoaW50ID0gbGFiZWwudGV4dCgpOwogICAgICAgICAgICAgICAgICAgIGZvcm0gPSBfZm9ybTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkOwogICAgICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlVmFsaWRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDaGVja2JveERlc2lnbigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGNoZWNrQ2hlY2tib3hWYWxpZGF0aW9ucygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzU2VsZWN0ZWREZXNpZ24oKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBzLnZhbGlkYXRpb25zLmxlbmd0aCA9PSAwID8gdHJ1ZSA6IGNoZWNrU2VsZWN0VmFsaWRhdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gY2hlY2tWaWV3VmFsaWRhdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3JtLm5vdGlmeVdhdGNoZXIoaWQsIHZhbGlkKTsKCgogICAgICAgICAgICAgICAgICAgIGlucHV0Lm9uKHsKICAgICAgICAgICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1NlbGVjdGVkRGVzaWduKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmJsdXIocy5zZWNNb2RlbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZWxlY3RlZERlc2lnbigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5jaGFuZ2VBbGxvd1RvQ2hhbmdlSW52YWxpZENsYXNzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFRvTGF0ZVRvQ2hlY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5jaGFuZ2VBbGxvd1RvQ2hhbmdlSW52YWxpZENsYXNzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRleHRDaGVja2JveFZhbGlkYXRpb25zKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHMudmFsaWRhdGlvbnNbMF0uZG9udENoYW5nZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC50ZXh0KHMudmFsaWRhdGlvbnNbMF0uaW5mbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLnJlbW92ZUNsYXNzKGludmFsaWQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwudGV4dChzLnZhbGlkYXRpb25zWzBdLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwuYWRkQ2xhc3MoaW52YWxpZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrQ2hlY2tib3hWYWxpZGF0aW9ucygpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5zZWNNb2RlbCA9PSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFZhbGlkYXRpb24oY2hhbmdlSGludCkgewogICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHMudmFsaWRhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb24gPSBzLnZhbGlkYXRpb25zW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2YWxpZGF0aW9uLmtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5cy5zZWNSZXF1aXJlZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzLnNlY01vZGVsKyIiKS50cmltKCkgPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VIaW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldEludmFsaWRUZXh0VG9TaG93KHZhbGlkYXRpb24uZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5cy5zZWNNaW5MZW5ndGg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY01vZGVsLmxlbmd0aCA8IHZhbGlkYXRpb24ubWluICYmIChzLnNlY01vZGVsICsgIiIpLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlSGludCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRJbnZhbGlkVGV4dFRvU2hvdyh2YWxpZGF0aW9uLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEtleXMuc2VjTWF4TGVuZ3RoOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5zZWNNb2RlbC5sZW5ndGggPiB2YWxpZGF0aW9uLm1heCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZUhpbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0SW52YWxpZFRleHRUb1Nob3codmFsaWRhdGlvbi5lcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlzLnNlY1BhdHRlcm46CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG5ldyBSZWdFeHAodmFsaWRhdGlvbi5yZWdleCkudGVzdChzLnNlY01vZGVsKSkgJiYgKGlucHV0LnZhbCgpKS5sZW5ndGggIT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZUhpbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0SW52YWxpZFRleHRUb1Nob3codmFsaWRhdGlvbi5lcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlzLnNlY0NvbXBhcmVUbzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0cmwuY29tcGFyZVRvLnZhbCgpICE9IHMuc2VjTW9kZWwgJiYgY3RybC5jb21wYXJlVG8udmFsKCkgIT0gIiIpIHsgLy8gJiYgaW5wdXQudmFsKCkgIT0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRJbnZhbGlkVGV4dFRvU2hvdyh2YWxpZGF0aW9uLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEtleXMuc2VjQ2FyZE51bWJlcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAoIShzLnNlY01vZGVsLmxlbmd0aCA9PSB2YWxpZGF0aW9uLmV4YWN0bHkgLSA0ICYmIChpbnB1dC52YWwoKSAtIDApID09IGlucHV0LnZhbCgpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaW5wdXQudmFsKCkuaW5kZXhPZignLScpID09IC0xICYmICBpbnB1dC52YWwoKS5pbmRleE9mKCcrJykgPT0gLTEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmltbWVkU2VjTW9kZWwgPSBzLnNlY01vZGVsLnJlcGxhY2UoL1xzL2csJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShuZXcgUmVnRXhwKHZhbGlkYXRpb24ucmVnZXgpLnRlc3QodHJpbW1lZFNlY01vZGVsKSAmJiB0cmltbWVkU2VjTW9kZWwubGVuZ3RoID09IHZhbGlkYXRpb24uZXhhY3RseSAtIDQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlSGludCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRJbnZhbGlkVGV4dFRvU2hvdyh2YWxpZGF0aW9uLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzZXROb3JtYWxIaW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dJbnZhbGlkT2JqZWN0Rm9ybWF0KHZhbGlkYXRpb24pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaGVja1ZpZXdWYWxpZGF0aW9ucygpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkSW5wdXQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY01vZGVsKSB7CgogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLnZhbGlkYXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbiA9IHMudmFsaWRhdGlvbnNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2YWxpZGF0aW9uLmtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEtleXMuc2VjUmVxdWlyZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHMuc2VjTW9kZWwrIiIpLnRyaW0oKSA9PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dWYWxpZGF0aW9uKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVWYWxpZGF0aW9uKGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlzLnNlY01pbkxlbmd0aDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY01vZGVsLmxlbmd0aCA8IHZhbGlkYXRpb24ubWluICYmIChzLnNlY01vZGVsICsgIiIpLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1ZhbGlkYXRpb24oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVZhbGlkYXRpb24oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlzLnNlY01heExlbmd0aDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY01vZGVsLmxlbmd0aCA+IHZhbGlkYXRpb24ubWF4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1ZhbGlkYXRpb24oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVZhbGlkYXRpb24oaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEtleXMuc2VjUGF0dGVybjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG5ldyBSZWdFeHAodmFsaWRhdGlvbi5yZWdleCkudGVzdChzLnNlY01vZGVsKSkgJiYgKGlucHV0LnZhbCgpKS5sZW5ndGggIT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dWYWxpZGF0aW9uKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVWYWxpZGF0aW9uKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5cy5zZWNDb21wYXJlVG86CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3RybC5jb21wYXJlVG8udmFsKCkgIT0gcy5zZWNNb2RlbCAmJiBjdHJsLmNvbXBhcmVUby52YWwoKSAhPSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dWYWxpZGF0aW9uKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVWYWxpZGF0aW9uKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5cy5zZWNDYXJkTnVtYmVyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyaW1tZWRTZWNNb2RlbCA9IHMuc2VjTW9kZWwucmVwbGFjZSgvXHMvZywnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShuZXcgUmVnRXhwKHZhbGlkYXRpb24ucmVnZXgpLnRlc3QodHJpbW1lZFNlY01vZGVsKSAmJiB0cmltbWVkU2VjTW9kZWwubGVuZ3RoID09IHZhbGlkYXRpb24uZXhhY3RseSAtIDQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1ZhbGlkYXRpb24oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVZhbGlkYXRpb24oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dJbnZhbGlkT2JqZWN0Rm9ybWF0KHZhbGlkYXRpb24sIGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZElucHV0OwoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoaWRlVmFsaWRhdGlvbihpbmRleCkgewogICAgICAgICAgICAgICAgICAgIHVsLmZpbmQoImxpOm50aC1jaGlsZCgiICsgKGluZGV4ICsgMSkgKyAiKSIpLnNsaWRlVXAoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaG93VmFsaWRhdGlvbihpbmRleCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5oYXNDbGFzcyhpbl9mb2N1cykgJiYgIWRvTm90U2hvd0luZm8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdWwuZmluZCgibGk6bnRoLWNoaWxkKCIgKyAoaW5kZXggKyAxKSArICIpIikuc2xpZGVEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldE5vcm1hbEhpbnQoKSB7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQucmVtb3ZlQ2xhc3MoaW52YWxpZCk7CiAgICAgICAgICAgICAgICAgICAgbGFiZWwucmVtb3ZlQ2xhc3MoaW52YWxpZCk7CiAgICAgICAgICAgICAgICAgICAgbGFiZWwudGV4dChoaW50KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldEludmFsaWRUZXh0VG9TaG93KGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWwudGV4dChlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgbGFiZWwuYWRkQ2xhc3MoaW52YWxpZCk7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWRkQ2xhc3MoaW52YWxpZCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlzU2VsZWN0ZWREZXNpZ24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnByb3AoInRhZ05hbWUiKS50b0xvd2VyQ2FzZSgpID09ICJzZWxlY3QiCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaXNDaGVja2JveERlc2lnbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQuYXR0cigidHlwZSIpID09IFR5cGVzLmNoZWNrYm94OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfV0sCgogICAgICAgICAgICBsaW5rOiB7CgogICAgICAgICAgICAgICAgcHJlOiBmdW5jdGlvbiAocywgZSwgYSwgY3RybHMpIHsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGN0cmwgPSBjdHJsc1swXTsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRUeXBlTmFtZSA9ICIiOwogICAgICAgICAgICAgICAgICAgIGUuYWRkQ2xhc3MoInNlYy12aWV3Iik7CgogICAgICAgICAgICAgICAgICAgIHMuJHdhdGNoKCdzZWNNb2RlbCcsIGZ1bmN0aW9uIChuLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwucmVtb3ZlU2VjcmV0RmllbGQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5jaGFuZ2Uobik7CiAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY1JlcXVpcmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEuYURvbnRDaGFuZ2UgPT0gInRydWUiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IEpTT04ucGFyc2Uocy5zZWNSZXF1aXJlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuZG9udENoYW5nZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnB1c2hWYWxpZGF0aW9uKHRlbXAsIEtleXMuc2VjUmVxdWlyZWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5wdXNoVmFsaWRhdGlvbihKU09OLnBhcnNlKHMuc2VjUmVxdWlyZSksIEtleXMuc2VjUmVxdWlyZWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY01pbkxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnB1c2hWYWxpZGF0aW9uKEpTT04ucGFyc2Uocy5zZWNNaW5MZW5ndGgpLCBLZXlzLnNlY01pbkxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY01heExlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnB1c2hWYWxpZGF0aW9uKEpTT04ucGFyc2Uocy5zZWNNYXhMZW5ndGgpLCBLZXlzLnNlY01heExlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY1BhdHRlcm4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5wdXNoVmFsaWRhdGlvbihKU09OLnBhcnNlKHMuc2VjUGF0dGVybiksIEtleXMuc2VjUGF0dGVybik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChhLmFEb05vdFNob3dJbmZvID09ICd0cnVlJykgewogICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldERvTm90U2hvd0luZm8odHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY0NhcmROdW1iZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRDYXJkTnVtYmVyRm91ckRpZ2l0cyh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5wdXNoVmFsaWRhdGlvbihKU09OLnBhcnNlKHMuc2VjQ2FyZE51bWJlciksIEtleXMuc2VjQ2FyZE51bWJlcik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzLnNlY1NlbGVjdENoYW5nZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldFNlY1NlbGVjdENoYW5nZShzLnNlY1NlbGVjdENoYW5nZSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoYS5zZWNOYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUeXBlTmFtZSA9IGEuc2VjTmFtZTsKICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICBzLiR3YXRjaCgnc2VjRGlzYWJsZVZhbGlkYXRpb24gJywgZnVuY3Rpb24gKG4sIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXREaXNhYmxlVmFsaWRhdGlvbihuKTsKICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdiA9ICQoIjxkaXYgY2xhc3M9J2lucHV0Q29udGFpbmVyJz48L2Rpdj4iKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGEuYVR5cGUgfHwgInRleHQiOwogICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dDsKICAgICAgICAgICAgICAgICAgICB2YXIgaGlkZUxhYmVsID0gIiI7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFhLmFIaW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVMYWJlbCA9ICJzdHlsZT0nZGlzcGxheTpub25lJyI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0T2ZOYW1lID0gIiI7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEuYUhpbnREZXNjcmlwdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRPZk5hbWUgPSBhLmFIaW50RGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9ICQoIjxsYWJlbCAiICsgaGlkZUxhYmVsICsgIiBkYXRhLW5nLWNsaWNrPSdsYWJlbENsaWNrZWQoKScgZGF0YS1uZy1tb3VzZW91dD0nbGFiZWxPdXQoKSc+IiArIGEuYUhpbnQgKyAiPC9sYWJlbD4iKTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5zZWxlY3Q6CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwuY3NzKCJ6LWluZGV4IiwgIi0xMCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwuYWRkQ2xhc3MoImFuaW1hdGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG90ID0gKGEuYVNob3cgPyAiLiIgKyBhLmFTaG93IDogIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdFRlbXAgPSAiU2VsZWN0IFByb2R1Y3QiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYS5hSGludCA9PT0gJ0NhdGVnb3J5Jyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gIjxzZWxlY3QgbmctaW5pdD0nc2VjTW9kZWwgPSBzZWNTZWxlY3RPcHRpb25zWzBdJyBuYW1lPSciICsgYS5hSGludC50b0xvd2VyQ2FzZSgpICsgJ0xpc3Rib3gnICsgcGFydE9mTmFtZSArICInIHJvbGU9J2xpc3Rib3gnIG5nLW1vZGVsPSdzZWNNb2RlbCcgbmctb3B0aW9ucz0nYyBhcyBjIiArIGRvdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIgZm9yIGMgaW4gc2VjU2VsZWN0T3B0aW9ucycgPjxvcHRpb24gdmFsdWU9Jycgc2VsZWN0ZWQ9J3NlbGVjdGVkJz48L3NlbGVjdD4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoYS5hSGludCA9PT0gJ1Byb2R1Y3QnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSAiPHNlbGVjdCBuZy1pbml0PSdzZWNNb2RlbCA9IHNlY1NlbGVjdE9wdGlvbnNbMF0nICBuYW1lPSciICsgYS5hSGludC50b0xvd2VyQ2FzZSgpICsgJ0xpc3Rib3gnICsgcGFydE9mTmFtZSArICInIHJvbGU9J2xpc3Rib3gnIG5nLW1vZGVsPSdzZWNNb2RlbCcgbmctb3B0aW9ucz0nYyBhcyBjIiArIGRvdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIgZm9yIGMgaW4gc2VjU2VsZWN0T3B0aW9ucycgPjxvcHRpb24gdmFsdWU9Jycgc2VsZWN0ZWQ9J3NlbGVjdGVkJz48L3NlbGVjdD4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gIjxzZWxlY3QgbmFtZT0nIiArIGEuYUhpbnQudG9Mb3dlckNhc2UoKSArICdMaXN0Ym94JyArIHBhcnRPZk5hbWUgKyAiJyByb2xlPSdsaXN0Ym94JyBuZy1tb2RlbD0nc2VjTW9kZWwnIG5nLW9wdGlvbnM9J2MgYXMgYyIgKyBkb3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAiIGZvciBjIGluIHNlY1NlbGVjdE9wdGlvbnMnID48b3B0aW9uIHZhbHVlPScnIHNlbGVjdGVkPSdzZWxlY3RlZCc+PC9zZWxlY3Q+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBmb3JtYXQgPSAiPHNlbGVjdCBuYW1lPSciICsgYS5hSGludC50b0xvd2VyQ2FzZSgpICsgJ0xpc3Rib3gnICsgcGFydE9mTmFtZSArICInIHJvbGU9J2xpc3Rib3gnIG5nLW1vZGVsPSdzZWNNb2RlbCcgbmctb3B0aW9ucz0nYyBhcyBjIiArIGRvdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICsgIiBmb3IgYyBpbiBzZWNTZWxlY3RPcHRpb25zJyA+PG9wdGlvbiB2YWx1ZT0nJyBzZWxlY3RlZD0nc2VsZWN0ZWQnPjwvc2VsZWN0PiI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgZG90ID0gKGEuYVNob3cgPyBhLmFTaG93IDogbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBmb3JtYXQgPSAiPHNlbGVjdCBuZy1tb2RlbD0nc2VjTW9kZWwnPiIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8iPG9wdGlvbiBuZy1yZXBlYXQ9J2MgaW4gc2VjU2VsZWN0T3B0aW9ucycgPnt7IChkb3QgPyBjW2RvdF0gOiBjICkgfX08L29wdGlvbj4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICI8L3NlbGVjdD4iOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gJChmb3JtYXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY3NzKCJiYWNrZ3JvdW5kIiwgInRyYW5zcGFyZW50Iik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMudGV4dGFyZWE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9ICQoIjx0ZXh0YXJlYSBuYW1lPSciICsgYS5hSGludCArIHBhcnRPZk5hbWUgKyAiJyBkYXRhLW5nLW1vZGVsPSdzZWNNb2RlbCcgPjwvdGV4dGFyZWE+Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiBtYWluIFBhZ2UgaW4gQ29udGFjdCBVUyBzZWN0aW9uIHVuZGVyIHN1YmplY3QgdmlzaWJsZSBoaW50IHN1YmplY3RUZXh0QXJlYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGFiZWwudGV4dChKU09OLnBhcnNlKHMuc2VjUmVxdWlyZSkuaW5mbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC50ZXh0KCIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLmFkZENsYXNzKCJjaGVja2JveFRleHQgcm9ib3RvLWxpZ2h0IiArIGFuaW1hdGVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYWRkaW5nLXRvcCI6ICIxMHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogImF1dG8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXJnaW4iOiAiMHB4IDAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLmNyZWRpdENhcmQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9ICQoIjxpbnB1dCBpZD0nY3JlZGl0Q2FyZCcgbmFtZT0nIiArIGEuYUhpbnQucmVwbGFjZSgvXHMvZywgIl8iKS50b0xvd2VyQ2FzZSgpICsgcGFydE9mTmFtZSArICInIGRhdGEtbmctbW9kZWw9J3NlY01vZGVsJyBtYXhsZW5ndGg9JzE0Jy8+Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5jY3ZOdW1iZXI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9ICQoIjxpbnB1dCBuYW1lPSciICsgYS5hSGludC5yZXBsYWNlKC9ccy9nLCAiXyIpLnRvTG93ZXJDYXNlKCkgKyBwYXJ0T2ZOYW1lICsgIicgdHlwZT0nIiArIHR5cGUgKyAiJyBkYXRhLW5nLW1vZGVsPSdzZWNNb2RlbCcgbWF4bGVuZ3RoPSczJyAvPiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5hSGludCA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5hSGludCA9ICJpX2FncmVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gJCgiPGlucHV0IG5hbWU9JyIgKyBhLmFIaW50LnJlcGxhY2UoL1xzL2csICJfIikudG9Mb3dlckNhc2UoKSArIHBhcnRPZk5hbWUgKyAiJyB0eXBlPSciICsgdHlwZSArICInIGRhdGEtbmctbW9kZWw9J3NlY01vZGVsJyAvPiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gVHlwZXMuY2hlY2tib3gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC50ZXh0KEpTT04ucGFyc2Uocy5zZWNSZXF1aXJlKS5pbmZvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5jc3MoeyJkaXNwbGF5IjogImJsb2NrIn0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLmFkZENsYXNzKCJjaGVja2JveFRleHQgcm9ib3RvLWxpZ2h0ICIgKyBhbmltYXRlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYWRkaW5nLXRvcCI6ICIxcHgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogImF1dG8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFyZ2luIjogIjhweCAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAocy5zZWNSZXF1aXJlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlICE9IFR5cGVzLmNoZWNrYm94ICYmIGEuYVN0YXIgIT0gImZhbHNlIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXIgPSAkKCI8c3BhbiBjbGFzcz0nc3Rhcic+Kjwvc3Bhbj4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5hcHBlbmQoc3Rhcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUoaW5wdXQpKHMpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGljbGFiZWwgPSAkKCI8ZGl2IGNsYXNzPSdoaWRkZW4nPiIgKyBhLmFIaW50ICArICI8L2Rpdj4iKTsKICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kKHN0YXRpY2xhYmVsKTsKICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kKGlucHV0KTsKICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kKGxhYmVsKTsKCiAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUoZGl2KShzKTsKICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZChkaXYpOwoKICAgICAgICAgICAgICAgICAgICBpZiAocy5zZWNDb21wYXJlVG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy4kd2F0Y2goJ3NlY01vZGVsQ29tcGFyZVRvJywgZnVuY3Rpb24gKG4sIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC52YWwoKSAhPSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwubW9kZWxDb21wYXJlVG9DaGFuZ2Uobik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnB1c2hWYWxpZGF0aW9uKEpTT04ucGFyc2Uocy5zZWNDb21wYXJlVG8pLCBLZXlzLnNlY0NvbXBhcmVUbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21wYXJlVG8gPSAkKCI8aW5wdXQgc3R5bGU9J2Rpc3BsYXk6IG5vbmUnIHR5cGU9JyIgKyB0eXBlICsgIicgZGF0YS1uZy1tb2RlbD0nc2VjTW9kZWxDb21wYXJlVG8nIC8+Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICRjb21waWxlKGNvbXBhcmVUbykocyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0Q29tcGFyZVRvKGNvbXBhcmVUbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuYXBwZW5kKGNvbXBhcmVUbyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCI8dWw+IiArIGN0cmwuZ2V0TGlzdFZhbGlkYXRpb25zKCkgKyAiPC91bD4iKTsKICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZCh1bCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBfZm9ybSA9IGN0cmxzWzFdOwogICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0SXRlbXMoaW5wdXQsIGxhYmVsLCB1bCwgX2Zvcm0sIHMuJGlkLCBzdGF0aWNsYWJlbCk7CgogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBwb3N0OiBmdW5jdGlvbiAocywgZSwgYSwgY3RybHMpIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGEuYVNlY3JldEZpZWxkID09ICJ0cnVlIikgewogICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsc1swXS5zZXRTZWNyZXRGaWVsZCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIF0pOwoKfSk7CgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAwNy8xMi8yMDE1LgogKi8KCmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvdG9vbFRpcFNlYXJjaCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdzZWFyY2gnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJ3Byb2R1Y3RTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckc3RhdGUnLAogICAgICAgICAgICBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsIHByb2R1Y3RTZXJ2aWNlLCAkbG9jYXRpb24sICRzdGF0ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICByZXN0cmljdDogJ0UnLAogICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgZnVuY3Rpb24gKHMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHMuY2F0ZWdvcnlGaWx0ZXIgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBzLmNhdGVnb3J5TmFtZSA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICBzLmFsbG93Q2xvc2luZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHMuY2hlY2tFbnRlcktleSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZ29Ub0NhdGVnb3J5UGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFJlcXVlc3QgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgcy5ydW5BdXRvY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVxdWVzdCA9IHMuYXV0b0NvbXBsZXRlVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFJlcXVlc3QgPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmF1dG9Db21wbGV0ZVJlc3VsdCA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RTZXJ2aWNlLmdldFByb2R1Y3RzQnlTZWFyY2gobGFzdFJlcXVlc3QsIDEwKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmF1dG9Db21wbGV0ZVJlc3VsdCA9IHJlc3VsdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzLmdvVG9DYXRlZ29yeVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3NlYXJjaCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogKHMuY2F0ZWdvcnlGaWx0ZXIgPT0gbnVsbCA/ICcnIDogcy5jYXRlZ29yeUZpbHRlciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0FsbDogcy5hdXRvQ29tcGxldGVWYWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHMub3BlblNlYXJjaFByb2R1Y3RzID0gZnVuY3Rpb24gKCkgewoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkKCcuYXV0b0NvbXBsZXRlQ292ZXInKS53aWR0aCgpID4gMCl7Ly9lbGVtZW50IGlzIG9wZW4sIHdlIHNlYXJjaCBub3cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRW50ZXJLZXkoe3doaWNoIDogMTN9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmF2c0xpbmtzID0gJCgibmF2IHVsIGxpIGEubmF2TGlua3MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZzTGlua3MuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoX3RoaXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoX3RoaXMpLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OiAwLjF9LCA1MDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAgKiBpbmRleCwgdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKG5hdnNMaW5rcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZzTGlua3MuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2VhcmNoU2VjdGlvbiAuYXV0b0NvbXBsZXRlQ292ZXInKS5zdG9wKCkuYW5pbWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogZ2V0QXV0b2NvbXBsZWF0ZVdpZHRoKCkgKyAicHgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAnMCA2cHgnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCkuYW5pbWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2F1dG9Db21wbGV0ZScpLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2VhcmNoU2VjdGlvbiAuYXV0b0NvbXBsZXRlQ292ZXIgLmljb25Dc3MuaWNvblgnKS5mYWRlSW4oMzAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoMjAwICogbmF2c0xpbmtzLmxlbmd0aCksIG5hdnNMaW5rcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzLmNsb3NlU2VhcmNoRm9yY2UgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlYXJjaFNlY3Rpb24gLmF1dG9Db21wbGV0ZUNvdmVyIC5pY29uQ3NzLmljb25YJykuZmFkZU91dCgzMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlYXJjaFNlY3Rpb24gLmF1dG9Db21wbGV0ZUNvdmVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDAgKyAicHgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAnMCAwJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24ucGF0aCgpID09ICcvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXZzTGlua3MgPSAkKCJuYXYgdWwgbGkgYS5uYXZMaW5rcyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdnNMaW5rcy5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2c0xpbmtzLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKF90aGlzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKF90aGlzKS5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eTogMX0sIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCAqIGluZGV4LCB0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA0MDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuYXV0b0NvbXBsZXRlVmFsdWUgPSBsYXN0UmVxdWVzdCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5hdXRvQ29tcGxldGVSZXN1bHQgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcy5jbG9zZVNlYXJjaFNlY3Rpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXMuYWxsb3dDbG9zaW5nIC8qfHwgJGxvY2F0aW9uLnBhdGgoKS5pbmRleE9mKCcvc2VhcmNoJykgIT0gLTEqLykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuY2xvc2VTZWFyY2hGb3JjZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzLmFsbG93Q2xvc2luZ0xlYXZlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2F1dG9Db21wbGV0ZScpLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmFsbG93Q2xvc2luZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCIjc2VhcmNoU2VjdGlvbiIpLndpZHRoKCkgPiAxNTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlYXJjaFNlY3Rpb24gLmF1dG9Db21wbGV0ZUNvdmVyJykud2lkdGgoZ2V0QXV0b2NvbXBsZWF0ZVdpZHRoKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEF1dG9jb21wbGVhdGVXaWR0aCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoJChkb2N1bWVudCkud2lkdGgoKSA+IDEwMDAgPyA2ODAgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS53aWR0aCgpID4gMTAwMCA/IDUzMCA6IDMwMCkgLQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgkKCIuaGktdXNlciIpLndpZHRoKCkgKiAxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkKCcjcHJvZHVjdF9zZWFyY2hfaW1nJykuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwcm9kdWN0X3NlYXJjaCcpLmNzcygiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwcm9kdWN0X3NlYXJjaCcpLmFuaW1hdGUoeyJ3aWR0aCI6ICQoJyNwcm9kdWN0X3NlYXJjaCcpLndpZHRoKCkgPiAwID8gMCA6ICIxNTBweCJ9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnI3Byb2R1Y3Rfc2VhcmNoJykud2lkdGgoKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygiZGlzcGxheSIsICJub25lIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBzLnNlYXJjaEJ5Q2F0ZWdvcnlJZCA9IGZ1bmN0aW9uIChpZCwgY2F0ZWdvcnlOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNhdGVnb3J5RmlsdGVyID0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNhdGVnb3J5TmFtZSA9IGNhdGVnb3J5TmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfV0pCiAgICAgICAgLmRpcmVjdGl2ZSgndG9vbFRpcFNlYXJjaCcsIFsnJHRlbXBsYXRlQ2FjaGUnLCAncHJvZHVjdFNlcnZpY2UnLCAnJGxvY2F0aW9uJywgJyRzdGF0ZScsCiAgICAgICAgICAgIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICJzZWFyY2giLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy90b29sVGlwU2VhcmNoLmh0bWwnKSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH1dKQogICAgICAgIC5kaXJlY3RpdmUoJ21vYmlsZVNlYXJjaCcsIFsnJHRlbXBsYXRlQ2FjaGUnLCAncHJvZHVjdFNlcnZpY2UnLCAnJGxvY2F0aW9uJywgJyRzdGF0ZScsCiAgICAgICAgICAgIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICJzZWFyY2giLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy9tb2JpbGVTZWFyY2guaHRtbCcpLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfV0pCn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDA3LzEyLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy90b29sVGlwQ2FydCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ3Rvb2xUaXBDYXJ0JywgWyckdGVtcGxhdGVDYWNoZScsICdvcmRlclNlcnZpY2UnLCAnJGxvY2F0aW9uJywKICAgICAgICBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsIG9yZGVyU2VydmljZSwgbG9jYXRpb24pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvcGFydGlhbHMvdG9vbFRpcENhcnQuaHRtbCcpLAogICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzKSB7CiAgICAgICAgICAgICAgICBzLmNoZWNrb3V0ID0gZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgICAgIGlmKGV2ZW50KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKG9yZGVyU2VydmljZS51c2VySXNMb2dpbigpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucGF0aCgnL29yZGVyUGF5bWVudCcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfV0pOwp9KTsKCgovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTAvMTQvMjAxNS4KICovCmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvcG9wdWxhckl0ZW1zRGlyZWN0aXZlJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgncG9wdWxhckl0ZW1zRHJ0dicsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZXN0cmljdDogJ0UnLAogICAgICAgICAgICByZXBsYWNlOiAndHJ1ZScsCiAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy9wb3B1bGFyLUl0ZW1zLXRwbC5odG1sJyksCiAgICAgICAgICAgIC8vdGVtcGxhdGVVcmw6ICdhcHAvcGFydGlhbHMvcG9wdWxhci1JdGVtcy10cGwuaHRtbCcsCiAgICAgICAgICAgIHNjb3BlOiB7CiAgICAgICAgICAgICAgICBwb3B1bGFyUHJvZHVjdHM6ICc9JwogICAgICAgICAgICB9LAogICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50KXsKICAgICAgICAgICAgICAgIC8vJHNjb3BlLm5hbWUgPSAkc2NvcGUubmFtZSArICJTZWNvbmQgIjsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKSB7CiAgICAgICAgICAgICAgICAvL3Njb3BlLm5hbWUgPSBzY29wZS5uYW1lICsgIlRoaXJkICI7CiAgICAgICAgICAgICAgICAvL3Njb3BlLiR3YXRjaCgncG9wdWxhclByb2R1Y3RzJywgZnVuY3Rpb24ocG9wdWxhclByb2R1Y3RzKSB7CiAgICAgICAgICAgICAgICAvLyAgICBzY29wZS5wb3B1bGFyUHJvZHVjdHMgPSBwb3B1bGFyUHJvZHVjdHM7CiAgICAgICAgICAgICAgICAvL30pCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfV0pOwp9KTsKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzI2LzIwMTUuCiAqLwpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL3NvY2lhbE1lZGlhRHJ0dicsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ3NvY2lhbE1lZGlhRHJ0dicsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZXN0cmljdDogJ0UnLAogICAgICAgICAgICByZXBsYWNlOiAndHJ1ZScsCiAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy9zb2NpYWwtbWVkaWEtdHBsLmh0bWwnKSwKICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCl7CgogICAgICAgICAgICB9LAogICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpIHsKCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfV0pOwp9KTsKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzI5LzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9jYXRlZ29yeVR5cGVQcm9kdWN0c0RydHYnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdjYXRlZ29yeVR5cGVQcm9kdWN0c0RydHYnLCBbJyRmaWx0ZXInLCAnJGFuaW1hdGUnLCAnJHRlbXBsYXRlQ2FjaGUnLAogICAgICAgICckbG9jYXRpb24nLCBmdW5jdGlvbiAoJGZpbHRlciwgJGFuaW1hdGUsICR0ZW1wbGF0ZUNhY2hlLCAkbG9jYXRpb24pIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLAogICAgICAgICAgICAgICAgcmVwbGFjZTogJ3RydWUnLAogICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3BhcnRpYWxzL2NhdGVnb3J5X3R5cGVfcHJvZHVjdHNfdHBsLmh0bWwnKSwKICAgICAgICAgICAgICAgIHNjb3BlOiB7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zVG9QYXNzOiAnPScKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAocywgZWxlbWVudCwgYXR0cnMpIHsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlcjsKICAgICAgICAgICAgICAgICAgICBzLnNob3dDbGVhciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHMucHJvZHVjdHNJbmNsdWRlID0gW107CiAgICAgICAgICAgICAgICAgICAgcy5taW5QcmljZVRvRmlsdGVyID0gMDsKICAgICAgICAgICAgICAgICAgICBzLm1heFByaWNlVG9GaWx0ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgIHMuY2F0ZWdvcmllc0ZpbHRlciA9IHMucGFyYW1zVG9QYXNzLmNhdGVnb3JpZXNGaWx0ZXI7CiAgICAgICAgICAgICAgICAgICAgcy5zZWFyY2hSZXN1bHQgPSBzLnBhcmFtc1RvUGFzcy5zZWFyY2hSZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgcy52aWV3QWxsID0gcy5wYXJhbXNUb1Bhc3Mudmlld0FsbDsKICAgICAgICAgICAgICAgICAgICBzLiRsb2NhdGlvbiA9ICRsb2NhdGlvbjsKCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gcy5jYXRlZ29yaWVzRmlsdGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXRlZ29yeSA9IHMuY2F0ZWdvcmllc0ZpbHRlcltpbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXRlZ29yeS5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5wcm9kdWN0c0luY2x1ZGVbIkNBVEVHT1JJRVMiXSA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnByb2R1Y3RzSW5jbHVkZVsiQ0FURUdPUklFUyJdID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnByb2R1Y3RzSW5jbHVkZVsiQ0FURUdPUklFUyJdLnB1c2goY2F0ZWdvcnkuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBzLm9wdGlvbnMgPSB7c3RhcnQ6IFsyMCwgNzBdLCByYW5nZToge21pbjogMCwgbWF4OiAxMDB9fTsKCiAgICAgICAgICAgICAgICAgICAgcy50b2dnbGVDb2xvclNlbGVjdGVkQ2xhc3MgPSBmdW5jdGlvbiAoY29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCIjcHJvZHVjdHNDb2xvcnMiICsgY29kZSkudG9nZ2xlQ2xhc3MoJ2NvbG9yU2VsZWN0ZWQnKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBzLnRvZ2dsZUZpbHRlclNsaWRlID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIiMiICsgaWQpLnNsaWRlVG9nZ2xlKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgICAgIHMuaW5jbHVkZVByb2R1Y3RzID0gZnVuY3Rpb24gKGF0dHJpYnV0ZVZhbCwgYXR0cmlidXRlc05hbWUpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXR0cmlidXRlVmFsKSByZXR1cm47CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSAkLmluQXJyYXkoYXR0cmlidXRlVmFsLCBzLnByb2R1Y3RzSW5jbHVkZVthdHRyaWJ1dGVzTmFtZV0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24gPiAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5wcm9kdWN0c0luY2x1ZGVbYXR0cmlidXRlc05hbWVdLnNwbGljZShsb2NhdGlvbiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5wcm9kdWN0c0luY2x1ZGVbYXR0cmlidXRlc05hbWVdLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHMucHJvZHVjdHNJbmNsdWRlW2F0dHJpYnV0ZXNOYW1lXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnByb2R1Y3RzSW5jbHVkZVthdHRyaWJ1dGVzTmFtZV0gPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5wcm9kdWN0c0luY2x1ZGVbYXR0cmlidXRlc05hbWVdID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnByb2R1Y3RzSW5jbHVkZVthdHRyaWJ1dGVzTmFtZV0ucHVzaChhdHRyaWJ1dGVWYWwpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzLnNob3dDbGVhciA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzLnByb2R1Y3RzSW5jbHVkZSkubGVuZ3RoID4gMCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm5vVWlTbGlkZXIuc3RhcnQgIT0gcy5taW5QcmljZVRvRmlsdGVyIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIubm9VaVNsaWRlci5lbmQgIT0gcy5tYXhQcmljZVRvRmlsdGVyOwoKICAgICAgICAgICAgICAgICAgICAgICAgcy5wcm9kdWN0VG9TaG93ID0gJGZpbHRlcigicHJvZHVjdHNGaWx0ZXJGb3JDYXRlZ29yaWVzUHJvZHVjdCIpCiAgICAgICAgICAgICAgICAgICAgICAgIChbXSwgcy5zZWFyY2hSZXN1bHQsIHMubWluUHJpY2VUb0ZpbHRlciwgcy5tYXhQcmljZVRvRmlsdGVyKQoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHMuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcy5wcm9kdWN0c0luY2x1ZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzLnByb2R1Y3RzSW5jbHVkZVtrZXldOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkKCcub3B0aW9uIGlucHV0W3R5cGU9Y2hlY2tib3hdJykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5vcHRpb24gLnByb2R1Y3RDb2xvcicpLnJlbW92ZUNsYXNzKCdjb2xvclNlbGVjdGVkJyk7CgogICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIubm9VaVNsaWRlci5zZXQoW3NsaWRlci5ub1VpU2xpZGVyLnN0YXJ0LCBzbGlkZXIubm9VaVNsaWRlci5lbmRdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHMuc2hvd0NsZWFyID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHMudG9nZ2xlQ29sYXBzZSA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIGlkKS5zaWJsaW5ncygnLm9wdGlvbicpLnNsaWRlVG9nZ2xlKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJyMnICsgaWQpLnRvZ2dsZUNsYXNzKCdhcnJvd1VwJyk7CiAgICAgICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgICAgIGNvbmZpZ1NsaWRlcigpOwoKICAgICAgICAgICAgICAgICAgICBzLnByb2R1Y3RUb1Nob3cgPSAkZmlsdGVyKCJwcm9kdWN0c0ZpbHRlckZvckNhdGVnb3JpZXNQcm9kdWN0IikoW10sIHMuc2VhcmNoUmVzdWx0LCBzLm1pblByaWNlVG9GaWx0ZXIsIHMubWF4UHJpY2VUb0ZpbHRlcikKCiAgICAgICAgICAgICAgICAgICAgcy5hdHRyaWJ1dGVzVG9TaG93ID0gZ2V0QXR0cmlidXRlc1RvU2hvdyhzLnByb2R1Y3RUb1Nob3csIHMucGFyYW1zVG9QYXNzLmF0dHJpYnV0ZXMuY2F0ZWdvcmllc0F0dHJpYnV0ZXMpOwoKICAgICAgICAgICAgICAgICAgICBzLnByb2R1Y3RzQ29sb3JzID0gZ2V0Q29sb3JzSW5Qcm9kdWN0cyhzLnByb2R1Y3RUb1Nob3cpOwoKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Rm9ybWF0KGNhdGVnb3J5SWQsIGF0dHJpYnV0ZU5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIoY2F0ZWdvcnlJZF8iICsgY2F0ZWdvcnlJZCArICItYXR0cmlidXRlTmFtZV9fIiArIGF0dHJpYnV0ZU5hbWUgKyAiKSI7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRBdHRyaWJ1dGVzVG9TaG93KHByb2R1Y3RUb1Nob3csIGF0dHJGaWx0ZXIpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qQnVpbGQgbG9uZyBTdHJpbmcgdG8gc2VhcmNoIHNob3dJbkZpbHRlciBwYXJhbSovCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyU2hvd0luRmlsdGVyID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChhdHRyRmlsdGVyLCBmdW5jdGlvbiAoYXR0cikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHIuc2hvd0luRmlsdGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0clNob3dJbkZpbHRlciArPSBnZXRGb3JtYXQoYXR0ci5jYXRlZ29yeUlkLCBhdHRyLmF0dHJpYnV0ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qZmlsdGVyaW5nIHNob3dJbkZpbHRlciBwYXJhbSovCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIHByb2R1Y3RUb1Nob3cpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZCA9IHByb2R1Y3RUb1Nob3dbaW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY2F0ZWdJbmRleCBpbiBwcm9kLmF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2F0ZWcgPSBwcm9kLmF0dHJpYnV0ZXNbY2F0ZWdJbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJTaG93SW5GaWx0ZXIuaW5kZXhPZihnZXRGb3JtYXQocHJvZC5jYXRlZ29yeUlkLCBjYXRlZy5hdHRyaWJ1dGVOYW1lKSkgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXNbY2F0ZWcuYXR0cmlidXRlTmFtZV0gPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzW2NhdGVnLmF0dHJpYnV0ZU5hbWVdID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1tjYXRlZy5hdHRyaWJ1dGVOYW1lXS5wdXNoKGNhdGVnLmF0dHJpYnV0ZVZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLypmaWx0ZXJpbmcgcmVwZWF0ZWQgcGFyYW1ldGVycyovCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbaW5kZXhdID0gYXR0cmlidXRlc1tpbmRleF0uZmlsdGVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh2YWwsIGluZGV4LCBhcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyci5pbmRleE9mKHZhbCkgPT0gaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgICAgICAgICAvKiBTb3J0aW5nIGF0dHJpYnV0ZXMgaW4gYXRycmlidXRlcyBieSBhYmMgKi8KICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBhdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzW25hbWVdID0gSGVscGVyLnNvcnRBcnJheUJ5QWJjKGF0dHJpYnV0ZXNbbmFtZV0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICAgICAgLy91c2VycwoKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEJ1aWxkZXIgYXR0cmlidXRlcyB0byBzaG93ICovCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzVG9TaG93ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gYXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGF0dHJpYnV0ZXNbbmFtZV0pLmxlbmd0aCA8PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzVG9TaG93LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBhdHRyaWJ1dGVzW25hbWVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1RvU2hvd1thdHRyaWJ1dGVzVG9TaG93Lmxlbmd0aCAtIDFdLnZhbHVlcy5wdXNoKGF0dHJpYnV0ZXNbbmFtZV1baW5kZXhdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1RvU2hvdy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhLm5hbWUgPCBiLm5hbWUpIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGEubmFtZSA+IGIubmFtZSkgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cmlidXRlc1RvU2hvdzsKICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRDb2xvcnNJblByb2R1Y3RzKHByb2R1Y3RzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0c0NvbG9ycyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocHJvZHVjdHMsIGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocHJvZHVjdC5jb2xvcnMsIGZ1bmN0aW9uIChjb2xvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHByb2R1Y3RzQ29sb3JzLCBmdW5jdGlvbiAocHJvZHVjdENvbG9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0Q29sb3IuY29kZSA9PSBjb2xvci5jb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmluZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NvbG9ycy5wdXNoKGNvbG9yKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIZWxwZXIuc29ydEFycmF5QnlDb2xvck5hbWUocHJvZHVjdHNDb2xvcnMpOwogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbmZpZ1NsaWRlcigpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXhWYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaW5WYWwgPSA5MDAwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzLnNlYXJjaFJlc3VsdCwgZnVuY3Rpb24gKGNhdGVnb3J5KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzID0gY2F0ZWdvcnkucHJvZHVjdHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwcm9kdWN0cywgZnVuY3Rpb24gKHByb2R1Y3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdC5wcmljZSA8IG1pblZhbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5WYWwgPSBwcm9kdWN0LnByaWNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1heFZhbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4VmFsID0gcHJvZHVjdC5wcmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb2R1Y3QucHJpY2UgPiBtYXhWYWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4VmFsID0gcHJvZHVjdC5wcmljZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgcy5taW5QcmljZVRvRmlsdGVyID0gTWF0aC5yb3VuZChtaW5WYWwpIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgcy5tYXhQcmljZVRvRmlsdGVyID0gTWF0aC5yb3VuZChtYXhWYWwgfHwgOTk5OTk5KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ZXAgPSBzLm1heFByaWNlVG9GaWx0ZXIgLSBzLm1pblByaWNlVG9GaWx0ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAgPSBzdGVwIDwgMTAwID8gMiA6IDEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUoc2xpZGVyLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogW3MubWluUHJpY2VUb0ZpbHRlciwgcy5tYXhQcmljZVRvRmlsdGVyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Q6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtaW4nOiBzLm1pblByaWNlVG9GaWx0ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21heCc6IHMubWF4UHJpY2VUb0ZpbHRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwOiAxLCAvL3N0ZXAgPCAxMDAgPyAxMDAgOiBNYXRoLnJvdW5kKHN0ZXAgLyAxMDApIC0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogc3RlcCwgIC8vTWF0aC5yb3VuZChzdGVwIC8gMTAwKSAtIDEsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIubm9VaVNsaWRlci5zdGFydCA9IHMubWluUHJpY2VUb0ZpbHRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm5vVWlTbGlkZXIuZW5kID0gcy5tYXhQcmljZVRvRmlsdGVyOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm5vVWlTbGlkZXIub24oJ3VwZGF0ZScsIGZ1bmN0aW9uICh2YWx1ZXMsIGhhbmRsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy4kYXBwbHlBc3luYyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZSA9PSAnMCcgJiYgcGFyc2VJbnQodmFsdWVzW2hhbmRsZV0pICE9IHMubWF4UHJpY2VUb0ZpbHRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1pblByaWNlVG9GaWx0ZXIgPSBwYXJzZUludCh2YWx1ZXNbaGFuZGxlXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHBhcnNlSW50KHZhbHVlc1sxXSkgIT0gcy5taW5QcmljZVRvRmlsdGVyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5tYXhQcmljZVRvRmlsdGVyID0gcGFyc2VJbnQodmFsdWVzW2hhbmRsZV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnNob3dDbGVhciA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHMucHJvZHVjdHNJbmNsdWRlKS5sZW5ndGggPiAwIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5ub1VpU2xpZGVyLnN0YXJ0ICE9IHMubWluUHJpY2VUb0ZpbHRlciB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIubm9VaVNsaWRlci5lbmQgIT0gcy5tYXhQcmljZVRvRmlsdGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH1dKQp9KTsKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxNS8xMi8yMDE1LgogKi8KCmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvc2Nyb2xsVG9Ub3AnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdzY3JvbGxUb1RvcCcsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZXN0cmljdDogJ0UnLAogICAgICAgICAgICByZXBsYWNlOiAndHJ1ZScsCiAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy9zY3JvbGxUb1RvcC5odG1sJyksCiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikgewoKICAgICAgICAgICAgICAgIGVsZW1lbnQuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSwgMTAwMCwgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKF90aGlzKS5maW5kKCJwIikuYW5pbWF0ZSh7J29wYWNpdHknIDogMH0sIDUwMCkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGVsZW1lbnQuYmluZCgnbW91c2VvdmVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgicCIpLmFuaW1hdGUoeydvcGFjaXR5JyA6IDF9LCAyMDApCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9XSk7Cn0pOwovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAxOC8wMS8yMDE2LgogKi8KCgoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9DYXJkX051bWJlcl80RGlnaXRzJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgnY2FyZE51bWJlckZvdXJEaWdpdHMnLCBmdW5jdGlvbigpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKCiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHMsIGUsIGEsIGN0cmwpewogICAgICAgICAgICAgICAgaWYocy5jYXJkICYmIHMuY2FyZC5udW1iZXIgJiYgcy5jYXJkLm51bWJlci5sZW5ndGggPiAwICl7CiAgICAgICAgICAgICAgICAgICAgZS5hZGRDbGFzcygnQ2FyZF9OdW1iZXJfNERpZ2l0cycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gJChlKS5maW5kKCcuaW5wdXR0ZXh0Jyk7CiAgICAgICAgICAgICAgICAkKGlucHV0KS5vbih7CiAgICAgICAgICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5oYXNDbGFzcygnQ2FyZF9OdW1iZXJfNERpZ2l0cycpKQogICAgICAgICAgICAgICAgICAgICAgICB7cmV0dXJuO30KICAgICAgICAgICAgICAgICAgICAgICAgZS5hZGRDbGFzcygnQ2FyZF9OdW1iZXJfNERpZ2l0cycpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJCh0aGlzKS52YWwoKSAhPSAnJykKICAgICAgICAgICAgICAgICAgICAgICAge3JldHVybjt9CiAgICAgICAgICAgICAgICAgICAgICAgIGUucmVtb3ZlQ2xhc3MoJ0NhcmRfTnVtYmVyXzREaWdpdHMnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwp9KTsKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDE5LzAxLzIwMTYuCiAqLwoKCgpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2ljb24tcGhvbmUnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdpY29uUGhvbmUnLCBmdW5jdGlvbigpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSwKICAgICAgICAgICAgdGVtcGxhdGU6ICI8ZGl2PjxkaXYgY2xhc3M9J2ljb25QaG9uZUluc2V0Jz48L2Rpdj48L2Rpdj4iLAogICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzLCBlLCBhLCBjdHJsKXsKICAgICAgICAgICAgICAgIGUuYWRkQ2xhc3MoImljb25Dc3MgaWNvblBob25lIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfSk7CgoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTkvMDEvMjAxNi4KICovCgoKCmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvaWNvbi11c2VyJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgnaWNvblVzZXInLCBmdW5jdGlvbigpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKICAgICAgICAgICAgcmVwbGFjZTogZmFsc2UsCiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHMsIGUsIGEsIGN0cmwpewogICAgICAgICAgICAgICAgZS5hZGRDbGFzcygiaWNvbkNzcyBpY29uVXNlciIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDIxLzAxLzIwMTYuCiAqLwoKCgoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9pY29uLW1hZ25pZnlpbmctZ2xhc3MnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdpY29uTWFnbmlmeWluZ0dsYXNzJywgZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLAogICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzLCBlLCBhLCBjdHJsKXsKICAgICAgICAgICAgICAgIGUuYWRkQ2xhc3MoImljb25Dc3MgaWNvbk1hZ25pZnlpbmdHbGFzcyIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDE5LzAxLzIwMTYuCiAqLwoKCgpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2ljb24tY2FydCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ2ljb25DYXJ0JywgZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLAogICAgICAgICAgICB0ZW1wbGF0ZTogIjxkaXYgY2xhc3M9J2ljb25DYXJ0Jz48ZGl2IGNsYXNzPSdpY29uQ2FydEhhbmRsZSc+PC9kaXY+PGRpdiBjbGFzcz0naWNvbkNhcnRUb3AnPjwvZGl2PjxkaXYgY2xhc3M9J2ljb25DYXJ0Qm90dG9tJz48L2Rpdj48ZGl2PjwvZGl2PjwvZGl2PiIsCiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHMsIGUsIGEsIGN0cmwpewogICAgICAgICAgICAgICAgZS5hZGRDbGFzcygiaWNvbkNzcyBpY29uQ2FydCIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDIxLzAxLzIwMTYuCiAqLwoKCgpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2ljb24taG9tZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ2ljb25Ib21lJywgZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsCiAgICAgICAgICAgIHRlbXBsYXRlOiAiPGRpdj48ZGl2IGNsYXNzPSdpY29uSG9tZVJvb2YnPjwvZGl2PjwvZGl2PiIsCiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHMsIGUsIGEsIGN0cmwpewogICAgICAgICAgICAgICAgZS5hZGRDbGFzcygiaWNvbkNzcyBpY29uSG9tZSIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDIxLzAxLzIwMTYuCiAqLwoKCgoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9pY29uLXgnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdpY29uWCcsIGZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgICAgICByZXBsYWNlOiBmYWxzZSwKICAgICAgICAgICAgbGluazogZnVuY3Rpb24ocywgZSwgYSwgY3RybCl7CiAgICAgICAgICAgICAgICBlLmFkZENsYXNzKCJpY29uQ3NzIGljb25YIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfSk7CgoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9pY29uLWhlbHAtc3ZnJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgnaWNvbkhlbHBTdmcnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSwKICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3BhcnRpYWxzL2ljb24taGVscC1zdmcuaHRtbCcpCiAgICAgICAgfQogICAgfV0pOwp9KTsKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9pY29uLWhlbHAtc3ZnLW1vYmlsZScsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ2ljb25IZWxwU3ZnTW9iaWxlJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsCiAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy9pY29uLWhlbHAtc3ZnLW1vYmlsZS5odG1sJykKICAgICAgICB9CiAgICB9XSk7Cn0pOwpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2ljb24tY2FydC1zdmcnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdpY29uQ2FydFN2ZycsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgICAgICByZXBsYWNlOiB0cnVlLAogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvcGFydGlhbHMvaWNvbi1jYXJ0LXN2Zy5odG1sJykKICAgICAgICB9CiAgICB9XSk7Cn0pOwpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2ljb24tY2FydC1zdmctbW9iaWxlJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgnaWNvbkNhcnRTdmdNb2JpbGUnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSwKICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3BhcnRpYWxzL2ljb24tY2FydC1zdmctbW9iaWxlLmh0bWwnKQogICAgICAgIH0KICAgIH1dKTsKfSk7CmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvaWNvbi11c2VyLXN2ZycsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ2ljb25Vc2VyU3ZnJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsCiAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy9pY29uLXVzZXItc3ZnLmh0bWwnKQogICAgICAgIH0KICAgIH1dKTsKfSk7CmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvaWNvbi11c2VyLXN2Zy1tb2JpbGUnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdpY29uVXNlclN2Z01vYmlsZScsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgICAgICByZXBsYWNlOiB0cnVlLAogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvcGFydGlhbHMvaWNvbi11c2VyLXN2Zy1tb2JpbGUuaHRtbCcpCiAgICAgICAgfQogICAgfV0pOwp9KTsKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9pY29uLXNlYXJjaC1zdmcnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdpY29uU2VhcmNoU3ZnJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsCiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsCiAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9wYXJ0aWFscy9pY29uLXNlYXJjaC1zdmcuaHRtbCcpCiAgICAgICAgfQogICAgfV0pOwp9KTsKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9pY29uLXNlYXJjaC1zdmctbW9iaWxlJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgnaWNvblNlYXJjaFN2Z01vYmlsZScsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgICAgICByZXBsYWNlOiB0cnVlLAogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvcGFydGlhbHMvaWNvbi1zZWFyY2gtc3ZnLW1vYmlsZS5odG1sJykKICAgICAgICB9CiAgICB9XSk7Cn0pOwpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2ljb24taG9tZS1zdmcnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdpY29uSG9tZVN2ZycsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgICAgICByZXBsYWNlOiB0cnVlLAogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvcGFydGlhbHMvaWNvbi1ob21lLXN2Zy5odG1sJykKICAgICAgICB9CiAgICB9XSk7Cn0pOwpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2ljb24taG9tZS1zdmctbW9iaWxlJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgnaWNvbkhvbWVTdmdNb2JpbGUnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSwKICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3BhcnRpYWxzL2ljb24taG9tZS1zdmctbW9iaWxlLmh0bWwnKQogICAgICAgIH0KICAgIH1dKTsKfSk7CmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvaWNvbi1kZWxldGUtYWNjb3VudC1zdmcnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdpY29uRGVsZXRlQWNjb3VudFN2ZycsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgICAgICByZXBsYWNlOiB0cnVlLAogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvcGFydGlhbHMvaWNvbi1kZWxldGUtYWNjb3VudC1zdmcuaHRtbCcpCiAgICAgICAgfQogICAgfV0pOwp9KTsKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9pY29uLW5ldy1kZWxldGUtYnV0dG9uLXN2ZycsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ2ljb25OZXdEZWxldGVCdXR0b25TdmcnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSwKICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3BhcnRpYWxzL2ljb24tbmV3LWRlbGV0ZS1idXR0b24tc3ZnLmh0bWwnKQogICAgICAgIH0KICAgIH1dKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDA0LzAyLzIwMTYuCiAqLwoKCmRlZmluZSgnYXBwL2RpcmVjdGl2ZXMvdmlydHVhbEZvb3RlcicsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZGlyZWN0aXZlcy5kaXJlY3RpdmUoJ3ZpcnR1YWxGb290ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHMsIGUpIHsKICAgICAgICAgICAgICAgIGUuY3NzKHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZS5hdHRyKCJpZCIsICJ2aXJ0dWFsRm9vdGVyIikKICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKEhlbHBlci5mb290ZXJIYW5kbGVyKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KEhlbHBlci5mb290ZXJIYW5kbGVyKCksIDEwMCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0pOwp9KTsKCgoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9jaGVjay1oZWlnaHQnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdjaGVja0hlaWdodCcsIFsiJHdpbmRvdyIsIGZ1bmN0aW9uICgkd2luZG93KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJywKICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzOwogICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQ7CiAgICAgICAgICAgICAgICB2YXIgZGltZW5zaW9uczsKICAgICAgICAgICAgICAgIGN0cmwuc2V0RWxlbWVudCA9IGZ1bmN0aW9uIChfZWxlbWVudCwgX2RpbWVuc2lvbnMpIHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gX2VsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgZGltZW5zaW9ucyA9IF9kaW1lbnNpb25zLnNwbGl0KCJYIik7CiAgICAgICAgICAgICAgICAgICAgY3RybC51cGRhdGVTaXplcygpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN0cmwudXBkYXRlU2l6ZXMgPSBmdW5jdGlvbiAoKXsKICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJChlbGVtZW50KS53aWR0aCgpIC8gZGltZW5zaW9uc1swXSAqIGRpbWVuc2lvbnNbMV07CiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5oZWlnaHQoaGVpZ2h0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHMsIGUsIGEsIGN0cmwpIHsKICAgICAgICAgICAgICAgIGN0cmwuc2V0RWxlbWVudChlLCBhLmNoZWNrSGVpZ2h0KTsKICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCJyZXNpemUiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgY3RybC51cGRhdGVTaXplcygpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjdHJsLnVwZGF0ZVNpemVzKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9XSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDA3LzEyLzIwMTUuCiAqLwoKZGVmaW5lKCdhcHAvZGlyZWN0aXZlcy9vcmRlclNlYXJjaCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdvcmRlcnNTZWFyY2gnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJ3Byb2R1Y3RTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckc3RhdGUnLAogICAgICAgIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSwgcHJvZHVjdFNlcnZpY2UsICRsb2NhdGlvbiwgJHN0YXRlKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0UnLAogICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3BhcnRpYWxzL29yZGVyU2VhcmNoLmh0bWwnKSwKICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgZnVuY3Rpb24gKHMpIHsKCiAgICAgICAgICAgICAgICAgICAgcy5hdXRvQ29tcGxldGVWYWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgICAgIHMuY2F0ZWdvcnlGaWx0ZXIgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHMuY2F0ZWdvcnlOYW1lID0gJyc7CiAgICAgICAgICAgICAgICAgICAgcy5hbGxvd0Nsb3NpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHMub3JkZXJzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBzLmZpcnN0U2VhcmNoSW5pdGlhdGlvbiA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIHZhciBsYXN0UmVxdWVzdCA9ICcnOwogICAgICAgICAgICAgICAgICAgIHMucnVuQXV0b2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVxdWVzdCA9IHMuYXV0b0NvbXBsZXRlVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0UmVxdWVzdCA9PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5hdXRvQ29tcGxldGVSZXN1bHQgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzLnNlYXJjaE9yZGVyKGxhc3RSZXF1ZXN0KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHMuc2VhcmNoT3JkZXIgPSBmdW5jdGlvbih3b3JkKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoKHMubXlPcmRlcnNDdHJsLm9yZGVycy5sZW5ndGggPCAxICYmIHMub3JkZXJzLmxlbmd0aCA8IDEpIHx8IHdvcmQubGVuZ3RoIDwgMSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzLmZpcnN0U2VhcmNoSW5pdGlhdGlvbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmZpcnN0U2VhcmNoSW5pdGlhdGlvbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5vcmRlcnMgPSBhbmd1bGFyLmNvcHkocy5teU9yZGVyc0N0cmwub3JkZXJzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcy5teU9yZGVyc0N0cmwub3JkZXJzID0gcy5vcmRlcnMuZmlsdGVyKGZ1bmN0aW9uKGQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZC5vcmRlck51bWJlci5pbmRleE9mKHdvcmQpICE9IC0xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZC5wcm9kdWN0cy5maWx0ZXIoZnVuY3Rpb24oZGQpe2lmKGRkLlByb2R1Y3ROYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih3b3JkLnRvTG93ZXJDYXNlKCkpICE9IC0xKXJldHVybiB0cnVlO30pLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHMub3BlblNlYXJjaE9yZGVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVycyA9IHMub3JkZXJzOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmF2c0xpbmtzID0gJCgibmF2IHVsIGxpIGEubmF2TGlua3MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbmF2c0xpbmtzLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIChfdGhpcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoX3RoaXMpLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OiAwLjF9LCA1MDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICogaW5kZXgsIHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKG5hdnNMaW5rcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2c0xpbmtzLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNvcmRlclNlYXJjaFNlY3Rpb24gLmF1dG9Db21wbGV0ZUNvdmVyJykuc3RvcCgpLmFuaW1hdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBnZXRBdXRvY29tcGxlYXRlV2lkdGgoKSArICJweCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAnMCA2cHgnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApLmFuaW1hdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNvcmRlckF1dG9Db21wbGV0ZScpLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNvcmRlclNlYXJjaFNlY3Rpb24gLmF1dG9Db21wbGV0ZUNvdmVyIC5pY29uQ3NzLmljb25YJykuZmFkZUluKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sICgyMDAgKiBuYXZzTGlua3MubGVuZ3RoKSwgbmF2c0xpbmtzKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHMuY2xvc2VTZWFyY2hGb3JjZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnI29yZGVyU2VhcmNoU2VjdGlvbiAuYXV0b0NvbXBsZXRlQ292ZXIgLmljb25Dc3MuaWNvblgnKS5mYWRlT3V0KDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI29yZGVyU2VhcmNoU2VjdGlvbiAuYXV0b0NvbXBsZXRlQ292ZXInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbmltYXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDAgKyAicHgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogJzAgMCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRsb2NhdGlvbi5wYXRoKCkgPT0gJy8nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmF2c0xpbmtzID0gJCgibmF2IHVsIGxpIGEubmF2TGlua3MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdnNMaW5rcy5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZzTGlua3MuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIChfdGhpcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKF90aGlzKS5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eTogMX0sIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwICogaW5kZXgsIHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgNDAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHMuYXV0b0NvbXBsZXRlVmFsdWUgPSBsYXN0UmVxdWVzdCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICBzLmF1dG9Db21wbGV0ZVJlc3VsdCA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBpZihzLm9yZGVycyAhPSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubXlPcmRlcnNDdHJsLm9yZGVycyA9IGFuZ3VsYXIuY29weShzLm9yZGVycyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm9yZGVycyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHMuZmlyc3RTZWFyY2hJbml0aWF0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHMuY2xvc2VTZWFyY2hTZWN0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXMuYWxsb3dDbG9zaW5nIHx8IChzLmF1dG9Db21wbGV0ZVZhbHVlICE9IG51bGwgJiYgcy5hdXRvQ29tcGxldGVWYWx1ZS5sZW5ndGggPiAwKS8qfHwgJGxvY2F0aW9uLnBhdGgoKS5pbmRleE9mKCcvc2VhcmNoJykgIT0gLTEqLykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHMuY2xvc2VTZWFyY2hGb3JjZSgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcy5hbGxvd0Nsb3NpbmdMZWF2ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnI29yZGVyQXV0b0NvbXBsZXRlJykuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcy5hbGxvd0Nsb3NpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCIjb3JkZXJTZWFyY2hTZWN0aW9uIikud2lkdGgoKSA+IDE1MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNvcmRlclNlYXJjaFNlY3Rpb24gLmF1dG9Db21wbGV0ZUNvdmVyJykud2lkdGgoZ2V0QXV0b2NvbXBsZWF0ZVdpZHRoKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QXV0b2NvbXBsZWF0ZVdpZHRoKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCQoZG9jdW1lbnQpLndpZHRoKCkgPiAxMDAwID8gNjgwIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS53aWR0aCgpID4gMTAwMCA/IDUzMCA6IDMwMCkgLQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCQoIi5oaS11c2VyIikud2lkdGgoKSAqIDEuNSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkKCcjcHJvZHVjdF9zZWFyY2hfaW1nJykuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Byb2R1Y3Rfc2VhcmNoJykuY3NzKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpOwogICAgICAgICAgICAgICAgICAgICAgICAkKCcjcHJvZHVjdF9zZWFyY2gnKS5hbmltYXRlKHsid2lkdGgiOiAkKCcjcHJvZHVjdF9zZWFyY2gnKS53aWR0aCgpID4gMCA/IDAgOiAiMTUwcHgifSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcjcHJvZHVjdF9zZWFyY2gnKS53aWR0aCgpID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoImRpc3BsYXkiLCAibm9uZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBzLnNlYXJjaEJ5Q2F0ZWdvcnlJZCA9IGZ1bmN0aW9uIChpZCwgY2F0ZWdvcnlOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgcy5jYXRlZ29yeUZpbHRlciA9IGlkOwogICAgICAgICAgICAgICAgICAgICAgICBzLmNhdGVnb3J5TmFtZSA9IGNhdGVnb3J5TmFtZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgfTsKICAgICAgICB9XSk7Cn0pOwoKCi8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAzLzE1LzIwMTcuCiAqLwpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2NvbmZpcm1hdGlvbi1tb2RhbC1kcnR2JyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgnY29uZmlybWF0aW9uTW9kYWwnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJ01vZGFsU2VydmljZScsICckY29tcGlsZScsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSwgTW9kYWxTZXJ2aWNlLCAkY29tcGlsZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsCiAgICAgICAgICAgIHNjb3BlOnsKICAgICAgICAgICAgICAgIGJ0bjFDYjonJicsCiAgICAgICAgICAgICAgICBidG4yQ2I6JyYnLAogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvcGFydGlhbHMvY29uZmlybWF0aW9uLW1vZGFsLmh0bWwnKSwKICAgICAgICAgICAgY29udHJvbGxlckFzOiAnY29uZkN0cmwnLAogICAgICAgICAgICBjb250cm9sbGVyOiBbIiRzY29wZSIsIGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgICAgICB0aGlzLmJ0bkNsaWNrZWQgPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJ0bk51bSA9ICRldmVudC5jdXJyZW50VGFyZ2V0LmlkLnNwbGl0KCJjb25mQnRuXyIpWzFdOwogICAgICAgICAgICAgICAgICAgIGJ0bk51bSA9PSAiMSIgPyBzLmJ0bjFDYigpIDogcy5idG4yQ2IoKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7CiAgICAgICAgICAgICAgICAvLyBlbnN1cmUgaWQgYXR0cmlidXRlIGV4aXN0cwogICAgICAgICAgICAgICAgaWYgKCFhdHRycy5pZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ21vZGFsIG11c3QgaGF2ZSBhbiBpZCcpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihhdHRycy5udW1vZmJ1dHRvbnMpewogICAgICAgICAgICAgICAgICAgIHZhciBudW1PZkJ0bnMgPSAhaXNOYU4oYXR0cnMubnVtb2ZidXR0b25zKSA/IHBhcnNlSW50KGF0dHJzLm51bW9mYnV0dG9ucykgOiAwOwogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBudW1PZkJ0bnM7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidG5UeHRCb2xkID0gYXR0cnNbImJ0biIgKyAoaSsxKSArIlR4dCJdLnNwbGl0KCcsJylbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidG5UeHRSZWd1bGFyID0gYXR0cnNbImJ0biIgKyAoaSsxKSArIlR4dCJdLnNwbGl0KCcsJylbMV07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSAkKCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2NvbmYtbW9kYWwtYnRuJyByb2xlPSdidXR0b24nIGRhdGEtbmctY2xpY2s9J2NvbmZDdHJsLmJ0bkNsaWNrZWQoJGV2ZW50KScgaWQ9J2NvbmZCdG5fIiArICAoaSsxKSArIicgcm9sZT0nJz4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICI8bGFiZWwgY2xhc3M9J2NvbmYtYnRuLWJvbGQnPiIrIGJ0blR4dEJvbGQgKyI8L2xhYmVsPjxsYWJlbCBjbGFzcz0nY29uZi1idG4tcmVndWxhcic+LCIgKyBidG5UeHRSZWd1bGFyICsgIjwvbGFiZWw+IDwvYnV0dG9uPiIpCiAgICAgICAgICAgICAgICAgICAgICAgICRjb21waWxlKGJ1dHRvbikoc2NvcGUpOwogICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29uZi1tb2RhbC1idG4tY29udGFpbmVyJykuYXBwZW5kKGJ1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gbW92ZSBlbGVtZW50IHRvIGJvdHRvbSBvZiBwYWdlIChqdXN0IGJlZm9yZSA8L2JvZHk+KSBzbyBpdCBjYW4gYmUgZGlzcGxheWVkIGFib3ZlIGV2ZXJ5dGhpbmcgZWxzZQogICAgICAgICAgICAgICAgLy9lbGVtZW50LmFwcGVuZFRvKCdib2R5Jyk7CgogICAgICAgICAgICAgICAgLy8gY2xvc2UgbW9kYWwgb24gYmFja2dyb3VuZCBjbGljawogICAgICAgICAgICAgICAgJChlbGVtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5jbG9zZXN0KCcubW9kYWwtYm9keScpLmxlbmd0aCAmJiAhdGFyZ2V0LmF0dHIoInR5cGUiKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKENsb3NlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyBhZGQgc2VsZiAodGhpcyBtb2RhbCBpbnN0YW5jZSkgdG8gdGhlIG1vZGFsIHNlcnZpY2Ugc28gaXQncyBhY2Nlc3NpYmxlIGZyb20gY29udHJvbGxlcnMKICAgICAgICAgICAgICAgIHZhciBtb2RhbCA9IHsKICAgICAgICAgICAgICAgICAgICBpZDogYXR0cnMuaWQsCiAgICAgICAgICAgICAgICAgICAgb3BlbjogT3BlbiwKICAgICAgICAgICAgICAgICAgICBjbG9zZTogQ2xvc2UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuQWRkKG1vZGFsKTsKCiAgICAgICAgICAgICAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG1vZGFsIHNlcnZpY2Ugd2hlbiBkaXJlY3RpdmUgaXMgZGVzdHJveWVkCiAgICAgICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLlJlbW92ZShhdHRycy5pZCk7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vIG9wZW4gbW9kYWwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE9wZW4oKSB7CiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgLy8kKCdib2R5JykuYWRkQ2xhc3MoJ21vZGFsLW9wZW4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBjbG9zZSBtb2RhbAogICAgICAgICAgICAgICAgZnVuY3Rpb24gQ2xvc2UoKSB7CiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgLy8kKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRCdG5zQ2IoY2JzKXsKICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2JzLmxlbmd0aDsgaSsrKXsKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH1dKTsKfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xNC8yMDE1LgogKi8KCgpkZWZpbmUoJ2FwcC9kaXJlY3RpdmVzL2luZGV4JyxbCiAgICAnLi9lLXNlYy1wbHVzLW1pbnVzJywKICAgICcuL2luZm8tZGVtbycsCiAgICAnLi9hLXNlYy1zcmMnLAogICAgJy4vYS1zZWMtYmFjay1pbWcnLAogICAgJy4vdmFsaWRhdGVJbnB1dCcsCiAgICAnLi90b29sVGlwU2VhcmNoJywKICAgICcuL3Rvb2xUaXBDYXJ0JywKICAgICcuL3BvcHVsYXJJdGVtc0RpcmVjdGl2ZScsCiAgICAnLi9zb2NpYWxNZWRpYURydHYnLAogICAgJy4vY2F0ZWdvcnlUeXBlUHJvZHVjdHNEcnR2JywKICAgICcuL3Njcm9sbFRvVG9wJywKICAgICcuL0NhcmRfTnVtYmVyXzREaWdpdHMnLAogICAgJy4vaWNvbi1waG9uZScsCiAgICAnLi9pY29uLXVzZXInLAogICAgJy4vaWNvbi1tYWduaWZ5aW5nLWdsYXNzJywKICAgICcuL2ljb24tY2FydCcsCiAgICAnLi9pY29uLWhvbWUnLAogICAgJy4vaWNvbi14JywKICAgICcuL2ljb24taGVscC1zdmcnLAogICAgJy4vaWNvbi1oZWxwLXN2Zy1tb2JpbGUnLAogICAgJy4vaWNvbi1jYXJ0LXN2ZycsCiAgICAnLi9pY29uLWNhcnQtc3ZnLW1vYmlsZScsCiAgICAnLi9pY29uLXVzZXItc3ZnJywKICAgICcuL2ljb24tdXNlci1zdmctbW9iaWxlJywKICAgICcuL2ljb24tc2VhcmNoLXN2ZycsCiAgICAnLi9pY29uLXNlYXJjaC1zdmctbW9iaWxlJywKICAgICcuL2ljb24taG9tZS1zdmcnLAogICAgJy4vaWNvbi1ob21lLXN2Zy1tb2JpbGUnLAogICAgJy4vaWNvbi1kZWxldGUtYWNjb3VudC1zdmcnLAogICAgJy4vaWNvbi1uZXctZGVsZXRlLWJ1dHRvbi1zdmcnLAogICAgJy4vdmlydHVhbEZvb3RlcicsCiAgICAnLi9jaGVjay1oZWlnaHQnLAogICAgJy4vb3JkZXJTZWFyY2gnLAogICAgJy4vY29uZmlybWF0aW9uLW1vZGFsLWRydHYnCl0sIGZ1bmN0aW9uKCkge30pOwovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTAvMTQvMjAxNS4KICovCmRlZmluZSgnYXBwL3VzZXIvZGlyZWN0aXZlcy9tb2R1bGUnLFsnYW5ndWxhciddLCBmdW5jdGlvbiAoYW5ndWxhcikgewogICAgJ3VzZSBzdHJpY3QnOwogICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKCdhb3MudXNlci5kaXJlY3RpdmVzJywgW10pOwp9KTsKZGVmaW5lKCdhcHAvdXNlci9kaXJlY3RpdmVzL3ZlcnNpb24tY29udGVudCcsWycuL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgew0KICAgICd1c2Ugc3RyaWN0JzsNCiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgndmVyc2lvbkNvbnRlbnQnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJ3ZlcnNpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7DQogICAgICAgIHZhciBjb250ZW50VXJsOw0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUpIHsNCiAgICAgICAgICAgICAgICBzY29wZS5jb250ZW50VXJsID0gJ2FwcC91c2VyL3ZpZXdzL3ZlcnNpb24tcGFnZS0nICsgc2NvcGUucmVsZWFzZV92ZXJzaW9uX29ubHkgKyAnLmh0bWwnOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBuZy1pbmNsdWRlPSJjb250ZW50VXJsIj48L2Rpdj4nDQogICAgICAgIH07DQogICAgfQ0KICAgIF0pOw0KfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8yOS8yMDE1LgogKi8KZGVmaW5lKCdhcHAvdXNlci9kaXJlY3RpdmVzL2xvZ2luTW9kYWwnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdsb2dpbk1vZGFsJywgWyckcm9vdFNjb3BlJywgJ3VzZXJTZXJ2aWNlJywgJ2lwQ29va2llJywKICAgICAgICAnJHRlbXBsYXRlQ2FjaGUnLCAnJGxvY2F0aW9uJywgJyR0aW1lb3V0JywgJ3Byb2R1Y3RzQ2FydFNlcnZpY2UnLCAnJGZpbHRlcicsICdBbmFseXRpY3MnLAogICAgICAgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCB1c2VyU2VydmljZSwgJGNvb2tpZSwgJHRlbXBsYXRlQ2FjaGUsICRsb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgJHRpbWVvdXQsIHByb2R1Y3RzQ2FydFNlcnZpY2UsICRmaWx0ZXIsIEFuYWx5dGljcykgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJywKICAgICAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLAogICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3VzZXIvcGFydGlhbHMvbG9naW4uaHRtbCcpLAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzY29wZSkgewoKCiAgICAgICAgICAgICAgICAgICAgLyogVkFSSUFCTEVTICovCiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbWVtYmVyTWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS5tZXNzYWdlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSB7dGV4dDogJGZpbHRlcigndHJhbnNsYXRlJykoJ09SJyksIF9jbGFzczogJyd9OwogICAgICAgICAgICAgICAgICAgIHZhciBfX19fX2Vycm9yTWVzc2FnZTsKCiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVycm9yTWVzc2FnZSA9IGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoX19fX19lcnJvck1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICBfX19fX2Vycm9yTWVzc2FnZSA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlLnRleHQgPSAkZmlsdGVyKCd0cmFuc2xhdGUnKSgnT1InKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlLl9jbGFzcyA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5yc01lc3NhZ2UudGV4dCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5yc01lc3NhZ2UuX2NsYXNzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSB7IHRleHQ6IHJlYXNvbiwgX2NsYXNzOiAiaW52YWxpZCIgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5yc01lc3NhZ2UgPSB7IHRleHQ6IHJlYXNvbiwgX2NsYXNzOiAiaW52YWxpZCIgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRU5EIFZBUklBQkxFUyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgogICAgICAgICAgICAgICAgICAgIC8qIFNpZ24gdXNlciBpbiAqLwogICAgICAgICAgICAgICAgICAgICRzY29wZS5zaWduSW4gPSBmdW5jdGlvbiAodXNlciwgcmVtZW1iZXJNZSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJCbG9ja2VkID0gJGNvb2tpZSh1c2VyLmxvZ2luVXNlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyQmxvY2tlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3QgPSB1c2VyQmxvY2tlZC5kYXRlVW50aWwgLSB1c2VyQmxvY2tlZC5kYXRlRnJvbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaWxsaXNlY29uZHNMZXNzID0gdXNlckJsb2NrZWQuZGF0ZVVudGlsIC0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShyZXN0KSkuZ2V0VGltZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFcnJvck1lc3NhZ2UodXNlckJsb2NrZWQucmVhc29uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWxsaXNlY29uZHNMZXNzIDwgMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb29raWUucmVtb3ZlKHVzZXIubG9naW5Vc2VyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB1c2VyU2VydmljZS5sb2dpbih1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS51c2VySWQgIT0gLTEgJiYgcmVzcG9uc2Uuc3VjY2VzcykgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbmFseXRpY3MudHJhY2tFdmVudCgnQWNjb3VudCcsICdzaWduSW4nLCB1c2VyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UudXNlcklkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVycm9yTWVzc2FnZShyZXNwb25zZS5yZWFzb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJDb29raWUuZmlsbFBhcmFtcyh1c2VyLmxvZ2luVXNlciwgdXNlci5sb2dpblBhc3N3b3JkLCB1c2VyLmVtYWlsLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyQ29va2llID0gdXNlckNvb2tpZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlcktleVRyaW1tZWQgPSB1c2VyQ29va2llLmdldEtleSh1c2VyQ29va2llKS5yZXBsYWNlKC9bXmEtekEtWiBdL2csICIiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWVtYmVyTWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvb2tpZSh1c2VyS2V5VHJpbW1lZCwgdXNlckNvb2tpZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb29raWUoJ2xhc3RMb2dpbicsIHVzZXJLZXlUcmltbWVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJJbmZvU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkodXNlckNvb2tpZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZW1lbWJlck1lJywgdXNlckluZm9TdHJpbmcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVmcmVzaFRpbWVPdXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb29raWUucmVtb3ZlKCJ1c2VyQ29va2llIiArIHVzZXIuZW1haWwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncmVtZW1iZXJNZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXJ0U2VydmljZS5qb2luQ2FydFByb2R1Y3RzKCkudGhlbihmdW5jdGlvbiAoY2FydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2FydCA9IGNhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclNlcnZpY2Uuc2luZ091dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvb2tpZS5yZW1vdmUoJ2xhc3RMb2dpbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyQ29va2llID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2luVXNlciA9IHtlbWFpbDogJycsIGxvZ2luUGFzc3dvcmQ6ICcnLCBsb2dpblVzZXI6ICcnLH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9kdWN0c0NhcnRTZXJ2aWNlLmxvYWRDYXJ0UHJvZHVjdHMoKS50aGVuKGZ1bmN0aW9uIChjYXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgJHNjb3BlLmNhcnQgPSBjYXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIubWluaS10aXRsZSIpLmNzcygiZGlzcGxheSIsICJub25lIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIubWluaS10aXRsZS1oZWxwIikuY3NzKCJkaXNwbGF5IiwgIm5vbmUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24ucGF0aCgpID09ICcvcmVnaXN0ZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlbGxjb21lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucmVhc29uLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignYmxvY2tlZCcpICE9IC0xKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyU2VydmljZS5nZXRDb25maWd1cmF0aW9uKCkudGhlbihmdW5jdGlvbihjb25mKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyQmxvY2tlZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRnJvbTogbm93LmdldFRpbWUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlVW50aWw6IG5vdy5nZXRUaW1lKCkgKyAoY29uZi5sb2dpbkJsb2NraW5nSW50ZXJ2YWxJblNlY29uZHMgKiAxMDAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb24gOiByZXNwb25zZS5yZWFzb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29va2llKHVzZXIubG9naW5Vc2VyLCB1c2VyQmxvY2tlZCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25Vbml0OiAnbWlsbGlzZWNvbmRzJywgZXhwaXJlczogdXNlckJsb2NrZWQuZGF0ZVVudGlsIC0gdXNlckJsb2NrZWQuZGF0ZUZyb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RXJyb3JNZXNzYWdlKHJlc3BvbnNlLnJlYXNvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFcnJvck1lc3NhZ2UoJGZpbHRlcigndHJhbnNsYXRlJykoJ2xvZ2luX2ZhaWxkJykpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IGVuZCBTaWduIGluID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCiAgICAgICAgICAgICAgICAgICAgLyogaW5jcmVtZW50IHdyb25nIHVzZXIgbG9naW4gICovCiAgICAgICAgICAgICAgICAgICAgdmFyIGluY3JlbWVudExvZ2lucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QgPSAkY29va2llKCJsb2dpbnNDb3VudGVyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2dpbnNDb3VudGVyID0gdGVzdCA9PT0gdW5kZWZpbmVkID8gLTEgOiB0ZXN0OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ2luc0NvdW50ZXIgPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdCA9ICRjb29raWUoImxvZ2luc0NvdW50ZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVzdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3QgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5zQ291bnRlciA9IHRlc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSArK2xvZ2luc0NvdW50ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29va2llKCJsb2dpbnNDb3VudGVyIiwgY291bnQsIHtleHBpcmVzOiAzNjV9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAgICAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gZW5kIGluY3JlbWVudCBsb2dpbnMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKICAgICAgICAgICAgICAgICAgICAvKiBjcmVhdGUgdG8gdXNlciBuZXcgYWNjb3VudCBpbiBhcHBsaWNhdGlvbiAqLwogICAgICAgICAgICAgICAgICAgICRzY29wZS5jcmVhdGVOZXdBY2NvdW50ID0gZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2VsbGNvbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJ3JlZ2lzdGVyJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8qPT09PT09PT09PT09PT09PSBlbmQgY3JlYXRlIHRvIHVzZXIgbmV3IGFjY291bnQgaW4gYXBwbGljYXRpb24gID09PT09PT09PT09PT09PT09PT09PT09PSovCgogICAgICAgICAgICAgICAgICAgIC8qIGdvIHRvIGFib3V0IHBhZ2UgKi8KICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3BlbkFib3V0UGFnZSA9IGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdlbGxjb21lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCdhYm91dCcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvKj09PT09PT09PT09PT09PT0gZW5kIGdvIHRvIGFib3V0IHBhZ2UgID09PT09PT09PT09PT09PT09PT09PT09PSovCgogICAgICAgICAgICAgICAgICAgICRzY29wZS5mb3Jnb3RQYXNzd29yZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImZvcmdvdCBQYXNzd29yZCBub3QgZG9uZSB5ZXQhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vJGxvY2F0aW9uLnBhdGgoJzQwNCcpOwogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgICAgICRzY29wZS5zaW5nV2l0aEZhY2Vib29rID0gZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlNpbmcgV2l0aCBGYWNlYm9vayBub3QgZG9uZSB5ZXQhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJTZXJ2aWNlLmZhY2Vib29rTG9naW4oKS50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3MpewoKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFcnJvck1lc3NhZ2UoZXJyb3IuZGF0YS5yZWFzb24pOwogICAgICAgICAgICAgICAgICAgICAgICB9ICk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICBdKTsKfSk7CgoKZnVuY3Rpb24gd2VsbGNvbWUoKSB7CiAgICAkKCIubG9naW4iKS5jc3MoIm9wYWNpdHkiLCAiMC4yIikKICAgICQoIi5Qb3BVcCA+IGRpdjpudGgtY2hpbGQoMSkiKS5hbmltYXRlKHsidG9wIjogIi0xNTAlIn0sIDYwMCwgZnVuY3Rpb24gKCkgewoKICAgICAgICAkKCIjbW9iaWxlLXNlY3Rpb24iKS5jc3MoImxlZnQiLCAiLSIgKyAkKCIjbW9iaWxlLXNlY3Rpb24iKS5jc3MoIndpZHRoIikpOwogICAgICAgICQoIi5Qb3BVcCIpLmZhZGVPdXQoMTAwKTsKICAgICAgICAkKCJib2R5IikuY3NzKCJvdmVyZmxvdy15IiwgInNjcm9sbCIpCiAgICAgICAgJCgiLmxvZ2luIikuY3NzKCJvcGFjaXR5IiwgIjEiKTsKICAgIH0pOwp9CjsKLyoqDQogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xNC8yMDE1Lg0KICovDQoNCg0KZGVmaW5lKCdhcHAvdXNlci9kaXJlY3RpdmVzL2luZGV4JyxbDQogICAgJy4vdmVyc2lvbi1jb250ZW50JywNCiAgICAnLi9sb2dpbk1vZGFsJw0KXSwgZnVuY3Rpb24oKSB7fSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xNC8yMDE1LgogKi8KCmRlZmluZSgnYXBwL29yZGVyL2RpcmVjdGl2ZXMvbW9kdWxlJyxbJ2FuZ3VsYXInXSwgZnVuY3Rpb24gKGFuZ3VsYXIpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHJldHVybiBhbmd1bGFyLm1vZHVsZSgnYW9zLm9yZGVyLmRpcmVjdGl2ZXMnLCBbXSk7Cn0pOwovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAwMy8wMS8yMDE2LgogKi8KCmRlZmluZSgnYXBwL29yZGVyL2RpcmVjdGl2ZXMvVXNlck5vdExvZ2luJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgndXNlck5vdExvZ2luJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZXBsYWNlOiB0cnVlLAogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvb3JkZXIvcGFydGlhbHMvdXNlci1ub3QtbG9naW4uaHRtbCcpLAogICAgICAgIH0KICAgIH1dKTsKfSk7CgoKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDAzLzAxLzIwMTYuCiAqLwoKCmRlZmluZSgnYXBwL29yZGVyL2RpcmVjdGl2ZXMvVXNlckFyZUxvZ2luJyxbJy4vbW9kdWxlJ10sIGZ1bmN0aW9uIChkaXJlY3RpdmVzKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBkaXJlY3RpdmVzLmRpcmVjdGl2ZSgndXNlckFyZUxvZ2luJywgWyckcm9vdFNjb3BlJywgJyR0ZW1wbGF0ZUNhY2hlJywgJ29yZGVyU2VydmljZScsCiAgICAgICAgJ3JlZ2lzdGVyU2VydmljZScsICckdGltZW91dCcsICdhY2NvdW50U2VydmljZScsICdBbmFseXRpY3MnLAogICAgICAgIGZ1bmN0aW9uIChycywgJHRlbXBsYXRlQ2FjaGUsIG9yZGVyU2VydmljZSwgcmVnaXN0ZXJTZXJ2aWNlLCAkdGltZW91dCwgYWNjb3VudFNlcnZpY2UsIEFuYWx5dGljcykgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9vcmRlci9wYXJ0aWFscy91c2VyLWFyZS1sb2dpbi5odG1sJyksCiAgICAgICAgICAgICAgICBsaW5rOiB7CiAgICAgICAgICAgICAgICAgICAgcHJlOiBmdW5jdGlvbiAocykgewogICAgICAgICAgICAgICAgICAgICAgICBzLnVzZXJEZXRhaWxzRWRpdE1vZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgcy5pbnZhbGlkVXNlciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsaWRTZWNWYWxpZGF0ZSA9IGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5pbnZhbGlkVXNlciA9IHMudXNlckRldGFpbHNFZGl0TW9kZSA9ICF2YWxpZDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAkKCIjcGF5Tm93U1BFcnJvckxhYmVsIikuaHRtbCgiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIiNwYXlOb3dNQ0Vycm9yTGFiZWxFeHBlbmRlZCIpLmh0bWwoIiIpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcG9zdDogZnVuY3Rpb24gKHMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHJlYWR5SGF2ZU1hc3RlckNyZWRpdENhcnQgPSBzLmNhcmQubnVtYmVyLmxlbmd0aCA+IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHJlYWR5SGF2ZVNhZmVQYXlDYXJ0ID0gcy5zYXZlUGF5LnVzZXJuYW1lLmxlbmd0aCA+IDA7CgogICAgICAgICAgICAgICAgICAgICAgICBzLmZpcnN0VGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcy5pbWdSYWRpb0J1dHRvbiA9IHMuYWNjb3VudERldGFpbHMuZGVmYXVsdFBheW1lbnRNZXRob2RJZCArICIiID09ICIyMCIgPyAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHMuc2F2ZVBheS51c2VybmFtZS5sZW5ndGggPiAwID8gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzLmNhcmQubnVtYmVyLmxlbmd0aCA+IDAgPyAyIDogMTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHMuY291bnRyaWVzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJTZXJ2aWNlLmdldEFsbENvdW50cmllcygpLnRoZW4oZnVuY3Rpb24gKGNvdW50cmllcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSAgaW4gY291bnRyaWVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50cmllc1tpXS5pZCA9PSBzLnVzZXIuY291bnRyeUlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuY291bnRyeSA9IGNvdW50cmllc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5jb3VudHJpZXMgPSBjb3VudHJpZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgcy5iYWNrVG9NYWluU2hpcHBpbmdEZXRhaWxzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMuaW52YWxpZFVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnVzZXJEZXRhaWxzRWRpdE1vZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcy5hY2NvdW50VXBkYXRlID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMudXNlci5jb3VudHJ5SWQgPSBzLmNvdW50cnkubmFtZSArICIsIiArIHMuY291bnRyeS5pc29OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy51c2VyLmNvdW50cnkgPSBzLmNvdW50cnkuaXNvTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmFncmVlX0FncmVlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyU2VydmljZS5hY2NvdW50VXBkYXRlKHMudXNlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0ZVNoaXBwaW5nQ29zdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXBkYXRlU2hpcHBpbmdDb3N0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVwZGF0ZVNoaXBwaW5nQ29zdCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyU2VydmljZS5nZXRTaGlwcGluZ0Nvc3Qocy51c2VyKS50aGVuKGZ1bmN0aW9uIChzaGlwcGluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuc2hpcHBpbmcgPSBzaGlwcGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuaW52YWxpZFVzZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy51c2VyRGV0YWlsc0VkaXRNb2RlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZmlyc3RUYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAgICAgICAgIHMuc2V0RGVmYXVsdENhcmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBzLnllYXJzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMueWVhcnMucHVzaCgobm93LmdldEZ1bGxZZWFyKCkgKyBpKSArICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKCgogICAgICAgICAgICAgICAgICAgICAgICBzLmNhbGN1bGF0ZU1vbnRocyA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IEhlbHBlci5nZXRNb250aEluWWVhckZvck1hc3RlckNyZWRpdCh2YWx1ZSwgcy5tb250aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1vbnRoID0gYXJyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHMuY2FyZCAmJiBzLmNhcmQuZXhwaXJhdGlvbkRhdGUgJiYgcy5jYXJkLmV4cGlyYXRpb25EYXRlLm1vbnRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09IHMuY2FyZC5leHBpcmF0aW9uRGF0ZS5tb250aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNhcmQuZXhwaXJhdGlvbkRhdGUubW9udGggPSBhcnJbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgcy5tb250aCA9IFsiMDEiLCAiMDIiLCAiMDMiLCAiMDQiLCAiMDUiLCAiMDYiLCAiMDciLCAiMDgiLCAiMDkiLCAiMTAiLCAiMTEiLCAiMTIiXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIShzLmNhcmQgJiYgcy5jYXJkLmV4cGlyYXRpb25EYXRlICYmIHMuY2FyZC5leHBpcmF0aW9uRGF0ZS55ZWFyKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNhcmQuZXhwaXJhdGlvbkRhdGUubW9udGggPSAiMTIiLy9CVUcgMTY2MDAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNhcmQuZXhwaXJhdGlvbkRhdGUueWVhciA9ICIyMDI3Ii8vQlVHIDE2NjAwMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5jYWxjdWxhdGVNb250aHMocy5jYXJkLmV4cGlyYXRpb25EYXRlLnllYXIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3cuZ2V0RnVsbFllYXIoKSA9PSBzLmNhcmQuZXhwaXJhdGlvbkRhdGUueWVhcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IG5vdy5nZXRNb250aCgpICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHMubW9udGggPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvcih2YXIgaSA9IGN1cnJlbnRNb250aDsgaSA8PSAxMjsgaSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBzLm1vbnRoLnB1c2goKGkgPCAxMCA/ICIwIiArIGkgOiAiIiArIGkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNhZmVQYXlCdXNzeSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcFBhc3M7CgogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzYWZlUGF5KFRyYW5zUGF5bWVudE1ldGhvZCwgYWNjb3VudE51bWJlcikgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYWZlUGF5QnVzc3kpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlUGF5QnVzc3kgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNhdmVQYXkgJiYgcy5zYXZlUGF5LnBhc3N3b3JkLmxlbmd0aCA9PSAxMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLiRwYXJlbnQuc2VjcmV0UGFzc3dvcmQuaW5kZXhPZihzLnNhdmVQYXkucGFzc3dvcmQpICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBQYXNzID0gcy5zYXZlUGF5LnBhc3N3b3JkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnNhdmVQYXkucGFzc3dvcmQgPSBzLiRwYXJlbnQuc2VjcmV0UGFzc3dvcmQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJTZXJ2aWNlLlNhZmVQYXkocy51c2VyLCBzLnNhdmVQYXksIHMuY2FyZCwgcy5zaGlwcGluZywgcy5jYXJ0LCBhY2NvdW50TnVtYmVyLCBUcmFuc1BheW1lbnRNZXRob2QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQW5hbHl0aWNzLnRyYWNrRXZlbnQoJ09yZGVyJywgJ3BheW1lbnRDb21wbGV0ZWQnLCByZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiI3BheU5vd1NQRXJyb3JMYWJlbCIpLmh0bWwoIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YXJyYW50eVJlc3BvbnNlID0gcmVzLndhcnJhbnR5TnVtYmVyID8gSlNPTi5wYXJzZShyZXMud2FycmFudHlOdW1iZXIpIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBycy4kYnJvYWRjYXN0KCd1cGRhdGVQYXltZW50RW5kJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RW5kOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlck51bWJlcjogcmVzLm9yZGVyTnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja2luZ051bWJlcjogcmVzLnBheW1lbnRDb25maXJtYXRpb25OdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXI6ICtzLmNhcmQubnVtYmVyICsgJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRyYW5zUGF5bWVudE1ldGhvZDogVHJhbnNQYXltZW50TWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNXYXJyYW50eTogcmVzLmhhc1dhcnJhbnR5ID8gdHJ1ZSA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJyYW50eU51bWJlciA6IHdhcnJhbnR5UmVzcG9uc2UgJiYgd2FycmFudHlSZXNwb25zZS5XYXJyYW50eUlEICE9IG51bGwgPyB3YXJyYW50eVJlc3BvbnNlLldhcnJhbnR5SUQgOiAiMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuc2Nyb2xsUGFnZVVwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZVBheUJ1c3N5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZVBheUJ1c3N5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnBheW1lbnRFbmQgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWZlUGF5QnVzc3kgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucGF5bWVudEVuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yT2JqID0gSlNPTi5wYXJzZShlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXJyb3JPYmogJiYgZXJyb3JPYmouZGF0YSAmJiBlcnJvck9iai5kYXRhLnJlYXNvbil7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQoIiNwYXlOb3dNQ0Vycm9yTGFiZWwiKS5odG1sKGVycm9yT2JqLmRhdGEucmVhc29uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCIjcGF5Tm93TUNFcnJvckxhYmVsRXhwZW5kZWQiKS5odG1sKGVycm9yT2JqLmRhdGEucmVhc29uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiI3BheU5vd1NQRXJyb3JMYWJlbCIpLmh0bWwoZXJyb3JPYmouZGF0YS5yZWFzb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcFBhc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnNhdmVQYXkucGFzc3dvcmQgPSB0ZW1wUGFzczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAgICAgICAgIHMucGF5Tm93X1NhZmVQYXkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5zYXZlU2FmZVBheSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeUhhdmVTYWZlUGF5Q2FydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS5hZGRTYWZlUGF5TWV0aG9kKHMuc2F2ZVBheSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRTZXJ2aWNlLnVwZGF0ZVNhZmVQYXlNZXRob2Qocy5zYXZlUGF5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBUcmFuc1BheW1lbnRNZXRob2QgPSAiU2FmZVBheSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWNjb3VudE51bWJlciA9ICI4NDMyMDA5NzEiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FmZVBheShUcmFuc1BheW1lbnRNZXRob2QsIGFjY291bnROdW1iZXIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAgICAgICAgIHMucGF5Tm93X21hc3RlckNyZWRpdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNhdmVNYXN0ZXJDcmVkaXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNhcmQubnVtYmVyID0gcy5jYXJkLm51bWJlci5yZXBsYWNlKC9ccy9nLCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlIYXZlTWFzdGVyQ3JlZGl0Q2FydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS5hZGRNYXN0ZXJDcmVkaXRNZXRob2Qocy5jYXJkKS50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3MpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kb1BheW1lbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiI3BheU5vd01DRXJyb3JMYWJlbEV4cGVuZGVkIikuaHRtbChlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIjcGF5Tm93TUNFcnJvckxhYmVsIikuaHRtbChlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50U2VydmljZS51cGRhdGVNYXN0ZXJDcmVkaXRNZXRob2Qocy5jYXJkKS50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3MpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kb1BheW1lbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIiNwYXlOb3dNQ0Vycm9yTGFiZWxFeHBlbmRlZCIpLmh0bWwoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiI3BheU5vd01DRXJyb3JMYWJlbCIpLmh0bWwoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgcy5kb1BheW1lbnQgPSBmdW5jdGlvbihUcmFuc1BheW1lbnRNZXRob2QsIGFjY291bnROdW1iZXIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFRyYW5zUGF5bWVudE1ldGhvZCA9ICJNYXN0ZXJDcmVkaXQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnROdW1iZXIgPSAiMTEyOTg3Mjk4NzYzIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVQYXkoVHJhbnNQYXltZW50TWV0aG9kLCBhY2NvdW50TnVtYmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHMucGF5Tm93X21hbnVhbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucGF5Tm93X21hc3RlckNyZWRpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHMuc2hpcHBpbmdEZXRhaWxzX25leHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmZpcnN0VGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnNob3dNYXN0ZXJDYXJ0ID0gcy5ub0NhcmRzIHx8IChzLmNhcmQgJiYgcy5jYXJkLmNhcnRFeHBpcmVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcy5pbWdSYWRpb0J1dHRvbkNsaWNrZWQgPSBmdW5jdGlvbiAobnVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmltZ1JhZGlvQnV0dG9uID0gbnVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zaG93TWFzdGVyQ2FydCA9IHMubm9DYXJkcyB8fCAocy5jYXJkICYmIHMuY2FyZC5jYXJ0RXhwaXJlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIjcGF5Tm93U1BFcnJvckxhYmVsIikuaHRtbCgiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIjcGF5Tm93TUNFcnJvckxhYmVsIikuaHRtbCgiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIjcGF5Tm93TUNFcnJvckxhYmVsRXhwZW5kZWQiKS5odG1sKCIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcy5wYXltZW50TWV0aG9kX2VkaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm5vQ2FyZHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzLkJhY2tfdG9fc2hpcHBpbmdfZGV0YWlscyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZmlyc3RUYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zaG93TWFzdGVyQ2FydCA9IHMubm9DYXJkczsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcy50b2dnbGVTaG93TWFzdGVyQ2FydCA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnNob3dNYXN0ZXJDYXJ0ID0gIXMuc2hvd01hc3RlckNhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHMuc2V0VXNlckRldGFpbHNFZGl0TW9kZSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnVzZXJEZXRhaWxzRWRpdE1vZGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfV0pOwp9KTsKCgovKioKICogQ3JlYXRlZCBieSBjb3JyZW50aSBvbiAwOS8wMS8yMDE2LgogKi8KCgpkZWZpbmUoJ2FwcC9vcmRlci9kaXJlY3RpdmVzL29yZGVyUGF5bWVudFN1Y2Nlc3MnLFsnLi9tb2R1bGUnXSwgZnVuY3Rpb24gKGRpcmVjdGl2ZXMpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGRpcmVjdGl2ZXMuZGlyZWN0aXZlKCdvcmRlclBheW1lbnRTdWNjZXNzJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZXBsYWNlOiB0cnVlLAogICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvb3JkZXIvcGFydGlhbHMvb3JkZXItcGF5bWVudC1zdWNjZXNzLmh0bWwnKSwKICAgICAgICB9CiAgICB9XSk7Cn0pOwoKCgovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTAvMTQvMjAxNS4KICovCgoKZGVmaW5lKCdhcHAvb3JkZXIvZGlyZWN0aXZlcy9pbmRleCcsWwogICAgJy4vVXNlck5vdExvZ2luJywKICAgICcuL1VzZXJBcmVMb2dpbicsCiAgICAnLi9vcmRlclBheW1lbnRTdWNjZXNzJwpdLCBmdW5jdGlvbigpIHsgfSk7Ci8qKgogKiBDcmVhdGVkIGJ5IGt1YmFueSBvbiAxMC8xNC8yMDE1LgogKi8KCgpkZWZpbmUoJ2FwcC9hY2NvdW50L2RpcmVjdGl2ZXMvaW5kZXgnLFsKLy8gICAgJy4vVXNlck5vdExvZ2luJywKLy8gICAgJy4vVXNlckFyZUxvZ2luJywKLy8gICAgJy4vb3JkZXJQYXltZW50U3VjY2VzcycKXSwgZnVuY3Rpb24oKSB7IH0pOwovLy8qKgovLyAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTkvMDUvMjAxNi4KLy8gKi8KLy8KCmRlZmluZSgnYXBwL1NFQ09SUkVOVEkvc2VjLWlucHV0L2RpcmVjdGl2ZXMvc2VjLWlucHV0LXZhbGlkYXRpb24nLFsnLi8uLi8uLi8uLi9kaXJlY3RpdmVzL21vZHVsZSddLCBmdW5jdGlvbiAoZGlyZWN0aXZlcykgewogICAgJ3VzZSBzdHJpY3QnOwoKfSk7CgoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTkvMDUvMjAxNi4KICovCgoKCmRlZmluZSgnYXBwL1NFQ09SUkVOVEkvc2VjLWlucHV0L2luZGV4JyxbCiAgICAgICAgJy4vZGlyZWN0aXZlcy9zZWMtaW5wdXQtdmFsaWRhdGlvbicsCgogICAgXSwKICAgIGZ1bmN0aW9uKCkge30pOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmUoJ2FwcC90ZW1wbGF0ZXMvbW9kdWxlJyxbImFuZ3VsYXIiXSwgZnVuY3Rpb24gKGFuZ3VsYXIpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgInVzZSBzdHJpY3QiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVzID0gYW5ndWxhci5tb2R1bGUoImFvcy50ZW1wbGF0ZXMiLCBbXSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5ydW4oZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXNlIHN0cmljdCc7CgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL2NhdGVnb3J5X3R5cGVfcHJvZHVjdHNfdHBsLmh0bWwnLAogICAgIjxkaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBjYXRlZ29yeUxlZnRcIj5cbiIgKwogICAgIiAgICAgICAgPHAgY2xhc3M9XCJmaWx0ZXJDb3VudCByb2JvdG8tbGlnaHRcIj5cbiIgKwogICAgIiAgICAgICAgICAgIDxhIGNsYXNzPVwidGl0bGVJdGVtc0NvdW50XCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAge3soW10gfCBwcm9kdWN0c0ZpbHRlckZvckNhdGVnb3JpZXNQcm9kdWN0OnNlYXJjaFJlc3VsdDptaW5QcmljZVRvRmlsdGVyOm1heFByaWNlVG9GaWx0ZXI6cHJvZHVjdHNJbmNsdWRlKS5sZW5ndGh9fSB7eyAnSVRFTVMnIHwgdHJhbnNsYXRlIH19XG4iICsKICAgICIgICAgICAgICAgICA8L2E+XG4iICsKICAgICIgICAgICAgICAgICA8c3BhbiBkYXRhLW5nLWNsaWNrPVwidG9nZ2xlRmlsdGVyU2xpZGUoJ21vYmlsZVNsaWRlJylcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi4uLy4uL2Nzcy9pbWFnZXMvRmlsdGVyLnBuZ1wiIGFsdD1cImZpbHRlclwiLz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICB7eyAnRmlsdGVyJyB8IHRyYW5zbGF0ZSB9fVxuIiArCiAgICAiICAgICAgICAgICAgICAgICh7eyhbXSB8IHByb2R1Y3RzRmlsdGVyRm9yQ2F0ZWdvcmllc1Byb2R1Y3Q6c2VhcmNoUmVzdWx0Om1pblByaWNlVG9GaWx0ZXI6bWF4UHJpY2VUb0ZpbHRlcjpwcm9kdWN0c0luY2x1ZGUpLmxlbmd0aH19KVxuIiArCiAgICAiICAgICAgICAgICAgPC9zcGFuPlxuIiArCiAgICAiICAgICAgICA8L3A+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgIDxkaXYgaWQ9XCJtb2JpbGVTbGlkZVwiPlxuIiArCiAgICAiICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwicm9ib3RvLXJlZ3VsYXJcIj57eyAnRklMVEVSX0JZJyB8IHRyYW5zbGF0ZSB9fVxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInJvYm90by1yZWd1bGFyIGNsZWFyXCIgbmctY2xpY2s9XCJjbGVhclNlbGVjdGlvbigpXCIgdHJhbnNsYXRlPVwiQ2xlYXJcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICBuZy1zaG93PVwic2hvd0NsZWFyXCI+PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgIDwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICA8dWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPCEtLS0gY2F0ZWdvcmllcyBmaWx0ZXIgU2VjdGlvbiAtLT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8bGkgbmctaWY9XCJjYXRlZ29yaWVzRmlsdGVyICE9IG51bGxcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiYWNjb3JkaW9uIHJvYm90by1yZWd1bGFyIGFycm93RG93biBhcnJvd1VwXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiYWNjb3JkaW9uQ2F0ZWdvcmllc1wiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICBuZy1jbGljaz1cInRvZ2dsZUNvbGFwc2UoJ2FjY29yZGlvbkNhdGVnb3JpZXMnKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGU9XCJDQVRFR09SSUVTXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcHRpb25cIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cImNhdGVnIGluIGNhdGVnb3JpZXNGaWx0ZXJcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsbFwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT1cImNhdGVnb3J5XCIgdHlwZT1cImNoZWNrYm94XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwiY2F0ZWcuY2hlY2tlZFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZy1jbGljaz1cImluY2x1ZGVQcm9kdWN0cyhjYXRlZy5pZCwgJ0NBVEVHT1JJRVMnKVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJvYm90by1yZWd1bGFyXCI+e3tjYXRlZy5uYW1lfX08L3NwYW4+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9saT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8IS0tLSBFTkQgY2F0ZWdvcmllcyBmaWx0ZXIgU2VjdGlvbiAtLT5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPCEtLS0gUHJpY2UgZmlsdGVyIFNlY3Rpb24tLT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8bGk+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwhLS1kYXRhLW5nLWNsYXNzPVwieyBhcnJvd1VwIDogdmlld0FsbCB9XCItLT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGg0IGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cImFjY29yZGlvbiByb2JvdG8tcmVndWxhciBhcnJvd0Rvd25cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJhY2NvcmRpb25QcmljZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICBuZy1jbGljaz1cInRvZ2dsZUNvbGFwc2UoJ2FjY29yZGlvblByaWNlJylcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlPVwiUFJJQ0VcIiByb2xlPVwibGlua1wiPjwvaDQ+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPCEtLTxkaXYgY2xhc3M9XCJvcHRpb25cIj4tLT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9wdGlvblwiIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLW5nLXN0eWxlPVwidmlld0FsbCA/IHsnZGlzcGxheSc6ICdibG9jayd9IDoge31cIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJzbGlkZXJcIj48L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInNsaWRlclN0ZXBzIGxlZnRcIj4ke3sgbWluUHJpY2VUb0ZpbHRlciB8IG51bWJlciB9fTwvcD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwic2xpZGVyU3RlcHMgXCI+JHt7IG1heFByaWNlVG9GaWx0ZXIgfCBudW1iZXIgfX08L3A+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9saT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8IS0tLSBFTkQgUHJpY2UgZmlsdGVyIFNlY3Rpb24gLS0+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8IS0tLSBhdHRyaWJ1dGVzIGZpbHRlciBTZWN0aW9uIC0tPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJhdHRyaWIgaW4gYXR0cmlidXRlc1RvU2hvd1wiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8aDQgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwiYWNjb3JkaW9uIHJvYm90by1yZWd1bGFyIGFycm93RG93blwiIGlkPVwiYWNjb3JkaW9uQXR0cmlie3skaW5kZXh9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICBuZy1jbGljaz1cInRvZ2dsZUNvbGFwc2UoJ2FjY29yZGlvbkF0dHJpYicgKyAkaW5kZXgpXCIgcm9sZT1cImxpbmtcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIHt7YXR0cmliLm5hbWV9fVxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L2g0PlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9wdGlvblwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBuZy1yZXBlYXQ9XCJhdHRyVmFsIGluIGF0dHJpYi52YWx1ZXNcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsbCBpY29uQ3NzXCIgPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ne3thdHRyaWIubmFtZS5yZXBsYWNlKFwiIFwiLCBcIl9cIikudG9Mb3dlckNhc2UoKX19X3t7JGluZGV4fX0nIHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiaXRlbS5zZWxlY3RlZFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZy1jbGljaz1cImluY2x1ZGVQcm9kdWN0cyhhdHRyVmFsLCBhdHRyaWIubmFtZSlcIiBpZD0ne3thdHRyaWIubmFtZS5yZXBsYWNlKFwiIFwiLCBcIl9cIikudG9Mb3dlckNhc2UoKX19X3t7JGluZGV4fX0nPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSd7e2F0dHJpYi5uYW1lLnJlcGxhY2UoXCIgXCIsIFwiX1wiKS50b0xvd2VyQ2FzZSgpfX1fe3skaW5kZXh9fScgY2xhc3M9XCJyb2JvdG8tcmVndWxhclwiIGRhdGEtbmctY2xpY2s9XCJpdGVtLnNlbGVjdGVkID0gIWl0ZW0uc2VsZWN0ZWQ7IGluY2x1ZGVQcm9kdWN0cyhhdHRyVmFsLCBhdHRyaWIubmFtZSlcIj57ezo6YXR0clZhbH19PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2xpPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwhLS0tIEVORCBhdHRyaWJ1dGVzIGZpbHRlciBTZWN0aW9uIC0tPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPCEtLS0gY29sb3IgZmlsdGVyIFNlY3Rpb24gLS0+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGxpIG5nLWlmPVwicHJvZHVjdHNDb2xvcnMubGVuZ3RoID4gMFwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8aDQgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwiYWNjb3JkaW9uIHJvYm90by1yZWd1bGFyIGFycm93RG93blwiIGlkPVwiYWNjb3JkaW9uQ29sb3JcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgbmctY2xpY2s9XCJ0b2dnbGVDb2xhcHNlKCdhY2NvcmRpb25Db2xvcicpXCIgdHJhbnNsYXRlPVwiQ09MT1JcIiByb2xlPVwibGlua1wiPjwvaDQ+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9wdGlvblwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBuZy1yZXBlYXQ9XCJjb2xvciBpbiBwcm9kdWN0c0NvbG9yc1wiIGNsYXNzPVwiaW5saW5lLWJsb2NrXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGl0bGU9XCJ7e2NvbG9yLm5hbWV9fVwiIGNsYXNzPVwicHJvZHVjdENvbG9yIFwiIGlkPVwicHJvZHVjdHNDb2xvcnN7e2NvbG9yLmNvZGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmctY2xpY2s9XCJpbmNsdWRlUHJvZHVjdHMoY29sb3IsICdDT0xPUicpOyB0b2dnbGVDb2xvclNlbGVjdGVkQ2xhc3MoY29sb3IuY29kZSlcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nLXN0eWxlPVwiIGNvbG9yLmNvZGUgPT0gJ0ZGRkZGRicgP1xuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeydiYWNrZ3JvdW5kQ29sb3InOiAnIycgKyBjb2xvci5jb2RlLCAnYm9yZGVyJzogJ3NvbGlkIDFweCAjOWQ5ZDlkJyB9IDpcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnYmFja2dyb3VuZENvbG9yJzogJyMnICsgY29sb3IuY29kZSwgJ2JvcmRlcic6ICdzb2xpZCAxcHggdHJhbnNwYXJlbnQnfVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tLSA8bGFiZWw+PC9sYWJlbD4gLS0+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9saT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8IS0tLSBFTkQgY29sb3IgZmlsdGVyIFNlY3Rpb24gLS0+XG4iICsKICAgICIgICAgICAgICAgICA8L3VsPlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBjYXRlZ29yeVJpZ2h0XCIgZGF0YS1uZy1zaG93PVwiKFtdIHwgcHJvZHVjdHNGaWx0ZXJGb3JDYXRlZ29yaWVzUHJvZHVjdDpzZWFyY2hSZXN1bHQ6bWluUHJpY2VUb0ZpbHRlcjptYXhQcmljZVRvRmlsdGVyOnByb2R1Y3RzSW5jbHVkZSkubGVuZ3RoICE9IDBcIj5cbiIgKwogICAgIiAgICAgICAgPHVsPlxuIiArCiAgICAiICAgICAgICAgICAgPGxpIG5nLXJlcGVhdD1cInByb2R1Y3QgaW4gW10gfCBwcm9kdWN0c0ZpbHRlckZvckNhdGVnb3JpZXNQcm9kdWN0OnNlYXJjaFJlc3VsdDptaW5QcmljZVRvRmlsdGVyOm1heFByaWNlVG9GaWx0ZXI6cHJvZHVjdHNJbmNsdWRlXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICBuZy1jbGljaz1cIiRsb2NhdGlvbi5wYXRoKCcvcHJvZHVjdC8nICsgcHJvZHVjdC5wcm9kdWN0SWQpXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNvdWxPdXRcIiBkYXRhLW5nLXNob3c9XCJwcm9kdWN0LnByb2R1Y3RTdGF0dXMgPT0gJ091dE9mU3RvY2snXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicm9ib3RvLW1lZGl1bVwiIHRyYW5zbGF0ZT1cIlNPVUxfT1VUXCI+PC9zcGFuPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJBZGRUb0NhcmRcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgZGF0YS1uZy1jbGFzcz1cInsgb3V0T2ZTdG9jayA6IHByb2R1Y3QucHJvZHVjdFN0YXR1cyA9PSAnT3V0T2ZTdG9jaycgfSBcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRyYW5zbGF0ZT1cIlNIT1BfTk9XXCI+PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBpY29uLWNhcnQtc3ZnIHN0eWxlPVwid2lkdGg6IDE4cHg7IGhlaWdodDogMThweDsgXCI+PC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGltZyBpZD1cInt7cHJvZHVjdC5wcm9kdWN0SWR9fVwiIGFsdD1cIlwiIGNsYXNzPVwiaW1nUHJvZHVjdFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICBkYXRhLW5nLWNsYXNzPVwieyBvdXRPZlN0b2NrIDogcHJvZHVjdC5wcm9kdWN0U3RhdHVzID09ICdPdXRPZlN0b2NrJyB9IFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICBkYXRhLW5nLXNyYz1cIi9jYXRhbG9nL2ZldGNoSW1hZ2U/aW1hZ2VfaWQ9e3twcm9kdWN0LmltYWdlVXJsfX1cIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8cD48YSBjbGFzcz1cInByb2R1Y3ROYW1lXCI+e3twcm9kdWN0LnByb2R1Y3ROYW1lfX08L2E+PC9wPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxwPjxhIGNsYXNzPVwicHJvZHVjdFByaWNlXCI+e3twcm9kdWN0LnByaWNlIHwgY3VycmVuY3k6XCIkXCJ9fSA8L2E+PC9wPlxuIiArCiAgICAiICAgICAgICAgICAgPC9saT5cbiIgKwogICAgIiAgICAgICAgPC91bD5cbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBjYXRlZ29yeVJpZ2h0IHRleHRBbGlnbkNlbnRlclwiIGRhdGEtbmctc2hvdz1cIihbXSB8IHByb2R1Y3RzRmlsdGVyRm9yQ2F0ZWdvcmllc1Byb2R1Y3Q6c2VhcmNoUmVzdWx0Om1pblByaWNlVG9GaWx0ZXI6bWF4UHJpY2VUb0ZpbHRlcjpwcm9kdWN0c0luY2x1ZGUpLmxlbmd0aCA9PSAwXCI+XG4iICsKICAgICIgICAgICAgIDxsYWJlbCBjbGFzcz1cIm5vUHJvZHVjdHMgcm9ib3RvLWJvbGQgXCI+XG4iICsKICAgICIgICAgICAgICAgICA8c3BhbiB0cmFuc2xhdGU9XCJOb19yZXN1bHRzXCI+PC9zcGFuPlxuIiArCiAgICAiICAgICAgICA8L2xhYmVsPlxuIiArCiAgICAiICAgIDwvZGl2PlxuIiArCiAgICAiPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL2NvbmZpcm1hdGlvbi1tb2RhbC5odG1sJywKICAgICI8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuIiArCiAgICAiICAgIDxkaXYgY2xhc3M9XCJjbG9zZUJ0biBjb25mLWNsb3NlLWJ0blwiPjwvZGl2PlxuIiArCiAgICAiICAgIDxkaXYgY2xhc3M9XCJjb25maXJtYXRpb24tbW9kYWwtY29udGVudFwiPlxuIiArCiAgICAiICAgICAgICA8bGFiZWwgY2xhc3M9XCJjb25mLWxhcmdlLXRoaW5cIj57eydBUkVfVV9TVVJFJyB8IHRyYW5zbGF0ZX19PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgPGxhYmVsIGNsYXNzPVwiY29uZi1sYXJnZS1yZWd1bGFyXCI+e3snQ0FOQ0VMX1lPVVJfT1JERVInIHwgdHJhbnNsYXRlfX08L2xhYmVsPlxuIiArCiAgICAiICAgICAgICA8ZGl2IGNsYXNzPVwiY29uZi1tb2RhbC1idG4tY29udGFpbmVyXCI+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgPC9kaXY+XG4iICsKICAgICI8L2Rpdj4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL2Utc2VjLXBsdXMtbWludXMuaHRtbCcsCiAgICAiPGRpdiBjbGFzcz1cImUtc2VjLXBsdXMtbWludXNcIj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxkaXYgY2xhc3M9XCJtaW51c1wiIGluY3JlbWVudC12YWx1ZS1hdHRyPVwiLVwiID48L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxkaXY+XG4iICsKICAgICIgICAgICAgIDxpbnB1dCBuYW1lPVwicXVhbnRpdHlcIiB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibnVtQXR0clwiIG51bWJlcnMtb25seSAvPlxuIiArCiAgICAiICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgPGRpdiBjbGFzcz1cInBsdXNcIiBpbmNyZW1lbnQtdmFsdWUtYXR0cj1cIitcIiA+PC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIjwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL2ljb24tY2FydC1zdmctbW9iaWxlLmh0bWwnLAogICAgIjxzdmcgaWQ9XCJtb2JpbGVDYXJ0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiXG4iICsKICAgICIgICAgIHdpZHRoPVwiMjRweFwiIGhlaWdodD1cIjI0cHhcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZW5hYmxlLWJhY2tncm91bmQ9XCJuZXcgMCAwIDI0IDI0XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj5cbiIgKwogICAgIiAgICA8cGF0aCBmaWxsPVwiIzMxMzEzMVwiIGQ9XCJNOSwyMGMtMS4xLDAtMiwwLjktMiwyYzAsMS4xLDAuOSwyLDIsMmMxLjEsMCwyLTAuOSwyLTJDMTEsMjAuOSwxMC4xLDIwLDksMjB6IE0xOSwyMGMtMS4xLDAtMiwwLjktMiwyXG4iICsKICAgICIgICAgICAgIGMwLDEuMSwwLjksMiwyLDJzMi0wLjksMi0yQzIxLDIwLjksMjAuMSwyMCwxOSwyMHogTTguMywxNWgxMi41TDI0LDRINS41TDQuOCwxSDB2MmgzLjJsNCwxNkgyMXYtMkg4LjhMOC4zLDE1eiBNNiw2aDE1LjNsLTIsN1xuIiArCiAgICAiICAgICAgICBINy44TDYsNnpcIi8+XG4iICsKICAgICI8L3N2Zz4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL2ljb24tY2FydC1zdmcuaHRtbCcsCiAgICAiPHN2ZyBpZD1cIm1lbnVDYXJ0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiXG4iICsKICAgICIgICAgIHdpZHRoPVwiMjRweFwiIGhlaWdodD1cIjI0cHhcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZW5hYmxlLWJhY2tncm91bmQ9XCJuZXcgMCAwIDI0IDI0XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj5cbiIgKwogICAgIiAgICA8cGF0aCBmaWxsPVwiIzMxMzEzMVwiIGQ9XCJNOSwyMGMtMS4xLDAtMiwwLjktMiwyYzAsMS4xLDAuOSwyLDIsMmMxLjEsMCwyLTAuOSwyLTJDMTEsMjAuOSwxMC4xLDIwLDksMjB6IE0xOSwyMGMtMS4xLDAtMiwwLjktMiwyXG4iICsKICAgICIgICAgICAgIGMwLDEuMSwwLjksMiwyLDJzMi0wLjksMi0yQzIxLDIwLjksMjAuMSwyMCwxOSwyMHogTTguMywxNWgxMi41TDI0LDRINS41TDQuOCwxSDB2MmgzLjJsNCwxNkgyMXYtMkg4LjhMOC4zLDE1eiBNNiw2aDE1LjNsLTIsN1xuIiArCiAgICAiICAgICAgICBINy44TDYsNnpcIi8+XG4iICsKICAgICI8L3N2Zz5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL2ljb24tZGVsZXRlLWFjY291bnQtc3ZnLmh0bWwnLAogICAgIlxuIiArCiAgICAiPHN2ZyBpZD1cImljb25EZWxldGVBY2NvdW50U3ZnXCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiXG4iICsKICAgICJcdCB2aWV3Qm94PVwiMCAwIDE4IDE4XCIgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDE4IDE4O1wiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+XG4iICsKICAgICI8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+XG4iICsKICAgICJcdC5zdDB7ZmlsbDojMzEzMTMxO31cbiIgKwogICAgIiAgICAuc3Qxe2ZpbGw6bm9uZTtzdHJva2U6IzMxMzEzMTtzdHJva2Utd2lkdGg6MiU7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fVxuIiArCiAgICAiPC9zdHlsZT5cbiIgKwogICAgIlxuIiArCiAgICAiPHBhdGggY2xhc3M9XCJzdDBcIiBkPVwiTTYuOCwwLjRjLTIuMywwLTQuMiwyLjEtNC4yLDQuOGMwLDIuNywxLjgsNC44LDQuMiw0LjhDOS4xLDEwLDExLDcuOCwxMSw1LjJTOS4xLDAuNCw2LjgsMC40eiBNNi44LDguMVxuIiArCiAgICAiXHRjLTEuMywwLTIuMy0xLjMtMi4zLTIuOWMwLTEuNiwxLTIuOSwyLjMtMi45YzEuMywwLDIuMywxLjMsMi4zLDIuOUM5LjEsNi44LDgsOC4xLDYuOCw4LjF6XCIvPlxuIiArCiAgICAiPHBhdGggY2xhc3M9XCJzdDBcIiBkPVwiTTkuMSwxNXYxLjljLTAuMiwwLTAuNCwwLTAuNSwwSDUuOWMtMi4xLDAtMy44LDAtNC45LTEuMWMtMC43LTAuNy0xLTEuNy0xLTNjMC0xLDAuMy0xLjgsMS4xLTIuN1xuIiArCiAgICAiXHRDMS40LDkuOCwyLDkuNywyLjQsMTAuMWMwLjIsMC4xLDAuMywwLjQsMC4zLDAuNmMwLDAuMi0wLjEsMC41LTAuMiwwLjdjLTAuNCwwLjUtMC42LDAuOS0wLjYsMS41YzAsMC44LDAuMiwxLjQsMC41LDEuN1xuIiArCiAgICAiXHRjMC41LDAuNSwxLjgsMC41LDMuNSwwLjVoMS44QzguMiwxNSw4LjYsMTUsOS4xLDE1elwiLz5cbiIgKwogICAgIlxuIiArCiAgICAiPGxpbmUgY2xhc3M9XCJzdDFcIiB4MT1cIjExLjZcIiB5MT1cIjEwLjVcIiB4Mj1cIjE3LjRcIiB5Mj1cIjE2LjJcIi8+XG4iICsKICAgICI8bGluZSBjbGFzcz1cInN0MVwiIHgxPVwiMTcuNFwiIHkxPVwiMTAuNVwiIHgyPVwiMTEuNlwiIHkyPVwiMTYuMlwiLz5cbiIgKwogICAgIjwvc3ZnPlxuIgogICk7CgoKICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2FwcC9wYXJ0aWFscy9pY29uLWhlbHAtc3ZnLW1vYmlsZS5odG1sJywKICAgICI8c3ZnIGlkPVwibW9iaWxlSGVscFwiIHZlcnNpb249XCIxLjFcIlxuIiArCiAgICAiICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiIgKwogICAgIiAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiIgKwogICAgIiAgICAgeD1cIjBweFwiXG4iICsKICAgICIgICAgIHk9XCIwcHhcIlxuIiArCiAgICAiICAgICB3aWR0aD1cIjI0cHhcIlxuIiArCiAgICAiICAgICBoZWlnaHQ9XCIyNHB4XCJcbiIgKwogICAgIiAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4iICsKICAgICIgICAgIGVuYWJsZS1iYWNrZ3JvdW5kPVwibmV3IDAgMCAyNCAyNFwiXG4iICsKICAgICIgICAgIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+XG4iICsKICAgICIgICAgPHBhdGggZmlsbD1cIiMzMTMxMzFcIiBkPVwiTTExLDE4IEwxMywxOCBMMTMsMTYgTDExLDE2IEwxMSwxOCBaIE0xMiwyIEM2LjQ4LDIgMiw2LjQ4IDIsMTIgQzIsMTcuNTIgNi40OCwyMiAxMiwyMiBDMTcuNTIsMjIgMjIsMTcuNTIgMjIsMTIgQzIyLDYuNDggMTcuNTIsMiAxMiwyIFogTTEyLDIwIEM3LjU5LDIwIDQsMTYuNDEgNCwxMiBDNCw3LjU5IDcuNTksNCAxMiw0IEMxNi40MSw0IDIwLDcuNTkgMjAsMTIgQzIwLDE2LjQxIDE2LjQxLDIwIDEyLDIwIFogTTEyLDYgQzkuNzksNiA4LDcuNzkgOCwxMCBMMTAsMTAgQzEwLDguOSAxMC45LDggMTIsOCBDMTMuMSw4IDE0LDguOSAxNCwxMCBDMTQsMTIgMTEsMTEuNzUgMTEsMTUgTDEzLDE1IEMxMywxMi43NSAxNiwxMi41IDE2LDEwIEMxNiw3Ljc5IDE0LjIxLDYgMTIsNiBaXCI+PC9wYXRoPlxuIiArCiAgICAiPC9zdmc+IgogICk7CgoKICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2FwcC9wYXJ0aWFscy9pY29uLWhlbHAtc3ZnLmh0bWwnLAogICAgIjxzdmcgaWQ9XCJtZW51SGVscFwiIHZlcnNpb249XCIxLjFcIlxuIiArCiAgICAiICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiIgKwogICAgIiAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiIgKwogICAgIiAgICAgeD1cIjBweFwiXG4iICsKICAgICIgICAgIHk9XCIwcHhcIlxuIiArCiAgICAiICAgICB3aWR0aD1cIjI0cHhcIlxuIiArCiAgICAiICAgICBoZWlnaHQ9XCIyNHB4XCJcbiIgKwogICAgIiAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4iICsKICAgICIgICAgIGVuYWJsZS1iYWNrZ3JvdW5kPVwibmV3IDAgMCAyNCAyNFwiXG4iICsKICAgICIgICAgIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+XG4iICsKICAgICIgICAgPHBhdGggZmlsbD1cIiMzMTMxMzFcIiBkPVwiTTExLDE4IEwxMywxOCBMMTMsMTYgTDExLDE2IEwxMSwxOCBaIE0xMiwyIEM2LjQ4LDIgMiw2LjQ4IDIsMTIgQzIsMTcuNTIgNi40OCwyMiAxMiwyMiBDMTcuNTIsMjIgMjIsMTcuNTIgMjIsMTIgQzIyLDYuNDggMTcuNTIsMiAxMiwyIFogTTEyLDIwIEM3LjU5LDIwIDQsMTYuNDEgNCwxMiBDNCw3LjU5IDcuNTksNCAxMiw0IEMxNi40MSw0IDIwLDcuNTkgMjAsMTIgQzIwLDE2LjQxIDE2LjQxLDIwIDEyLDIwIFogTTEyLDYgQzkuNzksNiA4LDcuNzkgOCwxMCBMMTAsMTAgQzEwLDguOSAxMC45LDggMTIsOCBDMTMuMSw4IDE0LDguOSAxNCwxMCBDMTQsMTIgMTEsMTEuNzUgMTEsMTUgTDEzLDE1IEMxMywxMi43NSAxNiwxMi41IDE2LDEwIEMxNiw3Ljc5IDE0LjIxLDYgMTIsNiBaXCI+PC9wYXRoPlxuIiArCiAgICAiPC9zdmc+IgogICk7CgoKICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2FwcC9wYXJ0aWFscy9pY29uLWhvbWUtc3ZnLW1vYmlsZS5odG1sJywKICAgICI8c3ZnIGlkPVwibW9iaWxlSG9tZVwiIHZlcnNpb249XCIxLjFcIlxuIiArCiAgICAiXHQgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4iICsKICAgICJcdCB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIlxuIiArCiAgICAiXHQgeD1cIjBweFwiXG4iICsKICAgICJcdCB5PVwiMHB4XCJcbiIgKwogICAgIlx0IHdpZHRoPVwiMjRweFwiXG4iICsKICAgICJcdCBoZWlnaHQ9XCIyNHB4XCJcbiIgKwogICAgIlx0IHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuIiArCiAgICAiXHQgZW5hYmxlLWJhY2tncm91bmQ9XCJuZXcgMCAwIDI0IDI0XCJcbiIgKwogICAgIlx0IHhtbDpzcGFjZT1cInByZXNlcnZlXCI+XG4iICsKICAgICJcdDxwYXRoIGZpbGw9XCIjMzEzMTMxXCIgZD1cIk0yMSwyNEgzVjEwbC0xLjcsMS40TDAsOS44TDEyLDBsMTIsOS44bC0xLjMsMS41TDIxLDEwVjI0eiBNMTYsMjJoM1Y4LjNsLTctNS43TDUsOC4zVjIyaDN2LThoOFYyMnogTTEwLDIyIGg0di02aC00VjIyelwiLz5cbiIgKwogICAgIjwvc3ZnPiIKICApOwoKCiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhcHAvcGFydGlhbHMvaWNvbi1ob21lLXN2Zy5odG1sJywKICAgICI8c3ZnIGlkPVwibWVudUhvbWVcIiB2ZXJzaW9uPVwiMS4xXCJcbiIgKwogICAgIlx0IHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuIiArCiAgICAiXHQgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiIgKwogICAgIlx0IHg9XCIwcHhcIlxuIiArCiAgICAiXHQgeT1cIjBweFwiXG4iICsKICAgICJcdCB3aWR0aD1cIjI0cHhcIlxuIiArCiAgICAiXHQgaGVpZ2h0PVwiMjRweFwiXG4iICsKICAgICJcdCB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiIgKwogICAgIlx0IGVuYWJsZS1iYWNrZ3JvdW5kPVwibmV3IDAgMCAyNCAyNFwiXG4iICsKICAgICJcdCB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPlxuIiArCiAgICAiXHQ8cGF0aCBmaWxsPVwiIzMxMzEzMVwiIGQ9XCJNMjEsMjRIM1YxMGwtMS43LDEuNEwwLDkuOEwxMiwwbDEyLDkuOGwtMS4zLDEuNUwyMSwxMFYyNHogTTE2LDIyaDNWOC4zbC03LTUuN0w1LDguM1YyMmgzdi04aDhWMjJ6IE0xMCwyMiBoNHYtNmgtNFYyMnpcIi8+XG4iICsKICAgICI8L3N2Zz4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL2ljb24tc2VhcmNoLXN2Zy1tb2JpbGUuaHRtbCcsCiAgICAiPHN2ZyBpZD1cIm1vYmlsZVNlYXJjaFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIlxuIiArCiAgICAiXHQgd2lkdGg9XCIyNHB4XCIgaGVpZ2h0PVwiMjRweFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBlbmFibGUtYmFja2dyb3VuZD1cIm5ldyAwIDAgMjQgMjRcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPlxuIiArCiAgICAiPHBhdGggZmlsbD1cIiMzMTMxMzFcIiBkPVwiTTIzLjcsMjJsLTYuOC01LjZjMCwwLTAuMSwwLTAuMS0wLjFjMy4xLTMuOCwyLjktOS40LTAuNi0xMi45Yy0xLjgtMS44LTQuMi0yLjgtNi43LTIuOFxuIiArCiAgICAiXHRjLTIuNSwwLTQuOSwxLTYuNywyLjhjLTMuNywzLjctMy43LDkuOCwwLDEzLjZjMS44LDEuOCw0LjIsMi44LDYuNywyLjhjMi4zLDAsNC40LTAuOCw2LjEtMi4yYzAsMCwwLDAuMSwwLjEsMC4xbDYuOCw1LjZcbiIgKwogICAgIlx0YzAuMiwwLjIsMC40LDAuMywwLjYsMC4zYzAuMiwwLDAuNC0wLjEsMC42LTAuM0MyNC4xLDIyLjksMjQuMSwyMi4zLDIzLjcsMjJ6IE05LjUsMTcuOWMtMi4xLDAtNC0wLjgtNS41LTIuM2MtMy0zLjEtMy04LDAtMTEuMVxuIiArCiAgICAiXHRjMS41LTEuNSwzLjQtMi4zLDUuNS0yLjNjMi4xLDAsNCwwLjgsNS41LDIuM2MzLDMuMSwzLDgsMCwxMS4xQzEzLjUsMTcuMSwxMS42LDE3LjksOS41LDE3Ljl6XCIvPlxuIiArCiAgICAiPC9zdmc+IgogICk7CgoKICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2FwcC9wYXJ0aWFscy9pY29uLXNlYXJjaC1zdmcuaHRtbCcsCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIjxzdmcgaWQ9XCJtZW51U2VhcmNoXCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiXG4iICsKICAgICJcdCB3aWR0aD1cIjI0cHhcIiBoZWlnaHQ9XCIyNHB4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGVuYWJsZS1iYWNrZ3JvdW5kPVwibmV3IDAgMCAyNCAyNFwiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+XG4iICsKICAgICI8cGF0aCBmaWxsPVwiIzMxMzEzMVwiIGQ9XCJNMjMuNywyMmwtNi44LTUuNmMwLDAtMC4xLDAtMC4xLTAuMWMzLjEtMy44LDIuOS05LjQtMC42LTEyLjljLTEuOC0xLjgtNC4yLTIuOC02LjctMi44XG4iICsKICAgICJcdGMtMi41LDAtNC45LDEtNi43LDIuOGMtMy43LDMuNy0zLjcsOS44LDAsMTMuNmMxLjgsMS44LDQuMiwyLjgsNi43LDIuOGMyLjMsMCw0LjQtMC44LDYuMS0yLjJjMCwwLDAsMC4xLDAuMSwwLjFsNi44LDUuNlxuIiArCiAgICAiXHRjMC4yLDAuMiwwLjQsMC4zLDAuNiwwLjNjMC4yLDAsMC40LTAuMSwwLjYtMC4zQzI0LjEsMjIuOSwyNC4xLDIyLjMsMjMuNywyMnogTTkuNSwxNy45Yy0yLjEsMC00LTAuOC01LjUtMi4zYy0zLTMuMS0zLTgsMC0xMS4xXG4iICsKICAgICJcdGMxLjUtMS41LDMuNC0yLjMsNS41LTIuM2MyLjEsMCw0LDAuOCw1LjUsMi4zYzMsMy4xLDMsOCwwLDExLjFDMTMuNSwxNy4xLDExLjYsMTcuOSw5LjUsMTcuOXpcIi8+XG4iICsKICAgICI8L3N2Zz5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIgogICk7CgoKICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2FwcC9wYXJ0aWFscy9pY29uLXVzZXItc3ZnLW1vYmlsZS5odG1sJywKICAgICI8YSB0aXRsZT1cInt7ICdVU0VSJyB8IHRyYW5zbGF0ZSB9fVwiPlxuIiArCiAgICAiICAgIDxzdmcgaWQ9XCJtb2JpbGVVc2VyXCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiXG4iICsKICAgICIgICAgIHdpZHRoPVwiMjRweFwiIGhlaWdodD1cIjI0cHhcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZW5hYmxlLWJhY2tncm91bmQ9XCJuZXcgMCAwIDI0IDI0XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj5cbiIgKwogICAgIiAgICAgICAgPHBhdGggZmlsbD1cIiMzMTMxMzFcIiBkPVwiTTEyLDEzLjZjMy4zLDAsNS45LTMuMSw1LjktNi44QzE3LjksMy4xLDE1LjMsMCwxMiwwQzguNywwLDYuMSwzLjEsNi4xLDYuOEM2LjEsMTAuNiw4LjcsMTMuNiwxMiwxMy42elxuIiArCiAgICAiICAgICAgICAgICAgIE0xMiwyLjFjMi4xLDAsMy44LDIuMSwzLjgsNC43YzAsMi42LTEuNyw0LjctMy44LDQuN2MtMi4xLDAtMy44LTIuMS0zLjgtNC43QzguMiw0LjIsOS45LDIuMSwxMiwyLjF6IE0yMCwxNC4zXG4iICsKICAgICIgICAgICAgICAgICBjLTAuNC0wLjQtMS4xLTAuMy0xLjUsMC4xYy0wLjQsMC40LTAuMywxLjEsMC4xLDEuNWMwLjYsMC41LDEuMSwxLjgsMS4xLDIuNGMwLDEuNC0wLjMsMi4zLTAuOCwyLjhDMTgsMjIsMTYsMjIsMTMuMywyMS45XG4iICsKICAgICIgICAgICAgICAgICBjLTAuOSwwLTEuOCwwLTIuNywwQzgsMjIsNiwyMiw1LjEsMjEuMWMtMC41LTAuNS0wLjgtMS40LTAuOC0yLjhjMC0wLjksMC4zLTEuNywxLTIuNWMwLjQtMC40LDAuMy0xLjEtMC4xLTEuNFxuIiArCiAgICAiICAgICAgICAgICAgQzQuNywxNCw0LjEsMTQsMy43LDE0LjVjLTEsMS4yLTEuNSwyLjQtMS41LDMuOGMwLDEuOSwwLjUsMy4zLDEuNCw0LjJjMS41LDEuNSw0LDEuNSw3LjEsMS41YzAuOSwwLDEuOCwwLDIuNywwXG4iICsKICAgICIgICAgICAgICAgICBjMC40LDAsMC44LDAsMS4yLDBjMi41LDAsNC42LTAuMiw1LjktMS41YzAuOS0wLjksMS40LTIuMywxLjQtNC4yQzIxLjgsMTcuMiwyMS4xLDE1LjMsMjAsMTQuM3pcIi8+XG4iICsKICAgICIgICAgPC9zdmc+XG4iICsKICAgICI8L2E+IgogICk7CgoKICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2FwcC9wYXJ0aWFscy9pY29uLXVzZXItc3ZnLmh0bWwnLAogICAgIjxhIGlkPVwiaHJlZlVzZXJJY29uXCIgdGl0bGU9XCJ7eyAnVVNFUicgfCB0cmFuc2xhdGUgfX1cIj5cbiIgKwogICAgIiAgICA8c3ZnIGlkPVwibWVudVVzZXJcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHg9XCIwcHhcIiB5PVwiMHB4XCJcbiIgKwogICAgIiAgICAgd2lkdGg9XCIyNHB4XCIgaGVpZ2h0PVwiMjRweFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBlbmFibGUtYmFja2dyb3VuZD1cIm5ldyAwIDAgMjQgMjRcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPlxuIiArCiAgICAiICAgICAgICA8cGF0aCBpZD1cIm1lbnVVc2VyU1ZHUGF0aFwiIGZpbGw9XCIjMzEzMTMxXCIgZD1cIk0xMiwxMy42YzMuMywwLDUuOS0zLjEsNS45LTYuOEMxNy45LDMuMSwxNS4zLDAsMTIsMEM4LjcsMCw2LjEsMy4xLDYuMSw2LjhDNi4xLDEwLjYsOC43LDEzLjYsMTIsMTMuNnpcbiIgKwogICAgIiAgICAgICAgICAgICBNMTIsMi4xYzIuMSwwLDMuOCwyLjEsMy44LDQuN2MwLDIuNi0xLjcsNC43LTMuOCw0LjdjLTIuMSwwLTMuOC0yLjEtMy44LTQuN0M4LjIsNC4yLDkuOSwyLjEsMTIsMi4xeiBNMjAsMTQuM1xuIiArCiAgICAiICAgICAgICAgICAgYy0wLjQtMC40LTEuMS0wLjMtMS41LDAuMWMtMC40LDAuNC0wLjMsMS4xLDAuMSwxLjVjMC42LDAuNSwxLjEsMS44LDEuMSwyLjRjMCwxLjQtMC4zLDIuMy0wLjgsMi44QzE4LDIyLDE2LDIyLDEzLjMsMjEuOVxuIiArCiAgICAiICAgICAgICAgICAgYy0wLjksMC0xLjgsMC0yLjcsMEM4LDIyLDYsMjIsNS4xLDIxLjFjLTAuNS0wLjUtMC44LTEuNC0wLjgtMi44YzAtMC45LDAuMy0xLjcsMS0yLjVjMC40LTAuNCwwLjMtMS4xLTAuMS0xLjRcbiIgKwogICAgIiAgICAgICAgICAgIEM0LjcsMTQsNC4xLDE0LDMuNywxNC41Yy0xLDEuMi0xLjUsMi40LTEuNSwzLjhjMCwxLjksMC41LDMuMywxLjQsNC4yYzEuNSwxLjUsNCwxLjUsNy4xLDEuNWMwLjksMCwxLjgsMCwyLjcsMFxuIiArCiAgICAiICAgICAgICAgICAgYzAuNCwwLDAuOCwwLDEuMiwwYzIuNSwwLDQuNi0wLjIsNS45LTEuNWMwLjktMC45LDEuNC0yLjMsMS40LTQuMkMyMS44LDE3LjIsMjEuMSwxNS4zLDIwLDE0LjN6XCIvPlxuIiArCiAgICAiICAgIDwvc3ZnPlxuIiArCiAgICAiPC9hPiIKICApOwoKCiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhcHAvcGFydGlhbHMvbW9iaWxlU2VhcmNoLmh0bWwnLAogICAgIjxkaXYgaWQ9XCJtb2JpbGVTZWFyY2hcIiBkYXRhLW5nLWNsb2FrPlxuIiArCiAgICAiICAgIDxpbnB1dCBuYW1lPVwibW9iaWxlX3NlYXJjaFwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCIgcGxhY2Vob2xkZXI9XCJ7eyAnU2VhcmNoJyB8IHRyYW5zbGF0ZX19XCJcbiIgKwogICAgIiAgICAgICAgICAgZGF0YS1uZy1rZXlwcmVzcz1cImNoZWNrRW50ZXJLZXkoJGV2ZW50KVwiXG4iICsKICAgICIgICAgICAgICAgIGRhdGEtbmctbW9kZWw9XCJhdXRvQ29tcGxldGVWYWx1ZVwiXG4iICsKICAgICIgICAgICAgICAgIGRhdGEtbmcta2V5dXA9XCJydW5BdXRvY29tcGxldGUoKVwiXG4iICsKICAgICIgICAgPlxuIiArCiAgICAiICAgIDxkaXYgY2xhc3M9XCJpbWdcIiBpY29uLXNlYXJjaC1zdmcgZGF0YS1uZy1jbGljaz1cImdvVG9DYXRlZ29yeVBhZ2UoKVwiPjwvZGl2PlxuIiArCiAgICAiPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL29yZGVyU2VhcmNoLmh0bWwnLAogICAgIlxuIiArCiAgICAiPGRpdiBpZD1cIm9yZGVyU2VhcmNoU2VjdGlvblwiXG4iICsKICAgICIgICAgIGRhdGEtbmctbW91c2VlbnRlcj1cImFsbG93Q2xvc2luZyA9IGZhbHNlXCJcbiIgKwogICAgIiAgICAgZGF0YS1uZy1tb3VzZWxlYXZlPVwiYWxsb3dDbG9zaW5nTGVhdmUodHJ1ZSlcIlxuIiArCiAgICAiICAgICBkYXRhLW5nLWNsaWNrPVwiY2xvc2VTZWFyY2hTZWN0aW9uKCRldmVudClcIj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxkaXYgaWQ9XCJvcmRlcklucHV0XCIgZGF0YS1uZy1jbGljaz1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oJGV2ZW50KVwiPlxuIiArCiAgICAiICAgICAgICA8ZGl2IGlkPVwib3JkZXJTZWFyY2hcIj5cbiIgKwogICAgIiAgICAgICAgICAgIDxhIHRpdGxlPVwie3sgJ1NFQVJDSCcgfCB0cmFuc2xhdGUgfX1cIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2IGljb24tc2VhcmNoLXN2ZyBkYXRhLW5nLWNsaWNrPVwib3BlblNlYXJjaE9yZGVycygkZXZlbnQpXCIgPjwvZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgPC9hPlxuIiArCiAgICAiICAgICAgICAgICAgPGRpdiBjbGFzcz1cImF1dG9Db21wbGV0ZUNvdmVyXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwib3JkZXJBdXRvQ29tcGxldGVcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwicm9ib3RvLXJlZ3VsYXJcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInt7J1NlYXJjaE9yZGVyJyB8IHRyYW5zbGF0ZSB9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbmctbW9kZWw9XCJhdXRvQ29tcGxldGVWYWx1ZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbmcta2V5dXA9XCJydW5BdXRvY29tcGxldGUoJGV2ZW50KVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbmctYmx1cj1cImNsb3NlU2VhcmNoU2VjdGlvbigkZXZlbnQpXCI+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2IGRhdGEtbmctY2xpY2s9XCJjbG9zZVNlYXJjaEZvcmNlKCRldmVudClcIiAgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiAwOyB0b3A6MFwiID5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIuLi8uLi9jc3MvaW1hZ2VzL2Nsb3NlRGFyay5wbmdcIiBzdHlsZT1cIndpZHRoOjIwcHg7IGhlaWdodDoyMHB4OyBwYWRkaW5nOiAxMnB4IDBcIiA+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL3BvcHVsYXItSXRlbXMtdHBsLmh0bWwnLAogICAgIlxuIiArCiAgICAiPCEtLSBQT1BVTEFSIElURU1TIC0tPlxuIiArCiAgICAiPGFydGljbGU+XG4iICsKICAgICIgICAgPGgzIGNsYXNzPVwicm9ib3RvLXJlZ3VsYXIgY2VudGVyXCIgdHJhbnNsYXRlPVwiUE9QVUxBUl9JVEVNU1wiPlxuIiArCiAgICAiICAgICAgICA8IS0tIHt7J1NQQUNJQUxfT0ZGRVInIHwgdHJhbnNsYXRlfX0gLS0+XG4iICsKICAgICIgICAgPC9oMz5cbiIgKwogICAgIiAgICA8ZGl2IGNsYXNzPVwiZ3JpZC10YWJsZVwiPlxuIiArCiAgICAiICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInByb2R1Y3QgaW4gcG9wdWxhclByb2R1Y3RzXCIgbmctaWY9XCJwb3B1bGFyUHJvZHVjdHMubGVuZ3RoID4gMFwiPlxuIiArCiAgICAiICAgICAgICAgICAgPGZpZ3VyZT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8aW1nIGRhdGEtbmctc3JjPVwie3twcm9kdWN0LmltYWdlVXJsfX1cIiBhbHQ9XCJTcGVjaWFsLW9mZmVyXCIgPlxuIiArCiAgICAiICAgICAgICAgICAgPC9maWd1cmU+XG4iICsKICAgICIgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJzaG9wX25vdyBjZW50ZXJcIj57e3Byb2R1Y3QucHJvZHVjdE5hbWV9fTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgIDwvZGl2PlxuIiArCiAgICAiPC9hcnRpY2xlPlxuIiArCiAgICAiPCEtLSBlbmQgUE9QVUxBUiBJVEVNUyAtLT5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIKICApOwoKCiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhcHAvcGFydGlhbHMvc2Nyb2xsVG9Ub3AuaHRtbCcsCiAgICAiPGRpdiBpZD1cInNjcm9sbFRvVG9wXCI+XG4iICsKICAgICIgICAgPGltZyBuYW1lPVwiZ29fdXBfYnRuXCIgc3JjPVwiY3NzL2ltYWdlcy9Hb1VwLnBuZ1wiIGFsdD1cIkdPIFVQXCIvPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgPHAgdHJhbnNsYXRlPVwiR09fVVBcIj48L3A+XG4iICsKICAgICI8L2Rpdj4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL3NlY0lucHV0Lmh0bWwnLAogICAgIjxkaXY+XG4iICsKICAgICIgICAgPGEgY2xhc3M9XCJtdXN0XCIgbmctc2hvdz1cIndhcm5pbmdzLmxlbmd0aCA+IDAgJiYgIW5vUmVkU3RhclwiPio8L2E+XG4iICsKICAgICJcbiIgKwogICAgIiAgICA8bGFiZWwgY2xhc3M9XCJ2YWxpZGF0ZS1sYWJlbFwiXG4iICsKICAgICIgICAgICAgICAgIG5nLWNsYXNzPVwieyB2YWxpZGF0ZUludmFsaWQgOiAhdGV4dFRvU2hvdy52YWxpZH1cIlxuIiArCiAgICAiICAgICAgICAgICBuZy1jbGljaz1cInZhbGlkYXRlTGFiZWxDbGlja2VkKGlkKVwiPlxuIiArCiAgICAiICAgICAgICB7e3RleHRUb1Nob3cudGV4dH19XG4iICsKICAgICIgICAgPC9sYWJlbD5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxpbnB1dCB0eXBlPVwie3tpbnB1dFR5cGV9fVwiIG5hbWU9XCJ7e2lkfX1cIiBhdXRvY2FwaXRhbGl6ZT1cIm9mZlwiXG4iICsKICAgICIgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiIGF1dG9jb3JyZWN0PVwib2ZmXCIgY2xhc3M9XCJpbnB1dHRleHRcIlxuIiArCiAgICAiICAgICAgICAgICBkYXRhLW5nLWNsYXNzPVwieyB2YWxpZGF0ZUludmFsaWQgOiAhdGV4dFRvU2hvdy52YWxpZCB9XCJcbiIgKwogICAgIiAgICAgICAgICAgZGF0YS1uZy1oaWRlPVwiaW5wdXRUeXBlID09ICd0cmFuc2NsdWRlJ1wiXG4iICsKICAgICIgICAgICAgICAgIGRhdGEtbmctbW9kZWw9XCJtb2RlbEF0dHJcIlxuIiArCiAgICAiICAgICAgICAgICBkYXRhLW5nLWZvY3VzPVwiaW5wdXRGb2N1cyhpZClcIlxuIiArCiAgICAiICAgICAgICAgICBkYXRhLW5nLWJsdXI9XCJpbnB1dEJsdXIoaWQpXCJcbiIgKwogICAgIiAgICAgICAgICAgZGF0YS1uZy1rZXl1cD1cImlucHV0S2V5dXAoaWQpXCJcbiIgKwogICAgIiAgICAgICAgICAgaWQ9XCJzZWNJbnB1dF97e2lkfX1cIiAvPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgPGRpdiBuZy10cmFuc2NsdWRlIGRhdGEtbmctc2hvdz1cImlucHV0VHlwZSA9PSAndHJhbnNjbHVkZSdcIj48L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxkaXYgY2xhc3M9XCJ2YWxpZGF0ZS1pbmZvXCIgbmctc2hvdz1cIndhcm5pbmdzLmxlbmd0aCA+IDAgJiYgIWRvTm90U2hvd0luZm9cIj5cbiIgKwogICAgIiAgICAgICAgPHVsPlxuIiArCiAgICAiICAgICAgICAgICAgPGxpIGRhdGEtbmctcmVwZWF0PVwiaW5mbyBpbiB3YXJuaW5nc1wiIGRhdGEtbmctc2hvdz1cImluZm8uaW5mbyAhPSAnJyAmJiBpbmZvLnNob3dcIiA+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGE+e3sgaW5mby5pbmZvIH19PC9hPlxuIiArCiAgICAiICAgICAgICAgICAgPC9saT5cbiIgKwogICAgIiAgICAgICAgPC91bD5cbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICI8L2Rpdj5cbiIgKwogICAgIlxuIgogICk7CgoKICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2FwcC9wYXJ0aWFscy9zZWNUZXh0YXJlYS5odG1sJywKICAgICI8ZGl2PlxuIiArCiAgICAiICAgIDxhIGNsYXNzPVwibXVzdFwiIG5nLXNob3c9XCJ3YXJuaW5ncy5sZW5ndGggPiAwICYmICFub1JlZFN0YXJcIj4qPC9hPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgPGxhYmVsIGNsYXNzPVwidmFsaWRhdGUtbGFiZWxcIlxuIiArCiAgICAiICAgICAgICAgICBuZy1jbGFzcz1cInsgdmFsaWRhdGVJbnZhbGlkIDogIXRleHRUb1Nob3cudmFsaWR9XCJcbiIgKwogICAgIiAgICAgICAgICAgbmctY2xpY2s9XCJ2YWxpZGF0ZUxhYmVsQ2xpY2tlZChpZClcIj5cbiIgKwogICAgIiAgICAgICAge3t0ZXh0VG9TaG93LnRleHR9fVxuIiArCiAgICAiICAgIDwvbGFiZWw+XG4iICsKICAgICIgICAgPHRleHRhcmVhIG5hbWU9XCJ7e2lkfX1cIiBjbGFzcz1cImlucHV0dGV4dFwiXG4iICsKICAgICIgICAgICAgICAgIGRhdGEtbmctY2xhc3M9XCJ7IHZhbGlkYXRlSW52YWxpZCA6ICF0ZXh0VG9TaG93LnZhbGlkIH1cIlxuIiArCiAgICAiICAgICAgICAgICBkYXRhLW5nLW1vZGVsPVwibW9kZWxBdHRyXCJcbiIgKwogICAgIiAgICAgICAgICAgZGF0YS1uZy1mb2N1cz1cImlucHV0Rm9jdXMoaWQpXCJcbiIgKwogICAgIiAgICAgICAgICAgZGF0YS1uZy1ibHVyPVwiaW5wdXRCbHVyKGlkKVwiXG4iICsKICAgICIgICAgICAgICAgIGRhdGEtbmcta2V5dXA9XCJpbnB1dEtleXVwKGlkKVwiXG4iICsKICAgICIgICAgICAgICAgIGlkPVwic2VjSW5wdXRfe3tpZH19XCIgLz5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxkaXYgY2xhc3M9XCJ2YWxpZGF0ZS1pbmZvXCIgbmctc2hvdz1cIndhcm5pbmdzLmxlbmd0aCA+IDBcIj5cbiIgKwogICAgIiAgICAgICAgPHVsPlxuIiArCiAgICAiICAgICAgICAgICAgPGxpIGRhdGEtbmctcmVwZWF0PVwiaW5mbyBpbiB3YXJuaW5nc1wiIGRhdGEtbmctc2hvdz1cImluZm8uaW5mbyAhPSAnJyAmJiBpbmZvLnNob3dcIiA+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGE+e3sgaW5mby5pbmZvIH19PC9hPlxuIiArCiAgICAiICAgICAgICAgICAgPC9saT5cbiIgKwogICAgIiAgICAgICAgPC91bD5cbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIjwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIKICApOwoKCiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhcHAvcGFydGlhbHMvc29jaWFsLW1lZGlhLXRwbC5odG1sJywKICAgICJcciIgKwogICAgIlxuIiArCiAgICAiPGZvb3Rlcj5cciIgKwogICAgIlxuIiArCiAgICAiICAgIDxkaXY+XHIiICsKICAgICJcbiIgKwogICAgIiAgICAgICAgPCEtLSBGT0xMT1cgVVMgLS0+XHIiICsKICAgICJcbiIgKwogICAgIiAgICAgICAgPGgzIGNsYXNzPVwicm9ib3RvLXJlZ3VsYXIgY2VudGVyXCIgdHJhbnNsYXRlPVwiRk9MTE9XX1VTXCI+PC9oMz5cciIgKwogICAgIlxuIiArCiAgICAiICAgICAgICA8ZGl2IGlkPVwiZm9sbG93XCIgY2xhc3M9XCJjZW50ZXJcIj5cciIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiBodHRwczovL3d3dy5mYWNlYm9vay5jb20vTWljcm9Gb2N1cy9cIj5cciIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxpbWcgbmFtZT1cImZvbGxvd19mYWNlYm9va1wiIHNyYz1cImNzcy9pbWFnZXMvZmFjZWJvb2sucG5nXCIgYWx0PVwiaWNvblwiIGRhdGEtbmctY2xpY2s9XCJsaW5rVG8oJycpXCIgLz5cciIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPC9hPlxyIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS9NaWNyb0ZvY3VzXCI+XHIiICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8aW1nIG5hbWU9XCJmb2xsb3dfdHdpdHRlclwiIHNyYz1cImNzcy9pbWFnZXMvdHdpdHRlci5wbmdcIiBhbHQ9XCJpY29uXCIgLz5cciIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPC9hPlxyIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL2NvbXBhbnkvMTAyND90cms9dHlhaCZ0cmtJbmZvPWNsaWNrZWRWZXJ0aWNhbCUzQXNob3djYXNlJTJDY2xpY2tlZEVudGl0eUlkJTNBMTAyNCUyQ2lkeCUzQTItMS0yJTJDdGFySWQlM0ExNDU0MzE0ODIuMzI3JTJDdGFzJTNBaGV3bGV0dCUyMHBhY2thcmQlMjBlbnRlcnByaXNlJTIwc29mdHdhcmVcIj5cciIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxpbWcgbmFtZT1cImZvbGxvd19saW5rZWRpblwiIHNyYz1cImNzcy9pbWFnZXMvbGlua2VkaW4ucG5nXCIgYWx0PVwiaWNvblwiIC8+XHIiICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDwvYT5cciIgKwogICAgIlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cciIgKwogICAgIlxuIiArCiAgICAiICAgICAgICA8bGFiZWw+IMKpIEFkdmFudGFnZSBJbmMsIDIwMjQuIFJlbGVhc2UgMy4zIDwvbGFiZWw+XHIiICsKICAgICJcbiIgKwogICAgIiAgICA8L2Rpdj5cciIgKwogICAgIlxuIiArCiAgICAiPC9mb290ZXI+XHIiICsKICAgICJcbiIgKwogICAgIlxyIiArCiAgICAiXG4iICsKICAgICJcciIgKwogICAgIlxuIiArCiAgICAiXHIiICsKICAgICJcbiIgKwogICAgIlxyIiArCiAgICAiXG4iICsKICAgICJcciIgKwogICAgIlxuIiArCiAgICAiXHIiICsKICAgICJcbiIgKwogICAgIlxyIiArCiAgICAiXG4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL3Rvb2xUaXBDYXJ0Lmh0bWwnLAogICAgIjxkaXY+XG4iICsKICAgICIgICAgPGRpdiBuZy1oaWRlPVwiY2FydC5wcm9kdWN0c0luQ2FydC5sZW5ndGggPiAwXCIgY2xhc3M9XCJlbXB0eUNhcnRcIiBkYXRhLW5nLWNsaWNrPVwicmVkaXJlY3QoJy9zaG9wcGluZ0NhcnQnKVwiPlxuIiArCiAgICAiICAgICAgICA8bGFiZWwgY2xhc3M9XCJjZW50ZXIgaXRlbXMgcm9ib3RvLWJvbGRcIj4ge3sgJ0lURU1TJyB8IHRyYW5zbGF0ZX19XG4iICsKICAgICIgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJvYm90by1yZWd1bGFyXCI+KDApPC9zcGFuPlxuIiArCiAgICAiICAgICAgICA8L2xhYmVsPlxuIiArCiAgICAiICAgICAgICA8bGFiZWwgY2xhc3M9XCJjZW50ZXIgcm9ib3RvLW1lZGl1bVwiIHRyYW5zbGF0ZT1cIllvdXJfc2hvcHBpbmdfY2FydF9pc19lbXB0eVwiPjwvbGFiZWw+XG4iICsKICAgICIgICAgPC9kaXY+XG4iICsKICAgICIgICAgPHRhYmxlIG5nLXNob3c9XCJjYXJ0LnByb2R1Y3RzSW5DYXJ0Lmxlbmd0aCA+IDBcIiAgPlxuIiArCiAgICAiICAgICAgICA8dGJvZHkgPlxuIiArCiAgICAiICAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cInByb2R1Y3QgaW4gY2FydC5wcm9kdWN0c0luQ2FydCB0cmFjayBieSAkaW5kZXhcIiBpZD1cInByb2R1Y3R7e3Byb2R1Y3QuaWR9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgZGF0YS1uZy1jbGFzcz1cInsgbGFzdFByb2R1Y3QgOiAkbGFzdCB9XCIgPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDx0ZD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiMvcHJvZHVjdC97e3Byb2R1Y3QucHJvZHVjdElkfX0/Y29sb3I9e3twcm9kdWN0LmNvbG9yLmNvZGV9fSZxdWFudGl0eT17e3Byb2R1Y3QucXVhbnRpdHl9fSZwYWdlU3RhdGU9ZWRpdFwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cImltYWdlVXJsXCIgbmctc3JjPVwiL2NhdGFsb2cvZmV0Y2hJbWFnZT9pbWFnZV9pZD17e3Byb2R1Y3QuaW1hZ2VVcmx9fVwiIGFsdD1cImltZ1Byb2R1Y3RcIiAvPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L2E+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC90ZD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8dGQ+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjL3Byb2R1Y3Qve3twcm9kdWN0LnByb2R1Y3RJZH19P2NvbG9yPXt7cHJvZHVjdC5jb2xvci5jb2RlfX0mcXVhbnRpdHk9e3twcm9kdWN0LnF1YW50aXR5fX0mcGFnZVN0YXRlPWVkaXRcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz57eyBwcm9kdWN0LnByb2R1Y3ROYW1lICB8IHVwcGVyY2FzZSB8IHNlY0NhdFdvcmQ6MzAgfX08L2gzPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPnt7J1FUWScgfCB0cmFuc2xhdGV9fSB7e3Byb2R1Y3QucXVhbnRpdHl9fTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+e3snQ29sb3InIHwgdHJhbnNsYXRlIH19XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3twcm9kdWN0LmNvbG9yLm5hbWV9fTwvc3Bhbj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvYT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L3RkPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDx0ZD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJwcmljZSByb2JvdG8tcmVndWxhclwiPnt7IHByb2R1Y3QucHJpY2UgKiBwcm9kdWN0LnF1YW50aXR5IHwgY3VycmVuY3k6JyQnIH19PC9wPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2xvc2VEaXZcIiBuZy1jbGljaz1cInJlbW92ZVByb2R1Y3QoJGluZGV4LCAkZXZlbnQpXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGljb24teCBjbGFzcz1cInJlbW92ZVByb2R1Y3RcIj48L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC90ZD5cbiIgKwogICAgIiAgICAgICAgICAgIDwvdHI+XG4iICsKICAgICIgICAgICAgIDwvdGJvZHk+XG4iICsKICAgICIgICAgICAgIDx0Zm9vdCAgZGF0YS1uZy1jbGljaz1cInJlZGlyZWN0KCcvc2hvcHBpbmdDYXJ0JylcIj5cbiIgKwogICAgIiAgICAgICAgICAgIDx0cj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj1cIjJcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCI+e3snVE9UQUwnIHwgdHJhbnNsYXRlfX1cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInJvYm90by1yZWd1bGFyXCI+KHt7Y2FydCB8IHByb2R1Y3RzQ2FydENvdW50fX0ge3sgKGNhcnQgfCBwcm9kdWN0c0NhcnRDb3VudCkgPiAxID8gJ0l0ZW1zJyA6ICdJdGVtJyB8IHRyYW5zbGF0ZX19KTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L3RkPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDx0ZD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJyb2JvdG8tbWVkaXVtIGNhcnQtdG90YWxcIiA+e3tjYXJ0IHwgcHJvZHVjdHNDYXJ0U3VtIHwgY3VycmVuY3k6JyQnfX08L3NwYW4+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC90ZD5cbiIgKwogICAgIiAgICAgICAgICAgIDwvdHI+XG4iICsKICAgICIgICAgICAgICAgICA8dHI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49XCIzXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjaGVja091dFBvcFVwXCIgbmFtZT1cImNoZWNrX291dF9idG5cIiByb2xlPVwiYnV0dG9uXCIgY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCIgZGF0YS1uZy1jbGljaz1cImNoZWNrb3V0KCRldmVudClcIj57eydDSEVDS19PVVQnIHwgdHJhbnNsYXRlfX0gICh7eyBjYXJ0IHwgcHJvZHVjdHNDYXJ0U3VtOnNoaXBwaW5nQ29zdCB8IGN1cnJlbmN5OickJyB9fSk8L2J1dHRvbj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L3RkPlxuIiArCiAgICAiICAgICAgICAgICAgPC90cj5cbiIgKwogICAgIiAgICAgICAgPC90Zm9vdD5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDwvdGFibGU+XG4iICsKICAgICI8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL3BhcnRpYWxzL3Rvb2xUaXBTZWFyY2guaHRtbCcsCiAgICAiXG4iICsKICAgICI8ZGl2IGlkPVwic2VhcmNoU2VjdGlvblwiXG4iICsKICAgICIgICAgIGRhdGEtbmctbW91c2VlbnRlcj1cImFsbG93Q2xvc2luZyA9IGZhbHNlXCJcbiIgKwogICAgIiAgICAgZGF0YS1uZy1tb3VzZWxlYXZlPVwiYWxsb3dDbG9zaW5nTGVhdmUoKVwiXG4iICsKICAgICIgICAgIGRhdGEtbmctY2xpY2s9XCJjbG9zZVNlYXJjaFNlY3Rpb24oKVwiPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgPGRpdiBpZD1cImlucHV0XCIgZGF0YS1uZy1jbGljaz1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiPlxuIiArCiAgICAiICAgICAgICA8ZGl2IGlkPVwic2VhcmNoXCI+XG4iICsKICAgICIgICAgICAgICAgICA8YSB0aXRsZT1cInt7ICdTRUFSQ0gnIHwgdHJhbnNsYXRlIH19XCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdiBpY29uLXNlYXJjaC1zdmcgZGF0YS1uZy1jbGljaz1cIm9wZW5TZWFyY2hQcm9kdWN0cygpXCIgPjwvZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgPC9hPlxuIiArCiAgICAiICAgICAgICAgICAgPGRpdiBjbGFzcz1cImF1dG9Db21wbGV0ZUNvdmVyXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiYXV0b0NvbXBsZXRlXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cInJvYm90by1yZWd1bGFyXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eydTZWFyY2gnIHwgdHJhbnNsYXRlIH19IEFkdmFudGFnZU9ubGluZVNob3BwaW5nLmNvbVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbmcta2V5cHJlc3M9XCJjaGVja0VudGVyS2V5KCRldmVudClcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICBkYXRhLW5nLW1vZGVsPVwiYXV0b0NvbXBsZXRlVmFsdWVcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICBkYXRhLW5nLWtleXVwPVwicnVuQXV0b2NvbXBsZXRlKClcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICA+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2IGRhdGEtbmctY2xpY2s9XCJjbG9zZVNlYXJjaEZvcmNlKClcIiAgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiAwOyB0b3A6MFwiID5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIuLi8uLi9jc3MvaW1hZ2VzL2Nsb3NlRGFyay5wbmdcIiBzdHlsZT1cIndpZHRoOjIwcHg7IGhlaWdodDoyMHB4OyBwYWRkaW5nOiAxMnB4IDBcIiA+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxkaXYgaWQ9XCJvdXRwdXRcIiBkYXRhLW5nLXNob3c9XCJhdXRvQ29tcGxldGVSZXN1bHQubGVuZ3RoID4gMFwiID5cbiIgKwogICAgIiAgICAgICAgPGRpdiBjbGFzcz1cInNlYXJjaFBvcFVwXCIgZGF0YS1uZy1jbGljaz1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiID5cbiIgKwogICAgIiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yaWVzXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwicm9ib3RvLW1lZGl1bVwiIHRyYW5zbGF0ZT1cIkNBVEVHT1JJRVNcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICBkYXRhLW5nLW1vdXNlZW50ZXI9XCJzZWFyY2hCeUNhdGVnb3J5SWQobnVsbCwgJycpXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9oMz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8YSBocmVmPVwiIy9zZWFyY2gve3tjYXRlZ29yeUZpbHRlcn19P3ZpZXdBbGw9e3thdXRvQ29tcGxldGVWYWx1ZX19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICBkYXRhLW5nLXJlcGVhdD1cInJlc3VsdCBpbiBhdXRvQ29tcGxldGVSZXN1bHRcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwicm9ib3RvLWxpZ2h0XCJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1uZy1tb3VzZWVudGVyPVwic2VhcmNoQnlDYXRlZ29yeUlkKHJlc3VsdC5jYXRlZ29yeUlkLCByZXN1bHQuY2F0ZWdvcnlOYW1lKVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAge3tyZXN1bHQuY2F0ZWdvcnlOYW1lIHwgbG93ZXJjYXNlfX1cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2E+XG4iICsKICAgICIgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3A2UHJvZHVjdHNcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCIgPnt7ICdUT1AnIHwgdHJhbnNsYXRlIH19IHt7ICdSRVNVTFRTX0ZPUicgfCB0cmFuc2xhdGUgfX06IFwie3thdXRvQ29tcGxldGVWYWx1ZX19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDExcHggIWltcG9ydGFudDsgZm9udC13ZWlnaHQ6IDMwMCAhaW1wb3J0YW50O1wiID4ge3sgY2F0ZWdvcnlOYW1lIH19IDwvcD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2gzPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjL3NlYXJjaC97e2NhdGVnb3J5RmlsdGVyfX0/dmlld0FsbD17e2F1dG9Db21wbGV0ZVZhbHVlfX1cIiB0cmFuc2xhdGU9XCJWaWV3X0FsbFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJyb2JvdG8tbWVkaXVtIHZpZXdBbGxcIj48L2E+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJwcm9kdWN0XCIgaHJlZj1cIiMvcHJvZHVjdC97e3Byb2R1Y3QucHJvZHVjdElkfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgIGRhdGEtbmctY2xpY2s9XCJjbG9zZVNlYXJjaFNlY3Rpb24oKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgZGF0YS1uZy1yZXBlYXQ9XCJwcm9kdWN0IGluIFtdIHwgZmlsdGVyRnVsbEFycmF5Zm9yQXV0b0NvbXBsYXRlOmF1dG9Db21wbGV0ZVJlc3VsdDpjYXRlZ29yeUZpbHRlclwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8aW1nIGRhdGEtbmctc3JjPVwiL2NhdGFsb2cvZmV0Y2hJbWFnZT9pbWFnZV9pZD17e3Byb2R1Y3QuaW1hZ2VVcmx9fVwiIC8+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwicm9ib3RvLXJlZ3VsYXJcIj57e3Byb2R1Y3QucHJvZHVjdE5hbWUgfCB1cHBlcmNhc2V9fTwvcD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3twcm9kdWN0LnByaWNlIHwgY3VycmVuY3k6JyQnfX08L3NwYW4+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9hPlxuIiArCiAgICAiICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICI8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIKICApOwoKCiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhcHAvdXNlci9wYXJ0aWFscy9sb2dpbi5odG1sJywKICAgICI8ZGl2IGNsYXNzPVwiUG9wVXBcIj5cbiIgKwogICAgIiAgICA8ZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgIDxkaXYgY2xhc3M9XCJsb2FkZXJcIj5cbiIgKwogICAgIiAgICAgICAgICAgIDxkaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiNTBcIiB2aWV3Qm94PVwiMCAwIDUwIDUwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8ZGVmcz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT1cIjguMDQyJVwiIHkxPVwiMCVcIiB4Mj1cIjY1LjY4MiVcIiB5Mj1cIjIzLjg2NSVcIiBpZD1cImFcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiIzU0QjNBRFwiIHN0b3Atb3BhY2l0eT1cIjBcIiBvZmZzZXQ9XCIwJVwiLz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVwiIzU0QjNBRFwiIHN0b3Atb3BhY2l0eT1cIi42MzFcIiBvZmZzZXQ9XCI2My4xNDYlXCIvPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9XCIjNTRCM0FEXCIgb2Zmc2V0PVwiMTAwJVwiLz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGluZWFyR3JhZGllbnQ+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvZGVmcz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGcgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMSAxKVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMzYgMThjMC05Ljk0LTguMDYtMTgtMTgtMThcIiBpZD1cIk92YWwtMlwiIHN0cm9rZT1cInVybCgjYSlcIiBzdHJva2Utd2lkdGg9XCIyXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZT1cInRyYW5zZm9ybVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInJvdGF0ZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbT1cIjAgMTggMThcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPVwiMzYwIDE4IDE4XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXI9XCIwLjlzXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXRDb3VudD1cImluZGVmaW5pdGVcIi8+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wYXRoPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgZmlsbD1cIiM1NEIzQURcIiBjeD1cIjM2XCIgY3k9XCIxOFwiIHI9XCIxXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZT1cInRyYW5zZm9ybVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInJvdGF0ZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbT1cIjAgMTggMThcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPVwiMzYwIDE4IDE4XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXI9XCIwLjlzXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXRDb3VudD1cImluZGVmaW5pdGVcIi8+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9jaXJjbGU+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8L2c+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvZz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L3N2Zz5cbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICA8ZGl2IGNsYXNzPVwiY2xvc2VCdG4gbG9naW5Qb3BVcENsb3NlQnRuXCI+PC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgPGRpdiBjbGFzcz1cImxvZ2luXCIgbmctY29udHJvbGxlcj1cInVzZXJDb250cm9sbGVyXCI+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDxpbWcgc3JjPVwiLi4vLi4vY3NzL2ltYWdlcy9sb2dvLnBuZ1wiPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhY2Vib29rXCIgdHJhbnNsYXRlPVwiRkFDRUJPT0tfU0lHTl9JTlwiIGRhdGEtbmctY2xpY2s9XCJzaW5nV2l0aEZhY2Vib29rKClcIj48L3NwYW4+XG4iICsKICAgICIgICAgICAgICAgICA8bGFiZWwgaWQ9XCJzaWduSW5SZXN1bHRNZXNzYWdlXCIgY2xhc3M9XCJvciB7eyBtZXNzYWdlLl9jbGFzcyB9fSBjZW50ZXJcIj57e21lc3NhZ2UudGV4dH19PC9sYWJlbD5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPHNlYy1mb3JtPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPHNlYy12aWV3IGEtaGludD1cInt7J1VzZXJfbmFtZScgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgIGEtZG8tbm90LXNob3ctaW5mbz1cInRydWVcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICBhLXN0YXI9XCJmYWxzZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1tb2RlbD1cImxvZ2luVXNlci5sb2dpblVzZXJcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtcmVxdWlyZT1cIm1haW5DdHJsLmdldFJlcXVpcmUoJ1VzZXJfbmFtZScpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW5hbWU9XCJ1c2VybmFtZVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvc2VjLXZpZXc+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snUGFzc3dvcmQnIHwgdHJhbnNsYXRlfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICBhLWRvLW5vdC1zaG93LWluZm89XCJ0cnVlXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgYS1zdGFyPVwiZmFsc2VcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICBhLXR5cGU9XCJwYXNzd29yZFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1tb2RlbD1cImxvZ2luVXNlci5sb2dpblBhc3N3b3JkXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLXJlcXVpcmU9XCJtYWluQ3RybC5nZXRSZXF1aXJlKCdQYXNzd29yZCcpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW5hbWU9XCJwYXNzd29yZFwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvc2VjLXZpZXc+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snRW1haWwnIHwgdHJhbnNsYXRlfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICBhLWRvLW5vdC1zaG93LWluZm89XCJ0cnVlXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgYS1zdGFyPVwiZmFsc2VcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICBuZy1zaG93PVwibWFpbkN0cmwuY29uZmlnLmVtYWlsQWRkcmVzc0luTG9naW5cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtZGlzYWJsZS12YWxpZGF0aW9uPVwiIW1haW5DdHJsLmNvbmZpZy5lbWFpbEFkZHJlc3NJbkxvZ2luXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwibG9naW5Vc2VyLmVtYWlsXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW5hbWU9XCJlbWFpbFwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvc2VjLXZpZXc+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0IG9wdGlvbiBcIiBzdHlsZT1cInRvcDogMjBweFwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT1cInJlbWVtYmVyX21lXCIgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJtYWluQ3RybC5yZW1lbWJlck1lXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT1cIlJFTUVNQkVSX01FXCI+PC9zcGFuPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPHNlYy1zZW5kZXIgY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCIgYS12YWx1ZT1cInt7J1NJR05fSU4nIHwgdHJhbnNsYXRlfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1zZW5kPVwic2lnbkluKGxvZ2luVXNlciwgbWFpbkN0cmwucmVtZW1iZXJNZSlcIj48L3NlYy1zZW5kZXI+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPC9zZWMtZm9ybT5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIHJvbGU9XCJsaW5rXCIgY2xhc3M9XCJmb3Jnb3QtUGFzc3dvd2RcIiB0cmFuc2xhdGU9XCJGT1JHT1RfUEFTU1dPUkRcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgIGRhdGEtbmctY2xpY2s9XCJmb3Jnb3RQYXNzd29yZCgpXCI+PC9hPlxuIiArCiAgICAiICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIHJvbGU9XCJsaW5rXCIgY2xhc3M9XCJjcmVhdGUtbmV3LWFjY291bnRcIiB0cmFuc2xhdGU9XCJDUkVBVEVfTkVXX0FDQ09VTlRcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbmctY2xpY2s9XCJjcmVhdGVOZXdBY2NvdW50KClcIj48L2E+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIjwvZGl2PiIKICApOwoKCiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhcHAvb3JkZXIvcGFydGlhbHMvb3JkZXItcGF5bWVudC1zdWNjZXNzLmh0bWwnLAogICAgIjxkaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICA8aDI+IDxzcGFuIGNsYXNzPVwicm9ib3RvLXJlZ3VsYXJcIiB0cmFuc2xhdGU9XCJUaGFua195b3VfZm9yX2J1eWluZ193aXRoX0FkdmFudGFnZVwiPiA8L3NwYW4+IDwvaDI+XG4iICsKICAgICJcbiIgKwogICAgIiAgICA8cCBjbGFzcz1cInJvYm90by1yZWd1bGFyXCI+IHt7ICdZb3JfdHJhY2tpbmdfbnVtYmVyX2lzJyB8IHRyYW5zbGF0ZSB9fSA8bGFiZWwgaWQ9XCJ0cmFja2luZ051bWJlckxhYmVsXCI+e3sgdHJhY2tpbmdOdW1iZXIgfX08L2xhYmVsPlxuIiArCiAgICAiICAgICAgICA8c3BhbiBjbGFzcz1cInNlcGFyYXRvclwiPnw8L3NwYW4+XG4iICsKICAgICIgICAgICAgIHt7ICdZb3VyX29yZGVyX251bWJlcl9pcycgfCB0cmFuc2xhdGUgfX0gPGxhYmVsIGlkPVwib3JkZXJOdW1iZXJMYWJlbFwiPnt7b3JkZXJOdW1iZXJ9fTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgIDxzcGFuIGNsYXNzPVwic2VwYXJhdG9yXCIgZGF0YS1uZy1zaG93PVwiaGFzV2FycmFudHlcIj58PC9zcGFuPlxuIiArCiAgICAiICAgICAgICA8bGFiZWwgZGF0YS1uZy1zaG93PVwiaGFzV2FycmFudHlcIj57eyAnWW91cl93YXJyYW50eV9udW1iZXJfaXMnIHwgdHJhbnNsYXRlIH19IDwvbGFiZWw+PGxhYmVsIGRhdGEtbmctc2hvdz1cImhhc1dhcnJhbnR5XCIgaWQ9XCJ3YXJyYW50eU51bWJlclwiPnt7d2FycmFudHlOdW1iZXJ9fTwvbGFiZWw+XG4iICsKICAgICIgICAgPC9wPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgPGRpdj5cbiIgKwogICAgIiAgICAgICAgPGRpdiBjbGFzcz1cInNlY2Npb24gYm9yZGVyUmlnaHRcIj5cbiIgKwogICAgIiAgICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT1cIlNoaXBwaW5nX3RvXCI+IDwvc3Bhbj5cbiIgKwogICAgIiAgICAgICAgICAgIDxkaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyU2VjY2lvblwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8ZGl2IGljb24tdXNlciA+PC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbD57e3VzZXIuZmlyc3ROYW1lfX0ge3t1c2VyLmxhc3ROYW1lfX08L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbm5lclNlY2Npb25cIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBpY29uLWhvbWUgPjwvZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8bGFiZWw+e3sgdXNlci5hZGRyZXNzIH19PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPnt7IHVzZXIuY2l0eU5hbWUgfX08L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8bGFiZWw+e3sgdXNlci5zdGF0ZVByb3ZpbmNlIH19PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5uZXJTZWNjaW9uXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxkaXYgaWNvbi1waG9uZSA+PC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbD57eyB1c2VyLnBob25lTnVtYmVyIH19PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgPGRpdiBjbGFzcz1cInNlY2Npb24gYm9yZGVyUmlnaHRcIj5cbiIgKwogICAgIiAgICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT1cIlBheW1lbnRfTWV0aG9kXCI+PC9zcGFuPlxuIiArCiAgICAiICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyU2VjY2lvblwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxsYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAge3tUcmFuc1BheW1lbnRNZXRob2R9fVxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImZsb2F0ZXJcIiBkYXRhLW5nLXNob3c9XCJUcmFuc1BheW1lbnRNZXRob2QgPT0gJ01hc3RlckNyZWRpdCdcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGRhdGEtbmctcmVwZWF0PVwiXzRudW1iZXJzIGluIGNhcmROdW1iZXIgdHJhY2sgYnkgJGluZGV4XCIgPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IF80bnVtYmVycyB8IHNob3dMYXN0NERpZ2l0c0NhcmQ6JGxhc3Q6JGluZGV4IH19XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvYT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5uZXJTZWNjaW9uXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGxhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICB7eyAnRGF0ZV9PcmRlcmVkJyB8IHRyYW5zbGF0ZX19XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiZmxvYXRlclwiPnt7RGF0ZV9PcmRlcmVkfX08L2E+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgPGRpdiBjbGFzcz1cInNlY2Npb25cIj5cbiIgKwogICAgIiAgICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT1cIk9yZGVyX1N1bW1hcnlcIj48L3NwYW4+XG4iICsKICAgICIgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5uZXJTZWNjaW9uXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGxhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICB7eyAnU3VidG90YWwnIHwgdHJhbnNsYXRlfX1cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJmbG9hdGVyXCI+IHt7IHN1YlRvdGFsIHwgY3VycmVuY3k6JCB9fSA8L2E+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyU2VjY2lvblwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxsYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAge3sgJ3NoaXBwaW5nJyB8IHRyYW5zbGF0ZX19XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiZmxvYXRlclwiPiB7e3NoaXBwaW5nQ29zdCB8IGN1cnJlbmN5OickJ319PC9hPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbm5lclNlY2Npb25cIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJ0b3RhbFwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICB7eyAnVE9UQUwnIHwgdHJhbnNsYXRlfX1cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJmbG9hdGVyXCI+ICB7eyB0b3RhbCB8IGN1cnJlbmN5OiQgfX0gPC9hPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIjwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIKICApOwoKCiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhcHAvb3JkZXIvcGFydGlhbHMvdXNlci1hcmUtbG9naW4uaHRtbCcsCiAgICAiPGRpdj5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICIgICAgPGRpdiBpZD1cImRldGFpbHNsaW5rXCI+XG4iICsKICAgICIgICAgICAgIDxsYWJlbCBjbGFzcz1cInJvYm90by1yZWd1bGFyXCIgbmctY2xhc3M9XCJ7IHNlbGVjdGVkIDogZmlyc3RUYWcgfVwiPjEuIHt7IG1haW5DdHJsLmNvbmZpZy5zcGVsbGluZ01pc3Rha2VzID8gJ1NISVBJTkdfREVUQUlMUycgOiAnU0hJUFBJTkdfREVUQUlMUycgfCB0cmFuc2xhdGV9fSA8L2xhYmVsPlxuIiArCiAgICAiICAgICAgICA8bGFiZWwgY2xhc3M9XCJyb2JvdG8tcmVndWxhclwiIG5nLWNsYXNzPVwieyBzZWxlY3RlZCA6ICFmaXJzdFRhZyB9XCI+Mi4ge3sgJ1BBWU1FTlRfTUVUSE9EJyB8IHRyYW5zbGF0ZSB9fTwvbGFiZWw+XG4iICsKICAgICIgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICA8IS0tIFVTRVIgREVUQUlMUyBTRUNUSU9OLS0+XG4iICsKICAgICJcbiIgKwogICAgIiAgICA8ZGl2IGlkPVwidXNlclNlY3Rpb25cIiBuZy1zaG93PVwiZmlyc3RUYWdcIj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICA8ZGl2IGRhdGEtbmctc2hvdz1cIiF1c2VyRGV0YWlsc0VkaXRNb2RlXCI+XG4iICsKICAgICIgICAgICAgICAgICA8ZGl2IGlkPVwidXNlckRldGFpbHNcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImNzcy9pbWFnZXMvVXNlci5qcGdcIiBhbHQ9XCJ1c2VyXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwhLS08ZGl2IGljb24tdXNlcj48L2Rpdj4tLT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPnt7dXNlci5maXJzdE5hbWV9fSB7e3VzZXIubGFzdE5hbWV9fTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPCEtLTxpbWcgc3JjPVwiY3NzL2ltYWdlcy8uanBnXCIgYWx0PVwidXNlclwiPi0tPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8ZGl2IGljb24taG9tZT48L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGRhdGEtbmctc2hvdz1cInVzZXIuYWRkcmVzcyAhPSAnJ1wiPnt7IHVzZXIuYWRkcmVzcyB9fTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBkYXRhLW5nLXNob3c9XCJ1c2VyLmNpdHlOYW1lICE9ICcnXCI+e3sgdXNlci5jaXR5TmFtZSB9fTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBkYXRhLW5nLXNob3c9XCJjb3VudHJ5Lm5hbWUgIT0gJydcIj57eyBjb3VudHJ5Lm5hbWUgfX08L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZGF0YS1uZy1zaG93PVwidXNlci5zdGF0ZVByb3ZpbmNlICE9ICcnXCI+e3sgdXNlci5zdGF0ZVByb3ZpbmNlIH19PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGRhdGEtbmctc2hvdz1cInVzZXIuemlwY29kZSAhPSAnJ1wiPnt7IHVzZXIuemlwY29kZSB9fTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBpY29uLXBob25lPjwvZGl2PlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8bGFiZWw+e3sgdXNlci5waG9uZU51bWJlciB9fTwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJibHVlTGlua1wiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxhIHJvbGU9XCJsaW5rXCIgZGF0YS1uZy1jbGljaz1cInNldFVzZXJEZXRhaWxzRWRpdE1vZGUoKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlPVwiRWRpdF9zaGlwcGluZ19EZXRhaWxzXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiPjwvYT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbG9hdC1idXR0b25cIj57eyAnU0hJUFBJTkdfQlknIHwgdHJhbnNsYXRlIH19OlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImNzcy9pbWFnZXMvU2hpcGV4LnBuZ1wiIGFsdD1cIlNoaXBFeFwiLz48L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9iaWxlQnRuSGFuZGxlclwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJuZXh0X2J0blwiIHJvbGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwic2hpcHBpbmdEZXRhaWxzX25leHQoKVwiIGNsYXNzPVwiYS1idXR0b24gbmV4dEJ0biBtYXJnaW5Ub3A3NVwiIHRyYW5zbGF0ZT1cIk5FWFRcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgIDxkaXYgZGF0YS1uZy1zaG93PVwidXNlckRldGFpbHNFZGl0TW9kZVwiIGlkPVwidXNlckRldGFpbHNFZGl0TW9kZVwiPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8IS0tIEVESVQgVVNFUiBERVRBSUxTIFNFQ1RJT04tLT5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPHNlYy1mb3JtIHNlYy1nZXQtZm9ybS12YWxpZGF0aW9uLXdoZW4tcmVhZHk9XCJ2YWxpZFNlY1ZhbGlkYXRlKHZhbGlkKVwiPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPGg2IGNsYXNzPVwicm9ib3RvLWJvbGRcIj4ge3sgbWFpbkN0cmwuY29uZmlnLnNwZWxsaW5nTWlzdGFrZXMgPyAnUmVjaWV2ZXJfRGV0YWlscycgOiAnUmVjZWl2ZXJfRGV0YWlscycgfCB0cmFuc2xhdGV9fSA8L2g2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwbGl0ZXJcIj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snRmlyc3RfTmFtZScgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtbW9kZWw9XCJ1c2VyLmZpcnN0TmFtZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtbWluLWxlbmd0aD1cIm1haW5DdHJsLmdldE1pbigyKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtbWF4LWxlbmd0aD1cIm1haW5DdHJsLmdldE1heCgzMClcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPC9zZWMtdmlldz5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snTGFzdF9OYW1lJyB8IHRyYW5zbGF0ZX19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1tb2RlbD1cInVzZXIubGFzdE5hbWVcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1pbi1sZW5ndGg9XCJtYWluQ3RybC5nZXRNaW4oMilcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1heC1sZW5ndGg9XCJtYWluQ3RybC5nZXRNYXgoMzApXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvc2VjLXZpZXc+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGxpdGVyXCI+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPHNlYy12aWV3IGEtaGludD1cInt7J1Bob25lX051bWJlcicgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtbWF4LWxlbmd0aD1cIm1haW5DdHJsLmdldE1heCgyMClcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwidXNlci5waG9uZU51bWJlclwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxoNiB0cmFuc2xhdGU9XCJBZGRyZXNzXCIgY2xhc3M9XCJyb2JvdG8tYm9sZFwiPjwvaDY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BsaXRlclwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwiQ291bnRyeVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtcmVxdWlyZT1cIm1haW5DdHJsLmdldFJlcXVpcmUoJ0NvdW50cnknKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLXR5cGU9XCJzZWxlY3RcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS1zaG93PVwibmFtZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtbW9kZWw9XCJjb3VudHJ5XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1zZWxlY3Qtb3B0aW9ucz1cImNvdW50cmllc1wiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxzZWMtdmlldyBhLWhpbnQ9XCJ7eyBtYWluQ3RybC5jb25maWcuc3BlbGxpbmdNaXN0YWtlcyA/ICdDaWl0eScgOiAnQ2l0eScgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtbW9kZWw9XCJ1c2VyLmNpdHlOYW1lXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1tYXgtbGVuZ3RoPVwibWFpbkN0cmwuZ2V0TWF4KDI1KVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwbGl0ZXJcIj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snQWRkcmVzcycgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtbW9kZWw9XCJ1c2VyLmFkZHJlc3NcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1heC1sZW5ndGg9XCJtYWluQ3RybC5nZXRNYXgoNTApXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvc2VjLXZpZXc+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snUG9zdGFsX0NvZGUnIHwgdHJhbnNsYXRlfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwidXNlci56aXBjb2RlXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1tYXgtbGVuZ3RoPVwibWFpbkN0cmwuZ2V0TWF4KDEwKVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BsaXRlclwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snU3RhdGVfX1Byb3ZpbmNlX19SZWdpb24nIHwgdHJhbnNsYXRlfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwidXNlci5zdGF0ZVByb3ZpbmNlXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1tYXgtbGVuZ3RoPVwibWFpbkN0cmwuZ2V0TWF4KDEwKVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9wdGlvbiBtYXJnaW5Ub3BcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9XCJhZ3JlZV9hZ3JlZW1lbnRcIiBuZy1tb2RlbD1cImFncmVlX0FncmVlbWVudFwiIHR5cGU9XCJjaGVja2JveFwiLz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJyb2JvdG8tbGlnaHRcIiB0cmFuc2xhdGU9XCJTYXZlX2NoYW5nZXNfaW5fcHJvZmlsZV9mb3JfZnV0dXJlX3VzZVwiPjwvc3Bhbj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJibHVlTGlua1wiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8c2VjLXNlbmRlciBjbGFzcz1cInJvYm90by1tZWRpdW1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLXZhbHVlPVwie3snTkVYVCcgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1zZW5kPVwiYWNjb3VudFVwZGF0ZSgpXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvc2VjLXNlbmRlcj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJyb2JvdG8tbWVkaXVtIGZsb2F0LWJ1dHRvbiBhLWxpbmsgbGlua1RvUHJlc3NcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICBkYXRhLW5nLWNsYXNzPVwieyBidXR0b25EaXNhYmxlIDogaW52YWxpZFVzZXJ9XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1uZy1jbGljaz1cImJhY2tUb01haW5TaGlwcGluZ0RldGFpbHMoKVwiIHRyYW5zbGF0ZT1cIkJBQ0tcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPC9hPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8L3NlYy1mb3JtPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8IS0tIEVORCBFRElUIFVTRVIgREVUQUlMUyBTRUNUSU9OLS0+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDwhLS0gRU5EIFVTRVIgREVUQUlMUyBTRUNUSU9OLS0+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgIDwhLS0gRURJVCBFRElUIFBBWU1FTlQgU0VDVElPTiAtLT5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxkaXYgaWQ9XCJwYXltZW50TWV0aG9kXCIgZGF0YS1uZy1oaWRlPVwiZmlyc3RUYWdcIj5cbiIgKwogICAgIiAgICAgICAgPGRpdj5cbiIgKwogICAgIiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cIkNob29zZV9wYXltZW50IHJvYm90by1tZWRpdW1cIiB0cmFuc2xhdGU9XCJDaG9vc2VfcGF5bWVudF9tZXRob2RfYmVsb3dcIj5cbiIgKwogICAgIiAgICAgICAgICAgIDwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGF5bWVudE1ldGhvZHNcIiBuZy1pbml0PVwiY2hlY2tlZFJhZGlvID0gMVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbWdSYWRpb0J1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJpbWdSYWRpb0J1dHRvbkNsaWNrZWQoMSk7IGNoZWNrZWRSYWRpbyA9IDFcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgZGF0YS1uZy1jbGFzcz1cInsgc2VsZWN0ZWQgOiBpbWdSYWRpb0J1dHRvbiA9PSAxIH1cIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJzYWZlcGF5XCIgbmctY2hlY2tlZD1cImNoZWNrZWRSYWRpbyA9PSAxXCIgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOjI1cHg7IGxlZnQ6MjRweDsgb3BhY2l0eTowXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiY3NzL2ltYWdlcy9TYWZlUGF5LnBuZ1wiIGFsdD1cIlNhZmVwYXlcIi8+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImltZ1JhZGlvQnV0dG9uXCIgZGF0YS1uZy1jbGljaz1cImltZ1JhZGlvQnV0dG9uID0gMjsgY2hlY2tlZFJhZGlvID0gMlwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgZGF0YS1uZy1jbGFzcz1cInsgc2VsZWN0ZWQgOiBpbWdSYWRpb0J1dHRvbiA9PSAyIH1cIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJtYXN0ZXJDcmVkaXRcIiBuZy1jaGVja2VkPVwiY2hlY2tlZFJhZGlvID09IDJcIiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOyB0b3A6MjVweDsgbGVmdDoyNHB4OyBvcGFjaXR5OjBcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJjc3MvaW1hZ2VzL01hc3Rlcl9jcmVkaXQucG5nXCIgYWx0PVwiTWFzdGVyIGNyZWRpdFwiLz5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU0FGRVBBWSBTRUNUSU9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDxkaXYgbmctc2hvdz1cImltZ1JhZGlvQnV0dG9uID09IDFcIj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJub3RpY2VcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGg0IHRyYW5zbGF0ZT1cIk5vdGljZVwiPjwvaDQ+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJyb2JvdG8tbGlnaHRcIj57eyAnVGhpc19pc19hX2RlbW8nIHwgdHJhbnNsYXRlIH19IHt7ICdQbGVhc2VfZW50ZXJfYV9mYWtlX2RhdGEnIHxcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSB9fTwvcD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInBheU5vd19lcnJvcl9sYWJlbFwiIGlkPVwicGF5Tm93U1BFcnJvckxhYmVsXCI+PC9sYWJlbD5cbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgPHNlYy1mb3JtID5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snU2FmZVBheV9Vc2VyX25hbWUnIHwgdHJhbnNsYXRlfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwic2F2ZVBheS51c2VybmFtZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtcmVxdWlyZT1cIm1haW5DdHJsLmdldFJlcXVpcmUoJ1NhZmVQYXlfVXNlcl9uYW1lJylcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1pbi1sZW5ndGg9XCJtYWluQ3RybC5nZXRNaW4oNSlcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1heC1sZW5ndGg9XCJtYWluQ3RybC5nZXRNYXgoMTUpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1wYXR0ZXJuPVwibWFpbkN0cmwuZ2V0UGF0dGVybignVXNlcm5hbWUnKVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxzZWMtdmlldyBhLWhpbnQ9XCJ7eydTYWZlUGF5X1Bhc3N3b3JkJyB8IHRyYW5zbGF0ZX19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEtdHlwZT1cInBhc3N3b3JkXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1tb2RlbD1cInNhdmVQYXkucGFzc3dvcmRcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLXJlcXVpcmU9XCJtYWluQ3RybC5nZXRSZXF1aXJlKCdTYWZlUGF5X1Bhc3N3b3JkJylcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1pbi1sZW5ndGg9XCJtYWluQ3RybC5nZXRNaW4oNClcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1heC1sZW5ndGg9XCJtYWluQ3RybC5nZXRNYXgoMTIpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1wYXR0ZXJuPVwibWFpbkN0cmwuZ2V0UGF0dGVybignUGFzc3dvcmQnKVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcHRpb24gbWFyZ2luVG9wXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT1cInNhdmVfc2FmZXBheVwiIG5nLW1vZGVsPVwic2F2ZVNhZmVQYXlcIiB0eXBlPVwiY2hlY2tib3hcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicm9ib3RvLWxpZ2h0IG5nLWJpbmRpbmdcIiB0cmFuc2xhdGU9XCJTYXZlX2NoYW5nZXNfaW5fcHJvZmlsZV9mb3JfZnV0dXJlX3VzZVwiPiA8L3NwYW4+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJibHVlTGluayBtYXJnaW4xNXB4XCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgcm9sZT1cImxpbmtcIiBkYXRhLW5nLWNsaWNrPVwiQmFja190b19zaGlwcGluZ19kZXRhaWxzKClcIiB0cmFuc2xhdGU9XCJCYWNrX3RvX3NoaXBwaW5nX2RldGFpbHNcIj48L2E+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8IS0tPGEgZGF0YS1uZy1jbGljaz1cImZpcnN0VGFnID0gdHJ1ZVwiIHRyYW5zbGF0ZT1cIkJhY2tfdG9fc2hpcHBpbmdfZGV0YWlsc1wiPjwvYT4tLT5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZsb2F0X3JpZ2h0XCIgc3R5bGU9XCJkaXNwbGF5OiB0YWJsZVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWMtc2VuZGVyIGlkPVwicGF5Tm93U1BEcnR2XCIgY2xhc3M9XCJyb2JvdG8tbWVkaXVtIHBheU5vd0J1dHRvbk1hcmdpbldpdGhFcnJvclwiIGEtdmFsdWU9XCJ7eydQQVlfTk9XJyB8IHRyYW5zbGF0ZX19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLWhpbnQ9XCJfU0FGRVBBWVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLXNlbmQ9XCJwYXlOb3dfU2FmZVBheSgpXCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6IDIwJTtcIj48L3NlYy1zZW5kZXI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvc2VjLWZvcm0+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVORCBTQUZFUEFZIFNFQ1RJT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBNQVNURVJDUkVESVQgU0VDVElPTiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDxkaXYgbmctc2hvdz1cImltZ1JhZGlvQnV0dG9uID09IDIgJiYgIW5vQ2FyZHMgJiYgIXNob3dNYXN0ZXJDYXJ0XCI+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWFzdGVyQ3JlZGl0U2VjY2lvblwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm9ib3RvLXJlZ3VsYXJcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiTWFzdGVyQ3JlZGl0XCI+TWFzdGVyQ3JlZGl0PC9zcGFuPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gZGF0YS1uZy1yZXBlYXQ9XCJfNG51bWJlcnMgaW4gQ2FyZE51bWJlciB0cmFjayBieSAkaW5kZXhcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBfNG51bWJlcnMgfCBzaG93TGFzdDREaWdpdHNDYXJkOiRsYXN0OiRpbmRleH19XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJlZGl0IFwiIGRhdGEtbmctY2xpY2s9XCJ0b2dnbGVTaG93TWFzdGVyQ2FydCgpXCIgdHJhbnNsYXRlPVwiRWRpdFwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmx1ZUxpbmsgbWFyZ2luQm90dG9tXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiByb2xlPVwibGlua1wiIG5nLWNsaWNrPVwiQmFja190b19zaGlwcGluZ19kZXRhaWxzKClcIiB0cmFuc2xhdGU9XCJCYWNrX3RvX3NoaXBwaW5nX2RldGFpbHNcIj48L2E+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT1cImZsb2F0OiByaWdodDtkaXNwbGF5OiB0YWJsZTtcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gc3R5bGU9XCIgICAgbWFyZ2luLWJvdHRvbTogNXB4O1wiIGlkPVwicGF5X25vd19idG5fTWFzdGVyQ3JlZGl0XCIgbmFtZT1cInBheV9ub3dfYnRuX01hc3RlckNyZWRpdFwiIGNsYXNzPVwicm9ib3RvLW1lZGl1bSBmbG9hdC1idXR0b24gYS1idXR0b25cIiBkYXRhLW5nLWNsaWNrPVwicGF5Tm93X21hbnVhbCgpXCIgcm9sZT1cImJ1dHRvblwiPnt7J1BBWV9OT1cnIHwgdHJhbnNsYXRlfX08L2J1dHRvbj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInBheU5vd19lcnJvcl9sYWJlbFwiIGlkPVwicGF5Tm93TUNFcnJvckxhYmVsRXhwZW5kZWRcIj48L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgTUFTVEVSQ1JFRElUIFNFQ1RJT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBNQU5VQUwgUEFZTUVOVCBTRUNUSU9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDxkaXYgbmctc2hvdz1cIihpbWdSYWRpb0J1dHRvbiA9PSAyKSAmJiAobm9DYXJkcyB8fCBzaG93TWFzdGVyQ2FydClcIj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJub3RpY2VcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGg0IHRyYW5zbGF0ZT1cIk5vdGljZVwiPjwvaDQ+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwicm9ib3RvLWxpZ2h0XCI+e3sgJ1RoaXNfaXNfYV9kZW1vJyB8IHRyYW5zbGF0ZSB9fSB7eyAnUGxlYXNlX2VudGVyX2FfZmFrZV9kYXRhJyB8IHRyYW5zbGF0ZSB9fTwvcD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDxzZWMtZm9ybT5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BsaXRlclwiPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8c2VjLXZpZXcgYS1oaW50PVwie3snQ2FyZF9udW1iZXInIHwgdHJhbnNsYXRlfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEtc2VjcmV0LWZpZWxkPVwidHJ1ZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS10eXBlPVwiY3JlZGl0Q2FyZFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwiY2FyZC5udW1iZXJcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1yZXF1aXJlPVwibWFpbkN0cmwuZ2V0UmVxdWlyZSgnQ2FyZF9udW1iZXInKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLWNhcmQtbnVtYmVyPVwibWFpbkN0cmwuZ2V0Q2FyZE51bWJlcigxNilcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjLXZpZXc+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPHNlYy12aWV3IGEtaGludD1cInt7J0NDVl9OdW1iZXInIHwgdHJhbnNsYXRlfX1cIiBjbGFzcz1cImNyZWRpdENhcmRcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEtc2VjcmV0LWZpZWxkPVwidHJ1ZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwiY2FyZC5jdnZcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1yZXF1aXJlPVwibWFpbkN0cmwuZ2V0UmVxdWlyZSgnQ0NWX051bWJlcicpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtcGF0dGVybj1cIm1haW5DdHJsLmdldFBhdHRlcm4oJ0NDVl9OdW1iZXInKVwiPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWMtdmlldz5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwicm9ib3RvLXJlZ3VsYXIgZXhwaXJhdGlvbl9kYXRlX3RpdGxlXCIgdHJhbnNsYXRlPVwiRXhwaXJhdGlvbl9EYXRlXCI+PC9sYWJlbD5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwbGl0ZXJcIj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBheW1lbnRfZGF0ZVwiPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlYy12aWV3IGEtaGludD1cInt7ICdNTScgfCB0cmFuc2xhdGUgfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLXR5cGU9XCJzZWxlY3RcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLWRvLW5vdC1zaG93LWluZm89XCJ0cnVlXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLXJlcXVpcmU9XCJtYWluQ3RybC5nZXRSZXF1aXJlKCdNb250aCcpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwiY2FyZC5leHBpcmF0aW9uRGF0ZS5tb250aFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1zZWxlY3Qtb3B0aW9ucz1cIm1vbnRoXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWMtdmlldz5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWMtdmlldyBhLWhpbnQ9XCJ7eyAnWVknIHwgdHJhbnNsYXRlIH19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS10eXBlPVwic2VsZWN0XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS1kby1ub3Qtc2hvdy1pbmZvPVwidHJ1ZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1yZXF1aXJlPVwibWFpbkN0cmwuZ2V0UmVxdWlyZSgnWWVhcicpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwiY2FyZC5leHBpcmF0aW9uRGF0ZS55ZWFyXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLXNlbGVjdC1jaGFuZ2U9XCJjYWxjdWxhdGVNb250aHModmFsdWUpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLXNlbGVjdC1vcHRpb25zPVwieWVhcnNcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS1zZWMtdmFsdWUtY2hhbmdlPVwiXCItLT5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPHNlYy12aWV3IGEtaGludD1cInt7ICdDYXJ0aG9sZGVyX05hbWUnIHwgdHJhbnNsYXRlIH19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtcmVxdWlyZT1cIm1haW5DdHJsLmdldFJlcXVpcmUoJ0NhcnRob2xkZXJfTmFtZScpXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtbW9kZWw9XCJjYXJkLm5hbWVcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjLXZpZXc+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9wdGlvbiBtYXJnaW5Ub3BcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPVwic2F2ZV9tYXN0ZXJfY3JlZGl0XCIgbmctbW9kZWw9XCJzYXZlTWFzdGVyQ3JlZGl0XCIgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJuZy1wcmlzdGluZSBuZy11bnRvdWNoZWQgbmctdmFsaWRcIj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicm9ib3RvLWxpZ2h0IG5nLWJpbmRpbmdcIiB0cmFuc2xhdGU9XCJTYXZlX2NoYW5nZXNfaW5fcHJvZmlsZV9mb3JfZnV0dXJlX3VzZVwiPjwvc3Bhbj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJsdWVMaW5rXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgcm9sZT1cImxpbmtcIiBuZy1jbGljaz1cIkJhY2tfdG9fc2hpcHBpbmdfZGV0YWlscygpXCIgdHJhbnNsYXRlPVwiQmFja190b19zaGlwcGluZ19kZXRhaWxzXCI+PC9hPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZmxvYXRfcmlnaHRcIiBzdHlsZT1cImRpc3BsYXk6IHRhYmxlXCI+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlYy1zZW5kZXIgY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCIgYS12YWx1ZT1cInt7J1BBWV9OT1cnIHwgdHJhbnNsYXRlfX1cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEtaGludD1cIl9NYW51YWxQYXltZW50XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMtc2VuZD1cInBheU5vd19tYXN0ZXJDcmVkaXQoKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6IDMwJTtcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1wiPjwvc2VjLXNlbmRlcj5cbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJwYXlOb3dfZXJyb3JfbGFiZWxcIiBpZD1cInBheU5vd01DRXJyb3JMYWJlbFwiPjwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICAgICAgICAgIDwvc2VjLWZvcm0+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgICAgIDwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIE1BTlVBTCBQQVlNRU5UIFNFQ1RJT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICA8L2Rpdj5cbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDwhLS0gRU5EIEVESVQgUEFZTUVOVCBTRUNUSU9OLS0+XG4iICsKICAgICJcbiIgKwogICAgIjwvZGl2PlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIKICApOwoKCiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdhcHAvb3JkZXIvcGFydGlhbHMvdXNlci1ub3QtbG9naW4uaHRtbCcsCiAgICAiPGRpdj5cbiIgKwogICAgIjwhLS08aDUgY2xhc3M9XCJyb2JvdG8tcmVndWxhciBiaWdQYWRkaW5nXCIgdHJhbnNsYXRlPVwiSURFTlRJRklDQVRJT05cIj48L2g1Pi0tPlxuIiArCiAgICAiPGRpdiBjbGFzcz1cIm5vVXNlclNlY3Rpb25cIj5cbiIgKwogICAgIiAgICA8bGFiZWwgY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCIgdHJhbnNsYXRlPVwiQWxyZWFkeV9oYXZlX2FuX2FjY291bnRcIiA+PC9sYWJlbD5cbiIgKwogICAgIlxuIiArCiAgICAiICAgIDxzZWMtZm9ybT5cbiIgKwogICAgIiAgICAgICAgPHNlYy12aWV3IGEtaGludD1cInt7J1VzZXJfbmFtZScgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBhLWhpbnQtZGVzY3JpcHRpb249XCJJbk9yZGVyUGF5bWVudFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBhLXN0YXI9XCJmYWxzZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBzZWMtbW9kZWw9XCJvcmRlclBheW1lbnRMb2dpbi5sb2dpblVzZXJcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgc2VjLXJlcXVpcmU9XCJtYWluQ3RybC5nZXRSZXF1aXJlKCdVc2VyX25hbWUnKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgPlxuIiArCiAgICAiICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgIDwhLS1zZWMtcGF0dGVybj1cIigoPz0uKlxcZCkoPz0uKlthLXpdKSg/PS4qW0EtWl0pLnswLDEyfSlcIiBwYXR0ZXJuLWVycm9yLWF0dHI9XCJVc2VfdXBfdG9fMTJfY2hhcmFjdGVyc19JbmNsdWRlX2F0X2xlYXN0X29uZV9sZXR0ZXJfYW5kX29uZV9udW1iZXJcIi0tPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgIDxzZWMtdmlldyBhLWhpbnQ9XCJ7eydQYXNzd29yZCcgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBhLWhpbnQtZGVzY3JpcHRpb249XCJJbk9yZGVyUGF5bWVudFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBhLXN0YXI9XCJmYWxzZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBhLXR5cGU9XCJwYXNzd29yZFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBzZWMtbW9kZWw9XCJvcmRlclBheW1lbnRMb2dpbi5sb2dpblBhc3N3b3JkXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgIHNlYy1yZXF1aXJlPVwibWFpbkN0cmwuZ2V0UmVxdWlyZSgnUGFzc3dvcmQnKVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgPlxuIiArCiAgICAiICAgICAgICA8L3NlYy12aWV3PlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgIDxzZWMtdmlldyBhLWhpbnQ9XCJ7eydFbWFpbCcgfCB0cmFuc2xhdGV9fVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBhLWhpbnQtZGVzY3JpcHRpb249XCJJbk9yZGVyUGF5bWVudFwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBhLXN0YXI9XCJmYWxzZVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBuZy1zaG93PVwiY29uZmlnLmVtYWlsQWRkcmVzc0luTG9naW5cIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgc2VjLW1vZGVsPVwib3JkZXJQYXltZW50TG9naW4uZW1haWxcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgc2VjLWRpc2FibGUtdmFsaWRhdGlvbj1cIiFjb25maWcuZW1haWxBZGRyZXNzSW5Mb2dpblwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICBzZWMtcmVxdWlyZT1cIm1haW5DdHJsLmdldFJlcXVpcmUoJ0VtYWlsJylcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgICAgc2VjLXBhdHRlcm49XCJtYWluQ3RybC5nZXRQYXR0ZXJuKCdFbWFpbCcpXCI+XG4iICsKICAgICIgICAgICAgIDwvc2VjLXZpZXc+XG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgPGxhYmVsIHRyYW5zbGF0ZT1cIkZvcmdvdF95b3VyX3Bhc3N3b3JkXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgIGNsYXNzPVwicm9ib3RvLXJlZ3VsYXJcIlxuIiArCiAgICAiICAgICAgICAgICAgICAgaWQ9XCJGb3Jnb3RfeW91cl9wYXNzd29yZFwiPlxuIiArCiAgICAiICAgICAgICA8L2xhYmVsPlxuIiArCiAgICAiXG4iICsKICAgICIgICAgICAgIDxiciAvPlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIiAgICAgICAgPHNlYy1zZW5kZXIgY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgYS12YWx1ZT1cInt7J0xPR0lOJyB8IHRyYW5zbGF0ZX19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgc2VjLXNlbmQ9XCJzaWduSW4ob3JkZXJQYXltZW50TG9naW4pXCI+PC9zZWMtc2VuZGVyPlxuIiArCiAgICAiICAgICAgICA8IS0tRDM3MDE4LSBDaGFuZ2luZyB0YXJnZXQgc2lnbkluIGZ1bmN0aW9uIGZyb20gJ3VzZXJOb3RMb2dpbkN0cmwub3JkZXJQYXltZW50TG9naW5fc2lnbkluJyB0byBkaXJlY3RseSBnbyAnbG9naW5Nb2RhbC5zaWduSW4nLS0+XG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiXG4iICsKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICA8YnIgLz5cbiIgKwogICAgIlxuIiArCiAgICAiICAgICAgICA8bGFiZWwgbmctY2xhc3M9XCJ7IGludmFsaWQgOiByc01lc3NhZ2UuX2NsYXNzID09ICdpbnZhbGlkJyB9XCI+e3sgcnNNZXNzYWdlLnRleHQgfX08L2xhYmVsPlxuIiArCiAgICAiICAgIDwvc2VjLWZvcm0+XG4iICsKICAgICI8L2Rpdj5cbiIgKwogICAgIjxkaXYgaWQ9XCJuZXdDbGllbnRcIiBjbGFzcz1cIm5vVXNlclNlY3Rpb24gLm5vVXNlckxvZ2luXCI+XG4iICsKICAgICIgICAgPGRpdiBjbGFzcz1cImNvdmVyXCI+XG4iICsKICAgICIgICAgICAgIDxkaXYgZGF0YS1uZy1jbGFzcz1cInsgbm9FbWFpbCA6ICFjb25maWcuZW1haWxBZGRyZXNzSW5Mb2dpbiB9XCI+XG4iICsKICAgICIgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJyb2JvdG8tbWVkaXVtXCIgdHJhbnNsYXRlPVwiTmV3X2NsaWVudFwiPjwvbGFiZWw+XG4iICsKICAgICIgICAgICAgICAgICA8cCB0cmFuc2xhdGU9XCJDcmVhdGVfeW91cl9hY2NvdW50X2Vhc2lseVwiPjwvcD5cbiIgKwogICAgIiAgICAgICAgPC9kaXY+XG4iICsKICAgICIgICAgICAgIDxzZWMtZm9ybT5cbiIgKwogICAgIiAgICAgICAgICAgIDxzZWMtc2VuZGVyIHN0eWxlPVwibWFyZ2luOiAxOHB4IDI4cHg7XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicm9ib3RvLW1lZGl1bVwiXG4iICsKICAgICIgICAgICAgICAgICAgICAgICAgICAgICBhLXZhbHVlPVwie3snUkVHSVNUUkFUSU9OJyB8IHRyYW5zbGF0ZX19XCJcbiIgKwogICAgIiAgICAgICAgICAgICAgICAgICAgICAgIHNlYy1zZW5kPVwicmVnaXN0cmF0aW9uUmVkaXJlY3QoKVwiPjwvc2VjLXNlbmRlcj5cbiIgKwogICAgIiAgICAgICAgPC9zZWMtZm9ybT5cbiIgKwogICAgIiAgICA8L2Rpdj5cbiIgKwogICAgIjwvZGl2PlxuIiArCiAgICAiPC9kaXY+XG4iCiAgKTsKCgogICR0ZW1wbGF0ZUNhY2hlLnB1dCgnYXBwL2FjY291bnQvcGFydGlhbHMvYS5odG1sJywKICAgICJcbiIgKwogICAgIlxuIiArCiAgICAiPGgxPjwvaDE+IgogICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlczsgICAgICAgICAgICAgICAgICAgICAgICB9KTsKLyoqCiAqIENyZWF0ZWQgYnkga3ViYW55IG9uIDEwLzEzLzIwMTUKICovCgoKZGVmaW5lKCdhcHAnLFsKCiAgICAnYW5ndWxhcicsCiAgICAnanF1ZXJ5JywKICAgICdib290c3RyYXAnLAogICAgJ2pQdXNoTWVudScsCiAgICAnLi9hcHAvY29uZmlndXJhdGlvbi9hcHBDb25maWcnLAogICAgJy4vYXBwL3VzZXIvdXNlckNvbmZpZycsCiAgICAnLi9hcHAvb3JkZXIvb3JkZXJDb25maWcnLAogICAgJy4vYXBwL2FjY291bnQvYWNjb3VudENvbmZpZycsCiAgICAnLi9hcHAvY29uZmlndXJhdGlvbi9jb21tb25Db25maWcnLAoKCiAgICAnLi9hcHAvY29udHJvbGxlcnMvaW5kZXgnLAogICAgJy4vYXBwL3VzZXIvY29udHJvbGxlcnMvaW5kZXgnLAogICAgJy4vYXBwL29yZGVyL2NvbnRyb2xsZXJzL2luZGV4JywKICAgICcuL2FwcC9hY2NvdW50L2NvbnRyb2xsZXJzL2luZGV4JywKCgogICAgJy4vYXBwL3VzZXIvc2VydmljZXMvaW5kZXgnLAogICAgJy4vYXBwL29yZGVyL3NlcnZpY2VzL2luZGV4JywKICAgICcuL2FwcC9zZXJ2aWNlcy9pbmRleCcsCiAgICAnLi9hcHAvYWNjb3VudC9zZXJ2aWNlcy9pbmRleCcsCgoKICAgICcuL2FwcC9maWx0ZXJzL2luZGV4JywKCgogICAgJy4vYXBwL2RpcmVjdGl2ZXMvaW5kZXgnLAogICAgJy4vYXBwL3VzZXIvZGlyZWN0aXZlcy9pbmRleCcsCiAgICAnLi9hcHAvb3JkZXIvZGlyZWN0aXZlcy9pbmRleCcsCiAgICAnLi9hcHAvYWNjb3VudC9kaXJlY3RpdmVzL2luZGV4JywKICAgICcuL2FwcC9TRUNPUlJFTlRJL3NlYy1pbnB1dC9pbmRleCcsCgogICAgJy4vYXBwL3RlbXBsYXRlcy9tb2R1bGUnLAoKXSwgZnVuY3Rpb24gKGFuZ3VsYXIsIHRlbXBsYXRlcywgYm9vdHN0cmFwLCBqUHVzaE1lbnUsIGNhdGFsb2dDb25maWcsIHVzZXJDb25maWcsIG9yZGVyQ29uZmlnLCBhY2NvdW50Q29uZmlnLCBjb21tb25Db25maWcpIHsKCiAgICByZXR1cm4gYW5ndWxhci5tb2R1bGUoJ2FvcycsIFsKCiAgICAgICAgJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnLAogICAgICAgICd1aS5yb3V0ZXInLAogICAgICAgICd1aS5ib290c3RyYXAnLAogICAgICAgICdpcENvb2tpZScsCiAgICAgICAgJ25nQW5pbWF0ZScsCiAgICAgICAgJ2FuZ3VsYXItZ29vZ2xlLWFuYWx5dGljcycsCiAgICAgICAgJ3RvYXN0ZXInLAogICAgICAgICdhb3MuY29udHJvbGxlcnMnLAogICAgICAgICdhb3Muc2VydmljZXMnLAogICAgICAgICdhb3MuZGlyZWN0aXZlcycsCiAgICAgICAgJ2Fvcy5maWx0ZXJzJywKICAgICAgICAnYW9zLnRlbXBsYXRlcycsCgogICAgICAgICdhb3MudXNlci5jb250cm9sbGVycycsCiAgICAgICAgJ2Fvcy51c2VyLnNlcnZpY2VzJywKICAgICAgICAnYW9zLnVzZXIuZGlyZWN0aXZlcycsCgogICAgICAgICdhb3Mub3JkZXIuY29udHJvbGxlcnMnLAogICAgICAgICdhb3Mub3JkZXIuc2VydmljZXMnLAogICAgICAgICdhb3Mub3JkZXIuZGlyZWN0aXZlcycsCgoKICAgICAgICAnYW9zLmFjY291bnQuY29udHJvbGxlcnMnLAogICAgICAgICdhb3MuYWNjb3VudC5zZXJ2aWNlcycsCiAgICAgICAgLy8nYW9zLmFjY291bnQuZGlyZWN0aXZlcycsCgoKICAgIF0pLgoKICAgIGNvbmZpZyhjYXRhbG9nQ29uZmlnKS4KCiAgICBjb25maWcodXNlckNvbmZpZykuCgogICAgY29uZmlnKG9yZGVyQ29uZmlnKS4KCiAgICBjb25maWcoYWNjb3VudENvbmZpZykuCgogICAgY29uZmlnKGNvbW1vbkNvbmZpZykuCgoKCiAgICBydW4oZnVuY3Rpb24gKCRyb290U2NvcGUsICRzdGF0ZSwgaXBDb29raWUsIEFuYWx5dGljcykgewoKICAgICAgICAvLyBGaXJzdCwgY2hlY2tzIGlmIGl0IGlzbid0IGltcGxlbWVudGVkIHlldC4KICAgICAgICBpZiAoIVN0cmluZy5wcm90b3R5cGUuZm9ybWF0KSB7CiAgICAgICAgICAgIFN0cmluZy5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL3soXGQrKX0vZywgZnVuY3Rpb24obWF0Y2gsIG51bWJlcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYXJnc1tudW1iZXJdICE9ICd1bmRlZmluZWQnCiAgICAgICAgICAgICAgICAgICAgICAgID8gYXJnc1tudW1iZXJdCiAgICAgICAgICAgICAgICAgICAgICAgIDogbWF0Y2gKICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgICAgICAvLyRodHRwLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0geyAnQ29udGVudC1UeXBlJzogImFwcGxpY2F0aW9uL2pzb24iLCB9CiAgICAgICAgICAgIC8vICRyb290U2NvcGUuZXhwaXJlZFNlc3Npb24gPSBmYWxzZTsKICAgICAgICAgICAgdmFyIHBjQmxvY2tlZCA9IGlwQ29va2llKCJwY0Jsb2NrZWQiKTsKICAgICAgICAgICAgaWYgKHBjQmxvY2tlZCkgewogICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpID4gcGNCbG9ja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgaXBDb29raWUucmVtb3ZlKCJwY0Jsb2NrZWQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnNDA0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRyb290U2NvcGUudXNlckNvb2tpZUxhc3RFbnRyeSA9IGlwQ29va2llKCdsYXN0TG9naW4nKTsKICAgICAgICAgICAgaWYgKCRyb290U2NvcGUudXNlckNvb2tpZUxhc3RFbnRyeSkgewogICAgICAgICAgICAgICAgdmFyIGNvb2tpZSA9IGlwQ29va2llKCRyb290U2NvcGUudXNlckNvb2tpZUxhc3RFbnRyeSk7CiAgICAgICAgICAgICAgICBpZiAoY29va2llKSB7CiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyQ29va2llID0gY29va2llOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b1N0YXRlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvUGFyYW1zKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZyb21TdGF0ZSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmcm9tUGFyYW1zKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIEhlbHBlci5kaXNhYmxlTG9hZGVyKDApOwoKICAgICAgICAgICAgICAgIGlmKHRvU3RhdGUubmFtZSA9PSAiTXlPcmRlcnMiKQogICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygiZGVmYXVsdCIpOwogICAgICAgICAgICAgICAgLy8gaWYoZi5zdGF0dXMgPT09IDQwMSAmJiBiLm5hbWUgPT09ICdNeU9yZGVycycpey8vc2Vzc2lvbiBleHBpcmVkCiAgICAgICAgICAgICAgICAvLyAgICAgJHJvb3RTY29wZS5leHBpcmVkU2Vzc2lvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgLy8kc3RhdGUuZ28oJzQwNCcpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICRyb290U2NvcGUuYnJlYWRjcnVtYiA9IFt7CiAgICAgICAgICAgICAgICBuYW1lOiAiSG9tZSBQYWdlIiwKICAgICAgICAgICAgICAgIHBhdGg6ICIvIiwKICAgICAgICAgICAgfV07CgogICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMpIHsKICAgICAgICAgICAgLy92YXIgcmVxdWlyZUxvZ2luID0gdG9TdGF0ZS5kYXRhLnJlcXVpcmVMb2dpbjsKICAgICAgICAgICAgLy92YXIgc2hvd1dlbGNvbWUgPSB0b1N0YXRlLmRhdGEuc2hvd1dlbGNvbWU7CiAgICAgICAgICAgIC8vdmFyIHVuZGVyQ29uc3RydWN0aW9uID0gdG9TdGF0ZS5kYXRhLnVuZGVyQ29uc3RydWN0aW9uOwoKICAgICAgICAgICAgLyoKICAgICAgICAgICAgIHNob3dXZWxjb21lICE9ICd1bmRlZmluZWQnICYmIHNob3dXZWxjb21lID8gJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcygnd2VsY29tZS1wYWdlJykgOiAkKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKCd3ZWxjb21lLXBhZ2UnKTsKICAgICAgICAgICAgIHVuZGVyQ29uc3RydWN0aW9uICE9ICd1bmRlZmluZWQnICYmIHVuZGVyQ29uc3RydWN0aW9uID8KICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoJ3VuZGVyLWNvbnN0cnVjdGlvbicpIDoKICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoJ3VuZGVyLWNvbnN0cnVjdGlvbicpOwoKICAgICAgICAgICAgIGlmIChyZXF1aXJlTG9naW4gJiYgdHlwZW9mICRyb290U2NvcGUuY3VycmVudFVzZXIgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgLy8gZ2V0IG1lIGEgbG9naW4gbW9kYWwhCiAgICAgICAgICAgICB9CiAgICAgICAgICAgICAqLwogICAgICAgICAgICAvL2FsZXJ0KCJzdGFydCIpOwogICAgICAgICAgICBIZWxwZXIuZW5hYmxlTG9hZGVyKDk5OSk7CgogICAgICAgIH0pOwogICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcykgewogICAgICAgICAgICBIZWxwZXIuZGlzYWJsZUxvYWRlcigwKTsKICAgICAgICB9KTsKICAgIH0pOwoKfSk7Cgp2YXIgbCA9IGZ1bmN0aW9uIChhKSB7CiAgICBjb25zb2xlLmxvZyhhKQp9Cgp2YXIgdCA9IGZ1bmN0aW9uIChhKSB7CiAgICBhbGVydChhKQp9Cgp2YXIgcHJpbnQgPSBmdW5jdGlvbiAoYSkgewogICAgY29uc29sZS5sb2coIiAiKTsKICAgIGNvbnNvbGUubG9nKCIgICIpOwogICAgY29uc29sZS5sb2coYSk7CiAgICBjb25zb2xlLmxvZygiKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIik7CiAgICBjb25zb2xlLmxvZygiICIpOwogICAgY29uc29sZS5sb2coIiAgIik7Cn0KOwovKiEKICogYW5ndWxhci10cmFuc2xhdGUgLSB2Mi43LjIgLSAyMDE1LTA2LTAxCiAqIGh0dHA6Ly9naXRodWIuY29tL2FuZ3VsYXItdHJhbnNsYXRlL2FuZ3VsYXItdHJhbnNsYXRlCiAqIENvcHlyaWdodCAoYykgMjAxNSA7IExpY2Vuc2VkIE1JVAogKi8KIWZ1bmN0aW9uKGEsYil7ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoJ2FuZ3VsYXItdHJhbnNsYXRlJyxbXSxmdW5jdGlvbigpe3JldHVybiBiKCl9KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YigpOmIoKX0odGhpcyxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEuc3RvcmFnZUtleSgpLGM9YS5zdG9yYWdlKCksZD1mdW5jdGlvbigpe3ZhciBkPWEucHJlZmVycmVkTGFuZ3VhZ2UoKTthbmd1bGFyLmlzU3RyaW5nKGQpP2EudXNlKGQpOmMucHV0KGIsYS51c2UoKSl9O2QuZGlzcGxheU5hbWU9ImZhbGxiYWNrRnJvbUluY29ycmVjdFN0b3JhZ2VWYWx1ZSIsYz9jLmdldChiKT9hLnVzZShjLmdldChiKSlbImNhdGNoIl0oZCk6ZCgpOmFuZ3VsYXIuaXNTdHJpbmcoYS5wcmVmZXJyZWRMYW5ndWFnZSgpKSYmYS51c2UoYS5wcmVmZXJyZWRMYW5ndWFnZSgpKX1mdW5jdGlvbiBiKCl7InVzZSBzdHJpY3QiO3ZhciBhLGIsYz1udWxsLGQ9ITEsZT0hMTtiPXtzYW5pdGl6ZTpmdW5jdGlvbihhLGIpe3JldHVybiJ0ZXh0Ij09PWImJihhPWcoYSkpLGF9LGVzY2FwZTpmdW5jdGlvbihhLGIpe3JldHVybiJ0ZXh0Ij09PWImJihhPWYoYSkpLGF9LHNhbml0aXplUGFyYW1ldGVyczpmdW5jdGlvbihhLGIpe3JldHVybiJwYXJhbXMiPT09YiYmKGE9aChhLGcpKSxhfSxlc2NhcGVQYXJhbWV0ZXJzOmZ1bmN0aW9uKGEsYil7cmV0dXJuInBhcmFtcyI9PT1iJiYoYT1oKGEsZikpLGF9fSxiLmVzY2FwZWQ9Yi5lc2NhcGVQYXJhbWV0ZXJzLHRoaXMuYWRkU3RyYXRlZ3k9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYlthXT1jLHRoaXN9LHRoaXMucmVtb3ZlU3RyYXRlZ3k9ZnVuY3Rpb24oYSl7cmV0dXJuIGRlbGV0ZSBiW2FdLHRoaXN9LHRoaXMudXNlU3RyYXRlZ3k9ZnVuY3Rpb24oYSl7cmV0dXJuIGQ9ITAsYz1hLHRoaXN9LHRoaXMuJGdldD1bIiRpbmplY3RvciIsIiRsb2ciLGZ1bmN0aW9uKGYsZyl7dmFyIGg9ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBhbmd1bGFyLmZvckVhY2goZCxmdW5jdGlvbihkKXtpZihhbmd1bGFyLmlzRnVuY3Rpb24oZCkpYT1kKGEsYyk7ZWxzZXtpZighYW5ndWxhci5pc0Z1bmN0aW9uKGJbZF0pKXRocm93IG5ldyBFcnJvcigicGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlU2FuaXRpemF0aW9uOiBVbmtub3duIHNhbml0aXphdGlvbiBzdHJhdGVneTogJyIrZCsiJyIpO2E9YltkXShhLGMpfX0pLGF9LGk9ZnVuY3Rpb24oKXtkfHxlfHwoZy53YXJuKCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVTYW5pdGl6YXRpb246IE5vIHNhbml0aXphdGlvbiBzdHJhdGVneSBoYXMgYmVlbiBjb25maWd1cmVkLiBUaGlzIGNhbiBoYXZlIHNlcmlvdXMgc2VjdXJpdHkgaW1wbGljYXRpb25zLiBTZWUgaHR0cDovL2FuZ3VsYXItdHJhbnNsYXRlLmdpdGh1Yi5pby9kb2NzLyMvZ3VpZGUvMTlfc2VjdXJpdHkgZm9yIGRldGFpbHMuIiksZT0hMCl9O3JldHVybiBmLmhhcygiJHNhbml0aXplIikmJihhPWYuZ2V0KCIkc2FuaXRpemUiKSkse3VzZVN0cmF0ZWd5OmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXthLnVzZVN0cmF0ZWd5KGIpfX0odGhpcyksc2FuaXRpemU6ZnVuY3Rpb24oYSxiLGQpe2lmKGN8fGkoKSxhcmd1bWVudHMubGVuZ3RoPDMmJihkPWMpLCFkKXJldHVybiBhO3ZhciBlPWFuZ3VsYXIuaXNBcnJheShkKT9kOltkXTtyZXR1cm4gaChhLGIsZSl9fX1dO3ZhciBmPWZ1bmN0aW9uKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudCgiPGRpdj48L2Rpdj4iKTtyZXR1cm4gYi50ZXh0KGEpLGIuaHRtbCgpfSxnPWZ1bmN0aW9uKGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigicGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlU2FuaXRpemF0aW9uOiBFcnJvciBjYW5ub3QgZmluZCAkc2FuaXRpemUgc2VydmljZS4gRWl0aGVyIGluY2x1ZGUgdGhlIG5nU2FuaXRpemUgbW9kdWxlIChodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmdTYW5pdGl6ZSkgb3IgdXNlIGEgc2FuaXRpemF0aW9uIHN0cmF0ZWd5IHdoaWNoIGRvZXMgbm90IGRlcGVuZCBvbiAkc2FuaXRpemUsIHN1Y2ggYXMgJ2VzY2FwZScuIik7cmV0dXJuIGEoYil9LGg9ZnVuY3Rpb24oYSxiKXtpZihhbmd1bGFyLmlzT2JqZWN0KGEpKXt2YXIgYz1hbmd1bGFyLmlzQXJyYXkoYSk/W106e307cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChhLGZ1bmN0aW9uKGEsZCl7Y1tkXT1oKGEsYil9KSxjfXJldHVybiBhbmd1bGFyLmlzTnVtYmVyKGEpP2E6YihhKX19ZnVuY3Rpb24gYyhhLGIsYyxkKXsidXNlIHN0cmljdCI7dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQ9e30sdT1bXSx2PWEsdz1bXSx4PSJ0cmFuc2xhdGUtY2xvYWsiLHk9ITEsej0hMSxBPSIuIixCPTAsQz0hMCxEPSJkZWZhdWx0IixFPXsiZGVmYXVsdCI6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fCIiKS5zcGxpdCgiLSIpLmpvaW4oIl8iKX0samF2YTpmdW5jdGlvbihhKXt2YXIgYj0oYXx8IiIpLnNwbGl0KCItIikuam9pbigiXyIpLGM9Yi5zcGxpdCgiXyIpO3JldHVybiBjLmxlbmd0aD4xP2NbMF0udG9Mb3dlckNhc2UoKSsiXyIrY1sxXS50b1VwcGVyQ2FzZSgpOmJ9LGJjcDQ3OmZ1bmN0aW9uKGEpe3ZhciBiPShhfHwiIikuc3BsaXQoIl8iKS5qb2luKCItIiksYz1iLnNwbGl0KCItIik7cmV0dXJuIGMubGVuZ3RoPjE/Y1swXS50b0xvd2VyQ2FzZSgpKyItIitjWzFdLnRvVXBwZXJDYXNlKCk6Yn19LEY9IjIuNy4yIixHPWZ1bmN0aW9uKCl7aWYoYW5ndWxhci5pc0Z1bmN0aW9uKGQuZ2V0TG9jYWxlKSlyZXR1cm4gZC5nZXRMb2NhbGUoKTt2YXIgYSxjLGU9Yi4kZ2V0KCkubmF2aWdhdG9yLGY9WyJsYW5ndWFnZSIsImJyb3dzZXJMYW5ndWFnZSIsInN5c3RlbUxhbmd1YWdlIiwidXNlckxhbmd1YWdlIl07aWYoYW5ndWxhci5pc0FycmF5KGUubGFuZ3VhZ2VzKSlmb3IoYT0wO2E8ZS5sYW5ndWFnZXMubGVuZ3RoO2ErKylpZihjPWUubGFuZ3VhZ2VzW2FdLGMmJmMubGVuZ3RoKXJldHVybiBjO2ZvcihhPTA7YTxmLmxlbmd0aDthKyspaWYoYz1lW2ZbYV1dLGMmJmMubGVuZ3RoKXJldHVybiBjO3JldHVybiBudWxsfTtHLmRpc3BsYXlOYW1lPSJhbmd1bGFyLXRyYW5zbGF0ZS9zZXJ2aWNlOiBnZXRGaXJzdEJyb3dzZXJMYW5ndWFnZSI7dmFyIEg9ZnVuY3Rpb24oKXt2YXIgYT1HKCl8fCIiO3JldHVybiBFW0RdJiYoYT1FW0RdKGEpKSxhfTtILmRpc3BsYXlOYW1lPSJhbmd1bGFyLXRyYW5zbGF0ZS9zZXJ2aWNlOiBnZXRMb2NhbGUiO3ZhciBJPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxKPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIil9LEs9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9YW5ndWxhci5sb3dlcmNhc2UoYSksZD0wLGU9dS5sZW5ndGg7ZT5kO2QrKyliLnB1c2goYW5ndWxhci5sb3dlcmNhc2UodVtkXSkpO2lmKEkoYixjKT4tMSlyZXR1cm4gYTtpZihmKXt2YXIgZztmb3IodmFyIGggaW4gZil7dmFyIGk9ITEsaj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZixoKSYmYW5ndWxhci5sb3dlcmNhc2UoaCk9PT1hbmd1bGFyLmxvd2VyY2FzZShhKTtpZigiKiI9PT1oLnNsaWNlKC0xKSYmKGk9aC5zbGljZSgwLC0xKT09PWEuc2xpY2UoMCxoLmxlbmd0aC0xKSksKGp8fGkpJiYoZz1mW2hdLEkoYixhbmd1bGFyLmxvd2VyY2FzZShnKSk+LTEpKXJldHVybiBnfX1pZihhKXt2YXIgaz1hLnNwbGl0KCJfIik7aWYoay5sZW5ndGg+MSYmSShiLGFuZ3VsYXIubG93ZXJjYXNlKGtbMF0pKT4tMSlyZXR1cm4ga1swXX1yZXR1cm4gYX0sTD1mdW5jdGlvbihhLGIpe2lmKCFhJiYhYilyZXR1cm4gdDtpZihhJiYhYil7aWYoYW5ndWxhci5pc1N0cmluZyhhKSlyZXR1cm4gdFthXX1lbHNlIGFuZ3VsYXIuaXNPYmplY3QodFthXSl8fCh0W2FdPXt9KSxhbmd1bGFyLmV4dGVuZCh0W2FdLE0oYikpO3JldHVybiB0aGlzfTt0aGlzLnRyYW5zbGF0aW9ucz1MLHRoaXMuY2xvYWtDbGFzc05hbWU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KHg9YSx0aGlzKTp4fTt2YXIgTT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaDtifHwoYj1bXSksY3x8KGM9e30pO2ZvcihlIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsZSkmJihoPWFbZV0sYW5ndWxhci5pc09iamVjdChoKT9NKGgsYi5jb25jYXQoZSksYyxlKTooZj1iLmxlbmd0aD8iIitiLmpvaW4oQSkrQStlOmUsYi5sZW5ndGgmJmU9PT1kJiYoZz0iIitiLmpvaW4oQSksY1tnXT0iQDoiK2YpLGNbZl09aCkpO3JldHVybiBjfTtNLmRpc3BsYXlOYW1lPSJmbGF0T2JqZWN0Iix0aGlzLmFkZEludGVycG9sYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIHcucHVzaChhKSx0aGlzfSx0aGlzLnVzZU1lc3NhZ2VGb3JtYXRJbnRlcnBvbGF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlSW50ZXJwb2xhdGlvbigiJHRyYW5zbGF0ZU1lc3NhZ2VGb3JtYXRJbnRlcnBvbGF0aW9uIil9LHRoaXMudXNlSW50ZXJwb2xhdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gbj1hLHRoaXN9LHRoaXMudXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5PWZ1bmN0aW9uKGEpe3JldHVybiBjLnVzZVN0cmF0ZWd5KGEpLHRoaXN9LHRoaXMucHJlZmVycmVkTGFuZ3VhZ2U9ZnVuY3Rpb24oYSl7cmV0dXJuIE4oYSksdGhpc307dmFyIE49ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJihlPWEpLGV9O3RoaXMudHJhbnNsYXRpb25Ob3RGb3VuZEluZGljYXRvcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yTGVmdChhKSx0aGlzLnRyYW5zbGF0aW9uTm90Rm91bmRJbmRpY2F0b3JSaWdodChhKSx0aGlzfSx0aGlzLnRyYW5zbGF0aW9uTm90Rm91bmRJbmRpY2F0b3JMZWZ0PWZ1bmN0aW9uKGEpe3JldHVybiBhPyhxPWEsdGhpcyk6cX0sdGhpcy50cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yUmlnaHQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KHI9YSx0aGlzKTpyfSx0aGlzLmZhbGxiYWNrTGFuZ3VhZ2U9ZnVuY3Rpb24oYSl7cmV0dXJuIE8oYSksdGhpc307dmFyIE89ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KGFuZ3VsYXIuaXNTdHJpbmcoYSk/KGg9ITAsZz1bYV0pOmFuZ3VsYXIuaXNBcnJheShhKSYmKGg9ITEsZz1hKSxhbmd1bGFyLmlzU3RyaW5nKGUpJiZJKGcsZSk8MCYmZy5wdXNoKGUpLHRoaXMpOmg/Z1swXTpnfTt0aGlzLnVzZT1mdW5jdGlvbihhKXtpZihhKXtpZighdFthXSYmIW8pdGhyb3cgbmV3IEVycm9yKCIkdHJhbnNsYXRlUHJvdmlkZXIgY291bGRuJ3QgZmluZCB0cmFuc2xhdGlvblRhYmxlIGZvciBsYW5nS2V5OiAnIithKyInIik7cmV0dXJuIGk9YSx0aGlzfXJldHVybiBpfTt2YXIgUD1mdW5jdGlvbihhKXtyZXR1cm4gYT8odj1hLHRoaXMpOmw/bCt2OnZ9O3RoaXMuc3RvcmFnZUtleT1QLHRoaXMudXNlVXJsTG9hZGVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudXNlTG9hZGVyKCIkdHJhbnNsYXRlVXJsTG9hZGVyIixhbmd1bGFyLmV4dGVuZCh7dXJsOmF9LGIpKX0sdGhpcy51c2VTdGF0aWNGaWxlc0xvYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51c2VMb2FkZXIoIiR0cmFuc2xhdGVTdGF0aWNGaWxlc0xvYWRlciIsYSl9LHRoaXMudXNlTG9hZGVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG89YSxwPWJ8fHt9LHRoaXN9LHRoaXMudXNlTG9jYWxTdG9yYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlU3RvcmFnZSgiJHRyYW5zbGF0ZUxvY2FsU3RvcmFnZSIpfSx0aGlzLnVzZUNvb2tpZVN0b3JhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2VTdG9yYWdlKCIkdHJhbnNsYXRlQ29va2llU3RvcmFnZSIpfSx0aGlzLnVzZVN0b3JhZ2U9ZnVuY3Rpb24oYSl7cmV0dXJuIGs9YSx0aGlzfSx0aGlzLnN0b3JhZ2VQcmVmaXg9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KGw9YSx0aGlzKTphfSx0aGlzLnVzZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJMb2c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2VNaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyKCIkdHJhbnNsYXRlTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlckxvZyIpfSx0aGlzLnVzZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG09YSx0aGlzfSx0aGlzLnVzZVBvc3RDb21waWxpbmc9ZnVuY3Rpb24oYSl7cmV0dXJuIHk9ISFhLHRoaXN9LHRoaXMuZm9yY2VBc3luY1JlbG9hZD1mdW5jdGlvbihhKXtyZXR1cm4gej0hIWEsdGhpc30sdGhpcy51bmlmb3JtTGFuZ3VhZ2VUYWc9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YW5ndWxhci5pc1N0cmluZyhhKSYmKGE9e3N0YW5kYXJkOmF9KTphPXt9LEQ9YS5zdGFuZGFyZCx0aGlzfSx0aGlzLmRldGVybWluZVByZWZlcnJlZExhbmd1YWdlPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJmFuZ3VsYXIuaXNGdW5jdGlvbihhKT9hKCk6SCgpO3JldHVybiBlPXUubGVuZ3RoP0soYik6Yix0aGlzfSx0aGlzLnJlZ2lzdGVyQXZhaWxhYmxlTGFuZ3VhZ2VLZXlzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/KHU9YSxiJiYoZj1iKSx0aGlzKTp1fSx0aGlzLnVzZUxvYWRlckNhY2hlPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09ITE/cz12b2lkIDA6YT09PSEwP3M9ITA6InVuZGVmaW5lZCI9PXR5cGVvZiBhP3M9IiR0cmFuc2xhdGlvbkNhY2hlIjphJiYocz1hKSx0aGlzfSx0aGlzLmRpcmVjdGl2ZVByaW9yaXR5PWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP0I6KEI9YSx0aGlzKX0sdGhpcy5zdGF0ZWZ1bEZpbHRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9DOihDPWEsdGhpcyl9LHRoaXMuJGdldD1bIiRsb2ciLCIkaW5qZWN0b3IiLCIkcm9vdFNjb3BlIiwiJHEiLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBmLGwsdSxBPWIuZ2V0KG58fCIkdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb24iKSxEPSExLEU9e30sRz17fSxIPWZ1bmN0aW9uKGEsYixjLGgpe2lmKGFuZ3VsYXIuaXNBcnJheShhKSl7dmFyIGo9ZnVuY3Rpb24oYSl7Zm9yKHZhciBlPXt9LGY9W10sZz1mdW5jdGlvbihhKXt2YXIgZj1kLmRlZmVyKCksZz1mdW5jdGlvbihiKXtlW2FdPWIsZi5yZXNvbHZlKFthLGJdKX07cmV0dXJuIEgoYSxiLGMsaCkudGhlbihnLGcpLGYucHJvbWlzZX0saT0wLGo9YS5sZW5ndGg7aj5pO2krKylmLnB1c2goZyhhW2ldKSk7cmV0dXJuIGQuYWxsKGYpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pfTtyZXR1cm4gaihhKX12YXIgbT1kLmRlZmVyKCk7YSYmKGE9Si5hcHBseShhKSk7dmFyIG49ZnVuY3Rpb24oKXt2YXIgYT1lP0dbZV06R1tpXTtpZihsPTAsayYmIWEpe3ZhciBiPWYuZ2V0KHYpO2lmKGE9R1tiXSxnJiZnLmxlbmd0aCl7dmFyIGM9SShnLGIpO2w9MD09PWM/MTowLEkoZyxlKTwwJiZnLnB1c2goZSl9fXJldHVybiBhfSgpO2lmKG4pe3ZhciBvPWZ1bmN0aW9uKCl7YWIoYSxiLGMsaCkudGhlbihtLnJlc29sdmUsbS5yZWplY3QpfTtvLmRpc3BsYXlOYW1lPSJwcm9taXNlUmVzb2x2ZWQiLG5bImZpbmFsbHkiXShvLG0ucmVqZWN0KX1lbHNlIGFiKGEsYixjLGgpLnRoZW4obS5yZXNvbHZlLG0ucmVqZWN0KTtyZXR1cm4gbS5wcm9taXNlfSxRPWZ1bmN0aW9uKGEpe3JldHVybiBxJiYoYT1bcSxhXS5qb2luKCIgIikpLHImJihhPVthLHJdLmpvaW4oIiAiKSksYX0sUj1mdW5jdGlvbihhKXtpPWEsYy4kZW1pdCgiJHRyYW5zbGF0ZUNoYW5nZVN1Y2Nlc3MiLHtsYW5ndWFnZTphfSksayYmZi5wdXQoSC5zdG9yYWdlS2V5KCksaSksQS5zZXRMb2NhbGUoaSk7dmFyIGI9ZnVuY3Rpb24oYSxiKXtFW2JdLnNldExvY2FsZShpKX07Yi5kaXNwbGF5TmFtZT0iZWFjaEludGVycG9sYXRvckxvY2FsZVNldHRlciIsYW5ndWxhci5mb3JFYWNoKEUsYiksYy4kZW1pdCgiJHRyYW5zbGF0ZUNoYW5nZUVuZCIse2xhbmd1YWdlOmF9KX0sUz1mdW5jdGlvbihhKXtpZighYSl0aHJvdyJObyBsYW5ndWFnZSBrZXkgc3BlY2lmaWVkIGZvciBsb2FkaW5nLiI7dmFyIGU9ZC5kZWZlcigpO2MuJGVtaXQoIiR0cmFuc2xhdGVMb2FkaW5nU3RhcnQiLHtsYW5ndWFnZTphfSksRD0hMDt2YXIgZj1zOyJzdHJpbmciPT10eXBlb2YgZiYmKGY9Yi5nZXQoZikpO3ZhciBnPWFuZ3VsYXIuZXh0ZW5kKHt9LHAse2tleTphLCRodHRwOmFuZ3VsYXIuZXh0ZW5kKHt9LHtjYWNoZTpmfSxwLiRodHRwKX0pLGg9ZnVuY3Rpb24oYil7dmFyIGQ9e307Yy4kZW1pdCgiJHRyYW5zbGF0ZUxvYWRpbmdTdWNjZXNzIix7bGFuZ3VhZ2U6YX0pLGFuZ3VsYXIuaXNBcnJheShiKT9hbmd1bGFyLmZvckVhY2goYixmdW5jdGlvbihhKXthbmd1bGFyLmV4dGVuZChkLE0oYSkpfSk6YW5ndWxhci5leHRlbmQoZCxNKGIpKSxEPSExLGUucmVzb2x2ZSh7a2V5OmEsdGFibGU6ZH0pLGMuJGVtaXQoIiR0cmFuc2xhdGVMb2FkaW5nRW5kIix7bGFuZ3VhZ2U6YX0pfTtoLmRpc3BsYXlOYW1lPSJvbkxvYWRlclN1Y2Nlc3MiO3ZhciBpPWZ1bmN0aW9uKGEpe2MuJGVtaXQoIiR0cmFuc2xhdGVMb2FkaW5nRXJyb3IiLHtsYW5ndWFnZTphfSksZS5yZWplY3QoYSksYy4kZW1pdCgiJHRyYW5zbGF0ZUxvYWRpbmdFbmQiLHtsYW5ndWFnZTphfSl9O3JldHVybiBpLmRpc3BsYXlOYW1lPSJvbkxvYWRlckVycm9yIixiLmdldChvKShnKS50aGVuKGgsaSksZS5wcm9taXNlfTtpZihrJiYoZj1iLmdldChrKSwhZi5nZXR8fCFmLnB1dCkpdGhyb3cgbmV3IEVycm9yKCJDb3VsZG4ndCB1c2Ugc3RvcmFnZSAnIitrKyInLCBtaXNzaW5nIGdldCgpIG9yIHB1dCgpIG1ldGhvZCEiKTtpZih3Lmxlbmd0aCl7dmFyIFQ9ZnVuY3Rpb24oYSl7dmFyIGM9Yi5nZXQoYSk7Yy5zZXRMb2NhbGUoZXx8aSksRVtjLmdldEludGVycG9sYXRpb25JZGVudGlmaWVyKCldPWN9O1QuZGlzcGxheU5hbWU9ImludGVycG9sYXRpb25GYWN0b3J5QWRkZXIiLGFuZ3VsYXIuZm9yRWFjaCh3LFQpfXZhciBVPWZ1bmN0aW9uKGEpe3ZhciBiPWQuZGVmZXIoKTtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxhKSliLnJlc29sdmUodFthXSk7ZWxzZSBpZihHW2FdKXt2YXIgYz1mdW5jdGlvbihhKXtMKGEua2V5LGEudGFibGUpLGIucmVzb2x2ZShhLnRhYmxlKX07Yy5kaXNwbGF5TmFtZT0idHJhbnNsYXRpb25UYWJsZVJlc29sdmVyIixHW2FdLnRoZW4oYyxiLnJlamVjdCl9ZWxzZSBiLnJlamVjdCgpO3JldHVybiBiLnByb21pc2V9LFY9ZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGY9ZC5kZWZlcigpLGc9ZnVuY3Rpb24oZCl7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsYikpe2Uuc2V0TG9jYWxlKGEpO3ZhciBnPWRbYl07IkA6Ij09PWcuc3Vic3RyKDAsMik/VihhLGcuc3Vic3RyKDIpLGMsZSkudGhlbihmLnJlc29sdmUsZi5yZWplY3QpOmYucmVzb2x2ZShlLmludGVycG9sYXRlKGRbYl0sYykpLGUuc2V0TG9jYWxlKGkpfWVsc2UgZi5yZWplY3QoKX07cmV0dXJuIGcuZGlzcGxheU5hbWU9ImZhbGxiYWNrVHJhbnNsYXRpb25SZXNvbHZlciIsVShhKS50aGVuKGcsZi5yZWplY3QpLGYucHJvbWlzZX0sVz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmPXRbYV07aWYoZiYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGYsYikpe2lmKGQuc2V0TG9jYWxlKGEpLGU9ZC5pbnRlcnBvbGF0ZShmW2JdLGMpLCJAOiI9PT1lLnN1YnN0cigwLDIpKXJldHVybiBXKGEsZS5zdWJzdHIoMiksYyxkKTtkLnNldExvY2FsZShpKX1yZXR1cm4gZX0sWD1mdW5jdGlvbihhLGMpe2lmKG0pe3ZhciBkPWIuZ2V0KG0pKGEsaSxjKTtyZXR1cm4gdm9pZCAwIT09ZD9kOmF9cmV0dXJuIGF9LFk9ZnVuY3Rpb24oYSxiLGMsZSxmKXt2YXIgaD1kLmRlZmVyKCk7aWYoYTxnLmxlbmd0aCl7dmFyIGk9Z1thXTtWKGksYixjLGUpLnRoZW4oaC5yZXNvbHZlLGZ1bmN0aW9uKCl7WShhKzEsYixjLGUsZikudGhlbihoLnJlc29sdmUpfSl9ZWxzZSBoLnJlc29sdmUoZj9mOlgoYixjKSk7cmV0dXJuIGgucHJvbWlzZX0sWj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZTtpZihhPGcubGVuZ3RoKXt2YXIgZj1nW2FdO2U9VyhmLGIsYyxkKSxlfHwoZT1aKGErMSxiLGMsZCkpfXJldHVybiBlfSwkPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBZKHU+MD91OmwsYSxiLGMsZCl9LF89ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBaKHU+MD91OmwsYSxiLGMpfSxhYj1mdW5jdGlvbihhLGIsYyxlKXt2YXIgZj1kLmRlZmVyKCksaD1pP3RbaV06dCxqPWM/RVtjXTpBO2lmKGgmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChoLGEpKXt2YXIgaz1oW2FdOyJAOiI9PT1rLnN1YnN0cigwLDIpP0goay5zdWJzdHIoMiksYixjLGUpLnRoZW4oZi5yZXNvbHZlLGYucmVqZWN0KTpmLnJlc29sdmUoai5pbnRlcnBvbGF0ZShrLGIpKX1lbHNle3ZhciBsO20mJiFEJiYobD1YKGEsYikpLGkmJmcmJmcubGVuZ3RoPyQoYSxiLGosZSkudGhlbihmdW5jdGlvbihhKXtmLnJlc29sdmUoYSl9LGZ1bmN0aW9uKGEpe2YucmVqZWN0KFEoYSkpfSk6bSYmIUQmJmw/Zi5yZXNvbHZlKGU/ZTpsKTplP2YucmVzb2x2ZShlKTpmLnJlamVjdChRKGEpKX1yZXR1cm4gZi5wcm9taXNlfSxiYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1pP3RbaV06dCxmPUE7aWYoRSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEUsYykmJihmPUVbY10pLGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGEpKXt2YXIgaD1lW2FdO2Q9IkA6Ij09PWguc3Vic3RyKDAsMik/YmIoaC5zdWJzdHIoMiksYixjKTpmLmludGVycG9sYXRlKGgsYil9ZWxzZXt2YXIgajttJiYhRCYmKGo9WChhLGIpKSxpJiZnJiZnLmxlbmd0aD8obD0wLGQ9XyhhLGIsZikpOmQ9bSYmIUQmJmo/ajpRKGEpfXJldHVybiBkfSxjYj1mdW5jdGlvbihhKXtqPT09YSYmKGo9dm9pZCAwKSxHW2FdPXZvaWQgMH07aWYoSC5wcmVmZXJyZWRMYW5ndWFnZT1mdW5jdGlvbihhKXtyZXR1cm4gYSYmTihhKSxlfSxILmNsb2FrQ2xhc3NOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHh9LEguZmFsbGJhY2tMYW5ndWFnZT1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT1hJiZudWxsIT09YSl7aWYoTyhhKSxvJiZnJiZnLmxlbmd0aClmb3IodmFyIGI9MCxjPWcubGVuZ3RoO2M+YjtiKyspR1tnW2JdXXx8KEdbZ1tiXV09UyhnW2JdKSk7SC51c2UoSC51c2UoKSl9cmV0dXJuIGg/Z1swXTpnfSxILnVzZUZhbGxiYWNrTGFuZ3VhZ2U9ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09YSYmbnVsbCE9PWEpaWYoYSl7dmFyIGI9SShnLGEpO2I+LTEmJih1PWIpfWVsc2UgdT0wfSxILnByb3Bvc2VkTGFuZ3VhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gan0sSC5zdG9yYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGZ9LEgudXNlPWZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiBpO3ZhciBiPWQuZGVmZXIoKTtjLiRlbWl0KCIkdHJhbnNsYXRlQ2hhbmdlU3RhcnQiLHtsYW5ndWFnZTphfSk7dmFyIGU9SyhhKTtyZXR1cm4gZSYmKGE9ZSksIXomJnRbYV18fCFvfHxHW2FdP2o9PT1hJiZHW2FdP0dbYV0udGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYi5yZXNvbHZlKGEua2V5KSxhfSxmdW5jdGlvbihhKXtyZXR1cm4gYi5yZWplY3QoYSksZC5yZWplY3QoYSl9KTooYi5yZXNvbHZlKGEpLFIoYSkpOihqPWEsR1thXT1TKGEpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIEwoYS5rZXksYS50YWJsZSksYi5yZXNvbHZlKGEua2V5KSxSKGEua2V5KSxhfSxmdW5jdGlvbihhKXtyZXR1cm4gYy4kZW1pdCgiJHRyYW5zbGF0ZUNoYW5nZUVycm9yIix7bGFuZ3VhZ2U6YX0pLGIucmVqZWN0KGEpLGMuJGVtaXQoIiR0cmFuc2xhdGVDaGFuZ2VFbmQiLHtsYW5ndWFnZTphfSksZC5yZWplY3QoYSl9KSxHW2FdWyJmaW5hbGx5Il0oZnVuY3Rpb24oKXtjYihhKX0pKSxiLnByb21pc2V9LEguc3RvcmFnZUtleT1mdW5jdGlvbigpe3JldHVybiBQKCl9LEguaXNQb3N0Q29tcGlsaW5nRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiB5fSxILmlzRm9yY2VBc3luY1JlbG9hZEVuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gen0sSC5yZWZyZXNoPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtmLnJlc29sdmUoKSxjLiRlbWl0KCIkdHJhbnNsYXRlUmVmcmVzaEVuZCIse2xhbmd1YWdlOmF9KX1mdW5jdGlvbiBlKCl7Zi5yZWplY3QoKSxjLiRlbWl0KCIkdHJhbnNsYXRlUmVmcmVzaEVuZCIse2xhbmd1YWdlOmF9KX1pZighbyl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkbid0IHJlZnJlc2ggdHJhbnNsYXRpb24gdGFibGUsIG5vIGxvYWRlciByZWdpc3RlcmVkISIpO3ZhciBmPWQuZGVmZXIoKTtpZihjLiRlbWl0KCIkdHJhbnNsYXRlUmVmcmVzaFN0YXJ0Iix7bGFuZ3VhZ2U6YX0pLGEpaWYodFthXSl7dmFyIGg9ZnVuY3Rpb24oYyl7TChjLmtleSxjLnRhYmxlKSxhPT09aSYmUihpKSxiKCl9O2guZGlzcGxheU5hbWU9InJlZnJlc2hQb3N0UHJvY2Vzc29yIixTKGEpLnRoZW4oaCxlKX1lbHNlIGUoKTtlbHNle3ZhciBqPVtdLGs9e307aWYoZyYmZy5sZW5ndGgpZm9yKHZhciBsPTAsbT1nLmxlbmd0aDttPmw7bCsrKWoucHVzaChTKGdbbF0pKSxrW2dbbF1dPSEwO2kmJiFrW2ldJiZqLnB1c2goUyhpKSk7dmFyIG49ZnVuY3Rpb24oYSl7dD17fSxhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXtMKGEua2V5LGEudGFibGUpfSksaSYmUihpKSxiKCl9O24uZGlzcGxheU5hbWU9InJlZnJlc2hQb3N0UHJvY2Vzc29yIixkLmFsbChqKS50aGVuKG4sZSl9cmV0dXJuIGYucHJvbWlzZX0sSC5pbnN0YW50PWZ1bmN0aW9uKGEsYixjKXtpZihudWxsPT09YXx8YW5ndWxhci5pc1VuZGVmaW5lZChhKSlyZXR1cm4gYTtpZihhbmd1bGFyLmlzQXJyYXkoYSkpe2Zvcih2YXIgZD17fSxmPTAsaD1hLmxlbmd0aDtoPmY7ZisrKWRbYVtmXV09SC5pbnN0YW50KGFbZl0sYixjKTtyZXR1cm4gZH1pZihhbmd1bGFyLmlzU3RyaW5nKGEpJiZhLmxlbmd0aDwxKXJldHVybiBhO2EmJihhPUouYXBwbHkoYSkpO3ZhciBqLGs9W107ZSYmay5wdXNoKGUpLGkmJmsucHVzaChpKSxnJiZnLmxlbmd0aCYmKGs9ay5jb25jYXQoZykpO2Zvcih2YXIgbD0wLG49ay5sZW5ndGg7bj5sO2wrKyl7dmFyIG89a1tsXTtpZih0W29dJiYoInVuZGVmaW5lZCIhPXR5cGVvZiB0W29dW2FdP2o9YmIoYSxiLGMpOihxfHxyKSYmKGo9UShhKSkpLCJ1bmRlZmluZWQiIT10eXBlb2YgailicmVha31yZXR1cm4ganx8IiI9PT1qfHwoaj1BLmludGVycG9sYXRlKGEsYiksbSYmIUQmJihqPVgoYSxiKSkpLGp9LEgudmVyc2lvbkluZm89ZnVuY3Rpb24oKXtyZXR1cm4gRn0sSC5sb2FkZXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiBzfSxILmRpcmVjdGl2ZVByaW9yaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIEJ9LEguc3RhdGVmdWxGaWx0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gQ30sbyYmKGFuZ3VsYXIuZXF1YWxzKHQse30pJiZILnVzZShILnVzZSgpKSxnJiZnLmxlbmd0aCkpZm9yKHZhciBkYj1mdW5jdGlvbihhKXtyZXR1cm4gTChhLmtleSxhLnRhYmxlKSxjLiRlbWl0KCIkdHJhbnNsYXRlQ2hhbmdlRW5kIix7bGFuZ3VhZ2U6YS5rZXl9KSxhfSxlYj0wLGZiPWcubGVuZ3RoO2ZiPmViO2ViKyspe3ZhciBnYj1nW2ViXTsoenx8IXRbZ2JdKSYmKEdbZ2JdPVMoZ2IpLnRoZW4oZGIpKX1yZXR1cm4gSH1dfWZ1bmN0aW9uIGQoYSxiKXsidXNlIHN0cmljdCI7dmFyIGMsZD17fSxlPSJkZWZhdWx0IjtyZXR1cm4gZC5zZXRMb2NhbGU9ZnVuY3Rpb24oYSl7Yz1hfSxkLmdldEludGVycG9sYXRpb25JZGVudGlmaWVyPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGQudXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5PWZ1bmN0aW9uKGEpe3JldHVybiBiLnVzZVN0cmF0ZWd5KGEpLHRoaXN9LGQuaW50ZXJwb2xhdGU9ZnVuY3Rpb24oYyxkKXtkPWR8fHt9LGQ9Yi5zYW5pdGl6ZShkLCJwYXJhbXMiKTt2YXIgZT1hKGMpKGQpO3JldHVybiBlPWIuc2FuaXRpemUoZSwidGV4dCIpfSxkfWZ1bmN0aW9uIGUoYSxiLGMsZCxlLGYpeyJ1c2Ugc3RyaWN0Ijt2YXIgZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU3RyaW5nKCkucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfTtyZXR1cm57cmVzdHJpY3Q6IkFFIixzY29wZTohMCxwcmlvcml0eTphLmRpcmVjdGl2ZVByaW9yaXR5KCksY29tcGlsZTpmdW5jdGlvbihiLGgpe3ZhciBpPWgudHJhbnNsYXRlVmFsdWVzP2gudHJhbnNsYXRlVmFsdWVzOnZvaWQgMCxqPWgudHJhbnNsYXRlSW50ZXJwb2xhdGlvbj9oLnRyYW5zbGF0ZUludGVycG9sYXRpb246dm9pZCAwLGs9YlswXS5vdXRlckhUTUwubWF0Y2goL3RyYW5zbGF0ZS12YWx1ZS0rL2kpLGw9Il4oLiopKCIrYy5zdGFydFN5bWJvbCgpKyIuKiIrYy5lbmRTeW1ib2woKSsiKSguKikiLG09Il4oLiopIitjLnN0YXJ0U3ltYm9sKCkrIiguKikiK2MuZW5kU3ltYm9sKCkrIiguKikiO3JldHVybiBmdW5jdGlvbihiLG4sbyl7Yi5pbnRlcnBvbGF0ZVBhcmFtcz17fSxiLnByZVRleHQ9IiIsYi5wb3N0VGV4dD0iIjt2YXIgcD17fSxxPWZ1bmN0aW9uKGEsYyxkKXtpZihjLnRyYW5zbGF0ZVZhbHVlcyYmYW5ndWxhci5leHRlbmQoYSxlKGMudHJhbnNsYXRlVmFsdWVzKShiLiRwYXJlbnQpKSxrKWZvcih2YXIgZiBpbiBkKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjLGYpJiYidHJhbnNsYXRlVmFsdWUiPT09Zi5zdWJzdHIoMCwxNCkmJiJ0cmFuc2xhdGVWYWx1ZXMiIT09Zil7dmFyIGc9YW5ndWxhci5sb3dlcmNhc2UoZi5zdWJzdHIoMTQsMSkpK2Yuc3Vic3RyKDE1KTthW2ddPWRbZl19fSxyPWZ1bmN0aW9uKGEpe2lmKGFuZ3VsYXIuaXNGdW5jdGlvbihyLl91bndhdGNoT2xkKSYmKHIuX3Vud2F0Y2hPbGQoKSxyLl91bndhdGNoT2xkPXZvaWQgMCksYW5ndWxhci5lcXVhbHMoYSwiIil8fCFhbmd1bGFyLmlzRGVmaW5lZChhKSl7dmFyIGQ9Zy5hcHBseShuLnRleHQoKSkubWF0Y2gobCk7aWYoYW5ndWxhci5pc0FycmF5KGQpKXtiLnByZVRleHQ9ZFsxXSxiLnBvc3RUZXh0PWRbM10scC50cmFuc2xhdGU9YyhkWzJdKShiLiRwYXJlbnQpO3ZhciBlPW4udGV4dCgpLm1hdGNoKG0pO2FuZ3VsYXIuaXNBcnJheShlKSYmZVsyXSYmZVsyXS5sZW5ndGgmJihyLl91bndhdGNoT2xkPWIuJHdhdGNoKGVbMl0sZnVuY3Rpb24oYSl7cC50cmFuc2xhdGU9YSx4KCl9KSl9ZWxzZSBwLnRyYW5zbGF0ZT1uLnRleHQoKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIil9ZWxzZSBwLnRyYW5zbGF0ZT1hO3goKX0scz1mdW5jdGlvbihhKXtvLiRvYnNlcnZlKGEsZnVuY3Rpb24oYil7cFthXT1iLHgoKX0pfTtxKGIuaW50ZXJwb2xhdGVQYXJhbXMsbyxoKTt2YXIgdD0hMDtvLiRvYnNlcnZlKCJ0cmFuc2xhdGUiLGZ1bmN0aW9uKGEpeyJ1bmRlZmluZWQiPT10eXBlb2YgYT9yKCIiKToiIj09PWEmJnR8fChwLnRyYW5zbGF0ZT1hLHgoKSksdD0hMX0pO2Zvcih2YXIgdSBpbiBvKW8uaGFzT3duUHJvcGVydHkodSkmJiJ0cmFuc2xhdGVBdHRyIj09PXUuc3Vic3RyKDAsMTMpJiZzKHUpO2lmKG8uJG9ic2VydmUoInRyYW5zbGF0ZURlZmF1bHQiLGZ1bmN0aW9uKGEpe2IuZGVmYXVsdFRleHQ9YX0pLGkmJm8uJG9ic2VydmUoInRyYW5zbGF0ZVZhbHVlcyIsZnVuY3Rpb24oYSl7YSYmYi4kcGFyZW50LiR3YXRjaChmdW5jdGlvbigpe2FuZ3VsYXIuZXh0ZW5kKGIuaW50ZXJwb2xhdGVQYXJhbXMsZShhKShiLiRwYXJlbnQpKX0pfSksayl7dmFyIHY9ZnVuY3Rpb24oYSl7by4kb2JzZXJ2ZShhLGZ1bmN0aW9uKGMpe3ZhciBkPWFuZ3VsYXIubG93ZXJjYXNlKGEuc3Vic3RyKDE0LDEpKSthLnN1YnN0cigxNSk7Yi5pbnRlcnBvbGF0ZVBhcmFtc1tkXT1jfSl9O2Zvcih2YXIgdyBpbiBvKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLHcpJiYidHJhbnNsYXRlVmFsdWUiPT09dy5zdWJzdHIoMCwxNCkmJiJ0cmFuc2xhdGVWYWx1ZXMiIT09dyYmdih3KX12YXIgeD1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBwKXAuaGFzT3duUHJvcGVydHkoYSkmJnZvaWQgMCE9PXBbYV0mJnkoYSxwW2FdLGIsYi5pbnRlcnBvbGF0ZVBhcmFtcyxiLmRlZmF1bHRUZXh0KX0seT1mdW5jdGlvbihiLGMsZCxlLGYpe2M/YShjLGUsaixmKS50aGVuKGZ1bmN0aW9uKGEpe3ooYSxkLCEwLGIpfSxmdW5jdGlvbihhKXt6KGEsZCwhMSxiKX0pOnooYyxkLCExLGIpfSx6PWZ1bmN0aW9uKGIsYyxlLGYpe2lmKCJ0cmFuc2xhdGUiPT09Zil7ZXx8InVuZGVmaW5lZCI9PXR5cGVvZiBjLmRlZmF1bHRUZXh0fHwoYj1jLmRlZmF1bHRUZXh0KSxuLmh0bWwoYy5wcmVUZXh0K2IrYy5wb3N0VGV4dCk7dmFyIGc9YS5pc1Bvc3RDb21waWxpbmdFbmFibGVkKCksaT0idW5kZWZpbmVkIiE9dHlwZW9mIGgudHJhbnNsYXRlQ29tcGlsZSxqPWkmJiJmYWxzZSIhPT1oLnRyYW5zbGF0ZUNvbXBpbGU7KGcmJiFpfHxqKSYmZChuLmNvbnRlbnRzKCkpKGMpfWVsc2V7ZXx8InVuZGVmaW5lZCI9PXR5cGVvZiBjLmRlZmF1bHRUZXh0fHwoYj1jLmRlZmF1bHRUZXh0KTt2YXIgaz1vLiRhdHRyW2ZdOyJkYXRhLSI9PT1rLnN1YnN0cigwLDUpJiYoaz1rLnN1YnN0cig1KSksaz1rLnN1YnN0cigxNSksbi5hdHRyKGssYil9fTsoaXx8a3x8by50cmFuc2xhdGVEZWZhdWx0KSYmYi4kd2F0Y2goImludGVycG9sYXRlUGFyYW1zIix4LCEwKTt2YXIgQT1mLiRvbigiJHRyYW5zbGF0ZUNoYW5nZVN1Y2Nlc3MiLHgpO24udGV4dCgpLmxlbmd0aD9yKG8udHJhbnNsYXRlP28udHJhbnNsYXRlOiIiKTpvLnRyYW5zbGF0ZSYmcihvLnRyYW5zbGF0ZSkseCgpLGIuJG9uKCIkZGVzdHJveSIsQSl9fX19ZnVuY3Rpb24gZihhLGIpeyJ1c2Ugc3RyaWN0IjtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihjKXt2YXIgZD1mdW5jdGlvbigpe2MuYWRkQ2xhc3MoYi5jbG9ha0NsYXNzTmFtZSgpKX0sZT1mdW5jdGlvbigpe2MucmVtb3ZlQ2xhc3MoYi5jbG9ha0NsYXNzTmFtZSgpKX0sZj1hLiRvbigiJHRyYW5zbGF0ZUNoYW5nZUVuZCIsZnVuY3Rpb24oKXtlKCksZigpLGY9bnVsbH0pO3JldHVybiBkKCksZnVuY3Rpb24oYSxjLGYpe2YudHJhbnNsYXRlQ2xvYWsmJmYudHJhbnNsYXRlQ2xvYWsubGVuZ3RoJiZmLiRvYnNlcnZlKCJ0cmFuc2xhdGVDbG9hayIsZnVuY3Rpb24oYSl7YihhKS50aGVuKGUsZCl9KX19fX1mdW5jdGlvbiBnKGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPWZ1bmN0aW9uKGMsZCxlKXtyZXR1cm4gYW5ndWxhci5pc09iamVjdChkKXx8KGQ9YShkKSh0aGlzKSksYi5pbnN0YW50KGMsZCxlKX07cmV0dXJuIGIuc3RhdGVmdWxGaWx0ZXIoKSYmKGMuJHN0YXRlZnVsPSEwKSxjfWZ1bmN0aW9uIGgoYSl7InVzZSBzdHJpY3QiO3JldHVybiBhKCJ0cmFuc2xhdGlvbnMiKX1yZXR1cm4gYW5ndWxhci5tb2R1bGUoInBhc2NhbHByZWNodC50cmFuc2xhdGUiLFsibmciXSkucnVuKGEpLGEuJGluamVjdD1bIiR0cmFuc2xhdGUiXSxhLmRpc3BsYXlOYW1lPSJydW5UcmFuc2xhdGUiLGFuZ3VsYXIubW9kdWxlKCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlIikucHJvdmlkZXIoIiR0cmFuc2xhdGVTYW5pdGl6YXRpb24iLGIpLGFuZ3VsYXIubW9kdWxlKCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlIikuY29uc3RhbnQoInBhc2NhbHByZWNodFRyYW5zbGF0ZU92ZXJyaWRlciIse30pLnByb3ZpZGVyKCIkdHJhbnNsYXRlIixjKSxjLiRpbmplY3Q9WyIkU1RPUkFHRV9LRVkiLCIkd2luZG93UHJvdmlkZXIiLCIkdHJhbnNsYXRlU2FuaXRpemF0aW9uUHJvdmlkZXIiLCJwYXNjYWxwcmVjaHRUcmFuc2xhdGVPdmVycmlkZXIiXSxjLmRpc3BsYXlOYW1lPSJkaXNwbGF5TmFtZSIsYW5ndWxhci5tb2R1bGUoInBhc2NhbHByZWNodC50cmFuc2xhdGUiKS5mYWN0b3J5KCIkdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb24iLGQpLGQuJGluamVjdD1bIiRpbnRlcnBvbGF0ZSIsIiR0cmFuc2xhdGVTYW5pdGl6YXRpb24iXSxkLmRpc3BsYXlOYW1lPSIkdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb24iLGFuZ3VsYXIubW9kdWxlKCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlIikuY29uc3RhbnQoIiRTVE9SQUdFX0tFWSIsIk5HX1RSQU5TTEFURV9MQU5HX0tFWSIpLGFuZ3VsYXIubW9kdWxlKCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlIikuZGlyZWN0aXZlKCJ0cmFuc2xhdGUiLGUpLGUuJGluamVjdD1bIiR0cmFuc2xhdGUiLCIkcSIsIiRpbnRlcnBvbGF0ZSIsIiRjb21waWxlIiwiJHBhcnNlIiwiJHJvb3RTY29wZSJdLGUuZGlzcGxheU5hbWU9InRyYW5zbGF0ZURpcmVjdGl2ZSIsYW5ndWxhci5tb2R1bGUoInBhc2NhbHByZWNodC50cmFuc2xhdGUiKS5kaXJlY3RpdmUoInRyYW5zbGF0ZUNsb2FrIixmKSxmLiRpbmplY3Q9WyIkcm9vdFNjb3BlIiwiJHRyYW5zbGF0ZSJdLGYuZGlzcGxheU5hbWU9InRyYW5zbGF0ZUNsb2FrRGlyZWN0aXZlIixhbmd1bGFyLm1vZHVsZSgicGFzY2FscHJlY2h0LnRyYW5zbGF0ZSIpLmZpbHRlcigidHJhbnNsYXRlIixnKSxnLiRpbmplY3Q9WyIkcGFyc2UiLCIkdHJhbnNsYXRlIl0sZy5kaXNwbGF5TmFtZT0idHJhbnNsYXRlRmlsdGVyRmFjdG9yeSIsYW5ndWxhci5tb2R1bGUoInBhc2NhbHByZWNodC50cmFuc2xhdGUiKS5mYWN0b3J5KCIkdHJhbnNsYXRpb25DYWNoZSIsaCksaC4kaW5qZWN0PVsiJGNhY2hlRmFjdG9yeSJdLGguZGlzcGxheU5hbWU9IiR0cmFuc2xhdGlvbkNhY2hlIiwicGFzY2FscHJlY2h0LnRyYW5zbGF0ZSJ9KTsKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMjgvMTIvMjAxNS4KICovCiAKCnZhciBlbmdsaXNoID0gewogICAgImR2YW50YWdlIjogImR2YW50YWdlIiwKICAgICJERU1PIjogIkRFTU8iLAogICAgJ1BST0RVQ1QnOiAnUFJPRFVDVCcsCiAgICAnT1VSX1BST0RVQ1RTJzogJ09VUiBQUk9EVUNUUycsCiAgICAnSE9UX1BST0RVQ1RTJzogJ0hvdCBQcm9kdWN0cycsCiAgICAnREVBTF9PRl9USEVfREFZJzogJ0RlYWwgb2YgdGhlIERheScsCiAgICAnQ09OVEFDVF9VUyc6ICdDT05UQUNUIFVTJywKICAgICdBT1MnOiAnQU9TJywKICAgICdMb2dpbic6ICdMb2dpbicsCiAgICAnTE9HSU4nOiAnTE9HSU4nLAogICAgJ0xPR09VVCc6ICdUaGlzIGlzIGEgcGFyYWdyYXBoLicsCiAgICAnU1BBQ0lBTF9PRkZFUic6ICdTUEVDSUFMIE9GRkVSJywKICAgICdQT1BVTEFSX0lURU1TJzogJ1BPUFVMQVIgSVRFTVMnLAogICAgJ0ZPTExPV19VUyc6ICdGT0xMT1cgVVMnLAogICAgJ0xFR0FMU19GT09URVInOiAnwqkgQWR2YW50YWdlIEluYywgMjAyMC4nLAogICAgJ0ZJTFRFUl9CWSc6ICdGSUxURVIgQlk6ICcsCiAgICAnRmlsdGVyJzogJ0ZpbHRlcicsCiAgICAnU0hPUF9OT1cnOiAnU0hPUCBOT1cnLAogICAgJ0FERF9UT19DQVJUJzogJ0FERCBUTyBDQVJUJywKICAgICdVUERBVEVfQ0FSVCc6ICdVUERBVEUgQ0FSVCcsCiAgICAnSE9NRSc6ICdIT01FJywKICAgICdCVVlfTk9XJzogJ0JVWSBOT1cnLAogICAgJ1NUQVJUSU5HX0FUJzogJ1N0YXJ0aW5nIGF0JywKICAgICdTRUVfT0ZGRVInOiAnU0VFIE9GRkVSJywKICAgICdPTkxJTkVfU0hPUFBJTkcnOiAnT25saW5lIHNob3BwaW5nJywKICAgICdGQUNFQk9PS19TSUdOX0lOJzogJ1NJR04gSU4gV0lUSCBGQUNFQk9PSycsCiAgICAnT1InOiAnT1InLAogICAgJ05hbWUnOiAnTmFtZScsCiAgICAnUGFzc3dvcmQnOiAnUGFzc3dvcmQnLAogICAgJ05ld19QYXNzd29yZCc6ICdOZXcgUGFzc3dvcmQnLAogICAgJ09sZF9QYXNzd29yZCc6ICdPbGQgUGFzc3dvcmQnLAogICAgJ0NvbmZpcm1fTmV3X3Bhc3N3b3JkJzogJ0NvbmZpcm0gTmV3IFBhc3N3b3JkJywKICAgICdFbWFpbCc6ICdFbWFpbCcsCiAgICAnU0lHTl9JTic6ICdTSUdOIElOJywKICAgICdGT1JHT1RfUEFTU1dPUkQnOiAnRm9yZ290IHlvdXIgcGFzc3dvcmQ/JywKICAgICdDUkVBVEVfTkVXX0FDQ09VTlQnOiAnQ1JFQVRFIE5FVyBBQ0NPVU5UJywKICAgICdSRU1FTUJFUl9NRSc6ICdSRU1FTUJFUiBNRScsCiAgICAnUFJJQ0UnOiAnUFJJQ0UnLAoKICAgICdIaSc6ICdIaScsCiAgICAnU2lnbl9vdXQnOiAnU2lnbiBvdXQnLAogICAgJ015X2FjY291bnQnOiAnTXkgYWNjb3VudCcsCiAgICAiUFJPRFVDVF9TUEVDSUZJQ0FUSU9OUyI6ICJQUk9EVUNUIFNQRUNJRklDQVRJT05TIiwKICAgICJWaWV3X2RldGFpbHMiOiAiVmlldyBEZXRhaWxzIiwKICAgICdTaG9wX05vdyc6ICdTaG9wIE5vdycsCiAgICAnRVhQTE9SRV9OT1cnOiAnRVhQTE9SRSBOT1cnLAogICAgJ1F1YW50aXR5Oic6ICdRdWFudGl0eTonLAogICAgJ1FVQU5USVRZJzogJ1FVQU5USVRZJywKICAgICdRVFknOiAnUVRZOicsIC8vKFF1YW50aXR5KQogICAgJ0dPX1VQJzogJ0dPIFVQJywKICAgICdDUkVBVEVfQUNDT1VOVCc6ICdDUkVBVEUgQUNDT1VOVCcsCiAgICAnVGhpc19pc19hX2RlbW8nOiAnVGhpcyBpcyBhIGRlbW8gc2l0ZS4nLAogICAgJ1BsZWFzZV9lbnRlcl9hX2Zha2VfZGF0YSc6ICdEbyBub3QgdXNlIHJlYWwgZGF0YS4nLAogICAgJ05PVElDRSc6ICdOT1RJQ0UnLAogICAgJ05vdGljZSc6ICdOb3RpY2UnLAogICAgJ0xhcHRvcHMnOiAnTGFwdG9wcycsCiAgICAnQUNDT1VOVF9ERVRBSUxTJzogJ0FDQ09VTlQgREVUQUlMUycsCiAgICAnUEVSU09OQUxfREVUQUlMUyc6ICdQRVJTT05BTCBERVRBSUxTJywKICAgICdBRERSRVNTJzogJ0FERFJFU1MnLAogICAgJ1VzZXJfTmFtZSc6ICdVc2VyIE5hbWUnLAogICAgJ0ZpcnN0X05hbWUnOiAnRmlyc3QgTmFtZScsCiAgICAnTGFzdF9OYW1lJzogJ0xhc3QgTmFtZScsCiAgICAnUGhvbmVfTnVtYmVyJzogJ1Bob25lIE51bWJlcicsCiAgICAnQ291bnRyeSc6ICdDb3VudHJ5JywKICAgICdBZGRyZXNzJzogJ0FkZHJlc3MnLAogICAgJ1Bvc3RhbF9Db2RlJzogJ1Bvc3RhbCBDb2RlJywKICAgICdTdGF0ZV9fUHJvdmluY2VfX1JlZ2lvbic6ICdTdGF0ZSAvIFByb3ZpbmNlIC8gUmVnaW9uJywKICAgICdvZmZlcnNfcHJvbW90aW9uJzogJ1JlY2VpdmUgZXhjbHVzaXZlIG9mZmVycyBhbmQgcHJvbW90aW9ucyBmcm9tIEFkdmFudGFnZScsCiAgICAnUkVHSVNURVInOiAnUkVHSVNURVInLAogICAgJ1JFR0lTVFJBVElPTic6ICdSRUdJU1RSQVRJT04nLAogICAgJ0FMUkVBRFlfSEFWRV9BTl9BQ0NPVU5UJzogJ0FMUkVBRFkgSEFWRSBBTiBBQ0NPVU5UPycsCiAgICAnQWxyZWFkeV9oYXZlX2FuX2FjY291bnQnOiAnQWxyZWFkeSBoYXZlIGFuIGFjY291bnQ/JywKICAgICdDbGVhcic6ICdDbGVhcicsCiAgICAnWW91cl9zaG9wcGluZ19jYXJ0X2lzX2VtcHR5JzogJ1lvdXIgc2hvcHBpbmcgY2FydCBpcyBlbXB0eScsCgoKICAgICdVc2VyX05hbWVfcmVxdWlyZWQnOiAnVXNlciBOYW1lIHJlcXVpcmVkIScsCiAgICAnRW1haWxfZmllbGRfcmVxdWlyZWQnOiAnRW1haWwgcmVxdWlyZWQhJywKICAgICdjb25maXJtX3Bhc3N3b3JkX3JlcXVpcmVkJzogJ0NvbmZpcm0gcGFzc3dvcmQgcmVxdWlyZWQhJywKICAgICdQYXNzd29yZF9ub3RfbWF0Y2gnOiAiUGFzc3dvcmQgZG9lcyBub3QgbWF0Y2ghIiwKICAgICdJbnZhbGlkX2VtYWlsX2FkZHJlc3MnOiAnSW52YWxpZCBlbWFpbCBhZGRyZXNzJywKICAgICdQYXNzd29yZF9maWVsZF9yZXF1aXJlZCc6ICdQYXNzd29yZCBmaWVsZCByZXF1aXJlZCcsCiAgICAnUGFzc3dvcmRfNV9taW5sZW5ndGhfZmllbGRfZXJyb3InOiAnUGFzc3dvcmQgcmVxdWlyZXMgYXQgbGVhc3QgNSBjaGFyYWN0ZXJzJywKICAgICdQYXNzd29yZF8xMF9tYXhsZW5ndGhfZmllbGRfZXJyb3InOiAnUGFzc3dvcmQgcmVxdWlyZXMgYSBtYXhpbXVtIG9mIDEwIGNoYXJhY3RlcnMnLAogICAgJ1Bhc3N3b3JkX3JlZ2V4JzogJ3VwcGVyY2FzZSwgbG93ZXJjYXNlIGFuZCBudW1iZXIgcmVxdWlyZWQnLAogICAgJ1VzZXJfTmFtZV9wYXR0ZXJuJzogIjMtMTUgY2hhcmFjdGVycyAoMC05LCBBLVosIGEteiwgJ18sIC4sIC0nLCBhbGxvd2VkKSIsCiAgICAnSV9hZ3JlZV90b190aGVfQWR2YW50YWdlX2NvbV9BZ3JlZW1lbnQnOiAnSSBhZ3JlZSB0byB0aGUgd3d3LkFkdmFudGFnZU9ubGluZVNob3BwaW5nLmNvbSBDb25kaXRpb25zIG9mIFVzZSBhbmQgUHJpdmFjeSBOb3RpY2UnLAogICAgJ011c3RfYWdyZWVfdG9fdGhlX0FkdmFudGFnZV9jb21fQWdyZWVtZW50JzogJ1lvdSBtdXN0IGFncmVlIHRvIHRoZSB0aGUgQWR2YW50YWdlLmNvbSBDb25kaXRpb25zIG9mIFVzZSBhbmQgUHJpdmFjeSBOb3RpY2UuJywKCiAgICAnbGV0dGVyc19udW1iZXJfc3ltYm9sc19vbmx5JzogJ1VzZSBsZXR0ZXJzLCBudW1iZXJzLCBhbmQgdGhlIGZvbGxvd2luZyBzeW1ib2xzIG9ubHk6IC4tXycsCgogICAgJ0NIRUNLX09VVCc6ICdDSEVDS09VVCcsCiAgICAnVE9UQUwnOiAnVE9UQUwnLAogICAgJ0l0ZW1zJzogJ0l0ZW1zJywKICAgICdJdGVtJzogJ0l0ZW0nLAogICAgJ0lURU1TJzogJ0lURU1TJywKICAgICdJVEVNJzogJ0lURU0nLAogICAgJ0NvbG9yJzogJ0NvbG9yOicsCiAgICAnU0hPUFBJTkdfQ0FSVCc6ICdTSE9QUElORyBDQVJUJywKICAgICdQQVlNRU5UX09QVElPTlMnOiAnUEFZTUVOVCBPUFRJT05TJywKICAgICdQUk9EVUNUX05BTUUnOiAnUFJPRFVDVCBOQU1FJywKICAgICdTZWFyY2gnOiAnU2VhcmNoJywKICAgICdTZWFyY2hPcmRlcic6ICdTZWFyY2ggaW4gb3JkZXJzICcsCiAgICAnQ0FURUdPUklFUyc6ICdDQVRFR09SSUVTJywKICAgICdDYXRlZ29yaWVzJzogJ0NhdGVnb3JpZXMnLAogICAgJ0NhdGVnb3J5JzogJ0NhdGVnb3J5JywKICAgICdQcm9kdWN0JzogJ1Byb2R1Y3QnLAogICAgJ1RPUCc6ICdUT1AnLAogICAgJ1JFU1VMVFNfRk9SJzogJ1JFU1VMVFMgRk9SJywKICAgICdUT1BfUkVTVUxUU19GT1InOiAnVE9QIFJFU1VMVFMgRk9SJywKICAgICdWaWV3X0FsbCc6ICdWaWV3IEFsbCcsCiAgICAnRURJVCc6ICdFRElUJywKICAgICdFZGl0JzogJ0VkaXQnLAogICAgJ1JFTU9WRSc6ICdSRU1PVkUnLAoKICAgICdJREVOVElGSUNBVElPTic6ICdJREVOVElGSUNBVElPTicsCiAgICAnT1JERVJfUEFZTUVOVCc6ICdPUkRFUiBQQVlNRU5UJywKICAgICdGb3Jnb3RfeW91cl9wYXNzd29yZCc6ICdGb3Jnb3QgeW91ciBwYXNzd29yZD8nLAogICAgJ05ld19jbGllbnQnOiAnTmV3IHVzZXI/JywKICAgICdDcmVhdGVfeW91cl9hY2NvdW50X2Vhc2lseSc6ICdDcmVhdGUgeW91ciBhY2NvdW50IHRvIHRyYWNrIHlvdXIgb3JkZXInLAogICAgJ1NISVBQSU5HJzogJ1NISVBQSU5HJywKICAgICdzaGlwcGluZyc6ICdzaGlwcGluZycsCiAgICAnUEFZTUVOVF9NRVRIT0QnOiAnUEFZTUVOVCBNRVRIT0QnLAogICAgJ1NISVBQSU5HX0JZJzogJ1NISVBQSU5HIEJZJywKICAgICdFZGl0X3NoaXBwaW5nX0RldGFpbHMnOiAnRWRpdCBzaGlwcGluZyBkZXRhaWxzJywKICAgICdORVhUJzogJ05FWFQnLAogICAgJ0JBQ0snOiAnQkFDSycsCiAgICAnQ2hvb3NlX3BheW1lbnRfbWV0aG9kX2JlbG93JzogJ0Nob29zZSBwYXltZW50IG1ldGhvZCBiZWxvdyAnLAogICAgJ0JhY2tfdG9fc2hpcHBpbmdfZGV0YWlscyc6ICdCYWNrIHRvIHNoaXBwaW5nIGRldGFpbHMnLAogICAgJ1BBWV9OT1cnOiAnUEFZIE5PVycsCiAgICAnQ2FydGhvbGRlcl9OYW1lJzogJ0NhcmRob2xkZXIgbmFtZScsCiAgICAnQ0NWX051bWJlcic6ICdDVlYgbnVtYmVyJywKICAgICdJbnZhbGlkX0NhcmRfbnVtYmVyJzogJ0ludmFsaWQgY2FyZCBudW1iZXInLAogICAgJ0ludmFsaWRfQ0NWX251bWJlcic6ICdJbnZhbGlkIENWViBudW1iZXInLAogICAgJ1NhZmVQYXlfVXNlcl9uYW1lJzogJ1NhZmVQYXkgdXNlcm5hbWUnLAogICAgJ1NhZmVQYXlfUGFzc3dvcmQnOiAnU2FmZVBheSBwYXNzd29yZCcsCiAgICAnQ2FyZF9udW1iZXInOiAnQ2FyZCBudW1iZXInLAogICAgJ01NJzogJ01NJywKICAgICdZWSc6ICdZWVlZJywKICAgICdFeHBpcmF0aW9uX0RhdGUnOiAnRXhwaXJhdGlvbiBkYXRlJywKICAgICdUaGFua195b3VfZm9yX2J1eWluZ193aXRoX0FkdmFudGFnZSc6ICdUaGFuayB5b3UgZm9yIGJ1eWluZyB3aXRoIEFkdmFudGFnZScsCiAgICAnWW9yX3RyYWNraW5nX251bWJlcl9pcyc6ICdZb3VyIHRyYWNraW5nIG51bWJlciBpcycsCiAgICAnWW91cl9vcmRlcl9udW1iZXJfaXMnOiAnWW91ciBvcmRlciBudW1iZXIgaXMnLAogICAgJ1lvdXJfd2FycmFudHlfbnVtYmVyX2lzJzogJ1lvdXIgd2FycmFudHkgbnVtYmVyIGlzJywKICAgICdTaGlwcGluZ190byc6ICdTaGlwcGluZyB0bycsCiAgICAnUGF5bWVudF9NZXRob2QnOiAnUGF5bWVudCBtZXRob2QnLAoKICAgICdEYXRlX09yZGVyZWQnOiAnRGF0ZSBvcmRlcmVkJywKICAgICdTdWJ0b3RhbCc6ICdTdWJ0b3RhbCcsCiAgICAnZmllbGRfaXNfcmVxdWlyZWQnOiAnZmllbGQgaXMgcmVxdWlyZWQnLAogICAgJ1VzZXJfbmFtZSc6ICdVc2VybmFtZScsCiAgICAnQ29uZmlybV9wYXNzd29yZCc6ICdDb25maXJtIHBhc3N3b3JkJywKICAgICdNWV9BQ0NPVU5UJzogJ01ZIEFDQ09VTlQnLAogICAgJ0FjY291bnRfRGV0YWlscyc6ICdBY2NvdW50IGRldGFpbHMnLAoKICAgICdQcmVmZXJyZWRfcGF5bWVudF9tZXRob2QnOiAnUHJlZmVycmVkIHBheW1lbnQgbWV0aG9kJywKICAgICdQcmVmZXJyZWRfcGF5bWVudF9tZXRob2QyJzogJ1BheW1lbnQgbWV0aG9kJywKICAgICdOb3RpZnlfbWVfYWJvdXRfUHJvbW90aW9ucyc6ICdOb3RpZnkgbWUgYWJvdXQgcHJvbW90aW9ucycsCiAgICAnTWFzdGVyQ3JlZGl0JzogJ01hc3RlckNyZWRpdCcsCiAgICAnQ09OTkVDVElPTl9ERVRBSUxTJzogJ0NPTk5FQ1RJT04gREVUQUlMUycsCiAgICAnQ2hhbmdlX1Bhc3N3b3JkJzogJ0NoYW5nZSBwYXNzd29yZCcsCiAgICAnU0FWRSc6ICdTQVZFJywKICAgICdTYXZlX2NoYW5nZXNfaW5fcHJvZmlsZV9mb3JfZnV0dXJlX3VzZSc6ICdTYXZlIGNoYW5nZXMgaW4gcHJvZmlsZSBmb3IgZnV0dXJlIHVzZScsCiAgICAnU09VTF9PVVQnOiAnU09MRCBPVVQnLAogICAgJ3lvdXJfQWNjb3VudF93YXNfY3JlYXRlZF9zdWNjZXNzZnVsbHknOiAnWW91ciBhY2NvdW50IHdhcyBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsCiAgICAnQ09OVElOVUVfU0hPUFBJTkcnOiAnQ09OVElOVUUgU0hPUFBJTkcnLAogICAgJ1Byb2JsZW1fc2VuZGluZ19tYWlsX3BsZWFzZV90cnlfbGF0ZXInOiAnUHJvYmxlbSBzZW5kaW5nIG1haWwuIFRyeSBhZ2FpbiBsYXRlci4nLAogICAgJ1N1YmplY3QnOiAnU3ViamVjdCcsCiAgICAnU1VQUE9SVCc6ICdTVVBQT1JUJywKCiAgICAndG9hc3RfUHJvZHVjdF9BZGRlZF9TdWNjZXNzZnVsbHknOiAnUHJvZHVjdCBhZGRlZCBzdWNjZXNzZnVsbHknLAogICAgJ3RvYXN0X1Byb2R1Y3RfVXBkYXRlZF9TdWNjZXNzZnVsbHknOiAnUHJvZHVjdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsCiAgICAnU2VhcmNoX1Jlc3VsdCc6ICJTZWFyY2ggcmVzdWx0IiwKICAgICdQcmVmZXJyZWRfcGF5bWVudF9oYXNfbm90X2JlZW5fc2V0JzogJ1ByZWZlcnJlZCBwYXltZW50IHdhcyBub3Qgc3BlY2lmaWVkJywKICAgICdTYWZlUGF5JzogJ1NhZmVQYXknLAogICAgJ1NldF9TYWZlUGF5X2FzX1ByZWZlcnJlZF9wYXltZW50JzogJ1NldCBTYWZlUGF5IGFzIHlvdXIgcHJlZmVycmVkIHBheW1lbnQnLAogICAgJ1NldF9NYXN0ZXJDcmVkaXRfYXNfUHJlZmVycmVkX3BheW1lbnQnOiAnU2V0IE1hc3RlckNyZWRpdCBhcyB5b3VyIHByZWZlcnJlZCBwYXltZW50JywKICAgICdOb19yZXN1bHRzX2Zvcic6ICdObyByZXN1bHRzIGZvcicsCiAgICAnTm9fcmVzdWx0cyc6ICdObyByZXN1bHRzJywKICAgICdOb19yZXN1bHRzX3B1bmNob3V0JzogJ05vIHNlYXJjaCByZXN1bHRzIGZvdW5kLiBIb3dldmVyLCB5b3UgY2FuIGV4dGVuZCB5b3VyIHNlYXJjaCB0aHJvdWdoIHRoZSBuZXcgU0FQIHVzZXIgZXhwZXJpZW5jZSAodXNlcyBTQVBVSTUpJywKICAgICdOb19yZXN1bHRzX3B1bmNob3V0X25vdGUnOiAnTk9URTogT3BlblRleHQgaXMgbm90IHJlc3BvbnNpYmxlIGZvciBhbnl0aGluZyB0aGF0IGhhcHBlbnMgb25jZSB5b3Ugb3BlbiB0aGUgU0FQIEZpb3JpIERlbW8gS2l0IHBhZ2UuJywKICAgICdTQVBfQlVUVE9OJyA6ICdHbyB0byB0aGUgU0FQIEZpb3JpIERlbW8gQXBwJywKICAgICdTRU5EJzogJ1NFTkQnLAogICAgJ1Byb2R1Y3RfcmVtb3ZlZCc6ICdQcm9kdWN0IHJlbW92ZWQnLAogICAgJ1VTRVInOiAnVVNFUicsCiAgICAnU0VBUkNIJzogJ1NFQVJDSCcsCiAgICAnYWRkX3dhcnJhbnR5JzogJ0FkZCBXYXJyYW50eScsCgoKCgoKCgoKCgoKICAgICdyZWdpc3Rlcl9mYWlsZCc6ICdSZWdpc3RyYXRpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicsCiAgICAnbG9naW5fZmFpbGQnOiAnTG9naW4gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsCgogICAgJ2VtYWlsX25vX2Zvcm1hdHRlZF9jb3JyZWN0bHknOiAnWW91ciBlbWFpbCBhZGRyZXNzIGlzblwndCBmb3JtYXR0ZWQgY29ycmVjdGx5JywKICAgICd2YWxpZF9lbWFpbF9yZXF1aXJlZCc6ICcnLAoKICAgICdVc2VfdXBfb2YnOiAnVXNlICcsCiAgICAnY2hhcmFjdGVyX29yX2xvbmdlcicgOidjaGFyYWN0ZXIgb3IgbG9uZ2VyJywKICAgICdVc2VfbWF4aW11bSc6ICdVc2UgbWF4aW11bScsCgogICAgJ1VzZV91cF90b18xMl9jaGFyYWN0ZXJzX0luY2x1ZGVfYXRfbGVhc3Rfb25lX2xldHRlcl9hbmRfb25lX251bWJlcic6ICdVc2UgYmV0d2VlbiA0LTEyIGNoYXJhY3RlcnMsIGluY2x1ZGluZyBhdCBsZWFzdCBvbmUgdXBwZXIgY2FzZSBsZXR0ZXIsIG9uZSBsb3dlciBjYXNlIGxldHRlciwgYW5kIG9uZSBudW1iZXIuJywKCiAgICAnSW5jbHVkaW5nX29uZV91cHBlcl9sZXR0ZXInOiAnSW5jbHVkaW5nIGF0IGxlYXN0IG9uZSB1cHBlciBsZXR0ZXInLAogICAgJ0luY2x1ZGluZ19vbmVfbG93ZXJfbGV0dGVyJzogJ0luY2x1ZGluZyBhdCBsZWFzdCBvbmUgbG93ZXIgbGV0dGVyJywKICAgICdJbmNsdWRpbmdfb25lX251bWJlcic6ICdJbmNsdWRpbmcgYXQgbGVhc3Qgb25lIG51bWJlcicsCgogICAgJ29uZV91cHBlcl9sZXR0ZXJfcmVxdWlyZWQnOiAnT25lIHVwcGVyIGxldHRlciByZXF1aXJlZCcsCiAgICAnb25lX2xvd2VyX2xldHRlcl9yZXF1aXJlZCc6ICdPbmUgbG93ZXIgbGV0dGVyIHJlcXVpcmVkJywKICAgICdvbmVfbnVtYmVyX3JlcXVpcmVkJzogJ09uZSBudW1iZXIgcmVxdWlyZWQnLAoKICAgICdTYW1lX2FzJzogJ1NhbWUgYXMnLAogICAgJ1RoaXNfZmllbGRfbm90X21hdGNoX3dpdGgnOiAncyBkbyBub3QgbWF0Y2gnLAogICAgJ2ZpZWxkJzogJ2ZpZWxkJywKCiAgICAncmVxdWlyZWQnOiAncmVxdWlyZWQnLAogICAgJ251bWJlcnMnIDogJ251bWJlcnMnLAogICAgJ1VzZV9leGFjdGx5JyA6ICdVc2UgZXhhY3RseScsCiAgICAnWWVhcic6ICdZZWFyJywKICAgICdNb250aCc6ICdNb250aCcsCiAgICAvLydWYWxpZF9DQ1ZfbnVtYmVyX3JlcXVpcmVkJzogJ1ZhbGlkIENDViBudW1iZXIgcmVxdWlyZWQnLAogICAgJ1ZhbGlkX0NDVl9udW1iZXJfcmVxdWlyZWQnOiAnVXNlIGV4YWN0bHkgMyBkaWdpdHMnLAoKICAgICdBZ3JlZUFncmVlbWVudFJlcXVpcmUnOiAnSSBhZ3JlZSB0byB0aGUgd3d3LkFkdmFudGFnZU9ubGluZVNob3BwaW5nLmNvbSBDb25kaXRpb25zIG9mIFVzZSBhbmQgUHJpdmFjeSBOb3RpY2UnLAoKICAgICdFeHBpcmF0aW9uQ2FydCcgOiAnRXhwaXJhdGlvbiBkYXRlIGhhcyBwYXNzZWQuIFRyeSBhbm90aGVyIGNhcmQnLAogICAgJ0NIQVRfV0lUSF9VUyc6ICdDSEFUIFdJVEggVVMnLAoKICAgICdNWV9PUkRFUlMnOiAnTVkgT1JERVJTJywKCgogICAgJ1NISVBQSU5HX0RFVEFJTFMnOiAnU0hJUFBJTkcgREVUQUlMUycsCiAgICAnU0hJUElOR19ERVRBSUxTJzogJ1NISVBJTkcgREVUQUlMUycsCgogICAgJ1NoaXBwaW5nX0RldGFpbHMnOiAnU2hpcHBpbmcgZGV0YWlscycsCiAgICAnU2hpcGluZ19EZXRhaWxzJzogJ1NoaXBpbmcgZGV0YWlscycsCgogICAgJ1JlY2VpdmVyX0RldGFpbHMnOiAnUmVjaXBpZW50IGRldGFpbHMnLAogICAgJ1JlY2lldmVyX0RldGFpbHMnOiAnUmVjaXBlaW50IERldGFpbHMnLAoKICAgICdDaXR5JzogJ0NpdHknLAogICAgJ0NpaXR5JzogJ0NpaXR5JywKCgogICAgJ09SREVSX1NVTU1BUlknOiAnT1JERVIgU1VNTUFSWScsCiAgICAnT3JkZXJfU3VtbWFyeSc6ICdPcmRlciBTdW1tYXJ5JywKCiAgICAnT1JERVJSX1NVTU1BUlknOiAnT1JERVJSIFNVTU1BUlknLAogICAgJ09yZGVycl9TdW1tYXJ5JzogJ09yZGVyciBTdW1tYXJ5JywKCiAgICAnT1JERVJfTlVNQkVSJzogJ09SREVSIE5VTUJFUicsCiAgICAnT1JERVJfREFURSc6ICdPUkRFUiBEQVRFJywKICAgICdPUkRFUl9USU1FJzogJ09SREVSIFRJTUUnLAogICAgJ1RPVEFMX1BSSUNFJzogJ1RPVEFMIFBSSUNFJywKJ1dBUlJBTlRZJyA6ICdXQVJSQU5UWScsCiAgICAnQ09MT1InOiAnQ09MT1InLAoKICAgICdNeV9PcmRlcnMnOiAnTXkgb3JkZXJzJywKCiAgICAnTm9fb3JkZXJzJzogJ05vIG9yZGVycycsCiAgICAncmV2aWV3cyc6ICdyZXZpZXdzJywKICAgICdBUkVfVV9TVVJFJyA6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8nLAogICAgJ0NBTkNFTF9ZT1VSX09SREVSJzogJ2NhbmNlbCB5b3VyIG9yZGVyPycsCiAgICAnWUVTX0NBTkNFTCc6ICdZRVMsIENBTkNFTCcsCiAgICAnTk9fS0VFUF9PUkRFUic6ICdOTywgS0VFUCBNWSBPUkRFUicsCgoKICAgIC8vIEFCT1VUIFBBR0UKICAgICdBQk9VVF9QQUdFJzogJ0FCT1VUJywKICAgICdBQk9VVCc6ICdBYm91dCcsCiAgICAnQU9TX1ZFUlNJT05TJzogJ0FPUyBWZXJzaW9ucycsCiAgICAnQ09ORklHX1RPT0wnOiAnTWFuYWdlbWVudCBDb25zb2xlJywKICAgICdUSEVfQVBQX0lTX0FWQUlMQUJMRV9JTl8zX0ZPUk1fRkFDVE9SUyc6ICdUSEUgQVBQTElDQVRJT04gSVMgQVZBSUxBQkxFIElOIDMgRk9STSBGQUNUT1JTOicsCiAgICAnQUJPVVRfRklSU1RfUEFSQUdSQVBIJzogJ0FkdmFudGFnZSBPbmxpbmUgU2hvcHBpbmcgKEFPUykgaXMgYSBmaWN0aW9uYWwgY29tcGFueSB1c2VkIGJ5IE9wZW5UZXh0IGFzIHRoZSDigJxhcHBsaWNhdGlvbiB1bmRlciB0ZXN04oCdIGR1cmluZyBjdXN0b21lci1mYWNpbmcgcHJvZHVjdCBkZW1vbnN0cmF0aW9ucy4nLAogICAgJ0FCT1VUX1NFQ09ORF9QQVJBR1JBUEgnOiAnSXRzIHByaW1hcnkgYXNzZXRzIGFyZSBhIGZ1bGx5LWZ1bmN0aW9uYWwgd2Vic2l0ZSBhbmQgYSBtb2JpbGUgY2xpZW50LCBlYWNoIGRlc2lnbmVkIHVzaW5nIG1vZGVybiBwcm9ncmFtbWluZyBwcmFjdGljZXMsIGZvY3VzaW5nIG9uIGhpZ2ggcXVhbGl0eSBhbmQgc2NhbGFiaWxpdHkuwqAgQU9TIGlzIGJ1aWx0IHVzaW5nIERldk9wcyBwcmFjdGljZXMsIHNwZWNpZmljYWxseSBBZ2lsZSBiYWNrbG9nIG1hbmFnZW1lbnQgYW5kIGNvbnRpbnVvdXMgdGVzdGluZywgaW5jbHVkaW5nIGZ1bmN0aW9uYWwsIG5vbi1mdW5jdGlvbmFsLCBwZXJmb3JtYW5jZSBhbmQgc2VjdXJpdHkgdGVzdGluZy7CoCcsCiAgICAiUFJPRFVDVF9RVUFOVElUWV9FUlJPUl9NRVNTQUdFIiA6ICJPb3BzISBXZSBvbmx5IGhhdmUgezB9IGluIHN0b2NrLiBXZSB1cGRhdGVkIHlvdXIgb3JkZXIgYWNjb3JkaW5nbHkiCgp9OwoKCgoKCgoKCgoKCgoKCmRlZmluZSgiZW5nbGlzaExhbmd1YWdlIiwgZnVuY3Rpb24oKXt9KTsKCi8qIQogKiBCZXogdjEuMC4xMC1nNWFlMDEzNgogKiBodHRwOi8vZ2l0aHViLmNvbS9yZGFsbGFzZ3JheS9iZXoKICogCiAqIEEgcGx1Z2luIHRvIGNvbnZlcnQgQ1NTMyBjdWJpYy1iZXppZXIgY28tb3JkaW5hdGVzIHRvIGpRdWVyeS1jb21wYXRpYmxlIGVhc2luZyBmdW5jdGlvbnMKICogCiAqIFdpdGggdGhhbmtzIHRvIE5pa29sYXkgTmVtc2hpbG92IGZvciBjbGFyaWZpY2F0aW9uIG9uIHRoZSBjdWJpYy1iZXppZXIgbWF0aHMKICogU2VlIGh0dHA6Ly9zdC1vbi1pdC5ibG9nc3BvdC5jb20vMjAxMS8wNS9jYWxjdWxhdGluZy1jdWJpYy1iZXppZXItZnVuY3Rpb24uaHRtbAogKiAKICogQ29weXJpZ2h0IDIwMTEgUm9iZXJ0IERhbGxhcyBHcmF5LiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBQcm92aWRlZCB1bmRlciB0aGUgRnJlZUJTRCBsaWNlbnNlOiBodHRwczovL2dpdGh1Yi5jb20vcmRhbGxhc2dyYXkvYmV6L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0CiovalF1ZXJ5LmV4dGVuZCh7YmV6OmZ1bmN0aW9uKGEpe3ZhciBiPSJiZXpfIitqUXVlcnkubWFrZUFycmF5KGFyZ3VtZW50cykuam9pbigiXyIpLnJlcGxhY2UoIi4iLCJwIik7aWYodHlwZW9mIGpRdWVyeS5lYXNpbmdbYl0hPSJmdW5jdGlvbiIpe3ZhciBjPWZ1bmN0aW9uKGEsYil7dmFyIGM9W251bGwsbnVsbF0sZD1bbnVsbCxudWxsXSxlPVtudWxsLG51bGxdLGY9ZnVuY3Rpb24oZixnKXtyZXR1cm4gZVtnXT0zKmFbZ10sZFtnXT0zKihiW2ddLWFbZ10pLWVbZ10sY1tnXT0xLWVbZ10tZFtnXSxmKihlW2ddK2YqKGRbZ10rZipjW2ddKSl9LGc9ZnVuY3Rpb24oYSl7cmV0dXJuIGVbMF0rYSooMipkWzBdKzMqY1swXSphKX0saD1mdW5jdGlvbihhKXt2YXIgYj1hLGM9MCxkO3doaWxlKCsrYzwxNCl7ZD1mKGIsMCktYTtpZihNYXRoLmFicyhkKTwuMDAxKWJyZWFrO2ItPWQvZyhiKX1yZXR1cm4gYn07cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmKGgoYSksMSl9fTtqUXVlcnkuZWFzaW5nW2JdPWZ1bmN0aW9uKGIsZCxlLGYsZyl7cmV0dXJuIGYqYyhbYVswXSxhWzFdXSxbYVsyXSxhWzNdXSkoZC9nKStlfX1yZXR1cm4gYn19KTsKCmRlZmluZSgianF1ZXJ5LWJleiIsIFsianF1ZXJ5Il0sIGZ1bmN0aW9uKCl7fSk7CgovKgogQ29sb3IgYW5pbWF0aW9uIDEuNi4wCiBodHRwOi8vd3d3LmJpdHN0b3JtLm9yZy9qcXVlcnkvY29sb3ItYW5pbWF0aW9uLwogQ29weXJpZ2h0IDIwMTEsIDIwMTMgRWR3aW4gTWFydGluIDxlZHdpbkBiaXRzdG9ybS5vcmc+CiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuCiovCihmdW5jdGlvbihkKXtmdW5jdGlvbiBoKGEsYixlKXt2YXIgYz0icmdiIisoZC5zdXBwb3J0LnJnYmE/ImEiOiIiKSsiKCIrcGFyc2VJbnQoYVswXStlKihiWzBdLWFbMF0pLDEwKSsiLCIrcGFyc2VJbnQoYVsxXStlKihiWzFdLWFbMV0pLDEwKSsiLCIrcGFyc2VJbnQoYVsyXStlKihiWzJdLWFbMl0pLDEwKTtkLnN1cHBvcnQucmdiYSYmKGMrPSIsIisoYSYmYj9wYXJzZUZsb2F0KGFbM10rZSooYlszXS1hWzNdKSk6MSkpO3JldHVybiBjKyIpIn1mdW5jdGlvbiBmKGEpe3ZhciBiO3JldHVybihiPS8jKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pLy5leGVjKGEpKT9bcGFyc2VJbnQoYlsxXSwxNikscGFyc2VJbnQoYlsyXSwxNikscGFyc2VJbnQoYlszXSwxNiksMV06KGI9LyMoWzAtOWEtZkEtRl0pKFswLTlhLWZBLUZdKShbMC05YS1mQS1GXSkvLmV4ZWMoYSkpP1sxNypwYXJzZUludChiWzFdLDE2KSwxNypwYXJzZUludChiWzJdLAoxNiksMTcqcGFyc2VJbnQoYlszXSwxNiksMV06KGI9L3JnYlwoXHMqKFswLTldezEsM30pXHMqLFxzKihbMC05XXsxLDN9KVxzKixccyooWzAtOV17MSwzfSlccypcKS8uZXhlYyhhKSk/W3BhcnNlSW50KGJbMV0pLHBhcnNlSW50KGJbMl0pLHBhcnNlSW50KGJbM10pLDFdOihiPS9yZ2JhXChccyooWzAtOV17MSwzfSlccyosXHMqKFswLTldezEsM30pXHMqLFxzKihbMC05XXsxLDN9KVxzKixccyooWzAtOVwuXSopXHMqXCkvLmV4ZWMoYSkpP1twYXJzZUludChiWzFdLDEwKSxwYXJzZUludChiWzJdLDEwKSxwYXJzZUludChiWzNdLDEwKSxwYXJzZUZsb2F0KGJbNF0pXTpsW2FdfWQuZXh0ZW5kKCEwLGQse3N1cHBvcnQ6e3JnYmE6ZnVuY3Rpb24oKXt2YXIgYT1kKCJzY3JpcHQ6Zmlyc3QiKSxiPWEuY3NzKCJjb2xvciIpLGU9ITE7aWYoL15yZ2JhLy50ZXN0KGIpKWU9ITA7ZWxzZSB0cnl7ZT1iIT1hLmNzcygiY29sb3IiLCJyZ2JhKDAsIDAsIDAsIDAuNSkiKS5jc3MoImNvbG9yIiksCmEuY3NzKCJjb2xvciIsYil9Y2F0Y2goYyl7fXJldHVybiBlfSgpfX0pO3ZhciBrPSJjb2xvciBiYWNrZ3JvdW5kQ29sb3IgYm9yZGVyQm90dG9tQ29sb3IgYm9yZGVyTGVmdENvbG9yIGJvcmRlclJpZ2h0Q29sb3IgYm9yZGVyVG9wQ29sb3Igb3V0bGluZUNvbG9yIi5zcGxpdCgiICIpO2QuZWFjaChrLGZ1bmN0aW9uKGEsYil7ZC5Ud2Vlbi5wcm9wSG9va3NbYl09e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gZChhLmVsZW0pLmNzcyhiKX0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBjPWEuZWxlbS5zdHlsZSxnPWYoZChhLmVsZW0pLmNzcyhiKSksbT1mKGEuZW5kKTthLnJ1bj1mdW5jdGlvbihhKXtjW2JdPWgoZyxtLGEpfX19fSk7ZC5Ud2Vlbi5wcm9wSG9va3MuYm9yZGVyQ29sb3I9e3NldDpmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW0uc3R5bGUsZT1bXSxjPWsuc2xpY2UoMiw2KTtkLmVhY2goYyxmdW5jdGlvbihiLGMpe2VbY109ZihkKGEuZWxlbSkuY3NzKGMpKX0pO3ZhciBnPWYoYS5lbmQpOwphLnJ1bj1mdW5jdGlvbihhKXtkLmVhY2goYyxmdW5jdGlvbihkLGMpe2JbY109aChlW2NdLGcsYSl9KX19fTt2YXIgbD17YXF1YTpbMCwyNTUsMjU1LDFdLGF6dXJlOlsyNDAsMjU1LDI1NSwxXSxiZWlnZTpbMjQ1LDI0NSwyMjAsMV0sYmxhY2s6WzAsMCwwLDFdLGJsdWU6WzAsMCwyNTUsMV0sYnJvd246WzE2NSw0Miw0MiwxXSxjeWFuOlswLDI1NSwyNTUsMV0sZGFya2JsdWU6WzAsMCwxMzksMV0sZGFya2N5YW46WzAsMTM5LDEzOSwxXSxkYXJrZ3JleTpbMTY5LDE2OSwxNjksMV0sZGFya2dyZWVuOlswLDEwMCwwLDFdLGRhcmtraGFraTpbMTg5LDE4MywxMDcsMV0sZGFya21hZ2VudGE6WzEzOSwwLDEzOSwxXSxkYXJrb2xpdmVncmVlbjpbODUsMTA3LDQ3LDFdLGRhcmtvcmFuZ2U6WzI1NSwxNDAsMCwxXSxkYXJrb3JjaGlkOlsxNTMsNTAsMjA0LDFdLGRhcmtyZWQ6WzEzOSwwLDAsMV0sZGFya3NhbG1vbjpbMjMzLDE1MCwxMjIsMV0sZGFya3Zpb2xldDpbMTQ4LDAsMjExLDFdLGZ1Y2hzaWE6WzI1NSwKMCwyNTUsMV0sZ29sZDpbMjU1LDIxNSwwLDFdLGdyZWVuOlswLDEyOCwwLDFdLGluZGlnbzpbNzUsMCwxMzAsMV0sa2hha2k6WzI0MCwyMzAsMTQwLDFdLGxpZ2h0Ymx1ZTpbMTczLDIxNiwyMzAsMV0sbGlnaHRjeWFuOlsyMjQsMjU1LDI1NSwxXSxsaWdodGdyZWVuOlsxNDQsMjM4LDE0NCwxXSxsaWdodGdyZXk6WzIxMSwyMTEsMjExLDFdLGxpZ2h0cGluazpbMjU1LDE4MiwxOTMsMV0sbGlnaHR5ZWxsb3c6WzI1NSwyNTUsMjI0LDFdLGxpbWU6WzAsMjU1LDAsMV0sbWFnZW50YTpbMjU1LDAsMjU1LDFdLG1hcm9vbjpbMTI4LDAsMCwxXSxuYXZ5OlswLDAsMTI4LDFdLG9saXZlOlsxMjgsMTI4LDAsMV0sb3JhbmdlOlsyNTUsMTY1LDAsMV0scGluazpbMjU1LDE5MiwyMDMsMV0scHVycGxlOlsxMjgsMCwxMjgsMV0sdmlvbGV0OlsxMjgsMCwxMjgsMV0scmVkOlsyNTUsMCwwLDFdLHNpbHZlcjpbMTkyLDE5MiwxOTIsMV0sd2hpdGU6WzI1NSwyNTUsMjU1LDFdLHllbGxvdzpbMjU1LDI1NSwKMCwxXSx0cmFuc3BhcmVudDpbMjU1LDI1NSwyNTUsMF19fSkoalF1ZXJ5KTsKCmRlZmluZSgianF1ZXJ5LmFuaW1hdGUtY29sb3JzIiwgWyJqcXVlcnkiXSwgZnVuY3Rpb24oKXt9KTsKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDE2LzExLzIwMTUuCiAqLwp2YXIgc3RhcnRQb3NzaXRpb24gPSA5MDAwMDAwMDA7CnZhciBwYWdlc1Bvc3NpdGlvbiA9IHN0YXJ0UG9zc2l0aW9uOwp2YXIgc3RpY2t5UG9zc2l0aW9uID0gc3RhcnRQb3NzaXRpb247CgoKdmFyIEhlbHBlciA9IEhlbHBlciB8fCB7fTsKSGVscGVyLl9fX19jbG9zZVRvb1RpcENhcnQ7CkhlbHBlci5fX19fc2hvd1BhZ2U7CkhlbHBlci5tb2JpbGVfc2VjdGlvbl9tb3ZlZDsKCkhlbHBlci5kZWZhdWx0VGltZUxvYWRlclRvRW5hYmxlID0gMTAwMDsKCnZhciBlbmFibGVMb2FkZXJBY3RpdmF0ZSA9IGZhbHNlOwp2YXIgX19fX2VuYWJsZUxvYWRlckFjdGl2YXRlOwoKdmFyIHRpbWVyRGV0ZWN0b3IgPSAwOwpIZWxwZXIuZW5hYmxlTG9hZGVyID0gZnVuY3Rpb24gKF90aW1lckRldGVjdG9yKSB7CiAgICBpZihlbmFibGVMb2FkZXJBY3RpdmF0ZSB8fCB0aW1lckRldGVjdG9yID4gOTAwKXsKICAgICAgICByZXR1cm47CiAgICB9CiAgICB0aW1lckRldGVjdG9yID0gX3RpbWVyRGV0ZWN0b3IgIT0gdW5kZWZpbmVkID8gX3RpbWVyRGV0ZWN0b3IgOiAwOwogICAgZW5hYmxlTG9hZGVyQWN0aXZhdGUgPSB0cnVlOwogICAgX19fX2VuYWJsZUxvYWRlckFjdGl2YXRlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgiZGl2LmxvYWRlciIpLmNzcyh7ZGlzcGxheTogImJsb2NrIn0pOwogICAgICAgICQoImRpdi5sb2FkZXIiKS5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eTogMX0sIDEwMCk7CiAgICB9LCBIZWxwZXIuZGVmYXVsdFRpbWVMb2FkZXJUb0VuYWJsZSk7Cn07CgpIZWxwZXIuZGlzYWJsZUxvYWRlciA9IGZ1bmN0aW9uIChfdGltZXJEZXRlY3RvcikgewogICAgdGltZXJEZXRlY3RvciA9IF90aW1lckRldGVjdG9yICE9IHVuZGVmaW5lZCA/IF90aW1lckRldGVjdG9yIDogdGltZXJEZXRlY3RvcjsKICAgIGlmKHRpbWVyRGV0ZWN0b3IgPT0gOTk5KXsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBpZihlbmFibGVMb2FkZXJBY3RpdmF0ZSl7CiAgICAgICAgY2xlYXJUaW1lb3V0KF9fX19lbmFibGVMb2FkZXJBY3RpdmF0ZSk7CiAgICAgICAgJCgiZGl2LmxvYWRlciIpLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OiAwfSwgMzAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQodGhpcykuY3NzKHtkaXNwbGF5OiAibm9uZSJ9KTsKICAgICAgICAgICAgZW5hYmxlTG9hZGVyQWN0aXZhdGUgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0KfTsKCkhlbHBlci5mb3JBbGxQYWdlID0gZnVuY3Rpb24gKCkgewoKICAgIGNsZWFyVGltZW91dChIZWxwZXIuX19fX3Nob3dQYWdlKQogICAgSGVscGVyLl9fX19zaG93UGFnZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICQoIi53YWl0QmFja2dyb3VuZCIpLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OiAwLH0sIDEwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAkKHRoaXMpLmNzcyh7ZGlzcGxheTogIm5vbmUiLH0pOwogICAgICAgICAgICAkKCJkaXYubG9hZGVyIikuc3RvcCgpLmFuaW1hdGUoe29wYWNpdHk6IDB9LCA3MDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHtkaXNwbGF5OiAibm9uZSIsfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwgMTAwMCk7CiAgICBIZWxwZXIuc2Nyb2xsUGFnZVVwKCk7CiAgICBIZWxwZXIuVXBkYXRlUGFnZUZpeGVkKCk7CiAgICBzZXRUaW1lb3V0KEhlbHBlci5mb290ZXJIYW5kbGVyLCAyMDApOwp9CgoKSGVscGVyLmZvb3RlckhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CgogICAgaWYgKCQoImZvb3RlciIpLmhlaWdodCgpKSB7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGFkZGluZ1RvcCA9ICQod2luZG93KS53aWR0aCgpID4gNDgwID8gOTAgOiAwOwogICAgICAgICAgICBpZiAoZG9jdW1lbnQubG9jYXRpb24uaGFzaCA9PSAiIy8iIHx8IGRvY3VtZW50LmxvY2F0aW9uLmhhc2ggPT0gIiMvb3JkZXJQYXltZW50IikgewogICAgICAgICAgICAgICAgcGFkZGluZ1RvcCA9IDA7CiAgICAgICAgICAgICAgICAkKCJmb290ZXIiKS5jc3MoewogICAgICAgICAgICAgICAgICAgICJwb3NpdGlvbiI6ICJzdGF0aWMiLAogICAgICAgICAgICAgICAgICAgICJtYXJnaW4tdG9wIjogMAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICQoIiN2aXJ0dWFsRm9vdGVyIikuaGVpZ2h0KDApOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgICQoIiN2aXJ0dWFsRm9vdGVyIikuaGVpZ2h0KCQoImZvb3RlciIpLmhlaWdodCgpICsgcGFkZGluZ1RvcCk7CiAgICAgICAgICAgICQoIiN2aXJ0dWFsRm9vdGVyIikuY3NzKCd3aWR0aCcsICIxMDAlIik7CgogICAgICAgICAgICB2YXIgbWlzcyA9ICQod2luZG93KS5oZWlnaHQoKSAtICgkKCIjdmlydHVhbEZvb3RlciIpLm9mZnNldCgpLnRvcCArICQoIiN2aXJ0dWFsRm9vdGVyIikuaGVpZ2h0KCkpOwogICAgICAgICAgICAkKCJmb290ZXIiKS5jc3MoeyJwb3NpdGlvbiI6IG1pc3MgPiAwID8gImZpeGVkIiA6ICJhYnNvbHV0ZSJ9KQogICAgICAgIH0sIDIwMCkKICAgIH0KICAgIGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoSGVscGVyLmZvb3RlckhhbmRsZXIsIDIwMCkKICAgIH0KfQoKSGVscGVyLnNjcm9sbFBhZ2VVcCA9IGZ1bmN0aW9uICgpIHsKICAgICQoImJvZHksIGh0bWwiKS5zY3JvbGxUb3AoMCk7Cn0KCkhlbHBlci5wYXJzZUJvb2xlYW4gPSBmdW5jdGlvbiAoc3RyKSB7CiAgICByZXR1cm4gc3RyICE9IHVuZGVmaW5lZCAmJiBzdHIudG9Mb3dlckNhc2UoKSA9PSAndHJ1ZScKfQoKCkhlbHBlci5VcGRhdGVQYWdlRml4ZWQgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoZG9jdW1lbnQuVVJMLmluZGV4T2YoImNhdGVnb3J5IikgPT0gLTEpIHsKICAgICAgICAkKCcucGFnZXMnKS5yZW1vdmVDbGFzcygnZml4ZWQnKTsKICAgICAgICAkKCcuc3RpY2t5JykucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7CiAgICB9CiAgICBwYWdlc1Bvc3NpdGlvbiA9IHN0YXJ0UG9zc2l0aW9uOwogICAgc3RpY2t5UG9zc2l0aW9uID0gc3RhcnRQb3NzaXRpb247CiAgICBIZWxwZXIuY2hlY2tQYWdlUG9zc2l0aW9ucygpCn07CgoKSGVscGVyLmdldFJhbmRvbSA9IGZ1bmN0aW9uIChsZW5ndGgpIHsKICAgIHZhciByYW5WYWwgPSAnJzsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICByYW5WYWwgKz0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDkpICsgMSkKICAgIH0KICAgIHJldHVybiByYW5WYWw7Cn0KCkhlbHBlci5nZXRNb250aEluWWVhckZvck1hc3RlckNyZWRpdCA9IGZ1bmN0aW9uICh5ZWFyLCBtb250aHMpIHsKICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgIGlmIChkYXRlLmdldEZ1bGxZZWFyKCkgPT0geWVhcikgewogICAgICAgIHZhciBuZXdfYXJyYXkgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gZGF0ZS5nZXRNb250aCgpICsgMTsgaSA8PSAxMjsgaSsrKSB7CiAgICAgICAgICAgIG5ld19hcnJheS5wdXNoKGkgPCAxMCA/ICIwIiArIGkgOiBpICsgIiIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gWyIwMSIsICIwMiIsICIwMyIsICIwNCIsICIwNSIsICIwNiIsICIwNyIsICIwOCIsICIwOSIsICIxMCIsICIxMSIsICIxMiJdOwogICAgfQogICAgaWYgKG1vbnRocy5sZW5ndGggIT0gMTIpIHsKICAgICAgICByZXR1cm4gWyIwMSIsICIwMiIsICIwMyIsICIwNCIsICIwNSIsICIwNiIsICIwNyIsICIwOCIsICIwOSIsICIxMCIsICIxMSIsICIxMiJdOwogICAgfQogICAgcmV0dXJuIG51bGw7Cn0KCkhlbHBlci5jaGVja1BhZ2VQb3NzaXRpb25zID0gZnVuY3Rpb24gKCkgewoKICAgIGlmICgkKCcucGFnZXMnKS5sZW5ndGggPiAwKSB7CgogICAgICAgIHZhciBzY3JvbGxUb3AgPSAkKCdib2R5Jykuc2Nyb2xsVG9wKCkgPiAwID8gJCgnYm9keScpLnNjcm9sbFRvcCgpIDogJCgnaHRtbCcpLnNjcm9sbFRvcCgpOwoKICAgICAgICBpZiAocGFnZXNQb3NzaXRpb24gPCBzY3JvbGxUb3AgKyAkKCdoZWFkZXInKS5oZWlnaHQoKSkgewogICAgICAgICAgICAkKCcucGFnZXMnKS5hZGRDbGFzcygnZml4ZWQnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHBhZ2VzUG9zc2l0aW9uID0gJCgnLnBhZ2VzJykub2Zmc2V0KCkudG9wOwogICAgICAgICAgICAkKCcucGFnZXMnKS5yZW1vdmVDbGFzcygnZml4ZWQnKTsKICAgICAgICB9CiAgICB9CgogICAgaWYgKCQoJy5zdGlja3knKS5sZW5ndGggPiAwKSB7CiAgICAgICAgaWYgKHN0aWNreVBvc3NpdGlvbiA8IHNjcm9sbFRvcAogICAgICAgICAgICArIDEwMCArICgkKCcucGFnZXMnKS5sZW5ndGggPiAwKSA/ICQoJy5wYWdlcycpLmhlaWdodCgpIDogMCkgewogICAgICAgICAgICAkKCcuc3RpY2t5JykuYWRkQ2xhc3MoJ2ZpeGVkJyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBzdGlja3lQb3NzaXRpb24gPSAkKCcuc3RpY2t5Jykub2Zmc2V0KCkudG9wOwogICAgICAgICAgICAkKCcuc3RpY2t5JykucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7CiAgICAgICAgfQogICAgfQp9CgpIZWxwZXIubW9iaWxlU2VjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CgogICAgaWYgKCQoIiNtb2JpbGUtc2VjdGlvbiIpLmNzcygibGVmdCIpID09ICIwcHgiKSB7CiAgICAgICAgJCgiLm1vYmlsZVRpdGxlIC5taW5pLXRpdGxlIikuZmFkZU91dCgpOwogICAgICAgICQoIi5tb2JpbGVUaXRsZSAubWluaS10aXRsZS1oZWxwIikuZmFkZU91dCgpOwogICAgfQogICAgJCgiI21vYmlsZS1zZWN0aW9uIikuYW5pbWF0ZSh7CiAgICAgICAgbGVmdDogJCgiI21vYmlsZS1zZWN0aW9uIikuY3NzKCJsZWZ0IikgIT0gIjBweCIgPyAiMHB4IiA6ICItIiArIEhlbHBlci5tb2JpbGVfc2VjdGlvbl9tb3ZlZAogICAgfSwgMjAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgiLm1vYmlsZVRpdGxlIikuY3NzKCdsZWZ0JywgJCh0aGlzKS53aWR0aCgpKTsKICAgIH0pOwp9CgpIZWxwZXIubW9iaWxlU2VjdGlvbkNsb3NlID0gZnVuY3Rpb24gKCkgewoKICAgICQoIiNtb2JpbGUtc2VjdGlvbiIpLnN0b3AoKS5hbmltYXRlKHsKICAgICAgICBsZWZ0OiAiLSIgKyBIZWxwZXIubW9iaWxlX3NlY3Rpb25fbW92ZWQKICAgIH0sIDIwMCk7CiAgICAkKCIjbG9naW5Nb2JpbGVNaW5pVGl0bGUiKS5mYWRlT3V0KCk7CiAgICAkKCIjaGVscE1vYmlsZU1pbmlUaXRsZSIpLmZhZGVPdXQoKTsKfQoKSGVscGVyLnNvcnRBcnJheUJ5QWJjID0gZnVuY3Rpb24gKGFycikgewogICAgcmV0dXJuIGFyci5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEgPT0gYiA/IDAgOiBhIDwgYiA/IC0xIDogMTsKICAgIH0pOwp9CgpIZWxwZXIuc29ydEF0dHJpYnV0ZXNCeU5hbWUgPSBmdW5jdGlvbiAoYXR0cnMpIHsKICAgIHJldHVybiBhdHRycy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEuYXR0cmlidXRlTmFtZSA9PSBiLmF0dHJpYnV0ZU5hbWUgPyAwIDogYS5hdHRyaWJ1dGVOYW1lIDwgYi5hdHRyaWJ1dGVOYW1lID8gLTEgOiAxOwogICAgfSk7Cn0KCkhlbHBlci5zb3J0QXJyYXlCeUNvbG9yTmFtZSA9IGZ1bmN0aW9uIChjb2xvcnMpIHsKICAgIHJldHVybiBjb2xvcnMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhLm5hbWUgPT0gYi5uYW1lID8gMCA6IGEubmFtZSA8IGIubmFtZSA/IC0xIDogMTsKICAgIH0pOwp9CgoKdmFyIE1haW4gPSBNYWluIHx8IHt9OwoKTWFpbi5hZGRBbmltUGxhY2Vob2xkZXJFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkgewp9CgoKJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewoKICAgICQod2luZG93KS5vbih7CiAgICAgICAgcmVzaXplOiBfcmVzaXplLAogICAgICAgIHNjcm9sbDogX3Njcm9sbCwKICAgIH0pOwoKICAgIGZ1bmN0aW9uIF9zY3JvbGwoKSB7CiAgICAgICAgSGVscGVyLmNoZWNrUGFnZVBvc3NpdGlvbnMoKTsKICAgICAgICBfcmVzaXplKCk7CiAgICB9CgogICAgX3Jlc2l6ZSgpOwogICAgZnVuY3Rpb24gX3Jlc2l6ZSgpIHsKICAgICAgICAkKCIubWluaS10aXRsZSIpLmNzcygiZGlzcGxheSIsICJub25lIik7CiAgICAgICAgJCgiLm1pbmktdGl0bGUtaGVscCIpLmNzcygiZGlzcGxheSIsICJub25lIik7CiAgICAgICAgSGVscGVyLm1vYmlsZVNlY3Rpb25DbG9zZSgpOwogICAgfQp9KTsKCgpkZWZpbmUoIm1haW5TY3JpcHQiLCBbImpxdWVyeSJdLCBmdW5jdGlvbigpe30pOwoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTMvMTIvMjAxNS4KICovCgoKdmFyIExvZ2VyID0gTG9nZXIgPyBMb2dlciA6IGZ1bmN0aW9uICgpIHsKfTsKCgpMb2dlci5QYXJhbXMgPSBmdW5jdGlvbiAocGFyYW1zLCB1cmwpIHsKICAgIHNwYWNlcygzKTsKICAgIGNvbnNvbGUubG9nKCdQYXJhbSB0byBwYXNzIHRvICcgKyB1cmwpOwogICAgaWYgKHBhcmFtcykgewogICAgICAgIGlmIChwYXJhbXMub3JkZXJQYXltZW50SW5mb3JtYXRpb24gJiYgcGFyYW1zLm9yZGVyUGF5bWVudEluZm9ybWF0aW9uLlRyYW5zYWN0aW9uX1NhZmVQYXlfUGFzc3dvcmQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coewogICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX0FjY291bnROdW1iZXIiOiBwYXJhbXMuVHJhbnNhY3Rpb25fQWNjb3VudE51bWJlciwKICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9DdXJyZW5jeSI6IHBhcmFtcy5UcmFuc2FjdGlvbl9DdXJyZW5jeSwKICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9DdXN0b21lclBob25lIjogcGFyYW1zLlRyYW5zYWN0aW9uX0N1c3RvbWVyUGhvbmUsCiAgICAgICAgICAgICAgICAiVHJhbnNhY3Rpb25fTWFzdGVyQ3JlZGl0X0NWVk51bWJlciI6IHBhcmFtcy5UcmFuc2FjdGlvbl9NYXN0ZXJDcmVkaXRfQ1ZWTnVtYmVyLAogICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX01hc3RlckNyZWRpdF9DYXJkTnVtYmVyIjogcGFyYW1zLlRyYW5zYWN0aW9uX01hc3RlckNyZWRpdF9DYXJkTnVtYmVyLAogICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX01hc3RlckNyZWRpdF9DdXN0b21lck5hbWUiOiBwYXJhbXMuVHJhbnNhY3Rpb25fTWFzdGVyQ3JlZGl0X0N1c3RvbWVyTmFtZSwKICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9NYXN0ZXJDcmVkaXRfRXhwaXJhdGlvbkRhdGUiOiBwYXJhbXMuVHJhbnNhY3Rpb25fTWFzdGVyQ3JlZGl0X0V4cGlyYXRpb25EYXRlLAogICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX1BheW1lbnRNZXRob2QiOiBwYXJhbXMuVHJhbnNhY3Rpb25fUGF5bWVudE1ldGhvZCwKICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9SZWZlcmVuY2VOdW1iZXIiOiBwYXJhbXMuVHJhbnNhY3Rpb25fUmVmZXJlbmNlTnVtYmVyLAogICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX1NhZmVQYXlfVXNlck5hbWUiOiBwYXJhbXMuVHJhbnNhY3Rpb25fU2FmZVBheV9Vc2VyTmFtZSwKICAgICAgICAgICAgICAgICJUcmFuc2FjdGlvbl9UcmFuc2FjdGlvbkRhdGUiOiBwYXJhbXMuVHJhbnNhY3Rpb25fVHJhbnNhY3Rpb25EYXRlLAogICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uX1R5cGUiOiBwYXJhbXMuVHJhbnNhY3Rpb25fVHlwZQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAocGFyYW1zLnNhZmVQYXlQYXNzd29yZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyh7c2FmZVBheVVzZXJuYW1lOiBwYXJhbXMuc2FmZVBheVVzZXJuYW1lLCByZWZlcmVuY2VJZDogcGFyYW1zLnJlZmVyZW5jZUlkfSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHBhcmFtcy5wYXNzd29yZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyh7CiAgICAgICAgICAgICAgICAiYWNjb3VudFR5cGUiOiBwYXJhbXMuYWNjb3VudFR5cGUsICJhZGRyZXNzIjogcGFyYW1zLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAiYWxsb3dPZmZlcnNQcm9tb3Rpb24iOiBwYXJhbXMuYWxsb3dPZmZlcnNQcm9tb3Rpb24sICJjaXR5TmFtZSI6IHBhcmFtcy5jaXR5TmFtZSwKICAgICAgICAgICAgICAgICJjb3VudHJ5SWQiOiBwYXJhbXMuY291bnRyeUlkLCAiZW1haWwiOiBwYXJhbXMuZW1haWwsCiAgICAgICAgICAgICAgICAiZmlyc3ROYW1lIjogcGFyYW1zLmZpcnN0TmFtZSwgImxhc3ROYW1lIjogcGFyYW1zLmxhc3ROYW1lLAogICAgICAgICAgICAgICAgImxvZ2luTmFtZSI6IHBhcmFtcy5sb2dpbk5hbWUsICJwaG9uZU51bWJlciI6IHBhcmFtcy5waG9uZU51bWJlciwKICAgICAgICAgICAgICAgICJzdGF0ZVByb3ZpbmNlIjogcGFyYW1zLnN0YXRlUHJvdmluY2UsICJ6aXBjb2RlIjogcGFyYW1zLnppcGNvZGUsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocGFyYW1zKTsKICAgICAgICB9CiAgICB9CiAgICBzcGFjZXMoMSk7Cn07CkxvZ2VyLkV4dHJhY3QgPSBmdW5jdGlvbiAoZmlsZSwgb2JqLCBwYXRocykgewogICAgc3BhY2VzKDMpOwogICAgbGluZXMoMik7CiAgICBjb25zb2xlLmxvZygnRXh0cmFjdGVkIGZpbGU6ICcgKyBmaWxlKTsKICAgIHNwYWNlcygxKTsKICAgIGNvbnNvbGUubG9nKCJSZWNpZXZlOiAiKTsKICAgIGNvbnNvbGUubG9nKG9iaik7CiAgICBzcGFjZXMoMSk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc29sZS5sb2cocGF0aHNbaV0pCiAgICB9CiAgICBzcGFjZXMoMSk7CiAgICBsaW5lcygyKTsKICAgIHNwYWNlcygzKTsKfTsKCkxvZ2VyLkNhbGxpbmdXU0RMID0gZnVuY3Rpb24gKG9iaikgewogICAgc3BhY2VzKDEpOwogICAgY29uc29sZS5sb2coIj09PT09PT09PT09PT09PT09PT09PT09PSAgIFJlYWRpbmcgd3NkbCAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikKICAgIGNvbnNvbGUubG9nKCJ1cmw6ICIgKyBvYmoucGF0aCk7CiAgICBjb25zb2xlLmxvZygibWV0aG9kOiAiICsgb2JqLm1ldGhvZCk7Cn07CgpMb2dlci5DYWxsaW5nID0gZnVuY3Rpb24gKHN0cikgewogICAgc3BhY2VzKDEpOwogICAgY29uc29sZS5sb2coIj09PT09PT09PT09PT09PT09PT09PT09PT09PSAgIENhbGxpbmcgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikKICAgIGNvbnNvbGUubG9nKCJQYXRoOiAiICsgc3RyKTsKfTsKCkxvZ2VyLlJlY2VpdmVkID0gZnVuY3Rpb24gKHN0cikgewogICAgY29uc29sZS5sb2coIj09PT09PT09PT09PT09PT09PT09PT09PT09PT0gIFJlY2VpdmVkICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikKICAgIGNvbnNvbGUubG9nKHN0cikKICAgIHNwYWNlcygxKTsKfTsKCmZ1bmN0aW9uIHNwYWNlcyhudW0pIHsKICAgIHZhciB2ID0gIiIKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspIHsKICAgICAgICB2ICs9ICIgIjsKICAgICAgICBjb25zb2xlLmxvZygiIiArIHYpCiAgICB9Cn0KCmZ1bmN0aW9uIGxpbmVzKG51bSkgewogICAgdmFyIHYgPSAiIgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKykgewogICAgICAgIHYgKz0gIiAiOwogICAgICAgIGNvbnNvbGUubG9nKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSIgKyB2KQogICAgfQp9CgoKdmFyIHNlcnZpY2VzX3Byb3BlcnRpZXMgPSBbXQoKLy92YXIgY2F0YWxvZ0tleSA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvY2F0YWxvZyI7Ci8vdmFyIG9yZGVyS2V5ID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9vcmRlciI7Ci8vdmFyIGFjY291bnRLZXkgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FjY291bnQiOwovL3ZhciBzZXJ2aWNlS2V5ID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9zZXJ2aWNlIjsKLy92YXIgd3NkbFBhdGggPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FjY291bnRzZXJ2aWNlJzsKdmFyIGNhdGFsb2dLZXkgPSBzZXJ2ZXJLZXkgPSBvcmRlcktleSA9IHdzZGxQYXRoID0gInVuZGVmaW5lZCI7Ci8qYWNjb3VudEtleSA9Ki8vKiBzZXJ2aWNlS2V5ID0qLwoKdmFyIHNlcnZlciA9IHsKICAgIG5hbWVzcGFjZVVSTDogJ2NvbS5hZHZhbnRhZ2Uub25saW5lLnN0b3JlLmFjY291bnRzZXJ2aWNlJywKCiAgICBoYXZlSW50ZXJuZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gc2VydmVyS2V5LmluZGV4T2YoImxvY2FsaG9zdCIpOwogICAgfSwKCiAgICBnZXRLZXk6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gc2VydmVyS2V5OwogICAgfSwKICAgIHNldEtleTogZnVuY3Rpb24gKF9zZXJ2ZXJLZXkpIHsKICAgICAgICBzZXJ2ZXJLZXkgPSBfc2VydmVyS2V5OwogICAgfSwKICAgIHNldENhdGFsb2dLZXk6IGZ1bmN0aW9uIChfY2F0YWxvZ0tleSkgewogICAgICAgIGNhdGFsb2dLZXkgPSBfY2F0YWxvZ0tleTsKICAgIH0sCiAgICBzZXRPcmRlcktleTogZnVuY3Rpb24gKF9vcmRlcktleSkgewogICAgICAgIG9yZGVyS2V5ID0gX29yZGVyS2V5OwogICAgfSwKICAgIHNldFdzZGxQYXRoOiBmdW5jdGlvbiAoX3dzZGxQYXRoKSB7CiAgICAgICAgd3NkbFBhdGggPSBfd3NkbFBhdGg7CgogICAgICAgIGNvbnNvbGUubG9nKCJGaWxlIGV4dHJhY3RlZDogIik7CiAgICAgICAgTG9nZXIuRXh0cmFjdCgiIiwgIiIsIFsKICAgICAgICAgICAgJ0NhdGFsb2cgcGF0aDogJyArIGNhdGFsb2dLZXksCiAgICAgICAgICAgICdPcmRlciBwYXRoOiAnICsgb3JkZXJLZXksCiAgICAgICAgICAgIC8vJ0FjY291bnQgcGF0aDogJyArIGFjY291bnRLZXksCiAgICAgICAgICAgIC8vJ1NlcnZpY2UgcGF0aDogJyArIHNlcnZpY2VLZXksCiAgICAgICAgICAgICdBY2NvdW50IFdTREwgKFdlYiBTZXJ2aWNlcyBEZXNjcmlwdGlvbiBMYW5ndWFnZSkgcGF0aDogJyArIHdzZGxQYXRoLAogICAgICAgIF0pOwogICAgfSwKCiAgICBjYXRhbG9nOiB7CgogICAgICAgIGdldEtleTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gY2F0YWxvZ0tleTsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBudkhhbmRsZXI6IGZ1bmN0aW9uIChjb2RlKSB7CiAgICAgICAgICAgIHZhciBwYXJhbVRvUmV0dXJuID0gY2F0YWxvZ0tleSArICJwcm9kdWN0cy9pZC8iICsgY29kZTsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0UG9wdWxhclByb2R1Y3RzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBwYXJhbVRvUmV0dXJuID0gImFwcC90ZW1wRmlsZXMvcG9wdWxhclByb2R1Y3RzLmpzb24iOwogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBnZXRBbGxEYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBwYXJhbVRvUmV0dXJuID0gY2F0YWxvZ0tleSArICJjYXRlZ29yaWVzL2FsbF9kYXRhIjsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0TW9zdFBvcHVsYXJDb21tZW50czogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGFyYW1Ub1JldHVybiA9IGNhdGFsb2dLZXkgKyAiTW9zdFBvcHVsYXJDb21tZW50cyI7CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmcocGFyYW1Ub1JldHVybik7CiAgICAgICAgICAgIHJldHVybiBwYXJhbVRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIGdldENhdGVnb3JpZXM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBjYXRhbG9nS2V5ICsgImNhdGVnb3JpZXMiOwogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBnZXRDYXRlZ29yeUJ5SWQ6IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICB2YXIgcGFyYW1Ub1JldHVybiA9IGNhdGFsb2dLZXkgKyAiY2F0ZWdvcmllcy8iICsgaWQgKyAiL3Byb2R1Y3RzIjsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0RGVhbHM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBjYXRhbG9nS2V5ICsgImRlYWxzIjsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0RGVhbE9mVGhlRGF5OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBwYXJhbVRvUmV0dXJuID0gY2F0YWxvZ0tleSArICJkZWFscy9zZWFyY2g/ZGVhbE9mVGhlRGF5PXRydWUiOwogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBnZXRQcm9kdWN0czogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGFyYW1Ub1JldHVybiA9IGNhdGFsb2dLZXkgKyAicHJvZHVjdHMuanNvbiI7CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmcocGFyYW1Ub1JldHVybik7CiAgICAgICAgICAgIHJldHVybiBwYXJhbVRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIGdldFByb2R1Y3RCeUlkOiBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBjYXRhbG9nS2V5ICsgJ3Byb2R1Y3RzLycgKyBpZDsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0UHJvZHVjdHNCeVNlYXJjaDogZnVuY3Rpb24gKHdvcmQsIHF1YW50aXR5KSB7CiAgICAgICAgICAgIHZhciBwYXJhbVRvUmV0dXJuID0gY2F0YWxvZ0tleSArICJwcm9kdWN0cy9zZWFyY2g/bmFtZT0iICsgd29yZDsKICAgICAgICAgICAgaWYgKHF1YW50aXR5ID4gMCkgewogICAgICAgICAgICAgICAgcGFyYW1Ub1JldHVybiArPSAiJnF1YW50aXR5UGVyRWFjaENhdGVnb3J5PSIgKyBxdWFudGl0eTsKICAgICAgICAgICAgfQogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBnZXRBbGxDYXRlZ29yaWVzQXR0cmlidXRlczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGFyYW1Ub1JldHVybiA9IGNhdGFsb2dLZXkgKyAiY2F0ZWdvcmllcy9hdHRyaWJ1dGVzIjsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgc2VuZFN1cHBvcnRFbWFpbDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGFyYW1Ub1JldHVybiA9IGNhdGFsb2dLZXkgKyAic3VwcG9ydC9jb250YWN0X3VzL2VtYWlsIjsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0Q29uZmlndXJhdGlvbnM6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIHZhciBwYXJhbVRvUmV0dXJuID0gY2F0YWxvZ0tleSArICJEZW1vQXBwQ29uZmlnL3BhcmFtZXRlcnMvYnlfdG9vbC9BTEwiOwogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBnZXRBY2NvdW50Q29uZmlndXJhdGlvbjogZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgdmFyIHdzZGxUb1JldHVybiA9IHsKICAgICAgICAgICAgICAgIHBhdGg6IHdzZGxQYXRoLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnR2V0QWNjb3VudENvbmZpZ3VyYXRpb25SZXF1ZXN0JywKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiAiR2V0QWNjb3VudENvbmZpZ3VyYXRpb25SZXNwb25zZSIsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgTG9nZXIuQ2FsbGluZ1dTREwod3NkbFRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHdzZGxUb1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKCiAgICB9CiAgICAsCiAgICBvcmRlcjogewoKICAgICAgICB1cGRhdGVVc2VyQ2FydDogZnVuY3Rpb24gKHVzZXJJZCkgewogICAgICAgICAgICB2YXIgcGFyYW1Ub1JldHVybiA9IG9yZGVyS2V5ICsgImNhcnRzLyIgKyB1c2VySWQ7CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmcocGFyYW1Ub1JldHVybik7CiAgICAgICAgICAgIHJldHVybiBwYXJhbVRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIHJlbW92ZVByb2R1Y3RUb1VzZXI6IGZ1bmN0aW9uICh1c2VySWQsIHByb2R1Y3RJZCwgY29sb3IpIHsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBvcmRlcktleSArICJjYXJ0cy8iICsgdXNlcklkICsKICAgICAgICAgICAgICAgICIvcHJvZHVjdC8iICsgcHJvZHVjdElkICsKICAgICAgICAgICAgICAgICIvY29sb3IvIiArIGNvbG9yOwogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICB1cGRhdGVQcm9kdWN0VG9Vc2VyOiBmdW5jdGlvbiAodXNlcklkLCBwcm9kdWN0SWQsIGNvbG9yLCBxdWFudGl0eSwgb2xkQ29sb3IpIHsKICAgICAgICAgICAgdmFyIHBhdGggPSBzZXJ2ZXIub3JkZXIuYWRkUHJvZHVjdFRvVXNlcih1c2VySWQsIHByb2R1Y3RJZCwgb2xkQ29sb3IsIHF1YW50aXR5KTsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBjb2xvciAhPSBvbGRDb2xvciA/IHBhdGggKz0gIiZuZXdfY29sb3I9IiArIGNvbG9yIDogcGF0aDsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgYWRkUHJvZHVjdFRvVXNlcjogZnVuY3Rpb24gKHVzZXJJZCwgcHJvZHVjdElkLCBjb2xvciwgcXVhbnRpdHksIGhhc1dhcnJhbnR5KSB7CiAgICAgICAgICAgIHZhciBwYXJhbVRvUmV0dXJuID0gb3JkZXJLZXkgKyAiY2FydHMvIiArIHVzZXJJZCArICIvcHJvZHVjdC8iICsgcHJvZHVjdElkICsKICAgICAgICAgICAgICAgICIvY29sb3IvIiArIGNvbG9yICsgIj9xdWFudGl0eT0iICsgcXVhbnRpdHkgKyAoaGFzV2FycmFudHkgIT0gbnVsbCAmJiBoYXNXYXJyYW50eSA/ICImaGFzV2FycmFudHk9dHJ1ZSIgOiAiIik7CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmcocGFyYW1Ub1JldHVybik7CiAgICAgICAgICAgIHJldHVybiBwYXJhbVRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIGxvYWRDYXJ0UHJvZHVjdHM6IGZ1bmN0aW9uICh1c2VySWQpIHsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBvcmRlcktleSArICJjYXJ0cy8iICsgdXNlcklkOwogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBjbGVhckNhcnQ6IGZ1bmN0aW9uICh1c2VySWQpIHsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBvcmRlcktleSArICJjYXJ0cy8iICsgdXNlcklkOwogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBnZXRTaGlwcGluZ0Nvc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBvcmRlcktleSArICJzaGlwcGluZ2Nvc3QvIjsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgc2FmZVBheTogZnVuY3Rpb24gKHVzZXJJZCkgewoKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBvcmRlcktleSArICJvcmRlcnMvdXNlcnMvIiArIHVzZXJJZDsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgYWNjb3VudFVwZGF0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgd3NkbFRvUmV0dXJuID0gewogICAgICAgICAgICAgICAgcGF0aDogd3NkbFBhdGgsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdBY2NvdW50VXBkYXRlUmVxdWVzdCcsCiAgICAgICAgICAgICAgICByZXNwb25zZTogJ0FjY291bnRVcGRhdGVSZXNwb25zZScKICAgICAgICAgICAgfQogICAgICAgICAgICBMb2dlci5DYWxsaW5nV1NETCh3c2RsVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gd3NkbFRvUmV0dXJuOwogICAgICAgIH0sCgogICAgICAgIGRlbGV0ZU9yZGVyOiBmdW5jdGlvbihvcmRlciwgdXNlcklkKXsKICAgICAgICAgICAgdmFyIHBhcmFtVG9SZXR1cm4gPSBvcmRlcktleSArICAib3JkZXJzL2hpc3RvcnkvdXNlcnMvIiArIHVzZXJJZCArICIvIiArIG9yZGVyLm9yZGVyTnVtYmVyOwogICAgICAgICAgICBMb2dlci5DYWxsaW5nKHBhcmFtVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gcGFyYW1Ub1JldHVybjsKICAgICAgICB9LAoKICAgIH0KICAgICwKICAgIGFjY291bnQ6IHsKCiAgICAgICAgZ2V0T3JkZXJzOiBmdW5jdGlvbiAodXNlcklkKSB7CiAgICAgICAgICAgIHZhciBwYXJhbVRvUmV0dXJuID0gb3JkZXJLZXkgKyAib3JkZXJzL2hpc3RvcnkvbGluZXMvdXNlcnMvIiArIHVzZXJJZDsKICAgICAgICAgICAgTG9nZXIuQ2FsbGluZyhwYXJhbVRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0QWxsQ291bnRyaWVzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB3c2RsVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB3c2RsUGF0aCwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dldENvdW50cmllc1JlcXVlc3QnLAogICAgICAgICAgICAgICAgcmVzcG9uc2U6ICdHZXRDb3VudHJpZXNSZXNwb25zZScKICAgICAgICAgICAgfQogICAgICAgICAgICBMb2dlci5DYWxsaW5nV1NETCh3c2RsVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gd3NkbFRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB3c2RsVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB3c2RsUGF0aCwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0FjY291bnRDcmVhdGVSZXF1ZXN0JywKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiAnQWNjb3VudENyZWF0ZVJlc3BvbnNlJwogICAgICAgICAgICB9CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmdXU0RMKHdzZGxUb1JldHVybik7CiAgICAgICAgICAgIHJldHVybiB3c2RsVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgbG9naW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHdzZGxUb1JldHVybiA9IHsKICAgICAgICAgICAgICAgIHBhdGg6IHdzZGxQYXRoLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnQWNjb3VudExvZ2luUmVxdWVzdCcsCiAgICAgICAgICAgICAgICByZXNwb25zZTogJ0FjY291bnRMb2dpblJlc3BvbnNlJwogICAgICAgICAgICB9CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmdXU0RMKHdzZGxUb1JldHVybik7CiAgICAgICAgICAgIHJldHVybiB3c2RsVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0QWNjb3VudEJ5SWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHdzZGxUb1JldHVybiA9IHsKICAgICAgICAgICAgICAgIHBhdGg6IHdzZGxQYXRoLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnR2V0QWNjb3VudEJ5SWRSZXF1ZXN0JywKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiAnR2V0QWNjb3VudEJ5SWRSZXNwb25zZScKICAgICAgICAgICAgfQogICAgICAgICAgICBMb2dlci5DYWxsaW5nV1NETCh3c2RsVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gd3NkbFRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIGdldEFjY291bnRCeUlkX25ldzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgd3NkbFRvUmV0dXJuID0gewogICAgICAgICAgICAgICAgcGF0aDogd3NkbFBhdGgsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHZXRBY2NvdW50QnlJZE5ld1JlcXVlc3QnLAogICAgICAgICAgICAgICAgcmVzcG9uc2U6ICdHZXRBY2NvdW50QnlJZE5ld1Jlc3BvbnNlJwogICAgICAgICAgICB9CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmdXU0RMKHdzZGxUb1JldHVybik7CiAgICAgICAgICAgIHJldHVybiB3c2RsVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgZ2V0QWNjb3VudFBheW1lbnRQcmVmZXJlbmNlczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgd3NkbFRvUmV0dXJuID0gewogICAgICAgICAgICAgICAgcGF0aDogd3NkbFBhdGgsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHZXRBY2NvdW50UGF5bWVudFByZWZlcmVuY2VzUmVxdWVzdCcsCiAgICAgICAgICAgICAgICByZXNwb25zZTogJ1BheW1lbnRQcmVmZXJlbmNlcycKICAgICAgICAgICAgfQogICAgICAgICAgICBMb2dlci5DYWxsaW5nV1NETCh3c2RsVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gd3NkbFRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIGdldEFkZHJlc3Nlc0J5QWNjb3VudElkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB3c2RsVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB3c2RsUGF0aCwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dldEFkZHJlc3Nlc0J5QWNjb3VudElkUmVxdWVzdCcsCiAgICAgICAgICAgICAgICByZXNwb25zZTogJ0dldEFkZHJlc3Nlc0J5QWNjb3VudElkUmVzcG9uc2UnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgTG9nZXIuQ2FsbGluZ1dTREwod3NkbFRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHdzZGxUb1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAogICAgICAgIGRlbGV0ZUFjY291bnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHdzZGxUb1JldHVybiA9IHsKICAgICAgICAgICAgICAgIHBhdGg6IHdzZGxQYXRoLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnQWNjb3VudFBlcm1hbmVudERlbGV0ZVJlcXVlc3QnLAogICAgICAgICAgICAgICAgcmVzcG9uc2U6ICdhY2NvdW50UGVybWFuZW50RGVsZXRlUmVzcG9uc2UnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgTG9nZXIuQ2FsbGluZ1dTREwod3NkbFRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHdzZGxUb1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBhY2NvdW50VXBkYXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB3c2RsVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB3c2RsUGF0aCwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0FjY291bnRVcGRhdGVSZXF1ZXN0JywKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiAnQWNjb3VudFVwZGF0ZVJlc3BvbnNlJwogICAgICAgICAgICB9CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmdXU0RMKHdzZGxUb1JldHVybik7CiAgICAgICAgICAgIHJldHVybiB3c2RsVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgdXBkYXRlTWFzdGVyQ3JlZGl0TWV0aG9kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB3c2RsVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB3c2RsUGF0aCwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1VwZGF0ZU1hc3RlckNyZWRpdE1ldGhvZFJlcXVlc3QnLAogICAgICAgICAgICAgICAgcmVzcG9uc2U6ICdVcGRhdGVNYXN0ZXJDcmVkaXRNZXRob2RSZXNwb25zZScKICAgICAgICAgICAgfQogICAgICAgICAgICBMb2dlci5DYWxsaW5nV1NETCh3c2RsVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gd3NkbFRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIGFkZE1hc3RlckNyZWRpdE1ldGhvZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgd3NkbFRvUmV0dXJuID0gewogICAgICAgICAgICAgICAgcGF0aDogd3NkbFBhdGgsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdBZGRNYXN0ZXJDcmVkaXRNZXRob2RSZXF1ZXN0JywKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiAnUGF5bWVudFByZWZlcmVuY2VzU3RhdHVzUmVzcG9uc2UnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgTG9nZXIuQ2FsbGluZ1dTREwod3NkbFRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHdzZGxUb1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICB1cGRhdGVTYWZlUGF5TWV0aG9kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB3c2RsVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB3c2RsUGF0aCwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1VwZGF0ZVNhZmVQYXlNZXRob2RSZXF1ZXN0JywKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiAnVXBkYXRlU2FmZVBheU1ldGhvZFJlc3BvbnNlJwogICAgICAgICAgICB9CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmdXU0RMKHdzZGxUb1JldHVybik7CiAgICAgICAgICAgIHJldHVybiB3c2RsVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgYWRkU2FmZVBheU1ldGhvZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgd3NkbFRvUmV0dXJuID0gewogICAgICAgICAgICAgICAgcGF0aDogd3NkbFBhdGgsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdBZGRTYWZlUGF5TWV0aG9kUmVxdWVzdCcsCiAgICAgICAgICAgICAgICByZXNwb25zZTogJ0FkZFNhZmVQYXlNZXRob2RSZXNwb25zZScKICAgICAgICAgICAgfQogICAgICAgICAgICBMb2dlci5DYWxsaW5nV1NETCh3c2RsVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gd3NkbFRvUmV0dXJuOwogICAgICAgIH0KICAgICAgICAsCgogICAgICAgIGNoYW5nZVBhc3N3b3JkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB3c2RsVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB3c2RsUGF0aCwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0NoYW5nZVBhc3N3b3JkUmVxdWVzdCcsCiAgICAgICAgICAgICAgICByZXNwb25zZTogJ0NoYW5nZVBhc3N3b3JkUmVzcG9uc2UnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgTG9nZXIuQ2FsbGluZ1dTREwod3NkbFRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuIHdzZGxUb1JldHVybjsKICAgICAgICB9CiAgICAgICAgLAoKICAgICAgICBhY2NvdW50TG9nb3V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB3c2RsVG9SZXR1cm4gPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB3c2RsUGF0aCwKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0FjY291bnRMb2dvdXRSZXF1ZXN0JywKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiAnQWNjb3VudExvZ291dFJlc3BvbnNlJwogICAgICAgICAgICB9CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmdXU0RMKHdzZGxUb1JldHVybik7CiAgICAgICAgICAgIHJldHVybiB3c2RsVG9SZXR1cm47CiAgICAgICAgfQogICAgICAgICwKCiAgICAgICAgcGF5bWVudE1ldGhvZFVwZGF0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgd3NkbFRvUmV0dXJuID0gewogICAgICAgICAgICAgICAgcGF0aDogd3NkbFBhdGgsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQYXltZW50TWV0aG9kVXBkYXRlUmVxdWVzdCcsCiAgICAgICAgICAgICAgICByZXNwb25zZTogJ1BheW1lbnRNZXRob2RVcGRhdGVSZXNwb25zZScKICAgICAgICAgICAgfQogICAgICAgICAgICBMb2dlci5DYWxsaW5nV1NETCh3c2RsVG9SZXR1cm4pOwogICAgICAgICAgICByZXR1cm4gd3NkbFRvUmV0dXJuOwogICAgICAgIH0sCgogICAgICAgIGZhY2Vib29rTG9naW4gOiBmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgcGFyYW1Ub1JldHVybiA9IGNhdGFsb2dLZXkgKyAiZmFjZWJvb2tMb2dpbiI7CiAgICAgICAgICAgIExvZ2VyLkNhbGxpbmcocGFyYW1Ub1JldHVybik7CiAgICAgICAgICAgIHJldHVybiBwYXJhbVRvUmV0dXJuOwogICAgICAgIH0KICAgIH0KICAgICwKfQo7CmRlZmluZSgic2VydmVyIiwgZnVuY3Rpb24oKXt9KTsKCi8qISBub3Vpc2xpZGVyIC0gOC4yLjEgLSAyMDE1LTEyLTAyIDIxOjQzOjE0ICovCgooZnVuY3Rpb24gKGZhY3RvcnkpIHsKCgkvKgoKICAgIGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkgewoKICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuCiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTsKCiAgICB9IGVsc2UgaWYgKCB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgKSB7CgogICAgICAgIC8vIE5vZGUvQ29tbW9uSlMKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCiAgICB9IGVsc2UgewoKICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMKICAgICAqLwoJd2luZG93Lm5vVWlTbGlkZXIgPSBmYWN0b3J5KCk7CiAgICAvL30KCn0KCihmdW5jdGlvbiggKXsKCgkndXNlIHN0cmljdCc7CgoKCS8vIFJlbW92ZXMgZHVwbGljYXRlcyBmcm9tIGFuIGFycmF5LgoJZnVuY3Rpb24gdW5pcXVlKGFycmF5KSB7CgkJcmV0dXJuIGFycmF5LmZpbHRlcihmdW5jdGlvbihhKXsKCQkJcmV0dXJuICF0aGlzW2FdID8gdGhpc1thXSA9IHRydWUgOiBmYWxzZTsKCQl9LCB7fSk7Cgl9CgoJLy8gUm91bmQgYSB2YWx1ZSB0byB0aGUgY2xvc2VzdCAndG8nLgoJZnVuY3Rpb24gY2xvc2VzdCAoIHZhbHVlLCB0byApIHsKCQlyZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIHRvKSAqIHRvOwoJfQoKCS8vIEN1cnJlbnQgcG9zaXRpb24gb2YgYW4gZWxlbWVudCByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnQuCglmdW5jdGlvbiBvZmZzZXQgKCBlbGVtICkgewoKCXZhciByZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwKCQlkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQsCgkJZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQsCgkJcGFnZU9mZnNldCA9IGdldFBhZ2VPZmZzZXQoKTsKCgkJLy8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGNvbnRhaW5zIGxlZnQgc2Nyb2xsIGluIENocm9tZSBvbiBBbmRyb2lkLgoJCS8vIEkgaGF2ZW4ndCBmb3VuZCBhIGZlYXR1cmUgZGV0ZWN0aW9uIHRoYXQgcHJvdmVzIHRoaXMuIFdvcnN0IGNhc2UKCQkvLyBzY2VuYXJpbyBvbiBtaXMtbWF0Y2g6IHRoZSAndGFwJyBmZWF0dXJlIG9uIGhvcml6b250YWwgc2xpZGVycyBicmVha3MuCgkJaWYgKCAvd2Via2l0LipDaHJvbWUuKk1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgKSB7CgkJCXBhZ2VPZmZzZXQueCA9IDA7CgkJfQoKCQlyZXR1cm4gewoJCQl0b3A6IHJlY3QudG9wICsgcGFnZU9mZnNldC55IC0gZG9jRWxlbS5jbGllbnRUb3AsCgkJCWxlZnQ6IHJlY3QubGVmdCArIHBhZ2VPZmZzZXQueCAtIGRvY0VsZW0uY2xpZW50TGVmdAoJCX07Cgl9CgoJLy8gQ2hlY2tzIHdoZXRoZXIgYSB2YWx1ZSBpcyBudW1lcmljYWwuCglmdW5jdGlvbiBpc051bWVyaWMgKCBhICkgewoJCXJldHVybiB0eXBlb2YgYSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKCBhICkgJiYgaXNGaW5pdGUoIGEgKTsKCX0KCgkvLyBSb3VuZHMgYSBudW1iZXIgdG8gNyBzdXBwb3J0ZWQgZGVjaW1hbHMuCglmdW5jdGlvbiBhY2N1cmF0ZU51bWJlciggbnVtYmVyICkgewoJCXZhciBwID0gTWF0aC5wb3coMTAsIDcpOwoJCXJldHVybiBOdW1iZXIoKE1hdGgucm91bmQobnVtYmVyKnApL3ApLnRvRml4ZWQoNykpOwoJfQoKCS8vIFNldHMgYSBjbGFzcyBhbmQgcmVtb3ZlcyBpdCBhZnRlciBbZHVyYXRpb25dIG1zLgoJZnVuY3Rpb24gYWRkQ2xhc3NGb3IgKCBlbGVtZW50LCBjbGFzc05hbWUsIGR1cmF0aW9uICkgewoJCWFkZENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7CgkJc2V0VGltZW91dChmdW5jdGlvbigpewoJCQlyZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpOwoJCX0sIGR1cmF0aW9uKTsKCX0KCgkvLyBMaW1pdHMgYSB2YWx1ZSB0byAwIC0gMTAwCglmdW5jdGlvbiBsaW1pdCAoIGEgKSB7CgkJcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKGEsIDEwMCksIDApOwoJfQoKCS8vIFdyYXBzIGEgdmFyaWFibGUgYXMgYW4gYXJyYXksIGlmIGl0IGlzbid0IG9uZSB5ZXQuCglmdW5jdGlvbiBhc0FycmF5ICggYSApIHsKCQlyZXR1cm4gQXJyYXkuaXNBcnJheShhKSA/IGEgOiBbYV07Cgl9CgoJLy8gQ291bnRzIGRlY2ltYWxzCglmdW5jdGlvbiBjb3VudERlY2ltYWxzICggbnVtU3RyICkgewoJCXZhciBwaWVjZXMgPSBudW1TdHIuc3BsaXQoIi4iKTsKCQlyZXR1cm4gcGllY2VzLmxlbmd0aCA+IDEgPyBwaWVjZXNbMV0ubGVuZ3RoIDogMDsKCX0KCgkvLyBodHRwOi8veW91bWlnaHRub3RuZWVkanF1ZXJ5LmNvbS8jYWRkX2NsYXNzCglmdW5jdGlvbiBhZGRDbGFzcyAoIGVsLCBjbGFzc05hbWUgKSB7CgkJaWYgKCBlbC5jbGFzc0xpc3QgKSB7CgkJCWVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTsKCQl9IGVsc2UgewoJCQllbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lOwoJCX0KCX0KCgkvLyBodHRwOi8veW91bWlnaHRub3RuZWVkanF1ZXJ5LmNvbS8jcmVtb3ZlX2NsYXNzCglmdW5jdGlvbiByZW1vdmVDbGFzcyAoIGVsLCBjbGFzc05hbWUgKSB7CgkJaWYgKCBlbC5jbGFzc0xpc3QgKSB7CgkJCWVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTsKCQl9IGVsc2UgewoJCQllbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxifCQpJywgJ2dpJyksICcgJyk7CgkJfQoJfQoKCS8vIGh0dHA6Ly95b3VtaWdodG5vdG5lZWRqcXVlcnkuY29tLyNoYXNfY2xhc3MKCWZ1bmN0aW9uIGhhc0NsYXNzICggZWwsIGNsYXNzTmFtZSApIHsKCQlpZiAoIGVsLmNsYXNzTGlzdCApIHsKCQkJZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7CgkJfSBlbHNlIHsKCQkJbmV3IFJlZ0V4cCgnKF58ICknICsgY2xhc3NOYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChlbC5jbGFzc05hbWUpOwoJCX0KCX0KCgkvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93L3Njcm9sbFkjTm90ZXMKCWZ1bmN0aW9uIGdldFBhZ2VPZmZzZXQgKCApIHsKCgkJdmFyIHN1cHBvcnRQYWdlT2Zmc2V0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICE9PSB1bmRlZmluZWQsCgkJCWlzQ1NTMUNvbXBhdCA9ICgoZG9jdW1lbnQuY29tcGF0TW9kZSB8fCAiIikgPT09ICJDU1MxQ29tcGF0IiksCgkJCXggPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWE9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IDogZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LAoJCQl5ID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgoJCXJldHVybiB7CgkJCXg6IHgsCgkJCXk6IHkKCQl9OwoJfQoKCS8vIFNob3J0aGFuZCBmb3Igc3RvcFByb3BhZ2F0aW9uIHNvIHdlIGRvbid0IGhhdmUgdG8gY3JlYXRlIGEgZHluYW1pYyBtZXRob2QKCWZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoIGUgKSB7CgkJZS5zdG9wUHJvcGFnYXRpb24oKTsKCX0KCgkvLyB0b2RvCglmdW5jdGlvbiBhZGRDc3NQcmVmaXgoY3NzUHJlZml4KSB7CgkJcmV0dXJuIGZ1bmN0aW9uKGNsYXNzTmFtZSkgewoJCQlyZXR1cm4gY3NzUHJlZml4ICsgY2xhc3NOYW1lOwoJCX07Cgl9CgoKCXZhcgoJLy8gRGV0ZXJtaW5lIHRoZSBldmVudHMgdG8gYmluZC4gSUUxMSBpbXBsZW1lbnRzIHBvaW50ZXJFdmVudHMgd2l0aG91dAoJLy8gYSBwcmVmaXgsIHdoaWNoIGJyZWFrcyBjb21wYXRpYmlsaXR5IHdpdGggdGhlIElFMTAgaW1wbGVtZW50YXRpb24uCgkvKiogQGNvbnN0ICovCglhY3Rpb25zID0gd2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCA/IHsKCQlzdGFydDogJ3BvaW50ZXJkb3duJywKCQltb3ZlOiAncG9pbnRlcm1vdmUnLAoJCWVuZDogJ3BvaW50ZXJ1cCcKCX0gOiB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQgPyB7CgkJc3RhcnQ6ICdNU1BvaW50ZXJEb3duJywKCQltb3ZlOiAnTVNQb2ludGVyTW92ZScsCgkJZW5kOiAnTVNQb2ludGVyVXAnCgl9IDogewoJCXN0YXJ0OiAnbW91c2Vkb3duIHRvdWNoc3RhcnQnLAoJCW1vdmU6ICdtb3VzZW1vdmUgdG91Y2htb3ZlJywKCQllbmQ6ICdtb3VzZXVwIHRvdWNoZW5kJwoJfSwKCWRlZmF1bHRDc3NQcmVmaXggPSAnbm9VaS0nOwoKCi8vIFZhbHVlIGNhbGN1bGF0aW9uCgoJLy8gRGV0ZXJtaW5lIHRoZSBzaXplIG9mIGEgc3ViLXJhbmdlIGluIHJlbGF0aW9uIHRvIGEgZnVsbCByYW5nZS4KCWZ1bmN0aW9uIHN1YlJhbmdlUmF0aW8gKCBwYSwgcGIgKSB7CgkJcmV0dXJuICgxMDAgLyAocGIgLSBwYSkpOwoJfQoKCS8vIChwZXJjZW50YWdlKSBIb3cgbWFueSBwZXJjZW50IGlzIHRoaXMgdmFsdWUgb2YgdGhpcyByYW5nZT8KCWZ1bmN0aW9uIGZyb21QZXJjZW50YWdlICggcmFuZ2UsIHZhbHVlICkgewoJCXJldHVybiAodmFsdWUgKiAxMDApIC8gKCByYW5nZVsxXSAtIHJhbmdlWzBdICk7Cgl9CgoJLy8gKHBlcmNlbnRhZ2UpIFdoZXJlIGlzIHRoaXMgdmFsdWUgb24gdGhpcyByYW5nZT8KCWZ1bmN0aW9uIHRvUGVyY2VudGFnZSAoIHJhbmdlLCB2YWx1ZSApIHsKCQlyZXR1cm4gZnJvbVBlcmNlbnRhZ2UoIHJhbmdlLCByYW5nZVswXSA8IDAgPwoJCQl2YWx1ZSArIE1hdGguYWJzKHJhbmdlWzBdKSA6CgkJCQl2YWx1ZSAtIHJhbmdlWzBdICk7Cgl9CgoJLy8gKHZhbHVlKSBIb3cgbXVjaCBpcyB0aGlzIHBlcmNlbnRhZ2Ugb24gdGhpcyByYW5nZT8KCWZ1bmN0aW9uIGlzUGVyY2VudGFnZSAoIHJhbmdlLCB2YWx1ZSApIHsKCQlyZXR1cm4gKCh2YWx1ZSAqICggcmFuZ2VbMV0gLSByYW5nZVswXSApKSAvIDEwMCkgKyByYW5nZVswXTsKCX0KCgovLyBSYW5nZSBjb252ZXJzaW9uCgoJZnVuY3Rpb24gZ2V0SiAoIHZhbHVlLCBhcnIgKSB7CgoJCXZhciBqID0gMTsKCgkJd2hpbGUgKCB2YWx1ZSA+PSBhcnJbal0gKXsKCQkJaiArPSAxOwoJCX0KCgkJcmV0dXJuIGo7Cgl9CgoJLy8gKHBlcmNlbnRhZ2UpIElucHV0IGEgdmFsdWUsIGZpbmQgd2hlcmUsIG9uIGEgc2NhbGUgb2YgMC0xMDAsIGl0IGFwcGxpZXMuCglmdW5jdGlvbiB0b1N0ZXBwaW5nICggeFZhbCwgeFBjdCwgdmFsdWUgKSB7CgoJCWlmICggdmFsdWUgPj0geFZhbC5zbGljZSgtMSlbMF0gKXsKCQkJcmV0dXJuIDEwMDsKCQl9CgoJCXZhciBqID0gZ2V0SiggdmFsdWUsIHhWYWwgKSwgdmEsIHZiLCBwYSwgcGI7CgoJCXZhID0geFZhbFtqLTFdOwoJCXZiID0geFZhbFtqXTsKCQlwYSA9IHhQY3Rbai0xXTsKCQlwYiA9IHhQY3Rbal07CgoJCXJldHVybiBwYSArICh0b1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sIHZhbHVlKSAvIHN1YlJhbmdlUmF0aW8gKHBhLCBwYikpOwoJfQoKCS8vICh2YWx1ZSkgSW5wdXQgYSBwZXJjZW50YWdlLCBmaW5kIHdoZXJlIGl0IGlzIG9uIHRoZSBzcGVjaWZpZWQgcmFuZ2UuCglmdW5jdGlvbiBmcm9tU3RlcHBpbmcgKCB4VmFsLCB4UGN0LCB2YWx1ZSApIHsKCgkJLy8gVGhlcmUgaXMgbm8gcmFuZ2UgZ3JvdXAgdGhhdCBmaXRzIDEwMAoJCWlmICggdmFsdWUgPj0gMTAwICl7CgkJCXJldHVybiB4VmFsLnNsaWNlKC0xKVswXTsKCQl9CgoJCXZhciBqID0gZ2V0SiggdmFsdWUsIHhQY3QgKSwgdmEsIHZiLCBwYSwgcGI7CgoJCXZhID0geFZhbFtqLTFdOwoJCXZiID0geFZhbFtqXTsKCQlwYSA9IHhQY3Rbai0xXTsKCQlwYiA9IHhQY3Rbal07CgoJCXJldHVybiBpc1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sICh2YWx1ZSAtIHBhKSAqIHN1YlJhbmdlUmF0aW8gKHBhLCBwYikpOwoJfQoKCS8vIChwZXJjZW50YWdlKSBHZXQgdGhlIHN0ZXAgdGhhdCBhcHBsaWVzIGF0IGEgY2VydGFpbiB2YWx1ZS4KCWZ1bmN0aW9uIGdldFN0ZXAgKCB4UGN0LCB4U3RlcHMsIHNuYXAsIHZhbHVlICkgewoKCQlpZiAoIHZhbHVlID09PSAxMDAgKSB7CgkJCXJldHVybiB2YWx1ZTsKCQl9CgoJCXZhciBqID0gZ2V0SiggdmFsdWUsIHhQY3QgKSwgYSwgYjsKCgkJLy8gSWYgJ3NuYXAnIGlzIHNldCwgc3RlcHMgYXJlIHVzZWQgYXMgZml4ZWQgcG9pbnRzIG9uIHRoZSBzbGlkZXIuCgkJaWYgKCBzbmFwICkgewoKCQkJYSA9IHhQY3Rbai0xXTsKCQkJYiA9IHhQY3Rbal07CgoJCQkvLyBGaW5kIHRoZSBjbG9zZXN0IHBvc2l0aW9uLCBhIG9yIGIuCgkJCWlmICgodmFsdWUgLSBhKSA+ICgoYi1hKS8yKSl7CgkJCQlyZXR1cm4gYjsKCQkJfQoKCQkJcmV0dXJuIGE7CgkJfQoKCQlpZiAoICF4U3RlcHNbai0xXSApewoJCQlyZXR1cm4gdmFsdWU7CgkJfQoKCQlyZXR1cm4geFBjdFtqLTFdICsgY2xvc2VzdCgKCQkJdmFsdWUgLSB4UGN0W2otMV0sCgkJCXhTdGVwc1tqLTFdCgkJKTsKCX0KCgovLyBFbnRyeSBwYXJzaW5nCgoJZnVuY3Rpb24gaGFuZGxlRW50cnlQb2ludCAoIGluZGV4LCB2YWx1ZSwgdGhhdCApIHsKCgkJdmFyIHBlcmNlbnRhZ2U7CgoJCS8vIFdyYXAgbnVtZXJpY2FsIGlucHV0IGluIGFuIGFycmF5LgoJCWlmICggdHlwZW9mIHZhbHVlID09PSAibnVtYmVyIiApIHsKCQkJdmFsdWUgPSBbdmFsdWVdOwoJCX0KCgkJLy8gUmVqZWN0IGFueSBpbnZhbGlkIGlucHV0LCBieSB0ZXN0aW5nIHdoZXRoZXIgdmFsdWUgaXMgYW4gYXJyYXkuCgkJaWYgKCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoIHZhbHVlICkgIT09ICdbb2JqZWN0IEFycmF5XScgKXsKCQkJdGhyb3cgbmV3IEVycm9yKCJub1VpU2xpZGVyOiAncmFuZ2UnIGNvbnRhaW5zIGludmFsaWQgdmFsdWUuIik7CgkJfQoKCQkvLyBDb3ZlcnQgbWluL21heCBzeW50YXggdG8gMCBhbmQgMTAwLgoJCWlmICggaW5kZXggPT09ICdtaW4nICkgewoJCQlwZXJjZW50YWdlID0gMDsKCQl9IGVsc2UgaWYgKCBpbmRleCA9PT0gJ21heCcgKSB7CgkJCXBlcmNlbnRhZ2UgPSAxMDA7CgkJfSBlbHNlIHsKCQkJcGVyY2VudGFnZSA9IHBhcnNlRmxvYXQoIGluZGV4ICk7CgkJfQoKCQkvLyBDaGVjayBmb3IgY29ycmVjdCBpbnB1dC4KCQlpZiAoICFpc051bWVyaWMoIHBlcmNlbnRhZ2UgKSB8fCAhaXNOdW1lcmljKCB2YWx1ZVswXSApICkgewoJCQl0aHJvdyBuZXcgRXJyb3IoIm5vVWlTbGlkZXI6ICdyYW5nZScgdmFsdWUgaXNuJ3QgbnVtZXJpYy4iKTsKCQl9CgoJCS8vIFN0b3JlIHZhbHVlcy4KCQl0aGF0LnhQY3QucHVzaCggcGVyY2VudGFnZSApOwoJCXRoYXQueFZhbC5wdXNoKCB2YWx1ZVswXSApOwoKCQkvLyBOYU4gd2lsbCBldmFsdWF0ZSB0byBmYWxzZSB0b28sIGJ1dCB0byBrZWVwCgkJLy8gbG9nZ2luZyBjbGVhciwgc2V0IHN0ZXAgZXhwbGljaXRseS4gTWFrZSBzdXJlCgkJLy8gbm90IHRvIG92ZXJyaWRlIHRoZSAnc3RlcCcgc2V0dGluZyB3aXRoIGZhbHNlLgoJCWlmICggIXBlcmNlbnRhZ2UgKSB7CgkJCWlmICggIWlzTmFOKCB2YWx1ZVsxXSApICkgewoJCQkJdGhhdC54U3RlcHNbMF0gPSB2YWx1ZVsxXTsKCQkJfQoJCX0gZWxzZSB7CgkJCXRoYXQueFN0ZXBzLnB1c2goIGlzTmFOKHZhbHVlWzFdKSA/IGZhbHNlIDogdmFsdWVbMV0gKTsKCQl9Cgl9CgoJZnVuY3Rpb24gaGFuZGxlU3RlcFBvaW50ICggaSwgbiwgdGhhdCApIHsKCgkJLy8gSWdub3JlICdmYWxzZScgc3RlcHBpbmcuCgkJaWYgKCAhbiApIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoKCQkvLyBGYWN0b3IgdG8gcmFuZ2UgcmF0aW8KCQl0aGF0LnhTdGVwc1tpXSA9IGZyb21QZXJjZW50YWdlKFsKCQkJIHRoYXQueFZhbFtpXQoJCQksdGhhdC54VmFsW2krMV0KCQldLCBuKSAvIHN1YlJhbmdlUmF0aW8gKAoJCQl0aGF0LnhQY3RbaV0sCgkJCXRoYXQueFBjdFtpKzFdICk7Cgl9CgoKLy8gSW50ZXJmYWNlCgoJLy8gVGhlIGludGVyZmFjZSB0byBTcGVjdHJ1bSBoYW5kbGVzIGFsbCBkaXJlY3Rpb24tYmFzZWQKCS8vIGNvbnZlcnNpb25zLCBzbyB0aGUgYWJvdmUgdmFsdWVzIGFyZSB1bmF3YXJlLgoKCWZ1bmN0aW9uIFNwZWN0cnVtICggZW50cnksIHNuYXAsIGRpcmVjdGlvbiwgc2luZ2xlU3RlcCApIHsKCgkJdGhpcy54UGN0ID0gW107CgkJdGhpcy54VmFsID0gW107CgkJdGhpcy54U3RlcHMgPSBbIHNpbmdsZVN0ZXAgfHwgZmFsc2UgXTsKCQl0aGlzLnhOdW1TdGVwcyA9IFsgZmFsc2UgXTsKCgkJdGhpcy5zbmFwID0gc25hcDsKCQl0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjsKCgkJdmFyIGluZGV4LCBvcmRlcmVkID0gWyAvKiBbMCwgJ21pbiddLCBbMSwgJzUwJSddLCBbMiwgJ21heCddICovIF07CgoJCS8vIE1hcCB0aGUgb2JqZWN0IGtleXMgdG8gYW4gYXJyYXkuCgkJZm9yICggaW5kZXggaW4gZW50cnkgKSB7CgkJCWlmICggZW50cnkuaGFzT3duUHJvcGVydHkoaW5kZXgpICkgewoJCQkJb3JkZXJlZC5wdXNoKFtlbnRyeVtpbmRleF0sIGluZGV4XSk7CgkJCX0KCQl9CgoJCS8vIFNvcnQgYWxsIGVudHJpZXMgYnkgdmFsdWUgKG51bWVyaWMgc29ydCkuCgkJaWYgKCBvcmRlcmVkLmxlbmd0aCAmJiB0eXBlb2Ygb3JkZXJlZFswXVswXSA9PT0gIm9iamVjdCIgKSB7CgkJCW9yZGVyZWQuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhWzBdWzBdIC0gYlswXVswXTsgfSk7CgkJfSBlbHNlIHsKCQkJb3JkZXJlZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGFbMF0gLSBiWzBdOyB9KTsKCQl9CgoKCQkvLyBDb252ZXJ0IGFsbCBlbnRyaWVzIHRvIHN1YnJhbmdlcy4KCQlmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgb3JkZXJlZC5sZW5ndGg7IGluZGV4KysgKSB7CgkJCWhhbmRsZUVudHJ5UG9pbnQob3JkZXJlZFtpbmRleF1bMV0sIG9yZGVyZWRbaW5kZXhdWzBdLCB0aGlzKTsKCQl9CgoJCS8vIFN0b3JlIHRoZSBhY3R1YWwgc3RlcCB2YWx1ZXMuCgkJLy8geFN0ZXBzIGlzIHNvcnRlZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB4UGN0IGFuZCB4VmFsLgoJCXRoaXMueE51bVN0ZXBzID0gdGhpcy54U3RlcHMuc2xpY2UoMCk7CgoJCS8vIENvbnZlcnQgYWxsIG51bWVyaWMgc3RlcHMgdG8gdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIHN1YnJhbmdlIHRoZXkgcmVwcmVzZW50LgoJCWZvciAoIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnhOdW1TdGVwcy5sZW5ndGg7IGluZGV4KysgKSB7CgkJCWhhbmRsZVN0ZXBQb2ludChpbmRleCwgdGhpcy54TnVtU3RlcHNbaW5kZXhdLCB0aGlzKTsKCQl9Cgl9CgoJU3BlY3RydW0ucHJvdG90eXBlLmdldE1hcmdpbiA9IGZ1bmN0aW9uICggdmFsdWUgKSB7CgkJcmV0dXJuIHRoaXMueFBjdC5sZW5ndGggPT09IDIgPyBmcm9tUGVyY2VudGFnZSh0aGlzLnhWYWwsIHZhbHVlKSA6IGZhbHNlOwoJfTsKCglTcGVjdHJ1bS5wcm90b3R5cGUudG9TdGVwcGluZyA9IGZ1bmN0aW9uICggdmFsdWUgKSB7CgoJCXZhbHVlID0gdG9TdGVwcGluZyggdGhpcy54VmFsLCB0aGlzLnhQY3QsIHZhbHVlICk7CgoJCS8vIEludmVydCB0aGUgdmFsdWUgaWYgdGhpcyBpcyBhIHJpZ2h0LXRvLWxlZnQgc2xpZGVyLgoJCWlmICggdGhpcy5kaXJlY3Rpb24gKSB7CgkJCXZhbHVlID0gMTAwIC0gdmFsdWU7CgkJfQoKCQlyZXR1cm4gdmFsdWU7Cgl9OwoKCVNwZWN0cnVtLnByb3RvdHlwZS5mcm9tU3RlcHBpbmcgPSBmdW5jdGlvbiAoIHZhbHVlICkgewoKCQkvLyBJbnZlcnQgdGhlIHZhbHVlIGlmIHRoaXMgaXMgYSByaWdodC10by1sZWZ0IHNsaWRlci4KCQlpZiAoIHRoaXMuZGlyZWN0aW9uICkgewoJCQl2YWx1ZSA9IDEwMCAtIHZhbHVlOwoJCX0KCgkJcmV0dXJuIGFjY3VyYXRlTnVtYmVyKGZyb21TdGVwcGluZyggdGhpcy54VmFsLCB0aGlzLnhQY3QsIHZhbHVlICkpOwoJfTsKCglTcGVjdHJ1bS5wcm90b3R5cGUuZ2V0U3RlcCA9IGZ1bmN0aW9uICggdmFsdWUgKSB7CgoJCS8vIEZpbmQgdGhlIHByb3BlciBzdGVwIGZvciBydGwgc2xpZGVycyBieSBzZWFyY2ggaW4gaW52ZXJzZSBkaXJlY3Rpb24uCgkJLy8gRml4ZXMgaXNzdWUgIzI2Mi4KCQlpZiAoIHRoaXMuZGlyZWN0aW9uICkgewoJCQl2YWx1ZSA9IDEwMCAtIHZhbHVlOwoJCX0KCgkJdmFsdWUgPSBnZXRTdGVwKHRoaXMueFBjdCwgdGhpcy54U3RlcHMsIHRoaXMuc25hcCwgdmFsdWUgKTsKCgkJaWYgKCB0aGlzLmRpcmVjdGlvbiApIHsKCQkJdmFsdWUgPSAxMDAgLSB2YWx1ZTsKCQl9CgoJCXJldHVybiB2YWx1ZTsKCX07CgoJU3BlY3RydW0ucHJvdG90eXBlLmdldEFwcGxpY2FibGVTdGVwID0gZnVuY3Rpb24gKCB2YWx1ZSApIHsKCgkJLy8gSWYgdGhlIHZhbHVlIGlzIDEwMCUsIHJldHVybiB0aGUgbmVnYXRpdmUgc3RlcCB0d2ljZS4KCQl2YXIgaiA9IGdldEoodmFsdWUsIHRoaXMueFBjdCksIG9mZnNldCA9IHZhbHVlID09PSAxMDAgPyAyIDogMTsKCQlyZXR1cm4gW3RoaXMueE51bVN0ZXBzW2otMl0sIHRoaXMueFZhbFtqLW9mZnNldF0sIHRoaXMueE51bVN0ZXBzW2otb2Zmc2V0XV07Cgl9OwoKCS8vIE91dHNpZGUgdGVzdGluZwoJU3BlY3RydW0ucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoIHZhbHVlICkgewoJCXJldHVybiB0aGlzLmdldFN0ZXAodGhpcy50b1N0ZXBwaW5nKHZhbHVlKSk7Cgl9OwoKLyoJRXZlcnkgaW5wdXQgb3B0aW9uIGlzIHRlc3RlZCBhbmQgcGFyc2VkLiBUaGlzJ2xsIHByZXZlbnQKCWVuZGxlc3MgdmFsaWRhdGlvbiBpbiBpbnRlcm5hbCBtZXRob2RzLiBUaGVzZSB0ZXN0cyBhcmUKCXN0cnVjdHVyZWQgd2l0aCBhbiBpdGVtIGZvciBldmVyeSBvcHRpb24gYXZhaWxhYmxlLiBBbgoJb3B0aW9uIGNhbiBiZSBtYXJrZWQgYXMgcmVxdWlyZWQgYnkgc2V0dGluZyB0aGUgJ3InIGZsYWcuCglUaGUgdGVzdGluZyBmdW5jdGlvbiBpcyBwcm92aWRlZCB3aXRoIHRocmVlIGFyZ3VtZW50czoKCQktIFRoZSBwcm92aWRlZCB2YWx1ZSBmb3IgdGhlIG9wdGlvbjsKCQktIEEgcmVmZXJlbmNlIHRvIHRoZSBvcHRpb25zIG9iamVjdDsKCQktIFRoZSBuYW1lIGZvciB0aGUgb3B0aW9uOwoKCVRoZSB0ZXN0aW5nIGZ1bmN0aW9uIHJldHVybnMgZmFsc2Ugd2hlbiBhbiBlcnJvciBpcyBkZXRlY3RlZCwKCW9yIHRydWUgd2hlbiBldmVyeXRoaW5nIGlzIE9LLiBJdCBjYW4gYWxzbyBtb2RpZnkgdGhlIG9wdGlvbgoJb2JqZWN0LCB0byBtYWtlIHN1cmUgYWxsIHZhbHVlcyBjYW4gYmUgY29ycmVjdGx5IGxvb3BlZCBlbHNld2hlcmUuICovCgoJdmFyIGRlZmF1bHRGb3JtYXR0ZXIgPSB7ICd0byc6IGZ1bmN0aW9uKCB2YWx1ZSApewoJCXJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLnRvRml4ZWQoMik7Cgl9LCAnZnJvbSc6IE51bWJlciB9OwoKCWZ1bmN0aW9uIHRlc3RTdGVwICggcGFyc2VkLCBlbnRyeSApIHsKCgkJaWYgKCAhaXNOdW1lcmljKCBlbnRyeSApICkgewoJCQl0aHJvdyBuZXcgRXJyb3IoIm5vVWlTbGlkZXI6ICdzdGVwJyBpcyBub3QgbnVtZXJpYy4iKTsKCQl9CgoJCS8vIFRoZSBzdGVwIG9wdGlvbiBjYW4gc3RpbGwgYmUgdXNlZCB0byBzZXQgc3RlcHBpbmcKCQkvLyBmb3IgbGluZWFyIHNsaWRlcnMuIE92ZXJ3cml0dGVuIGlmIHNldCBpbiAncmFuZ2UnLgoJCXBhcnNlZC5zaW5nbGVTdGVwID0gZW50cnk7Cgl9CgoJZnVuY3Rpb24gdGVzdFJhbmdlICggcGFyc2VkLCBlbnRyeSApIHsKCgkJLy8gRmlsdGVyIGluY29ycmVjdCBpbnB1dC4KCQlpZiAoIHR5cGVvZiBlbnRyeSAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShlbnRyeSkgKSB7CgkJCXRocm93IG5ldyBFcnJvcigibm9VaVNsaWRlcjogJ3JhbmdlJyBpcyBub3QgYW4gb2JqZWN0LiIpOwoJCX0KCgkJLy8gQ2F0Y2ggbWlzc2luZyBzdGFydCBvciBlbmQuCgkJaWYgKCBlbnRyeS5taW4gPT09IHVuZGVmaW5lZCB8fCBlbnRyeS5tYXggPT09IHVuZGVmaW5lZCApIHsKCQkJdGhyb3cgbmV3IEVycm9yKCJub1VpU2xpZGVyOiBNaXNzaW5nICdtaW4nIG9yICdtYXgnIGluICdyYW5nZScuIik7CgkJfQoKCQkvLyBDYXRjaCBlcXVhbCBzdGFydCBvciBlbmQuCgkJaWYgKCBlbnRyeS5taW4gPT09IGVudHJ5Lm1heCApIHsKCQkJdGhyb3cgbmV3IEVycm9yKCJub1VpU2xpZGVyOiAncmFuZ2UnICdtaW4nIGFuZCAnbWF4JyBjYW5ub3QgYmUgZXF1YWwuIik7CgkJfQoKCQlwYXJzZWQuc3BlY3RydW0gPSBuZXcgU3BlY3RydW0oZW50cnksIHBhcnNlZC5zbmFwLCBwYXJzZWQuZGlyLCBwYXJzZWQuc2luZ2xlU3RlcCk7Cgl9CgoJZnVuY3Rpb24gdGVzdFN0YXJ0ICggcGFyc2VkLCBlbnRyeSApIHsKCgkJZW50cnkgPSBhc0FycmF5KGVudHJ5KTsKCgkJLy8gVmFsaWRhdGUgaW5wdXQuIFZhbHVlcyBhcmVuJ3QgdGVzdGVkLCBhcyB0aGUgcHVibGljIC52YWwgbWV0aG9kCgkJLy8gd2lsbCBhbHdheXMgcHJvdmlkZSBhIHZhbGlkIGxvY2F0aW9uLgoJCWlmICggIUFycmF5LmlzQXJyYXkoIGVudHJ5ICkgfHwgIWVudHJ5Lmxlbmd0aCB8fCBlbnRyeS5sZW5ndGggPiAyICkgewoJCQl0aHJvdyBuZXcgRXJyb3IoIm5vVWlTbGlkZXI6ICdzdGFydCcgb3B0aW9uIGlzIGluY29ycmVjdC4iKTsKCQl9CgoJCS8vIFN0b3JlIHRoZSBudW1iZXIgb2YgaGFuZGxlcy4KCQlwYXJzZWQuaGFuZGxlcyA9IGVudHJ5Lmxlbmd0aDsKCgkJLy8gV2hlbiB0aGUgc2xpZGVyIGlzIGluaXRpYWxpemVkLCB0aGUgLnZhbCBtZXRob2Qgd2lsbAoJCS8vIGJlIGNhbGxlZCB3aXRoIHRoZSBzdGFydCBvcHRpb25zLgoJCXBhcnNlZC5zdGFydCA9IGVudHJ5OwoJfQoKCWZ1bmN0aW9uIHRlc3RTbmFwICggcGFyc2VkLCBlbnRyeSApIHsKCgkJLy8gRW5mb3JjZSAxMDAlIHN0ZXBwaW5nIHdpdGhpbiBzdWJyYW5nZXMuCgkJcGFyc2VkLnNuYXAgPSBlbnRyeTsKCgkJaWYgKCB0eXBlb2YgZW50cnkgIT09ICdib29sZWFuJyApewoJCQl0aHJvdyBuZXcgRXJyb3IoIm5vVWlTbGlkZXI6ICdzbmFwJyBvcHRpb24gbXVzdCBiZSBhIGJvb2xlYW4uIik7CgkJfQoJfQoKCWZ1bmN0aW9uIHRlc3RBbmltYXRlICggcGFyc2VkLCBlbnRyeSApIHsKCgkJLy8gRW5mb3JjZSAxMDAlIHN0ZXBwaW5nIHdpdGhpbiBzdWJyYW5nZXMuCgkJcGFyc2VkLmFuaW1hdGUgPSBlbnRyeTsKCgkJaWYgKCB0eXBlb2YgZW50cnkgIT09ICdib29sZWFuJyApewoJCQl0aHJvdyBuZXcgRXJyb3IoIm5vVWlTbGlkZXI6ICdhbmltYXRlJyBvcHRpb24gbXVzdCBiZSBhIGJvb2xlYW4uIik7CgkJfQoJfQoKCWZ1bmN0aW9uIHRlc3RDb25uZWN0ICggcGFyc2VkLCBlbnRyeSApIHsKCgkJaWYgKCBlbnRyeSA9PT0gJ2xvd2VyJyAmJiBwYXJzZWQuaGFuZGxlcyA9PT0gMSApIHsKCQkJcGFyc2VkLmNvbm5lY3QgPSAxOwoJCX0gZWxzZSBpZiAoIGVudHJ5ID09PSAndXBwZXInICYmIHBhcnNlZC5oYW5kbGVzID09PSAxICkgewoJCQlwYXJzZWQuY29ubmVjdCA9IDI7CgkJfSBlbHNlIGlmICggZW50cnkgPT09IHRydWUgJiYgcGFyc2VkLmhhbmRsZXMgPT09IDIgKSB7CgkJCXBhcnNlZC5jb25uZWN0ID0gMzsKCQl9IGVsc2UgaWYgKCBlbnRyeSA9PT0gZmFsc2UgKSB7CgkJCXBhcnNlZC5jb25uZWN0ID0gMDsKCQl9IGVsc2UgewoJCQl0aHJvdyBuZXcgRXJyb3IoIm5vVWlTbGlkZXI6ICdjb25uZWN0JyBvcHRpb24gZG9lc24ndCBtYXRjaCBoYW5kbGUgY291bnQuIik7CgkJfQoJfQoKCWZ1bmN0aW9uIHRlc3RPcmllbnRhdGlvbiAoIHBhcnNlZCwgZW50cnkgKSB7CgoJCS8vIFNldCBvcmllbnRhdGlvbiB0byBhbiBhIG51bWVyaWNhbCB2YWx1ZSBmb3IgZWFzeQoJCS8vIGFycmF5IHNlbGVjdGlvbi4KCQlzd2l0Y2ggKCBlbnRyeSApewoJCSAgY2FzZSAnaG9yaXpvbnRhbCc6CgkJCXBhcnNlZC5vcnQgPSAwOwoJCQlicmVhazsKCQkgIGNhc2UgJ3ZlcnRpY2FsJzoKCQkJcGFyc2VkLm9ydCA9IDE7CgkJCWJyZWFrOwoJCSAgZGVmYXVsdDoKCQkJdGhyb3cgbmV3IEVycm9yKCJub1VpU2xpZGVyOiAnb3JpZW50YXRpb24nIG9wdGlvbiBpcyBpbnZhbGlkLiIpOwoJCX0KCX0KCglmdW5jdGlvbiB0ZXN0TWFyZ2luICggcGFyc2VkLCBlbnRyeSApIHsKCgkJaWYgKCAhaXNOdW1lcmljKGVudHJ5KSApewoJCQl0aHJvdyBuZXcgRXJyb3IoIm5vVWlTbGlkZXI6ICdtYXJnaW4nIG9wdGlvbiBtdXN0IGJlIG51bWVyaWMuIik7CgkJfQoKCQlwYXJzZWQubWFyZ2luID0gcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeSk7CgoJCWlmICggIXBhcnNlZC5tYXJnaW4gKSB7CgkJCXRocm93IG5ldyBFcnJvcigibm9VaVNsaWRlcjogJ21hcmdpbicgb3B0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIG9uIGxpbmVhciBzbGlkZXJzLiIpOwoJCX0KCX0KCglmdW5jdGlvbiB0ZXN0TGltaXQgKCBwYXJzZWQsIGVudHJ5ICkgewoKCQlpZiAoICFpc051bWVyaWMoZW50cnkpICl7CgkJCXRocm93IG5ldyBFcnJvcigibm9VaVNsaWRlcjogJ2xpbWl0JyBvcHRpb24gbXVzdCBiZSBudW1lcmljLiIpOwoJCX0KCgkJcGFyc2VkLmxpbWl0ID0gcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeSk7CgoJCWlmICggIXBhcnNlZC5saW1pdCApIHsKCQkJdGhyb3cgbmV3IEVycm9yKCJub1VpU2xpZGVyOiAnbGltaXQnIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBvbiBsaW5lYXIgc2xpZGVycy4iKTsKCQl9Cgl9CgoJZnVuY3Rpb24gdGVzdERpcmVjdGlvbiAoIHBhcnNlZCwgZW50cnkgKSB7CgoJCS8vIFNldCBkaXJlY3Rpb24gYXMgYSBudW1lcmljYWwgdmFsdWUgZm9yIGVhc3kgcGFyc2luZy4KCQkvLyBJbnZlcnQgY29ubmVjdGlvbiBmb3IgUlRMIHNsaWRlcnMsIHNvIHRoYXQgdGhlIHByb3BlcgoJCS8vIGhhbmRsZXMgZ2V0IHRoZSBjb25uZWN0L2JhY2tncm91bmQgY2xhc3Nlcy4KCQlzd2l0Y2ggKCBlbnRyeSApIHsKCQkgIGNhc2UgJ2x0cic6CgkJCXBhcnNlZC5kaXIgPSAwOwoJCQlicmVhazsKCQkgIGNhc2UgJ3J0bCc6CgkJCXBhcnNlZC5kaXIgPSAxOwoJCQlwYXJzZWQuY29ubmVjdCA9IFswLDIsMSwzXVtwYXJzZWQuY29ubmVjdF07CgkJCWJyZWFrOwoJCSAgZGVmYXVsdDoKCQkJdGhyb3cgbmV3IEVycm9yKCJub1VpU2xpZGVyOiAnZGlyZWN0aW9uJyBvcHRpb24gd2FzIG5vdCByZWNvZ25pemVkLiIpOwoJCX0KCX0KCglmdW5jdGlvbiB0ZXN0QmVoYXZpb3VyICggcGFyc2VkLCBlbnRyeSApIHsKCgkJLy8gTWFrZSBzdXJlIHRoZSBpbnB1dCBpcyBhIHN0cmluZy4KCQlpZiAoIHR5cGVvZiBlbnRyeSAhPT0gJ3N0cmluZycgKSB7CgkJCXRocm93IG5ldyBFcnJvcigibm9VaVNsaWRlcjogJ2JlaGF2aW91cicgbXVzdCBiZSBhIHN0cmluZyBjb250YWluaW5nIG9wdGlvbnMuIik7CgkJfQoKCQkvLyBDaGVjayBpZiB0aGUgc3RyaW5nIGNvbnRhaW5zIGFueSBrZXl3b3Jkcy4KCQkvLyBOb25lIGFyZSByZXF1aXJlZC4KCQl2YXIgdGFwID0gZW50cnkuaW5kZXhPZigndGFwJykgPj0gMCwKCQkJZHJhZyA9IGVudHJ5LmluZGV4T2YoJ2RyYWcnKSA+PSAwLAoJCQlmaXhlZCA9IGVudHJ5LmluZGV4T2YoJ2ZpeGVkJykgPj0gMCwKCQkJc25hcCA9IGVudHJ5LmluZGV4T2YoJ3NuYXAnKSA+PSAwLAoJCQlob3ZlciA9IGVudHJ5LmluZGV4T2YoJ2hvdmVyJykgPj0gMDsKCgkJLy8gRml4ICM0NzIKCQlpZiAoIGRyYWcgJiYgIXBhcnNlZC5jb25uZWN0ICkgewoJCQl0aHJvdyBuZXcgRXJyb3IoIm5vVWlTbGlkZXI6ICdkcmFnJyBiZWhhdmlvdXIgbXVzdCBiZSB1c2VkIHdpdGggJ2Nvbm5lY3QnOiB0cnVlLiIpOwoJCX0KCgkJcGFyc2VkLmV2ZW50cyA9IHsKCQkJdGFwOiB0YXAgfHwgc25hcCwKCQkJZHJhZzogZHJhZywKCQkJZml4ZWQ6IGZpeGVkLAoJCQlzbmFwOiBzbmFwLAoJCQlob3ZlcjogaG92ZXIKCQl9OwoJfQoKCWZ1bmN0aW9uIHRlc3RUb29sdGlwcyAoIHBhcnNlZCwgZW50cnkgKSB7CgoJCXZhciBpOwoKCQlpZiAoIGVudHJ5ID09PSBmYWxzZSApIHsKCQkJcmV0dXJuOwoJCX0gZWxzZSBpZiAoIGVudHJ5ID09PSB0cnVlICkgewoKCQkJcGFyc2VkLnRvb2x0aXBzID0gW107CgoJCQlmb3IgKCBpID0gMDsgaSA8IHBhcnNlZC5oYW5kbGVzOyBpKysgKSB7CgkJCQlwYXJzZWQudG9vbHRpcHMucHVzaCh0cnVlKTsKCQkJfQoKCQl9IGVsc2UgewoKCQkJcGFyc2VkLnRvb2x0aXBzID0gYXNBcnJheShlbnRyeSk7CgoJCQlpZiAoIHBhcnNlZC50b29sdGlwcy5sZW5ndGggIT09IHBhcnNlZC5oYW5kbGVzICkgewoJCQkJdGhyb3cgbmV3IEVycm9yKCJub1VpU2xpZGVyOiBtdXN0IHBhc3MgYSBmb3JtYXR0ZXIgZm9yIGFsbCBoYW5kbGVzLiIpOwoJCQl9CgoJCQlwYXJzZWQudG9vbHRpcHMuZm9yRWFjaChmdW5jdGlvbihmb3JtYXR0ZXIpewoJCQkJaWYgKCB0eXBlb2YgZm9ybWF0dGVyICE9PSAnYm9vbGVhbicgJiYgKHR5cGVvZiBmb3JtYXR0ZXIgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBmb3JtYXR0ZXIudG8gIT09ICdmdW5jdGlvbicpICkgewoJCQkJCXRocm93IG5ldyBFcnJvcigibm9VaVNsaWRlcjogJ3Rvb2x0aXBzJyBtdXN0IGJlIHBhc3NlZCBhIGZvcm1hdHRlciBvciAnZmFsc2UnLiIpOwoJCQkJfQoJCQl9KTsKCQl9Cgl9CgoJZnVuY3Rpb24gdGVzdEZvcm1hdCAoIHBhcnNlZCwgZW50cnkgKSB7CgoJCXBhcnNlZC5mb3JtYXQgPSBlbnRyeTsKCgkJLy8gQW55IG9iamVjdCB3aXRoIGEgdG8gYW5kIGZyb20gbWV0aG9kIGlzIHN1cHBvcnRlZC4KCQlpZiAoIHR5cGVvZiBlbnRyeS50byA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZW50cnkuZnJvbSA9PT0gJ2Z1bmN0aW9uJyApIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoKCQl0aHJvdyBuZXcgRXJyb3IoICJub1VpU2xpZGVyOiAnZm9ybWF0JyByZXF1aXJlcyAndG8nIGFuZCAnZnJvbScgbWV0aG9kcy4iKTsKCX0KCglmdW5jdGlvbiB0ZXN0Q3NzUHJlZml4ICggcGFyc2VkLCBlbnRyeSApIHsKCgkJaWYgKCBlbnRyeSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbnRyeSAhPT0gJ3N0cmluZycgKSB7CgkJCXRocm93IG5ldyBFcnJvciggIm5vVWlTbGlkZXI6ICdjc3NQcmVmaXgnIG11c3QgYmUgYSBzdHJpbmcuIik7CgkJfQoKCQlwYXJzZWQuY3NzUHJlZml4ID0gZW50cnk7Cgl9CgoJLy8gVGVzdCBhbGwgZGV2ZWxvcGVyIHNldHRpbmdzIGFuZCBwYXJzZSB0byBhc3N1bXB0aW9uLXNhZmUgdmFsdWVzLgoJZnVuY3Rpb24gdGVzdE9wdGlvbnMgKCBvcHRpb25zICkgewoKCQkvLyBUbyBwcm92ZSBhIGZpeCBmb3IgIzUzNywgZnJlZXplIG9wdGlvbnMgaGVyZS4KCQkvLyBJZiB0aGUgb2JqZWN0IGlzIG1vZGlmaWVkLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi4KCQkvLyBPYmplY3QuZnJlZXplKG9wdGlvbnMpOwoKCQl2YXIgcGFyc2VkID0gewoJCQltYXJnaW46IDAsCgkJCWxpbWl0OiAwLAoJCQlhbmltYXRlOiB0cnVlLAoJCQlmb3JtYXQ6IGRlZmF1bHRGb3JtYXR0ZXIKCQl9LCB0ZXN0czsKCgkJLy8gVGVzdHMgYXJlIGV4ZWN1dGVkIGluIHRoZSBvcmRlciB0aGV5IGFyZSBwcmVzZW50ZWQgaGVyZS4KCQl0ZXN0cyA9IHsKCQkJJ3N0ZXAnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0U3RlcCB9LAoJCQknc3RhcnQnOiB7IHI6IHRydWUsIHQ6IHRlc3RTdGFydCB9LAoJCQknY29ubmVjdCc6IHsgcjogdHJ1ZSwgdDogdGVzdENvbm5lY3QgfSwKCQkJJ2RpcmVjdGlvbic6IHsgcjogdHJ1ZSwgdDogdGVzdERpcmVjdGlvbiB9LAoJCQknc25hcCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RTbmFwIH0sCgkJCSdhbmltYXRlJzogeyByOiBmYWxzZSwgdDogdGVzdEFuaW1hdGUgfSwKCQkJJ3JhbmdlJzogeyByOiB0cnVlLCB0OiB0ZXN0UmFuZ2UgfSwKCQkJJ29yaWVudGF0aW9uJzogeyByOiBmYWxzZSwgdDogdGVzdE9yaWVudGF0aW9uIH0sCgkJCSdtYXJnaW4nOiB7IHI6IGZhbHNlLCB0OiB0ZXN0TWFyZ2luIH0sCgkJCSdsaW1pdCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RMaW1pdCB9LAoJCQknYmVoYXZpb3VyJzogeyByOiB0cnVlLCB0OiB0ZXN0QmVoYXZpb3VyIH0sCgkJCSdmb3JtYXQnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0Rm9ybWF0IH0sCgkJCSd0b29sdGlwcyc6IHsgcjogZmFsc2UsIHQ6IHRlc3RUb29sdGlwcyB9LAoJCQknY3NzUHJlZml4JzogeyByOiBmYWxzZSwgdDogdGVzdENzc1ByZWZpeCB9CgkJfTsKCgkJdmFyIGRlZmF1bHRzID0gewoJCQknY29ubmVjdCc6IGZhbHNlLAoJCQknZGlyZWN0aW9uJzogJ2x0cicsCgkJCSdiZWhhdmlvdXInOiAndGFwJywKCQkJJ29yaWVudGF0aW9uJzogJ2hvcml6b250YWwnCgkJfTsKCgkJLy8gUnVuIGFsbCBvcHRpb25zIHRocm91Z2ggYSB0ZXN0aW5nIG1lY2hhbmlzbSB0byBlbnN1cmUgY29ycmVjdAoJCS8vIGlucHV0LiBJdCBzaG91bGQgYmUgbm90ZWQgdGhhdCBvcHRpb25zIG1pZ2h0IGdldCBtb2RpZmllZCB0bwoJCS8vIGJlIGhhbmRsZWQgcHJvcGVybHkuIEUuZy4gd3JhcHBpbmcgaW50ZWdlcnMgaW4gYXJyYXlzLgoJCU9iamVjdC5rZXlzKHRlc3RzKS5mb3JFYWNoKGZ1bmN0aW9uKCBuYW1lICl7CgoJCQkvLyBJZiB0aGUgb3B0aW9uIGlzbid0IHNldCwgYnV0IGl0IGlzIHJlcXVpcmVkLCB0aHJvdyBhbiBlcnJvci4KCQkJaWYgKCBvcHRpb25zW25hbWVdID09PSB1bmRlZmluZWQgJiYgZGVmYXVsdHNbbmFtZV0gPT09IHVuZGVmaW5lZCApIHsKCgkJCQlpZiAoIHRlc3RzW25hbWVdLnIgKSB7CgkJCQkJdGhyb3cgbmV3IEVycm9yKCJub1VpU2xpZGVyOiAnIiArIG5hbWUgKyAiJyBpcyByZXF1aXJlZC4iKTsKCQkJCX0KCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoKCQkJdGVzdHNbbmFtZV0udCggcGFyc2VkLCBvcHRpb25zW25hbWVdID09PSB1bmRlZmluZWQgPyBkZWZhdWx0c1tuYW1lXSA6IG9wdGlvbnNbbmFtZV0gKTsKCQl9KTsKCgkJLy8gRm9yd2FyZCBwaXBzIG9wdGlvbnMKCQlwYXJzZWQucGlwcyA9IG9wdGlvbnMucGlwczsKCgkJLy8gUHJlLWRlZmluZSB0aGUgc3R5bGVzLgoJCXBhcnNlZC5zdHlsZSA9IHBhcnNlZC5vcnQgPyAndG9wJyA6ICdsZWZ0JzsKCgkJcmV0dXJuIHBhcnNlZDsKCX0KCgpmdW5jdGlvbiBjbG9zdXJlICggdGFyZ2V0LCBvcHRpb25zICl7CgoJLy8gQWxsIHZhcmlhYmxlcyBsb2NhbCB0byAnY2xvc3VyZScgYXJlIHByZWZpeGVkIHdpdGggJ3Njb3BlXycKCXZhciBzY29wZV9UYXJnZXQgPSB0YXJnZXQsCgkJc2NvcGVfTG9jYXRpb25zID0gWy0xLCAtMV0sCgkJc2NvcGVfQmFzZSwKCQlzY29wZV9IYW5kbGVzLAoJCXNjb3BlX1NwZWN0cnVtID0gb3B0aW9ucy5zcGVjdHJ1bSwKCQlzY29wZV9WYWx1ZXMgPSBbXSwKCQlzY29wZV9FdmVudHMgPSB7fSwKCQlzY29wZV9TZWxmOwoKICB2YXIgY3NzQ2xhc3NlcyA9IFsKICAgIC8qICAwICovICAndGFyZ2V0JwogICAgLyogIDEgKi8gLCdiYXNlJwogICAgLyogIDIgKi8gLCdvcmlnaW4nCiAgICAvKiAgMyAqLyAsJ2hhbmRsZScKICAgIC8qICA0ICovICwnaG9yaXpvbnRhbCcKICAgIC8qICA1ICovICwndmVydGljYWwnCiAgICAvKiAgNiAqLyAsJ2JhY2tncm91bmQnCiAgICAvKiAgNyAqLyAsJ2Nvbm5lY3QnCiAgICAvKiAgOCAqLyAsJ2x0cicKICAgIC8qICA5ICovICwncnRsJwogICAgLyogMTAgKi8gLCdkcmFnZ2FibGUnCiAgICAvKiAxMSAqLyAsJycKICAgIC8qIDEyICovICwnc3RhdGUtZHJhZycKICAgIC8qIDEzICovICwnJwogICAgLyogMTQgKi8gLCdzdGF0ZS10YXAnCiAgICAvKiAxNSAqLyAsJ2FjdGl2ZScKICAgIC8qIDE2ICovICwnJwogICAgLyogMTcgKi8gLCdzdGFja2luZycKICAgIC8qIDE4ICovICwndG9vbHRpcCcKICAgIC8qIDE5ICovICwnJwogICAgLyogMjAgKi8gLCdwaXBzJwogICAgLyogMjEgKi8gLCdtYXJrZXInCiAgICAvKiAyMiAqLyAsJ3ZhbHVlJwogIF0ubWFwKGFkZENzc1ByZWZpeChvcHRpb25zLmNzc1ByZWZpeCB8fCBkZWZhdWx0Q3NzUHJlZml4KSk7CgoKCS8vIERlbGltaXQgcHJvcG9zZWQgdmFsdWVzIGZvciBoYW5kbGUgcG9zaXRpb25zLgoJZnVuY3Rpb24gZ2V0UG9zaXRpb25zICggYSwgYiwgZGVsaW1pdCApIHsKCgkJLy8gQWRkIG1vdmVtZW50IHRvIGN1cnJlbnQgcG9zaXRpb24uCgkJdmFyIGMgPSBhICsgYlswXSwgZCA9IGEgKyBiWzFdOwoKCQkvLyBPbmx5IGFsdGVyIHRoZSBvdGhlciBwb3NpdGlvbiBvbiBkcmFnLAoJCS8vIG5vdCBvbiBzdGFuZGFyZCBzbGlkaW5nLgoJCWlmICggZGVsaW1pdCApIHsKCQkJaWYgKCBjIDwgMCApIHsKCQkJCWQgKz0gTWF0aC5hYnMoYyk7CgkJCX0KCQkJaWYgKCBkID4gMTAwICkgewoJCQkJYyAtPSAoIGQgLSAxMDAgKTsKCQkJfQoKCQkJLy8gTGltaXQgdmFsdWVzIHRvIDAgYW5kIDEwMC4KCQkJcmV0dXJuIFtsaW1pdChjKSwgbGltaXQoZCldOwoJCX0KCgkJcmV0dXJuIFtjLGRdOwoJfQoKCS8vIFByb3ZpZGUgYSBjbGVhbiBldmVudCB3aXRoIHN0YW5kYXJkaXplZCBvZmZzZXQgdmFsdWVzLgoJZnVuY3Rpb24gZml4RXZlbnQgKCBlLCBwYWdlT2Zmc2V0ICkgewoKCQkvLyBQcmV2ZW50IHNjcm9sbGluZyBhbmQgcGFubmluZyBvbiB0b3VjaCBldmVudHMsIHdoaWxlCgkJLy8gYXR0ZW1wdGluZyB0byBzbGlkZS4gVGhlIHRhcCBldmVudCBhbHNvIGRlcGVuZHMgb24gdGhpcy4KCQllLnByZXZlbnREZWZhdWx0KCk7CgoJCS8vIEZpbHRlciB0aGUgZXZlbnQgdG8gcmVnaXN0ZXIgdGhlIHR5cGUsIHdoaWNoIGNhbiBiZQoJCS8vIHRvdWNoLCBtb3VzZSBvciBwb2ludGVyLiBPZmZzZXQgY2hhbmdlcyBuZWVkIHRvIGJlCgkJLy8gbWFkZSBvbiBhbiBldmVudCBzcGVjaWZpYyBiYXNpcy4KCQl2YXIgdG91Y2ggPSBlLnR5cGUuaW5kZXhPZigndG91Y2gnKSA9PT0gMCwKCQkJbW91c2UgPSBlLnR5cGUuaW5kZXhPZignbW91c2UnKSA9PT0gMCwKCQkJcG9pbnRlciA9IGUudHlwZS5pbmRleE9mKCdwb2ludGVyJykgPT09IDAsCgkJCXgseSwgZXZlbnQgPSBlOwoKCQkvLyBJRTEwIGltcGxlbWVudGVkIHBvaW50ZXIgZXZlbnRzIHdpdGggYSBwcmVmaXg7CgkJaWYgKCBlLnR5cGUuaW5kZXhPZignTVNQb2ludGVyJykgPT09IDAgKSB7CgkJCXBvaW50ZXIgPSB0cnVlOwoJCX0KCgkJaWYgKCB0b3VjaCApIHsKCQkJLy8gbm9VaVNsaWRlciBzdXBwb3J0cyBvbmUgbW92ZW1lbnQgYXQgYSB0aW1lLAoJCQkvLyBzbyB3ZSBjYW4gc2VsZWN0IHRoZSBmaXJzdCAnY2hhbmdlZFRvdWNoJy4KCQkJeCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7CgkJCXkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZOwoJCX0KCgkJcGFnZU9mZnNldCA9IHBhZ2VPZmZzZXQgfHwgZ2V0UGFnZU9mZnNldCgpOwoKCQlpZiAoIG1vdXNlIHx8IHBvaW50ZXIgKSB7CgkJCXggPSBlLmNsaWVudFggKyBwYWdlT2Zmc2V0Lng7CgkJCXkgPSBlLmNsaWVudFkgKyBwYWdlT2Zmc2V0Lnk7CgkJfQoKCQlldmVudC5wYWdlT2Zmc2V0ID0gcGFnZU9mZnNldDsKCQlldmVudC5wb2ludHMgPSBbeCwgeV07CgkJZXZlbnQuY3Vyc29yID0gbW91c2UgfHwgcG9pbnRlcjsgLy8gRml4ICM0MzUKCgkJcmV0dXJuIGV2ZW50OwoJfQoKCS8vIEFwcGVuZCBhIGhhbmRsZSB0byB0aGUgYmFzZS4KCWZ1bmN0aW9uIGFkZEhhbmRsZSAoIGRpcmVjdGlvbiwgaW5kZXggKSB7CgoJCXZhciBvcmlnaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwKCQkJaGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksCgkJCWFkZGl0aW9ucyA9IFsgJy1sb3dlcicsICctdXBwZXInIF07CgoJCWlmICggZGlyZWN0aW9uICkgewoJCQlhZGRpdGlvbnMucmV2ZXJzZSgpOwoJCX0KCgkJYWRkQ2xhc3MoaGFuZGxlLCBjc3NDbGFzc2VzWzNdKTsKCQlhZGRDbGFzcyhoYW5kbGUsIGNzc0NsYXNzZXNbM10gKyBhZGRpdGlvbnNbaW5kZXhdKTsKCgkJYWRkQ2xhc3Mob3JpZ2luLCBjc3NDbGFzc2VzWzJdKTsKCQlvcmlnaW4uYXBwZW5kQ2hpbGQoaGFuZGxlKTsKCgkJcmV0dXJuIG9yaWdpbjsKCX0KCgkvLyBBZGQgdGhlIHByb3BlciBjb25uZWN0aW9uIGNsYXNzZXMuCglmdW5jdGlvbiBhZGRDb25uZWN0aW9uICggY29ubmVjdCwgdGFyZ2V0LCBoYW5kbGVzICkgewoKCQkvLyBBcHBseSB0aGUgcmVxdWlyZWQgY29ubmVjdGlvbiBjbGFzc2VzIHRvIHRoZSBlbGVtZW50cwoJCS8vIHRoYXQgbmVlZCB0aGVtLiBTb21lIGNsYXNzZXMgYXJlIG1hZGUgdXAgZm9yIHNldmVyYWwKCQkvLyBzZWdtZW50cyBsaXN0ZWQgaW4gdGhlIGNsYXNzIGxpc3QsIHRvIGFsbG93IGVhc3kKCQkvLyByZW5hbWluZyBhbmQgcHJvdmlkZSBhIG1pbm9yIGNvbXByZXNzaW9uIGJlbmVmaXQuCgkJc3dpdGNoICggY29ubmVjdCApIHsKCQkJY2FzZSAxOglhZGRDbGFzcyh0YXJnZXQsIGNzc0NsYXNzZXNbN10pOwoJCQkJCWFkZENsYXNzKGhhbmRsZXNbMF0sIGNzc0NsYXNzZXNbNl0pOwoJCQkJCWJyZWFrOwoJCQljYXNlIDM6IGFkZENsYXNzKGhhbmRsZXNbMV0sIGNzc0NsYXNzZXNbNl0pOwoJCQkJCS8qIGZhbGxzIHRocm91Z2ggKi8KCQkJY2FzZSAyOiBhZGRDbGFzcyhoYW5kbGVzWzBdLCBjc3NDbGFzc2VzWzddKTsKCQkJCQkvKiBmYWxscyB0aHJvdWdoICovCgkJCWNhc2UgMDogYWRkQ2xhc3ModGFyZ2V0LCBjc3NDbGFzc2VzWzZdKTsKCQkJCQlicmVhazsKCQl9Cgl9CgoJLy8gQWRkIGhhbmRsZXMgdG8gdGhlIHNsaWRlciBiYXNlLgoJZnVuY3Rpb24gYWRkSGFuZGxlcyAoIG5ySGFuZGxlcywgZGlyZWN0aW9uLCBiYXNlICkgewoKCQl2YXIgaW5kZXgsIGhhbmRsZXMgPSBbXTsKCgkJLy8gQXBwZW5kIGhhbmRsZXMuCgkJZm9yICggaW5kZXggPSAwOyBpbmRleCA8IG5ySGFuZGxlczsgaW5kZXggKz0gMSApIHsKCgkJCS8vIEtlZXAgYSBsaXN0IG9mIGFsbCBhZGRlZCBoYW5kbGVzLgoJCQloYW5kbGVzLnB1c2goIGJhc2UuYXBwZW5kQ2hpbGQoYWRkSGFuZGxlKCBkaXJlY3Rpb24sIGluZGV4ICkpICk7CgkJfQoKCQlyZXR1cm4gaGFuZGxlczsKCX0KCgkvLyBJbml0aWFsaXplIGEgc2luZ2xlIHNsaWRlci4KCWZ1bmN0aW9uIGFkZFNsaWRlciAoIGRpcmVjdGlvbiwgb3JpZW50YXRpb24sIHRhcmdldCApIHsKCgkJLy8gQXBwbHkgY2xhc3NlcyBhbmQgZGF0YSB0byB0aGUgdGFyZ2V0LgoJCWFkZENsYXNzKHRhcmdldCwgY3NzQ2xhc3Nlc1swXSk7CgkJYWRkQ2xhc3ModGFyZ2V0LCBjc3NDbGFzc2VzWzggKyBkaXJlY3Rpb25dKTsKCQlhZGRDbGFzcyh0YXJnZXQsIGNzc0NsYXNzZXNbNCArIG9yaWVudGF0aW9uXSk7CgoJCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCQlhZGRDbGFzcyhkaXYsIGNzc0NsYXNzZXNbMV0pOwoJCXRhcmdldC5hcHBlbmRDaGlsZChkaXYpOwoJCXJldHVybiBkaXY7Cgl9CgoKCWZ1bmN0aW9uIGFkZFRvb2x0aXAgKCBoYW5kbGUsIGluZGV4ICkgewoKCQlpZiAoICFvcHRpb25zLnRvb2x0aXBzW2luZGV4XSApIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCQllbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXNbMThdOwoJCXJldHVybiBoYW5kbGUuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChlbGVtZW50KTsKCX0KCgkvLyBUaGUgdG9vbHRpcHMgb3B0aW9uIGlzIGEgc2hvcnRoYW5kIGZvciB1c2luZyB0aGUgJ3VwZGF0ZScgZXZlbnQuCglmdW5jdGlvbiB0b29sdGlwcyAoICkgewoKCQlpZiAoIG9wdGlvbnMuZGlyICkgewoJCQlvcHRpb25zLnRvb2x0aXBzLnJldmVyc2UoKTsKCQl9CgoJCS8vIFRvb2x0aXBzIGFyZSBhZGRlZCB3aXRoIG9wdGlvbnMudG9vbHRpcHMgaW4gb3JpZ2luYWwgb3JkZXIuCgkJdmFyIHRpcHMgPSBzY29wZV9IYW5kbGVzLm1hcChhZGRUb29sdGlwKTsKCgkJaWYgKCBvcHRpb25zLmRpciApIHsKCQkJdGlwcy5yZXZlcnNlKCk7CgkJCW9wdGlvbnMudG9vbHRpcHMucmV2ZXJzZSgpOwoJCX0KCgkJYmluZEV2ZW50KCd1cGRhdGUnLCBmdW5jdGlvbihmLCBvLCByKSB7CgkJCWlmICggdGlwc1tvXSApIHsKCQkJCXRpcHNbb10uaW5uZXJIVE1MID0gb3B0aW9ucy50b29sdGlwc1tvXSA9PT0gdHJ1ZSA/IGZbb10gOiBvcHRpb25zLnRvb2x0aXBzW29dLnRvKHJbb10pOwoJCQl9CgkJfSk7Cgl9CgoKCWZ1bmN0aW9uIGdldEdyb3VwICggbW9kZSwgdmFsdWVzLCBzdGVwcGVkICkgewoKCQkvLyBVc2UgdGhlIHJhbmdlLgoJCWlmICggbW9kZSA9PT0gJ3JhbmdlJyB8fCBtb2RlID09PSAnc3RlcHMnICkgewoJCQlyZXR1cm4gc2NvcGVfU3BlY3RydW0ueFZhbDsKCQl9CgoJCWlmICggbW9kZSA9PT0gJ2NvdW50JyApIHsKCgkJCS8vIERpdmlkZSAwIC0gMTAwIGluICdjb3VudCcgcGFydHMuCgkJCXZhciBzcHJlYWQgPSAoIDEwMCAvICh2YWx1ZXMtMSkgKSwgdiwgaSA9IDA7CgkJCXZhbHVlcyA9IFtdOwoKCQkJLy8gTGlzdCB0aGVzZSBwYXJ0cyBhbmQgaGF2ZSB0aGVtIGhhbmRsZWQgYXMgJ3Bvc2l0aW9ucycuCgkJCXdoaWxlICgodj1pKysqc3ByZWFkKSA8PSAxMDAgKSB7CgkJCQl2YWx1ZXMucHVzaCh2KTsKCQkJfQoKCQkJbW9kZSA9ICdwb3NpdGlvbnMnOwoJCX0KCgkJaWYgKCBtb2RlID09PSAncG9zaXRpb25zJyApIHsKCgkJCS8vIE1hcCBhbGwgcGVyY2VudGFnZXMgdG8gb24tcmFuZ2UgdmFsdWVzLgoJCQlyZXR1cm4gdmFsdWVzLm1hcChmdW5jdGlvbiggdmFsdWUgKXsKCQkJCXJldHVybiBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcoIHN0ZXBwZWQgPyBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKCB2YWx1ZSApIDogdmFsdWUgKTsKCQkJfSk7CgkJfQoKCQlpZiAoIG1vZGUgPT09ICd2YWx1ZXMnICkgewoKCQkJLy8gSWYgdGhlIHZhbHVlIG11c3QgYmUgc3RlcHBlZCwgaXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgcGVyY2VudGFnZSBmaXJzdC4KCQkJaWYgKCBzdGVwcGVkICkgewoKCQkJCXJldHVybiB2YWx1ZXMubWFwKGZ1bmN0aW9uKCB2YWx1ZSApewoKCQkJCQkvLyBDb252ZXJ0IHRvIHBlcmNlbnRhZ2UsIGFwcGx5IHN0ZXAsIHJldHVybiB0byB2YWx1ZS4KCQkJCQlyZXR1cm4gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKCBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKCBzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKCB2YWx1ZSApICkgKTsKCQkJCX0pOwoKCQkJfQoKCQkJLy8gT3RoZXJ3aXNlLCB3ZSBjYW4gc2ltcGx5IHVzZSB0aGUgdmFsdWVzLgoJCQlyZXR1cm4gdmFsdWVzOwoJCX0KCX0KCglmdW5jdGlvbiBnZW5lcmF0ZVNwcmVhZCAoIGRlbnNpdHksIG1vZGUsIGdyb3VwICkgewoKCQlmdW5jdGlvbiBzYWZlSW5jcmVtZW50KHZhbHVlLCBpbmNyZW1lbnQpIHsKCQkJLy8gQXZvaWQgZmxvYXRpbmcgcG9pbnQgdmFyaWFuY2UgYnkgZHJvcHBpbmcgdGhlIHNtYWxsZXN0IGRlY2ltYWwgcGxhY2VzLgoJCQlyZXR1cm4gKHZhbHVlICsgaW5jcmVtZW50KS50b0ZpeGVkKDcpIC8gMTsKCQl9CgoJCXZhciBvcmlnaW5hbFNwZWN0cnVtRGlyZWN0aW9uID0gc2NvcGVfU3BlY3RydW0uZGlyZWN0aW9uLAoJCQlpbmRleGVzID0ge30sCgkJCWZpcnN0SW5SYW5nZSA9IHNjb3BlX1NwZWN0cnVtLnhWYWxbMF0sCgkJCWxhc3RJblJhbmdlID0gc2NvcGVfU3BlY3RydW0ueFZhbFtzY29wZV9TcGVjdHJ1bS54VmFsLmxlbmd0aC0xXSwKCQkJaWdub3JlRmlyc3QgPSBmYWxzZSwKCQkJaWdub3JlTGFzdCA9IGZhbHNlLAoJCQlwcmV2UGN0ID0gMDsKCgkJLy8gVGhpcyBmdW5jdGlvbiBsb29wcyB0aGUgc3BlY3RydW0gaW4gYW4gbHRyIGxpbmVhciBmYXNoaW9uLAoJCS8vIHdoaWxlIHRoZSB0b1N0ZXBwaW5nIG1ldGhvZCBpcyBkaXJlY3Rpb24gYXdhcmUuIFRyaWNrIGl0IGludG8KCQkvLyBiZWxpZXZpbmcgaXQgaXMgbHRyLgoJCXNjb3BlX1NwZWN0cnVtLmRpcmVjdGlvbiA9IDA7CgoJCS8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGdyb3VwLCBzb3J0IGl0IGFuZCBmaWx0ZXIgYXdheSBhbGwgZHVwbGljYXRlcy4KCQlncm91cCA9IHVuaXF1ZShncm91cC5zbGljZSgpLnNvcnQoZnVuY3Rpb24oYSwgYil7IHJldHVybiBhIC0gYjsgfSkpOwoKCQkvLyBNYWtlIHN1cmUgdGhlIHJhbmdlIHN0YXJ0cyB3aXRoIHRoZSBmaXJzdCBlbGVtZW50LgoJCWlmICggZ3JvdXBbMF0gIT09IGZpcnN0SW5SYW5nZSApIHsKCQkJZ3JvdXAudW5zaGlmdChmaXJzdEluUmFuZ2UpOwoJCQlpZ25vcmVGaXJzdCA9IHRydWU7CgkJfQoKCQkvLyBMaWtld2lzZSBmb3IgdGhlIGxhc3Qgb25lLgoJCWlmICggZ3JvdXBbZ3JvdXAubGVuZ3RoIC0gMV0gIT09IGxhc3RJblJhbmdlICkgewoJCQlncm91cC5wdXNoKGxhc3RJblJhbmdlKTsKCQkJaWdub3JlTGFzdCA9IHRydWU7CgkJfQoKCQlncm91cC5mb3JFYWNoKGZ1bmN0aW9uICggY3VycmVudCwgaW5kZXggKSB7CgoJCQkvLyBHZXQgdGhlIGN1cnJlbnQgc3RlcCBhbmQgdGhlIGxvd2VyICsgdXBwZXIgcG9zaXRpb25zLgoJCQl2YXIgc3RlcCwgaSwgcSwKCQkJCWxvdyA9IGN1cnJlbnQsCgkJCQloaWdoID0gZ3JvdXBbaW5kZXgrMV0sCgkJCQluZXdQY3QsIHBjdERpZmZlcmVuY2UsIHBjdFBvcywgdHlwZSwKCQkJCXN0ZXBzLCByZWFsU3RlcHMsIHN0ZXBzaXplOwoKCQkJLy8gV2hlbiB1c2luZyAnc3RlcHMnIG1vZGUsIHVzZSB0aGUgcHJvdmlkZWQgc3RlcHMuCgkJCS8vIE90aGVyd2lzZSwgd2UnbGwgc3RlcCBvbiB0byB0aGUgbmV4dCBzdWJyYW5nZS4KCQkJaWYgKCBtb2RlID09PSAnc3RlcHMnICkgewoJCQkJc3RlcCA9IHNjb3BlX1NwZWN0cnVtLnhOdW1TdGVwc1sgaW5kZXggXTsKCQkJfQoKCQkJLy8gRGVmYXVsdCB0byBhICdmdWxsJyBzdGVwLgoJCQlpZiAoICFzdGVwICkgewoJCQkJc3RlcCA9IGhpZ2gtbG93OwoJCQl9CgoJCQkvLyBMb3cgY2FuIGJlIDAsIHNvIHRlc3QgZm9yIGZhbHNlLiBJZiBoaWdoIGlzIHVuZGVmaW5lZCwKCQkJLy8gd2UgYXJlIGF0IHRoZSBsYXN0IHN1YnJhbmdlLiBJbmRleCAwIGlzIGFscmVhZHkgaGFuZGxlZC4KCQkJaWYgKCBsb3cgPT09IGZhbHNlIHx8IGhpZ2ggPT09IHVuZGVmaW5lZCApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gRmluZCBhbGwgc3RlcHMgaW4gdGhlIHN1YnJhbmdlLgoJCQlmb3IgKCBpID0gbG93OyBpIDw9IGhpZ2g7IGkgPSBzYWZlSW5jcmVtZW50KGksIHN0ZXApICkgewoKCQkJCS8vIEdldCB0aGUgcGVyY2VudGFnZSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgc3RlcCwKCQkJCS8vIGNhbGN1bGF0ZSB0aGUgc2l6ZSBmb3IgdGhlIHN1YnJhbmdlLgoJCQkJbmV3UGN0ID0gc2NvcGVfU3BlY3RydW0udG9TdGVwcGluZyggaSApOwoJCQkJcGN0RGlmZmVyZW5jZSA9IG5ld1BjdCAtIHByZXZQY3Q7CgoJCQkJc3RlcHMgPSBwY3REaWZmZXJlbmNlIC8gZGVuc2l0eTsKCQkJCXJlYWxTdGVwcyA9IE1hdGgucm91bmQoc3RlcHMpOwoKCQkJCS8vIFRoaXMgcmF0aW8gcmVwcmVzZW50cyB0aGUgYW1tb3VudCBvZiBwZXJjZW50YWdlLXNwYWNlIGEgcG9pbnQgaW5kaWNhdGVzLgoJCQkJLy8gRm9yIGEgZGVuc2l0eSAxIHRoZSBwb2ludHMvcGVyY2VudGFnZSA9IDEuIEZvciBkZW5zaXR5IDIsIHRoYXQgcGVyY2VudGFnZSBuZWVkcyB0byBiZSByZS1kZXZpZGVkLgoJCQkJLy8gUm91bmQgdGhlIHBlcmNlbnRhZ2Ugb2Zmc2V0IHRvIGFuIGV2ZW4gbnVtYmVyLCB0aGVuIGRpdmlkZSBieSB0d28KCQkJCS8vIHRvIHNwcmVhZCB0aGUgb2Zmc2V0IG9uIGJvdGggc2lkZXMgb2YgdGhlIHJhbmdlLgoJCQkJc3RlcHNpemUgPSBwY3REaWZmZXJlbmNlL3JlYWxTdGVwczsKCgkJCQkvLyBEaXZpZGUgYWxsIHBvaW50cyBldmVubHksIGFkZGluZyB0aGUgY29ycmVjdCBudW1iZXIgdG8gdGhpcyBzdWJyYW5nZS4KCQkJCS8vIFJ1biB1cCB0byA8PSBzbyB0aGF0IDEwMCUgZ2V0cyBhIHBvaW50LCBldmVudCBpZiBpZ25vcmVMYXN0IGlzIHNldC4KCQkJCWZvciAoIHEgPSAxOyBxIDw9IHJlYWxTdGVwczsgcSArPSAxICkgewoKCQkJCQkvLyBUaGUgcmF0aW8gYmV0d2VlbiB0aGUgcm91bmRlZCB2YWx1ZSBhbmQgdGhlIGFjdHVhbCBzaXplIG1pZ2h0IGJlIH4xJSBvZmYuCgkJCQkJLy8gQ29ycmVjdCB0aGUgcGVyY2VudGFnZSBvZmZzZXQgYnkgdGhlIG51bWJlciBvZiBwb2ludHMKCQkJCQkvLyBwZXIgc3VicmFuZ2UuIGRlbnNpdHkgPSAxIHdpbGwgcmVzdWx0IGluIDEwMCBwb2ludHMgb24gdGhlCgkJCQkJLy8gZnVsbCByYW5nZSwgMiBmb3IgNTAsIDQgZm9yIDI1LCBldGMuCgkJCQkJcGN0UG9zID0gcHJldlBjdCArICggcSAqIHN0ZXBzaXplICk7CgkJCQkJaW5kZXhlc1twY3RQb3MudG9GaXhlZCg1KV0gPSBbJ3gnLCAwXTsKCQkJCX0KCgkJCQkvLyBEZXRlcm1pbmUgdGhlIHBvaW50IHR5cGUuCgkJCQl0eXBlID0gKGdyb3VwLmluZGV4T2YoaSkgPiAtMSkgPyAxIDogKCBtb2RlID09PSAnc3RlcHMnID8gMiA6IDAgKTsKCgkJCQkvLyBFbmZvcmNlIHRoZSAnaWdub3JlRmlyc3QnIG9wdGlvbiBieSBvdmVyd3JpdGluZyB0aGUgdHlwZSBmb3IgMC4KCQkJCWlmICggIWluZGV4ICYmIGlnbm9yZUZpcnN0ICkgewoJCQkJCXR5cGUgPSAwOwoJCQkJfQoKCQkJCWlmICggIShpID09PSBoaWdoICYmIGlnbm9yZUxhc3QpKSB7CgkJCQkJLy8gTWFyayB0aGUgJ3R5cGUnIG9mIHRoaXMgcG9pbnQuIDAgPSBwbGFpbiwgMSA9IHJlYWwgdmFsdWUsIDIgPSBzdGVwIHZhbHVlLgoJCQkJCWluZGV4ZXNbbmV3UGN0LnRvRml4ZWQoNSldID0gW2ksIHR5cGVdOwoJCQkJfQoKCQkJCS8vIFVwZGF0ZSB0aGUgcGVyY2VudGFnZSBjb3VudC4KCQkJCXByZXZQY3QgPSBuZXdQY3Q7CgkJCX0KCQl9KTsKCgkJLy8gUmVzZXQgdGhlIHNwZWN0cnVtLgoJCXNjb3BlX1NwZWN0cnVtLmRpcmVjdGlvbiA9IG9yaWdpbmFsU3BlY3RydW1EaXJlY3Rpb247CgoJCXJldHVybiBpbmRleGVzOwoJfQoKCWZ1bmN0aW9uIGFkZE1hcmtpbmcgKCBzcHJlYWQsIGZpbHRlckZ1bmMsIGZvcm1hdHRlciApIHsKCgkJdmFyIHN0eWxlID0gWydob3Jpem9udGFsJywgJ3ZlcnRpY2FsJ11bb3B0aW9ucy5vcnRdLAoJCQllbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgoJCWFkZENsYXNzKGVsZW1lbnQsIGNzc0NsYXNzZXNbMjBdKTsKCQlhZGRDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzWzIwXSArICctJyArIHN0eWxlKTsKCgkJZnVuY3Rpb24gZ2V0U2l6ZSggdHlwZSApewoJCQlyZXR1cm4gWyAnLW5vcm1hbCcsICctbGFyZ2UnLCAnLXN1YicgXVt0eXBlXTsKCQl9CgoJCWZ1bmN0aW9uIGdldFRhZ3MoIG9mZnNldCwgc291cmNlLCB2YWx1ZXMgKSB7CgkJCXJldHVybiAnY2xhc3M9IicgKyBzb3VyY2UgKyAnICcgKwoJCQkJc291cmNlICsgJy0nICsgc3R5bGUgKyAnICcgKwoJCQkJc291cmNlICsgZ2V0U2l6ZSh2YWx1ZXNbMV0pICsKCQkJCSciIHN0eWxlPSInICsgb3B0aW9ucy5zdHlsZSArICc6ICcgKyBvZmZzZXQgKyAnJSInOwoJCX0KCgkJZnVuY3Rpb24gYWRkU3ByZWFkICggb2Zmc2V0LCB2YWx1ZXMgKXsKCgkJCWlmICggc2NvcGVfU3BlY3RydW0uZGlyZWN0aW9uICkgewoJCQkJb2Zmc2V0ID0gMTAwIC0gb2Zmc2V0OwoJCQl9CgoJCQkvLyBBcHBseSB0aGUgZmlsdGVyIGZ1bmN0aW9uLCBpZiBpdCBpcyBzZXQuCgkJCXZhbHVlc1sxXSA9ICh2YWx1ZXNbMV0gJiYgZmlsdGVyRnVuYykgPyBmaWx0ZXJGdW5jKHZhbHVlc1swXSwgdmFsdWVzWzFdKSA6IHZhbHVlc1sxXTsKCgkJCS8vIEFkZCBhIG1hcmtlciBmb3IgZXZlcnkgcG9pbnQKCQkJZWxlbWVudC5pbm5lckhUTUwgKz0gJzxkaXYgJyArIGdldFRhZ3Mob2Zmc2V0LCBjc3NDbGFzc2VzWzIxXSwgdmFsdWVzKSArICc+PC9kaXY+JzsKCgkJCS8vIFZhbHVlcyBhcmUgb25seSBhcHBlbmRlZCBmb3IgcG9pbnRzIG1hcmtlZCAnMScgb3IgJzInLgoJCQlpZiAoIHZhbHVlc1sxXSApIHsKCQkJCWVsZW1lbnQuaW5uZXJIVE1MICs9ICc8ZGl2ICcrZ2V0VGFncyhvZmZzZXQsIGNzc0NsYXNzZXNbMjJdLCB2YWx1ZXMpKyc+JyArIGZvcm1hdHRlci50byh2YWx1ZXNbMF0pICsgJzwvZGl2Pic7CgkJCX0KCQl9CgoJCS8vIEFwcGVuZCBhbGwgcG9pbnRzLgoJCU9iamVjdC5rZXlzKHNwcmVhZCkuZm9yRWFjaChmdW5jdGlvbihhKXsKCQkJYWRkU3ByZWFkKGEsIHNwcmVhZFthXSk7CgkJfSk7CgoJCXJldHVybiBlbGVtZW50OwoJfQoKCWZ1bmN0aW9uIHBpcHMgKCBncmlkICkgewoKCXZhciBtb2RlID0gZ3JpZC5tb2RlLAoJCWRlbnNpdHkgPSBncmlkLmRlbnNpdHkgfHwgMSwKCQlmaWx0ZXIgPSBncmlkLmZpbHRlciB8fCBmYWxzZSwKCQl2YWx1ZXMgPSBncmlkLnZhbHVlcyB8fCBmYWxzZSwKCQlzdGVwcGVkID0gZ3JpZC5zdGVwcGVkIHx8IGZhbHNlLAoJCWdyb3VwID0gZ2V0R3JvdXAoIG1vZGUsIHZhbHVlcywgc3RlcHBlZCApLAoJCXNwcmVhZCA9IGdlbmVyYXRlU3ByZWFkKCBkZW5zaXR5LCBtb2RlLCBncm91cCApLAoJCWZvcm1hdCA9IGdyaWQuZm9ybWF0IHx8IHsKCQkJdG86IE1hdGgucm91bmQKCQl9OwoKCQlyZXR1cm4gc2NvcGVfVGFyZ2V0LmFwcGVuZENoaWxkKGFkZE1hcmtpbmcoCgkJCXNwcmVhZCwKCQkJZmlsdGVyLAoJCQlmb3JtYXQKCQkpKTsKCX0KCgoJLy8gU2hvcnRoYW5kIGZvciBiYXNlIGRpbWVuc2lvbnMuCglmdW5jdGlvbiBiYXNlU2l6ZSAoICkgewoJCXJldHVybiBzY29wZV9CYXNlWydvZmZzZXQnICsgWydXaWR0aCcsICdIZWlnaHQnXVtvcHRpb25zLm9ydF1dOwoJfQoKCS8vIEV4dGVybmFsIGV2ZW50IGhhbmRsaW5nCglmdW5jdGlvbiBmaXJlRXZlbnQgKCBldmVudCwgaGFuZGxlTnVtYmVyLCB0YXAgKSB7CgoJCWlmICggaGFuZGxlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5oYW5kbGVzICE9PSAxICkgewoJCQloYW5kbGVOdW1iZXIgPSBNYXRoLmFicyhoYW5kbGVOdW1iZXIgLSBvcHRpb25zLmRpcik7CgkJfQoKCQlPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24oIHRhcmdldEV2ZW50ICkgewoKCQkJdmFyIGV2ZW50VHlwZSA9IHRhcmdldEV2ZW50LnNwbGl0KCcuJylbMF07CgoJCQlpZiAoIGV2ZW50ID09PSBldmVudFR5cGUgKSB7CgkJCQlzY29wZV9FdmVudHNbdGFyZ2V0RXZlbnRdLmZvckVhY2goZnVuY3Rpb24oIGNhbGxiYWNrICkgewoJCQkJCS8vIC5yZXZlcnNlIGlzIGluIHBsYWNlCgkJCQkJLy8gUmV0dXJuIHZhbHVlcyBhcyBhcnJheSwgc28gYXJnXzFbYXJnXzJdIGlzIGFsd2F5cyB2YWxpZC4KCQkJCQljYWxsYmFjay5jYWxsKHNjb3BlX1NlbGYsIGFzQXJyYXkodmFsdWVHZXQoKSksIGhhbmRsZU51bWJlciwgYXNBcnJheShpblNsaWRlck9yZGVyKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHNjb3BlX1ZhbHVlcykpKSwgdGFwIHx8IGZhbHNlKTsKCQkJCX0pOwoJCQl9CgkJfSk7Cgl9CgoJLy8gUmV0dXJucyB0aGUgaW5wdXQgYXJyYXksIHJlc3BlY3RpbmcgdGhlIHNsaWRlciBkaXJlY3Rpb24gY29uZmlndXJhdGlvbi4KCWZ1bmN0aW9uIGluU2xpZGVyT3JkZXIgKCB2YWx1ZXMgKSB7CgoJCS8vIElmIG9ubHkgb25lIGhhbmRsZSBpcyB1c2VkLCByZXR1cm4gYSBzaW5nbGUgdmFsdWUuCgkJaWYgKCB2YWx1ZXMubGVuZ3RoID09PSAxICl7CgkJCXJldHVybiB2YWx1ZXNbMF07CgkJfQoKCQlpZiAoIG9wdGlvbnMuZGlyICkgewoJCQlyZXR1cm4gdmFsdWVzLnJldmVyc2UoKTsKCQl9CgoJCXJldHVybiB2YWx1ZXM7Cgl9CgoKCS8vIEhhbmRsZXIgZm9yIGF0dGFjaGluZyBldmVudHMgdHJvdWdoIGEgcHJveHkuCglmdW5jdGlvbiBhdHRhY2ggKCBldmVudHMsIGVsZW1lbnQsIGNhbGxiYWNrLCBkYXRhICkgewoKCQkvLyBUaGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvICdmaWx0ZXInIGV2ZW50cyB0byB0aGUgc2xpZGVyLgoJCS8vIGVsZW1lbnQgaXMgYSBub2RlLCBub3QgYSBub2RlTGlzdAoKCQl2YXIgbWV0aG9kID0gZnVuY3Rpb24gKCBlICl7CgoJCQlpZiAoIHNjb3BlX1RhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCgkJCS8vIFN0b3AgaWYgYW4gYWN0aXZlICd0YXAnIHRyYW5zaXRpb24gaXMgdGFraW5nIHBsYWNlLgoJCQlpZiAoIGhhc0NsYXNzKHNjb3BlX1RhcmdldCwgY3NzQ2xhc3Nlc1sxNF0pICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgoJCQllID0gZml4RXZlbnQoZSwgZGF0YS5wYWdlT2Zmc2V0KTsKCgkJCS8vIElnbm9yZSByaWdodCBvciBtaWRkbGUgY2xpY2tzIG9uIHN0YXJ0ICM0NTQKCQkJaWYgKCBldmVudHMgPT09IGFjdGlvbnMuc3RhcnQgJiYgZS5idXR0b25zICE9PSB1bmRlZmluZWQgJiYgZS5idXR0b25zID4gMSApIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoKCQkJLy8gSWdub3JlIHJpZ2h0IG9yIG1pZGRsZSBjbGlja3Mgb24gc3RhcnQgIzQ1NAoJCQlpZiAoIGRhdGEuaG92ZXIgJiYgZS5idXR0b25zICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgoJCQllLmNhbGNQb2ludCA9IGUucG9pbnRzWyBvcHRpb25zLm9ydCBdOwoKCQkJLy8gQ2FsbCB0aGUgZXZlbnQgaGFuZGxlciB3aXRoIHRoZSBldmVudCBbIGFuZCBhZGRpdGlvbmFsIGRhdGEgXS4KCQkJY2FsbGJhY2sgKCBlLCBkYXRhICk7CgoJCX0sIG1ldGhvZHMgPSBbXTsKCgkJLy8gQmluZCBhIGNsb3N1cmUgb24gdGhlIHRhcmdldCBmb3IgZXZlcnkgZXZlbnQgdHlwZS4KCQlldmVudHMuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uKCBldmVudE5hbWUgKXsKCQkJZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbWV0aG9kLCBmYWxzZSk7CgkJCW1ldGhvZHMucHVzaChbZXZlbnROYW1lLCBtZXRob2RdKTsKCQl9KTsKCgkJcmV0dXJuIG1ldGhvZHM7Cgl9CgoJLy8gSGFuZGxlIG1vdmVtZW50IG9uIGRvY3VtZW50IGZvciBoYW5kbGUgYW5kIHJhbmdlIGRyYWcuCglmdW5jdGlvbiBtb3ZlICggZXZlbnQsIGRhdGEgKSB7CgoJCS8vIEZpeCAjNDk4CgkJLy8gQ2hlY2sgdmFsdWUgb2YgLmJ1dHRvbnMgaW4gJ3N0YXJ0JyB0byB3b3JrIGFyb3VuZCBhIGJ1ZyBpbiBJRTEwIG1vYmlsZSAoZGF0YS5idXR0b25zUHJvcGVydHkpLgoJCS8vIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvOTI3MDA1L21vYmlsZS1pZTEwLXdpbmRvd3MtcGhvbmUtYnV0dG9ucy1wcm9wZXJ0eS1vZi1wb2ludGVybW92ZS1ldmVudC1hbHdheXMtemVybwoJCS8vIElFOSBoYXMgLmJ1dHRvbnMgYW5kIC53aGljaCB6ZXJvIG9uIG1vdXNlbW92ZS4KCQkvLyBGaXJlZm94IGJyZWFrcyB0aGUgc3BlYyBNRE4gZGVmaW5lcy4KCQlpZiAoIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoIk1TSUUgOSIpID09PSAtMSAmJiBldmVudC5idXR0b25zID09PSAwICYmIGRhdGEuYnV0dG9uc1Byb3BlcnR5ICE9PSAwICkgewoJCQlyZXR1cm4gZW5kKGV2ZW50LCBkYXRhKTsKCQl9CgoJCXZhciBoYW5kbGVzID0gZGF0YS5oYW5kbGVzIHx8IHNjb3BlX0hhbmRsZXMsIHBvc2l0aW9ucywgc3RhdGUgPSBmYWxzZSwKCQkJcHJvcG9zYWwgPSAoKGV2ZW50LmNhbGNQb2ludCAtIGRhdGEuc3RhcnQpICogMTAwKSAvIGRhdGEuYmFzZVNpemUsCgkJCWhhbmRsZU51bWJlciA9IGhhbmRsZXNbMF0gPT09IHNjb3BlX0hhbmRsZXNbMF0gPyAwIDogMSwgaTsKCgkJLy8gQ2FsY3VsYXRlIHJlbGF0aXZlIHBvc2l0aW9ucyBmb3IgdGhlIGhhbmRsZXMuCgkJcG9zaXRpb25zID0gZ2V0UG9zaXRpb25zKCBwcm9wb3NhbCwgZGF0YS5wb3NpdGlvbnMsIGhhbmRsZXMubGVuZ3RoID4gMSk7CgoJCXN0YXRlID0gc2V0SGFuZGxlICggaGFuZGxlc1swXSwgcG9zaXRpb25zW2hhbmRsZU51bWJlcl0sIGhhbmRsZXMubGVuZ3RoID09PSAxICk7CgoJCWlmICggaGFuZGxlcy5sZW5ndGggPiAxICkgewoKCQkJc3RhdGUgPSBzZXRIYW5kbGUgKCBoYW5kbGVzWzFdLCBwb3NpdGlvbnNbaGFuZGxlTnVtYmVyPzA6MV0sIGZhbHNlICkgfHwgc3RhdGU7CgoJCQlpZiAoIHN0YXRlICkgewoJCQkJLy8gZmlyZSBmb3IgYm90aCBoYW5kbGVzCgkJCQlmb3IgKCBpID0gMDsgaSA8IGRhdGEuaGFuZGxlcy5sZW5ndGg7IGkrKyApIHsKCQkJCQlmaXJlRXZlbnQoJ3NsaWRlJywgaSk7CgkJCQl9CgkJCX0KCQl9IGVsc2UgaWYgKCBzdGF0ZSApIHsKCQkJLy8gRmlyZSBmb3IgYSBzaW5nbGUgaGFuZGxlCgkJCWZpcmVFdmVudCgnc2xpZGUnLCBoYW5kbGVOdW1iZXIpOwoJCX0KCX0KCgkvLyBVbmJpbmQgbW92ZSBldmVudHMgb24gZG9jdW1lbnQsIGNhbGwgY2FsbGJhY2tzLgoJZnVuY3Rpb24gZW5kICggZXZlbnQsIGRhdGEgKSB7CgoJCS8vIFRoZSBoYW5kbGUgaXMgbm8gbG9uZ2VyIGFjdGl2ZSwgc28gcmVtb3ZlIHRoZSBjbGFzcy4KCQl2YXIgYWN0aXZlID0gc2NvcGVfQmFzZS5xdWVyeVNlbGVjdG9yKCAnLicgKyBjc3NDbGFzc2VzWzE1XSApLAoJCQloYW5kbGVOdW1iZXIgPSBkYXRhLmhhbmRsZXNbMF0gPT09IHNjb3BlX0hhbmRsZXNbMF0gPyAwIDogMTsKCgkJaWYgKCBhY3RpdmUgIT09IG51bGwgKSB7CgkJCXJlbW92ZUNsYXNzKGFjdGl2ZSwgY3NzQ2xhc3Nlc1sxNV0pOwoJCX0KCgkJLy8gUmVtb3ZlIGN1cnNvciBzdHlsZXMgYW5kIHRleHQtc2VsZWN0aW9uIGV2ZW50cyBib3VuZCB0byB0aGUgYm9keS4KCQlpZiAoIGV2ZW50LmN1cnNvciApIHsKCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJzsKCQkJZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3RzdGFydCcsIGRvY3VtZW50LmJvZHkubm9VaUxpc3RlbmVyKTsKCQl9CgoJCXZhciBkID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKCQkvLyBVbmJpbmQgdGhlIG1vdmUgYW5kIGVuZCBldmVudHMsIHdoaWNoIGFyZSBhZGRlZCBvbiAnc3RhcnQnLgoJCWQubm9VaUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKCBjICkgewoJCQlkLnJlbW92ZUV2ZW50TGlzdGVuZXIoY1swXSwgY1sxXSk7CgkJfSk7CgoJCS8vIFJlbW92ZSBkcmFnZ2luZyBjbGFzcy4KCQlyZW1vdmVDbGFzcyhzY29wZV9UYXJnZXQsIGNzc0NsYXNzZXNbMTJdKTsKCgkJLy8gRmlyZSB0aGUgY2hhbmdlIGFuZCBzZXQgZXZlbnRzLgoJCWZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyKTsKCQlmaXJlRXZlbnQoJ2NoYW5nZScsIGhhbmRsZU51bWJlcik7CgoJCS8vIElmIHRoaXMgaXMgYSBzdGFuZGFyZCBoYW5kbGUgbW92ZW1lbnQsIGZpcmUgdGhlIGVuZCBldmVudC4KCQlpZiAoIGRhdGEuaGFuZGxlTnVtYmVyICE9PSB1bmRlZmluZWQgKSB7CgkJCWZpcmVFdmVudCgnZW5kJywgZGF0YS5oYW5kbGVOdW1iZXIpOwoJCX0KCX0KCgkvLyBGaXJlICdlbmQnIHdoZW4gYSBtb3VzZSBvciBwZW4gbGVhdmVzIHRoZSBkb2N1bWVudC4KCWZ1bmN0aW9uIGRvY3VtZW50TGVhdmUgKCBldmVudCwgZGF0YSApIHsKCQlpZiAoIGV2ZW50LnR5cGUgPT09ICJtb3VzZW91dCIgJiYgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAiSFRNTCIgJiYgZXZlbnQucmVsYXRlZFRhcmdldCA9PT0gbnVsbCApewoJCQllbmQgKCBldmVudCwgZGF0YSApOwoJCX0KCX0KCgkvLyBCaW5kIG1vdmUgZXZlbnRzIG9uIGRvY3VtZW50LgoJZnVuY3Rpb24gc3RhcnQgKCBldmVudCwgZGF0YSApIHsKCgkJdmFyIGQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgoJCS8vIE1hcmsgdGhlIGhhbmRsZSBhcyAnYWN0aXZlJyBzbyBpdCBjYW4gYmUgc3R5bGVkLgoJCWlmICggZGF0YS5oYW5kbGVzLmxlbmd0aCA9PT0gMSApIHsKCQkJYWRkQ2xhc3MoZGF0YS5oYW5kbGVzWzBdLmNoaWxkcmVuWzBdLCBjc3NDbGFzc2VzWzE1XSk7CgoJCQkvLyBTdXBwb3J0ICdkaXNhYmxlZCcgaGFuZGxlcwoJCQlpZiAoIGRhdGEuaGFuZGxlc1swXS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9CgoJCS8vIEZpeCAjNTUxLCB3aGVyZSBhIGhhbmRsZSBnZXRzIHNlbGVjdGVkIGluc3RlYWQgb2YgZHJhZ2dlZC4KCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKCQkvLyBBIGRyYWcgc2hvdWxkIG5ldmVyIHByb3BhZ2F0ZSB1cCB0byB0aGUgJ3RhcCcgZXZlbnQuCgkJZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgoJCS8vIEF0dGFjaCB0aGUgbW92ZSBhbmQgZW5kIGV2ZW50cy4KCQl2YXIgbW92ZUV2ZW50ID0gYXR0YWNoKGFjdGlvbnMubW92ZSwgZCwgbW92ZSwgewoJCQlzdGFydDogZXZlbnQuY2FsY1BvaW50LAoJCQliYXNlU2l6ZTogYmFzZVNpemUoKSwKCQkJcGFnZU9mZnNldDogZXZlbnQucGFnZU9mZnNldCwKCQkJaGFuZGxlczogZGF0YS5oYW5kbGVzLAoJCQloYW5kbGVOdW1iZXI6IGRhdGEuaGFuZGxlTnVtYmVyLAoJCQlidXR0b25zUHJvcGVydHk6IGV2ZW50LmJ1dHRvbnMsCgkJCXBvc2l0aW9uczogWwoJCQkJc2NvcGVfTG9jYXRpb25zWzBdLAoJCQkJc2NvcGVfTG9jYXRpb25zW3Njb3BlX0hhbmRsZXMubGVuZ3RoIC0gMV0KCQkJXQoJCX0pLCBlbmRFdmVudCA9IGF0dGFjaChhY3Rpb25zLmVuZCwgZCwgZW5kLCB7CgkJCWhhbmRsZXM6IGRhdGEuaGFuZGxlcywKCQkJaGFuZGxlTnVtYmVyOiBkYXRhLmhhbmRsZU51bWJlcgoJCX0pOwoKCQl2YXIgb3V0RXZlbnQgPSBhdHRhY2goIm1vdXNlb3V0IiwgZCwgZG9jdW1lbnRMZWF2ZSwgewoJCQloYW5kbGVzOiBkYXRhLmhhbmRsZXMsCgkJCWhhbmRsZU51bWJlcjogZGF0YS5oYW5kbGVOdW1iZXIKCQl9KTsKCgkJZC5ub1VpTGlzdGVuZXJzID0gbW92ZUV2ZW50LmNvbmNhdChlbmRFdmVudCwgb3V0RXZlbnQpOwoKCQkvLyBUZXh0IHNlbGVjdGlvbiBpc24ndCBhbiBpc3N1ZSBvbiB0b3VjaCBkZXZpY2VzLAoJCS8vIHNvIGFkZGluZyBjdXJzb3Igc3R5bGVzIGNhbiBiZSBza2lwcGVkLgoJCWlmICggZXZlbnQuY3Vyc29yICkgewoKCQkJLy8gUHJldmVudCB0aGUgJ0knIGN1cnNvciBhbmQgZXh0ZW5kIHRoZSByYW5nZS1kcmFnIGN1cnNvci4KCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBnZXRDb21wdXRlZFN0eWxlKGV2ZW50LnRhcmdldCkuY3Vyc29yOwoKCQkJLy8gTWFyayB0aGUgdGFyZ2V0IHdpdGggYSBkcmFnZ2luZyBzdGF0ZS4KCQkJaWYgKCBzY29wZV9IYW5kbGVzLmxlbmd0aCA+IDEgKSB7CgkJCQlhZGRDbGFzcyhzY29wZV9UYXJnZXQsIGNzc0NsYXNzZXNbMTJdKTsKCQkJfQoKCQkJdmFyIGYgPSBmdW5jdGlvbigpewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9OwoKCQkJZG9jdW1lbnQuYm9keS5ub1VpTGlzdGVuZXIgPSBmOwoKCQkJLy8gUHJldmVudCB0ZXh0IHNlbGVjdGlvbiB3aGVuIGRyYWdnaW5nIHRoZSBoYW5kbGVzLgoJCQlkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0JywgZiwgZmFsc2UpOwoJCX0KCgkJaWYgKCBkYXRhLmhhbmRsZU51bWJlciAhPT0gdW5kZWZpbmVkICkgewoJCQlmaXJlRXZlbnQoJ3N0YXJ0JywgZGF0YS5oYW5kbGVOdW1iZXIpOwoJCX0KCX0KCgkvLyBNb3ZlIGNsb3Nlc3QgaGFuZGxlIHRvIHRhcHBlZCBsb2NhdGlvbi4KCWZ1bmN0aW9uIHRhcCAoIGV2ZW50ICkgewoKCQl2YXIgbG9jYXRpb24gPSBldmVudC5jYWxjUG9pbnQsIHRvdGFsID0gMCwgaGFuZGxlTnVtYmVyLCB0bzsKCgkJLy8gVGhlIHRhcCBldmVudCBzaG91bGRuJ3QgcHJvcGFnYXRlIHVwIGFuZCBjYXVzZSAnZWRnZScgdG8gcnVuLgoJCWV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoKCQkvLyBBZGQgdXAgdGhlIGhhbmRsZSBvZmZzZXRzLgoJCXNjb3BlX0hhbmRsZXMuZm9yRWFjaChmdW5jdGlvbihhKXsKCQkJdG90YWwgKz0gb2Zmc2V0KGEpWyBvcHRpb25zLnN0eWxlIF07CgkJfSk7CgoJCS8vIEZpbmQgdGhlIGhhbmRsZSBjbG9zZXN0IHRvIHRoZSB0YXBwZWQgcG9zaXRpb24uCgkJaGFuZGxlTnVtYmVyID0gKCBsb2NhdGlvbiA8IHRvdGFsLzIgfHwgc2NvcGVfSGFuZGxlcy5sZW5ndGggPT09IDEgKSA/IDAgOiAxOwoKCQlsb2NhdGlvbiAtPSBvZmZzZXQoc2NvcGVfQmFzZSlbIG9wdGlvbnMuc3R5bGUgXTsKCgkJLy8gQ2FsY3VsYXRlIHRoZSBuZXcgcG9zaXRpb24uCgkJdG8gPSAoIGxvY2F0aW9uICogMTAwICkgLyBiYXNlU2l6ZSgpOwoKCQlpZiAoICFvcHRpb25zLmV2ZW50cy5zbmFwICkgewoJCQkvLyBGbGFnIHRoZSBzbGlkZXIgYXMgaXQgaXMgbm93IGluIGEgdHJhbnNpdGlvbmFsIHN0YXRlLgoJCQkvLyBUcmFuc2l0aW9uIHRha2VzIDMwMCBtcywgc28gcmUtZW5hYmxlIHRoZSBzbGlkZXIgYWZ0ZXJ3YXJkcy4KCQkJYWRkQ2xhc3NGb3IoIHNjb3BlX1RhcmdldCwgY3NzQ2xhc3Nlc1sxNF0sIDMwMCApOwoJCX0KCgkJLy8gU3VwcG9ydCAnZGlzYWJsZWQnIGhhbmRsZXMKCQlpZiAoIHNjb3BlX0hhbmRsZXNbaGFuZGxlTnVtYmVyXS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCS8vIEZpbmQgdGhlIGNsb3Nlc3QgaGFuZGxlIGFuZCBjYWxjdWxhdGUgdGhlIHRhcHBlZCBwb2ludC4KCQkvLyBUaGUgc2V0IGhhbmRsZSB0byB0aGUgbmV3IHBvc2l0aW9uLgoJCXNldEhhbmRsZSggc2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdLCB0byApOwoKCQlmaXJlRXZlbnQoJ3NsaWRlJywgaGFuZGxlTnVtYmVyLCB0cnVlKTsKCQlmaXJlRXZlbnQoJ3NldCcsIGhhbmRsZU51bWJlciwgdHJ1ZSk7CgkJZmlyZUV2ZW50KCdjaGFuZ2UnLCBoYW5kbGVOdW1iZXIsIHRydWUpOwoKCQlpZiAoIG9wdGlvbnMuZXZlbnRzLnNuYXAgKSB7CgkJCXN0YXJ0KGV2ZW50LCB7IGhhbmRsZXM6IFtzY29wZV9IYW5kbGVzW2hhbmRsZU51bWJlcl1dIH0pOwoJCX0KCX0KCgkvLyBGaXJlcyBhICdob3ZlcicgZXZlbnQgZm9yIGEgaG92ZXJlZCBtb3VzZS9wZW4gcG9zaXRpb24uCglmdW5jdGlvbiBob3ZlciAoIGV2ZW50ICkgewoKCQl2YXIgbG9jYXRpb24gPSBldmVudC5jYWxjUG9pbnQgLSBvZmZzZXQoc2NvcGVfQmFzZSlbIG9wdGlvbnMuc3R5bGUgXSwKCQkJdG8gPSBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKCggbG9jYXRpb24gKiAxMDAgKSAvIGJhc2VTaXplKCkpLAoJCQl2YWx1ZSA9IHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyggdG8gKTsKCgkJT2JqZWN0LmtleXMoc2NvcGVfRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKCB0YXJnZXRFdmVudCApIHsKCQkJaWYgKCAnaG92ZXInID09PSB0YXJnZXRFdmVudC5zcGxpdCgnLicpWzBdICkgewoJCQkJc2NvcGVfRXZlbnRzW3RhcmdldEV2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uKCBjYWxsYmFjayApIHsKCQkJCQljYWxsYmFjay5jYWxsKCBzY29wZV9TZWxmLCB2YWx1ZSApOwoJCQkJfSk7CgkJCX0KCQl9KTsKCX0KCgkvLyBBdHRhY2ggZXZlbnRzIHRvIHNldmVyYWwgc2xpZGVyIHBhcnRzLgoJZnVuY3Rpb24gZXZlbnRzICggYmVoYXZpb3VyICkgewoKCQl2YXIgaSwgZHJhZzsKCgkJLy8gQXR0YWNoIHRoZSBzdGFuZGFyZCBkcmFnIGV2ZW50IHRvIHRoZSBoYW5kbGVzLgoJCWlmICggIWJlaGF2aW91ci5maXhlZCApIHsKCgkJCWZvciAoIGkgPSAwOyBpIDwgc2NvcGVfSGFuZGxlcy5sZW5ndGg7IGkgKz0gMSApIHsKCgkJCQkvLyBUaGVzZSBldmVudHMgYXJlIG9ubHkgYm91bmQgdG8gdGhlIHZpc3VhbCBoYW5kbGUKCQkJCS8vIGVsZW1lbnQsIG5vdCB0aGUgJ3JlYWwnIG9yaWdpbiBlbGVtZW50LgoJCQkJYXR0YWNoICggYWN0aW9ucy5zdGFydCwgc2NvcGVfSGFuZGxlc1tpXS5jaGlsZHJlblswXSwgc3RhcnQsIHsKCQkJCQloYW5kbGVzOiBbIHNjb3BlX0hhbmRsZXNbaV0gXSwKCQkJCQloYW5kbGVOdW1iZXI6IGkKCQkJCX0pOwoJCQl9CgkJfQoKCQkvLyBBdHRhY2ggdGhlIHRhcCBldmVudCB0byB0aGUgc2xpZGVyIGJhc2UuCgkJaWYgKCBiZWhhdmlvdXIudGFwICkgewoKCQkJYXR0YWNoICggYWN0aW9ucy5zdGFydCwgc2NvcGVfQmFzZSwgdGFwLCB7CgkJCQloYW5kbGVzOiBzY29wZV9IYW5kbGVzCgkJCX0pOwoJCX0KCgkJLy8gRmlyZSBob3ZlciBldmVudHMKCQlpZiAoIGJlaGF2aW91ci5ob3ZlciApIHsKCQkJYXR0YWNoICggYWN0aW9ucy5tb3ZlLCBzY29wZV9CYXNlLCBob3ZlciwgeyBob3ZlcjogdHJ1ZSB9ICk7CgkJCWZvciAoIGkgPSAwOyBpIDwgc2NvcGVfSGFuZGxlcy5sZW5ndGg7IGkgKz0gMSApIHsKCQkJCVsnbW91c2Vtb3ZlIE1TUG9pbnRlck1vdmUgcG9pbnRlcm1vdmUnXS5mb3JFYWNoKGZ1bmN0aW9uKCBldmVudE5hbWUgKXsKCQkJCQlzY29wZV9IYW5kbGVzW2ldLmNoaWxkcmVuWzBdLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBzdG9wUHJvcGFnYXRpb24sIGZhbHNlKTsKCQkJCX0pOwoJCQl9CgkJfQoKCQkvLyBNYWtlIHRoZSByYW5nZSBkcmFnZ2FibGUuCgkJaWYgKCBiZWhhdmlvdXIuZHJhZyApewoKCQkJZHJhZyA9IFtzY29wZV9CYXNlLnF1ZXJ5U2VsZWN0b3IoICcuJyArIGNzc0NsYXNzZXNbN10gKV07CgkJCWFkZENsYXNzKGRyYWdbMF0sIGNzc0NsYXNzZXNbMTBdKTsKCgkJCS8vIFdoZW4gdGhlIHJhbmdlIGlzIGZpeGVkLCB0aGUgZW50aXJlIHJhbmdlIGNhbgoJCQkvLyBiZSBkcmFnZ2VkIGJ5IHRoZSBoYW5kbGVzLiBUaGUgaGFuZGxlIGluIHRoZSBmaXJzdAoJCQkvLyBvcmlnaW4gd2lsbCBwcm9wYWdhdGUgdGhlIHN0YXJ0IGV2ZW50IHVwd2FyZCwKCQkJLy8gYnV0IGl0IG5lZWRzIHRvIGJlIGJvdW5kIG1hbnVhbGx5IG9uIHRoZSBvdGhlci4KCQkJaWYgKCBiZWhhdmlvdXIuZml4ZWQgKSB7CgkJCQlkcmFnLnB1c2goc2NvcGVfSGFuZGxlc1soZHJhZ1swXSA9PT0gc2NvcGVfSGFuZGxlc1swXSA/IDEgOiAwKV0uY2hpbGRyZW5bMF0pOwoJCQl9CgoJCQlkcmFnLmZvckVhY2goZnVuY3Rpb24oIGVsZW1lbnQgKSB7CgkJCQlhdHRhY2ggKCBhY3Rpb25zLnN0YXJ0LCBlbGVtZW50LCBzdGFydCwgewoJCQkJCWhhbmRsZXM6IHNjb3BlX0hhbmRsZXMKCQkJCX0pOwoJCQl9KTsKCQl9Cgl9CgoKCS8vIFRlc3Qgc3VnZ2VzdGVkIHZhbHVlcyBhbmQgYXBwbHkgbWFyZ2luLCBzdGVwLgoJZnVuY3Rpb24gc2V0SGFuZGxlICggaGFuZGxlLCB0bywgbm9MaW1pdE9wdGlvbiApIHsKCgkJdmFyIHRyaWdnZXIgPSBoYW5kbGUgIT09IHNjb3BlX0hhbmRsZXNbMF0gPyAxIDogMCwKCQkJbG93ZXJNYXJnaW4gPSBzY29wZV9Mb2NhdGlvbnNbMF0gKyBvcHRpb25zLm1hcmdpbiwKCQkJdXBwZXJNYXJnaW4gPSBzY29wZV9Mb2NhdGlvbnNbMV0gLSBvcHRpb25zLm1hcmdpbiwKCQkJbG93ZXJMaW1pdCA9IHNjb3BlX0xvY2F0aW9uc1swXSArIG9wdGlvbnMubGltaXQsCgkJCXVwcGVyTGltaXQgPSBzY29wZV9Mb2NhdGlvbnNbMV0gLSBvcHRpb25zLmxpbWl0OwoKCQkvLyBGb3Igc2xpZGVycyB3aXRoIG11bHRpcGxlIGhhbmRsZXMsCgkJLy8gbGltaXQgbW92ZW1lbnQgdG8gdGhlIG90aGVyIGhhbmRsZS4KCQkvLyBBcHBseSB0aGUgbWFyZ2luIG9wdGlvbiBieSBhZGRpbmcgaXQgdG8gdGhlIGhhbmRsZSBwb3NpdGlvbnMuCgkJaWYgKCBzY29wZV9IYW5kbGVzLmxlbmd0aCA+IDEgKSB7CgkJCXRvID0gdHJpZ2dlciA/IE1hdGgubWF4KCB0bywgbG93ZXJNYXJnaW4gKSA6IE1hdGgubWluKCB0bywgdXBwZXJNYXJnaW4gKTsKCQl9CgoJCS8vIFRoZSBsaW1pdCBvcHRpb24gaGFzIHRoZSBvcHBvc2l0ZSBlZmZlY3QsIGxpbWl0aW5nIGhhbmRsZXMgdG8gYQoJCS8vIG1heGltdW0gZGlzdGFuY2UgZnJvbSBhbm90aGVyLiBMaW1pdCBtdXN0IGJlID4gMCwgYXMgb3RoZXJ3aXNlCgkJLy8gaGFuZGxlcyB3b3VsZCBiZSB1bm1vdmVhYmxlLiAnbm9MaW1pdE9wdGlvbicgaXMgc2V0IHRvICdmYWxzZScKCQkvLyBmb3IgdGhlIC52YWwoKSBtZXRob2QsIGV4Y2VwdCBmb3IgcGFzcyA0LzQuCgkJaWYgKCBub0xpbWl0T3B0aW9uICE9PSBmYWxzZSAmJiBvcHRpb25zLmxpbWl0ICYmIHNjb3BlX0hhbmRsZXMubGVuZ3RoID4gMSApIHsKCQkJdG8gPSB0cmlnZ2VyID8gTWF0aC5taW4gKCB0bywgbG93ZXJMaW1pdCApIDogTWF0aC5tYXgoIHRvLCB1cHBlckxpbWl0ICk7CgkJfQoKCQkvLyBIYW5kbGUgdGhlIHN0ZXAgb3B0aW9uLgoJCXRvID0gc2NvcGVfU3BlY3RydW0uZ2V0U3RlcCggdG8gKTsKCgkJLy8gTGltaXQgdG8gMC8xMDAgZm9yIC52YWwgaW5wdXQsIHRyaW0gYW55dGhpbmcgYmV5b25kIDcgZGlnaXRzLCBhcwoJCS8vIEphdmFTY3JpcHQgaGFzIHNvbWUgaXNzdWVzIGluIGl0cyBmbG9hdGluZyBwb2ludCBpbXBsZW1lbnRhdGlvbi4KCQl0byA9IGxpbWl0KHBhcnNlRmxvYXQodG8udG9GaXhlZCg3KSkpOwoKCQkvLyBSZXR1cm4gZmFsc2UgaWYgaGFuZGxlIGNhbid0IG1vdmUKCQlpZiAoIHRvID09PSBzY29wZV9Mb2NhdGlvbnNbdHJpZ2dlcl0gKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCS8vIFNldCB0aGUgaGFuZGxlIHRvIHRoZSBuZXcgcG9zaXRpb24uCgkJLy8gVXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3IgZWZmaWNpZW50IHBhaW50aW5nLgoJCS8vIE5vIHNpZ25pZmljYW50IGVmZmVjdCBpbiBDaHJvbWUsIEVkZ2Ugc2VlcyBkcmFtYXRpYwoJCS8vIHBlcmZvcm1hY2UgaW1wcm92ZW1lbnRzLgoJCWlmICggd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSApIHsKCQkJd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpewoJCQkJaGFuZGxlLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gdG8gKyAnJSc7CgkJCX0pOwoJCX0gZWxzZSB7CgkJCWhhbmRsZS5zdHlsZVtvcHRpb25zLnN0eWxlXSA9IHRvICsgJyUnOwoJCX0KCgkJLy8gRm9yY2UgcHJvcGVyIGhhbmRsZSBzdGFja2luZwoJCWlmICggIWhhbmRsZS5wcmV2aW91c1NpYmxpbmcgKSB7CgkJCXJlbW92ZUNsYXNzKGhhbmRsZSwgY3NzQ2xhc3Nlc1sxN10pOwoJCQlpZiAoIHRvID4gNTAgKSB7CgkJCQlhZGRDbGFzcyhoYW5kbGUsIGNzc0NsYXNzZXNbMTddKTsKCQkJfQoJCX0KCgkJLy8gVXBkYXRlIGxvY2F0aW9ucy4KCQlzY29wZV9Mb2NhdGlvbnNbdHJpZ2dlcl0gPSB0bzsKCgkJLy8gQ29udmVydCB0aGUgdmFsdWUgdG8gdGhlIHNsaWRlciBzdGVwcGluZy9yYW5nZS4KCQlzY29wZV9WYWx1ZXNbdHJpZ2dlcl0gPSBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcoIHRvICk7CgoJCWZpcmVFdmVudCgndXBkYXRlJywgdHJpZ2dlcik7CgoJCXJldHVybiB0cnVlOwoJfQoKCS8vIExvb3AgdmFsdWVzIGZyb20gdmFsdWUgbWV0aG9kIGFuZCBhcHBseSB0aGVtLgoJZnVuY3Rpb24gc2V0VmFsdWVzICggY291bnQsIHZhbHVlcyApIHsKCgkJdmFyIGksIHRyaWdnZXIsIHRvOwoKCQkvLyBXaXRoIHRoZSBsaW1pdCBvcHRpb24sIHdlJ2xsIG5lZWQgYW5vdGhlciBsaW1pdGluZyBwYXNzLgoJCWlmICggb3B0aW9ucy5saW1pdCApIHsKCQkJY291bnQgKz0gMTsKCQl9CgoJCS8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBoYW5kbGVzIHRvIGJlIHNldCBydW4gdGhlIHNldHRpbmcKCQkvLyBtZWNoYW5pc20gdHdpY2UgZm9yIHRoZSBmaXJzdCBoYW5kbGUsIHRvIG1ha2Ugc3VyZSBpdAoJCS8vIGNhbiBiZSBib3VuY2VkIG9mIHRoZSBzZWNvbmQgb25lIHByb3Blcmx5LgoJCWZvciAoIGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSApIHsKCgkJCXRyaWdnZXIgPSBpJTI7CgoJCQkvLyBHZXQgdGhlIGN1cnJlbnQgYXJndW1lbnQgZnJvbSB0aGUgYXJyYXkuCgkJCXRvID0gdmFsdWVzW3RyaWdnZXJdOwoKCQkJLy8gU2V0dGluZyB3aXRoIG51bGwgaW5kaWNhdGVzIGFuICdpZ25vcmUnLgoJCQkvLyBJbnB1dHRpbmcgJ2ZhbHNlJyBpcyBpbnZhbGlkLgoJCQlpZiAoIHRvICE9PSBudWxsICYmIHRvICE9PSBmYWxzZSApIHsKCgkJCQkvLyBJZiBhIGZvcm1hdHRlZCBudW1iZXIgd2FzIHBhc3NlZCwgYXR0ZW10IHRvIGRlY29kZSBpdC4KCQkJCWlmICggdHlwZW9mIHRvID09PSAnbnVtYmVyJyApIHsKCQkJCQl0byA9IFN0cmluZyh0byk7CgkJCQl9CgoJCQkJdG8gPSBvcHRpb25zLmZvcm1hdC5mcm9tKCB0byApOwoKCQkJCS8vIFJlcXVlc3QgYW4gdXBkYXRlIGZvciBhbGwgbGlua3MgaWYgdGhlIHZhbHVlIHdhcyBpbnZhbGlkLgoJCQkJLy8gRG8gc28gdG9vIGlmIHNldHRpbmcgdGhlIGhhbmRsZSBmYWlscy4KCQkJCWlmICggdG8gPT09IGZhbHNlIHx8IGlzTmFOKHRvKSB8fCBzZXRIYW5kbGUoIHNjb3BlX0hhbmRsZXNbdHJpZ2dlcl0sIHNjb3BlX1NwZWN0cnVtLnRvU3RlcHBpbmcoIHRvICksIGkgPT09ICgzIC0gb3B0aW9ucy5kaXIpICkgPT09IGZhbHNlICkgewoJCQkJCWZpcmVFdmVudCgndXBkYXRlJywgdHJpZ2dlcik7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJLy8gU2V0IHRoZSBzbGlkZXIgdmFsdWUuCglmdW5jdGlvbiB2YWx1ZVNldCAoIGlucHV0ICkgewoKCQl2YXIgY291bnQsIHZhbHVlcyA9IGFzQXJyYXkoIGlucHV0ICksIGk7CgoJCS8vIFRoZSBSVEwgc2V0dGluZ3MgaXMgaW1wbGVtZW50ZWQgYnkgcmV2ZXJzaW5nIHRoZSBmcm9udC1lbmQsCgkJLy8gaW50ZXJuYWwgbWVjaGFuaXNtcyBhcmUgdGhlIHNhbWUuCgkJaWYgKCBvcHRpb25zLmRpciAmJiBvcHRpb25zLmhhbmRsZXMgPiAxICkgewoJCQl2YWx1ZXMucmV2ZXJzZSgpOwoJCX0KCgkJLy8gQW5pbWF0aW9uIGlzIG9wdGlvbmFsLgoJCS8vIE1ha2Ugc3VyZSB0aGUgaW5pdGlhbCB2YWx1ZXMgd2hlcmUgc2V0IGJlZm9yZSB1c2luZyBhbmltYXRlZCBwbGFjZW1lbnQuCgkJaWYgKCBvcHRpb25zLmFuaW1hdGUgJiYgc2NvcGVfTG9jYXRpb25zWzBdICE9PSAtMSApIHsKCQkJYWRkQ2xhc3NGb3IoIHNjb3BlX1RhcmdldCwgY3NzQ2xhc3Nlc1sxNF0sIDMwMCApOwoJCX0KCgkJLy8gRGV0ZXJtaW5lIGhvdyBvZnRlbiB0byBzZXQgdGhlIGhhbmRsZXMuCgkJY291bnQgPSBzY29wZV9IYW5kbGVzLmxlbmd0aCA+IDEgPyAzIDogMTsKCgkJaWYgKCB2YWx1ZXMubGVuZ3RoID09PSAxICkgewoJCQljb3VudCA9IDE7CgkJfQoKCQlzZXRWYWx1ZXMgKCBjb3VudCwgdmFsdWVzICk7CgoJCS8vIEZpcmUgdGhlICdzZXQnIGV2ZW50IGZvciBib3RoIGhhbmRsZXMuCgkJZm9yICggaSA9IDA7IGkgPCBzY29wZV9IYW5kbGVzLmxlbmd0aDsgaSsrICkgewoJCQlmaXJlRXZlbnQoJ3NldCcsIGkpOwoJCX0KCX0KCgkvLyBHZXQgdGhlIHNsaWRlciB2YWx1ZS4KCWZ1bmN0aW9uIHZhbHVlR2V0ICggKSB7CgoJCXZhciBpLCByZXRvdXIgPSBbXTsKCgkJLy8gR2V0IHRoZSB2YWx1ZSBmcm9tIGFsbCBoYW5kbGVzLgoJCWZvciAoIGkgPSAwOyBpIDwgb3B0aW9ucy5oYW5kbGVzOyBpICs9IDEgKXsKCQkJcmV0b3VyW2ldID0gb3B0aW9ucy5mb3JtYXQudG8oIHNjb3BlX1ZhbHVlc1tpXSApOwoJCX0KCgkJcmV0dXJuIGluU2xpZGVyT3JkZXIoIHJldG91ciApOwoJfQoKCS8vIFJlbW92ZXMgY2xhc3NlcyBmcm9tIHRoZSByb290IGFuZCBlbXB0aWVzIGl0LgoJZnVuY3Rpb24gZGVzdHJveSAoICkgewoJCWNzc0NsYXNzZXMuZm9yRWFjaChmdW5jdGlvbihjbHMpewoJCQlpZiAoICFjbHMgKSB7IHJldHVybjsgfSAvLyBJZ25vcmUgZW1wdHkgY2xhc3NlcwoJCQlyZW1vdmVDbGFzcyhzY29wZV9UYXJnZXQsIGNscyk7CgkJfSk7CgkJc2NvcGVfVGFyZ2V0LmlubmVySFRNTCA9ICcnOwoJCWRlbGV0ZSBzY29wZV9UYXJnZXQubm9VaVNsaWRlcjsKCX0KCgkvLyBHZXQgdGhlIGN1cnJlbnQgc3RlcCBzaXplIGZvciB0aGUgc2xpZGVyLgoJZnVuY3Rpb24gZ2V0Q3VycmVudFN0ZXAgKCApIHsKCgkJLy8gQ2hlY2sgYWxsIGxvY2F0aW9ucywgbWFwIHRoZW0gdG8gdGhlaXIgc3RlcHBpbmcgcG9pbnQuCgkJLy8gR2V0IHRoZSBzdGVwIHBvaW50LCB0aGVuIGZpbmQgaXQgaW4gdGhlIGlucHV0IGxpc3QuCgkJdmFyIHJldG91ciA9IHNjb3BlX0xvY2F0aW9ucy5tYXAoZnVuY3Rpb24oIGxvY2F0aW9uLCBpbmRleCApewoKCQkJdmFyIHN0ZXAgPSBzY29wZV9TcGVjdHJ1bS5nZXRBcHBsaWNhYmxlU3RlcCggbG9jYXRpb24gKSwKCgkJCQkvLyBBcyBwZXIgIzM5MSwgdGhlIGNvbXBhcmlzb24gZm9yIHRoZSBkZWNyZW1lbnQgc3RlcCBjYW4gaGF2ZSBzb21lIHJvdW5kaW5nIGlzc3Vlcy4KCQkJCS8vIFJvdW5kIHRoZSB2YWx1ZSB0byB0aGUgcHJlY2lzaW9uIHVzZWQgaW4gdGhlIHN0ZXAuCgkJCQlzdGVwRGVjaW1hbHMgPSBjb3VudERlY2ltYWxzKFN0cmluZyhzdGVwWzJdKSksCgoJCQkJLy8gR2V0IHRoZSBjdXJyZW50IG51bWVyaWMgdmFsdWUKCQkJCXZhbHVlID0gc2NvcGVfVmFsdWVzW2luZGV4XSwKCgkJCQkvLyBUbyBtb3ZlIHRoZSBzbGlkZXIgJ29uZSBzdGVwIHVwJywgdGhlIGN1cnJlbnQgc3RlcCB2YWx1ZSBuZWVkcyB0byBiZSBhZGRlZC4KCQkJCS8vIFVzZSBudWxsIGlmIHdlIGFyZSBhdCB0aGUgbWF4aW11bSBzbGlkZXIgdmFsdWUuCgkJCQlpbmNyZW1lbnQgPSBsb2NhdGlvbiA9PT0gMTAwID8gbnVsbCA6IHN0ZXBbMl0sCgoJCQkJLy8gR29pbmcgJ29uZSBzdGVwIGRvd24nIG1pZ2h0IHB1dCB0aGUgc2xpZGVyIGluIGEgZGlmZmVyZW50IHN1Yi1yYW5nZSwgc28gd2UKCQkJCS8vIG5lZWQgdG8gc3dpdGNoIGJldHdlZW4gdGhlIGN1cnJlbnQgb3IgdGhlIHByZXZpb3VzIHN0ZXAuCgkJCQlwcmV2ID0gTnVtYmVyKCh2YWx1ZSAtIHN0ZXBbMl0pLnRvRml4ZWQoc3RlcERlY2ltYWxzKSksCgoJCQkJLy8gSWYgdGhlIHZhbHVlIGZpdHMgdGhlIHN0ZXAsIHJldHVybiB0aGUgY3VycmVudCBzdGVwIHZhbHVlLiBPdGhlcndpc2UsIHVzZSB0aGUKCQkJCS8vIHByZXZpb3VzIHN0ZXAuIFJldHVybiBudWxsIGlmIHRoZSBzbGlkZXIgaXMgYXQgaXRzIG1pbmltdW0gdmFsdWUuCgkJCQlkZWNyZW1lbnQgPSBsb2NhdGlvbiA9PT0gMCA/IG51bGwgOiAocHJldiA+PSBzdGVwWzFdKSA/IHN0ZXBbMl0gOiAoc3RlcFswXSB8fCBmYWxzZSk7CgoJCQlyZXR1cm4gW2RlY3JlbWVudCwgaW5jcmVtZW50XTsKCQl9KTsKCgkJLy8gUmV0dXJuIHZhbHVlcyBpbiB0aGUgcHJvcGVyIG9yZGVyLgoJCXJldHVybiBpblNsaWRlck9yZGVyKCByZXRvdXIgKTsKCX0KCgkvLyBBdHRhY2ggYW4gZXZlbnQgdG8gdGhpcyBzbGlkZXIsIHBvc3NpYmx5IGluY2x1ZGluZyBhIG5hbWVzcGFjZQoJZnVuY3Rpb24gYmluZEV2ZW50ICggbmFtZXNwYWNlZEV2ZW50LCBjYWxsYmFjayApIHsKCQlzY29wZV9FdmVudHNbbmFtZXNwYWNlZEV2ZW50XSA9IHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdIHx8IFtdOwoJCXNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdLnB1c2goY2FsbGJhY2spOwoKCQkvLyBJZiB0aGUgZXZlbnQgYm91bmQgaXMgJ3VwZGF0ZSwnIGZpcmUgaXQgaW1tZWRpYXRlbHkgZm9yIGFsbCBoYW5kbGVzLgoJCWlmICggbmFtZXNwYWNlZEV2ZW50LnNwbGl0KCcuJylbMF0gPT09ICd1cGRhdGUnICkgewoJCQlzY29wZV9IYW5kbGVzLmZvckVhY2goZnVuY3Rpb24oYSwgaW5kZXgpewoJCQkJZmlyZUV2ZW50KCd1cGRhdGUnLCBpbmRleCk7CgkJCX0pOwoJCX0KCX0KCgkvLyBVbmRvIGF0dGFjaG1lbnQgb2YgZXZlbnQKCWZ1bmN0aW9uIHJlbW92ZUV2ZW50ICggbmFtZXNwYWNlZEV2ZW50ICkgewoKCQl2YXIgZXZlbnQgPSBuYW1lc3BhY2VkRXZlbnQuc3BsaXQoJy4nKVswXSwKCQkJbmFtZXNwYWNlID0gbmFtZXNwYWNlZEV2ZW50LnN1YnN0cmluZyhldmVudC5sZW5ndGgpOwoKCQlPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24oIGJpbmQgKXsKCgkJCXZhciB0RXZlbnQgPSBiaW5kLnNwbGl0KCcuJylbMF0sCgkJCQl0TmFtZXNwYWNlID0gYmluZC5zdWJzdHJpbmcodEV2ZW50Lmxlbmd0aCk7CgoJCQlpZiAoICghZXZlbnQgfHwgZXZlbnQgPT09IHRFdmVudCkgJiYgKCFuYW1lc3BhY2UgfHwgbmFtZXNwYWNlID09PSB0TmFtZXNwYWNlKSApIHsKCQkJCWRlbGV0ZSBzY29wZV9FdmVudHNbYmluZF07CgkJCX0KCQl9KTsKCX0KCgkvLyBVcGRhdGVhYmxlOiBtYXJnaW4sIGxpbWl0LCBzdGVwLCByYW5nZSwgYW5pbWF0ZSwgc25hcAoJZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyAoIG9wdGlvbnNUb1VwZGF0ZSApIHsKCgkJdmFyIHYgPSB2YWx1ZUdldCgpLCBpLCBuZXdPcHRpb25zID0gdGVzdE9wdGlvbnMoewoJCQlzdGFydDogWzAsIDBdLAoJCQltYXJnaW46IG9wdGlvbnNUb1VwZGF0ZS5tYXJnaW4sCgkJCWxpbWl0OiBvcHRpb25zVG9VcGRhdGUubGltaXQsCgkJCXN0ZXA6IG9wdGlvbnNUb1VwZGF0ZS5zdGVwLAoJCQlyYW5nZTogb3B0aW9uc1RvVXBkYXRlLnJhbmdlLAoJCQlhbmltYXRlOiBvcHRpb25zVG9VcGRhdGUuYW5pbWF0ZSwKCQkJc25hcDogb3B0aW9uc1RvVXBkYXRlLnNuYXAgPT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc25hcCA6IG9wdGlvbnNUb1VwZGF0ZS5zbmFwCgkJfSk7CgoJCVsnbWFyZ2luJywgJ2xpbWl0JywgJ3N0ZXAnLCAncmFuZ2UnLCAnYW5pbWF0ZSddLmZvckVhY2goZnVuY3Rpb24obmFtZSl7CgkJCWlmICggb3B0aW9uc1RvVXBkYXRlW25hbWVdICE9PSB1bmRlZmluZWQgKSB7CgkJCQlvcHRpb25zW25hbWVdID0gb3B0aW9uc1RvVXBkYXRlW25hbWVdOwoJCQl9CgkJfSk7CgoJCXNjb3BlX1NwZWN0cnVtID0gbmV3T3B0aW9ucy5zcGVjdHJ1bTsKCgkJLy8gSW52YWxpZGF0ZSB0aGUgY3VycmVudCBwb3NpdGlvbmluZyBzbyB2YWx1ZVNldCBmb3JjZXMgYW4gdXBkYXRlLgoJCXNjb3BlX0xvY2F0aW9ucyA9IFstMSwgLTFdOwoJCXZhbHVlU2V0KHYpOwoKCQlmb3IgKCBpID0gMDsgaSA8IHNjb3BlX0hhbmRsZXMubGVuZ3RoOyBpKysgKSB7CgkJCWZpcmVFdmVudCgndXBkYXRlJywgaSk7CgkJfQoJfQoKCgkvLyBUaHJvdyBhbiBlcnJvciBpZiB0aGUgc2xpZGVyIHdhcyBhbHJlYWR5IGluaXRpYWxpemVkLgoJaWYgKCBzY29wZV9UYXJnZXQubm9VaVNsaWRlciApIHsKCQl0aHJvdyBuZXcgRXJyb3IoJ1NsaWRlciB3YXMgYWxyZWFkeSBpbml0aWFsaXplZC4nKTsKCX0KCgkvLyBDcmVhdGUgdGhlIGJhc2UgZWxlbWVudCwgaW5pdGlhbGlzZSBIVE1MIGFuZCBzZXQgY2xhc3Nlcy4KCS8vIEFkZCBoYW5kbGVzIGFuZCBsaW5rcy4KCXNjb3BlX0Jhc2UgPSBhZGRTbGlkZXIoIG9wdGlvbnMuZGlyLCBvcHRpb25zLm9ydCwgc2NvcGVfVGFyZ2V0ICk7CglzY29wZV9IYW5kbGVzID0gYWRkSGFuZGxlcyggb3B0aW9ucy5oYW5kbGVzLCBvcHRpb25zLmRpciwgc2NvcGVfQmFzZSApOwoKCS8vIFNldCB0aGUgY29ubmVjdCBjbGFzc2VzLgoJYWRkQ29ubmVjdGlvbiAoIG9wdGlvbnMuY29ubmVjdCwgc2NvcGVfVGFyZ2V0LCBzY29wZV9IYW5kbGVzICk7CgoJaWYgKCBvcHRpb25zLnBpcHMgKSB7CgkJcGlwcyhvcHRpb25zLnBpcHMpOwoJfQoKCWlmICggb3B0aW9ucy50b29sdGlwcyApIHsKCQl0b29sdGlwcygpOwoJfQoKCXNjb3BlX1NlbGYgPSB7CgkJZGVzdHJveTogZGVzdHJveSwKCQlzdGVwczogZ2V0Q3VycmVudFN0ZXAsCgkJb246IGJpbmRFdmVudCwKCQlvZmY6IHJlbW92ZUV2ZW50LAoJCWdldDogdmFsdWVHZXQsCgkJc2V0OiB2YWx1ZVNldCwKCQl1cGRhdGVPcHRpb25zOiB1cGRhdGVPcHRpb25zCgl9OwoKCS8vIEF0dGFjaCB1c2VyIGV2ZW50cy4KCWV2ZW50cyggb3B0aW9ucy5ldmVudHMgKTsKCglyZXR1cm4gc2NvcGVfU2VsZjsKCn0KCgoJLy8gUnVuIHRoZSBzdGFuZGFyZCBpbml0aWFsaXplcgoJZnVuY3Rpb24gaW5pdGlhbGl6ZSAoIHRhcmdldCwgb3JpZ2luYWxPcHRpb25zICkgewoKCQlpZiAoICF0YXJnZXQubm9kZU5hbWUgKSB7CgkJCXRocm93IG5ldyBFcnJvcignbm9VaVNsaWRlci5jcmVhdGUgcmVxdWlyZXMgYSBzaW5nbGUgZWxlbWVudC4nKTsKCQl9CgoJCS8vIFRlc3QgdGhlIG9wdGlvbnMgYW5kIGNyZWF0ZSB0aGUgc2xpZGVyIGVudmlyb25tZW50OwoJCXZhciBvcHRpb25zID0gdGVzdE9wdGlvbnMoIG9yaWdpbmFsT3B0aW9ucywgdGFyZ2V0ICksCgkJCXNsaWRlciA9IGNsb3N1cmUoIHRhcmdldCwgb3B0aW9ucyApOwoKCQkvLyBVc2UgdGhlIHB1YmxpYyB2YWx1ZSBtZXRob2QgdG8gc2V0IHRoZSBzdGFydCB2YWx1ZXMuCgkJc2xpZGVyLnNldChvcHRpb25zLnN0YXJ0KTsKCgkJdGFyZ2V0Lm5vVWlTbGlkZXIgPSBzbGlkZXI7CgkJcmV0dXJuIHNsaWRlcjsKCX0KCgkvLyBVc2UgYW4gb2JqZWN0IGluc3RlYWQgb2YgYSBmdW5jdGlvbiBmb3IgZnV0dXJlIGV4cGFuc2liaWxpdHk7CglyZXR1cm4gewoJCWNyZWF0ZTogaW5pdGlhbGl6ZQoJfTsKCn0pKTsKZGVmaW5lKCJub3Vpc2xpZGVyIiwgZnVuY3Rpb24oKXt9KTsKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDE2LzExLzIwMTUuCiAqLwoKJChkb2N1bWVudCkub24oewogICAgcmVhZHk6IGZ1bmN0aW9uKCkgewoKCgogICAgfSwKfSk7CgoKZGVmaW5lKCJhY2NvcmRpb24iLCBbImpxdWVyeSJdLCBmdW5jdGlvbigpe30pOwoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTkvMTEvMjAxNS4KICovCgoKCiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7CiAgICBfcmVzaXplKCk7CiAgICAkKHdpbmRvdykucmVzaXplKF9yZXNpemUpCiAgICBmdW5jdGlvbiBfcmVzaXplKCl7CgogICAgICAgLy8gY29uc29sZS5sb2coJCgiI3BhZ2VOb3RGb3VuZCIpLmxlbmd0aCgpKTsKICAgICAgICBpZigkKHRoaXMpLndpZHRoKCkgPCA5MDApCiAgICAgICAgewogICAgICAgICAgICAkKCIjcGFnZU5vdEZvdW5kIikuYXR0cigic3JjIiwgIi4uLy4uL2Nzcy9pbWFnZXMvVW5kZXJfY29uc3RydWN0aW9uXzMyMC5qcGciKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgICQoIiNwYWdlTm90Rm91bmQiKS5hdHRyKCJzcmMiLCAiLi4vLi4vY3NzL2ltYWdlcy9VbmRlcl9jb25zdHJ1Y3Rpb24uanBnIikKCiAgICAgICAgLy9jb25zb2xlLmxvZygkKCIjVW5kZXJfY29uc3RydWN0aW9uIikubGVuZ3RoKCkpOwogICAgICAgIGlmKCQodGhpcykud2lkdGgoKSA8IDkwMCkKICAgICAgICB7CiAgICAgICAgICAgICQoIiNVbmRlcl9jb25zdHJ1Y3Rpb24iKS5hdHRyKCJzcmMiLCAiLi4vLi4vY3NzL2ltYWdlcy9VbmRlcl9jb25zdHJ1Y3Rpb25fMzIwLmpwZyIpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgJCgiI1VuZGVyX2NvbnN0cnVjdGlvbiIpLmF0dHIoInNyYyIsICIuLi8uLi9jc3MvaW1hZ2VzL1VuZGVyX2NvbnN0cnVjdGlvbi5qcGciKQoKICAgIH0KfSk7CmRlZmluZSgid3JvbmdEaXJlY3Rpb24iLCBbImpxdWVyeSJdLCBmdW5jdGlvbigpe30pOwoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMjAvMTEvMjAxNS4KICovCgp2YXIgdXNlckNvb2tpZSA9IHVzZXJDb29raWUgfHwge307Cgp1c2VyQ29va2llLmZpbGxQYXJhbXMgPSBmdW5jdGlvbihuYW1lLCBwYXNzd29yZCwgZW1haWwsIHJlc3BvbnNlKXsKICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgdGhpcy51c2VyUGFzc3dvcmQgPSBwYXNzd29yZDsKICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsOwogICAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7Ci8vICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvbklkOwovLyAgICB0aGlzLmlkID0gaWQ7Ci8vICAgIHRoaXMudG9rZW4gPSAiQmVhcmVyICIgKyB0b2tlbjsKfTsKCnVzZXJDb29raWUuZ2V0S2V5ID0gZnVuY3Rpb24obGFzdFVzZXIpewoKICAgICAgaWYobGFzdFVzZXIpCiAgICAgIHsKICAgICAgICAgICAgaWYobGFzdFVzZXIucmVzcG9uc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICJ1c2VyQ29va2llIiArCiAgICAgICAgICAgICAgICAgICAgICBsYXN0VXNlci5yZXNwb25zZS51c2VySWQKICAgICAgICAgICAgICAgICAgICAgICAgKyBsYXN0VXNlci5yZXNwb25zZS50X2F1dGhvcml6YXRpb247CiAgICAgICAgICAgICAgICAgIC8vKyBsYXN0VXNlci5yZXNwb25zZS5zZXNzaW9uSWQ7CiAgICAgICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gImd1ZXN0Q29va2llIjsKfTsKCgpkZWZpbmUoIlVzZXJDb29raWUiLCBmdW5jdGlvbigpe30pOwoKLyoqCiAqIENyZWF0ZWQgYnkgY29ycmVudGkgb24gMTcvMTEvMjAxNS4KICovCgoKdmFyIFNsaWRlciA9IFNsaWRlciB8fCB7fTsKClNsaWRlci5BZGRTbGlkZXJMaXN0ZW5lciA9IGZ1bmN0aW9uKCl7CgogICAgdmFyIF9fX19tb3ZlU2xpZGVyID0gc2V0SW50ZXJ2YWwobW92ZVNsaWRlciwgMTAwMDApCiAgICB2YXIgZGVsYXlBbmltMDQgPSAiZGVsYXlBbmltMDEgIjsKICAgIHZhciBib3VuY2VPdXRSaWdodCA9J2FuaW1hdGVkIGJvdW5jZU91dFJpZ2h0ICcsIGJvdW5jZUluTGVmdCA9ICdhbmltYXRlZCBib3VuY2VJbkxlZnQgJzsKICAgIHZhciBib3VuY2VJblJpZ2h0ID0nYW5pbWF0ZWQgYm91bmNlSW5SaWdodCAnLCBib3VuY2VPdXRMZWZ0ID0nYW5pbWF0ZWQgYm91bmNlT3V0TGVmdCAnOwogICAgdmFyIGFuaW1FbmQgPSAnd2Via2l0QW5pbWF0aW9uRW5kIG1vekFuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIGFuaW1hdGlvbmVuZCc7CgogICAgJCh3aW5kb3cpLm9uKHsgcmVzaXplOiBfcmVzaXplIH0pOwoKICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIuc2xpZGVyLXN0ZXBzID4gc3BhbiIsIGZ1bmN0aW9uKGEpewogICAgICAgIGNsZWFySW50ZXJ2YWwoX19fX21vdmVTbGlkZXIpOwoKICAgICAgICB2YXIgbGFzdFNlbGVjdGVkID0gJCgiLnNsaWRlci1zdGVwcyBzcGFuLnNlbGVjdGVkIikuaW5kZXgoKTsKICAgICAgICAkKCIuc2xpZGVyLXN0ZXBzIHNwYW4iKS5yZW1vdmVDbGFzcygic2VsZWN0ZWQiKTsKICAgICAgICAkKCIuc2xpZGVyLXN0ZXBzIHNwYW4iKS5jc3MoewogICAgICAgICAgICAiYm9yZGVyIjogICQodGhpcykuaW5kZXgoKSA9PSAxID8gInNvbGlkIGJsYWNrIDFweCIgOiAic29saWQgd2hpdGUgMXB4IiwKICAgICAgICAgICAgImJhY2tncm91bmQtY29sb3IiOiAidHJhbnNwYXJlbnQiLAogICAgICAgIH0pOwogICAgICAgICQodGhpcykuY3NzKHsiYmFja2dyb3VuZC1jb2xvciI6ICAkKHRoaXMpLmluZGV4KCkgPT0gMSA/ICJibGFjayIgOiAid2hpdGUiLH0pOwogICAgICAgICQodGhpcykuYWRkQ2xhc3MoInNlbGVjdGVkIik7CgoKICAgICAgICAvKiBBbmltYXRlIGgyICYgQnV0dG9uICovCiAgICAgICAgaWYobGFzdFNlbGVjdGVkID4gJCh0aGlzKS5pbmRleCgpKXsKCiAgICAgICAgICAgICQoIi5zbGlkZXItbGVuZ3RoIGRpdjpudGgtY2hpbGQoIisobGFzdFNlbGVjdGVkICsgMSkrIikgLmNvbnRhaW5lciBoMiIpLmFkZENsYXNzKGJvdW5jZU91dFJpZ2h0KQogICAgICAgICAgICAgICAgLm9uZShhbmltRW5kLCBmdW5jdGlvbigpeyAkKHRoaXMpLnJlbW92ZUNsYXNzKGJvdW5jZU91dFJpZ2h0KTsgfSk7CiAgICAgICAgICAgICQoIi5zbGlkZXItbGVuZ3RoIGRpdjpudGgtY2hpbGQoIisobGFzdFNlbGVjdGVkICsgMSkrIikgLmNvbnRhaW5lciBidXR0b24iKS5hZGRDbGFzcyhib3VuY2VPdXRSaWdodCArIGRlbGF5QW5pbTA0KQogICAgICAgICAgICAgICAgLm9uZShhbmltRW5kLCBmdW5jdGlvbigpeyAkKHRoaXMpLnJlbW92ZUNsYXNzKGJvdW5jZU91dFJpZ2h0ICsgZGVsYXlBbmltMDQpOyB9KTsKCiAgICAgICAgICAgICQoIi5zbGlkZXItbGVuZ3RoIGRpdjpudGgtY2hpbGQoIisoJCh0aGlzKS5pbmRleCgpICsgMSkrIikgLmNvbnRhaW5lciBoMiIpLmFkZENsYXNzKGJvdW5jZUluTGVmdCkKICAgICAgICAgICAgICAgIC5vbmUoYW5pbUVuZCwgZnVuY3Rpb24oKXsgJCh0aGlzKS5yZW1vdmVDbGFzcyhib3VuY2VJbkxlZnQpOyB9KTsKICAgICAgICAgICAgJCgiLnNsaWRlci1sZW5ndGggZGl2Om50aC1jaGlsZCgiKygkKHRoaXMpLmluZGV4KCkgKyAxKSsiKSAuY29udGFpbmVyIGJ1dHRvbiIpLmFkZENsYXNzKGJvdW5jZUluTGVmdCArIGRlbGF5QW5pbTA0KQogICAgICAgICAgICAgICAgLm9uZShhbmltRW5kLCBmdW5jdGlvbigpeyAkKHRoaXMpLnJlbW92ZUNsYXNzKGJvdW5jZUluTGVmdCArIGRlbGF5QW5pbTA0KTsgfSk7CiAgICAgICAgfQogICAgICAgIGVsc2V7CgogICAgICAgICAgICAkKCIuc2xpZGVyLWxlbmd0aCBkaXY6bnRoLWNoaWxkKCIrKCQodGhpcykuaW5kZXgoKSkrIikgLmNvbnRhaW5lciBoMiIpLmFkZENsYXNzKGJvdW5jZU91dExlZnQpCiAgICAgICAgICAgICAgICAub25lKGFuaW1FbmQsIGZ1bmN0aW9uKCl7ICQodGhpcykucmVtb3ZlQ2xhc3MoYm91bmNlT3V0TGVmdCk7IH0pOwogICAgICAgICAgICAkKCIuc2xpZGVyLWxlbmd0aCBkaXY6bnRoLWNoaWxkKCIrKCQodGhpcykuaW5kZXgoKSkrIikgLmNvbnRhaW5lciBidXR0b24iKS5hZGRDbGFzcyhib3VuY2VPdXRMZWZ0ICsgZGVsYXlBbmltMDQpCiAgICAgICAgICAgICAgICAub25lKGFuaW1FbmQsIGZ1bmN0aW9uKCl7ICQodGhpcykucmVtb3ZlQ2xhc3MoYm91bmNlT3V0TGVmdCArIGRlbGF5QW5pbTA0KTsgfSk7CgogICAgICAgICAgICAkKCIuc2xpZGVyLWxlbmd0aCBkaXY6bnRoLWNoaWxkKCIrKCQodGhpcykuaW5kZXgoKSArIDEpKyIpIC5jb250YWluZXIgaDIiKS5hZGRDbGFzcyhib3VuY2VJblJpZ2h0KQogICAgICAgICAgICAgICAgLm9uZShhbmltRW5kLCBmdW5jdGlvbigpeyAkKHRoaXMpLnJlbW92ZUNsYXNzKGJvdW5jZUluUmlnaHQpOyB9KTsKICAgICAgICAgICAgJCgiLnNsaWRlci1sZW5ndGggZGl2Om50aC1jaGlsZCgiKygkKHRoaXMpLmluZGV4KCkgKyAxKSsiKSAuY29udGFpbmVyIGJ1dHRvbiIpLmFkZENsYXNzKGJvdW5jZUluUmlnaHQgKyBkZWxheUFuaW0wNCkKICAgICAgICAgICAgICAgIC5vbmUoYW5pbUVuZCwgZnVuY3Rpb24oKXsgJCh0aGlzKS5yZW1vdmVDbGFzcyhib3VuY2VJblJpZ2h0ICsgZGVsYXlBbmltMDQpOyB9KTsKICAgICAgICB9CiAgICAgICAgLyogLS0tLS0tLS0tLS0tLS0tIGVuZCBBbmltYXRlIGgyICYgQnV0dG9uICAtLS0tLS0tLS0tLS0tLS0qLwoKCgogICAgICAgIC8qIE1vdmUgU2xpZGVyICovCiAgICAgICAgJCgiLnNsaWRlci1sZW5ndGgiKS5jc3MoewogICAgICAgICAgICAicmlnaHQiIDogKCQodGhpcykuaW5kZXgoKSkgKiBwYXJzZUludCgkKHdpbmRvdykud2lkdGgoKSkgKyAicHgiCiAgICAgICAgfSk7CiAgICAgICAgLyogLS0tLS0tLS0tLS0tLS0tIE1vdmUgU2xpZGVyIC0tLS0tLS0tLS0tLS0tLSovCgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgX19fX21vdmVTbGlkZXIgPSBzZXRJbnRlcnZhbChtb3ZlU2xpZGVyLCAxMDAwMCk7CiAgICAgICAgfSwgNTAwKTsKICAgIH0pOwoKCgogICAgZnVuY3Rpb24gbW92ZVNsaWRlcigpCiAgICB7CiAgICAgICAgdHJ5ewogICAgICAgICAgICBpZigkKCIuc2xpZGVyLWxlbmd0aCIpLmxlbmd0aCA9PSAwKXsgY2xlYXJJbnRlcnZhbChfX19fbW92ZVNsaWRlcik7cmV0dXJuOyB9CgoKICAgICAgICAgICAgLyogQnVpbGQgT2JqZWN0ICovCiAgICAgICAgICAgIHZhciBvYmpQcm9wcyA9IHt9OwogICAgICAgICAgICBvYmpQcm9wcy5sZW5ndGggPSAkKCIuc2xpZGVyLWxlbmd0aCIpLndpZHRoKCk7CiAgICAgICAgICAgIG9ialByb3BzLl93aW5kb3dzTGVuZ3RoID0gJCh3aW5kb3cpLndpZHRoKCk7CiAgICAgICAgICAgIG9ialByb3BzLmludF9yaWdodCA9IHBhcnNlSW50KCQoIi5zbGlkZXItbGVuZ3RoIikuY3NzKCJyaWdodCIpLnJlcGxhY2UoInB4IiwgIiIpKTsKICAgICAgICAgICAgb2JqUHJvcHMuc3BhbnMgPSAkKCIuc2xpZGVyLXN0ZXBzIHNwYW4iKTsKICAgICAgICAgICAgb2JqUHJvcHMubnRoX2NoaWxkID0gKG9ialByb3BzLmludF9yaWdodCAvIG9ialByb3BzLl93aW5kb3dzTGVuZ3RoKSArIDE7CgogICAgICAgICAgICBvYmpQcm9wcy5pbmRleCA9IG9ialByb3BzLmludF9yaWdodCA9PSAwID8gMAogICAgICAgICAgICAgICAgOiAob2JqUHJvcHMuaW50X3JpZ2h0IC8gb2JqUHJvcHMuX3dpbmRvd3NMZW5ndGgpID09IG9ialByb3BzLnNwYW5zLmxlbmd0aCAtIDEgPyAtMQogICAgICAgICAgICAgICAgOiBvYmpQcm9wcy5pbnRfcmlnaHQgLyBvYmpQcm9wcy5fd2luZG93c0xlbmd0aDsKICAgICAgICAgICAgb2JqUHJvcHMuaW5kZXgrKzsKICAgICAgICAgICAgLyogLS0tLS0tLS0tLS0tLS0tIGVuZCBCdWlsZCBPYmplY3QgLS0tLS0tLS0tLS0tLS0tKi8KCgoKCgoKICAgICAgICAgICAgLyogVXBkYXRlIFVJICovCiAgICAgICAgICAgICQob2JqUHJvcHMuc3BhbnMpLnJlbW92ZUNsYXNzKCJzZWxlY3RlZCIpOwogICAgICAgICAgICAkKCIuc2xpZGVyLXN0ZXBzIHNwYW4iKS5jc3MoeyAiYm9yZGVyIjogIG9ialByb3BzLmluZGV4ID09IDEgPyAic29saWQgYmxhY2sgMXB4IiA6ICJzb2xpZCB3aGl0ZSAxcHgiLCAiYmFja2dyb3VuZC1jb2xvciI6ICJ0cmFuc3BhcmVudCIsIH0pOwogICAgICAgICAgICAkKCQoIi5zbGlkZXItc3RlcHMgc3BhbiIpW29ialByb3BzLmluZGV4XSkuY3NzKHsiYmFja2dyb3VuZC1jb2xvciI6ICBvYmpQcm9wcy5pbmRleCA9PSAxID8gImJsYWNrIiA6ICJ3aGl0ZSIsfSk7CiAgICAgICAgICAgICQob2JqUHJvcHMuc3BhbnNbb2JqUHJvcHMuaW5kZXhdKS5hZGRDbGFzcygic2VsZWN0ZWQiKTsKICAgICAgICAgICAgLyogLS0tLS0tLS0tLS0tLS0tIFVwZGF0ZSBVSSAtLS0tLS0tLS0tLS0tLS0qLwoKCgoKICAgICAgICAgICAgLyogQW5pbWF0ZSBoMiAmIEJ1dHRvbiAqLwogICAgICAgICAgICAkKCIuc2xpZGVyLWxlbmd0aCBkaXY6bnRoLWNoaWxkKCIrKG9ialByb3BzLm50aF9jaGlsZCkrIikgLmNvbnRhaW5lciBoMiIpLmFkZENsYXNzKGJvdW5jZU91dExlZnQpCiAgICAgICAgICAgICAgICAub25lKGFuaW1FbmQsIGZ1bmN0aW9uKCl7ICQodGhpcykucmVtb3ZlQ2xhc3MoYm91bmNlT3V0TGVmdCk7IH0pOwogICAgICAgICAgICAkKCIuc2xpZGVyLWxlbmd0aCBkaXY6bnRoLWNoaWxkKCIrKG9ialByb3BzLm50aF9jaGlsZCkrIikgLmNvbnRhaW5lciBidXR0b24iKS5hZGRDbGFzcyhib3VuY2VPdXRMZWZ0ICsgZGVsYXlBbmltMDQpCiAgICAgICAgICAgICAgICAub25lKGFuaW1FbmQsIGZ1bmN0aW9uKCl7ICQodGhpcykucmVtb3ZlQ2xhc3MoYm91bmNlT3V0TGVmdCArIGRlbGF5QW5pbTA0KTsgfSk7CgogICAgICAgICAgICAkKCIuc2xpZGVyLWxlbmd0aCBkaXY6bnRoLWNoaWxkKCIrKG9ialByb3BzLm50aF9jaGlsZCArIDEpKyIpIC5jb250YWluZXIgaDIiKS5hZGRDbGFzcyhib3VuY2VJblJpZ2h0KQogICAgICAgICAgICAgICAgLm9uZShhbmltRW5kLCBmdW5jdGlvbigpeyAkKHRoaXMpLnJlbW92ZUNsYXNzKGJvdW5jZUluUmlnaHQpOyB9KTsKICAgICAgICAgICAgJCgiLnNsaWRlci1sZW5ndGggZGl2Om50aC1jaGlsZCgiKyhvYmpQcm9wcy5udGhfY2hpbGQgKyAxKSsiKSAuY29udGFpbmVyIGJ1dHRvbiIpLmFkZENsYXNzKGJvdW5jZUluUmlnaHQgKyBkZWxheUFuaW0wNCkKICAgICAgICAgICAgICAgIC5vbmUoYW5pbUVuZCwgZnVuY3Rpb24oKXsgJCh0aGlzKS5yZW1vdmVDbGFzcyhib3VuY2VJblJpZ2h0ICsgZGVsYXlBbmltMDQpOyB9KTsKICAgICAgICAgICAgLyogLS0tLS0tLS0tLS0tLS0tIGVuZCBBbmltYXRlIGgyICYgQnV0dG9uICAtLS0tLS0tLS0tLS0tLS0qLwoKCgogICAgICAgICAgICAkKCIuc2xpZGVyLWxlbmd0aCIpLmNzcygicmlnaHQiLCAgKG9ialByb3BzLmludF9yaWdodCkgKyBwYXJzZUludChvYmpQcm9wcy5fd2luZG93c0xlbmd0aCkgKyAicHgiKTsKCiAgICAgICAgICAgIC8qIENoZWNraW5nIGlmIGlzIHRoZSBsYXN0IEZyYW1lICAqLwogICAgICAgICAgICB2YXIgbW92ZVRvID0gKHBhcnNlSW50KCQoIi5zbGlkZXItbGVuZ3RoIikuc3RvcCgpLmNzcygicmlnaHQiKS5yZXBsYWNlKCJweCIsICIiKSkgKyAocGFyc2VJbnQob2JqUHJvcHMuX3dpbmRvd3NMZW5ndGgpICoyKSk7CiAgICAgICAgICAgIGlmIChvYmpQcm9wcy5sZW5ndGggPCBtb3ZlVG8pIHsKICAgICAgICAgICAgICAgICQoIi5zbGlkZXItbGVuZ3RoIikucmVtb3ZlQ2xhc3MoInRyYW5zaXRpb24iKTsKICAgICAgICAgICAgICAgICQoIi5zbGlkZXItbGVuZ3RoIikuY3NzKCJyaWdodCIsICIwcHgiKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAkKCIuc2xpZGVyLWxlbmd0aCIpLmFkZENsYXNzKCJ0cmFuc2l0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgbW92ZVNsaWRlcigpOwogICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qIC0tLS0tLS0tLS0tLS0tLSBlbmQgIENoZWNraW5nIGlmIGlzIHRoZSBsYXN0IEZyYW1lICAtLS0tLS0tLS0tLS0tLS0qLwoKICAgICAgICB9CiAgICAgICAgY2F0Y2goZSl7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX19fX21vdmVTbGlkZXIpOwogICAgICAgIH0KICAgIH0KCgoKICAgIGZ1bmN0aW9uIF9yZXNpemUoKSB7CiAgICAgICAgJCgiLnNsaWRlci1sZW5ndGgiKS5jc3MoInJpZ2h0IiwgIjBweCIpOwogICAgICAgIHZhciBzcGFucyA9ICQoIi5zbGlkZXItc3RlcHMgc3BhbiIpOwogICAgICAgICQoc3BhbnMpLnJlbW92ZUNsYXNzKCJzZWxlY3RlZCIpOwogICAgICAgICQoc3BhbnNbMF0pLmFkZENsYXNzKCJzZWxlY3RlZCIpOwogICAgfQoKCgoKfQoKCgoKCgoKCgoKCgo7CmRlZmluZSgic2xpZGVyIiwgWyJqcXVlcnkiXSwgZnVuY3Rpb24oKXt9KTsKCi8qKgogKiBTdGF0ZS1iYXNlZCByb3V0aW5nIGZvciBBbmd1bGFySlMKICogQHZlcnNpb24gdjAuMi4xOAogKiBAbGluayBodHRwOi8vYW5ndWxhci11aS5naXRodWIuY29tLwogKiBAbGljZW5zZSBNSVQgTGljZW5zZSwgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQKICovCiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiYidW5kZWZpbmVkIiE9dHlwZW9mIGV4cG9ydHMmJm1vZHVsZS5leHBvcnRzPT09ZXhwb3J0cyYmKG1vZHVsZS5leHBvcnRzPSJ1aS5yb3V0ZXIiKSxmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm4gUihuZXcoUihmdW5jdGlvbigpe30se3Byb3RvdHlwZTphfSkpLGIpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIFEoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2IhPT1hJiZRKGIsZnVuY3Rpb24oYixjKXthLmhhc093blByb3BlcnR5KGMpfHwoYVtjXT1iKX0pfSksYX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9W107Zm9yKHZhciBkIGluIGEucGF0aCl7aWYoYS5wYXRoW2RdIT09Yi5wYXRoW2RdKWJyZWFrO2MucHVzaChhLnBhdGhbZF0pfXJldHVybiBjfWZ1bmN0aW9uIGcoYSl7aWYoT2JqZWN0LmtleXMpcmV0dXJuIE9iamVjdC5rZXlzKGEpO3ZhciBiPVtdO3JldHVybiBRKGEsZnVuY3Rpb24oYSxjKXtiLnB1c2goYyl9KSxifWZ1bmN0aW9uIGgoYSxiKXtpZihBcnJheS5wcm90b3R5cGUuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIsTnVtYmVyKGFyZ3VtZW50c1syXSl8fDApO3ZhciBjPWEubGVuZ3RoPj4+MCxkPU51bWJlcihhcmd1bWVudHNbMl0pfHwwO2ZvcihkPTA+ZD9NYXRoLmNlaWwoZCk6TWF0aC5mbG9vcihkKSwwPmQmJihkKz1jKTtjPmQ7ZCsrKWlmKGQgaW4gYSYmYVtkXT09PWIpcmV0dXJuIGQ7cmV0dXJuLTF9ZnVuY3Rpb24gaShhLGIsYyxkKXt2YXIgZSxpPWYoYyxkKSxqPXt9LGs9W107Zm9yKHZhciBsIGluIGkpaWYoaVtsXSYmaVtsXS5wYXJhbXMmJihlPWcoaVtsXS5wYXJhbXMpLGUubGVuZ3RoKSlmb3IodmFyIG0gaW4gZSloKGssZVttXSk+PTB8fChrLnB1c2goZVttXSksaltlW21dXT1hW2VbbV1dKTtyZXR1cm4gUih7fSxqLGIpfWZ1bmN0aW9uIGooYSxiLGMpe2lmKCFjKXtjPVtdO2Zvcih2YXIgZCBpbiBhKWMucHVzaChkKX1mb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXTtpZihhW2ZdIT1iW2ZdKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz17fTtyZXR1cm4gUShhLGZ1bmN0aW9uKGEpe2NbYV09YlthXX0pLGN9ZnVuY3Rpb24gbChhKXt2YXIgYj17fSxjPUFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoQXJyYXkucHJvdG90eXBlLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7cmV0dXJuIFEoYyxmdW5jdGlvbihjKXtjIGluIGEmJihiW2NdPWFbY10pfSksYn1mdW5jdGlvbiBtKGEpe3ZhciBiPXt9LGM9QXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShBcnJheS5wcm90b3R5cGUsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTtmb3IodmFyIGQgaW4gYSktMT09aChjLGQpJiYoYltkXT1hW2RdKTtyZXR1cm4gYn1mdW5jdGlvbiBuKGEsYil7dmFyIGM9UChhKSxkPWM/W106e307cmV0dXJuIFEoYSxmdW5jdGlvbihhLGUpe2IoYSxlKSYmKGRbYz9kLmxlbmd0aDplXT1hKX0pLGR9ZnVuY3Rpb24gbyhhLGIpe3ZhciBjPVAoYSk/W106e307cmV0dXJuIFEoYSxmdW5jdGlvbihhLGQpe2NbZF09YihhLGQpfSksY31mdW5jdGlvbiBwKGEsYil7dmFyIGQ9MSxmPTIsaT17fSxqPVtdLGs9aSxsPVIoYS53aGVuKGkpLHskJHByb21pc2VzOmksJCR2YWx1ZXM6aX0pO3RoaXMuc3R1ZHk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gbihhLGMpe2lmKHNbY10hPT1mKXtpZihyLnB1c2goYyksc1tjXT09PWQpdGhyb3cgci5zcGxpY2UoMCxoKHIsYykpLG5ldyBFcnJvcigiQ3ljbGljIGRlcGVuZGVuY3k6ICIrci5qb2luKCIgLT4gIikpO2lmKHNbY109ZCxOKGEpKXEucHVzaChjLFtmdW5jdGlvbigpe3JldHVybiBiLmdldChhKX1dLGopO2Vsc2V7dmFyIGU9Yi5hbm5vdGF0ZShhKTtRKGUsZnVuY3Rpb24oYSl7YSE9PWMmJmkuaGFzT3duUHJvcGVydHkoYSkmJm4oaVthXSxhKX0pLHEucHVzaChjLGEsZSl9ci5wb3AoKSxzW2NdPWZ9fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIE8oYSkmJmEudGhlbiYmYS4kJHByb21pc2VzfWlmKCFPKGkpKXRocm93IG5ldyBFcnJvcigiJ2ludm9jYWJsZXMnIG11c3QgYmUgYW4gb2JqZWN0Iik7dmFyIHA9ZyhpfHx7fSkscT1bXSxyPVtdLHM9e307cmV0dXJuIFEoaSxuKSxpPXI9cz1udWxsLGZ1bmN0aW9uKGQsZixnKXtmdW5jdGlvbiBoKCl7LS11fHwodnx8ZSh0LGYuJCR2YWx1ZXMpLHIuJCR2YWx1ZXM9dCxyLiQkcHJvbWlzZXM9ci4kJHByb21pc2VzfHwhMCxkZWxldGUgci4kJGluaGVyaXRlZFZhbHVlcyxuLnJlc29sdmUodCkpfWZ1bmN0aW9uIGkoYSl7ci4kJGZhaWx1cmU9YSxuLnJlamVjdChhKX1mdW5jdGlvbiBqKGMsZSxmKXtmdW5jdGlvbiBqKGEpe2wucmVqZWN0KGEpLGkoYSl9ZnVuY3Rpb24gaygpe2lmKCFMKHIuJCRmYWlsdXJlKSl0cnl7bC5yZXNvbHZlKGIuaW52b2tlKGUsZyx0KSksbC5wcm9taXNlLnRoZW4oZnVuY3Rpb24oYSl7dFtjXT1hLGgoKX0sail9Y2F0Y2goYSl7aihhKX19dmFyIGw9YS5kZWZlcigpLG09MDtRKGYsZnVuY3Rpb24oYSl7cy5oYXNPd25Qcm9wZXJ0eShhKSYmIWQuaGFzT3duUHJvcGVydHkoYSkmJihtKyssc1thXS50aGVuKGZ1bmN0aW9uKGIpe3RbYV09YiwtLW18fGsoKX0saikpfSksbXx8aygpLHNbY109bC5wcm9taXNlfWlmKG8oZCkmJmc9PT1jJiYoZz1mLGY9ZCxkPW51bGwpLGQpe2lmKCFPKGQpKXRocm93IG5ldyBFcnJvcigiJ2xvY2FscycgbXVzdCBiZSBhbiBvYmplY3QiKX1lbHNlIGQ9aztpZihmKXtpZighbyhmKSl0aHJvdyBuZXcgRXJyb3IoIidwYXJlbnQnIG11c3QgYmUgYSBwcm9taXNlIHJldHVybmVkIGJ5ICRyZXNvbHZlLnJlc29sdmUoKSIpfWVsc2UgZj1sO3ZhciBuPWEuZGVmZXIoKSxyPW4ucHJvbWlzZSxzPXIuJCRwcm9taXNlcz17fSx0PVIoe30sZCksdT0xK3EubGVuZ3RoLzMsdj0hMTtpZihMKGYuJCRmYWlsdXJlKSlyZXR1cm4gaShmLiQkZmFpbHVyZSkscjtmLiQkaW5oZXJpdGVkVmFsdWVzJiZlKHQsbShmLiQkaW5oZXJpdGVkVmFsdWVzLHApKSxSKHMsZi4kJHByb21pc2VzKSxmLiQkdmFsdWVzPyh2PWUodCxtKGYuJCR2YWx1ZXMscCkpLHIuJCRpbmhlcml0ZWRWYWx1ZXM9bShmLiQkdmFsdWVzLHApLGgoKSk6KGYuJCRpbmhlcml0ZWRWYWx1ZXMmJihyLiQkaW5oZXJpdGVkVmFsdWVzPW0oZi4kJGluaGVyaXRlZFZhbHVlcyxwKSksZi50aGVuKGgsaSkpO2Zvcih2YXIgdz0wLHg9cS5sZW5ndGg7eD53O3crPTMpZC5oYXNPd25Qcm9wZXJ0eShxW3ddKT9oKCk6aihxW3ddLHFbdysxXSxxW3crMl0pO3JldHVybiByfX0sdGhpcy5yZXNvbHZlPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLnN0dWR5KGEpKGIsYyxkKX19ZnVuY3Rpb24gcShhLGIsYyl7dGhpcy5mcm9tQ29uZmlnPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTChhLnRlbXBsYXRlKT90aGlzLmZyb21TdHJpbmcoYS50ZW1wbGF0ZSxiKTpMKGEudGVtcGxhdGVVcmwpP3RoaXMuZnJvbVVybChhLnRlbXBsYXRlVXJsLGIpOkwoYS50ZW1wbGF0ZVByb3ZpZGVyKT90aGlzLmZyb21Qcm92aWRlcihhLnRlbXBsYXRlUHJvdmlkZXIsYixjKTpudWxsfSx0aGlzLmZyb21TdHJpbmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTShhKT9hKGIpOmF9LHRoaXMuZnJvbVVybD1mdW5jdGlvbihjLGQpe3JldHVybiBNKGMpJiYoYz1jKGQpKSxudWxsPT1jP251bGw6YS5nZXQoYyx7Y2FjaGU6YixoZWFkZXJzOntBY2NlcHQ6InRleHQvaHRtbCJ9fSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhfSl9LHRoaXMuZnJvbVByb3ZpZGVyPWZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5pbnZva2UoYSxudWxsLGR8fHtwYXJhbXM6Yn0pfX1mdW5jdGlvbiByKGEsYixlKXtmdW5jdGlvbiBmKGIsYyxkLGUpe2lmKHEucHVzaChiKSxvW2JdKXJldHVybiBvW2JdO2lmKCEvXlx3KyhbLS5dK1x3KykqKD86XFtcXSk/JC8udGVzdChiKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVyIG5hbWUgJyIrYisiJyBpbiBwYXR0ZXJuICciK2ErIiciKTtpZihwW2JdKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICciK2IrIicgaW4gcGF0dGVybiAnIithKyInIik7cmV0dXJuIHBbYl09bmV3IFUuUGFyYW0oYixjLGQsZSkscFtiXX1mdW5jdGlvbiBnKGEsYixjLGQpe3ZhciBlPVsiIiwiIl0sZj1hLnJlcGxhY2UoL1tcXFxbXF1cXiQqKz8uKCl8e31dL2csIlxcJCYiKTtpZighYilyZXR1cm4gZjtzd2l0Y2goYyl7Y2FzZSExOmU9WyIoIiwiKSIrKGQ/Ij8iOiIiKV07YnJlYWs7Y2FzZSEwOmY9Zi5yZXBsYWNlKC9cLyQvLCIiKSxlPVsiKD86LygiLCIpfC8pPyJdO2JyZWFrO2RlZmF1bHQ6ZT1bIigiK2MrInwiLCIpPyJdfXJldHVybiBmK2VbMF0rYitlWzFdfWZ1bmN0aW9uIGgoZSxmKXt2YXIgZyxoLGksaixrO3JldHVybiBnPWVbMl18fGVbM10saz1iLnBhcmFtc1tnXSxpPWEuc3Vic3RyaW5nKG0sZS5pbmRleCksaD1mP2VbNF06ZVs0XXx8KCIqIj09ZVsxXT8iLioiOm51bGwpLGgmJihqPVUudHlwZShoKXx8ZChVLnR5cGUoInN0cmluZyIpLHtwYXR0ZXJuOm5ldyBSZWdFeHAoaCxiLmNhc2VJbnNlbnNpdGl2ZT8iaSI6Yyl9KSkse2lkOmcscmVnZXhwOmgsc2VnbWVudDppLHR5cGU6aixjZmc6a319Yj1SKHtwYXJhbXM6e319LE8oYik/Yjp7fSk7dmFyIGksaj0vKFs6Kl0pKFtcd1xbXF1dKyl8XHsoW1x3XFtcXV0rKSg/Olw6XHMqKCg/Oltee31cXF0rfFxcLnxceyg/Oltee31cXF0rfFxcLikqXH0pKykpP1x9L2csaz0vKFs6XT8pKFtcd1xbXF0uLV0rKXxceyhbXHdcW1xdLi1dKykoPzpcOlxzKigoPzpbXnt9XFxdK3xcXC58XHsoPzpbXnt9XFxdK3xcXC4pKlx9KSspKT9cfS9nLGw9Il4iLG09MCxuPXRoaXMuc2VnbWVudHM9W10sbz1lP2UucGFyYW1zOnt9LHA9dGhpcy5wYXJhbXM9ZT9lLnBhcmFtcy4kJG5ldygpOm5ldyBVLlBhcmFtU2V0LHE9W107dGhpcy5zb3VyY2U9YTtmb3IodmFyIHIscyx0OyhpPWouZXhlYyhhKSkmJihyPWgoaSwhMSksIShyLnNlZ21lbnQuaW5kZXhPZigiPyIpPj0wKSk7KXM9ZihyLmlkLHIudHlwZSxyLmNmZywicGF0aCIpLGwrPWcoci5zZWdtZW50LHMudHlwZS5wYXR0ZXJuLnNvdXJjZSxzLnNxdWFzaCxzLmlzT3B0aW9uYWwpLG4ucHVzaChyLnNlZ21lbnQpLG09ai5sYXN0SW5kZXg7dD1hLnN1YnN0cmluZyhtKTt2YXIgdT10LmluZGV4T2YoIj8iKTtpZih1Pj0wKXt2YXIgdj10aGlzLnNvdXJjZVNlYXJjaD10LnN1YnN0cmluZyh1KTtpZih0PXQuc3Vic3RyaW5nKDAsdSksdGhpcy5zb3VyY2VQYXRoPWEuc3Vic3RyaW5nKDAsbSt1KSx2Lmxlbmd0aD4wKWZvcihtPTA7aT1rLmV4ZWModik7KXI9aChpLCEwKSxzPWYoci5pZCxyLnR5cGUsci5jZmcsInNlYXJjaCIpLG09ai5sYXN0SW5kZXh9ZWxzZSB0aGlzLnNvdXJjZVBhdGg9YSx0aGlzLnNvdXJjZVNlYXJjaD0iIjtsKz1nKHQpKyhiLnN0cmljdD09PSExPyIvPyI6IiIpKyIkIixuLnB1c2godCksdGhpcy5yZWdleHA9bmV3IFJlZ0V4cChsLGIuY2FzZUluc2Vuc2l0aXZlPyJpIjpjKSx0aGlzLnByZWZpeD1uWzBdLHRoaXMuJCRwYXJhbU5hbWVzPXF9ZnVuY3Rpb24gcyhhKXtSKHRoaXMsYSl9ZnVuY3Rpb24gdCgpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuIG51bGwhPWE/YS50b1N0cmluZygpLnJlcGxhY2UoL34vZywifn4iKS5yZXBsYWNlKC9cLy9nLCJ+MkYiKTphfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIG51bGwhPWE/YS50b1N0cmluZygpLnJlcGxhY2UoL34yRi9nLCIvIikucmVwbGFjZSgvfn4vZywifiIpOmF9ZnVuY3Rpb24gZigpe3JldHVybntzdHJpY3Q6cCxjYXNlSW5zZW5zaXRpdmU6bX19ZnVuY3Rpb24gaShhKXtyZXR1cm4gTShhKXx8UChhKSYmTShhW2EubGVuZ3RoLTFdKX1mdW5jdGlvbiBqKCl7Zm9yKDt3Lmxlbmd0aDspe3ZhciBhPXcuc2hpZnQoKTtpZihhLnBhdHRlcm4pdGhyb3cgbmV3IEVycm9yKCJZb3UgY2Fubm90IG92ZXJyaWRlIGEgdHlwZSdzIC5wYXR0ZXJuIGF0IHJ1bnRpbWUuIik7Yi5leHRlbmQodVthLm5hbWVdLGwuaW52b2tlKGEuZGVmKSl9fWZ1bmN0aW9uIGsoYSl7Uih0aGlzLGF8fHt9KX1VPXRoaXM7dmFyIGwsbT0hMSxwPSEwLHE9ITEsdT17fSx2PSEwLHc9W10seD17c3RyaW5nOntlbmNvZGU6YSxkZWNvZGU6ZSxpczpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YXx8IUwoYSl8fCJzdHJpbmciPT10eXBlb2YgYX0scGF0dGVybjovW15cL10qL30sImludCI6e2VuY29kZTphLGRlY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQoYSwxMCl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiBMKGEpJiZ0aGlzLmRlY29kZShhLnRvU3RyaW5nKCkpPT09YX0scGF0dGVybjovXGQrL30sYm9vbDp7ZW5jb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhPzE6MH0sZGVjb2RlOmZ1bmN0aW9uKGEpe3JldHVybiAwIT09cGFyc2VJbnQoYSwxMCl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09ITB8fGE9PT0hMX0scGF0dGVybjovMHwxL30sZGF0ZTp7ZW5jb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzKGEpP1thLmdldEZ1bGxZZWFyKCksKCIwIisoYS5nZXRNb250aCgpKzEpKS5zbGljZSgtMiksKCIwIithLmdldERhdGUoKSkuc2xpY2UoLTIpXS5qb2luKCItIik6Y30sZGVjb2RlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXMoYSkpcmV0dXJuIGE7dmFyIGI9dGhpcy5jYXB0dXJlLmV4ZWMoYSk7cmV0dXJuIGI/bmV3IERhdGUoYlsxXSxiWzJdLTEsYlszXSk6Y30saXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBEYXRlJiYhaXNOYU4oYS52YWx1ZU9mKCkpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pcyhhKSYmdGhpcy5pcyhiKSYmYS50b0lTT1N0cmluZygpPT09Yi50b0lTT1N0cmluZygpfSxwYXR0ZXJuOi9bMC05XXs0fS0oPzowWzEtOV18MVswLTJdKS0oPzowWzEtOV18WzEtMl1bMC05XXwzWzAtMV0pLyxjYXB0dXJlOi8oWzAtOV17NH0pLSgwWzEtOV18MVswLTJdKS0oMFsxLTldfFsxLTJdWzAtOV18M1swLTFdKS99LGpzb246e2VuY29kZTpiLnRvSnNvbixkZWNvZGU6Yi5mcm9tSnNvbixpczpiLmlzT2JqZWN0LGVxdWFsczpiLmVxdWFscyxwYXR0ZXJuOi9bXlwvXSovfSxhbnk6e2VuY29kZTpiLmlkZW50aXR5LGRlY29kZTpiLmlkZW50aXR5LGVxdWFsczpiLmVxdWFscyxwYXR0ZXJuOi8uKi99fTt0LiQkZ2V0RGVmYXVsdFZhbHVlPWZ1bmN0aW9uKGEpe2lmKCFpKGEudmFsdWUpKXJldHVybiBhLnZhbHVlO2lmKCFsKXRocm93IG5ldyBFcnJvcigiSW5qZWN0YWJsZSBmdW5jdGlvbnMgY2Fubm90IGJlIGNhbGxlZCBhdCBjb25maWd1cmF0aW9uIHRpbWUiKTtyZXR1cm4gbC5pbnZva2UoYS52YWx1ZSl9LHRoaXMuY2FzZUluc2Vuc2l0aXZlPWZ1bmN0aW9uKGEpe3JldHVybiBMKGEpJiYobT1hKSxtfSx0aGlzLnN0cmljdE1vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIEwoYSkmJihwPWEpLHB9LHRoaXMuZGVmYXVsdFNxdWFzaFBvbGljeT1mdW5jdGlvbihhKXtpZighTChhKSlyZXR1cm4gcTtpZihhIT09ITAmJmEhPT0hMSYmIU4oYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHNxdWFzaCBwb2xpY3k6ICIrYSsiLiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIGFyYml0cmFyeS1zdHJpbmciKTtyZXR1cm4gcT1hLGF9LHRoaXMuY29tcGlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgcihhLFIoZigpLGIpKX0sdGhpcy5pc01hdGNoZXI9ZnVuY3Rpb24oYSl7aWYoIU8oYSkpcmV0dXJuITE7dmFyIGI9ITA7cmV0dXJuIFEoci5wcm90b3R5cGUsZnVuY3Rpb24oYyxkKXtNKGMpJiYoYj1iJiZMKGFbZF0pJiZNKGFbZF0pKX0pLGJ9LHRoaXMudHlwZT1mdW5jdGlvbihhLGIsYyl7aWYoIUwoYikpcmV0dXJuIHVbYV07aWYodS5oYXNPd25Qcm9wZXJ0eShhKSl0aHJvdyBuZXcgRXJyb3IoIkEgdHlwZSBuYW1lZCAnIithKyInIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC4iKTtyZXR1cm4gdVthXT1uZXcgcyhSKHtuYW1lOmF9LGIpKSxjJiYody5wdXNoKHtuYW1lOmEsZGVmOmN9KSx2fHxqKCkpLHRoaXN9LFEoeCxmdW5jdGlvbihhLGIpe3VbYl09bmV3IHMoUih7bmFtZTpifSxhKSl9KSx1PWQodSx7fSksdGhpcy4kZ2V0PVsiJGluamVjdG9yIixmdW5jdGlvbihhKXtyZXR1cm4gbD1hLHY9ITEsaigpLFEoeCxmdW5jdGlvbihhLGIpe3VbYl18fCh1W2JdPW5ldyBzKGEpKX0pLHRoaXN9XSx0aGlzLlBhcmFtPWZ1bmN0aW9uKGEsZCxlLGYpe2Z1bmN0aW9uIGooYSl7dmFyIGI9TyhhKT9nKGEpOltdLGM9LTE9PT1oKGIsInZhbHVlIikmJi0xPT09aChiLCJ0eXBlIikmJi0xPT09aChiLCJzcXVhc2giKSYmLTE9PT1oKGIsImFycmF5Iik7cmV0dXJuIGMmJihhPXt2YWx1ZTphfSksYS4kJGZuPWkoYS52YWx1ZSk/YS52YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnZhbHVlfSxhfWZ1bmN0aW9uIGsoYyxkLGUpe2lmKGMudHlwZSYmZCl0aHJvdyBuZXcgRXJyb3IoIlBhcmFtICciK2ErIicgaGFzIHR3byB0eXBlIGNvbmZpZ3VyYXRpb25zLiIpO3JldHVybiBkP2Q6Yy50eXBlP2IuaXNTdHJpbmcoYy50eXBlKT91W2MudHlwZV06Yy50eXBlIGluc3RhbmNlb2Ygcz9jLnR5cGU6bmV3IHMoYy50eXBlKToiY29uZmlnIj09PWU/dS5hbnk6dS5zdHJpbmd9ZnVuY3Rpb24gbSgpe3ZhciBiPXthcnJheToic2VhcmNoIj09PWY/ImF1dG8iOiExfSxjPWEubWF0Y2goL1xbXF0kLyk/e2FycmF5OiEwfTp7fTtyZXR1cm4gUihiLGMsZSkuYXJyYXl9ZnVuY3Rpb24gcChhLGIpe3ZhciBjPWEuc3F1YXNoO2lmKCFifHxjPT09ITEpcmV0dXJuITE7aWYoIUwoYyl8fG51bGw9PWMpcmV0dXJuIHE7aWYoYz09PSEwfHxOKGMpKXJldHVybiBjO3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCBzcXVhc2ggcG9saWN5OiAnIitjKyInLiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIG9yIGFyYml0cmFyeSBzdHJpbmciKX1mdW5jdGlvbiByKGEsYixkLGUpe3ZhciBmLGcsaT1be2Zyb206IiIsdG86ZHx8Yj9jOiIifSx7ZnJvbTpudWxsLHRvOmR8fGI/YzoiIn1dO3JldHVybiBmPVAoYS5yZXBsYWNlKT9hLnJlcGxhY2U6W10sTihlKSYmZi5wdXNoKHtmcm9tOmUsdG86Y30pLGc9byhmLGZ1bmN0aW9uKGEpe3JldHVybiBhLmZyb219KSxuKGksZnVuY3Rpb24oYSl7cmV0dXJuLTE9PT1oKGcsYS5mcm9tKX0pLmNvbmNhdChmKX1mdW5jdGlvbiB0KCl7aWYoIWwpdGhyb3cgbmV3IEVycm9yKCJJbmplY3RhYmxlIGZ1bmN0aW9ucyBjYW5ub3QgYmUgY2FsbGVkIGF0IGNvbmZpZ3VyYXRpb24gdGltZSIpO3ZhciBhPWwuaW52b2tlKGUuJCRmbik7aWYobnVsbCE9PWEmJmEhPT1jJiYheC50eXBlLmlzKGEpKXRocm93IG5ldyBFcnJvcigiRGVmYXVsdCB2YWx1ZSAoIithKyIpIGZvciBwYXJhbWV0ZXIgJyIreC5pZCsiJyBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVHlwZSAoIit4LnR5cGUubmFtZSsiKSIpO3JldHVybiBhfWZ1bmN0aW9uIHYoYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIuZnJvbT09PWF9fWZ1bmN0aW9uIGMoYSl7dmFyIGM9byhuKHgucmVwbGFjZSxiKGEpKSxmdW5jdGlvbihhKXtyZXR1cm4gYS50b30pO3JldHVybiBjLmxlbmd0aD9jWzBdOmF9cmV0dXJuIGE9YyhhKSxMKGEpP3gudHlwZS4kbm9ybWFsaXplKGEpOnQoKX1mdW5jdGlvbiB3KCl7cmV0dXJuIntQYXJhbToiK2ErIiAiK2QrIiBzcXVhc2g6ICciK0ErIicgb3B0aW9uYWw6ICIreisifSJ9dmFyIHg9dGhpcztlPWooZSksZD1rKGUsZCxmKTt2YXIgeT1tKCk7ZD15P2QuJGFzQXJyYXkoeSwic2VhcmNoIj09PWYpOmQsInN0cmluZyIhPT1kLm5hbWV8fHl8fCJwYXRoIiE9PWZ8fGUudmFsdWUhPT1jfHwoZS52YWx1ZT0iIik7dmFyIHo9ZS52YWx1ZSE9PWMsQT1wKGUseiksQj1yKGUseSx6LEEpO1IodGhpcyx7aWQ6YSx0eXBlOmQsbG9jYXRpb246ZixhcnJheTp5LHNxdWFzaDpBLHJlcGxhY2U6Qixpc09wdGlvbmFsOnosdmFsdWU6dixkeW5hbWljOmMsY29uZmlnOmUsdG9TdHJpbmc6d30pfSxrLnByb3RvdHlwZT17JCRuZXc6ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLFIobmV3IGsseyQkcGFyZW50OnRoaXN9KSl9LCQka2V5czpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPVtdLGM9dGhpcyxkPWcoay5wcm90b3R5cGUpO2M7KWIucHVzaChjKSxjPWMuJCRwYXJlbnQ7cmV0dXJuIGIucmV2ZXJzZSgpLFEoYixmdW5jdGlvbihiKXtRKGcoYiksZnVuY3Rpb24oYil7LTE9PT1oKGEsYikmJi0xPT09aChkLGIpJiZhLnB1c2goYil9KX0pLGF9LCQkdmFsdWVzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9dGhpcztyZXR1cm4gUShjLiQka2V5cygpLGZ1bmN0aW9uKGQpe2JbZF09Y1tkXS52YWx1ZShhJiZhW2RdKX0pLGJ9LCQkZXF1YWxzOmZ1bmN0aW9uKGEsYil7dmFyIGM9ITAsZD10aGlzO3JldHVybiBRKGQuJCRrZXlzKCksZnVuY3Rpb24oZSl7dmFyIGY9YSYmYVtlXSxnPWImJmJbZV07ZFtlXS50eXBlLmVxdWFscyhmLGcpfHwoYz0hMSl9KSxjfSwkJHZhbGlkYXRlczpmdW5jdGlvbihhKXt2YXIgZCxlLGYsZyxoLGk9dGhpcy4kJGtleXMoKTtmb3IoZD0wO2Q8aS5sZW5ndGgmJihlPXRoaXNbaVtkXV0sZj1hW2lbZF1dLGYhPT1jJiZudWxsIT09Znx8IWUuaXNPcHRpb25hbCk7ZCsrKXtpZihnPWUudHlwZS4kbm9ybWFsaXplKGYpLCFlLnR5cGUuaXMoZykpcmV0dXJuITE7aWYoaD1lLnR5cGUuZW5jb2RlKGcpLGIuaXNTdHJpbmcoaCkmJiFlLnR5cGUucGF0dGVybi5leGVjKGgpKXJldHVybiExfXJldHVybiEwfSwkJHBhcmVudDpjfSx0aGlzLlBhcmFtU2V0PWt9ZnVuY3Rpb24gdShhLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9L15cXigoPzpcXFteYS16QS1aMC05XXxbXlxcXFtcXVxeJCorPy4oKXx7fV0rKSopLy5leGVjKGEuc291cmNlKTtyZXR1cm4gbnVsbCE9Yj9iWzFdLnJlcGxhY2UoL1xcKC4pL2csIiQxIik6IiJ9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBhLnJlcGxhY2UoL1wkKFwkfFxkezEsMn0pLyxmdW5jdGlvbihhLGMpe3JldHVybiBiWyIkIj09PWM/MDpOdW1iZXIoYyldfSl9ZnVuY3Rpb24gZyhhLGIsYyl7aWYoIWMpcmV0dXJuITE7dmFyIGQ9YS5pbnZva2UoYixiLHskbWF0Y2g6Y30pO3JldHVybiBMKGQpP2Q6ITB9ZnVuY3Rpb24gaChkLGUsZixnLGgpe2Z1bmN0aW9uIG0oYSxiLGMpe3JldHVybiIvIj09PXE/YTpiP3Euc2xpY2UoMCwtMSkrYTpjP3Euc2xpY2UoMSkrYTphfWZ1bmN0aW9uIG4oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1hKGYsZCk7cmV0dXJuIGI/KE4oYikmJmQucmVwbGFjZSgpLnVybChiKSwhMCk6ITF9aWYoIWF8fCFhLmRlZmF1bHRQcmV2ZW50ZWQpe3AmJmQudXJsKCk9PT1wO3A9Yzt2YXIgZSxnPWoubGVuZ3RoO2ZvcihlPTA7Zz5lO2UrKylpZihiKGpbZV0pKXJldHVybjtrJiZiKGspfX1mdW5jdGlvbiBvKCl7cmV0dXJuIGk9aXx8ZS4kb24oIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MiLG4pfXZhciBwLHE9Zy5iYXNlSHJlZigpLHI9ZC51cmwoKTtyZXR1cm4gbHx8bygpLHtzeW5jOmZ1bmN0aW9uKCl7bigpfSxsaXN0ZW46ZnVuY3Rpb24oKXtyZXR1cm4gbygpfSx1cGRhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dm9pZChyPWQudXJsKCkpOnZvaWQoZC51cmwoKSE9PXImJihkLnVybChyKSxkLnJlcGxhY2UoKSkpfSxwdXNoOmZ1bmN0aW9uKGEsYixlKXt2YXIgZj1hLmZvcm1hdChifHx7fSk7bnVsbCE9PWYmJmImJmJbIiMiXSYmKGYrPSIjIitiWyIjIl0pLGQudXJsKGYpLHA9ZSYmZS4kJGF2b2lkUmVzeW5jP2QudXJsKCk6YyxlJiZlLnJlcGxhY2UmJmQucmVwbGFjZSgpfSxocmVmOmZ1bmN0aW9uKGMsZSxmKXtpZighYy52YWxpZGF0ZXMoZSkpcmV0dXJuIG51bGw7dmFyIGc9YS5odG1sNU1vZGUoKTtiLmlzT2JqZWN0KGcpJiYoZz1nLmVuYWJsZWQpLGc9ZyYmaC5oaXN0b3J5O3ZhciBpPWMuZm9ybWF0KGUpO2lmKGY9Znx8e30sZ3x8bnVsbD09PWl8fChpPSIjIithLmhhc2hQcmVmaXgoKStpKSxudWxsIT09aSYmZSYmZVsiIyJdJiYoaSs9IiMiK2VbIiMiXSksaT1tKGksZyxmLmFic29sdXRlKSwhZi5hYnNvbHV0ZXx8IWkpcmV0dXJuIGk7dmFyIGo9IWcmJmk/Ii8iOiIiLGs9ZC5wb3J0KCk7cmV0dXJuIGs9ODA9PT1rfHw0NDM9PT1rPyIiOiI6IitrLFtkLnByb3RvY29sKCksIjovLyIsZC5ob3N0KCksayxqLGldLmpvaW4oIiIpfX19dmFyIGksaj1bXSxrPW51bGwsbD0hMTt0aGlzLnJ1bGU9ZnVuY3Rpb24oYSl7aWYoIU0oYSkpdGhyb3cgbmV3IEVycm9yKCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uIik7cmV0dXJuIGoucHVzaChhKSx0aGlzfSx0aGlzLm90aGVyd2lzZT1mdW5jdGlvbihhKXtpZihOKGEpKXt2YXIgYj1hO2E9ZnVuY3Rpb24oKXtyZXR1cm4gYn19ZWxzZSBpZighTShhKSl0aHJvdyBuZXcgRXJyb3IoIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb24iKTtyZXR1cm4gaz1hLHRoaXN9LHRoaXMud2hlbj1mdW5jdGlvbihhLGIpe3ZhciBjLGg9TihiKTtpZihOKGEpJiYoYT1kLmNvbXBpbGUoYSkpLCFoJiYhTShiKSYmIVAoYikpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkICdoYW5kbGVyJyBpbiB3aGVuKCkiKTt2YXIgaT17bWF0Y2hlcjpmdW5jdGlvbihhLGIpe3JldHVybiBoJiYoYz1kLmNvbXBpbGUoYiksYj1bIiRtYXRjaCIsZnVuY3Rpb24oYSl7cmV0dXJuIGMuZm9ybWF0KGEpfV0pLFIoZnVuY3Rpb24oYyxkKXtyZXR1cm4gZyhjLGIsYS5leGVjKGQucGF0aCgpLGQuc2VhcmNoKCkpKX0se3ByZWZpeDpOKGEucHJlZml4KT9hLnByZWZpeDoiIn0pfSxyZWdleDpmdW5jdGlvbihhLGIpe2lmKGEuZ2xvYmFsfHxhLnN0aWNreSl0aHJvdyBuZXcgRXJyb3IoIndoZW4oKSBSZWdFeHAgbXVzdCBub3QgYmUgZ2xvYmFsIG9yIHN0aWNreSIpO3JldHVybiBoJiYoYz1iLGI9WyIkbWF0Y2giLGZ1bmN0aW9uKGEpe3JldHVybiBmKGMsYSl9XSksUihmdW5jdGlvbihjLGQpe3JldHVybiBnKGMsYixhLmV4ZWMoZC5wYXRoKCkpKX0se3ByZWZpeDplKGEpfSl9fSxqPXttYXRjaGVyOmQuaXNNYXRjaGVyKGEpLHJlZ2V4OmEgaW5zdGFuY2VvZiBSZWdFeHB9O2Zvcih2YXIgayBpbiBqKWlmKGpba10pcmV0dXJuIHRoaXMucnVsZShpW2tdKGEsYikpO3Rocm93IG5ldyBFcnJvcigiaW52YWxpZCAnd2hhdCcgaW4gd2hlbigpIil9LHRoaXMuZGVmZXJJbnRlcmNlcHQ9ZnVuY3Rpb24oYSl7YT09PWMmJihhPSEwKSxsPWF9LHRoaXMuJGdldD1oLGguJGluamVjdD1bIiRsb2NhdGlvbiIsIiRyb290U2NvcGUiLCIkaW5qZWN0b3IiLCIkYnJvd3NlciIsIiRzbmlmZmVyIl19ZnVuY3Rpb24gdihhLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuIDA9PT1hLmluZGV4T2YoIi4iKXx8MD09PWEuaW5kZXhPZigiXiIpfWZ1bmN0aW9uIG0oYSxiKXtpZighYSlyZXR1cm4gYzt2YXIgZD1OKGEpLGU9ZD9hOmEubmFtZSxnPWYoZSk7aWYoZyl7aWYoIWIpdGhyb3cgbmV3IEVycm9yKCJObyByZWZlcmVuY2UgcG9pbnQgZ2l2ZW4gZm9yIHBhdGggJyIrZSsiJyIpO2I9bShiKTtmb3IodmFyIGg9ZS5zcGxpdCgiLiIpLGk9MCxqPWgubGVuZ3RoLGs9YjtqPmk7aSsrKWlmKCIiIT09aFtpXXx8MCE9PWkpe2lmKCJeIiE9PWhbaV0pYnJlYWs7aWYoIWsucGFyZW50KXRocm93IG5ldyBFcnJvcigiUGF0aCAnIitlKyInIG5vdCB2YWxpZCBmb3Igc3RhdGUgJyIrYi5uYW1lKyInIik7az1rLnBhcmVudH1lbHNlIGs9YjtoPWguc2xpY2UoaSkuam9pbigiLiIpLGU9ay5uYW1lKyhrLm5hbWUmJmg/Ii4iOiIiKStofXZhciBsPXpbZV07cmV0dXJuIWx8fCFkJiYoZHx8bCE9PWEmJmwuc2VsZiE9PWEpP2M6bH1mdW5jdGlvbiBuKGEsYil7QVthXXx8KEFbYV09W10pLEFbYV0ucHVzaChiKX1mdW5jdGlvbiBwKGEpe2Zvcih2YXIgYj1BW2FdfHxbXTtiLmxlbmd0aDspcShiLnNoaWZ0KCkpfWZ1bmN0aW9uIHEoYil7Yj1kKGIse3NlbGY6YixyZXNvbHZlOmIucmVzb2x2ZXx8e30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lfX0pO3ZhciBjPWIubmFtZTtpZighTihjKXx8Yy5pbmRleE9mKCJAIik+PTApdGhyb3cgbmV3IEVycm9yKCJTdGF0ZSBtdXN0IGhhdmUgYSB2YWxpZCBuYW1lIik7aWYoei5oYXNPd25Qcm9wZXJ0eShjKSl0aHJvdyBuZXcgRXJyb3IoIlN0YXRlICciK2MrIicgaXMgYWxyZWFkeSBkZWZpbmVkIik7dmFyIGU9LTEhPT1jLmluZGV4T2YoIi4iKT9jLnN1YnN0cmluZygwLGMubGFzdEluZGV4T2YoIi4iKSk6TihiLnBhcmVudCk/Yi5wYXJlbnQ6TyhiLnBhcmVudCkmJk4oYi5wYXJlbnQubmFtZSk/Yi5wYXJlbnQubmFtZToiIjtpZihlJiYheltlXSlyZXR1cm4gbihlLGIuc2VsZik7Zm9yKHZhciBmIGluIEMpTShDW2ZdKSYmKGJbZl09Q1tmXShiLEMuJGRlbGVnYXRlc1tmXSkpO3JldHVybiB6W2NdPWIsIWJbQl0mJmIudXJsJiZhLndoZW4oYi51cmwsWyIkbWF0Y2giLCIkc3RhdGVQYXJhbXMiLGZ1bmN0aW9uKGEsYyl7eS4kY3VycmVudC5uYXZpZ2FibGU9PWImJmooYSxjKXx8eS50cmFuc2l0aW9uVG8oYixhLHtpbmhlcml0OiEwLGxvY2F0aW9uOiExfSl9XSkscChjKSxifWZ1bmN0aW9uIHIoYSl7cmV0dXJuIGEuaW5kZXhPZigiKiIpPi0xfWZ1bmN0aW9uIHMoYSl7Zm9yKHZhciBiPWEuc3BsaXQoIi4iKSxjPXkuJGN1cnJlbnQubmFtZS5zcGxpdCgiLiIpLGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspIioiPT09YltkXSYmKGNbZF09IioiKTtyZXR1cm4iKioiPT09YlswXSYmKGM9Yy5zbGljZShoKGMsYlsxXSkpLGMudW5zaGlmdCgiKioiKSksIioqIj09PWJbYi5sZW5ndGgtMV0mJihjLnNwbGljZShoKGMsYltiLmxlbmd0aC0yXSkrMSxOdW1iZXIuTUFYX1ZBTFVFKSxjLnB1c2goIioqIikpLGIubGVuZ3RoIT1jLmxlbmd0aD8hMTpjLmpvaW4oIiIpPT09Yi5qb2luKCIiKX1mdW5jdGlvbiB0KGEsYil7cmV0dXJuIE4oYSkmJiFMKGIpP0NbYV06TShiKSYmTihhKT8oQ1thXSYmIUMuJGRlbGVnYXRlc1thXSYmKEMuJGRlbGVnYXRlc1thXT1DW2FdKSxDW2FdPWIsdGhpcyk6dGhpc31mdW5jdGlvbiB1KGEsYil7cmV0dXJuIE8oYSk/Yj1hOmIubmFtZT1hLHEoYiksdGhpc31mdW5jdGlvbiB2KGEsZSxmLGgsbCxuLHAscSx0KXtmdW5jdGlvbiB1KGIsYyxkLGYpe3ZhciBnPWEuJGJyb2FkY2FzdCgiJHN0YXRlTm90Rm91bmQiLGIsYyxkKTtpZihnLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuIHAudXBkYXRlKCksRDtpZighZy5yZXRyeSlyZXR1cm4gbnVsbDtpZihmLiRyZXRyeSlyZXR1cm4gcC51cGRhdGUoKSxFO3ZhciBoPXkudHJhbnNpdGlvbj1lLndoZW4oZy5yZXRyeSk7cmV0dXJuIGgudGhlbihmdW5jdGlvbigpe3JldHVybiBoIT09eS50cmFuc2l0aW9uP0E6KGIub3B0aW9ucy4kcmV0cnk9ITAseS50cmFuc2l0aW9uVG8oYi50byxiLnRvUGFyYW1zLGIub3B0aW9ucykpfSxmdW5jdGlvbigpe3JldHVybiBEfSkscC51cGRhdGUoKSxofWZ1bmN0aW9uIHYoYSxjLGQsZyxpLGope2Z1bmN0aW9uIG0oKXt2YXIgYz1bXTtyZXR1cm4gUShhLnZpZXdzLGZ1bmN0aW9uKGQsZSl7dmFyIGc9ZC5yZXNvbHZlJiZkLnJlc29sdmUhPT1hLnJlc29sdmU/ZC5yZXNvbHZlOnt9O2cuJHRlbXBsYXRlPVtmdW5jdGlvbigpe3JldHVybiBmLmxvYWQoZSx7dmlldzpkLGxvY2FsczppLmdsb2JhbHMscGFyYW1zOm4sbm90aWZ5Omoubm90aWZ5fSl8fCIifV0sYy5wdXNoKGwucmVzb2x2ZShnLGkuZ2xvYmFscyxpLnJlc29sdmUsYSkudGhlbihmdW5jdGlvbihjKXtpZihNKGQuY29udHJvbGxlclByb3ZpZGVyKXx8UChkLmNvbnRyb2xsZXJQcm92aWRlcikpe3ZhciBmPWIuZXh0ZW5kKHt9LGcsaS5nbG9iYWxzKTtjLiQkY29udHJvbGxlcj1oLmludm9rZShkLmNvbnRyb2xsZXJQcm92aWRlcixudWxsLGYpfWVsc2UgYy4kJGNvbnRyb2xsZXI9ZC5jb250cm9sbGVyO2MuJCRzdGF0ZT1hLGMuJCRjb250cm9sbGVyQXM9ZC5jb250cm9sbGVyQXMsaVtlXT1jfSkpfSksZS5hbGwoYykudGhlbihmdW5jdGlvbigpe3JldHVybiBpLmdsb2JhbHN9KX12YXIgbj1kP2M6ayhhLnBhcmFtcy4kJGtleXMoKSxjKSxvPXskc3RhdGVQYXJhbXM6bn07aS5yZXNvbHZlPWwucmVzb2x2ZShhLnJlc29sdmUsbyxpLnJlc29sdmUsYSk7dmFyIHA9W2kucmVzb2x2ZS50aGVuKGZ1bmN0aW9uKGEpe2kuZ2xvYmFscz1hfSldO3JldHVybiBnJiZwLnB1c2goZyksZS5hbGwocCkudGhlbihtKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBpfSl9dmFyIEE9ZS5yZWplY3QobmV3IEVycm9yKCJ0cmFuc2l0aW9uIHN1cGVyc2VkZWQiKSksQz1lLnJlamVjdChuZXcgRXJyb3IoInRyYW5zaXRpb24gcHJldmVudGVkIikpLEQ9ZS5yZWplY3QobmV3IEVycm9yKCJ0cmFuc2l0aW9uIGFib3J0ZWQiKSksRT1lLnJlamVjdChuZXcgRXJyb3IoInRyYW5zaXRpb24gZmFpbGVkIikpO3JldHVybiB4LmxvY2Fscz17cmVzb2x2ZTpudWxsLGdsb2JhbHM6eyRzdGF0ZVBhcmFtczp7fX19LHk9e3BhcmFtczp7fSxjdXJyZW50Onguc2VsZiwkY3VycmVudDp4LHRyYW5zaXRpb246bnVsbH0seS5yZWxvYWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHkudHJhbnNpdGlvblRvKHkuY3VycmVudCxuLHtyZWxvYWQ6YXx8ITAsaW5oZXJpdDohMSxub3RpZnk6ITB9KX0seS5nbz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkudHJhbnNpdGlvblRvKGEsYixSKHtpbmhlcml0OiEwLHJlbGF0aXZlOnkuJGN1cnJlbnR9LGMpKX0seS50cmFuc2l0aW9uVG89ZnVuY3Rpb24oYixjLGYpe2M9Y3x8e30sZj1SKHtsb2NhdGlvbjohMCxpbmhlcml0OiExLHJlbGF0aXZlOm51bGwsbm90aWZ5OiEwLHJlbG9hZDohMSwkcmV0cnk6ITF9LGZ8fHt9KTt2YXIgZyxqPXkuJGN1cnJlbnQsbD15LnBhcmFtcyxvPWoucGF0aCxxPW0oYixmLnJlbGF0aXZlKSxyPWNbIiMiXTtpZighTChxKSl7dmFyIHM9e3RvOmIsdG9QYXJhbXM6YyxvcHRpb25zOmZ9LHQ9dShzLGouc2VsZixsLGYpO2lmKHQpcmV0dXJuIHQ7aWYoYj1zLnRvLGM9cy50b1BhcmFtcyxmPXMub3B0aW9ucyxxPW0oYixmLnJlbGF0aXZlKSwhTChxKSl7aWYoIWYucmVsYXRpdmUpdGhyb3cgbmV3IEVycm9yKCJObyBzdWNoIHN0YXRlICciK2IrIiciKTt0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCByZXNvbHZlICciK2IrIicgZnJvbSBzdGF0ZSAnIitmLnJlbGF0aXZlKyInIil9fWlmKHFbQl0pdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgdHJhbnNpdGlvbiB0byBhYnN0cmFjdCBzdGF0ZSAnIitiKyInIik7aWYoZi5pbmhlcml0JiYoYz1pKG4sY3x8e30seS4kY3VycmVudCxxKSksIXEucGFyYW1zLiQkdmFsaWRhdGVzKGMpKXJldHVybiBFO2M9cS5wYXJhbXMuJCR2YWx1ZXMoYyksYj1xO3ZhciB6PWIucGF0aCxEPTAsRj16W0RdLEc9eC5sb2NhbHMsSD1bXTtpZihmLnJlbG9hZCl7aWYoTihmLnJlbG9hZCl8fE8oZi5yZWxvYWQpKXtpZihPKGYucmVsb2FkKSYmIWYucmVsb2FkLm5hbWUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHJlbG9hZCBzdGF0ZSBvYmplY3QiKTt2YXIgST1mLnJlbG9hZD09PSEwP29bMF06bShmLnJlbG9hZCk7aWYoZi5yZWxvYWQmJiFJKXRocm93IG5ldyBFcnJvcigiTm8gc3VjaCByZWxvYWQgc3RhdGUgJyIrKE4oZi5yZWxvYWQpP2YucmVsb2FkOmYucmVsb2FkLm5hbWUpKyInIik7Zm9yKDtGJiZGPT09b1tEXSYmRiE9PUk7KUc9SFtEXT1GLmxvY2FscyxEKyssRj16W0RdfX1lbHNlIGZvcig7RiYmRj09PW9bRF0mJkYub3duUGFyYW1zLiQkZXF1YWxzKGMsbCk7KUc9SFtEXT1GLmxvY2FscyxEKyssRj16W0RdO2lmKHcoYixjLGosbCxHLGYpKXJldHVybiByJiYoY1siIyJdPXIpLHkucGFyYW1zPWMsUyh5LnBhcmFtcyxuKSxTKGsoYi5wYXJhbXMuJCRrZXlzKCksbiksYi5sb2NhbHMuZ2xvYmFscy4kc3RhdGVQYXJhbXMpLGYubG9jYXRpb24mJmIubmF2aWdhYmxlJiZiLm5hdmlnYWJsZS51cmwmJihwLnB1c2goYi5uYXZpZ2FibGUudXJsLGMseyQkYXZvaWRSZXN5bmM6ITAscmVwbGFjZToicmVwbGFjZSI9PT1mLmxvY2F0aW9ufSkscC51cGRhdGUoITApKSx5LnRyYW5zaXRpb249bnVsbCxlLndoZW4oeS5jdXJyZW50KTtpZihjPWsoYi5wYXJhbXMuJCRrZXlzKCksY3x8e30pLHImJihjWyIjIl09ciksZi5ub3RpZnkmJmEuJGJyb2FkY2FzdCgiJHN0YXRlQ2hhbmdlU3RhcnQiLGIuc2VsZixjLGouc2VsZixsLGYpLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuIGEuJGJyb2FkY2FzdCgiJHN0YXRlQ2hhbmdlQ2FuY2VsIixiLnNlbGYsYyxqLnNlbGYsbCksbnVsbD09eS50cmFuc2l0aW9uJiZwLnVwZGF0ZSgpLEM7Zm9yKHZhciBKPWUud2hlbihHKSxLPUQ7Szx6Lmxlbmd0aDtLKyssRj16W0tdKUc9SFtLXT1kKEcpLEo9dihGLGMsRj09PWIsSixHLGYpO3ZhciBNPXkudHJhbnNpdGlvbj1KLnRoZW4oZnVuY3Rpb24oKXt2YXIgZCxlLGc7aWYoeS50cmFuc2l0aW9uIT09TSlyZXR1cm4gQTtmb3IoZD1vLmxlbmd0aC0xO2Q+PUQ7ZC0tKWc9b1tkXSxnLnNlbGYub25FeGl0JiZoLmludm9rZShnLnNlbGYub25FeGl0LGcuc2VsZixnLmxvY2Fscy5nbG9iYWxzKSxnLmxvY2Fscz1udWxsO2ZvcihkPUQ7ZDx6Lmxlbmd0aDtkKyspZT16W2RdLGUubG9jYWxzPUhbZF0sZS5zZWxmLm9uRW50ZXImJmguaW52b2tlKGUuc2VsZi5vbkVudGVyLGUuc2VsZixlLmxvY2Fscy5nbG9iYWxzKTtyZXR1cm4geS50cmFuc2l0aW9uIT09TT9BOih5LiRjdXJyZW50PWIseS5jdXJyZW50PWIuc2VsZix5LnBhcmFtcz1jLFMoeS5wYXJhbXMsbikseS50cmFuc2l0aW9uPW51bGwsZi5sb2NhdGlvbiYmYi5uYXZpZ2FibGUmJnAucHVzaChiLm5hdmlnYWJsZS51cmwsYi5uYXZpZ2FibGUubG9jYWxzLmdsb2JhbHMuJHN0YXRlUGFyYW1zLHskJGF2b2lkUmVzeW5jOiEwLHJlcGxhY2U6InJlcGxhY2UiPT09Zi5sb2NhdGlvbn0pLGYubm90aWZ5JiZhLiRicm9hZGNhc3QoIiRzdGF0ZUNoYW5nZVN1Y2Nlc3MiLGIuc2VsZixjLGouc2VsZixsKSxwLnVwZGF0ZSghMCkseS5jdXJyZW50KX0sZnVuY3Rpb24oZCl7cmV0dXJuIHkudHJhbnNpdGlvbiE9PU0/QTooeS50cmFuc2l0aW9uPW51bGwsZz1hLiRicm9hZGNhc3QoIiRzdGF0ZUNoYW5nZUVycm9yIixiLnNlbGYsYyxqLnNlbGYsbCxkKSxnLmRlZmF1bHRQcmV2ZW50ZWR8fHAudXBkYXRlKCksZS5yZWplY3QoZCkpfSk7cmV0dXJuIE19LHkuaXM9ZnVuY3Rpb24oYSxiLGQpe2Q9Uih7cmVsYXRpdmU6eS4kY3VycmVudH0sZHx8e30pO3ZhciBlPW0oYSxkLnJlbGF0aXZlKTtyZXR1cm4gTChlKT95LiRjdXJyZW50IT09ZT8hMTpiP2ooZS5wYXJhbXMuJCR2YWx1ZXMoYiksbik6ITA6Y30seS5pbmNsdWRlcz1mdW5jdGlvbihhLGIsZCl7aWYoZD1SKHtyZWxhdGl2ZTp5LiRjdXJyZW50fSxkfHx7fSksTihhKSYmcihhKSl7aWYoIXMoYSkpcmV0dXJuITE7YT15LiRjdXJyZW50Lm5hbWV9dmFyIGU9bShhLGQucmVsYXRpdmUpO3JldHVybiBMKGUpP0woeS4kY3VycmVudC5pbmNsdWRlc1tlLm5hbWVdKT9iP2ooZS5wYXJhbXMuJCR2YWx1ZXMoYiksbixnKGIpKTohMDohMTpjfSx5LmhyZWY9ZnVuY3Rpb24oYSxiLGQpe2Q9Uih7bG9zc3k6ITAsaW5oZXJpdDohMCxhYnNvbHV0ZTohMSxyZWxhdGl2ZTp5LiRjdXJyZW50fSxkfHx7fSk7dmFyIGU9bShhLGQucmVsYXRpdmUpO2lmKCFMKGUpKXJldHVybiBudWxsO2QuaW5oZXJpdCYmKGI9aShuLGJ8fHt9LHkuJGN1cnJlbnQsZSkpO3ZhciBmPWUmJmQubG9zc3k/ZS5uYXZpZ2FibGU6ZTtyZXR1cm4gZiYmZi51cmwhPT1jJiZudWxsIT09Zi51cmw/cC5ocmVmKGYudXJsLGsoZS5wYXJhbXMuJCRrZXlzKCkuY29uY2F0KCIjIiksYnx8e30pLHthYnNvbHV0ZTpkLmFic29sdXRlfSk6bnVsbH0seS5nZXQ9ZnVuY3Rpb24oYSxiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbyhnKHopLGZ1bmN0aW9uKGEpe3JldHVybiB6W2FdLnNlbGZ9KTt2YXIgYz1tKGEsYnx8eS4kY3VycmVudCk7cmV0dXJuIGMmJmMuc2VsZj9jLnNlbGY6bnVsbH0seX1mdW5jdGlvbiB3KGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYixjKXtmdW5jdGlvbiBkKGIpe3JldHVybiJzZWFyY2giIT1hLnBhcmFtc1tiXS5sb2NhdGlvbn12YXIgZT1hLnBhcmFtcy4kJGtleXMoKS5maWx0ZXIoZCksZj1sLmFwcGx5KHt9LFthLnBhcmFtc10uY29uY2F0KGUpKSxnPW5ldyBVLlBhcmFtU2V0KGYpO3JldHVybiBnLiQkZXF1YWxzKGIsYyl9cmV0dXJuIWYucmVsb2FkJiZhPT09YyYmKGU9PT1jLmxvY2Fsc3x8YS5zZWxmLnJlbG9hZE9uU2VhcmNoPT09ITEmJmcoYyxkLGIpKT8hMDp2b2lkIDB9dmFyIHgseSx6PXt9LEE9e30sQj0iYWJzdHJhY3QiLEM9e3BhcmVudDpmdW5jdGlvbihhKXtpZihMKGEucGFyZW50KSYmYS5wYXJlbnQpcmV0dXJuIG0oYS5wYXJlbnQpO3ZhciBiPS9eKC4rKVwuW14uXSskLy5leGVjKGEubmFtZSk7cmV0dXJuIGI/bShiWzFdKTp4fSxkYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudCYmYS5wYXJlbnQuZGF0YSYmKGEuZGF0YT1hLnNlbGYuZGF0YT1kKGEucGFyZW50LmRhdGEsYS5kYXRhKSksYS5kYXRhfSx1cmw6ZnVuY3Rpb24oYSl7dmFyIGI9YS51cmwsYz17cGFyYW1zOmEucGFyYW1zfHx7fX07aWYoTihiKSlyZXR1cm4iXiI9PWIuY2hhckF0KDApP2UuY29tcGlsZShiLnN1YnN0cmluZygxKSxjKTooYS5wYXJlbnQubmF2aWdhYmxlfHx4KS51cmwuY29uY2F0KGIsYyk7aWYoIWJ8fGUuaXNNYXRjaGVyKGIpKXJldHVybiBiO3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCB1cmwgJyIrYisiJyBpbiBzdGF0ZSAnIithKyInIil9LG5hdmlnYWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gYS51cmw/YTphLnBhcmVudD9hLnBhcmVudC5uYXZpZ2FibGU6bnVsbH0sb3duUGFyYW1zOmZ1bmN0aW9uKGEpe3ZhciBiPWEudXJsJiZhLnVybC5wYXJhbXN8fG5ldyBVLlBhcmFtU2V0O3JldHVybiBRKGEucGFyYW1zfHx7fSxmdW5jdGlvbihhLGMpe2JbY118fChiW2NdPW5ldyBVLlBhcmFtKGMsbnVsbCxhLCJjb25maWciKSl9KSxifSxwYXJhbXM6ZnVuY3Rpb24oYSl7dmFyIGI9bChhLm93blBhcmFtcyxhLm93blBhcmFtcy4kJGtleXMoKSk7cmV0dXJuIGEucGFyZW50JiZhLnBhcmVudC5wYXJhbXM/UihhLnBhcmVudC5wYXJhbXMuJCRuZXcoKSxiKTpuZXcgVS5QYXJhbVNldH0sdmlld3M6ZnVuY3Rpb24oYSl7dmFyIGI9e307cmV0dXJuIFEoTChhLnZpZXdzKT9hLnZpZXdzOnsiIjphfSxmdW5jdGlvbihjLGQpe2QuaW5kZXhPZigiQCIpPDAmJihkKz0iQCIrYS5wYXJlbnQubmFtZSksYltkXT1jfSksYn0scGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnQ/YS5wYXJlbnQucGF0aC5jb25jYXQoYSk6W119LGluY2x1ZGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50P1Ioe30sYS5wYXJlbnQuaW5jbHVkZXMpOnt9O3JldHVybiBiW2EubmFtZV09ITAsYn0sJGRlbGVnYXRlczp7fX07eD1xKHtuYW1lOiIiLHVybDoiXiIsdmlld3M6bnVsbCwiYWJzdHJhY3QiOiEwfSkseC5uYXZpZ2FibGU9bnVsbCx0aGlzLmRlY29yYXRvcj10LHRoaXMuc3RhdGU9dSx0aGlzLiRnZXQ9dix2LiRpbmplY3Q9WyIkcm9vdFNjb3BlIiwiJHEiLCIkdmlldyIsIiRpbmplY3RvciIsIiRyZXNvbHZlIiwiJHN0YXRlUGFyYW1zIiwiJHVybFJvdXRlciIsIiRsb2NhdGlvbiIsIiR1cmxNYXRjaGVyRmFjdG9yeSJdfWZ1bmN0aW9uIHcoKXtmdW5jdGlvbiBhKGEsYil7cmV0dXJue2xvYWQ6ZnVuY3Rpb24oYSxjKXt2YXIgZCxlPXt0ZW1wbGF0ZTpudWxsLGNvbnRyb2xsZXI6bnVsbCx2aWV3Om51bGwsbG9jYWxzOm51bGwsbm90aWZ5OiEwLGFzeW5jOiEwLHBhcmFtczp7fX07cmV0dXJuIGM9UihlLGMpLGMudmlldyYmKGQ9Yi5mcm9tQ29uZmlnKGMudmlldyxjLnBhcmFtcyxjLmxvY2FscykpLGR9fX10aGlzLiRnZXQ9YSxhLiRpbmplY3Q9WyIkcm9vdFNjb3BlIiwiJHRlbXBsYXRlRmFjdG9yeSJdfWZ1bmN0aW9uIHgoKXt2YXIgYT0hMTt0aGlzLnVzZUFuY2hvclNjcm9sbD1mdW5jdGlvbigpe2E9ITB9LHRoaXMuJGdldD1bIiRhbmNob3JTY3JvbGwiLCIkdGltZW91dCIsZnVuY3Rpb24oYixjKXtyZXR1cm4gYT9iOmZ1bmN0aW9uKGEpe3JldHVybiBjKGZ1bmN0aW9uKCl7YVswXS5zY3JvbGxJbnRvVmlldygpfSwwLCExKX19XX1mdW5jdGlvbiB5KGEsYyxkLGUpe2Z1bmN0aW9uIGYoKXtyZXR1cm4gYy5oYXM/ZnVuY3Rpb24oYSl7cmV0dXJuIGMuaGFzKGEpP2MuZ2V0KGEpOm51bGx9OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gYy5nZXQoYSl9Y2F0Y2goYil7cmV0dXJuIG51bGx9fX1mdW5jdGlvbiBnKGEsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gMT09PVYmJlc+PTQ/ISFqLmVuYWJsZWQoYSk6MT09PVYmJlc+PTI/ISFqLmVuYWJsZWQoKTohIWl9dmFyIGU9e2VudGVyOmZ1bmN0aW9uKGEsYixjKXtiLmFmdGVyKGEpLGMoKX0sbGVhdmU6ZnVuY3Rpb24oYSxiKXthLnJlbW92ZSgpLGIoKX19O2lmKGEubm9hbmltYXRpb24pcmV0dXJuIGU7aWYoailyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxjLGYpe2QoYSk/Yi52ZXJzaW9uLm1pbm9yPjI/ai5lbnRlcihhLG51bGwsYykudGhlbihmKTpqLmVudGVyKGEsbnVsbCxjLGYpOmUuZW50ZXIoYSxjLGYpfSxsZWF2ZTpmdW5jdGlvbihhLGMpe2QoYSk/Yi52ZXJzaW9uLm1pbm9yPjI/ai5sZWF2ZShhKS50aGVuKGMpOmoubGVhdmUoYSxjKTplLmxlYXZlKGEsYyl9fTtpZihpKXt2YXIgZj1pJiZpKGMsYSk7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjKXtmLmVudGVyKGEsbnVsbCxiKSxjKCl9LGxlYXZlOmZ1bmN0aW9uKGEsYil7Zi5sZWF2ZShhKSxiKCl9fX1yZXR1cm4gZX12YXIgaD1mKCksaT1oKCIkYW5pbWF0b3IiKSxqPWgoIiRhbmltYXRlIiksaz17cmVzdHJpY3Q6IkVDQSIsdGVybWluYWw6ITAscHJpb3JpdHk6NDAwLHRyYW5zY2x1ZGU6ImVsZW1lbnQiLGNvbXBpbGU6ZnVuY3Rpb24oYyxmLGgpe3JldHVybiBmdW5jdGlvbihjLGYsaSl7ZnVuY3Rpb24gaigpe2Z1bmN0aW9uIGEoKXtiJiZiLnJlbW92ZSgpLGMmJmMuJGRlc3Ryb3koKX12YXIgYj1sLGM9bjtjJiYoYy5fd2lsbEJlRGVzdHJveWVkPSEwKSxtPyhyLmxlYXZlKG0sZnVuY3Rpb24oKXthKCksbD1udWxsfSksbD1tKTooYSgpLGw9bnVsbCksbT1udWxsLG49bnVsbH1mdW5jdGlvbiBrKGcpe3ZhciBrLGw9QShjLGksZixlKSxzPWwmJmEuJGN1cnJlbnQmJmEuJGN1cnJlbnQubG9jYWxzW2xdO2lmKChnfHxzIT09bykmJiFjLl93aWxsQmVEZXN0cm95ZWQpe2s9Yy4kbmV3KCksbz1hLiRjdXJyZW50LmxvY2Fsc1tsXSxrLiRlbWl0KCIkdmlld0NvbnRlbnRMb2FkaW5nIixsKTt2YXIgdD1oKGssZnVuY3Rpb24oYSl7ci5lbnRlcihhLGYsZnVuY3Rpb24oKXtuJiZuLiRlbWl0KCIkdmlld0NvbnRlbnRBbmltYXRpb25FbmRlZCIpLChiLmlzRGVmaW5lZChxKSYmIXF8fGMuJGV2YWwocSkpJiZkKGEpfSksaigpfSk7bT10LG49ayxuLiRlbWl0KCIkdmlld0NvbnRlbnRMb2FkZWQiLGwpLG4uJGV2YWwocCl9fXZhciBsLG0sbixvLHA9aS5vbmxvYWR8fCIiLHE9aS5hdXRvc2Nyb2xsLHI9ZyhpLGMpO2MuJG9uKCIkc3RhdGVDaGFuZ2VTdWNjZXNzIixmdW5jdGlvbigpe2soITEpfSksayghMCl9fX07cmV0dXJuIGt9ZnVuY3Rpb24geihhLGIsYyxkKXtyZXR1cm57cmVzdHJpY3Q6IkVDQSIscHJpb3JpdHk6LTQwMCxjb21waWxlOmZ1bmN0aW9uKGUpe3ZhciBmPWUuaHRtbCgpO3JldHVybiBmdW5jdGlvbihlLGcsaCl7dmFyIGk9Yy4kY3VycmVudCxqPUEoZSxoLGcsZCksaz1pJiZpLmxvY2Fsc1tqXTtpZihrKXtnLmRhdGEoIiR1aVZpZXciLHtuYW1lOmosc3RhdGU6ay4kJHN0YXRlfSksZy5odG1sKGsuJHRlbXBsYXRlP2suJHRlbXBsYXRlOmYpO3ZhciBsPWEoZy5jb250ZW50cygpKTtpZihrLiQkY29udHJvbGxlcil7ay4kc2NvcGU9ZSxrLiRlbGVtZW50PWc7dmFyIG09YihrLiQkY29udHJvbGxlcixrKTtrLiQkY29udHJvbGxlckFzJiYoZVtrLiQkY29udHJvbGxlckFzXT1tKSxnLmRhdGEoIiRuZ0NvbnRyb2xsZXJDb250cm9sbGVyIixtKSxnLmNoaWxkcmVuKCkuZGF0YSgiJG5nQ29udHJvbGxlckNvbnRyb2xsZXIiLG0pfWwoZSl9fX19fWZ1bmN0aW9uIEEoYSxiLGMsZCl7dmFyIGU9ZChiLnVpVmlld3x8Yi5uYW1lfHwiIikoYSksZj1jLmluaGVyaXRlZERhdGEoIiR1aVZpZXciKTtyZXR1cm4gZS5pbmRleE9mKCJAIik+PTA/ZTplKyJAIisoZj9mLnN0YXRlLm5hbWU6IiIpfWZ1bmN0aW9uIEIoYSxiKXt2YXIgYyxkPWEubWF0Y2goL15ccyooe1tefV0qfSlccyokLyk7aWYoZCYmKGE9YisiKCIrZFsxXSsiKSIpLGM9YS5yZXBsYWNlKC9cbi9nLCIgIikubWF0Y2goL14oW14oXSs/KVxzKihcKCguKilcKSk/JC8pLCFjfHw0IT09Yy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0YXRlIHJlZiAnIithKyInIik7cmV0dXJue3N0YXRlOmNbMV0scGFyYW1FeHByOmNbM118fG51bGx9fWZ1bmN0aW9uIEMoYSl7dmFyIGI9YS5wYXJlbnQoKS5pbmhlcml0ZWREYXRhKCIkdWlWaWV3Iik7cmV0dXJuIGImJmIuc3RhdGUmJmIuc3RhdGUubmFtZT9iLnN0YXRlOnZvaWQgMH1mdW5jdGlvbiBEKGEpe3ZhciBiPSJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYS5wcm9wKCJocmVmIikpLGM9IkZPUk0iPT09YVswXS5ub2RlTmFtZTtyZXR1cm57YXR0cjpjPyJhY3Rpb24iOmI/InhsaW5rOmhyZWYiOiJocmVmIixpc0FuY2hvcjoiQSI9PT1hLnByb3AoInRhZ05hbWUiKS50b1VwcGVyQ2FzZSgpLGNsaWNrYWJsZTohY319ZnVuY3Rpb24gRShhLGIsYyxkLGUpe3JldHVybiBmdW5jdGlvbihmKXt2YXIgZz1mLndoaWNofHxmLmJ1dHRvbixoPWUoKTtpZighKGc+MXx8Zi5jdHJsS2V5fHxmLm1ldGFLZXl8fGYuc2hpZnRLZXl8fGEuYXR0cigidGFyZ2V0IikpKXt2YXIgaT1jKGZ1bmN0aW9uKCl7Yi5nbyhoLnN0YXRlLGgucGFyYW1zLGgub3B0aW9ucyl9KTtmLnByZXZlbnREZWZhdWx0KCk7dmFyIGo9ZC5pc0FuY2hvciYmIWguaHJlZj8xOjA7Zi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2otLTw9MCYmYy5jYW5jZWwoaSl9fX19ZnVuY3Rpb24gRihhLGIpe3JldHVybntyZWxhdGl2ZTpDKGEpfHxiLiRjdXJyZW50LGluaGVyaXQ6ITB9fWZ1bmN0aW9uIEcoYSxjKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6WyI/XnVpU3JlZkFjdGl2ZSIsIj9edWlTcmVmQWN0aXZlRXEiXSxsaW5rOmZ1bmN0aW9uKGQsZSxmLGcpe3ZhciBoPUIoZi51aVNyZWYsYS5jdXJyZW50Lm5hbWUpLGk9e3N0YXRlOmguc3RhdGUsaHJlZjpudWxsLHBhcmFtczpudWxsfSxqPUQoZSksaz1nWzFdfHxnWzBdO2kub3B0aW9ucz1SKEYoZSxhKSxmLnVpU3JlZk9wdHM/ZC4kZXZhbChmLnVpU3JlZk9wdHMpOnt9KTt2YXIgbD1mdW5jdGlvbihjKXtjJiYoaS5wYXJhbXM9Yi5jb3B5KGMpKSxpLmhyZWY9YS5ocmVmKGguc3RhdGUsaS5wYXJhbXMsaS5vcHRpb25zKSxrJiZrLiQkYWRkU3RhdGVJbmZvKGguc3RhdGUsaS5wYXJhbXMpLG51bGwhPT1pLmhyZWYmJmYuJHNldChqLmF0dHIsaS5ocmVmKX07aC5wYXJhbUV4cHImJihkLiR3YXRjaChoLnBhcmFtRXhwcixmdW5jdGlvbihhKXthIT09aS5wYXJhbXMmJmwoYSl9LCEwKSxpLnBhcmFtcz1iLmNvcHkoZC4kZXZhbChoLnBhcmFtRXhwcikpKSxsKCksai5jbGlja2FibGUmJmUuYmluZCgiY2xpY2siLEUoZSxhLGMsaixmdW5jdGlvbigpe3JldHVybiBpfSkpfX19ZnVuY3Rpb24gSChhLGIpe3JldHVybntyZXN0cmljdDoiQSIscmVxdWlyZTpbIj9edWlTcmVmQWN0aXZlIiwiP151aVNyZWZBY3RpdmVFcSJdLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7ZnVuY3Rpb24gZyhiKXtsLnN0YXRlPWJbMF0sbC5wYXJhbXM9YlsxXSxsLm9wdGlvbnM9YlsyXSxsLmhyZWY9YS5ocmVmKGwuc3RhdGUsbC5wYXJhbXMsbC5vcHRpb25zKSxpJiZpLiQkYWRkU3RhdGVJbmZvKGwuc3RhdGUsbC5wYXJhbXMpLGwuaHJlZiYmZS4kc2V0KGguYXR0cixsLmhyZWYpfXZhciBoPUQoZCksaT1mWzFdfHxmWzBdLGo9W2UudWlTdGF0ZSxlLnVpU3RhdGVQYXJhbXN8fG51bGwsZS51aVN0YXRlT3B0c3x8bnVsbF0saz0iWyIrai5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGF8fCJudWxsIn0pLmpvaW4oIiwgIikrIl0iLGw9e3N0YXRlOm51bGwscGFyYW1zOm51bGwsb3B0aW9uczpudWxsLGhyZWY6bnVsbH07Yy4kd2F0Y2goayxnLCEwKSxnKGMuJGV2YWwoaykpLGguY2xpY2thYmxlJiZkLmJpbmQoImNsaWNrIixFKGQsYSxiLGgsZnVuY3Rpb24oKXtyZXR1cm4gbH0pKX19fWZ1bmN0aW9uIEkoYSxiLGMpe3JldHVybntyZXN0cmljdDoiQSIsY29udHJvbGxlcjpbIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIiwiJHRpbWVvdXQiLGZ1bmN0aW9uKGIsZCxlLGYpe2Z1bmN0aW9uIGcoYixjLGUpe3ZhciBmPWEuZ2V0KGIsQyhkKSksZz1oKGIsYyk7cC5wdXNoKHtzdGF0ZTpmfHx7bmFtZTpifSxwYXJhbXM6YyxoYXNoOmd9KSxxW2ddPWV9ZnVuY3Rpb24gaChhLGMpe2lmKCFOKGEpKXRocm93IG5ldyBFcnJvcigic3RhdGUgc2hvdWxkIGJlIGEgc3RyaW5nIik7cmV0dXJuIE8oYyk/YStUKGMpOihjPWIuJGV2YWwoYyksTyhjKT9hK1QoYyk6YSl9ZnVuY3Rpb24gaSgpe2Zvcih2YXIgYT0wO2E8cC5sZW5ndGg7YSsrKWwocFthXS5zdGF0ZSxwW2FdLnBhcmFtcyk/aihkLHFbcFthXS5oYXNoXSk6ayhkLHFbcFthXS5oYXNoXSksbShwW2FdLnN0YXRlLHBbYV0ucGFyYW1zKT9qKGQsbik6ayhkLG4pfWZ1bmN0aW9uIGooYSxiKXtmKGZ1bmN0aW9uKCl7YS5hZGRDbGFzcyhiKX0pfWZ1bmN0aW9uIGsoYSxiKXthLnJlbW92ZUNsYXNzKGIpfWZ1bmN0aW9uIGwoYixjKXtyZXR1cm4gYS5pbmNsdWRlcyhiLm5hbWUsYyl9ZnVuY3Rpb24gbShiLGMpe3JldHVybiBhLmlzKGIubmFtZSxjKX12YXIgbixvLHA9W10scT17fTtuPWMoZS51aVNyZWZBY3RpdmVFcXx8IiIsITEpKGIpO3RyeXtvPWIuJGV2YWwoZS51aVNyZWZBY3RpdmUpfWNhdGNoKHIpe31vPW98fGMoZS51aVNyZWZBY3RpdmV8fCIiLCExKShiKSxPKG8pJiZRKG8sZnVuY3Rpb24oYyxkKXtpZihOKGMpKXt2YXIgZT1CKGMsYS5jdXJyZW50Lm5hbWUpO2coZS5zdGF0ZSxiLiRldmFsKGUucGFyYW1FeHByKSxkKX19KSx0aGlzLiQkYWRkU3RhdGVJbmZvPWZ1bmN0aW9uKGEsYil7TyhvKSYmcC5sZW5ndGg+MHx8KGcoYSxiLG8pLGkoKSl9LGIuJG9uKCIkc3RhdGVDaGFuZ2VTdWNjZXNzIixpKSxpKCl9XX19ZnVuY3Rpb24gSihhKXt2YXIgYj1mdW5jdGlvbihiLGMpe3JldHVybiBhLmlzKGIsYyl9O3JldHVybiBiLiRzdGF0ZWZ1bD0hMCxifWZ1bmN0aW9uIEsoYSl7dmFyIGI9ZnVuY3Rpb24oYixjLGQpe3JldHVybiBhLmluY2x1ZGVzKGIsYyxkKX07cmV0dXJuIGIuJHN0YXRlZnVsPSEwLGJ9dmFyIEw9Yi5pc0RlZmluZWQsTT1iLmlzRnVuY3Rpb24sTj1iLmlzU3RyaW5nLE89Yi5pc09iamVjdCxQPWIuaXNBcnJheSxRPWIuZm9yRWFjaCxSPWIuZXh0ZW5kLFM9Yi5jb3B5LFQ9Yi50b0pzb247Yi5tb2R1bGUoInVpLnJvdXRlci51dGlsIixbIm5nIl0pLGIubW9kdWxlKCJ1aS5yb3V0ZXIucm91dGVyIixbInVpLnJvdXRlci51dGlsIl0pLGIubW9kdWxlKCJ1aS5yb3V0ZXIuc3RhdGUiLFsidWkucm91dGVyLnJvdXRlciIsInVpLnJvdXRlci51dGlsIl0pLGIubW9kdWxlKCJ1aS5yb3V0ZXIiLFsidWkucm91dGVyLnN0YXRlIl0pLGIubW9kdWxlKCJ1aS5yb3V0ZXIuY29tcGF0IixbInVpLnJvdXRlciJdKSxwLiRpbmplY3Q9WyIkcSIsIiRpbmplY3RvciJdLGIubW9kdWxlKCJ1aS5yb3V0ZXIudXRpbCIpLnNlcnZpY2UoIiRyZXNvbHZlIixwKSxxLiRpbmplY3Q9WyIkaHR0cCIsIiR0ZW1wbGF0ZUNhY2hlIiwiJGluamVjdG9yIl0sYi5tb2R1bGUoInVpLnJvdXRlci51dGlsIikuc2VydmljZSgiJHRlbXBsYXRlRmFjdG9yeSIscSk7dmFyIFU7ci5wcm90b3R5cGUuY29uY2F0PWZ1bmN0aW9uKGEsYil7dmFyIGM9e2Nhc2VJbnNlbnNpdGl2ZTpVLmNhc2VJbnNlbnNpdGl2ZSgpLHN0cmljdDpVLnN0cmljdE1vZGUoKSxzcXVhc2g6VS5kZWZhdWx0U3F1YXNoUG9saWN5KCl9O3JldHVybiBuZXcgcih0aGlzLnNvdXJjZVBhdGgrYSt0aGlzLnNvdXJjZVNlYXJjaCxSKGMsYiksdGhpcyl9LHIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlfSxyLnByb3RvdHlwZS5leGVjPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnNwbGl0KCIiKS5yZXZlcnNlKCkuam9pbigiIil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXC0vZywiLSIpfXZhciBkPWIoYSkuc3BsaXQoLy0oPyFcXCkvKSxlPW8oZCxiKTtyZXR1cm4gbyhlLGMpLnJldmVyc2UoKX12YXIgZD10aGlzLnJlZ2V4cC5leGVjKGEpO2lmKCFkKXJldHVybiBudWxsO2I9Ynx8e307dmFyIGUsZixnLGg9dGhpcy5wYXJhbWV0ZXJzKCksaT1oLmxlbmd0aCxqPXRoaXMuc2VnbWVudHMubGVuZ3RoLTEsaz17fTtpZihqIT09ZC5sZW5ndGgtMSl0aHJvdyBuZXcgRXJyb3IoIlVuYmFsYW5jZWQgY2FwdHVyZSBncm91cCBpbiByb3V0ZSAnIit0aGlzLnNvdXJjZSsiJyIpO3ZhciBsLG07Zm9yKGU9MDtqPmU7ZSsrKXtmb3IoZz1oW2VdLGw9dGhpcy5wYXJhbXNbZ10sbT1kW2UrMV0sZj0wO2Y8bC5yZXBsYWNlLmxlbmd0aDtmKyspbC5yZXBsYWNlW2ZdLmZyb209PT1tJiYobT1sLnJlcGxhY2VbZl0udG8pO20mJmwuYXJyYXk9PT0hMCYmKG09YyhtKSksTChtKSYmKG09bC50eXBlLmRlY29kZShtKSksa1tnXT1sLnZhbHVlKG0pfWZvcig7aT5lO2UrKyl7Zm9yKGc9aFtlXSxrW2ddPXRoaXMucGFyYW1zW2ddLnZhbHVlKGJbZ10pLGw9dGhpcy5wYXJhbXNbZ10sbT1iW2ddLGY9MDtmPGwucmVwbGFjZS5sZW5ndGg7ZisrKWwucmVwbGFjZVtmXS5mcm9tPT09bSYmKG09bC5yZXBsYWNlW2ZdLnRvKTtMKG0pJiYobT1sLnR5cGUuZGVjb2RlKG0pKSxrW2ddPWwudmFsdWUobSl9cmV0dXJuIGt9LHIucHJvdG90eXBlLnBhcmFtZXRlcnM9ZnVuY3Rpb24oYSl7cmV0dXJuIEwoYSk/dGhpcy5wYXJhbXNbYV18fG51bGw6dGhpcy4kJHBhcmFtTmFtZXN9LHIucHJvdG90eXBlLnZhbGlkYXRlcz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wYXJhbXMuJCR2YWxpZGF0ZXMoYSl9LHIucHJvdG90eXBlLmZvcm1hdD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoYSkucmVwbGFjZSgvLS9nLGZ1bmN0aW9uKGEpe3JldHVybiIlNUMlIithLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCl9KX1hPWF8fHt9O3ZhciBjPXRoaXMuc2VnbWVudHMsZD10aGlzLnBhcmFtZXRlcnMoKSxlPXRoaXMucGFyYW1zO2lmKCF0aGlzLnZhbGlkYXRlcyhhKSlyZXR1cm4gbnVsbDt2YXIgZixnPSExLGg9Yy5sZW5ndGgtMSxpPWQubGVuZ3RoLGo9Y1swXTtmb3IoZj0wO2k+ZjtmKyspe3ZhciBrPWg+ZixsPWRbZl0sbT1lW2xdLG49bS52YWx1ZShhW2xdKSxwPW0uaXNPcHRpb25hbCYmbS50eXBlLmVxdWFscyhtLnZhbHVlKCksbikscT1wP20uc3F1YXNoOiExLHI9bS50eXBlLmVuY29kZShuKTtpZihrKXt2YXIgcz1jW2YrMV0sdD1mKzE9PT1oO2lmKHE9PT0hMSludWxsIT1yJiYoais9UChyKT9vKHIsYikuam9pbigiLSIpOmVuY29kZVVSSUNvbXBvbmVudChyKSksais9cztlbHNlIGlmKHE9PT0hMCl7dmFyIHU9ai5tYXRjaCgvXC8kLyk/L1wvPyguKikvOi8oLiopLztqKz1zLm1hdGNoKHUpWzFdfWVsc2UgTihxKSYmKGorPXErcyk7dCYmbS5zcXVhc2g9PT0hMCYmIi8iPT09ai5zbGljZSgtMSkmJihqPWouc2xpY2UoMCwtMSkpfWVsc2V7aWYobnVsbD09cnx8cCYmcSE9PSExKWNvbnRpbnVlO2lmKFAocil8fChyPVtyXSksMD09PXIubGVuZ3RoKWNvbnRpbnVlO3I9byhyLGVuY29kZVVSSUNvbXBvbmVudCkuam9pbigiJiIrbCsiPSIpLGorPShnPyImIjoiPyIpKyhsKyI9IityKSxnPSEwfX1yZXR1cm4gan0scy5wcm90b3R5cGUuaXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hMH0scy5wcm90b3R5cGUuZW5jb2RlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGF9LHMucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbihhLGIpe3JldHVybiBhfSxzLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09Yn0scy5wcm90b3R5cGUuJHN1YlBhdHRlcm49ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhdHRlcm4udG9TdHJpbmcoKTtyZXR1cm4gYS5zdWJzdHIoMSxhLmxlbmd0aC0yKX0scy5wcm90b3R5cGUucGF0dGVybj0vLiovLHMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIntUeXBlOiIrdGhpcy5uYW1lKyJ9In0scy5wcm90b3R5cGUuJG5vcm1hbGl6ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pcyhhKT9hOnRoaXMuZGVjb2RlKGEpfSxzLnByb3RvdHlwZS4kYXNBcnJheT1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSxiKXtmdW5jdGlvbiBkKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFbYl0uYXBwbHkoYSxhcmd1bWVudHMpfX1mdW5jdGlvbiBlKGEpe3JldHVybiBQKGEpP2E6TChhKT9bYV06W119ZnVuY3Rpb24gZihhKXtzd2l0Y2goYS5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gYztjYXNlIDE6cmV0dXJuImF1dG8iPT09Yj9hWzBdOmE7ZGVmYXVsdDpyZXR1cm4gYX19ZnVuY3Rpb24gZyhhKXtyZXR1cm4hYX1mdW5jdGlvbiBoKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2lmKFAoYykmJjA9PT1jLmxlbmd0aClyZXR1cm4gYztjPWUoYyk7dmFyIGQ9byhjLGEpO3JldHVybiBiPT09ITA/MD09PW4oZCxnKS5sZW5ndGg6ZihkKX19ZnVuY3Rpb24gaShhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD1lKGIpLGY9ZShjKTtpZihkLmxlbmd0aCE9PWYubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZz0wO2c8ZC5sZW5ndGg7ZysrKWlmKCFhKGRbZ10sZltnXSkpcmV0dXJuITE7cmV0dXJuITB9fXRoaXMuZW5jb2RlPWgoZChhLCJlbmNvZGUiKSksdGhpcy5kZWNvZGU9aChkKGEsImRlY29kZSIpKSx0aGlzLmlzPWgoZChhLCJpcyIpLCEwKSx0aGlzLmVxdWFscz1pKGQoYSwiZXF1YWxzIikpLHRoaXMucGF0dGVybj1hLnBhdHRlcm4sdGhpcy4kbm9ybWFsaXplPWgoZChhLCIkbm9ybWFsaXplIikpLHRoaXMubmFtZT1hLm5hbWUsdGhpcy4kYXJyYXlNb2RlPWJ9aWYoIWEpcmV0dXJuIHRoaXM7aWYoImF1dG8iPT09YSYmIWIpdGhyb3cgbmV3IEVycm9yKCInYXV0bycgYXJyYXkgbW9kZSBpcyBmb3IgcXVlcnkgcGFyYW1ldGVycyBvbmx5Iik7cmV0dXJuIG5ldyBkKHRoaXMsYSl9LGIubW9kdWxlKCJ1aS5yb3V0ZXIudXRpbCIpLnByb3ZpZGVyKCIkdXJsTWF0Y2hlckZhY3RvcnkiLHQpLGIubW9kdWxlKCJ1aS5yb3V0ZXIudXRpbCIpLnJ1bihbIiR1cmxNYXRjaGVyRmFjdG9yeSIsZnVuY3Rpb24oYSl7fV0pLHUuJGluamVjdD1bIiRsb2NhdGlvblByb3ZpZGVyIiwiJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIiXSxiLm1vZHVsZSgidWkucm91dGVyLnJvdXRlciIpLnByb3ZpZGVyKCIkdXJsUm91dGVyIix1KSx2LiRpbmplY3Q9WyIkdXJsUm91dGVyUHJvdmlkZXIiLCIkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciJdLGIubW9kdWxlKCJ1aS5yb3V0ZXIuc3RhdGUiKS5mYWN0b3J5KCIkc3RhdGVQYXJhbXMiLGZ1bmN0aW9uKCl7cmV0dXJue319KS5wcm92aWRlcigiJHN0YXRlIix2KSx3LiRpbmplY3Q9W10sYi5tb2R1bGUoInVpLnJvdXRlci5zdGF0ZSIpLnByb3ZpZGVyKCIkdmlldyIsdyksYi5tb2R1bGUoInVpLnJvdXRlci5zdGF0ZSIpLnByb3ZpZGVyKCIkdWlWaWV3U2Nyb2xsIix4KTt2YXIgVj1iLnZlcnNpb24ubWFqb3IsVz1iLnZlcnNpb24ubWlub3I7eS4kaW5qZWN0PVsiJHN0YXRlIiwiJGluamVjdG9yIiwiJHVpVmlld1Njcm9sbCIsIiRpbnRlcnBvbGF0ZSJdLHouJGluamVjdD1bIiRjb21waWxlIiwiJGNvbnRyb2xsZXIiLCIkc3RhdGUiLCIkaW50ZXJwb2xhdGUiXSxiLm1vZHVsZSgidWkucm91dGVyLnN0YXRlIikuZGlyZWN0aXZlKCJ1aVZpZXciLHkpLGIubW9kdWxlKCJ1aS5yb3V0ZXIuc3RhdGUiKS5kaXJlY3RpdmUoInVpVmlldyIseiksRy4kaW5qZWN0PVsiJHN0YXRlIiwiJHRpbWVvdXQiXSxILiRpbmplY3Q9WyIkc3RhdGUiLCIkdGltZW91dCJdLEkuJGluamVjdD1bIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiRpbnRlcnBvbGF0ZSJdLGIubW9kdWxlKCJ1aS5yb3V0ZXIuc3RhdGUiKS5kaXJlY3RpdmUoInVpU3JlZiIsRykuZGlyZWN0aXZlKCJ1aVNyZWZBY3RpdmUiLEkpLmRpcmVjdGl2ZSgidWlTcmVmQWN0aXZlRXEiLEkpLmRpcmVjdGl2ZSgidWlTdGF0ZSIsSCksCkouJGluamVjdD1bIiRzdGF0ZSJdLEsuJGluamVjdD1bIiRzdGF0ZSJdLGIubW9kdWxlKCJ1aS5yb3V0ZXIuc3RhdGUiKS5maWx0ZXIoImlzU3RhdGUiLEopLmZpbHRlcigiaW5jbHVkZWRCeVN0YXRlIixLKX0od2luZG93LHdpbmRvdy5hbmd1bGFyKTsKZGVmaW5lKCJ1aVJvdXRlciIsIFsiYW5ndWxhciJdLCBmdW5jdGlvbigpe30pOwoKYW5ndWxhci5tb2R1bGUoIml2cHVzaWMuY29va2llIixbImlwQ29va2llIl0pLGFuZ3VsYXIubW9kdWxlKCJpcENvb2tpZSIsWyJuZyJdKS5mYWN0b3J5KCJpcENvb2tpZSIsWyIkZG9jdW1lbnQiLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKGUpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGUpfWNhdGNoKGkpe319cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LG4scil7dmFyIG8scyxwLHUsYSxjLGQseCxmO3I9cnx8e307dmFyIGc9ci5kZWNvZGV8fGksbD1yLmVuY29kZXx8ZW5jb2RlVVJJQ29tcG9uZW50O2lmKHZvaWQgMCE9PW4pcmV0dXJuIG49Im9iamVjdCI9PXR5cGVvZiBuP0pTT04uc3RyaW5naWZ5KG4pOm4rIiIsIm51bWJlciI9PXR5cGVvZiByLmV4cGlyZXMmJihmPXIuZXhwaXJlcyxyLmV4cGlyZXM9bmV3IERhdGUsLTE9PT1mP3IuZXhwaXJlcz1uZXcgRGF0ZSgiVGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQiKTp2b2lkIDAhPT1yLmV4cGlyYXRpb25Vbml0PyJob3VycyI9PT1yLmV4cGlyYXRpb25Vbml0P3IuZXhwaXJlcy5zZXRIb3VycyhyLmV4cGlyZXMuZ2V0SG91cnMoKStmKToibWludXRlcyI9PT1yLmV4cGlyYXRpb25Vbml0P3IuZXhwaXJlcy5zZXRNaW51dGVzKHIuZXhwaXJlcy5nZXRNaW51dGVzKCkrZik6InNlY29uZHMiPT09ci5leHBpcmF0aW9uVW5pdD9yLmV4cGlyZXMuc2V0U2Vjb25kcyhyLmV4cGlyZXMuZ2V0U2Vjb25kcygpK2YpOiJtaWxsaXNlY29uZHMiPT09ci5leHBpcmF0aW9uVW5pdD9yLmV4cGlyZXMuc2V0TWlsbGlzZWNvbmRzKHIuZXhwaXJlcy5nZXRNaWxsaXNlY29uZHMoKStmKTpyLmV4cGlyZXMuc2V0RGF0ZShyLmV4cGlyZXMuZ2V0RGF0ZSgpK2YpOnIuZXhwaXJlcy5zZXREYXRlKHIuZXhwaXJlcy5nZXREYXRlKCkrZikpLGVbMF0uY29va2llPVtsKHQpLCI9IixsKG4pLHIuZXhwaXJlcz8iOyBleHBpcmVzPSIrci5leHBpcmVzLnRvVVRDU3RyaW5nKCk6IiIsci5wYXRoPyI7IHBhdGg9IityLnBhdGg6IiIsci5kb21haW4/IjsgZG9tYWluPSIrci5kb21haW46IiIsci5zZWN1cmU/Ijsgc2VjdXJlIjoiIl0uam9pbigiIik7Zm9yKHM9W10seD1lWzBdLmNvb2tpZSx4JiYocz14LnNwbGl0KCI7ICIpKSxvPXt9LGQ9ITEscD0wO3MubGVuZ3RoPnA7KytwKWlmKHNbcF0pe2lmKHU9c1twXSxhPXUuaW5kZXhPZigiPSIpLGM9dS5zdWJzdHJpbmcoMCxhKSxuPWcodS5zdWJzdHJpbmcoYSsxKSksYW5ndWxhci5pc1VuZGVmaW5lZChuKSljb250aW51ZTtpZih2b2lkIDA9PT10fHx0PT09Yyl7dHJ5e29bY109SlNPTi5wYXJzZShuKX1jYXRjaChtKXtvW2NdPW59aWYodD09PWMpcmV0dXJuIG9bY107ZD0hMH19cmV0dXJuIGQmJnZvaWQgMD09PXQ/bzp2b2lkIDB9cmV0dXJuIHQucmVtb3ZlPWZ1bmN0aW9uKGUsaSl7dmFyIG49dm9pZCAwIT09dChlKTtyZXR1cm4gbiYmKGl8fChpPXt9KSxpLmV4cGlyZXM9LTEsdChlLCIiLGkpKSxufSx0fSgpfV0pOwpkZWZpbmUoImFuZ3VsYXItY29va2llIiwgWyJhbmd1bGFyIl0sIGZ1bmN0aW9uKCl7fSk7CgovKgogQW5ndWxhckpTIHYxLjQuMTQKIChjKSAyMDEwLTIwMTUgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnCiBMaWNlbnNlOiBNSVQKKi8KKGZ1bmN0aW9uKEQsbixWYSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIHphKGEsYixjKXtpZighYSl0aHJvdyBLYSgiYXJlcSIsYnx8Ij8iLGN8fCJyZXF1aXJlZCIpO3JldHVybiBhfWZ1bmN0aW9uIEFhKGEsYil7aWYoIWEmJiFiKXJldHVybiIiO2lmKCFhKXJldHVybiBiO2lmKCFiKXJldHVybiBhO2RhKGEpJiYoYT1hLmpvaW4oIiAiKSk7ZGEoYikmJihiPWIuam9pbigiICIpKTtyZXR1cm4gYSsiICIrYn1mdW5jdGlvbiBMYShhKXt2YXIgYj17fTthJiYoYS50b3x8YS5mcm9tKSYmKGIudG89YS50byxiLmZyb209YS5mcm9tKTtyZXR1cm4gYn1mdW5jdGlvbiBYKGEsYixjKXt2YXIgZD0iIjthPWRhKGEpP2E6YSYmRShhKSYmYS5sZW5ndGg/YS5zcGxpdCgvXHMrLyk6W107cyhhLGZ1bmN0aW9uKGEsZil7YSYmMDxhLmxlbmd0aCYmKGQrPTA8Zj8iICI6IiIsZCs9Yz9iK2E6YStiKX0pO3JldHVybiBkfWZ1bmN0aW9uIE1hKGEpe2lmKGEgaW5zdGFuY2VvZiBHKXN3aXRjaChhLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBhOwpjYXNlIDE6aWYoMT09PWFbMF0ubm9kZVR5cGUpcmV0dXJuIGE7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gRyhoYShhKSl9aWYoMT09PWEubm9kZVR5cGUpcmV0dXJuIEcoYSl9ZnVuY3Rpb24gaGEoYSl7aWYoIWFbMF0pcmV0dXJuIGE7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07aWYoMT09Yy5ub2RlVHlwZSlyZXR1cm4gY319ZnVuY3Rpb24gTmEoYSxiLGMpe3MoYixmdW5jdGlvbihiKXthLmFkZENsYXNzKGIsYyl9KX1mdW5jdGlvbiBPYShhLGIsYyl7cyhiLGZ1bmN0aW9uKGIpe2EucmVtb3ZlQ2xhc3MoYixjKX0pfWZ1bmN0aW9uIFEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yy5hZGRDbGFzcyYmKE5hKGEsYixjLmFkZENsYXNzKSxjLmFkZENsYXNzPW51bGwpO2MucmVtb3ZlQ2xhc3MmJihPYShhLGIsYy5yZW1vdmVDbGFzcyksYy5yZW1vdmVDbGFzcz1udWxsKX19ZnVuY3Rpb24gcGEoYSl7YT1hfHx7fTtpZighYS4kJHByZXBhcmVkKXt2YXIgYj1hLmRvbU9wZXJhdGlvbnx8Ck87YS5kb21PcGVyYXRpb249ZnVuY3Rpb24oKXthLiQkZG9tT3BlcmF0aW9uRmlyZWQ9ITA7YigpO2I9T307YS4kJHByZXBhcmVkPSEwfXJldHVybiBhfWZ1bmN0aW9uIGlhKGEsYil7QmEoYSxiKTtDYShhLGIpfWZ1bmN0aW9uIEJhKGEsYil7Yi5mcm9tJiYoYS5jc3MoYi5mcm9tKSxiLmZyb209bnVsbCl9ZnVuY3Rpb24gQ2EoYSxiKXtiLnRvJiYoYS5jc3MoYi50byksYi50bz1udWxsKX1mdW5jdGlvbiBUKGEsYixjKXt2YXIgZD1iLm9wdGlvbnN8fHt9O2M9Yy5vcHRpb25zfHx7fTt2YXIgZT0oZC5hZGRDbGFzc3x8IiIpKyIgIisoYy5hZGRDbGFzc3x8IiIpLGY9KGQucmVtb3ZlQ2xhc3N8fCIiKSsiICIrKGMucmVtb3ZlQ2xhc3N8fCIiKTthPVBhKGEuYXR0cigiY2xhc3MiKSxlLGYpO2MucHJlcGFyYXRpb25DbGFzc2VzJiYoZC5wcmVwYXJhdGlvbkNsYXNzZXM9WShjLnByZXBhcmF0aW9uQ2xhc3NlcyxkLnByZXBhcmF0aW9uQ2xhc3NlcyksZGVsZXRlIGMucHJlcGFyYXRpb25DbGFzc2VzKTsKZT1kLmRvbU9wZXJhdGlvbiE9PU8/ZC5kb21PcGVyYXRpb246bnVsbDtEYShkLGMpO2UmJihkLmRvbU9wZXJhdGlvbj1lKTtkLmFkZENsYXNzPWEuYWRkQ2xhc3M/YS5hZGRDbGFzczpudWxsO2QucmVtb3ZlQ2xhc3M9YS5yZW1vdmVDbGFzcz9hLnJlbW92ZUNsYXNzOm51bGw7Yi5hZGRDbGFzcz1kLmFkZENsYXNzO2IucmVtb3ZlQ2xhc3M9ZC5yZW1vdmVDbGFzcztyZXR1cm4gZH1mdW5jdGlvbiBQYShhLGIsYyl7ZnVuY3Rpb24gZChhKXtFKGEpJiYoYT1hLnNwbGl0KCIgIikpO3ZhciBiPXt9O3MoYSxmdW5jdGlvbihhKXthLmxlbmd0aCYmKGJbYV09ITApfSk7cmV0dXJuIGJ9dmFyIGU9e307YT1kKGEpO2I9ZChiKTtzKGIsZnVuY3Rpb24oYSxiKXtlW2JdPTF9KTtjPWQoYyk7cyhjLGZ1bmN0aW9uKGEsYil7ZVtiXT0xPT09ZVtiXT9udWxsOi0xfSk7dmFyIGY9e2FkZENsYXNzOiIiLHJlbW92ZUNsYXNzOiIifTtzKGUsZnVuY3Rpb24oYixjKXt2YXIgZCxlOzE9PT1iPyhkPSJhZGRDbGFzcyIsCmU9IWFbY10pOi0xPT09YiYmKGQ9InJlbW92ZUNsYXNzIixlPWFbY10pO2UmJihmW2RdLmxlbmd0aCYmKGZbZF0rPSIgIiksZltkXSs9Yyl9KTtyZXR1cm4gZn1mdW5jdGlvbiB4KGEpe3JldHVybiBhIGluc3RhbmNlb2Ygbi5lbGVtZW50P2FbMF06YX1mdW5jdGlvbiBRYShhLGIsYyl7dmFyIGQ9IiI7YiYmKGQ9WChiLCJuZy0iLCEwKSk7Yy5hZGRDbGFzcyYmKGQ9WShkLFgoYy5hZGRDbGFzcywiLWFkZCIpKSk7Yy5yZW1vdmVDbGFzcyYmKGQ9WShkLFgoYy5yZW1vdmVDbGFzcywiLXJlbW92ZSIpKSk7ZC5sZW5ndGgmJihjLnByZXBhcmF0aW9uQ2xhc3Nlcz1kLGEuYWRkQ2xhc3MoZCkpfWZ1bmN0aW9uIHFhKGEsYil7dmFyIGM9Yj8iLSIrYisicyI6IiI7bWEoYSxbbmEsY10pO3JldHVybltuYSxjXX1mdW5jdGlvbiBzYShhLGIpe3ZhciBjPWI/InBhdXNlZCI6IiIsZD1aKyJQbGF5U3RhdGUiO21hKGEsW2QsY10pO3JldHVybltkLGNdfWZ1bmN0aW9uIG1hKGEsYil7YS5zdHlsZVtiWzBdXT0KYlsxXX1mdW5jdGlvbiBZKGEsYil7cmV0dXJuIGE/Yj9hKyIgIitiOmE6Yn1mdW5jdGlvbiBFYShhLGIsYyl7dmFyIGQ9T2JqZWN0LmNyZWF0ZShudWxsKSxlPWEuZ2V0Q29tcHV0ZWRTdHlsZShiKXx8e307cyhjLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZVthXTtpZihjKXt2YXIgSj1jLmNoYXJBdCgwKTtpZigiLSI9PT1KfHwiKyI9PT1KfHwwPD1KKWM9UmEoYyk7MD09PWMmJihjPW51bGwpO2RbYl09Y319KTtyZXR1cm4gZH1mdW5jdGlvbiBSYShhKXt2YXIgYj0wO2E9YS5zcGxpdCgvXHMqLFxzKi8pO3MoYSxmdW5jdGlvbihhKXsicyI9PWEuY2hhckF0KGEubGVuZ3RoLTEpJiYoYT1hLnN1YnN0cmluZygwLGEubGVuZ3RoLTEpKTthPXBhcnNlRmxvYXQoYSl8fDA7Yj1iP01hdGgubWF4KGEsYik6YX0pO3JldHVybiBifWZ1bmN0aW9uIHRhKGEpe3JldHVybiAwPT09YXx8bnVsbCE9YX1mdW5jdGlvbiBGYShhLGIpe3ZhciBjPVIsZD1hKyJzIjtiP2MrPSJEdXJhdGlvbiI6ZCs9IiBsaW5lYXIgYWxsIjsKcmV0dXJuW2MsZF19ZnVuY3Rpb24gR2EoKXt2YXIgYT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybntmbHVzaDpmdW5jdGlvbigpe2E9T2JqZWN0LmNyZWF0ZShudWxsKX0sY291bnQ6ZnVuY3Rpb24oYil7cmV0dXJuKGI9YVtiXSk/Yi50b3RhbDowfSxnZXQ6ZnVuY3Rpb24oYil7cmV0dXJuKGI9YVtiXSkmJmIudmFsdWV9LHB1dDpmdW5jdGlvbihiLGMpe2FbYl0/YVtiXS50b3RhbCsrOmFbYl09e3RvdGFsOjEsdmFsdWU6Y319fX1mdW5jdGlvbiBIYShhLGIsYyl7cyhjLGZ1bmN0aW9uKGMpe2FbY109JChhW2NdKT9hW2NdOmIuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShjKX0pfXZhciBPPW4ubm9vcCxJYT1uLmNvcHksRGE9bi5leHRlbmQsRz1uLmVsZW1lbnQscz1uLmZvckVhY2gsZGE9bi5pc0FycmF5LEU9bi5pc1N0cmluZyxlYT1uLmlzT2JqZWN0LE49bi5pc1VuZGVmaW5lZCwkPW4uaXNEZWZpbmVkLEphPW4uaXNGdW5jdGlvbix1YT1uLmlzRWxlbWVudCxSLHZhLFosd2E7TihELm9udHJhbnNpdGlvbmVuZCkmJgokKEQub253ZWJraXR0cmFuc2l0aW9uZW5kKT8oUj0iV2Via2l0VHJhbnNpdGlvbiIsdmE9IndlYmtpdFRyYW5zaXRpb25FbmQgdHJhbnNpdGlvbmVuZCIpOihSPSJ0cmFuc2l0aW9uIix2YT0idHJhbnNpdGlvbmVuZCIpO04oRC5vbmFuaW1hdGlvbmVuZCkmJiQoRC5vbndlYmtpdGFuaW1hdGlvbmVuZCk/KFo9IldlYmtpdEFuaW1hdGlvbiIsd2E9IndlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQiKTooWj0iYW5pbWF0aW9uIix3YT0iYW5pbWF0aW9uZW5kIik7dmFyIHJhPVorIkRlbGF5Iix4YT1aKyJEdXJhdGlvbiIsbmE9UisiRGVsYXkiO0Q9UisiRHVyYXRpb24iO3ZhciBLYT1uLiQkbWluRXJyKCJuZyIpLFNhPXt0cmFuc2l0aW9uRHVyYXRpb246RCx0cmFuc2l0aW9uRGVsYXk6bmEsdHJhbnNpdGlvblByb3BlcnR5OlIrIlByb3BlcnR5IixhbmltYXRpb25EdXJhdGlvbjp4YSxhbmltYXRpb25EZWxheTpyYSxhbmltYXRpb25JdGVyYXRpb25Db3VudDpaKyJJdGVyYXRpb25Db3VudCJ9LApUYT17dHJhbnNpdGlvbkR1cmF0aW9uOkQsdHJhbnNpdGlvbkRlbGF5Om5hLGFuaW1hdGlvbkR1cmF0aW9uOnhhLGFuaW1hdGlvbkRlbGF5OnJhfTtuLm1vZHVsZSgibmdBbmltYXRlIixbXSkuZGlyZWN0aXZlKCJuZ0FuaW1hdGVDaGlsZHJlbiIsWyIkaW50ZXJwb2xhdGUiLGZ1bmN0aW9uKGEpe3JldHVybntsaW5rOmZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKGEpe2MuZGF0YSgiJCRuZ0FuaW1hdGVDaGlsZHJlbiIsIm9uIj09PWF8fCJ0cnVlIj09PWEpfXZhciBmPWQubmdBbmltYXRlQ2hpbGRyZW47bi5pc1N0cmluZyhmKSYmMD09PWYubGVuZ3RoP2MuZGF0YSgiJCRuZ0FuaW1hdGVDaGlsZHJlbiIsITApOihlKGEoZikoYikpLGQuJG9ic2VydmUoIm5nQW5pbWF0ZUNoaWxkcmVuIixlKSl9fX1dKS5mYWN0b3J5KCIkJHJBRlNjaGVkdWxlciIsWyIkJHJBRiIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtkPWQuY29uY2F0KGEpO2MoKX1mdW5jdGlvbiBjKCl7aWYoZC5sZW5ndGgpe2Zvcih2YXIgYj0KZC5zaGlmdCgpLEw9MDtMPGIubGVuZ3RoO0wrKyliW0xdKCk7ZXx8YShmdW5jdGlvbigpe2V8fGMoKX0pfX12YXIgZCxlO2Q9Yi5xdWV1ZT1bXTtiLndhaXRVbnRpbFF1aWV0PWZ1bmN0aW9uKGIpe2UmJmUoKTtlPWEoZnVuY3Rpb24oKXtlPW51bGw7YigpO2MoKX0pfTtyZXR1cm4gYn1dKS5wcm92aWRlcigiJCRhbmltYXRlUXVldWUiLFsiJGFuaW1hdGVQcm92aWRlciIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZighYSlyZXR1cm4gbnVsbDthPWEuc3BsaXQoIiAiKTt2YXIgYj1PYmplY3QuY3JlYXRlKG51bGwpO3MoYSxmdW5jdGlvbihhKXtiW2FdPSEwfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGMpe2lmKGEmJmMpe3ZhciBkPWIoYyk7cmV0dXJuIGEuc3BsaXQoIiAiKS5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBkW2FdfSl9fWZ1bmN0aW9uIGQoYSxiLGMsZCl7cmV0dXJuIGZbYV0uc29tZShmdW5jdGlvbihhKXtyZXR1cm4gYShiLGMsZCl9KX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9CjA8KGEuYWRkQ2xhc3N8fCIiKS5sZW5ndGgsZD0wPChhLnJlbW92ZUNsYXNzfHwiIikubGVuZ3RoO3JldHVybiBiP2MmJmQ6Y3x8ZH12YXIgZj10aGlzLnJ1bGVzPXtza2lwOltdLGNhbmNlbDpbXSxqb2luOltdfTtmLmpvaW4ucHVzaChmdW5jdGlvbihhLGIsYyl7cmV0dXJuIWIuc3RydWN0dXJhbCYmZShiKX0pO2Yuc2tpcC5wdXNoKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4hYi5zdHJ1Y3R1cmFsJiYhZShiKX0pO2Yuc2tpcC5wdXNoKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4ibGVhdmUiPT1jLmV2ZW50JiZiLnN0cnVjdHVyYWx9KTtmLnNraXAucHVzaChmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGMuc3RydWN0dXJhbCYmMj09PWMuc3RhdGUmJiFiLnN0cnVjdHVyYWx9KTtmLmNhbmNlbC5wdXNoKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYy5zdHJ1Y3R1cmFsJiZiLnN0cnVjdHVyYWx9KTtmLmNhbmNlbC5wdXNoKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMj09PWMuc3RhdGUmJmIuc3RydWN0dXJhbH0pOwpmLmNhbmNlbC5wdXNoKGZ1bmN0aW9uKGEsYixkKXthPWIuYWRkQ2xhc3M7Yj1iLnJlbW92ZUNsYXNzO3ZhciBlPWQuYWRkQ2xhc3M7ZD1kLnJlbW92ZUNsYXNzO3JldHVybiBOKGEpJiZOKGIpfHxOKGUpJiZOKGQpPyExOmMoYSxkKXx8YyhiLGUpfSk7dGhpcy4kZ2V0PVsiJCRyQUYiLCIkcm9vdFNjb3BlIiwiJHJvb3RFbGVtZW50IiwiJGRvY3VtZW50IiwiJCRIYXNoTWFwIiwiJCRhbmltYXRpb24iLCIkJEFuaW1hdGVSdW5uZXIiLCIkdGVtcGxhdGVSZXF1ZXN0IiwiJCRqcUxpdGUiLCIkJGZvcmNlUmVmbG93IixmdW5jdGlvbihiLGMsZixyLHYsbix0LHksbSxnKXtmdW5jdGlvbiBQKCl7dmFyIGE9ITE7cmV0dXJuIGZ1bmN0aW9uKGIpe2E/YigpOmMuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7YT0hMDtiKCl9KX19ZnVuY3Rpb24gSChhLGIsYyl7dmFyIGg9eChiKSxkPXgoYSksaz1bXTsoYT1sW2NdKSYmcyhhLGZ1bmN0aW9uKGEpe2FhLmNhbGwoYS5ub2RlLGgpP2sucHVzaChhLmNhbGxiYWNrKToKImxlYXZlIj09PWMmJmFhLmNhbGwoYS5ub2RlLGQpJiZrLnB1c2goYS5jYWxsYmFjayl9KTtyZXR1cm4ga31mdW5jdGlvbiBrKGEsSyxrKXtmdW5jdGlvbiBsKGMsaCxkLGspe3IoZnVuY3Rpb24oKXt2YXIgYz1IKEksYSxoKTtjLmxlbmd0aCYmYihmdW5jdGlvbigpe3MoYyxmdW5jdGlvbihiKXtiKGEsZCxrKX0pfSl9KTtjLnByb2dyZXNzKGgsZCxrKX1mdW5jdGlvbiB1KGIpe3ZhciBjPWEsaD1nO2gucHJlcGFyYXRpb25DbGFzc2VzJiYoYy5yZW1vdmVDbGFzcyhoLnByZXBhcmF0aW9uQ2xhc3NlcyksaC5wcmVwYXJhdGlvbkNsYXNzZXM9bnVsbCk7aC5hY3RpdmVDbGFzc2VzJiYoYy5yZW1vdmVDbGFzcyhoLmFjdGl2ZUNsYXNzZXMpLGguYWN0aXZlQ2xhc3Nlcz1udWxsKTtBKGEsZyk7aWEoYSxnKTtnLmRvbU9wZXJhdGlvbigpO2YuY29tcGxldGUoIWIpfXZhciBnPUlhKGspLFcsSTtpZihhPU1hKGEpKVc9eChhKSxJPWEucGFyZW50KCk7dmFyIGc9cGEoZyksZj1uZXcgdCxyPVAoKTsKZGEoZy5hZGRDbGFzcykmJihnLmFkZENsYXNzPWcuYWRkQ2xhc3Muam9pbigiICIpKTtnLmFkZENsYXNzJiYhRShnLmFkZENsYXNzKSYmKGcuYWRkQ2xhc3M9bnVsbCk7ZGEoZy5yZW1vdmVDbGFzcykmJihnLnJlbW92ZUNsYXNzPWcucmVtb3ZlQ2xhc3Muam9pbigiICIpKTtnLnJlbW92ZUNsYXNzJiYhRShnLnJlbW92ZUNsYXNzKSYmKGcucmVtb3ZlQ2xhc3M9bnVsbCk7Zy5mcm9tJiYhZWEoZy5mcm9tKSYmKGcuZnJvbT1udWxsKTtnLnRvJiYhZWEoZy50bykmJihnLnRvPW51bGwpO2lmKCFXKXJldHVybiB1KCksZjtrPVtXLmNsYXNzTmFtZSxnLmFkZENsYXNzLGcucmVtb3ZlQ2xhc3NdLmpvaW4oIiAiKTtpZighVWEoaykpcmV0dXJuIHUoKSxmO3ZhciBKPTA8PVsiZW50ZXIiLCJtb3ZlIiwibGVhdmUiXS5pbmRleE9mKEspLG09aC5oaWRkZW4sdj0hRnx8bXx8Qi5nZXQoVyk7az0hdiYmdy5nZXQoVyl8fHt9O3ZhciBhYT0hIWsuc3RhdGU7dnx8YWEmJjE9PWsuc3RhdGV8fCh2PSFwKGEsCkksSykpO2lmKHYpcmV0dXJuIG0mJmwoZixLLCJzdGFydCIpLHUoKSxtJiZsKGYsSywiY2xvc2UiKSxmO0omJnlhKGEpO209e3N0cnVjdHVyYWw6SixlbGVtZW50OmEsZXZlbnQ6SyxhZGRDbGFzczpnLmFkZENsYXNzLHJlbW92ZUNsYXNzOmcucmVtb3ZlQ2xhc3MsY2xvc2U6dSxvcHRpb25zOmcscnVubmVyOmZ9O2lmKGFhKXtpZihkKCJza2lwIixhLG0saykpe2lmKDI9PT1rLnN0YXRlKXJldHVybiB1KCksZjtUKGEsayxtKTtyZXR1cm4gay5ydW5uZXJ9aWYoZCgiY2FuY2VsIixhLG0saykpaWYoMj09PWsuc3RhdGUpay5ydW5uZXIuZW5kKCk7ZWxzZSBpZihrLnN0cnVjdHVyYWwpay5jbG9zZSgpO2Vsc2UgcmV0dXJuIFQoYSxrLG0pLGsucnVubmVyO2Vsc2UgaWYoZCgiam9pbiIsYSxtLGspKWlmKDI9PT1rLnN0YXRlKVQoYSxtLHt9KTtlbHNlIHJldHVybiBRYShhLEo/SzpudWxsLGcpLEs9bS5ldmVudD1rLmV2ZW50LGc9VChhLGssbSksay5ydW5uZXJ9ZWxzZSBUKGEsbSx7fSk7KGFhPQptLnN0cnVjdHVyYWwpfHwoYWE9ImFuaW1hdGUiPT09bS5ldmVudCYmMDxPYmplY3Qua2V5cyhtLm9wdGlvbnMudG98fHt9KS5sZW5ndGh8fGUobSkpO2lmKCFhYSlyZXR1cm4gdSgpLGxhKGEpLGY7dmFyIHk9KGsuY291bnRlcnx8MCkrMTttLmNvdW50ZXI9eTtDKGEsMSxtKTtjLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3ZhciBiPXcuZ2V0KFcpLGM9IWIsYj1ifHx7fSxoPTA8KGEucGFyZW50KCl8fFtdKS5sZW5ndGgmJigiYW5pbWF0ZSI9PT1iLmV2ZW50fHxiLnN0cnVjdHVyYWx8fGUoYikpO2lmKGN8fGIuY291bnRlciE9PXl8fCFoKXtjJiYoQShhLGcpLGlhKGEsZykpO2lmKGN8fEomJmIuZXZlbnQhPT1LKWcuZG9tT3BlcmF0aW9uKCksZi5lbmQoKTtofHxsYShhKX1lbHNlIEs9IWIuc3RydWN0dXJhbCYmZShiLCEwKT8ic2V0Q2xhc3MiOmIuZXZlbnQsQyhhLDIpLGI9bihhLEssYi5vcHRpb25zKSxmLnNldEhvc3QoYiksbChmLEssInN0YXJ0Iix7fSksYi5kb25lKGZ1bmN0aW9uKGIpe3UoIWIpOwooYj13LmdldChXKSkmJmIuY291bnRlcj09PXkmJmxhKHgoYSkpO2woZixLLCJjbG9zZSIse30pfSl9KTtyZXR1cm4gZn1mdW5jdGlvbiB5YShhKXthPXgoYSkucXVlcnlTZWxlY3RvckFsbCgiW2RhdGEtbmctYW5pbWF0ZV0iKTtzKGEsZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VJbnQoYS5nZXRBdHRyaWJ1dGUoImRhdGEtbmctYW5pbWF0ZSIpKSxjPXcuZ2V0KGEpO2lmKGMpc3dpdGNoKGIpe2Nhc2UgMjpjLnJ1bm5lci5lbmQoKTtjYXNlIDE6dy5yZW1vdmUoYSl9fSl9ZnVuY3Rpb24gbGEoYSl7YT14KGEpO2EucmVtb3ZlQXR0cmlidXRlKCJkYXRhLW5nLWFuaW1hdGUiKTt3LnJlbW92ZShhKX1mdW5jdGlvbiBJKGEsYil7cmV0dXJuIHgoYSk9PT14KGIpfWZ1bmN0aW9uIHAoYSxiLGMpe2M9RyhoLmJvZHkpO3ZhciBkPUkoYSxjKXx8IkhUTUwiPT09YVswXS5ub2RlTmFtZSxrPUkoYSxmKSxnPSExLGwsZT1CLmdldCh4KGEpKTsoYT1HLmRhdGEoYVswXSwiJG5nQW5pbWF0ZVBpbiIpKSYmCihiPWEpO2ZvcihiPXgoYik7Yjspe2t8fChrPUkoYixmKSk7aWYoMSE9PWIubm9kZVR5cGUpYnJlYWs7YT13LmdldChiKXx8e307aWYoIWcpe3ZhciB1PUIuZ2V0KGIpO2lmKCEwPT09dSYmITEhPT1lKXtlPSEwO2JyZWFrfWVsc2UhMT09PXUmJihlPSExKTtnPWEuc3RydWN0dXJhbH1pZihOKGwpfHwhMD09PWwpYT1HLmRhdGEoYiwiJCRuZ0FuaW1hdGVDaGlsZHJlbiIpLCQoYSkmJihsPWEpO2lmKGcmJiExPT09bClicmVhaztkfHwoZD1JKGIsYykpO2lmKGQmJmspYnJlYWs7aWYoIWsmJihhPUcuZGF0YShiLCIkbmdBbmltYXRlUGluIikpKXtiPXgoYSk7Y29udGludWV9Yj1iLnBhcmVudE5vZGV9cmV0dXJuKCFnfHxsKSYmITAhPT1lJiZrJiZkfWZ1bmN0aW9uIEMoYSxiLGMpe2M9Y3x8e307Yy5zdGF0ZT1iO2E9eChhKTthLnNldEF0dHJpYnV0ZSgiZGF0YS1uZy1hbmltYXRlIixiKTtjPShiPXcuZ2V0KGEpKT9EYShiLGMpOmM7dy5wdXQoYSxjKX12YXIgdz1uZXcgdixCPW5ldyB2LApGPW51bGwsaD1yWzBdfHx7aGlkZGVuOiEwfSxXPWMuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIDA9PT15LnRvdGFsUGVuZGluZ1JlcXVlc3RzfSxmdW5jdGlvbihhKXthJiYoVygpLGMuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7Yy4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtudWxsPT09RiYmKEY9ITApfSl9KSl9KSxsPXt9LHU9YS5jbGFzc05hbWVGaWx0ZXIoKSxVYT11P2Z1bmN0aW9uKGEpe3JldHVybiB1LnRlc3QoYSl9OmZ1bmN0aW9uKCl7cmV0dXJuITB9LEE9UShtKSxhYT1Ob2RlLnByb3RvdHlwZS5jb250YWluc3x8ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXM9PT1hfHwhISh0aGlzLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpJjE2KX07cmV0dXJue29uOmZ1bmN0aW9uKGEsYixjKXtiPWhhKGIpO2xbYV09bFthXXx8W107bFthXS5wdXNoKHtub2RlOmIsY2FsbGJhY2s6Y30pfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGgoYSxiLGMpe3ZhciBkPWhhKGIpO3JldHVybiBhLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hKGEubm9kZT09PQpkJiYoIWN8fGEuY2FsbGJhY2s9PT1jKSl9KX12YXIgZD1sW2FdO2QmJihsW2FdPTE9PT1hcmd1bWVudHMubGVuZ3RoP251bGw6aChkLGIsYykpfSxwaW46ZnVuY3Rpb24oYSxiKXt6YSh1YShhKSwiZWxlbWVudCIsIm5vdCBhbiBlbGVtZW50Iik7emEodWEoYiksInBhcmVudEVsZW1lbnQiLCJub3QgYW4gZWxlbWVudCIpO2EuZGF0YSgiJG5nQW5pbWF0ZVBpbiIsYil9LHB1c2g6ZnVuY3Rpb24oYSxiLGMsaCl7Yz1jfHx7fTtjLmRvbU9wZXJhdGlvbj1oO3JldHVybiBrKGEsYixjKX0sZW5hYmxlZDpmdW5jdGlvbihhLGIpe3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMD09PWMpYj0hIUY7ZWxzZSBpZih1YShhKSl7dmFyIGg9eChhKSxkPUIuZ2V0KGgpOzE9PT1jP2I9IWQ6Qi5wdXQoaCwhYil9ZWxzZSBiPUY9ISFhO3JldHVybiBifX19XX1dKS5wcm92aWRlcigiJCRhbmltYXRpb24iLFsiJGFuaW1hdGVQcm92aWRlciIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYS5kYXRhKCIkJGFuaW1hdGlvblJ1bm5lciIpfQp2YXIgYz10aGlzLmRyaXZlcnM9W107dGhpcy4kZ2V0PVsiJCRqcUxpdGUiLCIkcm9vdFNjb3BlIiwiJGluamVjdG9yIiwiJCRBbmltYXRlUnVubmVyIiwiJCRIYXNoTWFwIiwiJCRyQUZTY2hlZHVsZXIiLGZ1bmN0aW9uKGEsZSxmLEwsVSxKKXtmdW5jdGlvbiByKGEpe2Z1bmN0aW9uIGIoYSl7aWYoYS5wcm9jZXNzZWQpcmV0dXJuIGE7YS5wcm9jZXNzZWQ9ITA7dmFyIGQ9YS5kb21Ob2RlLGc9ZC5wYXJlbnROb2RlO2UucHV0KGQsYSk7Zm9yKHZhciBmO2c7KXtpZihmPWUuZ2V0KGcpKXtmLnByb2Nlc3NlZHx8KGY9YihmKSk7YnJlYWt9Zz1nLnBhcmVudE5vZGV9KGZ8fGMpLmNoaWxkcmVuLnB1c2goYSk7cmV0dXJuIGF9dmFyIGM9e2NoaWxkcmVuOltdfSxkLGU9bmV3IFU7Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGY9YVtkXTtlLnB1dChmLmRvbU5vZGUsYVtkXT17ZG9tTm9kZTpmLmRvbU5vZGUsZm46Zi5mbixjaGlsZHJlbjpbXX0pfWZvcihkPTA7ZDxhLmxlbmd0aDtkKyspYihhW2RdKTsKcmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZDtmb3IoZD0wO2Q8YS5jaGlsZHJlbi5sZW5ndGg7ZCsrKWMucHVzaChhLmNoaWxkcmVuW2RdKTthPWMubGVuZ3RoO3ZhciBnPTAsZT1bXTtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZj1jW2RdOzA+PWEmJihhPWcsZz0wLGIucHVzaChlKSxlPVtdKTtlLnB1c2goZi5mbik7Zi5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2crKztjLnB1c2goYSl9KTthLS19ZS5sZW5ndGgmJmIucHVzaChlKTtyZXR1cm4gYn0oYyl9dmFyIHY9W10sbj1RKGEpO3JldHVybiBmdW5jdGlvbih0LHksbSl7ZnVuY3Rpb24gZyhhKXthPWEuaGFzQXR0cmlidXRlKCJuZy1hbmltYXRlLXJlZiIpP1thXTphLnF1ZXJ5U2VsZWN0b3JBbGwoIltuZy1hbmltYXRlLXJlZl0iKTt2YXIgYj1bXTtzKGEsZnVuY3Rpb24oYSl7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm5nLWFuaW1hdGUtcmVmIik7YyYmYy5sZW5ndGgmJmIucHVzaChhKX0pO3JldHVybiBifQpmdW5jdGlvbiBQKGEpe3ZhciBiPVtdLGM9e307cyhhLGZ1bmN0aW9uKGEsZCl7dmFyIGg9eChhLmVsZW1lbnQpLGs9MDw9WyJlbnRlciIsIm1vdmUiXS5pbmRleE9mKGEuZXZlbnQpLGg9YS5zdHJ1Y3R1cmFsP2coaCk6W107aWYoaC5sZW5ndGgpe3ZhciBlPWs/InRvIjoiZnJvbSI7cyhoLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJuZy1hbmltYXRlLXJlZiIpO2NbYl09Y1tiXXx8e307Y1tiXVtlXT17YW5pbWF0aW9uSUQ6ZCxlbGVtZW50OkcoYSl9fSl9ZWxzZSBiLnB1c2goYSl9KTt2YXIgZD17fSxrPXt9O3MoYyxmdW5jdGlvbihjLGcpe3ZhciBlPWMuZnJvbSxsPWMudG87aWYoZSYmbCl7dmFyIGY9YVtlLmFuaW1hdGlvbklEXSxCPWFbbC5hbmltYXRpb25JRF0scD1lLmFuaW1hdGlvbklELnRvU3RyaW5nKCk7aWYoIWtbcF0pe3ZhciBDPWtbcF09e3N0cnVjdHVyYWw6ITAsYmVmb3JlU3RhcnQ6ZnVuY3Rpb24oKXtmLmJlZm9yZVN0YXJ0KCk7Qi5iZWZvcmVTdGFydCgpfSwKY2xvc2U6ZnVuY3Rpb24oKXtmLmNsb3NlKCk7Qi5jbG9zZSgpfSxjbGFzc2VzOkgoZi5jbGFzc2VzLEIuY2xhc3NlcyksZnJvbTpmLHRvOkIsYW5jaG9yczpbXX07Qy5jbGFzc2VzLmxlbmd0aD9iLnB1c2goQyk6KGIucHVzaChmKSxiLnB1c2goQikpfWtbcF0uYW5jaG9ycy5wdXNoKHtvdXQ6ZS5lbGVtZW50LCJpbiI6bC5lbGVtZW50fSl9ZWxzZSBlPWU/ZS5hbmltYXRpb25JRDpsLmFuaW1hdGlvbklELGw9ZS50b1N0cmluZygpLGRbbF18fChkW2xdPSEwLGIucHVzaChhW2VdKSl9KTtyZXR1cm4gYn1mdW5jdGlvbiBIKGEsYil7YT1hLnNwbGl0KCIgIik7Yj1iLnNwbGl0KCIgIik7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGs9YVtkXTtpZigibmctIiE9PWsuc3Vic3RyaW5nKDAsMykpZm9yKHZhciBnPTA7ZzxiLmxlbmd0aDtnKyspaWYoaz09PWJbZ10pe2MucHVzaChrKTticmVha319cmV0dXJuIGMuam9pbigiICIpfWZ1bmN0aW9uIGsoYSl7Zm9yKHZhciBiPQpjLmxlbmd0aC0xOzA8PWI7Yi0tKXt2YXIgZD1jW2JdO2lmKGYuaGFzKGQpJiYoZD1mLmdldChkKShhKSkpcmV0dXJuIGR9fWZ1bmN0aW9uIHlhKGEsYyl7YS5mcm9tJiZhLnRvPyhiKGEuZnJvbS5lbGVtZW50KS5zZXRIb3N0KGMpLGIoYS50by5lbGVtZW50KS5zZXRIb3N0KGMpKTpiKGEuZWxlbWVudCkuc2V0SG9zdChjKX1mdW5jdGlvbiBsYSgpe3ZhciBhPWIodCk7IWF8fCJsZWF2ZSI9PT15JiZtLiQkZG9tT3BlcmF0aW9uRmlyZWR8fGEuZW5kKCl9ZnVuY3Rpb24gSShiKXt0Lm9mZigiJGRlc3Ryb3kiLGxhKTt0LnJlbW92ZURhdGEoIiQkYW5pbWF0aW9uUnVubmVyIik7bih0LG0pO2lhKHQsbSk7bS5kb21PcGVyYXRpb24oKTtCJiZhLnJlbW92ZUNsYXNzKHQsQik7dC5yZW1vdmVDbGFzcygibmctYW5pbWF0ZSIpO0MuY29tcGxldGUoIWIpfW09cGEobSk7dmFyIHA9MDw9WyJlbnRlciIsIm1vdmUiLCJsZWF2ZSJdLmluZGV4T2YoeSksQz1uZXcgTCh7ZW5kOmZ1bmN0aW9uKCl7SSgpfSwKY2FuY2VsOmZ1bmN0aW9uKCl7SSghMCl9fSk7aWYoIWMubGVuZ3RoKXJldHVybiBJKCksQzt0LmRhdGEoIiQkYW5pbWF0aW9uUnVubmVyIixDKTt2YXIgdz1BYSh0LmF0dHIoImNsYXNzIiksQWEobS5hZGRDbGFzcyxtLnJlbW92ZUNsYXNzKSksQj1tLnRlbXBDbGFzc2VzO0ImJih3Kz0iICIrQixtLnRlbXBDbGFzc2VzPW51bGwpO3ZhciBGO3AmJihGPSJuZy0iK3krIi1wcmVwYXJlIixhLmFkZENsYXNzKHQsRikpO3YucHVzaCh7ZWxlbWVudDp0LGNsYXNzZXM6dyxldmVudDp5LHN0cnVjdHVyYWw6cCxvcHRpb25zOm0sYmVmb3JlU3RhcnQ6ZnVuY3Rpb24oKXt0LmFkZENsYXNzKCJuZy1hbmltYXRlIik7QiYmYS5hZGRDbGFzcyh0LEIpO0YmJihhLnJlbW92ZUNsYXNzKHQsRiksRj1udWxsKX0sY2xvc2U6SX0pO3Qub24oIiRkZXN0cm95IixsYSk7aWYoMTx2Lmxlbmd0aClyZXR1cm4gQztlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3ZhciBhPVtdO3ModixmdW5jdGlvbihjKXtiKGMuZWxlbWVudCk/CmEucHVzaChjKTpjLmNsb3NlKCl9KTt2Lmxlbmd0aD0wO3ZhciBjPVAoYSksZD1bXTtzKGMsZnVuY3Rpb24oYSl7ZC5wdXNoKHtkb21Ob2RlOngoYS5mcm9tP2EuZnJvbS5lbGVtZW50OmEuZWxlbWVudCksZm46ZnVuY3Rpb24oKXthLmJlZm9yZVN0YXJ0KCk7dmFyIGMsZD1hLmNsb3NlO2lmKGIoYS5hbmNob3JzP2EuZnJvbS5lbGVtZW50fHxhLnRvLmVsZW1lbnQ6YS5lbGVtZW50KSl7dmFyIGg9ayhhKTtoJiYoYz1oLnN0YXJ0KX1jPyhjPWMoKSxjLmRvbmUoZnVuY3Rpb24oYSl7ZCghYSl9KSx5YShhLGMpKTpkKCl9fSl9KTtKKHIoZCkpfSk7cmV0dXJuIEN9fV19XSkucHJvdmlkZXIoIiRhbmltYXRlQ3NzIixbIiRhbmltYXRlUHJvdmlkZXIiLGZ1bmN0aW9uKGEpe3ZhciBiPUdhKCksYz1HYSgpO3RoaXMuJGdldD1bIiR3aW5kb3ciLCIkJGpxTGl0ZSIsIiQkQW5pbWF0ZVJ1bm5lciIsIiR0aW1lb3V0IiwiJCRmb3JjZVJlZmxvdyIsIiRzbmlmZmVyIiwiJCRyQUZTY2hlZHVsZXIiLAoiJCRhbmltYXRlUXVldWUiLGZ1bmN0aW9uKGEsZSxmLEwsbixKLHIsdil7ZnVuY3Rpb24gRyhhLGIpe3ZhciBjPWEucGFyZW50Tm9kZTtyZXR1cm4oYy4kJG5nQW5pbWF0ZVBhcmVudEtleXx8KGMuJCRuZ0FuaW1hdGVQYXJlbnRLZXk9KytQKSkrIi0iK2EuZ2V0QXR0cmlidXRlKCJjbGFzcyIpKyItIitifWZ1bmN0aW9uIHQoayxnLGYsbSl7dmFyIHA7MDxiLmNvdW50KGYpJiYocD1jLmdldChmKSxwfHwoZz1YKGcsIi1zdGFnZ2VyIiksZS5hZGRDbGFzcyhrLGcpLHA9RWEoYSxrLG0pLHAuYW5pbWF0aW9uRHVyYXRpb249TWF0aC5tYXgocC5hbmltYXRpb25EdXJhdGlvbiwwKSxwLnRyYW5zaXRpb25EdXJhdGlvbj1NYXRoLm1heChwLnRyYW5zaXRpb25EdXJhdGlvbiwwKSxlLnJlbW92ZUNsYXNzKGssZyksYy5wdXQoZixwKSkpO3JldHVybiBwfHx7fX1mdW5jdGlvbiB5KGEpe0gucHVzaChhKTtyLndhaXRVbnRpbFF1aWV0KGZ1bmN0aW9uKCl7Yi5mbHVzaCgpO2MuZmx1c2goKTtmb3IodmFyIGE9Cm4oKSxkPTA7ZDxILmxlbmd0aDtkKyspSFtkXShhKTtILmxlbmd0aD0wfSl9ZnVuY3Rpb24gbShjLGcsZSl7Zz1iLmdldChlKTtnfHwoZz1FYShhLGMsU2EpLCJpbmZpbml0ZSI9PT1nLmFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50JiYoZy5hbmltYXRpb25JdGVyYXRpb25Db3VudD0xKSk7Yi5wdXQoZSxnKTtjPWc7ZT1jLmFuaW1hdGlvbkRlbGF5O2c9Yy50cmFuc2l0aW9uRGVsYXk7Yy5tYXhEZWxheT1lJiZnP01hdGgubWF4KGUsZyk6ZXx8ZztjLm1heER1cmF0aW9uPU1hdGgubWF4KGMuYW5pbWF0aW9uRHVyYXRpb24qYy5hbmltYXRpb25JdGVyYXRpb25Db3VudCxjLnRyYW5zaXRpb25EdXJhdGlvbik7cmV0dXJuIGN9dmFyIGc9UShlKSxQPTAsSD1bXTtyZXR1cm4gZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKCl7cCgpfWZ1bmN0aW9uIHIoKXtwKCEwKX1mdW5jdGlvbiBwKGIpe2lmKCEoUHx8SyYmVSkpe1A9ITA7VT0hMTtoLiQkc2tpcFByZXBhcmF0aW9uQ2xhc3Nlc3x8ZS5yZW1vdmVDbGFzcyhhLApnYSk7ZS5yZW1vdmVDbGFzcyhhLGhhKTtzYShsLCExKTtxYShsLCExKTtzKHUsZnVuY3Rpb24oYSl7bC5zdHlsZVthWzBdXT0iIn0pO2coYSxoKTtpYShhLGgpO09iamVjdC5rZXlzKEgpLmxlbmd0aCYmcyhILGZ1bmN0aW9uKGEsYil7YT9sLnN0eWxlLnNldFByb3BlcnR5KGIsYSk6bC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShiKX0pO2lmKGgub25Eb25lKWgub25Eb25lKCk7ZmEmJmZhLmxlbmd0aCYmYS5vZmYoZmEuam9pbigiICIpLEIpO3ZhciBjPWEuZGF0YSgiJCRhbmltYXRlQ3NzIik7YyYmKEwuY2FuY2VsKGNbMF0udGltZXIpLGEucmVtb3ZlRGF0YSgiJCRhbmltYXRlQ3NzIikpO0QmJkQuY29tcGxldGUoIWIpfX1mdW5jdGlvbiBDKGEpe3EuYmxvY2tUcmFuc2l0aW9uJiZxYShsLGEpO3EuYmxvY2tLZXlmcmFtZUFuaW1hdGlvbiYmc2EobCwhIWEpfWZ1bmN0aW9uIHcoKXtEPW5ldyBmKHtlbmQ6ZCxjYW5jZWw6cn0pO3koTyk7cCgpO3JldHVybnskJHdpbGxBbmltYXRlOiExLHN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIER9LAplbmQ6ZH19ZnVuY3Rpb24gQihhKXthLnN0b3BQcm9wYWdhdGlvbigpO3ZhciBiPWEub3JpZ2luYWxFdmVudHx8YTthPWIuJG1hbnVhbFRpbWVTdGFtcHx8RGF0ZS5ub3coKTtiPXBhcnNlRmxvYXQoYi5lbGFwc2VkVGltZS50b0ZpeGVkKDMpKTtNYXRoLm1heChhLVksMCk+PVEmJmI+PU0mJihLPSEwLHAoKSl9ZnVuY3Rpb24gRigpe2Z1bmN0aW9uIGIoKXtpZighUCl7QyghMSk7cyh1LGZ1bmN0aW9uKGEpe2wuc3R5bGVbYVswXV09YVsxXX0pO2coYSxoKTtlLmFkZENsYXNzKGEsaGEpO2lmKHEucmVjYWxjdWxhdGVUaW1pbmdTdHlsZXMpe29hPWwuY2xhc3NOYW1lKyIgIitnYTtqYT1HKGwsb2EpO3o9bShsLG9hLGphKTtiYT16Lm1heERlbGF5O0U9TWF0aC5tYXgoYmEsMCk7TT16Lm1heER1cmF0aW9uO2lmKDA9PT1NKXtwKCk7cmV0dXJufXEuaGFzVHJhbnNpdGlvbnM9MDx6LnRyYW5zaXRpb25EdXJhdGlvbjtxLmhhc0FuaW1hdGlvbnM9MDx6LmFuaW1hdGlvbkR1cmF0aW9ufXEuYXBwbHlBbmltYXRpb25EZWxheSYmCihiYT0iYm9vbGVhbiIhPT10eXBlb2YgaC5kZWxheSYmdGEoaC5kZWxheSk/cGFyc2VGbG9hdChoLmRlbGF5KTpiYSxFPU1hdGgubWF4KGJhLDApLHouYW5pbWF0aW9uRGVsYXk9YmEsY2E9W3JhLGJhKyJzIl0sdS5wdXNoKGNhKSxsLnN0eWxlW2NhWzBdXT1jYVsxXSk7UT0xRTMqRTtUPTFFMypNO2lmKGguZWFzaW5nKXt2YXIgZCxmPWguZWFzaW5nO3EuaGFzVHJhbnNpdGlvbnMmJihkPVIrIlRpbWluZ0Z1bmN0aW9uIix1LnB1c2goW2QsZl0pLGwuc3R5bGVbZF09Zik7cS5oYXNBbmltYXRpb25zJiYoZD1aKyJUaW1pbmdGdW5jdGlvbiIsdS5wdXNoKFtkLGZdKSxsLnN0eWxlW2RdPWYpfXoudHJhbnNpdGlvbkR1cmF0aW9uJiZmYS5wdXNoKHZhKTt6LmFuaW1hdGlvbkR1cmF0aW9uJiZmYS5wdXNoKHdhKTtZPURhdGUubm93KCk7dmFyIEY9USsxLjUqVDtkPVkrRjt2YXIgZj1hLmRhdGEoIiQkYW5pbWF0ZUNzcyIpfHxbXSx3PSEwO2lmKGYubGVuZ3RoKXt2YXIgcj1mWzBdOyh3PWQ+ci5leHBlY3RlZEVuZFRpbWUpPwpMLmNhbmNlbChyLnRpbWVyKTpmLnB1c2gocCl9dyYmKEY9TChjLEYsITEpLGZbMF09e3RpbWVyOkYsZXhwZWN0ZWRFbmRUaW1lOmR9LGYucHVzaChwKSxhLmRhdGEoIiQkYW5pbWF0ZUNzcyIsZikpO2lmKGZhLmxlbmd0aClhLm9uKGZhLmpvaW4oIiAiKSxCKTtoLnRvJiYoaC5jbGVhbnVwU3R5bGVzJiZIYShILGwsT2JqZWN0LmtleXMoaC50bykpLENhKGEsaCkpfX1mdW5jdGlvbiBjKCl7dmFyIGI9YS5kYXRhKCIkJGFuaW1hdGVDc3MiKTtpZihiKXtmb3IodmFyIGQ9MTtkPGIubGVuZ3RoO2QrKyliW2RdKCk7YS5yZW1vdmVEYXRhKCIkJGFuaW1hdGVDc3MiKX19aWYoIVApaWYobC5wYXJlbnROb2RlKXt2YXIgZD1mdW5jdGlvbihhKXtpZihLKVUmJmEmJihVPSExLHAoKSk7ZWxzZSBpZihVPSFhLHouYW5pbWF0aW9uRHVyYXRpb24paWYoYT1zYShsLFUpLFUpdS5wdXNoKGEpO2Vsc2V7dmFyIGI9dSxjPWIuaW5kZXhPZihhKTswPD1hJiZiLnNwbGljZShjLDEpfX0sZj0wPGVhJiYoei50cmFuc2l0aW9uRHVyYXRpb24mJgowPT09Vi50cmFuc2l0aW9uRHVyYXRpb258fHouYW5pbWF0aW9uRHVyYXRpb24mJjA9PT1WLmFuaW1hdGlvbkR1cmF0aW9uKSYmTWF0aC5tYXgoVi5hbmltYXRpb25EZWxheSxWLnRyYW5zaXRpb25EZWxheSk7Zj9MKGIsTWF0aC5mbG9vcihmKmVhKjFFMyksITEpOmIoKTtOLnJlc3VtZT1mdW5jdGlvbigpe2QoITApfTtOLnBhdXNlPWZ1bmN0aW9uKCl7ZCghMSl9fWVsc2UgcCgpfXZhciBoPWN8fHt9O2guJCRwcmVwYXJlZHx8KGg9cGEoSWEoaCkpKTt2YXIgSD17fSxsPXgoYSk7aWYoIWx8fCFsLnBhcmVudE5vZGV8fCF2LmVuYWJsZWQoKSlyZXR1cm4gdygpO3ZhciB1PVtdLG49YS5hdHRyKCJjbGFzcyIpLEE9TGEoaCksUCxVLEssRCxOLEUsUSxNLFQsWSxmYT1bXTtpZigwPT09aC5kdXJhdGlvbnx8IUouYW5pbWF0aW9ucyYmIUoudHJhbnNpdGlvbnMpcmV0dXJuIHcoKTt2YXIga2E9aC5ldmVudCYmZGEoaC5ldmVudCk/aC5ldmVudC5qb2luKCIgIik6aC5ldmVudCwkPSIiLFM9IiI7CmthJiZoLnN0cnVjdHVyYWw/JD1YKGthLCJuZy0iLCEwKTprYSYmKCQ9a2EpO2guYWRkQ2xhc3MmJihTKz1YKGguYWRkQ2xhc3MsIi1hZGQiKSk7aC5yZW1vdmVDbGFzcyYmKFMubGVuZ3RoJiYoUys9IiAiKSxTKz1YKGgucmVtb3ZlQ2xhc3MsIi1yZW1vdmUiKSk7aC5hcHBseUNsYXNzZXNFYXJseSYmUy5sZW5ndGgmJmcoYSxoKTt2YXIgZ2E9WyQsU10uam9pbigiICIpLnRyaW0oKSxvYT1uKyIgIitnYSxoYT1YKGdhLCItYWN0aXZlIiksbj1BLnRvJiYwPE9iamVjdC5rZXlzKEEudG8pLmxlbmd0aDtpZighKDA8KGgua2V5ZnJhbWVTdHlsZXx8IiIpLmxlbmd0aHx8bnx8Z2EpKXJldHVybiB3KCk7dmFyIGphLFY7MDxoLnN0YWdnZXI/KEE9cGFyc2VGbG9hdChoLnN0YWdnZXIpLFY9e3RyYW5zaXRpb25EZWxheTpBLGFuaW1hdGlvbkRlbGF5OkEsdHJhbnNpdGlvbkR1cmF0aW9uOjAsYW5pbWF0aW9uRHVyYXRpb246MH0pOihqYT1HKGwsb2EpLFY9dChsLGdhLGphLFRhKSk7aC4kJHNraXBQcmVwYXJhdGlvbkNsYXNzZXN8fAplLmFkZENsYXNzKGEsZ2EpO2gudHJhbnNpdGlvblN0eWxlJiYoQT1bUixoLnRyYW5zaXRpb25TdHlsZV0sbWEobCxBKSx1LnB1c2goQSkpOzA8PWguZHVyYXRpb24mJihBPTA8bC5zdHlsZVtSXS5sZW5ndGgsQT1GYShoLmR1cmF0aW9uLEEpLG1hKGwsQSksdS5wdXNoKEEpKTtoLmtleWZyYW1lU3R5bGUmJihBPVtaLGgua2V5ZnJhbWVTdHlsZV0sbWEobCxBKSx1LnB1c2goQSkpO3ZhciBlYT1WPzA8PWguc3RhZ2dlckluZGV4P2guc3RhZ2dlckluZGV4OmIuY291bnQoamEpOjA7KGthPTA9PT1lYSkmJiFoLnNraXBCbG9ja2luZyYmcWEobCw5OTk5KTt2YXIgej1tKGwsb2EsamEpLGJhPXoubWF4RGVsYXk7RT1NYXRoLm1heChiYSwwKTtNPXoubWF4RHVyYXRpb247dmFyIHE9e307cS5oYXNUcmFuc2l0aW9ucz0wPHoudHJhbnNpdGlvbkR1cmF0aW9uO3EuaGFzQW5pbWF0aW9ucz0wPHouYW5pbWF0aW9uRHVyYXRpb247cS5oYXNUcmFuc2l0aW9uQWxsPXEuaGFzVHJhbnNpdGlvbnMmJiJhbGwiPT0Kei50cmFuc2l0aW9uUHJvcGVydHk7cS5hcHBseVRyYW5zaXRpb25EdXJhdGlvbj1uJiYocS5oYXNUcmFuc2l0aW9ucyYmIXEuaGFzVHJhbnNpdGlvbkFsbHx8cS5oYXNBbmltYXRpb25zJiYhcS5oYXNUcmFuc2l0aW9ucyk7cS5hcHBseUFuaW1hdGlvbkR1cmF0aW9uPWguZHVyYXRpb24mJnEuaGFzQW5pbWF0aW9ucztxLmFwcGx5VHJhbnNpdGlvbkRlbGF5PXRhKGguZGVsYXkpJiYocS5hcHBseVRyYW5zaXRpb25EdXJhdGlvbnx8cS5oYXNUcmFuc2l0aW9ucyk7cS5hcHBseUFuaW1hdGlvbkRlbGF5PXRhKGguZGVsYXkpJiZxLmhhc0FuaW1hdGlvbnM7cS5yZWNhbGN1bGF0ZVRpbWluZ1N0eWxlcz0wPFMubGVuZ3RoO2lmKHEuYXBwbHlUcmFuc2l0aW9uRHVyYXRpb258fHEuYXBwbHlBbmltYXRpb25EdXJhdGlvbilNPWguZHVyYXRpb24/cGFyc2VGbG9hdChoLmR1cmF0aW9uKTpNLHEuYXBwbHlUcmFuc2l0aW9uRHVyYXRpb24mJihxLmhhc1RyYW5zaXRpb25zPSEwLHoudHJhbnNpdGlvbkR1cmF0aW9uPQpNLEE9MDxsLnN0eWxlW1IrIlByb3BlcnR5Il0ubGVuZ3RoLHUucHVzaChGYShNLEEpKSkscS5hcHBseUFuaW1hdGlvbkR1cmF0aW9uJiYocS5oYXNBbmltYXRpb25zPSEwLHouYW5pbWF0aW9uRHVyYXRpb249TSx1LnB1c2goW3hhLE0rInMiXSkpO2lmKDA9PT1NJiYhcS5yZWNhbGN1bGF0ZVRpbWluZ1N0eWxlcylyZXR1cm4gdygpO2lmKG51bGwhPWguZGVsYXkpe3ZhciBjYTsiYm9vbGVhbiIhPT10eXBlb2YgaC5kZWxheSYmKGNhPXBhcnNlRmxvYXQoaC5kZWxheSksRT1NYXRoLm1heChjYSwwKSk7cS5hcHBseVRyYW5zaXRpb25EZWxheSYmdS5wdXNoKFtuYSxjYSsicyJdKTtxLmFwcGx5QW5pbWF0aW9uRGVsYXkmJnUucHVzaChbcmEsY2ErInMiXSl9bnVsbD09aC5kdXJhdGlvbiYmMDx6LnRyYW5zaXRpb25EdXJhdGlvbiYmKHEucmVjYWxjdWxhdGVUaW1pbmdTdHlsZXM9cS5yZWNhbGN1bGF0ZVRpbWluZ1N0eWxlc3x8a2EpO1E9MUUzKkU7VD0xRTMqTTtoLnNraXBCbG9ja2luZ3x8CihxLmJsb2NrVHJhbnNpdGlvbj0wPHoudHJhbnNpdGlvbkR1cmF0aW9uLHEuYmxvY2tLZXlmcmFtZUFuaW1hdGlvbj0wPHouYW5pbWF0aW9uRHVyYXRpb24mJjA8Vi5hbmltYXRpb25EZWxheSYmMD09PVYuYW5pbWF0aW9uRHVyYXRpb24pO2guZnJvbSYmKGguY2xlYW51cFN0eWxlcyYmSGEoSCxsLE9iamVjdC5rZXlzKGguZnJvbSkpLEJhKGEsaCkpO3EuYmxvY2tUcmFuc2l0aW9ufHxxLmJsb2NrS2V5ZnJhbWVBbmltYXRpb24/QyhNKTpoLnNraXBCbG9ja2luZ3x8cWEobCwhMSk7cmV0dXJueyQkd2lsbEFuaW1hdGU6ITAsZW5kOmQsc3RhcnQ6ZnVuY3Rpb24oKXtpZighUClyZXR1cm4gTj17ZW5kOmQsY2FuY2VsOnIscmVzdW1lOm51bGwscGF1c2U6bnVsbH0sRD1uZXcgZihOKSx5KEYpLER9fX19XX1dKS5wcm92aWRlcigiJCRhbmltYXRlQ3NzRHJpdmVyIixbIiQkYW5pbWF0aW9uUHJvdmlkZXIiLGZ1bmN0aW9uKGEpe2EuZHJpdmVycy5wdXNoKCIkJGFuaW1hdGVDc3NEcml2ZXIiKTsKdGhpcy4kZ2V0PVsiJGFuaW1hdGVDc3MiLCIkcm9vdFNjb3BlIiwiJCRBbmltYXRlUnVubmVyIiwiJHJvb3RFbGVtZW50IiwiJHNuaWZmZXIiLCIkJGpxTGl0ZSIsIiRkb2N1bWVudCIsZnVuY3Rpb24oYSxjLGQsZSxmLEwsbil7ZnVuY3Rpb24gSihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cYm5nLVxTK1xiL2csIiIpfWZ1bmN0aW9uIHIoYSxiKXtFKGEpJiYoYT1hLnNwbGl0KCIgIikpO0UoYikmJihiPWIuc3BsaXQoIiAiKSk7cmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybi0xPT09Yi5pbmRleE9mKGEpfSkuam9pbigiICIpfWZ1bmN0aW9uIHYoYyxmLGUpe2Z1bmN0aW9uIGsoYSl7dmFyIGI9e30sYz14KGEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3MoWyJ3aWR0aCIsImhlaWdodCIsInRvcCIsImxlZnQiXSxmdW5jdGlvbihhKXt2YXIgZD1jW2FdO3N3aXRjaChhKXtjYXNlICJ0b3AiOmQrPXkuc2Nyb2xsVG9wO2JyZWFrO2Nhc2UgImxlZnQiOmQrPXkuc2Nyb2xsTGVmdH1iW2FdPQpNYXRoLmZsb29yKGQpKyJweCJ9KTtyZXR1cm4gYn1mdW5jdGlvbiBMKCl7dmFyIGM9SihlLmF0dHIoImNsYXNzIil8fCIiKSxkPXIoYyxwKSxjPXIocCxjKSxkPWEodix7dG86ayhlKSxhZGRDbGFzczoibmctYW5jaG9yLWluICIrZCxyZW1vdmVDbGFzczoibmctYW5jaG9yLW91dCAiK2MsZGVsYXk6ITB9KTtyZXR1cm4gZC4kJHdpbGxBbmltYXRlP2Q6bnVsbH1mdW5jdGlvbiBuKCl7di5yZW1vdmUoKTtmLnJlbW92ZUNsYXNzKCJuZy1hbmltYXRlLXNoaW0iKTtlLnJlbW92ZUNsYXNzKCJuZy1hbmltYXRlLXNoaW0iKX12YXIgdj1HKHgoZikuY2xvbmVOb2RlKCEwKSkscD1KKHYuYXR0cigiY2xhc3MiKXx8IiIpO2YuYWRkQ2xhc3MoIm5nLWFuaW1hdGUtc2hpbSIpO2UuYWRkQ2xhc3MoIm5nLWFuaW1hdGUtc2hpbSIpO3YuYWRkQ2xhc3MoIm5nLWFuY2hvciIpO20uYXBwZW5kKHYpO3ZhciBDO2M9ZnVuY3Rpb24oKXt2YXIgYz1hKHYse2FkZENsYXNzOiJuZy1hbmNob3Itb3V0IixkZWxheTohMCwKZnJvbTprKGYpfSk7cmV0dXJuIGMuJCR3aWxsQW5pbWF0ZT9jOm51bGx9KCk7aWYoIWMmJihDPUwoKSwhQykpcmV0dXJuIG4oKTt2YXIgdz1jfHxDO3JldHVybntzdGFydDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtjJiZjLmVuZCgpfXZhciBiLGM9dy5zdGFydCgpO2MuZG9uZShmdW5jdGlvbigpe2M9bnVsbDtpZighQyYmKEM9TCgpKSlyZXR1cm4gYz1DLnN0YXJ0KCksYy5kb25lKGZ1bmN0aW9uKCl7Yz1udWxsO24oKTtiLmNvbXBsZXRlKCl9KSxjO24oKTtiLmNvbXBsZXRlKCl9KTtyZXR1cm4gYj1uZXcgZCh7ZW5kOmEsY2FuY2VsOmF9KX19fWZ1bmN0aW9uIEQoYSxiLGMsZil7dmFyIGU9dChhLE8pLG09dChiLE8pLHI9W107cyhmLGZ1bmN0aW9uKGEpeyhhPXYoYyxhLm91dCxhWyJpbiJdKSkmJnIucHVzaChhKX0pO2lmKGV8fG18fDAhPT1yLmxlbmd0aClyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cyhiLGZ1bmN0aW9uKGEpe2EuZW5kKCl9KX12YXIgYj1bXTsKZSYmYi5wdXNoKGUuc3RhcnQoKSk7bSYmYi5wdXNoKG0uc3RhcnQoKSk7cyhyLGZ1bmN0aW9uKGEpe2IucHVzaChhLnN0YXJ0KCkpfSk7dmFyIGM9bmV3IGQoe2VuZDphLGNhbmNlbDphfSk7ZC5hbGwoYixmdW5jdGlvbihhKXtjLmNvbXBsZXRlKGEpfSk7cmV0dXJuIGN9fX1mdW5jdGlvbiB0KGMpe3ZhciBkPWMuZWxlbWVudCxlPWMub3B0aW9uc3x8e307Yy5zdHJ1Y3R1cmFsJiYoZS5ldmVudD1jLmV2ZW50LGUuc3RydWN0dXJhbD0hMCxlLmFwcGx5Q2xhc3Nlc0Vhcmx5PSEwLCJsZWF2ZSI9PT1jLmV2ZW50JiYoZS5vbkRvbmU9ZS5kb21PcGVyYXRpb24pKTtlLnByZXBhcmF0aW9uQ2xhc3NlcyYmKGUuZXZlbnQ9WShlLmV2ZW50LGUucHJlcGFyYXRpb25DbGFzc2VzKSk7Yz1hKGQsZSk7cmV0dXJuIGMuJCR3aWxsQW5pbWF0ZT9jOm51bGx9aWYoIWYuYW5pbWF0aW9ucyYmIWYudHJhbnNpdGlvbnMpcmV0dXJuIE87dmFyIHk9blswXS5ib2R5O2M9eChlKTt2YXIgbT1HKGMucGFyZW50Tm9kZSYmCjExPT09Yy5wYXJlbnROb2RlLm5vZGVUeXBlfHx5LmNvbnRhaW5zKGMpP2M6eSk7UShMKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZnJvbSYmYS50bz9EKGEuZnJvbSxhLnRvLGEuY2xhc3NlcyxhLmFuY2hvcnMpOnQoYSl9fV19XSkucHJvdmlkZXIoIiQkYW5pbWF0ZUpzIixbIiRhbmltYXRlUHJvdmlkZXIiLGZ1bmN0aW9uKGEpe3RoaXMuJGdldD1bIiRpbmplY3RvciIsIiQkQW5pbWF0ZVJ1bm5lciIsIiQkanFMaXRlIixmdW5jdGlvbihiLGMsZCl7ZnVuY3Rpb24gZShjKXtjPWRhKGMpP2M6Yy5zcGxpdCgiICIpO2Zvcih2YXIgZD1bXSxlPXt9LGY9MDtmPGMubGVuZ3RoO2YrKyl7dmFyIHY9Y1tmXSxuPWEuJCRyZWdpc3RlcmVkQW5pbWF0aW9uc1t2XTtuJiYhZVt2XSYmKGQucHVzaChiLmdldChuKSksZVt2XT0hMCl9cmV0dXJuIGR9dmFyIGY9UShkKTtyZXR1cm4gZnVuY3Rpb24oYSxiLGQscil7ZnVuY3Rpb24gbigpe3IuZG9tT3BlcmF0aW9uKCk7ZihhLHIpfWZ1bmN0aW9uIHgoYSwKYixkLGUsZil7c3dpdGNoKGQpe2Nhc2UgImFuaW1hdGUiOmI9W2IsZS5mcm9tLGUudG8sZl07YnJlYWs7Y2FzZSAic2V0Q2xhc3MiOmI9W2IsZyxELGZdO2JyZWFrO2Nhc2UgImFkZENsYXNzIjpiPVtiLGcsZl07YnJlYWs7Y2FzZSAicmVtb3ZlQ2xhc3MiOmI9W2IsRCxmXTticmVhaztkZWZhdWx0OmI9W2IsZl19Yi5wdXNoKGUpO2lmKGE9YS5hcHBseShhLGIpKWlmKEphKGEuc3RhcnQpJiYoYT1hLnN0YXJ0KCkpLGEgaW5zdGFuY2VvZiBjKWEuZG9uZShmKTtlbHNlIGlmKEphKGEpKXJldHVybiBhO3JldHVybiBPfWZ1bmN0aW9uIHQoYSxiLGQsZSxmKXt2YXIgZz1bXTtzKGUsZnVuY3Rpb24oZSl7dmFyIGs9ZVtmXTtrJiZnLnB1c2goZnVuY3Rpb24oKXt2YXIgZSxmLGg9ITEsZz1mdW5jdGlvbihhKXtofHwoaD0hMCwoZnx8TykoYSksZS5jb21wbGV0ZSghYSkpfTtlPW5ldyBjKHtlbmQ6ZnVuY3Rpb24oKXtnKCl9LGNhbmNlbDpmdW5jdGlvbigpe2coITApfX0pO2Y9eChrLGEsYixkLApmdW5jdGlvbihhKXtnKCExPT09YSl9KTtyZXR1cm4gZX0pfSk7cmV0dXJuIGd9ZnVuY3Rpb24geShhLGIsZCxlLGYpe3ZhciBnPXQoYSxiLGQsZSxmKTtpZigwPT09Zy5sZW5ndGgpe3ZhciBrLG07ImJlZm9yZVNldENsYXNzIj09PWY/KGs9dChhLCJyZW1vdmVDbGFzcyIsZCxlLCJiZWZvcmVSZW1vdmVDbGFzcyIpLG09dChhLCJhZGRDbGFzcyIsZCxlLCJiZWZvcmVBZGRDbGFzcyIpKToic2V0Q2xhc3MiPT09ZiYmKGs9dChhLCJyZW1vdmVDbGFzcyIsZCxlLCJyZW1vdmVDbGFzcyIpLG09dChhLCJhZGRDbGFzcyIsZCxlLCJhZGRDbGFzcyIpKTtrJiYoZz1nLmNvbmNhdChrKSk7bSYmKGc9Zy5jb25jYXQobSkpfWlmKDAhPT1nLmxlbmd0aClyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGI9W107Zy5sZW5ndGgmJnMoZyxmdW5jdGlvbihhKXtiLnB1c2goYSgpKX0pO2IubGVuZ3RoP2MuYWxsKGIsYSk6YSgpO3JldHVybiBmdW5jdGlvbihhKXtzKGIsZnVuY3Rpb24oYil7YT9iLmNhbmNlbCgpOgpiLmVuZCgpfSl9fX12YXIgbT0hMTszPT09YXJndW1lbnRzLmxlbmd0aCYmZWEoZCkmJihyPWQsZD1udWxsKTtyPXBhKHIpO2R8fChkPWEuYXR0cigiY2xhc3MiKXx8IiIsci5hZGRDbGFzcyYmKGQrPSIgIityLmFkZENsYXNzKSxyLnJlbW92ZUNsYXNzJiYoZCs9IiAiK3IucmVtb3ZlQ2xhc3MpKTt2YXIgZz1yLmFkZENsYXNzLEQ9ci5yZW1vdmVDbGFzcyxIPWUoZCksayxFO2lmKEgubGVuZ3RoKXt2YXIgRyxJOyJsZWF2ZSI9PWI/KEk9ImxlYXZlIixHPSJhZnRlckxlYXZlIik6KEk9ImJlZm9yZSIrYi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnN1YnN0cigxKSxHPWIpOyJlbnRlciIhPT1iJiYibW92ZSIhPT1iJiYoaz15KGEsYixyLEgsSSkpO0U9eShhLGIscixILEcpfWlmKGt8fEUpe3ZhciBwO3JldHVybnskJHdpbGxBbmltYXRlOiEwLGVuZDpmdW5jdGlvbigpe3A/cC5lbmQoKToobT0hMCxuKCksaWEoYSxyKSxwPW5ldyBjLHAuY29tcGxldGUoITApKTtyZXR1cm4gcH0sc3RhcnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGMpe209CiEwO24oKTtpYShhLHIpO3AuY29tcGxldGUoYyl9aWYocClyZXR1cm4gcDtwPW5ldyBjO3ZhciBkLGU9W107ayYmZS5wdXNoKGZ1bmN0aW9uKGEpe2Q9ayhhKX0pO2UubGVuZ3RoP2UucHVzaChmdW5jdGlvbihhKXtuKCk7YSghMCl9KTpuKCk7RSYmZS5wdXNoKGZ1bmN0aW9uKGEpe2Q9RShhKX0pO3Auc2V0SG9zdCh7ZW5kOmZ1bmN0aW9uKCl7bXx8KChkfHxPKSh2b2lkIDApLGIodm9pZCAwKSl9LGNhbmNlbDpmdW5jdGlvbigpe218fCgoZHx8TykoITApLGIoITApKX19KTtjLmNoYWluKGUsYik7cmV0dXJuIHB9fX19fV19XSkucHJvdmlkZXIoIiQkYW5pbWF0ZUpzRHJpdmVyIixbIiQkYW5pbWF0aW9uUHJvdmlkZXIiLGZ1bmN0aW9uKGEpe2EuZHJpdmVycy5wdXNoKCIkJGFuaW1hdGVKc0RyaXZlciIpO3RoaXMuJGdldD1bIiQkYW5pbWF0ZUpzIiwiJCRBbmltYXRlUnVubmVyIixmdW5jdGlvbihhLGMpe2Z1bmN0aW9uIGQoYyl7cmV0dXJuIGEoYy5lbGVtZW50LGMuZXZlbnQsYy5jbGFzc2VzLApjLm9wdGlvbnMpfXJldHVybiBmdW5jdGlvbihhKXtpZihhLmZyb20mJmEudG8pe3ZhciBiPWQoYS5mcm9tKSxuPWQoYS50byk7aWYoYnx8bilyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cyhkLGZ1bmN0aW9uKGEpe2EuZW5kKCl9KX19dmFyIGQ9W107YiYmZC5wdXNoKGIuc3RhcnQoKSk7biYmZC5wdXNoKG4uc3RhcnQoKSk7Yy5hbGwoZCxmdW5jdGlvbihhKXtlLmNvbXBsZXRlKGEpfSk7dmFyIGU9bmV3IGMoe2VuZDphKCksY2FuY2VsOmEoKX0pO3JldHVybiBlfX19ZWxzZSByZXR1cm4gZChhKX19XX1dKX0pKHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItYW5pbWF0ZS5taW4uanMubWFwCjsKZGVmaW5lKCJhbmd1bGFyQW5pbWF0ZSIsIFsiYW5ndWxhciJdLCBmdW5jdGlvbigpe30pOwoKLyoKICAgICogQGxpY2Vuc2UKICAgICogQW5ndWxhckpTIFRvYXN0ZXIKICAgICogVmVyc2lvbjogMy4wLjAKICAgICoKICAgICogQ29weXJpZ2h0IDIwMTMtMjAxOSBKaXJpIEthdnVsYWssIFN0YWJ6cy4KICAgICogQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAgICogVXNlLCByZXByb2R1Y3Rpb24sIGRpc3RyaWJ1dGlvbiwgYW5kIG1vZGlmaWNhdGlvbiBvZiB0aGlzIGNvZGUgaXMgc3ViamVjdCB0byB0aGUgdGVybXMgYW5kCiAgICAqIGNvbmRpdGlvbnMgb2YgdGhlIE1JVCBsaWNlbnNlLCBhdmFpbGFibGUgYXQgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAKICAgICoKICAgICogQXV0aG9yczogSmlyaSBLYXZ1bGFrLCBTdGFienMKICAgICogUmVsYXRlZCB0byBwcm9qZWN0IG9mIEpvaG4gUGFwYSwgSGFucyBGasOkbGxlbWFyayBhbmQgTmd1eeG7hW4gVGhp4buHbiBIw7luZyAodGhpZW5odW5nMTk4OSkKKi8KIWZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO2FuZ3VsYXIubW9kdWxlKCJ0b2FzdGVyIixbXSkuY29uc3RhbnQoInRvYXN0ZXJDb25maWciLHtsaW1pdDowLCJ0YXAtdG8tZGlzbWlzcyI6ITAsImNsb3NlLWJ1dHRvbiI6ITEsImNsb3NlLWh0bWwiOic8YnV0dG9uIGNsYXNzPSJ0b2FzdC1jbG9zZS1idXR0b24iIHR5cGU9ImJ1dHRvbiI+JnRpbWVzOzwvYnV0dG9uPicsIm5ld2VzdC1vbi10b3AiOiEwLCJ0aW1lLW91dCI6NWUzLCJpY29uLWNsYXNzZXMiOntlcnJvcjoidG9hc3QtZXJyb3IiLGluZm86InRvYXN0LWluZm8iLHdhaXQ6InRvYXN0LXdhaXQiLHN1Y2Nlc3M6InRvYXN0LXN1Y2Nlc3MiLHdhcm5pbmc6InRvYXN0LXdhcm5pbmcifSwiYm9keS1vdXRwdXQtdHlwZSI6IiIsImJvZHktdGVtcGxhdGUiOiJ0b2FzdGVyQm9keVRtcGwuaHRtbCIsImljb24tY2xhc3MiOiJ0b2FzdC1pbmZvIiwicG9zaXRpb24tY2xhc3MiOiJ0b2FzdC10b3AtcmlnaHQiLCJ0aXRsZS1jbGFzcyI6InRvYXN0LXRpdGxlIiwibWVzc2FnZS1jbGFzcyI6InRvYXN0LW1lc3NhZ2UiLCJwcmV2ZW50LWR1cGxpY2F0ZXMiOiExLCJtb3VzZW92ZXItdGltZXItc3RvcCI6ITB9KS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24odCl7dC5wdXQoImFuZ3VsYXJqcy10b2FzdGVyL3RvYXN0Lmh0bWwiLCc8ZGl2IGlkPSJ0b2FzdC1jb250YWluZXIiIG5nLWNsYXNzPSJbY29uZmlnLnBvc2l0aW9uLCBjb25maWcuYW5pbWF0aW9uXSI+PGRpdiBuZy1yZXBlYXQ9InRvYXN0ZXIgaW4gdG9hc3RlcnMiIGNsYXNzPSJ0b2FzdCIgbmctY2xhc3M9InRvYXN0ZXIudHlwZSIgbmctY2xpY2s9ImNsaWNrKCRldmVudCwgdG9hc3RlcikiIG5nLW1vdXNlb3Zlcj0ic3RvcFRpbWVyKHRvYXN0ZXIpIiBuZy1tb3VzZW91dD0icmVzdGFydFRpbWVyKHRvYXN0ZXIpIj48ZGl2IG5nLWlmPSJ0b2FzdGVyLnNob3dDbG9zZUJ1dHRvbiIgbmctY2xpY2s9ImNsaWNrKCRldmVudCwgdG9hc3RlciwgdHJ1ZSkiIG5nLWJpbmQtaHRtbD0idG9hc3Rlci5jbG9zZUh0bWwiPjwvZGl2PjxkaXYgbmctY2xhc3M9ImNvbmZpZy50aXRsZSI+e3t0b2FzdGVyLnRpdGxlfX08L2Rpdj48ZGl2IG5nLWNsYXNzPSJjb25maWcubWVzc2FnZSIgbmctc3dpdGNoIG9uPSJ0b2FzdGVyLmJvZHlPdXRwdXRUeXBlIj48ZGl2IG5nLXN3aXRjaC13aGVuPSJodG1sIiBuZy1iaW5kLWh0bWw9InRvYXN0ZXIuYm9keSI+PC9kaXY+PGRpdiBuZy1zd2l0Y2gtd2hlbj0idHJ1c3RlZEh0bWwiIG5nLWJpbmQtaHRtbD0idG9hc3Rlci5odG1sIj48L2Rpdj48ZGl2IG5nLXN3aXRjaC13aGVuPSJ0ZW1wbGF0ZSI+PGRpdiBuZy1pbmNsdWRlPSJ0b2FzdGVyLmJvZHlUZW1wbGF0ZSI+PC9kaXY+PC9kaXY+PGRpdiBuZy1zd2l0Y2gtd2hlbj0idGVtcGxhdGVXaXRoRGF0YSI+PGRpdiBuZy1pbmNsdWRlPSJ0b2FzdGVyLmJvZHlUZW1wbGF0ZSI+PC9kaXY+PC9kaXY+PGRpdiBuZy1zd2l0Y2gtd2hlbj0iZGlyZWN0aXZlIj48ZGl2IGRpcmVjdGl2ZS10ZW1wbGF0ZSBkaXJlY3RpdmUtbmFtZT0ie3t0b2FzdGVyLmh0bWx9fSIgZGlyZWN0aXZlLWRhdGE9InRvYXN0ZXIuZGlyZWN0aXZlRGF0YSI+PC9kaXY+PC9kaXY+PGRpdiBuZy1zd2l0Y2gtZGVmYXVsdCA+e3t0b2FzdGVyLmJvZHl9fTwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpfV0pLnNlcnZpY2UoInRvYXN0ZXIiLFsiJHJvb3RTY29wZSIsInRvYXN0ZXJDb25maWciLGZ1bmN0aW9uKGQsdCl7dmFyIG09e25ld0d1aWQ6ZnVuY3Rpb24oKXtyZXR1cm4ieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Ii5yZXBsYWNlKC9beHldL2csZnVuY3Rpb24odCl7dmFyIGU9MTYqTWF0aC5yYW5kb20oKXwwO3JldHVybigieCI9PXQ/ZTozJmV8OCkudG9TdHJpbmcoMTYpfSl9fTtmb3IodmFyIGUgaW4gdGhpcy5wb3A9ZnVuY3Rpb24odCxlLG8scyxhLGksbixyLGMsbCl7aWYoYW5ndWxhci5pc09iamVjdCh0KSl7dmFyIHU9dDt0aGlzLnRvYXN0PXt0eXBlOnUudHlwZSx0aXRsZTp1LnRpdGxlLGJvZHk6dS5ib2R5LHRpbWVvdXQ6dS50aW1lb3V0LGJvZHlPdXRwdXRUeXBlOnUuYm9keU91dHB1dFR5cGUsY2xpY2tIYW5kbGVyOnUuY2xpY2tIYW5kbGVyLHNob3dDbG9zZUJ1dHRvbjp1LnNob3dDbG9zZUJ1dHRvbixjbG9zZUh0bWw6dS5jbG9zZUh0bWwsdG9hc3RJZDp1LnRvYXN0SWQsb25TaG93Q2FsbGJhY2s6dS5vblNob3dDYWxsYmFjayxvbkhpZGVDYWxsYmFjazp1Lm9uSGlkZUNhbGxiYWNrLGRpcmVjdGl2ZURhdGE6dS5kaXJlY3RpdmVEYXRhLHRhcFRvRGlzbWlzczp1LnRhcFRvRGlzbWlzc30sbj11LnRvYXN0ZXJJZH1lbHNlIHRoaXMudG9hc3Q9e3R5cGU6dCx0aXRsZTplLGJvZHk6byx0aW1lb3V0OnMsYm9keU91dHB1dFR5cGU6YSxjbGlja0hhbmRsZXI6aSxzaG93Q2xvc2VCdXR0b246cix0b2FzdElkOmMsb25IaWRlQ2FsbGJhY2s6bH07cmV0dXJuIHRoaXMudG9hc3QudG9hc3RJZCYmdGhpcy50b2FzdC50b2FzdElkLmxlbmd0aHx8KHRoaXMudG9hc3QudG9hc3RJZD1tLm5ld0d1aWQoKSksZC4kZW1pdCgidG9hc3Rlci1uZXdUb2FzdCIsbix0aGlzLnRvYXN0LnRvYXN0SWQpLHt0b2FzdGVySWQ6bix0b2FzdElkOnRoaXMudG9hc3QudG9hc3RJZH19LHRoaXMuY2xlYXI9ZnVuY3Rpb24odCxlKXthbmd1bGFyLmlzT2JqZWN0KHQpP2QuJGVtaXQoInRvYXN0ZXItY2xlYXJUb2FzdHMiLHQudG9hc3RlcklkLHQudG9hc3RJZCk6ZC4kZW1pdCgidG9hc3Rlci1jbGVhclRvYXN0cyIsdCxlKX0sdFsiaWNvbi1jbGFzc2VzIl0pdGhpc1tlXT1vKGUpO2Z1bmN0aW9uIG8obCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSxvLHMsYSxpLG4scixjKXtyZXR1cm4gYW5ndWxhci5pc1N0cmluZyh0KT90aGlzLnBvcChsLHQsZSxvLHMsYSxpLG4scixjKTp0aGlzLnBvcChhbmd1bGFyLmV4dGVuZCh0LHt0eXBlOmx9KSl9fX1dKS5mYWN0b3J5KCJ0b2FzdGVyRXZlbnRSZWdpc3RyeSIsWyIkcm9vdFNjb3BlIixmdW5jdGlvbih0KXt2YXIgZSxvPW51bGwscz1udWxsLGk9W10sbj1bXTtyZXR1cm57c2V0dXA6KGU9e3NldHVwOmZ1bmN0aW9uKCl7b3x8KG89dC4kb24oInRvYXN0ZXItbmV3VG9hc3QiLGZ1bmN0aW9uKHQsZSxvKXtmb3IodmFyIHM9MCxhPWkubGVuZ3RoO3M8YTtzKyspaVtzXSh0LGUsbyl9KSksc3x8KHM9dC4kb24oInRvYXN0ZXItY2xlYXJUb2FzdHMiLGZ1bmN0aW9uKHQsZSxvKXtmb3IodmFyIHM9MCxhPW4ubGVuZ3RoO3M8YTtzKyspbltzXSh0LGUsbyl9KSl9LHN1YnNjcmliZVRvTmV3VG9hc3RFdmVudDpmdW5jdGlvbih0KXtpLnB1c2godCl9LHN1YnNjcmliZVRvQ2xlYXJUb2FzdHNFdmVudDpmdW5jdGlvbih0KXtuLnB1c2godCl9LHVuc3Vic2NyaWJlVG9OZXdUb2FzdEV2ZW50OmZ1bmN0aW9uKHQpe3ZhciBlPWkuaW5kZXhPZih0KTswPD1lJiZpLnNwbGljZShlLDEpLDA9PT1pLmxlbmd0aCYmKG8oKSxvPW51bGwpfSx1bnN1YnNjcmliZVRvQ2xlYXJUb2FzdHNFdmVudDpmdW5jdGlvbih0KXt2YXIgZT1uLmluZGV4T2YodCk7MDw9ZSYmbi5zcGxpY2UoZSwxKSwwPT09bi5sZW5ndGgmJihzKCkscz1udWxsKX19KS5zZXR1cCxzdWJzY3JpYmVUb05ld1RvYXN0RXZlbnQ6ZS5zdWJzY3JpYmVUb05ld1RvYXN0RXZlbnQsc3Vic2NyaWJlVG9DbGVhclRvYXN0c0V2ZW50OmUuc3Vic2NyaWJlVG9DbGVhclRvYXN0c0V2ZW50LHVuc3Vic2NyaWJlVG9OZXdUb2FzdEV2ZW50OmUudW5zdWJzY3JpYmVUb05ld1RvYXN0RXZlbnQsdW5zdWJzY3JpYmVUb0NsZWFyVG9hc3RzRXZlbnQ6ZS51bnN1YnNjcmliZVRvQ2xlYXJUb2FzdHNFdmVudH19XSkuZGlyZWN0aXZlKCJkaXJlY3RpdmVUZW1wbGF0ZSIsWyIkY29tcGlsZSIsIiRpbmplY3RvciIsZnVuY3Rpb24ocixjKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHNjb3BlOntkaXJlY3RpdmVOYW1lOiJAZGlyZWN0aXZlTmFtZSIsZGlyZWN0aXZlRGF0YToiPWRpcmVjdGl2ZURhdGEifSxyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24oYSxpLG4pe2EuJHdhdGNoKCJkaXJlY3RpdmVOYW1lIixmdW5jdGlvbihlKXtpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGUpfHxlLmxlbmd0aDw9MCl0aHJvdyBuZXcgRXJyb3IoIkEgdmFsaWQgZGlyZWN0aXZlIG5hbWUgbXVzdCBiZSBwcm92aWRlZCB2aWEgdGhlIHRvYXN0IGJvZHkgYXJndW1lbnQgd2hlbiB1c2luZyBib2R5T3V0cHV0VHlwZTogZGlyZWN0aXZlIik7dmFyIHQ7dHJ5e3Q9Yy5nZXQobi4kbm9ybWFsaXplKGUpKyJEaXJlY3RpdmUiKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoZSsiIGNvdWxkIG5vdCBiZSBmb3VuZC4gVGhlIG5hbWUgc2hvdWxkIGFwcGVhciBhcyBpdCBleGlzdHMgaW4gdGhlIG1hcmt1cCwgbm90IGNhbWVsQ2FzZWQgYXMgaXQgd291bGQgYXBwZWFyIGluIHRoZSBkaXJlY3RpdmUgZGVjbGFyYXRpb24sIGUuZy4gZGlyZWN0aXZlLW5hbWUgbm90IGRpcmVjdGl2ZU5hbWUuIil9dmFyIG89dFswXTtpZighMCE9PW8uc2NvcGUmJm8uc2NvcGUpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgdXNlIGEgZGlyZWN0aXZlIHdpdGggYW4gaXNvbGF0ZWQgc2NvcGUuIFRoZSBzY29wZSBtdXN0IGJlIGVpdGhlciB0cnVlIG9yIGZhbHN5IChlLmcuIGZhbHNlL251bGwvdW5kZWZpbmVkKS4gT2NjdXJyZWQgZm9yIGRpcmVjdGl2ZSAiK2UrIi4iKTtpZihvLnJlc3RyaWN0LmluZGV4T2YoIkEiKTwwKXRocm93IG5ldyBFcnJvcignRGlyZWN0aXZlcyBtdXN0IGJlIHVzYWJsZSBhcyBhdHRyaWJ1dGVzLiBBZGQgIkEiIHRvIHRoZSByZXN0cmljdCBvcHRpb24gKG9yIHJlbW92ZSB0aGUgb3B0aW9uIGVudGlyZWx5KS4gT2NjdXJyZWQgZm9yIGRpcmVjdGl2ZSAnK2UrIi4iKTthLmRpcmVjdGl2ZURhdGEmJihhLmRpcmVjdGl2ZURhdGE9YW5ndWxhci5mcm9tSnNvbihhLmRpcmVjdGl2ZURhdGEpKTt2YXIgcz1yKCI8ZGl2ICIrZSsiPjwvZGl2PiIpKGEpO2kuYXBwZW5kKHMpfSl9fX1dKS5kaXJlY3RpdmUoInRvYXN0ZXJDb250YWluZXIiLFsiJHBhcnNlIiwiJHJvb3RTY29wZSIsIiRpbnRlcnZhbCIsIiRzY2UiLCJ0b2FzdGVyQ29uZmlnIiwidG9hc3RlciIsInRvYXN0ZXJFdmVudFJlZ2lzdHJ5IixmdW5jdGlvbihkLHQsaSxtLG8sYSxuKXtyZXR1cm57cmVwbGFjZTohMCxyZXN0cmljdDoiRUEiLHNjb3BlOiEwLGxpbms6ZnVuY3Rpb24oYyx0LGUpe3ZhciBsO2Z1bmN0aW9uIHUodCl7dmFyIGU9Yy50b2FzdGVyc1t0XTtlLnRpbWVvdXRQcm9taXNlJiZpLmNhbmNlbChlLnRpbWVvdXRQcm9taXNlKSxjLnRvYXN0ZXJzLnNwbGljZSh0LDEpLGFuZ3VsYXIuaXNGdW5jdGlvbihlLm9uSGlkZUNhbGxiYWNrKSYmZS5vbkhpZGVDYWxsYmFjayhlKX1mdW5jdGlvbiBzKHQpe3JldHVybiBhbmd1bGFyLmlzVW5kZWZpbmVkKHQpfHxudWxsPT09dH1sPWFuZ3VsYXIuZXh0ZW5kKHt9LG8sYy4kZXZhbChlLnRvYXN0ZXJPcHRpb25zKSksYy5jb25maWc9e3RvYXN0ZXJJZDpsWyJ0b2FzdGVyLWlkIl0scG9zaXRpb246bFsicG9zaXRpb24tY2xhc3MiXSx0aXRsZTpsWyJ0aXRsZS1jbGFzcyJdLG1lc3NhZ2U6bFsibWVzc2FnZS1jbGFzcyJdLHRhcDpsWyJ0YXAtdG8tZGlzbWlzcyJdLGNsb3NlQnV0dG9uOmxbImNsb3NlLWJ1dHRvbiJdLGNsb3NlSHRtbDpsWyJjbG9zZS1odG1sIl0sYW5pbWF0aW9uOmxbImFuaW1hdGlvbi1jbGFzcyJdLG1vdXNlb3ZlclRpbWVyOmxbIm1vdXNlb3Zlci10aW1lci1zdG9wIl19LGMuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtuLnVuc3Vic2NyaWJlVG9OZXdUb2FzdEV2ZW50KGMuX29uTmV3VG9hc3QpLG4udW5zdWJzY3JpYmVUb0NsZWFyVG9hc3RzRXZlbnQoYy5fb25DbGVhclRvYXN0cyl9KSxjLmNvbmZpZ3VyZVRpbWVyPWZ1bmN0aW9uKHQpe3ZhciBlLG8scz1hbmd1bGFyLmlzTnVtYmVyKHQudGltZW91dCk/dC50aW1lb3V0OmxbInRpbWUtb3V0Il07Im9iamVjdCI9PXR5cGVvZiBzJiYocz1zW3QudHlwZV0pLDA8cyYmKG89cywoZT10KS50aW1lb3V0UHJvbWlzZT1pKGZ1bmN0aW9uKCl7Yy5yZW1vdmVUb2FzdChlLnRvYXN0SWQpfSxvLDEpKX0sYy5yZW1vdmVUb2FzdD1mdW5jdGlvbih0KXt2YXIgZSxvO2ZvcihlPTAsbz1jLnRvYXN0ZXJzLmxlbmd0aDtlPG87ZSsrKWlmKGMudG9hc3RlcnNbZV0udG9hc3RJZD09PXQpe3UoZSk7YnJlYWt9fSxjLnRvYXN0ZXJzPVtdLGMuX29uTmV3VG9hc3Q9ZnVuY3Rpb24odCxlLG8peyhzKGMuY29uZmlnLnRvYXN0ZXJJZCkmJnMoZSl8fCFzKGMuY29uZmlnLnRvYXN0ZXJJZCkmJiFzKGUpJiZjLmNvbmZpZy50b2FzdGVySWQ9PWUpJiZmdW5jdGlvbih0LGUpe2lmKHQudHlwZT1sWyJpY29uLWNsYXNzZXMiXVt0LnR5cGVdLHQudHlwZXx8KHQudHlwZT1sWyJpY29uLWNsYXNzIl0pLCEwPT09bFsicHJldmVudC1kdXBsaWNhdGVzIl0mJmMudG9hc3RlcnMubGVuZ3RoKXtpZihjLnRvYXN0ZXJzW2MudG9hc3RlcnMubGVuZ3RoLTFdLmJvZHk9PT10LmJvZHkpcmV0dXJuO3ZhciBvLHMsYT0hMTtmb3Iobz0wLHM9Yy50b2FzdGVycy5sZW5ndGg7bzxzO28rKylpZihjLnRvYXN0ZXJzW29dLnRvYXN0SWQ9PT1lKXthPSEwO2JyZWFrfWlmKGEpcmV0dXJufXZhciBpPWxbImNsb3NlLWJ1dHRvbiJdO2lmKCJib29sZWFuIj09dHlwZW9mIHQuc2hvd0Nsb3NlQnV0dG9uKTtlbHNlIGlmKCJib29sZWFuIj09dHlwZW9mIGkpdC5zaG93Q2xvc2VCdXR0b249aTtlbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgaSl7dmFyIG49aVt0LnR5cGVdO251bGwhPW4mJih0LnNob3dDbG9zZUJ1dHRvbj1uKX1lbHNlIHQuc2hvd0Nsb3NlQnV0dG9uPSExO3N3aXRjaCh0LnNob3dDbG9zZUJ1dHRvbiYmKHQuY2xvc2VIdG1sPW0udHJ1c3RBc0h0bWwodC5jbG9zZUh0bWx8fGMuY29uZmlnLmNsb3NlSHRtbCkpLHQuYm9keU91dHB1dFR5cGU9dC5ib2R5T3V0cHV0VHlwZXx8bFsiYm9keS1vdXRwdXQtdHlwZSJdLHQuYm9keU91dHB1dFR5cGUpe2Nhc2UidHJ1c3RlZEh0bWwiOnQuaHRtbD1tLnRydXN0QXNIdG1sKHQuYm9keSk7YnJlYWs7Y2FzZSJ0ZW1wbGF0ZSI6dC5ib2R5VGVtcGxhdGU9dC5ib2R5fHxsWyJib2R5LXRlbXBsYXRlIl07YnJlYWs7Y2FzZSJ0ZW1wbGF0ZVdpdGhEYXRhIjp2YXIgcj1kKHQuYm9keXx8bFsiYm9keS10ZW1wbGF0ZSJdKShjKTt0LmJvZHlUZW1wbGF0ZT1yLnRlbXBsYXRlLHQuZGF0YT1yLmRhdGE7YnJlYWs7Y2FzZSJkaXJlY3RpdmUiOnQuaHRtbD10LmJvZHl9Yy5jb25maWd1cmVUaW1lcih0KSwhMD09PWxbIm5ld2VzdC1vbi10b3AiXT8oYy50b2FzdGVycy51bnNoaWZ0KHQpLDA8bC5saW1pdCYmYy50b2FzdGVycy5sZW5ndGg+bC5saW1pdCYmdShjLnRvYXN0ZXJzLmxlbmd0aC0xKSk6KGMudG9hc3RlcnMucHVzaCh0KSwwPGwubGltaXQmJmMudG9hc3RlcnMubGVuZ3RoPmwubGltaXQmJnUoMCkpLGFuZ3VsYXIuaXNGdW5jdGlvbih0Lm9uU2hvd0NhbGxiYWNrKSYmdC5vblNob3dDYWxsYmFjayh0KX0oYS50b2FzdCxvKX0sYy5fb25DbGVhclRvYXN0cz1mdW5jdGlvbih0LGUsbyl7KCIqIj09ZXx8cyhjLmNvbmZpZy50b2FzdGVySWQpJiZzKGUpfHwhcyhjLmNvbmZpZy50b2FzdGVySWQpJiYhcyhlKSYmYy5jb25maWcudG9hc3RlcklkPT1lKSYmZnVuY3Rpb24odCl7Zm9yKHZhciBlPWMudG9hc3RlcnMubGVuZ3RoLTE7MDw9ZTtlLS0pcyh0KT91KGUpOmMudG9hc3RlcnNbZV0udG9hc3RJZD09dCYmdShlKX0obyl9LG4uc2V0dXAoKSxuLnN1YnNjcmliZVRvTmV3VG9hc3RFdmVudChjLl9vbk5ld1RvYXN0KSxuLnN1YnNjcmliZVRvQ2xlYXJUb2FzdHNFdmVudChjLl9vbkNsZWFyVG9hc3RzKX0sY29udHJvbGxlcjpbIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIixmdW5jdGlvbihhLHQsZSl7YS5zdG9wVGltZXI9ZnVuY3Rpb24odCl7ITA9PT1hLmNvbmZpZy5tb3VzZW92ZXJUaW1lciYmdC50aW1lb3V0UHJvbWlzZSYmKGkuY2FuY2VsKHQudGltZW91dFByb21pc2UpLHQudGltZW91dFByb21pc2U9bnVsbCl9LGEucmVzdGFydFRpbWVyPWZ1bmN0aW9uKHQpeyEwPT09YS5jb25maWcubW91c2VvdmVyVGltZXI/dC50aW1lb3V0UHJvbWlzZXx8YS5jb25maWd1cmVUaW1lcih0KTpudWxsPT09dC50aW1lb3V0UHJvbWlzZSYmYS5yZW1vdmVUb2FzdCh0LnRvYXN0SWQpfSxhLmNsaWNrPWZ1bmN0aW9uKHQsZSxvKXtpZih0LnN0b3BQcm9wYWdhdGlvbigpLCEwPT09KCJib29sZWFuIj09dHlwZW9mIGUudGFwVG9EaXNtaXNzP2UudGFwVG9EaXNtaXNzOmEuY29uZmlnLnRhcCl8fCEwPT09ZS5zaG93Q2xvc2VCdXR0b24mJiEwPT09byl7dmFyIHM9ITA7ZS5jbGlja0hhbmRsZXImJihhbmd1bGFyLmlzRnVuY3Rpb24oZS5jbGlja0hhbmRsZXIpP3M9ZS5jbGlja0hhbmRsZXIoZSxvKTphbmd1bGFyLmlzRnVuY3Rpb24oYS4kcGFyZW50LiRldmFsKGUuY2xpY2tIYW5kbGVyKSk/cz1hLiRwYXJlbnQuJGV2YWwoZS5jbGlja0hhbmRsZXIpKGUsbyk6Y29uc29sZS5sb2coIlRPQVNULU5PVEU6IFlvdXIgY2xpY2sgaGFuZGxlciBpcyBub3QgaW5zaWRlIGEgcGFyZW50IHNjb3BlIG9mIHRvYXN0ZXItY29udGFpbmVyLiIpKSxzJiZhLnJlbW92ZVRvYXN0KGUudG9hc3RJZCl9fX1dLHRlbXBsYXRlVXJsOiJhbmd1bGFyanMtdG9hc3Rlci90b2FzdC5odG1sIn19XSl9KHdpbmRvdyxkb2N1bWVudCk7CmRlZmluZSgidG9hc3RlciIsIFsiYW5ndWxhciIsImFuZ3VsYXJBbmltYXRlIl0sIGZ1bmN0aW9uKCl7fSk7CgoKCi8qKgogKiBBIGRpcmVjdGl2ZSBmb3IgYWRkaW5nIGdvb2dsZSBwbGFjZXMgYXV0b2NvbXBsZXRlIHRvIGEgdGV4dCBib3gKICogZ29vZ2xlIHBsYWNlcyBhdXRvY29tcGxldGUgaW5mbzogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcGxhY2VzCiAqCiAqIFVzYWdlOgogKgogKiA8aW5wdXQgdHlwZT0idGV4dCIgIG5nLWF1dG9jb21wbGV0ZSBuZy1tb2RlbD0iYXV0b2NvbXBsZXRlIiBvcHRpb25zPSJvcHRpb25zIiBkZXRhaWxzPSJkZXRhaWxzLz4KICoKICogKyBuZy1tb2RlbCAtIGF1dG9jb21wbGV0ZSB0ZXh0Ym94IHZhbHVlCiAqCiAqICsgZGV0YWlscyAtIG1vcmUgZGV0YWlsZWQgYXV0b2NvbXBsZXRlIHJlc3VsdCwgaW5jbHVkZXMgYWRkcmVzcyBwYXJ0cywgbGF0bG5nLCBldGMuIChPcHRpb25hbCkKICoKICogKyBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBmb3IgdGhlIGF1dG9jb21wbGV0ZSAoT3B0aW9uYWwpCiAqCiAqICAgICAgICsgdHlwZXM6IHR5cGUsICAgICAgICBTdHJpbmcsIHZhbHVlcyBjYW4gYmUgJ2dlb2NvZGUnLCAnZXN0YWJsaXNobWVudCcsICcocmVnaW9ucyknLCBvciAnKGNpdGllcyknCiAqICAgICAgICsgYm91bmRzOiBib3VuZHMsICAgICBHb29nbGUgbWFwcyBMYXRMbmdCb3VuZHMgT2JqZWN0LCBiaWFzZXMgcmVzdWx0cyB0byBib3VuZHMsIGJ1dCBtYXkgcmV0dXJuIHJlc3VsdHMgb3V0c2lkZSB0aGVzZSBib3VuZHMKICogICAgICAgKyBjb3VudHJ5OiBjb3VudHJ5ICAgIFN0cmluZywgSVNPIDMxNjYtMSBBbHBoYS0yIGNvbXBhdGlibGUgY291bnRyeSBjb2RlLiBleGFtcGxlczsgJ2NhJywgJ3VzJywgJ2diJwogKiAgICAgICArIHdhdGNoRW50ZXI6ICAgICAgICAgQm9vbGVhbiwgdHJ1ZTsgb24gRW50ZXIgc2VsZWN0IHRvcCBhdXRvY29tcGxldGUgcmVzdWx0LiBmYWxzZShkZWZhdWx0KTsgZW50ZXIgZW5kcyBhdXRvY29tcGxldGUKICoKICogZXhhbXBsZToKICoKICogICAgb3B0aW9ucyA9IHsKICogICAgICAgIHR5cGVzOiAnKGNpdGllcyknLAogKiAgICAgICAgY291bnRyeTogJ2NhJwogKiAgICB9CioqLwoKYW5ndWxhci5tb2R1bGUoICJuZ0F1dG9jb21wbGV0ZSIsIFtdKQogIC5kaXJlY3RpdmUoJ25nQXV0b2NvbXBsZXRlJywgZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICByZXF1aXJlOiAnbmdNb2RlbCcsCiAgICAgIHNjb3BlOiB7CiAgICAgICAgbmdNb2RlbDogJz0nLAogICAgICAgIG9wdGlvbnM6ICc9PycsCiAgICAgICAgZGV0YWlsczogJz0/JwogICAgICB9LAoKICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVyKSB7CgogICAgICAgIC8vb3B0aW9ucyBmb3IgYXV0b2NvbXBsZXRlCiAgICAgICAgdmFyIG9wdHMKICAgICAgICB2YXIgd2F0Y2hFbnRlciA9IGZhbHNlCiAgICAgICAgLy9jb252ZXJ0IG9wdGlvbnMgcHJvdmlkZWQgdG8gb3B0cwogICAgICAgIHZhciBpbml0T3B0cyA9IGZ1bmN0aW9uKCkgewoKICAgICAgICAgIG9wdHMgPSB7fQogICAgICAgICAgaWYgKHNjb3BlLm9wdGlvbnMpIHsKCiAgICAgICAgICAgIGlmIChzY29wZS5vcHRpb25zLndhdGNoRW50ZXIgIT09IHRydWUpIHsKICAgICAgICAgICAgICB3YXRjaEVudGVyID0gZmFsc2UKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB3YXRjaEVudGVyID0gdHJ1ZQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2NvcGUub3B0aW9ucy50eXBlcykgewogICAgICAgICAgICAgIG9wdHMudHlwZXMgPSBbXQogICAgICAgICAgICAgIG9wdHMudHlwZXMucHVzaChzY29wZS5vcHRpb25zLnR5cGVzKQogICAgICAgICAgICAgIHNjb3BlLmdQbGFjZS5zZXRUeXBlcyhvcHRzLnR5cGVzKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNjb3BlLmdQbGFjZS5zZXRUeXBlcyhbXSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHNjb3BlLm9wdGlvbnMuYm91bmRzKSB7CiAgICAgICAgICAgICAgb3B0cy5ib3VuZHMgPSBzY29wZS5vcHRpb25zLmJvdW5kcwogICAgICAgICAgICAgIHNjb3BlLmdQbGFjZS5zZXRCb3VuZHMob3B0cy5ib3VuZHMpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2NvcGUuZ1BsYWNlLnNldEJvdW5kcyhudWxsKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2NvcGUub3B0aW9ucy5jb3VudHJ5KSB7CiAgICAgICAgICAgICAgb3B0cy5jb21wb25lbnRSZXN0cmljdGlvbnMgPSB7CiAgICAgICAgICAgICAgICBjb3VudHJ5OiBzY29wZS5vcHRpb25zLmNvdW50cnkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2NvcGUuZ1BsYWNlLnNldENvbXBvbmVudFJlc3RyaWN0aW9ucyhvcHRzLmNvbXBvbmVudFJlc3RyaWN0aW9ucykKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzY29wZS5nUGxhY2Uuc2V0Q29tcG9uZW50UmVzdHJpY3Rpb25zKG51bGwpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChzY29wZS5nUGxhY2UgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBzY29wZS5nUGxhY2UgPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLkF1dG9jb21wbGV0ZShlbGVtZW50WzBdLCB7fSk7CiAgICAgICAgfQogICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHNjb3BlLmdQbGFjZSwgJ3BsYWNlX2NoYW5nZWQnLCBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciByZXN1bHQgPSBzY29wZS5nUGxhY2UuZ2V0UGxhY2UoKTsKICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBpZiAocmVzdWx0LmFkZHJlc3NfY29tcG9uZW50cyAhPT0gdW5kZWZpbmVkKSB7CgogICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHsKCiAgICAgICAgICAgICAgICBzY29wZS5kZXRhaWxzID0gcmVzdWx0OwoKICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZpZXdWYWx1ZShlbGVtZW50LnZhbCgpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBpZiAod2F0Y2hFbnRlcikgewogICAgICAgICAgICAgICAgZ2V0UGxhY2UocmVzdWx0KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICAgIC8vZnVuY3Rpb24gdG8gZ2V0IHJldHJpZXZlIHRoZSBhdXRvY29tcGxldGVzIGZpcnN0IHJlc3VsdCB1c2luZyB0aGUgQXV0b2NvbXBsZXRlU2VydmljZSAKICAgICAgICB2YXIgZ2V0UGxhY2UgPSBmdW5jdGlvbihyZXN1bHQpIHsKICAgICAgICAgIHZhciBhdXRvY29tcGxldGVTZXJ2aWNlID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5BdXRvY29tcGxldGVTZXJ2aWNlKCk7CiAgICAgICAgICBpZiAocmVzdWx0Lm5hbWUubGVuZ3RoID4gMCl7CiAgICAgICAgICAgIGF1dG9jb21wbGV0ZVNlcnZpY2UuZ2V0UGxhY2VQcmVkaWN0aW9ucygKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpbnB1dDogcmVzdWx0Lm5hbWUsCiAgICAgICAgICAgICAgICBvZmZzZXQ6IHJlc3VsdC5uYW1lLmxlbmd0aAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZnVuY3Rpb24gbGlzdGVudG9yZXN1bHQobGlzdCwgc3RhdHVzKSB7CiAgICAgICAgICAgICAgICBpZihsaXN0ID09IG51bGwgfHwgbGlzdC5sZW5ndGggPT0gMCkgewoKICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHNjb3BlLmRldGFpbHMgPSBudWxsOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB2YXIgcGxhY2VzU2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuUGxhY2VzU2VydmljZShlbGVtZW50WzBdKTsKICAgICAgICAgICAgICAgICAgcGxhY2VzU2VydmljZS5nZXREZXRhaWxzKAogICAgICAgICAgICAgICAgICAgIHsncmVmZXJlbmNlJzogbGlzdFswXS5yZWZlcmVuY2V9LAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRldGFpbHNyZXN1bHQoZGV0YWlsc1Jlc3VsdCwgcGxhY2VzU2VydmljZVN0YXR1cykgewoKICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGFjZXNTZXJ2aWNlU3RhdHVzID09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKGRldGFpbHNSZXN1bHQuZm9ybWF0dGVkX2FkZHJlc3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsKGRldGFpbHNSZXN1bHQuZm9ybWF0dGVkX2FkZHJlc3MpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5kZXRhaWxzID0gZGV0YWlsc1Jlc3VsdDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9vbiBmb2N1c291dCB0aGUgdmFsdWUgcmV2ZXJ0cywgbmVlZCB0byBzZXQgaXQgYWdhaW4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdhdGNoRm9jdXNPdXQgPSBlbGVtZW50Lm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnZhbChkZXRhaWxzUmVzdWx0LmZvcm1hdHRlZF9hZGRyZXNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudW5iaW5kKCdmb2N1c291dCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnRyb2xsZXIuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGNvbnRyb2xsZXIuJHZpZXdWYWx1ZTsKICAgICAgICAgIGVsZW1lbnQudmFsKGxvY2F0aW9uKTsKICAgICAgICB9OwoKICAgICAgICAvL3dhdGNoIG9wdGlvbnMgcHJvdmlkZWQgdG8gZGlyZWN0aXZlCiAgICAgICAgc2NvcGUud2F0Y2hPcHRpb25zID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHNjb3BlLm9wdGlvbnMKICAgICAgICB9OwogICAgICAgIHNjb3BlLiR3YXRjaChzY29wZS53YXRjaE9wdGlvbnMsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGluaXRPcHRzKCkKICAgICAgICB9LCB0cnVlKTsKCiAgICAgIH0KICAgIH07CiAgfSk7CmRlZmluZSgiYW5ndWxhckF1dG9jb21wbGV0ZSIsIFsiYW5ndWxhciJdLCBmdW5jdGlvbigpe30pOwoKLyoKICogYW5ndWxhci11aS1ib290c3RyYXAKICogaHR0cDovL2FuZ3VsYXItdWkuZ2l0aHViLmlvL2Jvb3RzdHJhcC8KCiAqIFZlcnNpb246IDAuMTQuMyAtIDIwMTUtMTAtMjMKICogTGljZW5zZTogTUlUCiAqLwphbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwIixbInVpLmJvb3RzdHJhcC50cGxzIiwidWkuYm9vdHN0cmFwLmNvbGxhcHNlIiwidWkuYm9vdHN0cmFwLmFjY29yZGlvbiIsInVpLmJvb3RzdHJhcC5hbGVydCIsInVpLmJvb3RzdHJhcC5idXR0b25zIiwidWkuYm9vdHN0cmFwLmNhcm91c2VsIiwidWkuYm9vdHN0cmFwLmRhdGVwYXJzZXIiLCJ1aS5ib290c3RyYXAucG9zaXRpb24iLCJ1aS5ib290c3RyYXAuZGF0ZXBpY2tlciIsInVpLmJvb3RzdHJhcC5kcm9wZG93biIsInVpLmJvb3RzdHJhcC5zdGFja2VkTWFwIiwidWkuYm9vdHN0cmFwLm1vZGFsIiwidWkuYm9vdHN0cmFwLnBhZ2luYXRpb24iLCJ1aS5ib290c3RyYXAudG9vbHRpcCIsInVpLmJvb3RzdHJhcC5wb3BvdmVyIiwidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyIiwidWkuYm9vdHN0cmFwLnJhdGluZyIsInVpLmJvb3RzdHJhcC50YWJzIiwidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXIiLCJ1aS5ib290c3RyYXAudHlwZWFoZWFkIl0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAudHBscyIsWyJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWwiLCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWwiLCJ0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sIiwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbCIsInRlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWwiLCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbCIsInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWwiLCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWwiLCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWwiLCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbCIsInRlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWwiLCJ0ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbCIsInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbCIsInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sIiwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtcG9wdXAuaHRtbCIsInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sIiwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXRlbXBsYXRlLXBvcHVwLmh0bWwiLCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItaHRtbC5odG1sIiwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLXRlbXBsYXRlLmh0bWwiLCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbCIsInRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sIiwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3MuaHRtbCIsInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWwiLCJ0ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWwiLCJ0ZW1wbGF0ZS90YWJzL3RhYi5odG1sIiwidGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbCIsInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sIiwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1tYXRjaC5odG1sIiwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sIl0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuY29sbGFwc2UiLFtdKS5kaXJlY3RpdmUoInVpYkNvbGxhcHNlIixbIiRhbmltYXRlIiwiJGluamVjdG9yIixmdW5jdGlvbihhLGIpe3ZhciBjPWIuaGFzKCIkYW5pbWF0ZUNzcyIpP2IuZ2V0KCIkYW5pbWF0ZUNzcyIpOm51bGw7cmV0dXJue2xpbms6ZnVuY3Rpb24oYixkLGUpe2Z1bmN0aW9uIGYoKXtkLnJlbW92ZUNsYXNzKCJjb2xsYXBzZSIpLmFkZENsYXNzKCJjb2xsYXBzaW5nIikuYXR0cigiYXJpYS1leHBhbmRlZCIsITApLmF0dHIoImFyaWEtaGlkZGVuIiwhMSksYz9jKGQse2FkZENsYXNzOiJpbiIsZWFzaW5nOiJlYXNlIix0bzp7aGVpZ2h0OmRbMF0uc2Nyb2xsSGVpZ2h0KyJweCJ9fSkuc3RhcnQoKVsiZmluYWxseSJdKGcpOmEuYWRkQ2xhc3MoZCwiaW4iLHt0bzp7aGVpZ2h0OmRbMF0uc2Nyb2xsSGVpZ2h0KyJweCJ9fSkudGhlbihnKX1mdW5jdGlvbiBnKCl7ZC5yZW1vdmVDbGFzcygiY29sbGFwc2luZyIpLmFkZENsYXNzKCJjb2xsYXBzZSIpLmNzcyh7aGVpZ2h0OiJhdXRvIn0pfWZ1bmN0aW9uIGgoKXtyZXR1cm4gZC5oYXNDbGFzcygiY29sbGFwc2UiKXx8ZC5oYXNDbGFzcygiaW4iKT8oZC5jc3Moe2hlaWdodDpkWzBdLnNjcm9sbEhlaWdodCsicHgifSkucmVtb3ZlQ2xhc3MoImNvbGxhcHNlIikuYWRkQ2xhc3MoImNvbGxhcHNpbmciKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMSkuYXR0cigiYXJpYS1oaWRkZW4iLCEwKSx2b2lkKGM/YyhkLHtyZW1vdmVDbGFzczoiaW4iLHRvOntoZWlnaHQ6IjAifX0pLnN0YXJ0KClbImZpbmFsbHkiXShpKTphLnJlbW92ZUNsYXNzKGQsImluIix7dG86e2hlaWdodDoiMCJ9fSkudGhlbihpKSkpOmkoKX1mdW5jdGlvbiBpKCl7ZC5jc3Moe2hlaWdodDoiMCJ9KSxkLnJlbW92ZUNsYXNzKCJjb2xsYXBzaW5nIikuYWRkQ2xhc3MoImNvbGxhcHNlIil9Yi4kd2F0Y2goZS51aWJDb2xsYXBzZSxmdW5jdGlvbihhKXthP2goKTpmKCl9KX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuY29sbGFwc2UiKS52YWx1ZSgiJGNvbGxhcHNlU3VwcHJlc3NXYXJuaW5nIiwhMSkuZGlyZWN0aXZlKCJjb2xsYXBzZSIsWyIkYW5pbWF0ZSIsIiRpbmplY3RvciIsIiRsb2ciLCIkY29sbGFwc2VTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWIuaGFzKCIkYW5pbWF0ZUNzcyIpP2IuZ2V0KCIkYW5pbWF0ZUNzcyIpOm51bGw7cmV0dXJue2xpbms6ZnVuY3Rpb24oYixmLGcpe2Z1bmN0aW9uIGgoKXtmLnJlbW92ZUNsYXNzKCJjb2xsYXBzZSIpLmFkZENsYXNzKCJjb2xsYXBzaW5nIikuYXR0cigiYXJpYS1leHBhbmRlZCIsITApLmF0dHIoImFyaWEtaGlkZGVuIiwhMSksZT9lKGYse2Vhc2luZzoiZWFzZSIsdG86e2hlaWdodDpmWzBdLnNjcm9sbEhlaWdodCsicHgifX0pLnN0YXJ0KCkuZG9uZShpKTphLmFuaW1hdGUoZix7fSx7aGVpZ2h0OmZbMF0uc2Nyb2xsSGVpZ2h0KyJweCJ9KS50aGVuKGkpfWZ1bmN0aW9uIGkoKXtmLnJlbW92ZUNsYXNzKCJjb2xsYXBzaW5nIikuYWRkQ2xhc3MoImNvbGxhcHNlIGluIikuY3NzKHtoZWlnaHQ6ImF1dG8ifSl9ZnVuY3Rpb24gaigpe3JldHVybiBmLmhhc0NsYXNzKCJjb2xsYXBzZSIpfHxmLmhhc0NsYXNzKCJpbiIpPyhmLmNzcyh7aGVpZ2h0OmZbMF0uc2Nyb2xsSGVpZ2h0KyJweCJ9KS5yZW1vdmVDbGFzcygiY29sbGFwc2UgaW4iKS5hZGRDbGFzcygiY29sbGFwc2luZyIpLmF0dHIoImFyaWEtZXhwYW5kZWQiLCExKS5hdHRyKCJhcmlhLWhpZGRlbiIsITApLHZvaWQoZT9lKGYse3RvOntoZWlnaHQ6IjAifX0pLnN0YXJ0KCkuZG9uZShrKTphLmFuaW1hdGUoZix7fSx7aGVpZ2h0OiIwIn0pLnRoZW4oaykpKTprKCl9ZnVuY3Rpb24gaygpe2YuY3NzKHtoZWlnaHQ6IjAifSksZi5yZW1vdmVDbGFzcygiY29sbGFwc2luZyIpLmFkZENsYXNzKCJjb2xsYXBzZSIpfWR8fGMud2FybigiY29sbGFwc2UgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItY29sbGFwc2UgaW5zdGVhZC4iKSxiLiR3YXRjaChnLmNvbGxhcHNlLGZ1bmN0aW9uKGEpe2E/aigpOmgoKX0pfX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5hY2NvcmRpb24iLFsidWkuYm9vdHN0cmFwLmNvbGxhcHNlIl0pLmNvbnN0YW50KCJ1aWJBY2NvcmRpb25Db25maWciLHtjbG9zZU90aGVyczohMH0pLmNvbnRyb2xsZXIoIlVpYkFjY29yZGlvbkNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGF0dHJzIiwidWliQWNjb3JkaW9uQ29uZmlnIixmdW5jdGlvbihhLGIsYyl7dGhpcy5ncm91cHM9W10sdGhpcy5jbG9zZU90aGVycz1mdW5jdGlvbihkKXt2YXIgZT1hbmd1bGFyLmlzRGVmaW5lZChiLmNsb3NlT3RoZXJzKT9hLiRldmFsKGIuY2xvc2VPdGhlcnMpOmMuY2xvc2VPdGhlcnM7ZSYmYW5ndWxhci5mb3JFYWNoKHRoaXMuZ3JvdXBzLGZ1bmN0aW9uKGEpe2EhPT1kJiYoYS5pc09wZW49ITEpfSl9LHRoaXMuYWRkR3JvdXA9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczt0aGlzLmdyb3Vwcy5wdXNoKGEpLGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oYyl7Yi5yZW1vdmVHcm91cChhKX0pfSx0aGlzLnJlbW92ZUdyb3VwPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ3JvdXBzLmluZGV4T2YoYSk7LTEhPT1iJiZ0aGlzLmdyb3Vwcy5zcGxpY2UoYiwxKX19XSkuZGlyZWN0aXZlKCJ1aWJBY2NvcmRpb24iLGZ1bmN0aW9uKCl7cmV0dXJue2NvbnRyb2xsZXI6IlVpYkFjY29yZGlvbkNvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoiYWNjb3JkaW9uIix0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWwifX19KS5kaXJlY3RpdmUoInVpYkFjY29yZGlvbkdyb3VwIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOiJedWliQWNjb3JkaW9uIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbCJ9LHNjb3BlOntoZWFkaW5nOiJAIixpc09wZW46Ij0/Iixpc0Rpc2FibGVkOiI9PyJ9LGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt0aGlzLnNldEhlYWRpbmc9ZnVuY3Rpb24oYSl7dGhpcy5oZWFkaW5nPWF9fSxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkR3JvdXAoYSksYS5vcGVuQ2xhc3M9Yy5vcGVuQ2xhc3N8fCJwYW5lbC1vcGVuIixhLnBhbmVsQ2xhc3M9Yy5wYW5lbENsYXNzLGEuJHdhdGNoKCJpc09wZW4iLGZ1bmN0aW9uKGMpe2IudG9nZ2xlQ2xhc3MoYS5vcGVuQ2xhc3MsISFjKSxjJiZkLmNsb3NlT3RoZXJzKGEpfSksYS50b2dnbGVPcGVuPWZ1bmN0aW9uKGIpe2EuaXNEaXNhYmxlZHx8YiYmMzIhPT1iLndoaWNofHwoYS5pc09wZW49IWEuaXNPcGVuKX19fX0pLmRpcmVjdGl2ZSgidWliQWNjb3JkaW9uSGVhZGluZyIsZnVuY3Rpb24oKXtyZXR1cm57dHJhbnNjbHVkZTohMCx0ZW1wbGF0ZToiIixyZXBsYWNlOiEwLHJlcXVpcmU6Il51aWJBY2NvcmRpb25Hcm91cCIsbGluazpmdW5jdGlvbihhLGIsYyxkLGUpe2Quc2V0SGVhZGluZyhlKGEsYW5ndWxhci5ub29wKSl9fX0pLmRpcmVjdGl2ZSgidWliQWNjb3JkaW9uVHJhbnNjbHVkZSIsZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpbIj9edWliQWNjb3JkaW9uR3JvdXAiLCI/XmFjY29yZGlvbkdyb3VwIl0sbGluazpmdW5jdGlvbihhLGIsYyxkKXtkPWRbMF0/ZFswXTpkWzFdLGEuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGRbYy51aWJBY2NvcmRpb25UcmFuc2NsdWRlXX0sZnVuY3Rpb24oYSl7YSYmKGIuZmluZCgic3BhbiIpLmh0bWwoIiIpLGIuZmluZCgic3BhbiIpLmFwcGVuZChhKSl9KX19fSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5hY2NvcmRpb24iKS52YWx1ZSgiJGFjY29yZGlvblN1cHByZXNzV2FybmluZyIsITEpLmNvbnRyb2xsZXIoIkFjY29yZGlvbkNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGF0dHJzIiwiJGNvbnRyb2xsZXIiLCIkbG9nIiwiJGFjY29yZGlvblN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCxlKXtlfHxkLndhcm4oIkFjY29yZGlvbkNvbnRyb2xsZXIgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSBVaWJBY2NvcmRpb25Db250cm9sbGVyIGluc3RlYWQuIiksYW5ndWxhci5leHRlbmQodGhpcyxjKCJVaWJBY2NvcmRpb25Db250cm9sbGVyIix7JHNjb3BlOmEsJGF0dHJzOmJ9KSl9XSkuZGlyZWN0aXZlKCJhY2NvcmRpb24iLFsiJGxvZyIsIiRhY2NvcmRpb25TdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3Jlc3RyaWN0OiJFQSIsY29udHJvbGxlcjoiQWNjb3JkaW9uQ29udHJvbGxlciIsY29udHJvbGxlckFzOiJhY2NvcmRpb24iLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMSx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sIn0sbGluazpmdW5jdGlvbigpe2J8fGEud2FybigiYWNjb3JkaW9uIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLWFjY29yZGlvbiBpbnN0ZWFkLiIpfX19XSkuZGlyZWN0aXZlKCJhY2NvcmRpb25Hcm91cCIsWyIkbG9nIiwiJGFjY29yZGlvblN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVxdWlyZToiXmFjY29yZGlvbiIscmVzdHJpY3Q6IkVBIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbCJ9LHNjb3BlOntoZWFkaW5nOiJAIixpc09wZW46Ij0/Iixpc0Rpc2FibGVkOiI9PyJ9LGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt0aGlzLnNldEhlYWRpbmc9ZnVuY3Rpb24oYSl7dGhpcy5oZWFkaW5nPWF9fSxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2J8fGEud2FybigiYWNjb3JkaW9uLWdyb3VwIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLWFjY29yZGlvbi1ncm91cCBpbnN0ZWFkLiIpLGYuYWRkR3JvdXAoYyksYy5vcGVuQ2xhc3M9ZS5vcGVuQ2xhc3N8fCJwYW5lbC1vcGVuIixjLnBhbmVsQ2xhc3M9ZS5wYW5lbENsYXNzLGMuJHdhdGNoKCJpc09wZW4iLGZ1bmN0aW9uKGEpe2QudG9nZ2xlQ2xhc3MoYy5vcGVuQ2xhc3MsISFhKSxhJiZmLmNsb3NlT3RoZXJzKGMpfSksYy50b2dnbGVPcGVuPWZ1bmN0aW9uKGEpe2MuaXNEaXNhYmxlZHx8YSYmMzIhPT1hLndoaWNofHwoYy5pc09wZW49IWMuaXNPcGVuKX19fX1dKS5kaXJlY3RpdmUoImFjY29yZGlvbkhlYWRpbmciLFsiJGxvZyIsIiRhY2NvcmRpb25TdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3Jlc3RyaWN0OiJFQSIsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZToiIixyZXBsYWNlOiEwLHJlcXVpcmU6Il5hY2NvcmRpb25Hcm91cCIsbGluazpmdW5jdGlvbihjLGQsZSxmLGcpe2J8fGEud2FybigiYWNjb3JkaW9uLWhlYWRpbmcgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItYWNjb3JkaW9uLWhlYWRpbmcgaW5zdGVhZC4iKSxmLnNldEhlYWRpbmcoZyhjLGFuZ3VsYXIubm9vcCkpfX19XSkuZGlyZWN0aXZlKCJhY2NvcmRpb25UcmFuc2NsdWRlIixbIiRsb2ciLCIkYWNjb3JkaW9uU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntyZXF1aXJlOiJeYWNjb3JkaW9uR3JvdXAiLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7Ynx8YS53YXJuKCJhY2NvcmRpb24tdHJhbnNjbHVkZSBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1hY2NvcmRpb24tdHJhbnNjbHVkZSBpbnN0ZWFkLiIpLGMuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGZbZS5hY2NvcmRpb25UcmFuc2NsdWRlXX0sZnVuY3Rpb24oYSl7YSYmKGQuZmluZCgic3BhbiIpLmh0bWwoIiIpLGQuZmluZCgic3BhbiIpLmFwcGVuZChhKSl9KX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuYWxlcnQiLFtdKS5jb250cm9sbGVyKCJVaWJBbGVydENvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGF0dHJzIiwiJGludGVycG9sYXRlIiwiJHRpbWVvdXQiLGZ1bmN0aW9uKGEsYixjLGQpe2EuY2xvc2VhYmxlPSEhYi5jbG9zZTt2YXIgZT1hbmd1bGFyLmlzRGVmaW5lZChiLmRpc21pc3NPblRpbWVvdXQpP2MoYi5kaXNtaXNzT25UaW1lb3V0KShhLiRwYXJlbnQpOm51bGw7ZSYmZChmdW5jdGlvbigpe2EuY2xvc2UoKX0scGFyc2VJbnQoZSwxMCkpfV0pLmRpcmVjdGl2ZSgidWliQWxlcnQiLGZ1bmN0aW9uKCl7cmV0dXJue2NvbnRyb2xsZXI6IlVpYkFsZXJ0Q29udHJvbGxlciIsY29udHJvbGxlckFzOiJhbGVydCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL2FsZXJ0L2FsZXJ0Lmh0bWwifSx0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsc2NvcGU6e3R5cGU6IkAiLGNsb3NlOiImIn19fSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5hbGVydCIpLnZhbHVlKCIkYWxlcnRTdXBwcmVzc1dhcm5pbmciLCExKS5jb250cm9sbGVyKCJBbGVydENvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGF0dHJzIiwiJGNvbnRyb2xsZXIiLCIkbG9nIiwiJGFsZXJ0U3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIsYyxkLGUpe2V8fGQud2FybigiQWxlcnRDb250cm9sbGVyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgVWliQWxlcnRDb250cm9sbGVyIGluc3RlYWQuIiksYW5ndWxhci5leHRlbmQodGhpcyxjKCJVaWJBbGVydENvbnRyb2xsZXIiLHskc2NvcGU6YSwkYXR0cnM6Yn0pKX1dKS5kaXJlY3RpdmUoImFsZXJ0IixbIiRsb2ciLCIkYWxlcnRTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue2NvbnRyb2xsZXI6IkFsZXJ0Q29udHJvbGxlciIsY29udHJvbGxlckFzOiJhbGVydCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL2FsZXJ0L2FsZXJ0Lmh0bWwifSx0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsc2NvcGU6e3R5cGU6IkAiLGNsb3NlOiImIn0sbGluazpmdW5jdGlvbigpe2J8fGEud2FybigiYWxlcnQgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItYWxlcnQgaW5zdGVhZC4iKX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuYnV0dG9ucyIsW10pLmNvbnN0YW50KCJ1aWJCdXR0b25Db25maWciLHthY3RpdmVDbGFzczoiYWN0aXZlIix0b2dnbGVFdmVudDoiY2xpY2sifSkuY29udHJvbGxlcigiVWliQnV0dG9uc0NvbnRyb2xsZXIiLFsidWliQnV0dG9uQ29uZmlnIixmdW5jdGlvbihhKXt0aGlzLmFjdGl2ZUNsYXNzPWEuYWN0aXZlQ2xhc3N8fCJhY3RpdmUiLHRoaXMudG9nZ2xlRXZlbnQ9YS50b2dnbGVFdmVudHx8ImNsaWNrIn1dKS5kaXJlY3RpdmUoInVpYkJ0blJhZGlvIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlsidWliQnRuUmFkaW8iLCJuZ01vZGVsIl0sY29udHJvbGxlcjoiVWliQnV0dG9uc0NvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoiYnV0dG9ucyIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtiLmZpbmQoImlucHV0IikuY3NzKHtkaXNwbGF5OiJub25lIn0pLGYuJHJlbmRlcj1mdW5jdGlvbigpe2IudG9nZ2xlQ2xhc3MoZS5hY3RpdmVDbGFzcyxhbmd1bGFyLmVxdWFscyhmLiRtb2RlbFZhbHVlLGEuJGV2YWwoYy51aWJCdG5SYWRpbykpKX0sYi5vbihlLnRvZ2dsZUV2ZW50LGZ1bmN0aW9uKCl7aWYoIWMuZGlzYWJsZWQpe3ZhciBkPWIuaGFzQ2xhc3MoZS5hY3RpdmVDbGFzcyk7KCFkfHxhbmd1bGFyLmlzRGVmaW5lZChjLnVuY2hlY2thYmxlKSkmJmEuJGFwcGx5KGZ1bmN0aW9uKCl7Zi4kc2V0Vmlld1ZhbHVlKGQ/bnVsbDphLiRldmFsKGMudWliQnRuUmFkaW8pKSxmLiRyZW5kZXIoKX0pfX0pfX19KS5kaXJlY3RpdmUoInVpYkJ0bkNoZWNrYm94IixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlsidWliQnRuQ2hlY2tib3giLCJuZ01vZGVsIl0sY29udHJvbGxlcjoiVWliQnV0dG9uc0NvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoiYnV0dG9uIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gZyhjLmJ0bkNoZWNrYm94VHJ1ZSwhMCl9ZnVuY3Rpb24gZigpe3JldHVybiBnKGMuYnRuQ2hlY2tib3hGYWxzZSwhMSl9ZnVuY3Rpb24gZyhiLGMpe3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChiKT9hLiRldmFsKGIpOmN9dmFyIGg9ZFswXSxpPWRbMV07Yi5maW5kKCJpbnB1dCIpLmNzcyh7ZGlzcGxheToibm9uZSJ9KSxpLiRyZW5kZXI9ZnVuY3Rpb24oKXtiLnRvZ2dsZUNsYXNzKGguYWN0aXZlQ2xhc3MsYW5ndWxhci5lcXVhbHMoaS4kbW9kZWxWYWx1ZSxlKCkpKX0sYi5vbihoLnRvZ2dsZUV2ZW50LGZ1bmN0aW9uKCl7Yy5kaXNhYmxlZHx8YS4kYXBwbHkoZnVuY3Rpb24oKXtpLiRzZXRWaWV3VmFsdWUoYi5oYXNDbGFzcyhoLmFjdGl2ZUNsYXNzKT9mKCk6ZSgpKSxpLiRyZW5kZXIoKX0pfSl9fX0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuYnV0dG9ucyIpLnZhbHVlKCIkYnV0dG9uc1N1cHByZXNzV2FybmluZyIsITEpLmNvbnRyb2xsZXIoIkJ1dHRvbnNDb250cm9sbGVyIixbIiRjb250cm9sbGVyIiwiJGxvZyIsIiRidXR0b25zU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIsYyl7Y3x8Yi53YXJuKCJCdXR0b25zQ29udHJvbGxlciBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIFVpYkJ1dHRvbnNDb250cm9sbGVyIGluc3RlYWQuIiksYW5ndWxhci5leHRlbmQodGhpcyxhKCJVaWJCdXR0b25zQ29udHJvbGxlciIpKX1dKS5kaXJlY3RpdmUoImJ0blJhZGlvIixbIiRsb2ciLCIkYnV0dG9uc1N1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVxdWlyZTpbImJ0blJhZGlvIiwibmdNb2RlbCJdLGNvbnRyb2xsZXI6IkJ1dHRvbnNDb250cm9sbGVyIixjb250cm9sbGVyQXM6ImJ1dHRvbnMiLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7Ynx8YS53YXJuKCJidG4tcmFkaW8gaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItYnRuLXJhZGlvIGluc3RlYWQuIik7dmFyIGc9ZlswXSxoPWZbMV07ZC5maW5kKCJpbnB1dCIpLmNzcyh7ZGlzcGxheToibm9uZSJ9KSxoLiRyZW5kZXI9ZnVuY3Rpb24oKXtkLnRvZ2dsZUNsYXNzKGcuYWN0aXZlQ2xhc3MsYW5ndWxhci5lcXVhbHMoaC4kbW9kZWxWYWx1ZSxjLiRldmFsKGUuYnRuUmFkaW8pKSl9LGQuYmluZChnLnRvZ2dsZUV2ZW50LGZ1bmN0aW9uKCl7aWYoIWUuZGlzYWJsZWQpe3ZhciBhPWQuaGFzQ2xhc3MoZy5hY3RpdmVDbGFzcyk7KCFhfHxhbmd1bGFyLmlzRGVmaW5lZChlLnVuY2hlY2thYmxlKSkmJmMuJGFwcGx5KGZ1bmN0aW9uKCl7aC4kc2V0Vmlld1ZhbHVlKGE/bnVsbDpjLiRldmFsKGUuYnRuUmFkaW8pKSxoLiRyZW5kZXIoKX0pfX0pfX19XSkuZGlyZWN0aXZlKCJidG5DaGVja2JveCIsWyIkZG9jdW1lbnQiLCIkbG9nIiwiJGJ1dHRvbnNTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm57cmVxdWlyZTpbImJ0bkNoZWNrYm94IiwibmdNb2RlbCJdLGNvbnRyb2xsZXI6IkJ1dHRvbnNDb250cm9sbGVyIixjb250cm9sbGVyQXM6ImJ1dHRvbiIsbGluazpmdW5jdGlvbihkLGUsZixnKXtmdW5jdGlvbiBoKCl7cmV0dXJuIGooZi5idG5DaGVja2JveFRydWUsITApfWZ1bmN0aW9uIGkoKXtyZXR1cm4gaihmLmJ0bkNoZWNrYm94RmFsc2UsITEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz1kLiRldmFsKGEpO3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChjKT9jOmJ9Y3x8Yi53YXJuKCJidG4tY2hlY2tib3ggaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItYnRuLWNoZWNrYm94IGluc3RlYWQuIik7dmFyIGs9Z1swXSxsPWdbMV07ZS5maW5kKCJpbnB1dCIpLmNzcyh7ZGlzcGxheToibm9uZSJ9KSxsLiRyZW5kZXI9ZnVuY3Rpb24oKXtlLnRvZ2dsZUNsYXNzKGsuYWN0aXZlQ2xhc3MsYW5ndWxhci5lcXVhbHMobC4kbW9kZWxWYWx1ZSxoKCkpKX0sZS5iaW5kKGsudG9nZ2xlRXZlbnQsZnVuY3Rpb24oKXtmLmRpc2FibGVkfHxkLiRhcHBseShmdW5jdGlvbigpe2wuJHNldFZpZXdWYWx1ZShlLmhhc0NsYXNzKGsuYWN0aXZlQ2xhc3MpP2koKTpoKCkpLGwuJHJlbmRlcigpfSl9KSxlLm9uKCJrZXlwcmVzcyIsZnVuY3Rpb24oYil7Zi5kaXNhYmxlZHx8MzIhPT1iLndoaWNofHxhWzBdLmFjdGl2ZUVsZW1lbnQhPT1lWzBdfHxkLiRhcHBseShmdW5jdGlvbigpe2wuJHNldFZpZXdWYWx1ZShlLmhhc0NsYXNzKGsuYWN0aXZlQ2xhc3MpP2koKTpoKCkpLGwuJHJlbmRlcigpfSl9KX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAuY2Fyb3VzZWwiLFtdKS5jb250cm9sbGVyKCJVaWJDYXJvdXNlbENvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCIkaW50ZXJ2YWwiLCIkYW5pbWF0ZSIsZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShiLGMsZSl7c3x8KGFuZ3VsYXIuZXh0ZW5kKGIse2RpcmVjdGlvbjplLGFjdGl2ZTohMH0pLGFuZ3VsYXIuZXh0ZW5kKG0uY3VycmVudFNsaWRlfHx7fSx7ZGlyZWN0aW9uOmUsYWN0aXZlOiExfSksZC5lbmFibGVkKCkmJiFhLm5vVHJhbnNpdGlvbiYmIWEuJGN1cnJlbnRUcmFuc2l0aW9uJiZiLiRlbGVtZW50JiZtLnNsaWRlcy5sZW5ndGg+MSYmKGIuJGVsZW1lbnQuZGF0YShxLGIuZGlyZWN0aW9uKSxtLmN1cnJlbnRTbGlkZSYmbS5jdXJyZW50U2xpZGUuJGVsZW1lbnQmJm0uY3VycmVudFNsaWRlLiRlbGVtZW50LmRhdGEocSxiLmRpcmVjdGlvbiksYS4kY3VycmVudFRyYW5zaXRpb249ITAsbz9kLm9uKCJhZGRDbGFzcyIsYi4kZWxlbWVudCxmdW5jdGlvbihiLGMpeyJjbG9zZSI9PT1jJiYoYS4kY3VycmVudFRyYW5zaXRpb249bnVsbCxkLm9mZigiYWRkQ2xhc3MiLGIpKX0pOmIuJGVsZW1lbnQub25lKCIkYW5pbWF0ZTpjbG9zZSIsZnVuY3Rpb24oKXthLiRjdXJyZW50VHJhbnNpdGlvbj1udWxsfSkpLG0uY3VycmVudFNsaWRlPWIscj1jLGcoKSl9ZnVuY3Rpb24gZihhKXtpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG5bYV0uaW5kZXgpKXJldHVybiBuW2FdO3ZhciBiO24ubGVuZ3RoO2ZvcihiPTA7YjxuLmxlbmd0aDsrK2IpaWYobltiXS5pbmRleD09YSlyZXR1cm4gbltiXX1mdW5jdGlvbiBnKCl7aCgpO3ZhciBiPSthLmludGVydmFsOyFpc05hTihiKSYmYj4wJiYoaz1jKGksYikpfWZ1bmN0aW9uIGgoKXtrJiYoYy5jYW5jZWwoayksaz1udWxsKX1mdW5jdGlvbiBpKCl7dmFyIGI9K2EuaW50ZXJ2YWw7bCYmIWlzTmFOKGIpJiZiPjAmJm4ubGVuZ3RoP2EubmV4dCgpOmEucGF1c2UoKX1mdW5jdGlvbiBqKGIpe2IubGVuZ3RofHwoYS4kY3VycmVudFRyYW5zaXRpb249bnVsbCl9dmFyIGssbCxtPXRoaXMsbj1tLnNsaWRlcz1hLnNsaWRlcz1bXSxvPWFuZ3VsYXIudmVyc2lvbi5taW5vcj49NCxwPSJ1aWItbm9UcmFuc2l0aW9uIixxPSJ1aWItc2xpZGVEaXJlY3Rpb24iLHI9LTE7bS5jdXJyZW50U2xpZGU9bnVsbDt2YXIgcz0hMTttLnNlbGVjdD1hLnNlbGVjdD1mdW5jdGlvbihiLGMpe3ZhciBkPWEuaW5kZXhPZlNsaWRlKGIpO3ZvaWQgMD09PWMmJihjPWQ+bS5nZXRDdXJyZW50SW5kZXgoKT8ibmV4dCI6InByZXYiKSxiJiZiIT09bS5jdXJyZW50U2xpZGUmJiFhLiRjdXJyZW50VHJhbnNpdGlvbiYmZShiLGQsYyl9LGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtzPSEwfSksbS5nZXRDdXJyZW50SW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gbS5jdXJyZW50U2xpZGUmJmFuZ3VsYXIuaXNEZWZpbmVkKG0uY3VycmVudFNsaWRlLmluZGV4KT8rbS5jdXJyZW50U2xpZGUuaW5kZXg6cn0sYS5pbmRleE9mU2xpZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKGEuaW5kZXgpPythLmluZGV4Om4uaW5kZXhPZihhKX0sYS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGI9KG0uZ2V0Q3VycmVudEluZGV4KCkrMSklbi5sZW5ndGg7cmV0dXJuIDA9PT1iJiZhLm5vV3JhcCgpP3ZvaWQgYS5wYXVzZSgpOm0uc2VsZWN0KGYoYiksIm5leHQiKX0sYS5wcmV2PWZ1bmN0aW9uKCl7dmFyIGI9bS5nZXRDdXJyZW50SW5kZXgoKS0xPDA/bi5sZW5ndGgtMTptLmdldEN1cnJlbnRJbmRleCgpLTE7cmV0dXJuIGEubm9XcmFwKCkmJmI9PT1uLmxlbmd0aC0xP3ZvaWQgYS5wYXVzZSgpOm0uc2VsZWN0KGYoYiksInByZXYiKX0sYS5pc0FjdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gbS5jdXJyZW50U2xpZGU9PT1hfSxhLiR3YXRjaCgiaW50ZXJ2YWwiLGcpLGEuJHdhdGNoQ29sbGVjdGlvbigic2xpZGVzIixqKSxhLiRvbigiJGRlc3Ryb3kiLGgpLGEucGxheT1mdW5jdGlvbigpe2x8fChsPSEwLGcoKSl9LGEucGF1c2U9ZnVuY3Rpb24oKXthLm5vUGF1c2V8fChsPSExLGgoKSl9LG0uYWRkU2xpZGU9ZnVuY3Rpb24oYixjKXtiLiRlbGVtZW50PWMsbi5wdXNoKGIpLDE9PT1uLmxlbmd0aHx8Yi5hY3RpdmU/KG0uc2VsZWN0KG5bbi5sZW5ndGgtMV0pLDE9PT1uLmxlbmd0aCYmYS5wbGF5KCkpOmIuYWN0aXZlPSExfSxtLnJlbW92ZVNsaWRlPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuaXNEZWZpbmVkKGEuaW5kZXgpJiZuLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4rYS5pbmRleD4rYi5pbmRleH0pO3ZhciBiPW4uaW5kZXhPZihhKTtuLnNwbGljZShiLDEpLG4ubGVuZ3RoPjAmJmEuYWN0aXZlP2I+PW4ubGVuZ3RoP20uc2VsZWN0KG5bYi0xXSk6bS5zZWxlY3QobltiXSk6cj5iJiZyLS0sMD09PW4ubGVuZ3RoJiYobS5jdXJyZW50U2xpZGU9bnVsbCl9LGEuJHdhdGNoKCJub1RyYW5zaXRpb24iLGZ1bmN0aW9uKGEpe2IuZGF0YShwLGEpfSl9XSkuZGlyZWN0aXZlKCJ1aWJDYXJvdXNlbCIsW2Z1bmN0aW9uKCl7cmV0dXJue3RyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCxjb250cm9sbGVyOiJVaWJDYXJvdXNlbENvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoiY2Fyb3VzZWwiLHJlcXVpcmU6ImNhcm91c2VsIix0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbCJ9LHNjb3BlOntpbnRlcnZhbDoiPSIsbm9UcmFuc2l0aW9uOiI9Iixub1BhdXNlOiI9Iixub1dyYXA6IiYifX19XSkuZGlyZWN0aXZlKCJ1aWJTbGlkZSIsZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZToiXnVpYkNhcm91c2VsIixyZXN0cmljdDoiRUEiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbCJ9LHNjb3BlOnthY3RpdmU6Ij0/IixhY3R1YWw6Ij0/IixpbmRleDoiPT8ifSxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkU2xpZGUoYSxiKSxhLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7ZC5yZW1vdmVTbGlkZShhKX0pLGEuJHdhdGNoKCJhY3RpdmUiLGZ1bmN0aW9uKGIpe2ImJmQuc2VsZWN0KGEpfSl9fX0pLmFuaW1hdGlvbigiLml0ZW0iLFsiJGluamVjdG9yIiwiJGFuaW1hdGUiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7YS5yZW1vdmVDbGFzcyhiKSxjJiZjKCl9dmFyIGQ9InVpYi1ub1RyYW5zaXRpb24iLGU9InVpYi1zbGlkZURpcmVjdGlvbiIsZj1udWxsO3JldHVybiBhLmhhcygiJGFuaW1hdGVDc3MiKSYmKGY9YS5nZXQoIiRhbmltYXRlQ3NzIikpLHtiZWZvcmVBZGRDbGFzczpmdW5jdGlvbihhLGcsaCl7aWYoImFjdGl2ZSI9PWcmJmEucGFyZW50KCkmJmEucGFyZW50KCkucGFyZW50KCkmJiFhLnBhcmVudCgpLnBhcmVudCgpLmRhdGEoZCkpe3ZhciBpPSExLGo9YS5kYXRhKGUpLGs9Im5leHQiPT1qPyJsZWZ0IjoicmlnaHQiLGw9Yy5iaW5kKHRoaXMsYSxrKyIgIitqLGgpO3JldHVybiBhLmFkZENsYXNzKGopLGY/ZihhLHthZGRDbGFzczprfSkuc3RhcnQoKS5kb25lKGwpOmIuYWRkQ2xhc3MoYSxrKS50aGVuKGZ1bmN0aW9uKCl7aXx8bCgpLGgoKX0pLGZ1bmN0aW9uKCl7aT0hMH19aCgpfSxiZWZvcmVSZW1vdmVDbGFzczpmdW5jdGlvbihhLGcsaCl7aWYoImFjdGl2ZSI9PT1nJiZhLnBhcmVudCgpJiZhLnBhcmVudCgpLnBhcmVudCgpJiYhYS5wYXJlbnQoKS5wYXJlbnQoKS5kYXRhKGQpKXt2YXIgaT0hMSxqPWEuZGF0YShlKSxrPSJuZXh0Ij09aj8ibGVmdCI6InJpZ2h0IixsPWMuYmluZCh0aGlzLGEsayxoKTtyZXR1cm4gZj9mKGEse2FkZENsYXNzOmt9KS5zdGFydCgpLmRvbmUobCk6Yi5hZGRDbGFzcyhhLGspLnRoZW4oZnVuY3Rpb24oKXtpfHxsKCksaCgpfSksZnVuY3Rpb24oKXtpPSEwfX1oKCl9fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLmNhcm91c2VsIikudmFsdWUoIiRjYXJvdXNlbFN1cHByZXNzV2FybmluZyIsITEpLmNvbnRyb2xsZXIoIkNhcm91c2VsQ29udHJvbGxlciIsWyIkc2NvcGUiLCIkZWxlbWVudCIsIiRjb250cm9sbGVyIiwiJGxvZyIsIiRjYXJvdXNlbFN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCxlKXtlfHxkLndhcm4oIkNhcm91c2VsQ29udHJvbGxlciBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIFVpYkNhcm91c2VsQ29udHJvbGxlciBpbnN0ZWFkLiIpLGFuZ3VsYXIuZXh0ZW5kKHRoaXMsYygiVWliQ2Fyb3VzZWxDb250cm9sbGVyIix7JHNjb3BlOmEsJGVsZW1lbnQ6Yn0pKX1dKS5kaXJlY3RpdmUoImNhcm91c2VsIixbIiRsb2ciLCIkY2Fyb3VzZWxTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3RyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCxjb250cm9sbGVyOiJDYXJvdXNlbENvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoiY2Fyb3VzZWwiLHJlcXVpcmU6ImNhcm91c2VsIix0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbCJ9LHNjb3BlOntpbnRlcnZhbDoiPSIsbm9UcmFuc2l0aW9uOiI9Iixub1BhdXNlOiI9Iixub1dyYXA6IiYifSxsaW5rOmZ1bmN0aW9uKCl7Ynx8YS53YXJuKCJjYXJvdXNlbCBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1jYXJvdXNlbCBpbnN0ZWFkLiIpfX19XSkuZGlyZWN0aXZlKCJzbGlkZSIsWyIkbG9nIiwiJGNhcm91c2VsU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntyZXF1aXJlOiJeY2Fyb3VzZWwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbCJ9LHNjb3BlOnthY3RpdmU6Ij0/IixhY3R1YWw6Ij0/IixpbmRleDoiPT8ifSxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2J8fGEud2Fybigic2xpZGUgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItc2xpZGUgaW5zdGVhZC4iKSxmLmFkZFNsaWRlKGMsZCksYy4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2YucmVtb3ZlU2xpZGUoYyl9KSxjLiR3YXRjaCgiYWN0aXZlIixmdW5jdGlvbihhKXthJiZmLnNlbGVjdChjKX0pfX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyIixbXSkuc2VydmljZSgidWliRGF0ZVBhcnNlciIsWyIkbG9nIiwiJGxvY2FsZSIsIm9yZGVyQnlGaWx0ZXIiLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3ZhciBiPVtdLGQ9YS5zcGxpdCgiIik7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChnLGZ1bmN0aW9uKGMsZSl7dmFyIGY9YS5pbmRleE9mKGUpO2lmKGY+LTEpe2E9YS5zcGxpdCgiIiksZFtmXT0iKCIrYy5yZWdleCsiKSIsYVtmXT0iJCI7Zm9yKHZhciBnPWYrMSxoPWYrZS5sZW5ndGg7aD5nO2crKylkW2ddPSIiLGFbZ109IiQiO2E9YS5qb2luKCIiKSxiLnB1c2goe2luZGV4OmYsYXBwbHk6Yy5hcHBseX0pfX0pLHtyZWdleDpuZXcgUmVnRXhwKCJeIitkLmpvaW4oIiIpKyIkIiksbWFwOmMoYiwiaW5kZXgiKX19ZnVuY3Rpb24gZShhLGIsYyl7cmV0dXJuIDE+Yz8hMToxPT09YiYmYz4yOD8yOT09PWMmJihhJTQ9PT0wJiZhJTEwMCE9PTB8fGElNDAwPT09MCk6Mz09PWJ8fDU9PT1ifHw4PT09Ynx8MTA9PT1iPzMxPmM6ITB9dmFyIGYsZyxoPS9bXFxcXlwkXCpcK1w/XHxcW1xdXChcKVwuXHtcfV0vZzt0aGlzLmluaXQ9ZnVuY3Rpb24oKXtmPWIuaWQsdGhpcy5wYXJzZXJzPXt9LGc9e3l5eXk6e3JlZ2V4OiJcXGR7NH0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMueWVhcj0rYX19LHl5OntyZWdleDoiXFxkezJ9IixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2ErMmUzfX0seTp7cmVnZXg6IlxcZHsxLDR9IixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2F9fSxNTU1NOntyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguam9pbigifCIpLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9Yi5EQVRFVElNRV9GT1JNQVRTLk1PTlRILmluZGV4T2YoYSl9fSxNTU06e3JlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5TSE9SVE1PTlRILmpvaW4oInwiKSxhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1vbnRoPWIuREFURVRJTUVfRk9STUFUUy5TSE9SVE1PTlRILmluZGV4T2YoYSl9fSxNTTp7cmVnZXg6IjBbMS05XXwxWzAtMl0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9YS0xfX0sTTp7cmVnZXg6IlsxLTldfDFbMC0yXSIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5tb250aD1hLTF9fSxkZDp7cmVnZXg6IlswLTJdWzAtOV17MX18M1swLTFdezF9IixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmRhdGU9K2F9fSxkOntyZWdleDoiWzEtMl0/WzAtOV17MX18M1swLTFdezF9IixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmRhdGU9K2F9fSxFRUVFOntyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuREFZLmpvaW4oInwiKX0sRUVFOntyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlREQVkuam9pbigifCIpfSxISDp7cmVnZXg6Iig/OjB8MSlbMC05XXwyWzAtM10iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuaG91cnM9K2F9fSxoaDp7cmVnZXg6IjBbMC05XXwxWzAtMl0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuaG91cnM9K2F9fSxIOntyZWdleDoiMT9bMC05XXwyWzAtM10iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuaG91cnM9K2F9fSxoOntyZWdleDoiWzAtOV18MVswLTJdIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmhvdXJzPSthfX0sbW06e3JlZ2V4OiJbMC01XVswLTldIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1pbnV0ZXM9K2F9fSxtOntyZWdleDoiWzAtOV18WzEtNV1bMC05XSIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5taW51dGVzPSthfX0sc3NzOntyZWdleDoiWzAtOV1bMC05XVswLTldIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1pbGxpc2Vjb25kcz0rYX19LHNzOntyZWdleDoiWzAtNV1bMC05XSIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5zZWNvbmRzPSthfX0sczp7cmVnZXg6IlswLTldfFsxLTVdWzAtOV0iLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuc2Vjb25kcz0rYX19LGE6e3JlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5BTVBNUy5qb2luKCJ8IiksYXBwbHk6ZnVuY3Rpb24oYSl7MTI9PT10aGlzLmhvdXJzJiYodGhpcy5ob3Vycz0wKSwiUE0iPT09YSYmKHRoaXMuaG91cnMrPTEyKX19fX0sdGhpcy5pbml0KCksdGhpcy5wYXJzZT1mdW5jdGlvbihjLGcsaSl7aWYoIWFuZ3VsYXIuaXNTdHJpbmcoYyl8fCFnKXJldHVybiBjO2c9Yi5EQVRFVElNRV9GT1JNQVRTW2ddfHxnLGc9Zy5yZXBsYWNlKGgsIlxcJCYiKSxiLmlkIT09ZiYmdGhpcy5pbml0KCksdGhpcy5wYXJzZXJzW2ddfHwodGhpcy5wYXJzZXJzW2ddPWQoZykpO3ZhciBqPXRoaXMucGFyc2Vyc1tnXSxrPWoucmVnZXgsbD1qLm1hcCxtPWMubWF0Y2goayk7aWYobSYmbS5sZW5ndGgpe3ZhciBuLG87YW5ndWxhci5pc0RhdGUoaSkmJiFpc05hTihpLmdldFRpbWUoKSk/bj17eWVhcjppLmdldEZ1bGxZZWFyKCksbW9udGg6aS5nZXRNb250aCgpLGRhdGU6aS5nZXREYXRlKCksaG91cnM6aS5nZXRIb3VycygpLG1pbnV0ZXM6aS5nZXRNaW51dGVzKCksc2Vjb25kczppLmdldFNlY29uZHMoKSxtaWxsaXNlY29uZHM6aS5nZXRNaWxsaXNlY29uZHMoKX06KGkmJmEud2FybigiZGF0ZXBhcnNlcjoiLCJiYXNlRGF0ZSBpcyBub3QgYSB2YWxpZCBkYXRlIiksbj17eWVhcjoxOTAwLG1vbnRoOjAsZGF0ZToxLGhvdXJzOjAsbWludXRlczowLHNlY29uZHM6MCxtaWxsaXNlY29uZHM6MH0pO2Zvcih2YXIgcD0xLHE9bS5sZW5ndGg7cT5wO3ArKyl7dmFyIHI9bFtwLTFdO3IuYXBwbHkmJnIuYXBwbHkuY2FsbChuLG1bcF0pfXJldHVybiBlKG4ueWVhcixuLm1vbnRoLG4uZGF0ZSkmJihhbmd1bGFyLmlzRGF0ZShpKSYmIWlzTmFOKGkuZ2V0VGltZSgpKT8obz1uZXcgRGF0ZShpKSxvLnNldEZ1bGxZZWFyKG4ueWVhcixuLm1vbnRoLG4uZGF0ZSxuLmhvdXJzLG4ubWludXRlcyxuLnNlY29uZHMsbi5taWxsaXNlY29uZHN8fDApKTpvPW5ldyBEYXRlKG4ueWVhcixuLm1vbnRoLG4uZGF0ZSxuLmhvdXJzLG4ubWludXRlcyxuLnNlY29uZHMsbi5taWxsaXNlY29uZHN8fDApKSxvfX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyIikudmFsdWUoIiRkYXRlUGFyc2VyU3VwcHJlc3NXYXJuaW5nIiwhMSkuc2VydmljZSgiZGF0ZVBhcnNlciIsWyIkbG9nIiwiJGRhdGVQYXJzZXJTdXBwcmVzc1dhcm5pbmciLCJ1aWJEYXRlUGFyc2VyIixmdW5jdGlvbihhLGIsYyl7Ynx8YS53YXJuKCJkYXRlUGFyc2VyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliRGF0ZVBhcnNlciBpbnN0ZWFkLiIpLGFuZ3VsYXIuZXh0ZW5kKHRoaXMsYyl9XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5wb3NpdGlvbiIsW10pLmZhY3RvcnkoIiR1aWJQb3NpdGlvbiIsWyIkZG9jdW1lbnQiLCIkd2luZG93IixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxjKXtyZXR1cm4gYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGVbY106Yi5nZXRDb21wdXRlZFN0eWxlP2IuZ2V0Q29tcHV0ZWRTdHlsZShhKVtjXTphLnN0eWxlW2NdfWZ1bmN0aW9uIGQoYSl7cmV0dXJuInN0YXRpYyI9PT0oYyhhLCJwb3NpdGlvbiIpfHwic3RhdGljIil9dmFyIGU9ZnVuY3Rpb24oYil7Zm9yKHZhciBjPWFbMF0sZT1iLm9mZnNldFBhcmVudHx8YztlJiZlIT09YyYmZChlKTspZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8Y307cmV0dXJue3Bvc2l0aW9uOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMub2Zmc2V0KGIpLGQ9e3RvcDowLGxlZnQ6MH0sZj1lKGJbMF0pO2YhPWFbMF0mJihkPXRoaXMub2Zmc2V0KGFuZ3VsYXIuZWxlbWVudChmKSksZC50b3ArPWYuY2xpZW50VG9wLWYuc2Nyb2xsVG9wLGQubGVmdCs9Zi5jbGllbnRMZWZ0LWYuc2Nyb2xsTGVmdCk7dmFyIGc9YlswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57d2lkdGg6Zy53aWR0aHx8Yi5wcm9wKCJvZmZzZXRXaWR0aCIpLGhlaWdodDpnLmhlaWdodHx8Yi5wcm9wKCJvZmZzZXRIZWlnaHQiKSx0b3A6Yy50b3AtZC50b3AsbGVmdDpjLmxlZnQtZC5sZWZ0fX0sb2Zmc2V0OmZ1bmN0aW9uKGMpe3ZhciBkPWNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3dpZHRoOmQud2lkdGh8fGMucHJvcCgib2Zmc2V0V2lkdGgiKSxoZWlnaHQ6ZC5oZWlnaHR8fGMucHJvcCgib2Zmc2V0SGVpZ2h0IiksdG9wOmQudG9wKyhiLnBhZ2VZT2Zmc2V0fHxhWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApLGxlZnQ6ZC5sZWZ0KyhiLnBhZ2VYT2Zmc2V0fHxhWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KX19LHBvc2l0aW9uRWxlbWVudHM6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGgsaT1jLnNwbGl0KCItIiksaj1pWzBdLGs9aVsxXXx8ImNlbnRlciI7ZT1kP3RoaXMub2Zmc2V0KGEpOnRoaXMucG9zaXRpb24oYSksZj1iLnByb3AoIm9mZnNldFdpZHRoIiksZz1iLnByb3AoIm9mZnNldEhlaWdodCIpO3ZhciBsPXtjZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZS5sZWZ0K2Uud2lkdGgvMi1mLzJ9LGxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5sZWZ0fSxyaWdodDpmdW5jdGlvbigpe3JldHVybiBlLmxlZnQrZS53aWR0aH19LG09e2NlbnRlcjpmdW5jdGlvbigpe3JldHVybiBlLnRvcCtlLmhlaWdodC8yLWcvMn0sdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIGUudG9wfSxib3R0b206ZnVuY3Rpb24oKXtyZXR1cm4gZS50b3ArZS5oZWlnaHR9fTtzd2l0Y2goail7Y2FzZSJyaWdodCI6aD17dG9wOm1ba10oKSxsZWZ0Omxbal0oKX07YnJlYWs7Y2FzZSJsZWZ0IjpoPXt0b3A6bVtrXSgpLGxlZnQ6ZS5sZWZ0LWZ9O2JyZWFrO2Nhc2UiYm90dG9tIjpoPXt0b3A6bVtqXSgpLGxlZnQ6bFtrXSgpfTticmVhaztkZWZhdWx0Omg9e3RvcDplLnRvcC1nLGxlZnQ6bFtrXSgpfX1yZXR1cm4gaH19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAucG9zaXRpb24iKS52YWx1ZSgiJHBvc2l0aW9uU3VwcHJlc3NXYXJuaW5nIiwhMSkuc2VydmljZSgiJHBvc2l0aW9uIixbIiRsb2ciLCIkcG9zaXRpb25TdXBwcmVzc1dhcm5pbmciLCIkdWliUG9zaXRpb24iLGZ1bmN0aW9uKGEsYixjKXtifHxhLndhcm4oIiRwb3NpdGlvbiBpcyBub3cgZGVwcmVjYXRlZC4gVXNlICR1aWJQb3NpdGlvbiBpbnN0ZWFkLiIpLGFuZ3VsYXIuZXh0ZW5kKHRoaXMsYyl9XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kYXRlcGlja2VyIixbInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyIiwidWkuYm9vdHN0cmFwLnBvc2l0aW9uIl0pLnZhbHVlKCIkZGF0ZXBpY2tlclN1cHByZXNzRXJyb3IiLCExKS5jb25zdGFudCgidWliRGF0ZXBpY2tlckNvbmZpZyIse2Zvcm1hdERheToiZGQiLGZvcm1hdE1vbnRoOiJNTU1NIixmb3JtYXRZZWFyOiJ5eXl5Iixmb3JtYXREYXlIZWFkZXI6IkVFRSIsZm9ybWF0RGF5VGl0bGU6Ik1NTU0geXl5eSIsZm9ybWF0TW9udGhUaXRsZToieXl5eSIsZGF0ZXBpY2tlck1vZGU6ImRheSIsbWluTW9kZToiZGF5IixtYXhNb2RlOiJ5ZWFyIixzaG93V2Vla3M6ITAsc3RhcnRpbmdEYXk6MCx5ZWFyUmFuZ2U6MjAsbWluRGF0ZTpudWxsLG1heERhdGU6bnVsbCxzaG9ydGN1dFByb3BhZ2F0aW9uOiExfSkuY29udHJvbGxlcigiVWliRGF0ZXBpY2tlckNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGF0dHJzIiwiJHBhcnNlIiwiJGludGVycG9sYXRlIiwiJGxvZyIsImRhdGVGaWx0ZXIiLCJ1aWJEYXRlcGlja2VyQ29uZmlnIiwiJGRhdGVwaWNrZXJTdXBwcmVzc0Vycm9yIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBpPXRoaXMsaj17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9O3RoaXMubW9kZXM9WyJkYXkiLCJtb250aCIsInllYXIiXSxhbmd1bGFyLmZvckVhY2goWyJmb3JtYXREYXkiLCJmb3JtYXRNb250aCIsImZvcm1hdFllYXIiLCJmb3JtYXREYXlIZWFkZXIiLCJmb3JtYXREYXlUaXRsZSIsImZvcm1hdE1vbnRoVGl0bGUiLCJzaG93V2Vla3MiLCJzdGFydGluZ0RheSIsInllYXJSYW5nZSIsInNob3J0Y3V0UHJvcGFnYXRpb24iXSxmdW5jdGlvbihjLGUpe2lbY109YW5ndWxhci5pc0RlZmluZWQoYltjXSk/Nj5lP2QoYltjXSkoYS4kcGFyZW50KTphLiRwYXJlbnQuJGV2YWwoYltjXSk6Z1tjXX0pLGFuZ3VsYXIuZm9yRWFjaChbIm1pbkRhdGUiLCJtYXhEYXRlIl0sZnVuY3Rpb24oZCl7YltkXT9hLiRwYXJlbnQuJHdhdGNoKGMoYltkXSksZnVuY3Rpb24oYSl7aVtkXT1hP25ldyBEYXRlKGEpOm51bGwsaS5yZWZyZXNoVmlldygpfSk6aVtkXT1nW2RdP25ldyBEYXRlKGdbZF0pOm51bGx9KSxhbmd1bGFyLmZvckVhY2goWyJtaW5Nb2RlIiwibWF4TW9kZSJdLGZ1bmN0aW9uKGQpe2JbZF0/YS4kcGFyZW50LiR3YXRjaChjKGJbZF0pLGZ1bmN0aW9uKGMpe2lbZF09YW5ndWxhci5pc0RlZmluZWQoYyk/YzpiW2RdLGFbZF09aVtkXSwoIm1pbk1vZGUiPT1kJiZpLm1vZGVzLmluZGV4T2YoYS5kYXRlcGlja2VyTW9kZSk8aS5tb2Rlcy5pbmRleE9mKGlbZF0pfHwibWF4TW9kZSI9PWQmJmkubW9kZXMuaW5kZXhPZihhLmRhdGVwaWNrZXJNb2RlKT5pLm1vZGVzLmluZGV4T2YoaVtkXSkpJiYoYS5kYXRlcGlja2VyTW9kZT1pW2RdKX0pOihpW2RdPWdbZF18fG51bGwsYVtkXT1pW2RdKX0pLGEuZGF0ZXBpY2tlck1vZGU9YS5kYXRlcGlja2VyTW9kZXx8Zy5kYXRlcGlja2VyTW9kZSxhLnVuaXF1ZUlkPSJkYXRlcGlja2VyLSIrYS4kaWQrIi0iK01hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpLGFuZ3VsYXIuaXNEZWZpbmVkKGIuaW5pdERhdGUpPyh0aGlzLmFjdGl2ZURhdGU9YS4kcGFyZW50LiRldmFsKGIuaW5pdERhdGUpfHxuZXcgRGF0ZSxhLiRwYXJlbnQuJHdhdGNoKGIuaW5pdERhdGUsZnVuY3Rpb24oYSl7YSYmKGouJGlzRW1wdHkoai4kbW9kZWxWYWx1ZSl8fGouJGludmFsaWQpJiYoaS5hY3RpdmVEYXRlPWEsaS5yZWZyZXNoVmlldygpKX0pKTp0aGlzLmFjdGl2ZURhdGU9bmV3IERhdGUsYS5pc0FjdGl2ZT1mdW5jdGlvbihiKXtyZXR1cm4gMD09PWkuY29tcGFyZShiLmRhdGUsaS5hY3RpdmVEYXRlKT8oYS5hY3RpdmVEYXRlSWQ9Yi51aWQsITApOiExfSx0aGlzLmluaXQ9ZnVuY3Rpb24oYSl7aj1hLGouJHJlbmRlcj1mdW5jdGlvbigpe2kucmVuZGVyKCl9fSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2lmKGouJHZpZXdWYWx1ZSl7dmFyIGE9bmV3IERhdGUoai4kdmlld1ZhbHVlKSxiPSFpc05hTihhKTtiP3RoaXMuYWN0aXZlRGF0ZT1hOmh8fGUuZXJyb3IoJ0RhdGVwaWNrZXIgZGlyZWN0aXZlOiAibmctbW9kZWwiIHZhbHVlIG11c3QgYmUgYSBEYXRlIG9iamVjdCwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDAxLjAxLjE5NzAgb3IgYSBzdHJpbmcgcmVwcmVzZW50aW5nIGFuIFJGQzI4MjIgb3IgSVNPIDg2MDEgZGF0ZS4nKX10aGlzLnJlZnJlc2hWaWV3KCl9LHRoaXMucmVmcmVzaFZpZXc9ZnVuY3Rpb24oKXtpZih0aGlzLmVsZW1lbnQpe3RoaXMuX3JlZnJlc2hWaWV3KCk7dmFyIGE9ai4kdmlld1ZhbHVlP25ldyBEYXRlKGouJHZpZXdWYWx1ZSk6bnVsbDtqLiRzZXRWYWxpZGl0eSgiZGF0ZURpc2FibGVkIiwhYXx8dGhpcy5lbGVtZW50JiYhdGhpcy5pc0Rpc2FibGVkKGEpKX19LHRoaXMuY3JlYXRlRGF0ZU9iamVjdD1mdW5jdGlvbihhLGIpe3ZhciBjPWouJHZpZXdWYWx1ZT9uZXcgRGF0ZShqLiR2aWV3VmFsdWUpOm51bGw7cmV0dXJue2RhdGU6YSxsYWJlbDpmKGEsYiksc2VsZWN0ZWQ6YyYmMD09PXRoaXMuY29tcGFyZShhLGMpLGRpc2FibGVkOnRoaXMuaXNEaXNhYmxlZChhKSxjdXJyZW50OjA9PT10aGlzLmNvbXBhcmUoYSxuZXcgRGF0ZSksY3VzdG9tQ2xhc3M6dGhpcy5jdXN0b21DbGFzcyhhKX19LHRoaXMuaXNEaXNhYmxlZD1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5taW5EYXRlJiZ0aGlzLmNvbXBhcmUoYyx0aGlzLm1pbkRhdGUpPDB8fHRoaXMubWF4RGF0ZSYmdGhpcy5jb21wYXJlKGMsdGhpcy5tYXhEYXRlKT4wfHxiLmRhdGVEaXNhYmxlZCYmYS5kYXRlRGlzYWJsZWQoe2RhdGU6Yyxtb2RlOmEuZGF0ZXBpY2tlck1vZGV9KX0sdGhpcy5jdXN0b21DbGFzcz1mdW5jdGlvbihiKXtyZXR1cm4gYS5jdXN0b21DbGFzcyh7ZGF0ZTpiLG1vZGU6YS5kYXRlcGlja2VyTW9kZX0pfSx0aGlzLnNwbGl0PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2EubGVuZ3RoPjA7KWMucHVzaChhLnNwbGljZSgwLGIpKTtyZXR1cm4gY30sYS5zZWxlY3Q9ZnVuY3Rpb24oYil7aWYoYS5kYXRlcGlja2VyTW9kZT09PWkubWluTW9kZSl7dmFyIGM9ai4kdmlld1ZhbHVlP25ldyBEYXRlKGouJHZpZXdWYWx1ZSk6bmV3IERhdGUoMCwwLDAsMCwwLDAsMCk7Yy5zZXRGdWxsWWVhcihiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpLGIuZ2V0RGF0ZSgpKSxqLiRzZXRWaWV3VmFsdWUoYyksai4kcmVuZGVyKCl9ZWxzZSBpLmFjdGl2ZURhdGU9YixhLmRhdGVwaWNrZXJNb2RlPWkubW9kZXNbaS5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpLTFdfSxhLm1vdmU9ZnVuY3Rpb24oYSl7dmFyIGI9aS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkrYSooaS5zdGVwLnllYXJzfHwwKSxjPWkuYWN0aXZlRGF0ZS5nZXRNb250aCgpK2EqKGkuc3RlcC5tb250aHN8fDApO2kuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihiLGMsMSksaS5yZWZyZXNoVmlldygpfSxhLnRvZ2dsZU1vZGU9ZnVuY3Rpb24oYil7Yj1ifHwxLGEuZGF0ZXBpY2tlck1vZGU9PT1pLm1heE1vZGUmJjE9PT1ifHxhLmRhdGVwaWNrZXJNb2RlPT09aS5taW5Nb2RlJiYtMT09PWJ8fChhLmRhdGVwaWNrZXJNb2RlPWkubW9kZXNbaS5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpK2JdKX0sYS5rZXlzPXsxMzoiZW50ZXIiLDMyOiJzcGFjZSIsMzM6InBhZ2V1cCIsMzQ6InBhZ2Vkb3duIiwzNToiZW5kIiwzNjoiaG9tZSIsMzc6ImxlZnQiLDM4OiJ1cCIsMzk6InJpZ2h0Iiw0MDoiZG93biJ9O3ZhciBrPWZ1bmN0aW9uKCl7aS5lbGVtZW50WzBdLmZvY3VzKCl9O2EuJG9uKCJ1aWI6ZGF0ZXBpY2tlci5mb2N1cyIsayksYS5rZXlkb3duPWZ1bmN0aW9uKGIpe3ZhciBjPWEua2V5c1tiLndoaWNoXTtpZihjJiYhYi5zaGlmdEtleSYmIWIuYWx0S2V5KWlmKGIucHJldmVudERlZmF1bHQoKSxpLnNob3J0Y3V0UHJvcGFnYXRpb258fGIuc3RvcFByb3BhZ2F0aW9uKCksImVudGVyIj09PWN8fCJzcGFjZSI9PT1jKXtpZihpLmlzRGlzYWJsZWQoaS5hY3RpdmVEYXRlKSlyZXR1cm47YS5zZWxlY3QoaS5hY3RpdmVEYXRlKX1lbHNlIWIuY3RybEtleXx8InVwIiE9PWMmJiJkb3duIiE9PWM/KGkuaGFuZGxlS2V5RG93bihjLGIpLGkucmVmcmVzaFZpZXcoKSk6YS50b2dnbGVNb2RlKCJ1cCI9PT1jPzE6LTEpfX1dKS5jb250cm9sbGVyKCJVaWJEYXlwaWNrZXJDb250cm9sbGVyIixbIiRzY29wZSIsIiRlbGVtZW50IiwiZGF0ZUZpbHRlciIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm4gMSE9PWJ8fGElNCE9PTB8fGElMTAwPT09MCYmYSU0MDAhPT0wP2ZbYl06Mjl9ZnVuY3Rpb24gZShhKXt2YXIgYj1uZXcgRGF0ZShhKTtiLnNldERhdGUoYi5nZXREYXRlKCkrNC0oYi5nZXREYXkoKXx8NykpO3ZhciBjPWIuZ2V0VGltZSgpO3JldHVybiBiLnNldE1vbnRoKDApLGIuc2V0RGF0ZSgxKSxNYXRoLmZsb29yKE1hdGgucm91bmQoKGMtYikvODY0ZTUpLzcpKzF9dmFyIGY9WzMxLDI4LDMxLDMwLDMxLDMwLDMxLDMxLDMwLDMxLDMwLDMxXTt0aGlzLnN0ZXA9e21vbnRoczoxfSx0aGlzLmVsZW1lbnQ9Yix0aGlzLmluaXQ9ZnVuY3Rpb24oYil7YW5ndWxhci5leHRlbmQoYix0aGlzKSxhLnNob3dXZWVrcz1iLnNob3dXZWVrcyxiLnJlZnJlc2hWaWV3KCl9LHRoaXMuZ2V0RGF0ZXM9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1uZXcgQXJyYXkoYiksZT1uZXcgRGF0ZShhKSxmPTA7Yj5mOyljPW5ldyBEYXRlKGUpLGRbZisrXT1jLGUuc2V0RGF0ZShlLmdldERhdGUoKSsxKTtyZXR1cm4gZH0sdGhpcy5fcmVmcmVzaFZpZXc9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSxkPXRoaXMuYWN0aXZlRGF0ZS5nZXRNb250aCgpLGY9bmV3IERhdGUodGhpcy5hY3RpdmVEYXRlKTtmLnNldEZ1bGxZZWFyKGIsZCwxKTt2YXIgZz10aGlzLnN0YXJ0aW5nRGF5LWYuZ2V0RGF5KCksaD1nPjA/Ny1nOi1nLGk9bmV3IERhdGUoZik7aD4wJiZpLnNldERhdGUoLWgrMSk7Zm9yKHZhciBqPXRoaXMuZ2V0RGF0ZXMoaSw0Miksaz0wOzQyPms7aysrKWpba109YW5ndWxhci5leHRlbmQodGhpcy5jcmVhdGVEYXRlT2JqZWN0KGpba10sdGhpcy5mb3JtYXREYXkpLHtzZWNvbmRhcnk6altrXS5nZXRNb250aCgpIT09ZCx1aWQ6YS51bmlxdWVJZCsiLSIra30pO2EubGFiZWxzPW5ldyBBcnJheSg3KTtmb3IodmFyIGw9MDs3Pmw7bCsrKWEubGFiZWxzW2xdPXthYmJyOmMoaltsXS5kYXRlLHRoaXMuZm9ybWF0RGF5SGVhZGVyKSxmdWxsOmMoaltsXS5kYXRlLCJFRUVFIil9O2lmKGEudGl0bGU9Yyh0aGlzLmFjdGl2ZURhdGUsdGhpcy5mb3JtYXREYXlUaXRsZSksYS5yb3dzPXRoaXMuc3BsaXQoaiw3KSxhLnNob3dXZWVrcyl7YS53ZWVrTnVtYmVycz1bXTtmb3IodmFyIG09KDExLXRoaXMuc3RhcnRpbmdEYXkpJTcsbj1hLnJvd3MubGVuZ3RoLG89MDtuPm87bysrKWEud2Vla051bWJlcnMucHVzaChlKGEucm93c1tvXVttXS5kYXRlKSl9fSx0aGlzLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLGEuZ2V0TW9udGgoKSxhLmdldERhdGUoKSktbmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSl9LHRoaXMuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWN0aXZlRGF0ZS5nZXREYXRlKCk7aWYoImxlZnQiPT09YSljLT0xO2Vsc2UgaWYoInVwIj09PWEpYy09NztlbHNlIGlmKCJyaWdodCI9PT1hKWMrPTE7ZWxzZSBpZigiZG93biI9PT1hKWMrPTc7ZWxzZSBpZigicGFnZXVwIj09PWF8fCJwYWdlZG93biI9PT1hKXt2YXIgZT10aGlzLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSsoInBhZ2V1cCI9PT1hPy0xOjEpO3RoaXMuYWN0aXZlRGF0ZS5zZXRNb250aChlLDEpLGM9TWF0aC5taW4oZCh0aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSx0aGlzLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSksYyl9ZWxzZSJob21lIj09PWE/Yz0xOiJlbmQiPT09YSYmKGM9ZCh0aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSx0aGlzLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSkpO3RoaXMuYWN0aXZlRGF0ZS5zZXREYXRlKGMpfX1dKS5jb250cm9sbGVyKCJVaWJNb250aHBpY2tlckNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGVsZW1lbnQiLCJkYXRlRmlsdGVyIixmdW5jdGlvbihhLGIsYyl7dGhpcy5zdGVwPXt5ZWFyczoxfSx0aGlzLmVsZW1lbnQ9Yix0aGlzLmluaXQ9ZnVuY3Rpb24oYSl7YW5ndWxhci5leHRlbmQoYSx0aGlzKSxhLnJlZnJlc2hWaWV3KCl9LHRoaXMuX3JlZnJlc2hWaWV3PWZ1bmN0aW9uKCl7Zm9yKHZhciBiLGQ9bmV3IEFycmF5KDEyKSxlPXRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLGY9MDsxMj5mO2YrKyliPW5ldyBEYXRlKHRoaXMuYWN0aXZlRGF0ZSksYi5zZXRGdWxsWWVhcihlLGYsMSksZFtmXT1hbmd1bGFyLmV4dGVuZCh0aGlzLmNyZWF0ZURhdGVPYmplY3QoYix0aGlzLmZvcm1hdE1vbnRoKSx7dWlkOmEudW5pcXVlSWQrIi0iK2Z9KTthLnRpdGxlPWModGhpcy5hY3RpdmVEYXRlLHRoaXMuZm9ybWF0TW9udGhUaXRsZSksYS5yb3dzPXRoaXMuc3BsaXQoZCwzKX0sdGhpcy5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBEYXRlKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCkpLW5ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCkpfSx0aGlzLmhhbmRsZUtleURvd249ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFjdGl2ZURhdGUuZ2V0TW9udGgoKTtpZigibGVmdCI9PT1hKWMtPTE7ZWxzZSBpZigidXAiPT09YSljLT0zO2Vsc2UgaWYoInJpZ2h0Ij09PWEpYys9MTtlbHNlIGlmKCJkb3duIj09PWEpYys9MztlbHNlIGlmKCJwYWdldXAiPT09YXx8InBhZ2Vkb3duIj09PWEpe3ZhciBkPXRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKygicGFnZXVwIj09PWE/LTE6MSk7dGhpcy5hY3RpdmVEYXRlLnNldEZ1bGxZZWFyKGQpfWVsc2UiaG9tZSI9PT1hP2M9MDoiZW5kIj09PWEmJihjPTExKTt0aGlzLmFjdGl2ZURhdGUuc2V0TW9udGgoYyl9fV0pLmNvbnRyb2xsZXIoIlVpYlllYXJwaWNrZXJDb250cm9sbGVyIixbIiRzY29wZSIsIiRlbGVtZW50IiwiZGF0ZUZpbHRlciIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIHBhcnNlSW50KChhLTEpL2UsMTApKmUrMX12YXIgZTt0aGlzLmVsZW1lbnQ9Yix0aGlzLnllYXJwaWNrZXJJbml0PWZ1bmN0aW9uKCl7ZT10aGlzLnllYXJSYW5nZSx0aGlzLnN0ZXA9e3llYXJzOmV9fSx0aGlzLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgYixjPW5ldyBBcnJheShlKSxmPTAsZz1kKHRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKTtlPmY7ZisrKWI9bmV3IERhdGUodGhpcy5hY3RpdmVEYXRlKSxiLnNldEZ1bGxZZWFyKGcrZiwwLDEpLGNbZl09YW5ndWxhci5leHRlbmQodGhpcy5jcmVhdGVEYXRlT2JqZWN0KGIsdGhpcy5mb3JtYXRZZWFyKSx7dWlkOmEudW5pcXVlSWQrIi0iK2Z9KTthLnRpdGxlPVtjWzBdLmxhYmVsLGNbZS0xXS5sYWJlbF0uam9pbigiIC0gIiksYS5yb3dzPXRoaXMuc3BsaXQoYyw1KX0sdGhpcy5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZ2V0RnVsbFllYXIoKS1iLmdldEZ1bGxZZWFyKCl9LHRoaXMuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpOyJsZWZ0Ij09PWE/Yy09MToidXAiPT09YT9jLT01OiJyaWdodCI9PT1hP2MrPTE6ImRvd24iPT09YT9jKz01OiJwYWdldXAiPT09YXx8InBhZ2Vkb3duIj09PWE/Yys9KCJwYWdldXAiPT09YT8tMToxKSp0aGlzLnN0ZXAueWVhcnM6ImhvbWUiPT09YT9jPWQodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpOiJlbmQiPT09YSYmKGM9ZCh0aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSkrZS0xKSx0aGlzLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoYyl9fV0pLmRpcmVjdGl2ZSgidWliRGF0ZXBpY2tlciIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWwifSxzY29wZTp7ZGF0ZXBpY2tlck1vZGU6Ij0/IixkYXRlRGlzYWJsZWQ6IiYiLGN1c3RvbUNsYXNzOiImIixzaG9ydGN1dFByb3BhZ2F0aW9uOiImPyJ9LHJlcXVpcmU6WyJ1aWJEYXRlcGlja2VyIiwiXm5nTW9kZWwiXSxjb250cm9sbGVyOiJVaWJEYXRlcGlja2VyQ29udHJvbGxlciIsY29udHJvbGxlckFzOiJkYXRlcGlja2VyIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWRbMF0sZj1kWzFdO2UuaW5pdChmKX19fSkuZGlyZWN0aXZlKCJ1aWJEYXlwaWNrZXIiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWwifSxyZXF1aXJlOlsiXj91aWJEYXRlcGlja2VyIiwidWliRGF5cGlja2VyIiwiXj9kYXRlcGlja2VyIl0sY29udHJvbGxlcjoiVWliRGF5cGlja2VyQ29udHJvbGxlciIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdfHxkWzJdLGY9ZFsxXTtmLmluaXQoZSl9fX0pLmRpcmVjdGl2ZSgidWliTW9udGhwaWNrZXIiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbCJ9LHJlcXVpcmU6WyJeP3VpYkRhdGVwaWNrZXIiLCJ1aWJNb250aHBpY2tlciIsIl4/ZGF0ZXBpY2tlciJdLGNvbnRyb2xsZXI6IlVpYk1vbnRocGlja2VyQ29udHJvbGxlciIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdfHxkWzJdLGY9ZFsxXTtmLmluaXQoZSl9fX0pLmRpcmVjdGl2ZSgidWliWWVhcnBpY2tlciIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvZGF0ZXBpY2tlci95ZWFyLmh0bWwifSxyZXF1aXJlOlsiXj91aWJEYXRlcGlja2VyIiwidWliWWVhcnBpY2tlciIsIl4/ZGF0ZXBpY2tlciJdLGNvbnRyb2xsZXI6IlVpYlllYXJwaWNrZXJDb250cm9sbGVyIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWRbMF18fGRbMl07YW5ndWxhci5leHRlbmQoZSxkWzFdKSxlLnllYXJwaWNrZXJJbml0KCksZS5yZWZyZXNoVmlldygpfX19KS5jb25zdGFudCgidWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnIix7ZGF0ZXBpY2tlclBvcHVwOiJ5eXl5LU1NLWRkIixkYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybDoidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sIixkYXRlcGlja2VyVGVtcGxhdGVVcmw6InRlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sIixodG1sNVR5cGVzOntkYXRlOiJ5eXl5LU1NLWRkIiwiZGF0ZXRpbWUtbG9jYWwiOiJ5eXl5LU1NLWRkVEhIOm1tOnNzLnNzcyIsbW9udGg6Inl5eXktTU0ifSxjdXJyZW50VGV4dDoiVG9kYXkiLGNsZWFyVGV4dDoiQ2xlYXIiLGNsb3NlVGV4dDoiRG9uZSIsY2xvc2VPbkRhdGVTZWxlY3Rpb246ITAsYXBwZW5kVG9Cb2R5OiExLHNob3dCdXR0b25CYXI6ITAsb25PcGVuRm9jdXM6ITB9KS5jb250cm9sbGVyKCJVaWJEYXRlcGlja2VyUG9wdXBDb250cm9sbGVyIixbIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIiwiJGNvbXBpbGUiLCIkcGFyc2UiLCIkZG9jdW1lbnQiLCIkcm9vdFNjb3BlIiwiJHVpYlBvc2l0aW9uIiwiZGF0ZUZpbHRlciIsInVpYkRhdGVQYXJzZXIiLCJ1aWJEYXRlcGlja2VyUG9wdXBDb25maWciLCIkdGltZW91dCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGksaixrLGwpewpmdW5jdGlvbiBtKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gbihiKXtpZihhbmd1bGFyLmlzTnVtYmVyKGIpJiYoYj1uZXcgRGF0ZShiKSksYil7aWYoYW5ndWxhci5pc0RhdGUoYikmJiFpc05hTihiKSlyZXR1cm4gYjtpZihhbmd1bGFyLmlzU3RyaW5nKGIpKXt2YXIgYz1qLnBhcnNlKGIscixhLmRhdGUpO3JldHVybiBpc05hTihjKT92b2lkIDA6Y31yZXR1cm4gdm9pZCAwfXJldHVybiBudWxsfWZ1bmN0aW9uIG8oYSxiKXt2YXIgZD1hfHxiO2lmKCFjLm5nUmVxdWlyZWQmJiFkKXJldHVybiEwO2lmKGFuZ3VsYXIuaXNOdW1iZXIoZCkmJihkPW5ldyBEYXRlKGQpKSxkKXtpZihhbmd1bGFyLmlzRGF0ZShkKSYmIWlzTmFOKGQpKXJldHVybiEwO2lmKGFuZ3VsYXIuaXNTdHJpbmcoZCkpe3ZhciBlPWoucGFyc2UoZCxyKTtyZXR1cm4haXNOYU4oZSl9cmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gcChjKXt2YXIgZD1BWzBdLGU9YlswXS5jb250YWlucyhjLnRhcmdldCksZj12b2lkIDAhPT1kLmNvbnRhaW5zJiZkLmNvbnRhaW5zKGMudGFyZ2V0KTshYS5pc09wZW58fGV8fGZ8fGEuJGFwcGx5KGZ1bmN0aW9uKCl7YS5pc09wZW49ITF9KX1mdW5jdGlvbiBxKGMpezI3PT09Yy53aGljaCYmYS5pc09wZW4/KGMucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpLGEuJGFwcGx5KGZ1bmN0aW9uKCl7YS5pc09wZW49ITF9KSxiWzBdLmZvY3VzKCkpOjQwIT09Yy53aGljaHx8YS5pc09wZW58fChjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSxhLiRhcHBseShmdW5jdGlvbigpe2EuaXNPcGVuPSEwfSkpfXZhciByLHMsdCx1LHYsdyx4LHkseixBLEI9e30sQz0hMTthLndhdGNoRGF0YT17fSx0aGlzLmluaXQ9ZnVuY3Rpb24oaCl7aWYoej1oLHM9YW5ndWxhci5pc0RlZmluZWQoYy5jbG9zZU9uRGF0ZVNlbGVjdGlvbik/YS4kcGFyZW50LiRldmFsKGMuY2xvc2VPbkRhdGVTZWxlY3Rpb24pOmsuY2xvc2VPbkRhdGVTZWxlY3Rpb24sdD1hbmd1bGFyLmlzRGVmaW5lZChjLmRhdGVwaWNrZXJBcHBlbmRUb0JvZHkpP2EuJHBhcmVudC4kZXZhbChjLmRhdGVwaWNrZXJBcHBlbmRUb0JvZHkpOmsuYXBwZW5kVG9Cb2R5LHU9YW5ndWxhci5pc0RlZmluZWQoYy5vbk9wZW5Gb2N1cyk/YS4kcGFyZW50LiRldmFsKGMub25PcGVuRm9jdXMpOmsub25PcGVuRm9jdXMsdj1hbmd1bGFyLmlzRGVmaW5lZChjLmRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsKT9jLmRhdGVwaWNrZXJQb3B1cFRlbXBsYXRlVXJsOmsuZGF0ZXBpY2tlclBvcHVwVGVtcGxhdGVVcmwsdz1hbmd1bGFyLmlzRGVmaW5lZChjLmRhdGVwaWNrZXJUZW1wbGF0ZVVybCk/Yy5kYXRlcGlja2VyVGVtcGxhdGVVcmw6ay5kYXRlcGlja2VyVGVtcGxhdGVVcmwsYS5zaG93QnV0dG9uQmFyPWFuZ3VsYXIuaXNEZWZpbmVkKGMuc2hvd0J1dHRvbkJhcik/YS4kcGFyZW50LiRldmFsKGMuc2hvd0J1dHRvbkJhcik6ay5zaG93QnV0dG9uQmFyLGsuaHRtbDVUeXBlc1tjLnR5cGVdPyhyPWsuaHRtbDVUeXBlc1tjLnR5cGVdLEM9ITApOihyPWMuZGF0ZXBpY2tlclBvcHVwfHxjLnVpYkRhdGVwaWNrZXJQb3B1cHx8ay5kYXRlcGlja2VyUG9wdXAsYy4kb2JzZXJ2ZSgidWliRGF0ZXBpY2tlclBvcHVwIixmdW5jdGlvbihhLGIpe3ZhciBjPWF8fGsuZGF0ZXBpY2tlclBvcHVwO2lmKGMhPT1yJiYocj1jLHouJG1vZGVsVmFsdWU9bnVsbCwhcikpdGhyb3cgbmV3IEVycm9yKCJ1aWJEYXRlcGlja2VyUG9wdXAgbXVzdCBoYXZlIGEgZGF0ZSBmb3JtYXQgc3BlY2lmaWVkLiIpfSkpLCFyKXRocm93IG5ldyBFcnJvcigidWliRGF0ZXBpY2tlclBvcHVwIG11c3QgaGF2ZSBhIGRhdGUgZm9ybWF0IHNwZWNpZmllZC4iKTtpZihDJiZjLmRhdGVwaWNrZXJQb3B1cCl0aHJvdyBuZXcgRXJyb3IoIkhUTUw1IGRhdGUgaW5wdXQgdHlwZXMgZG8gbm90IHN1cHBvcnQgY3VzdG9tIGZvcm1hdHMuIik7aWYoeD1hbmd1bGFyLmVsZW1lbnQoIjxkaXYgdWliLWRhdGVwaWNrZXItcG9wdXAtd3JhcD48ZGl2IHVpYi1kYXRlcGlja2VyPjwvZGl2PjwvZGl2PiIpLHguYXR0cih7Im5nLW1vZGVsIjoiZGF0ZSIsIm5nLWNoYW5nZSI6ImRhdGVTZWxlY3Rpb24oZGF0ZSkiLCJ0ZW1wbGF0ZS11cmwiOnZ9KSx5PWFuZ3VsYXIuZWxlbWVudCh4LmNoaWxkcmVuKClbMF0pLHkuYXR0cigidGVtcGxhdGUtdXJsIix3KSxDJiYibW9udGgiPT09Yy50eXBlJiYoeS5hdHRyKCJkYXRlcGlja2VyLW1vZGUiLCcibW9udGgiJykseS5hdHRyKCJtaW4tbW9kZSIsIm1vbnRoIikpLGMuZGF0ZXBpY2tlck9wdGlvbnMpe3ZhciBsPWEuJHBhcmVudC4kZXZhbChjLmRhdGVwaWNrZXJPcHRpb25zKTtsJiZsLmluaXREYXRlJiYoYS5pbml0RGF0ZT1sLmluaXREYXRlLHkuYXR0cigiaW5pdC1kYXRlIiwiaW5pdERhdGUiKSxkZWxldGUgbC5pbml0RGF0ZSksYW5ndWxhci5mb3JFYWNoKGwsZnVuY3Rpb24oYSxiKXt5LmF0dHIobShiKSxhKX0pfWFuZ3VsYXIuZm9yRWFjaChbIm1pbk1vZGUiLCJtYXhNb2RlIiwibWluRGF0ZSIsIm1heERhdGUiLCJkYXRlcGlja2VyTW9kZSIsImluaXREYXRlIiwic2hvcnRjdXRQcm9wYWdhdGlvbiJdLGZ1bmN0aW9uKGIpe2lmKGNbYl0pe3ZhciBkPWUoY1tiXSk7aWYoYS4kcGFyZW50LiR3YXRjaChkLGZ1bmN0aW9uKGMpe2Eud2F0Y2hEYXRhW2JdPWMsKCJtaW5EYXRlIj09PWJ8fCJtYXhEYXRlIj09PWIpJiYoQltiXT1uZXcgRGF0ZShjKSl9KSx5LmF0dHIobShiKSwid2F0Y2hEYXRhLiIrYiksImRhdGVwaWNrZXJNb2RlIj09PWIpe3ZhciBmPWQuYXNzaWduO2EuJHdhdGNoKCJ3YXRjaERhdGEuIitiLGZ1bmN0aW9uKGIsYyl7YW5ndWxhci5pc0Z1bmN0aW9uKGYpJiZiIT09YyYmZihhLiRwYXJlbnQsYil9KX19fSksYy5kYXRlRGlzYWJsZWQmJnkuYXR0cigiZGF0ZS1kaXNhYmxlZCIsImRhdGVEaXNhYmxlZCh7IGRhdGU6IGRhdGUsIG1vZGU6IG1vZGUgfSkiKSxjLnNob3dXZWVrcyYmeS5hdHRyKCJzaG93LXdlZWtzIixjLnNob3dXZWVrcyksYy5jdXN0b21DbGFzcyYmeS5hdHRyKCJjdXN0b20tY2xhc3MiLCJjdXN0b21DbGFzcyh7IGRhdGU6IGRhdGUsIG1vZGU6IG1vZGUgfSkiKSxDP3ouJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihiKXtyZXR1cm4gYS5kYXRlPWIsYn0pOih6LiQkcGFyc2VyTmFtZT0iZGF0ZSIsei4kdmFsaWRhdG9ycy5kYXRlPW8sei4kcGFyc2Vycy51bnNoaWZ0KG4pLHouJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihiKXtyZXR1cm4gYS5kYXRlPWIsei4kaXNFbXB0eShiKT9iOmkoYixyKX0pKSx6LiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXthLmRhdGU9ai5wYXJzZSh6LiR2aWV3VmFsdWUscixhLmRhdGUpfSksYi5iaW5kKCJrZXlkb3duIixxKSxBPWQoeCkoYSkseC5yZW1vdmUoKSx0P2YuZmluZCgiYm9keSIpLmFwcGVuZChBKTpiLmFmdGVyKEEpLGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXthLmlzT3Blbj09PSEwJiYoZy4kJHBoYXNlfHxhLiRhcHBseShmdW5jdGlvbigpe2EuaXNPcGVuPSExfSkpLEEucmVtb3ZlKCksYi51bmJpbmQoImtleWRvd24iLHEpLGYudW5iaW5kKCJjbGljayIscCl9KX0sYS5nZXRUZXh0PWZ1bmN0aW9uKGIpe3JldHVybiBhW2IrIlRleHQiXXx8a1tiKyJUZXh0Il19LGEuaXNEaXNhYmxlZD1mdW5jdGlvbihiKXtyZXR1cm4idG9kYXkiPT09YiYmKGI9bmV3IERhdGUpLGEud2F0Y2hEYXRhLm1pbkRhdGUmJmEuY29tcGFyZShiLEIubWluRGF0ZSk8MHx8YS53YXRjaERhdGEubWF4RGF0ZSYmYS5jb21wYXJlKGIsQi5tYXhEYXRlKT4wfSxhLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLGEuZ2V0TW9udGgoKSxhLmdldERhdGUoKSktbmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSl9LGEuZGF0ZVNlbGVjdGlvbj1mdW5jdGlvbihjKXthbmd1bGFyLmlzRGVmaW5lZChjKSYmKGEuZGF0ZT1jKTt2YXIgZD1hLmRhdGU/aShhLmRhdGUscik6bnVsbDtiLnZhbChkKSx6LiRzZXRWaWV3VmFsdWUoZCkscyYmKGEuaXNPcGVuPSExLGJbMF0uZm9jdXMoKSl9LGEua2V5ZG93bj1mdW5jdGlvbihjKXsyNz09PWMud2hpY2gmJihhLmlzT3Blbj0hMSxiWzBdLmZvY3VzKCkpfSxhLnNlbGVjdD1mdW5jdGlvbihiKXtpZigidG9kYXkiPT09Yil7dmFyIGM9bmV3IERhdGU7YW5ndWxhci5pc0RhdGUoYS5kYXRlKT8oYj1uZXcgRGF0ZShhLmRhdGUpLGIuc2V0RnVsbFllYXIoYy5nZXRGdWxsWWVhcigpLGMuZ2V0TW9udGgoKSxjLmdldERhdGUoKSkpOmI9bmV3IERhdGUoYy5zZXRIb3VycygwLDAsMCwwKSl9YS5kYXRlU2VsZWN0aW9uKGIpfSxhLmNsb3NlPWZ1bmN0aW9uKCl7YS5pc09wZW49ITEsYlswXS5mb2N1cygpfSxhLiR3YXRjaCgiaXNPcGVuIixmdW5jdGlvbihjKXtjPyhhLnBvc2l0aW9uPXQ/aC5vZmZzZXQoYik6aC5wb3NpdGlvbihiKSxhLnBvc2l0aW9uLnRvcD1hLnBvc2l0aW9uLnRvcCtiLnByb3AoIm9mZnNldEhlaWdodCIpLGwoZnVuY3Rpb24oKXt1JiZhLiRicm9hZGNhc3QoInVpYjpkYXRlcGlja2VyLmZvY3VzIiksZi5iaW5kKCJjbGljayIscCl9LDAsITEpKTpmLnVuYmluZCgiY2xpY2siLHApfSl9XSkuZGlyZWN0aXZlKCJ1aWJEYXRlcGlja2VyUG9wdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6WyJuZ01vZGVsIiwidWliRGF0ZXBpY2tlclBvcHVwIl0sY29udHJvbGxlcjoiVWliRGF0ZXBpY2tlclBvcHVwQ29udHJvbGxlciIsc2NvcGU6e2lzT3BlbjoiPT8iLGN1cnJlbnRUZXh0OiJAIixjbGVhclRleHQ6IkAiLGNsb3NlVGV4dDoiQCIsZGF0ZURpc2FibGVkOiImIixjdXN0b21DbGFzczoiJiJ9LGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07Zi5pbml0KGUpfX19KS5kaXJlY3RpdmUoInVpYkRhdGVwaWNrZXJQb3B1cFdyYXAiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sIn19fSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kYXRlcGlja2VyIikudmFsdWUoIiRkYXRlcGlja2VyU3VwcHJlc3NXYXJuaW5nIiwhMSkuY29udHJvbGxlcigiRGF0ZXBpY2tlckNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGF0dHJzIiwiJHBhcnNlIiwiJGludGVycG9sYXRlIiwiJGxvZyIsImRhdGVGaWx0ZXIiLCJ1aWJEYXRlcGlja2VyQ29uZmlnIiwiJGRhdGVwaWNrZXJTdXBwcmVzc0Vycm9yIiwiJGRhdGVwaWNrZXJTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpKXtpfHxlLndhcm4oIkRhdGVwaWNrZXJDb250cm9sbGVyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgVWliRGF0ZXBpY2tlckNvbnRyb2xsZXIgaW5zdGVhZC4iKTt2YXIgaj10aGlzLGs9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfTt0aGlzLm1vZGVzPVsiZGF5IiwibW9udGgiLCJ5ZWFyIl0sYW5ndWxhci5mb3JFYWNoKFsiZm9ybWF0RGF5IiwiZm9ybWF0TW9udGgiLCJmb3JtYXRZZWFyIiwiZm9ybWF0RGF5SGVhZGVyIiwiZm9ybWF0RGF5VGl0bGUiLCJmb3JtYXRNb250aFRpdGxlIiwic2hvd1dlZWtzIiwic3RhcnRpbmdEYXkiLCJ5ZWFyUmFuZ2UiLCJzaG9ydGN1dFByb3BhZ2F0aW9uIl0sZnVuY3Rpb24oYyxlKXtqW2NdPWFuZ3VsYXIuaXNEZWZpbmVkKGJbY10pPzY+ZT9kKGJbY10pKGEuJHBhcmVudCk6YS4kcGFyZW50LiRldmFsKGJbY10pOmdbY119KSxhbmd1bGFyLmZvckVhY2goWyJtaW5EYXRlIiwibWF4RGF0ZSJdLGZ1bmN0aW9uKGQpe2JbZF0/YS4kcGFyZW50LiR3YXRjaChjKGJbZF0pLGZ1bmN0aW9uKGEpe2pbZF09YT9uZXcgRGF0ZShhKTpudWxsLGoucmVmcmVzaFZpZXcoKX0pOmpbZF09Z1tkXT9uZXcgRGF0ZShnW2RdKTpudWxsfSksYW5ndWxhci5mb3JFYWNoKFsibWluTW9kZSIsIm1heE1vZGUiXSxmdW5jdGlvbihkKXtiW2RdP2EuJHBhcmVudC4kd2F0Y2goYyhiW2RdKSxmdW5jdGlvbihjKXtqW2RdPWFuZ3VsYXIuaXNEZWZpbmVkKGMpP2M6YltkXSxhW2RdPWpbZF0sKCJtaW5Nb2RlIj09ZCYmai5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpPGoubW9kZXMuaW5kZXhPZihqW2RdKXx8Im1heE1vZGUiPT1kJiZqLm1vZGVzLmluZGV4T2YoYS5kYXRlcGlja2VyTW9kZSk+ai5tb2Rlcy5pbmRleE9mKGpbZF0pKSYmKGEuZGF0ZXBpY2tlck1vZGU9altkXSl9KTooaltkXT1nW2RdfHxudWxsLGFbZF09altkXSl9KSxhLmRhdGVwaWNrZXJNb2RlPWEuZGF0ZXBpY2tlck1vZGV8fGcuZGF0ZXBpY2tlck1vZGUsYS51bmlxdWVJZD0iZGF0ZXBpY2tlci0iK2EuJGlkKyItIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKSxhbmd1bGFyLmlzRGVmaW5lZChiLmluaXREYXRlKT8odGhpcy5hY3RpdmVEYXRlPWEuJHBhcmVudC4kZXZhbChiLmluaXREYXRlKXx8bmV3IERhdGUsYS4kcGFyZW50LiR3YXRjaChiLmluaXREYXRlLGZ1bmN0aW9uKGEpe2EmJihrLiRpc0VtcHR5KGsuJG1vZGVsVmFsdWUpfHxrLiRpbnZhbGlkKSYmKGouYWN0aXZlRGF0ZT1hLGoucmVmcmVzaFZpZXcoKSl9KSk6dGhpcy5hY3RpdmVEYXRlPW5ldyBEYXRlLGEuaXNBY3RpdmU9ZnVuY3Rpb24oYil7cmV0dXJuIDA9PT1qLmNvbXBhcmUoYi5kYXRlLGouYWN0aXZlRGF0ZSk/KGEuYWN0aXZlRGF0ZUlkPWIudWlkLCEwKTohMX0sdGhpcy5pbml0PWZ1bmN0aW9uKGEpe2s9YSxrLiRyZW5kZXI9ZnVuY3Rpb24oKXtqLnJlbmRlcigpfX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXtpZihrLiR2aWV3VmFsdWUpe3ZhciBhPW5ldyBEYXRlKGsuJHZpZXdWYWx1ZSksYj0haXNOYU4oYSk7Yj90aGlzLmFjdGl2ZURhdGU9YTpofHxlLmVycm9yKCdEYXRlcGlja2VyIGRpcmVjdGl2ZTogIm5nLW1vZGVsIiB2YWx1ZSBtdXN0IGJlIGEgRGF0ZSBvYmplY3QsIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSAwMS4wMS4xOTcwIG9yIGEgc3RyaW5nIHJlcHJlc2VudGluZyBhbiBSRkMyODIyIG9yIElTTyA4NjAxIGRhdGUuJyl9dGhpcy5yZWZyZXNoVmlldygpfSx0aGlzLnJlZnJlc2hWaWV3PWZ1bmN0aW9uKCl7aWYodGhpcy5lbGVtZW50KXt0aGlzLl9yZWZyZXNoVmlldygpO3ZhciBhPWsuJHZpZXdWYWx1ZT9uZXcgRGF0ZShrLiR2aWV3VmFsdWUpOm51bGw7ay4kc2V0VmFsaWRpdHkoImRhdGVEaXNhYmxlZCIsIWF8fHRoaXMuZWxlbWVudCYmIXRoaXMuaXNEaXNhYmxlZChhKSl9fSx0aGlzLmNyZWF0ZURhdGVPYmplY3Q9ZnVuY3Rpb24oYSxiKXt2YXIgYz1rLiR2aWV3VmFsdWU/bmV3IERhdGUoay4kdmlld1ZhbHVlKTpudWxsO3JldHVybntkYXRlOmEsbGFiZWw6ZihhLGIpLHNlbGVjdGVkOmMmJjA9PT10aGlzLmNvbXBhcmUoYSxjKSxkaXNhYmxlZDp0aGlzLmlzRGlzYWJsZWQoYSksY3VycmVudDowPT09dGhpcy5jb21wYXJlKGEsbmV3IERhdGUpLGN1c3RvbUNsYXNzOnRoaXMuY3VzdG9tQ2xhc3MoYSl9fSx0aGlzLmlzRGlzYWJsZWQ9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMubWluRGF0ZSYmdGhpcy5jb21wYXJlKGMsdGhpcy5taW5EYXRlKTwwfHx0aGlzLm1heERhdGUmJnRoaXMuY29tcGFyZShjLHRoaXMubWF4RGF0ZSk+MHx8Yi5kYXRlRGlzYWJsZWQmJmEuZGF0ZURpc2FibGVkKHtkYXRlOmMsbW9kZTphLmRhdGVwaWNrZXJNb2RlfSl9LHRoaXMuY3VzdG9tQ2xhc3M9ZnVuY3Rpb24oYil7cmV0dXJuIGEuY3VzdG9tQ2xhc3Moe2RhdGU6Yixtb2RlOmEuZGF0ZXBpY2tlck1vZGV9KX0sdGhpcy5zcGxpdD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthLmxlbmd0aD4wOyljLnB1c2goYS5zcGxpY2UoMCxiKSk7cmV0dXJuIGN9LHRoaXMuZml4VGltZVpvbmU9ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRIb3VycygpO2Euc2V0SG91cnMoMjM9PT1iP2IrMjowKX0sYS5zZWxlY3Q9ZnVuY3Rpb24oYil7aWYoYS5kYXRlcGlja2VyTW9kZT09PWoubWluTW9kZSl7dmFyIGM9ay4kdmlld1ZhbHVlP25ldyBEYXRlKGsuJHZpZXdWYWx1ZSk6bmV3IERhdGUoMCwwLDAsMCwwLDAsMCk7Yy5zZXRGdWxsWWVhcihiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpLGIuZ2V0RGF0ZSgpKSxrLiRzZXRWaWV3VmFsdWUoYyksay4kcmVuZGVyKCl9ZWxzZSBqLmFjdGl2ZURhdGU9YixhLmRhdGVwaWNrZXJNb2RlPWoubW9kZXNbai5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpLTFdfSxhLm1vdmU9ZnVuY3Rpb24oYSl7dmFyIGI9ai5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkrYSooai5zdGVwLnllYXJzfHwwKSxjPWouYWN0aXZlRGF0ZS5nZXRNb250aCgpK2EqKGouc3RlcC5tb250aHN8fDApO2ouYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihiLGMsMSksai5yZWZyZXNoVmlldygpfSxhLnRvZ2dsZU1vZGU9ZnVuY3Rpb24oYil7Yj1ifHwxLGEuZGF0ZXBpY2tlck1vZGU9PT1qLm1heE1vZGUmJjE9PT1ifHxhLmRhdGVwaWNrZXJNb2RlPT09ai5taW5Nb2RlJiYtMT09PWJ8fChhLmRhdGVwaWNrZXJNb2RlPWoubW9kZXNbai5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpK2JdKX0sYS5rZXlzPXsxMzoiZW50ZXIiLDMyOiJzcGFjZSIsMzM6InBhZ2V1cCIsMzQ6InBhZ2Vkb3duIiwzNToiZW5kIiwzNjoiaG9tZSIsMzc6ImxlZnQiLDM4OiJ1cCIsMzk6InJpZ2h0Iiw0MDoiZG93biJ9O3ZhciBsPWZ1bmN0aW9uKCl7ai5lbGVtZW50WzBdLmZvY3VzKCl9O2EuJG9uKCJ1aWI6ZGF0ZXBpY2tlci5mb2N1cyIsbCksYS5rZXlkb3duPWZ1bmN0aW9uKGIpe3ZhciBjPWEua2V5c1tiLndoaWNoXTtpZihjJiYhYi5zaGlmdEtleSYmIWIuYWx0S2V5KWlmKGIucHJldmVudERlZmF1bHQoKSxqLnNob3J0Y3V0UHJvcGFnYXRpb258fGIuc3RvcFByb3BhZ2F0aW9uKCksImVudGVyIj09PWN8fCJzcGFjZSI9PT1jKXtpZihqLmlzRGlzYWJsZWQoai5hY3RpdmVEYXRlKSlyZXR1cm47YS5zZWxlY3Qoai5hY3RpdmVEYXRlKX1lbHNlIWIuY3RybEtleXx8InVwIiE9PWMmJiJkb3duIiE9PWM/KGouaGFuZGxlS2V5RG93bihjLGIpLGoucmVmcmVzaFZpZXcoKSk6YS50b2dnbGVNb2RlKCJ1cCI9PT1jPzE6LTEpfX1dKS5kaXJlY3RpdmUoImRhdGVwaWNrZXIiLFsiJGxvZyIsIiRkYXRlcGlja2VyU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbCJ9LHNjb3BlOntkYXRlcGlja2VyTW9kZToiPT8iLGRhdGVEaXNhYmxlZDoiJiIsY3VzdG9tQ2xhc3M6IiYiLHNob3J0Y3V0UHJvcGFnYXRpb246IiY/In0scmVxdWlyZTpbImRhdGVwaWNrZXIiLCJebmdNb2RlbCJdLGNvbnRyb2xsZXI6IkRhdGVwaWNrZXJDb250cm9sbGVyIixjb250cm9sbGVyQXM6ImRhdGVwaWNrZXIiLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7Ynx8YS53YXJuKCJkYXRlcGlja2VyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLWRhdGVwaWNrZXIgaW5zdGVhZC4iKTt2YXIgZz1mWzBdLGg9ZlsxXTtnLmluaXQoaCl9fX1dKS5kaXJlY3RpdmUoImRheXBpY2tlciIsWyIkbG9nIiwiJGRhdGVwaWNrZXJTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3JlcGxhY2U6ITAsdGVtcGxhdGVVcmw6InRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWwiLHJlcXVpcmU6WyJeZGF0ZXBpY2tlciIsImRheXBpY2tlciJdLGNvbnRyb2xsZXI6IlVpYkRheXBpY2tlckNvbnRyb2xsZXIiLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7Ynx8YS53YXJuKCJkYXlwaWNrZXIgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItZGF5cGlja2VyIGluc3RlYWQuIik7dmFyIGc9ZlswXSxoPWZbMV07aC5pbml0KGcpfX19XSkuZGlyZWN0aXZlKCJtb250aHBpY2tlciIsWyIkbG9nIiwiJGRhdGVwaWNrZXJTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3JlcGxhY2U6ITAsdGVtcGxhdGVVcmw6InRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbCIscmVxdWlyZTpbIl5kYXRlcGlja2VyIiwibW9udGhwaWNrZXIiXSxjb250cm9sbGVyOiJVaWJNb250aHBpY2tlckNvbnRyb2xsZXIiLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7Ynx8YS53YXJuKCJtb250aHBpY2tlciBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1tb250aHBpY2tlciBpbnN0ZWFkLiIpO3ZhciBnPWZbMF0saD1mWzFdO2guaW5pdChnKX19fV0pLmRpcmVjdGl2ZSgieWVhcnBpY2tlciIsWyIkbG9nIiwiJGRhdGVwaWNrZXJTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3JlcGxhY2U6ITAsdGVtcGxhdGVVcmw6InRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sIixyZXF1aXJlOlsiXmRhdGVwaWNrZXIiLCJ5ZWFycGlja2VyIl0sY29udHJvbGxlcjoiVWliWWVhcnBpY2tlckNvbnRyb2xsZXIiLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7Ynx8YS53YXJuKCJ5ZWFycGlja2VyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLXllYXJwaWNrZXIgaW5zdGVhZC4iKTt2YXIgZz1mWzBdO2FuZ3VsYXIuZXh0ZW5kKGcsZlsxXSksZy55ZWFycGlja2VySW5pdCgpLGcucmVmcmVzaFZpZXcoKX19fV0pLmRpcmVjdGl2ZSgiZGF0ZXBpY2tlclBvcHVwIixbIiRsb2ciLCIkZGF0ZXBpY2tlclN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVxdWlyZTpbIm5nTW9kZWwiLCJkYXRlcGlja2VyUG9wdXAiXSxjb250cm9sbGVyOiJVaWJEYXRlcGlja2VyUG9wdXBDb250cm9sbGVyIixzY29wZTp7aXNPcGVuOiI9PyIsY3VycmVudFRleHQ6IkAiLGNsZWFyVGV4dDoiQCIsY2xvc2VUZXh0OiJAIixkYXRlRGlzYWJsZWQ6IiYiLGN1c3RvbUNsYXNzOiImIn0sbGluazpmdW5jdGlvbihjLGQsZSxmKXtifHxhLndhcm4oImRhdGVwaWNrZXItcG9wdXAgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItZGF0ZXBpY2tlci1wb3B1cCBpbnN0ZWFkLiIpO3ZhciBnPWZbMF0saD1mWzFdO2guaW5pdChnKX19fV0pLmRpcmVjdGl2ZSgiZGF0ZXBpY2tlclBvcHVwV3JhcCIsWyIkbG9nIiwiJGRhdGVwaWNrZXJTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3JlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sIn0sbGluazpmdW5jdGlvbigpe2J8fGEud2FybigiZGF0ZXBpY2tlci1wb3B1cC13cmFwIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLWRhdGVwaWNrZXItcG9wdXAtd3JhcCBpbnN0ZWFkLiIpfX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5kcm9wZG93biIsWyJ1aS5ib290c3RyYXAucG9zaXRpb24iXSkuY29uc3RhbnQoInVpYkRyb3Bkb3duQ29uZmlnIix7b3BlbkNsYXNzOiJvcGVuIn0pLnNlcnZpY2UoInVpYkRyb3Bkb3duU2VydmljZSIsWyIkZG9jdW1lbnQiLCIkcm9vdFNjb3BlIixmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7dGhpcy5vcGVuPWZ1bmN0aW9uKGIpe2N8fChhLmJpbmQoImNsaWNrIixkKSxhLmJpbmQoImtleWRvd24iLGUpKSxjJiZjIT09YiYmKGMuaXNPcGVuPSExKSxjPWJ9LHRoaXMuY2xvc2U9ZnVuY3Rpb24oYil7Yz09PWImJihjPW51bGwsYS51bmJpbmQoImNsaWNrIixkKSxhLnVuYmluZCgia2V5ZG93biIsZSkpfTt2YXIgZD1mdW5jdGlvbihhKXtpZihjJiYoIWF8fCJkaXNhYmxlZCIhPT1jLmdldEF1dG9DbG9zZSgpKSl7dmFyIGQ9Yy5nZXRUb2dnbGVFbGVtZW50KCk7aWYoIShhJiZkJiZkWzBdLmNvbnRhaW5zKGEudGFyZ2V0KSkpe3ZhciBlPWMuZ2V0RHJvcGRvd25FbGVtZW50KCk7YSYmIm91dHNpZGVDbGljayI9PT1jLmdldEF1dG9DbG9zZSgpJiZlJiZlWzBdLmNvbnRhaW5zKGEudGFyZ2V0KXx8KGMuaXNPcGVuPSExLGIuJCRwaGFzZXx8Yy4kYXBwbHkoKSl9fX0sZT1mdW5jdGlvbihhKXsyNz09PWEud2hpY2g/KGMuZm9jdXNUb2dnbGVFbGVtZW50KCksZCgpKTpjLmlzS2V5bmF2RW5hYmxlZCgpJiYvKDM4fDQwKS8udGVzdChhLndoaWNoKSYmYy5pc09wZW4mJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSxjLmZvY3VzRHJvcGRvd25FbnRyeShhLndoaWNoKSl9fV0pLmNvbnRyb2xsZXIoIlVpYkRyb3Bkb3duQ29udHJvbGxlciIsWyIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsIiRwYXJzZSIsInVpYkRyb3Bkb3duQ29uZmlnIiwidWliRHJvcGRvd25TZXJ2aWNlIiwiJGFuaW1hdGUiLCIkdWliUG9zaXRpb24iLCIkZG9jdW1lbnQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZVJlcXVlc3QiLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpLGosayl7dmFyIGwsbSxuPXRoaXMsbz1hLiRuZXcoKSxwPWUub3BlbkNsYXNzLHE9YW5ndWxhci5ub29wLHI9Yy5vblRvZ2dsZT9kKGMub25Ub2dnbGUpOmFuZ3VsYXIubm9vcCxzPSExLHQ9ITE7Yi5hZGRDbGFzcygiZHJvcGRvd24iKSx0aGlzLmluaXQ9ZnVuY3Rpb24oKXtjLmlzT3BlbiYmKG09ZChjLmlzT3BlbikscT1tLmFzc2lnbixhLiR3YXRjaChtLGZ1bmN0aW9uKGEpe28uaXNPcGVuPSEhYX0pKSxzPWFuZ3VsYXIuaXNEZWZpbmVkKGMuZHJvcGRvd25BcHBlbmRUb0JvZHkpLHQ9YW5ndWxhci5pc0RlZmluZWQoYy51aWJLZXlib2FyZE5hdikscyYmbi5kcm9wZG93bk1lbnUmJihpLmZpbmQoImJvZHkiKS5hcHBlbmQobi5kcm9wZG93bk1lbnUpLGIub24oIiRkZXN0cm95IixmdW5jdGlvbigpe24uZHJvcGRvd25NZW51LnJlbW92ZSgpfSkpfSx0aGlzLnRvZ2dsZT1mdW5jdGlvbihhKXtyZXR1cm4gby5pc09wZW49YXJndW1lbnRzLmxlbmd0aD8hIWE6IW8uaXNPcGVufSx0aGlzLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiBvLmlzT3Blbn0sby5nZXRUb2dnbGVFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG4udG9nZ2xlRWxlbWVudH0sby5nZXRBdXRvQ2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gYy5hdXRvQ2xvc2V8fCJhbHdheXMifSxvLmdldEVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gYn0sby5pc0tleW5hdkVuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdH0sby5mb2N1c0Ryb3Bkb3duRW50cnk9ZnVuY3Rpb24oYSl7dmFyIGM9bi5kcm9wZG93bk1lbnU/YW5ndWxhci5lbGVtZW50KG4uZHJvcGRvd25NZW51KS5maW5kKCJhIik6YW5ndWxhci5lbGVtZW50KGIpLmZpbmQoInVsIikuZXEoMCkuZmluZCgiYSIpO3N3aXRjaChhKXtjYXNlIDQwOmFuZ3VsYXIuaXNOdW1iZXIobi5zZWxlY3RlZE9wdGlvbik/bi5zZWxlY3RlZE9wdGlvbj1uLnNlbGVjdGVkT3B0aW9uPT09Yy5sZW5ndGgtMT9uLnNlbGVjdGVkT3B0aW9uOm4uc2VsZWN0ZWRPcHRpb24rMTpuLnNlbGVjdGVkT3B0aW9uPTA7YnJlYWs7Y2FzZSAzODphbmd1bGFyLmlzTnVtYmVyKG4uc2VsZWN0ZWRPcHRpb24pP24uc2VsZWN0ZWRPcHRpb249MD09PW4uc2VsZWN0ZWRPcHRpb24/MDpuLnNlbGVjdGVkT3B0aW9uLTE6bi5zZWxlY3RlZE9wdGlvbj1jLmxlbmd0aC0xfWNbbi5zZWxlY3RlZE9wdGlvbl0uZm9jdXMoKX0sby5nZXREcm9wZG93bkVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbi5kcm9wZG93bk1lbnV9LG8uZm9jdXNUb2dnbGVFbGVtZW50PWZ1bmN0aW9uKCl7bi50b2dnbGVFbGVtZW50JiZuLnRvZ2dsZUVsZW1lbnRbMF0uZm9jdXMoKX0sby4kd2F0Y2goImlzT3BlbiIsZnVuY3Rpb24oYyxkKXtpZihzJiZuLmRyb3Bkb3duTWVudSl7dmFyIGU9aC5wb3NpdGlvbkVsZW1lbnRzKGIsbi5kcm9wZG93bk1lbnUsImJvdHRvbS1sZWZ0IiwhMCksaT17dG9wOmUudG9wKyJweCIsZGlzcGxheTpjPyJibG9jayI6Im5vbmUifSxtPW4uZHJvcGRvd25NZW51Lmhhc0NsYXNzKCJkcm9wZG93bi1tZW51LXJpZ2h0Iik7bT8oaS5sZWZ0PSJhdXRvIixpLnJpZ2h0PXdpbmRvdy5pbm5lcldpZHRoLShlLmxlZnQrYi5wcm9wKCJvZmZzZXRXaWR0aCIpKSsicHgiKTooaS5sZWZ0PWUubGVmdCsicHgiLGkucmlnaHQ9ImF1dG8iKSxuLmRyb3Bkb3duTWVudS5jc3MoaSl9aWYoZ1tjPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oYixwKS50aGVuKGZ1bmN0aW9uKCl7YW5ndWxhci5pc0RlZmluZWQoYykmJmMhPT1kJiZyKGEse29wZW46ISFjfSl9KSxjKW4uZHJvcGRvd25NZW51VGVtcGxhdGVVcmwmJmsobi5kcm9wZG93bk1lbnVUZW1wbGF0ZVVybCkudGhlbihmdW5jdGlvbihhKXtsPW8uJG5ldygpLGooYS50cmltKCkpKGwsZnVuY3Rpb24oYSl7dmFyIGI9YTtuLmRyb3Bkb3duTWVudS5yZXBsYWNlV2l0aChiKSxuLmRyb3Bkb3duTWVudT1ifSl9KSxvLmZvY3VzVG9nZ2xlRWxlbWVudCgpLGYub3BlbihvKTtlbHNle2lmKG4uZHJvcGRvd25NZW51VGVtcGxhdGVVcmwpe2wmJmwuJGRlc3Ryb3koKTt2YXIgdD1hbmd1bGFyLmVsZW1lbnQoJzx1bCBjbGFzcz0iZHJvcGRvd24tbWVudSI+PC91bD4nKTtuLmRyb3Bkb3duTWVudS5yZXBsYWNlV2l0aCh0KSxuLmRyb3Bkb3duTWVudT10fWYuY2xvc2Uobyksbi5zZWxlY3RlZE9wdGlvbj1udWxsfWFuZ3VsYXIuaXNGdW5jdGlvbihxKSYmcShhLGMpfSksYS4kb24oIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MiLGZ1bmN0aW9uKCl7ImRpc2FibGVkIiE9PW8uZ2V0QXV0b0Nsb3NlKCkmJihvLmlzT3Blbj0hMSl9KTt2YXIgdT1hLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7by4kZGVzdHJveSgpfSk7by4kb24oIiRkZXN0cm95Iix1KX1dKS5kaXJlY3RpdmUoInVpYkRyb3Bkb3duIixmdW5jdGlvbigpe3JldHVybntjb250cm9sbGVyOiJVaWJEcm9wZG93bkNvbnRyb2xsZXIiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5pbml0KCl9fX0pLmRpcmVjdGl2ZSgidWliRHJvcGRvd25NZW51IixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiQUMiLHJlcXVpcmU6Ij9edWliRHJvcGRvd24iLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoZCYmIWFuZ3VsYXIuaXNEZWZpbmVkKGMuZHJvcGRvd25OZXN0ZWQpKXtiLmFkZENsYXNzKCJkcm9wZG93bi1tZW51Iik7dmFyIGU9Yy50ZW1wbGF0ZVVybDtlJiYoZC5kcm9wZG93bk1lbnVUZW1wbGF0ZVVybD1lKSxkLmRyb3Bkb3duTWVudXx8KGQuZHJvcGRvd25NZW51PWIpfX19fSkuZGlyZWN0aXZlKCJ1aWJLZXlib2FyZE5hdiIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6Ij9edWliRHJvcGRvd24iLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7Yi5iaW5kKCJrZXlkb3duIixmdW5jdGlvbihhKXtpZigtMSE9PVszOCw0MF0uaW5kZXhPZihhLndoaWNoKSl7YS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGI9ZC5kcm9wZG93bk1lbnUuZmluZCgiYSIpO3N3aXRjaChhLndoaWNoKXtjYXNlIDQwOmFuZ3VsYXIuaXNOdW1iZXIoZC5zZWxlY3RlZE9wdGlvbik/ZC5zZWxlY3RlZE9wdGlvbj1kLnNlbGVjdGVkT3B0aW9uPT09Yi5sZW5ndGgtMT9kLnNlbGVjdGVkT3B0aW9uOmQuc2VsZWN0ZWRPcHRpb24rMTpkLnNlbGVjdGVkT3B0aW9uPTA7YnJlYWs7Y2FzZSAzODphbmd1bGFyLmlzTnVtYmVyKGQuc2VsZWN0ZWRPcHRpb24pP2Quc2VsZWN0ZWRPcHRpb249MD09PWQuc2VsZWN0ZWRPcHRpb24/MDpkLnNlbGVjdGVkT3B0aW9uLTE6ZC5zZWxlY3RlZE9wdGlvbj1iLmxlbmd0aC0xfWJbZC5zZWxlY3RlZE9wdGlvbl0uZm9jdXMoKX19KX19fSkuZGlyZWN0aXZlKCJ1aWJEcm9wZG93blRvZ2dsZSIsZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZToiP151aWJEcm9wZG93biIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtpZihkKXtiLmFkZENsYXNzKCJkcm9wZG93bi10b2dnbGUiKSxkLnRvZ2dsZUVsZW1lbnQ9Yjt2YXIgZT1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksYi5oYXNDbGFzcygiZGlzYWJsZWQiKXx8Yy5kaXNhYmxlZHx8YS4kYXBwbHkoZnVuY3Rpb24oKXtkLnRvZ2dsZSgpfSl9O2IuYmluZCgiY2xpY2siLGUpLGIuYXR0cih7ImFyaWEtaGFzcG9wdXAiOiEwLCJhcmlhLWV4cGFuZGVkIjohMX0pLGEuJHdhdGNoKGQuaXNPcGVuLGZ1bmN0aW9uKGEpe2IuYXR0cigiYXJpYS1leHBhbmRlZCIsISFhKX0pLGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtiLnVuYmluZCgiY2xpY2siLGUpfSl9fX19KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLmRyb3Bkb3duIikudmFsdWUoIiRkcm9wZG93blN1cHByZXNzV2FybmluZyIsITEpLnNlcnZpY2UoImRyb3Bkb3duU2VydmljZSIsWyIkbG9nIiwiJGRyb3Bkb3duU3VwcHJlc3NXYXJuaW5nIiwidWliRHJvcGRvd25TZXJ2aWNlIixmdW5jdGlvbihhLGIsYyl7Ynx8YS53YXJuKCJkcm9wZG93blNlcnZpY2UgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWJEcm9wZG93blNlcnZpY2UgaW5zdGVhZC4iKSxhbmd1bGFyLmV4dGVuZCh0aGlzLGMpfV0pLmNvbnRyb2xsZXIoIkRyb3Bkb3duQ29udHJvbGxlciIsWyIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsIiRwYXJzZSIsInVpYkRyb3Bkb3duQ29uZmlnIiwidWliRHJvcGRvd25TZXJ2aWNlIiwiJGFuaW1hdGUiLCIkdWliUG9zaXRpb24iLCIkZG9jdW1lbnQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkbG9nIiwiJGRyb3Bkb3duU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGssbCxtKXttfHxsLndhcm4oIkRyb3Bkb3duQ29udHJvbGxlciBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIFVpYkRyb3Bkb3duQ29udHJvbGxlciBpbnN0ZWFkLiIpO3ZhciBuLG8scD10aGlzLHE9YS4kbmV3KCkscj1lLm9wZW5DbGFzcyxzPWFuZ3VsYXIubm9vcCx0PWMub25Ub2dnbGU/ZChjLm9uVG9nZ2xlKTphbmd1bGFyLm5vb3AsdT0hMSx2PSExO2IuYWRkQ2xhc3MoImRyb3Bkb3duIiksdGhpcy5pbml0PWZ1bmN0aW9uKCl7Yy5pc09wZW4mJihvPWQoYy5pc09wZW4pLHM9by5hc3NpZ24sYS4kd2F0Y2gobyxmdW5jdGlvbihhKXtxLmlzT3Blbj0hIWF9KSksdT1hbmd1bGFyLmlzRGVmaW5lZChjLmRyb3Bkb3duQXBwZW5kVG9Cb2R5KSx2PWFuZ3VsYXIuaXNEZWZpbmVkKGMudWliS2V5Ym9hcmROYXYpLHUmJnAuZHJvcGRvd25NZW51JiYoaS5maW5kKCJib2R5IikuYXBwZW5kKHAuZHJvcGRvd25NZW51KSxiLm9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtwLmRyb3Bkb3duTWVudS5yZW1vdmUoKX0pKX0sdGhpcy50b2dnbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHEuaXNPcGVuPWFyZ3VtZW50cy5sZW5ndGg/ISFhOiFxLmlzT3Blbn0sdGhpcy5pc09wZW49ZnVuY3Rpb24oKXtyZXR1cm4gcS5pc09wZW59LHEuZ2V0VG9nZ2xlRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBwLnRvZ2dsZUVsZW1lbnR9LHEuZ2V0QXV0b0Nsb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIGMuYXV0b0Nsb3NlfHwiYWx3YXlzIn0scS5nZXRFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGJ9LHEuaXNLZXluYXZFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHZ9LHEuZm9jdXNEcm9wZG93bkVudHJ5PWZ1bmN0aW9uKGEpe3ZhciBjPXAuZHJvcGRvd25NZW51P2FuZ3VsYXIuZWxlbWVudChwLmRyb3Bkb3duTWVudSkuZmluZCgiYSIpOmFuZ3VsYXIuZWxlbWVudChiKS5maW5kKCJ1bCIpLmVxKDApLmZpbmQoImEiKTtzd2l0Y2goYSl7Y2FzZSA0MDphbmd1bGFyLmlzTnVtYmVyKHAuc2VsZWN0ZWRPcHRpb24pP3Auc2VsZWN0ZWRPcHRpb249cC5zZWxlY3RlZE9wdGlvbj09PWMubGVuZ3RoLTE/cC5zZWxlY3RlZE9wdGlvbjpwLnNlbGVjdGVkT3B0aW9uKzE6cC5zZWxlY3RlZE9wdGlvbj0wO2JyZWFrO2Nhc2UgMzg6YW5ndWxhci5pc051bWJlcihwLnNlbGVjdGVkT3B0aW9uKT9wLnNlbGVjdGVkT3B0aW9uPTA9PT1wLnNlbGVjdGVkT3B0aW9uPzA6cC5zZWxlY3RlZE9wdGlvbi0xOnAuc2VsZWN0ZWRPcHRpb249Yy5sZW5ndGgtMX1jW3Auc2VsZWN0ZWRPcHRpb25dLmZvY3VzKCl9LHEuZ2V0RHJvcGRvd25FbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHAuZHJvcGRvd25NZW51fSxxLmZvY3VzVG9nZ2xlRWxlbWVudD1mdW5jdGlvbigpe3AudG9nZ2xlRWxlbWVudCYmcC50b2dnbGVFbGVtZW50WzBdLmZvY3VzKCl9LHEuJHdhdGNoKCJpc09wZW4iLGZ1bmN0aW9uKGMsZCl7aWYodSYmcC5kcm9wZG93bk1lbnUpe3ZhciBlPWgucG9zaXRpb25FbGVtZW50cyhiLHAuZHJvcGRvd25NZW51LCJib3R0b20tbGVmdCIsITApLGk9e3RvcDplLnRvcCsicHgiLGRpc3BsYXk6Yz8iYmxvY2siOiJub25lIn0sbD1wLmRyb3Bkb3duTWVudS5oYXNDbGFzcygiZHJvcGRvd24tbWVudS1yaWdodCIpO2w/KGkubGVmdD0iYXV0byIsaS5yaWdodD13aW5kb3cuaW5uZXJXaWR0aC0oZS5sZWZ0K2IucHJvcCgib2Zmc2V0V2lkdGgiKSkrInB4Iik6KGkubGVmdD1lLmxlZnQrInB4IixpLnJpZ2h0PSJhdXRvIikscC5kcm9wZG93bk1lbnUuY3NzKGkpfWlmKGdbYz8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKGIscikudGhlbihmdW5jdGlvbigpe2FuZ3VsYXIuaXNEZWZpbmVkKGMpJiZjIT09ZCYmdChhLHtvcGVuOiEhY30pfSksYylwLmRyb3Bkb3duTWVudVRlbXBsYXRlVXJsJiZrKHAuZHJvcGRvd25NZW51VGVtcGxhdGVVcmwpLnRoZW4oZnVuY3Rpb24oYSl7bj1xLiRuZXcoKSxqKGEudHJpbSgpKShuLGZ1bmN0aW9uKGEpe3ZhciBiPWE7cC5kcm9wZG93bk1lbnUucmVwbGFjZVdpdGgoYikscC5kcm9wZG93bk1lbnU9Yn0pfSkscS5mb2N1c1RvZ2dsZUVsZW1lbnQoKSxmLm9wZW4ocSk7ZWxzZXtpZihwLmRyb3Bkb3duTWVudVRlbXBsYXRlVXJsKXtuJiZuLiRkZXN0cm95KCk7dmFyIG09YW5ndWxhci5lbGVtZW50KCc8dWwgY2xhc3M9ImRyb3Bkb3duLW1lbnUiPjwvdWw+Jyk7cC5kcm9wZG93bk1lbnUucmVwbGFjZVdpdGgobSkscC5kcm9wZG93bk1lbnU9bX1mLmNsb3NlKHEpLHAuc2VsZWN0ZWRPcHRpb249bnVsbH1hbmd1bGFyLmlzRnVuY3Rpb24ocykmJnMoYSxjKX0pLGEuJG9uKCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzIixmdW5jdGlvbigpeyJkaXNhYmxlZCIhPT1xLmdldEF1dG9DbG9zZSgpJiYocS5pc09wZW49ITEpfSk7dmFyIHc9YS4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe3EuJGRlc3Ryb3koKX0pO3EuJG9uKCIkZGVzdHJveSIsdyl9XSkuZGlyZWN0aXZlKCJkcm9wZG93biIsWyIkbG9nIiwiJGRyb3Bkb3duU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntjb250cm9sbGVyOiJEcm9wZG93bkNvbnRyb2xsZXIiLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7Ynx8YS53YXJuKCJkcm9wZG93biBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1kcm9wZG93biBpbnN0ZWFkLiIpLGYuaW5pdCgpfX19XSkuZGlyZWN0aXZlKCJkcm9wZG93bk1lbnUiLFsiJGxvZyIsIiRkcm9wZG93blN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVzdHJpY3Q6IkFDIixyZXF1aXJlOiI/XmRyb3Bkb3duIixsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2lmKGYmJiFhbmd1bGFyLmlzRGVmaW5lZChlLmRyb3Bkb3duTmVzdGVkKSl7Ynx8YS53YXJuKCJkcm9wZG93bi1tZW51IGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLWRyb3Bkb3duLW1lbnUgaW5zdGVhZC4iKSxkLmFkZENsYXNzKCJkcm9wZG93bi1tZW51Iik7dmFyIGc9ZS50ZW1wbGF0ZVVybDtnJiYoZi5kcm9wZG93bk1lbnVUZW1wbGF0ZVVybD1nKSxmLmRyb3Bkb3duTWVudXx8KGYuZHJvcGRvd25NZW51PWQpfX19fV0pLmRpcmVjdGl2ZSgia2V5Ym9hcmROYXYiLFsiJGxvZyIsIiRkcm9wZG93blN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6Ij9eZHJvcGRvd24iLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7Ynx8YS53YXJuKCJrZXlib2FyZC1uYXYgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWIta2V5Ym9hcmQtbmF2IGluc3RlYWQuIiksZC5iaW5kKCJrZXlkb3duIixmdW5jdGlvbihhKXtpZigtMSE9PVszOCw0MF0uaW5kZXhPZihhLndoaWNoKSl7YS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGI9Zi5kcm9wZG93bk1lbnUuZmluZCgiYSIpO3N3aXRjaChhLndoaWNoKXtjYXNlIDQwOmFuZ3VsYXIuaXNOdW1iZXIoZi5zZWxlY3RlZE9wdGlvbik/Zi5zZWxlY3RlZE9wdGlvbj1mLnNlbGVjdGVkT3B0aW9uPT09Yi5sZW5ndGgtMT9mLnNlbGVjdGVkT3B0aW9uOmYuc2VsZWN0ZWRPcHRpb24rMTpmLnNlbGVjdGVkT3B0aW9uPTA7YnJlYWs7Y2FzZSAzODphbmd1bGFyLmlzTnVtYmVyKGYuc2VsZWN0ZWRPcHRpb24pP2Yuc2VsZWN0ZWRPcHRpb249MD09PWYuc2VsZWN0ZWRPcHRpb24/MDpmLnNlbGVjdGVkT3B0aW9uLTE6Zi5zZWxlY3RlZE9wdGlvbj1iLmxlbmd0aC0xfWJbZi5zZWxlY3RlZE9wdGlvbl0uZm9jdXMoKX19KX19fV0pLmRpcmVjdGl2ZSgiZHJvcGRvd25Ub2dnbGUiLFsiJGxvZyIsIiRkcm9wZG93blN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVxdWlyZToiP15kcm9wZG93biIsbGluazpmdW5jdGlvbihjLGQsZSxmKXtpZihifHxhLndhcm4oImRyb3Bkb3duLXRvZ2dsZSBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1kcm9wZG93bi10b2dnbGUgaW5zdGVhZC4iKSxmKXtkLmFkZENsYXNzKCJkcm9wZG93bi10b2dnbGUiKSxmLnRvZ2dsZUVsZW1lbnQ9ZDt2YXIgZz1mdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksZC5oYXNDbGFzcygiZGlzYWJsZWQiKXx8ZS5kaXNhYmxlZHx8Yy4kYXBwbHkoZnVuY3Rpb24oKXtmLnRvZ2dsZSgpfSl9O2QuYmluZCgiY2xpY2siLGcpLGQuYXR0cih7ImFyaWEtaGFzcG9wdXAiOiEwLCJhcmlhLWV4cGFuZGVkIjohMX0pLGMuJHdhdGNoKGYuaXNPcGVuLGZ1bmN0aW9uKGEpe2QuYXR0cigiYXJpYS1leHBhbmRlZCIsISFhKX0pLGMuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtkLnVuYmluZCgiY2xpY2siLGcpfSl9fX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5zdGFja2VkTWFwIixbXSkuZmFjdG9yeSgiJCRzdGFja2VkTWFwIixmdW5jdGlvbigpe3JldHVybntjcmVhdGVOZXc6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm57YWRkOmZ1bmN0aW9uKGIsYyl7YS5wdXNoKHtrZXk6Yix2YWx1ZTpjfSl9LGdldDpmdW5jdGlvbihiKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylpZihiPT1hW2NdLmtleSlyZXR1cm4gYVtjXX0sa2V5czpmdW5jdGlvbigpe2Zvcih2YXIgYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspYi5wdXNoKGFbY10ua2V5KTtyZXR1cm4gYn0sdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIGFbYS5sZW5ndGgtMV19LHJlbW92ZTpmdW5jdGlvbihiKXtmb3IodmFyIGM9LTEsZD0wO2Q8YS5sZW5ndGg7ZCsrKWlmKGI9PWFbZF0ua2V5KXtjPWQ7YnJlYWt9cmV0dXJuIGEuc3BsaWNlKGMsMSlbMF19LHJlbW92ZVRvcDpmdW5jdGlvbigpe3JldHVybiBhLnNwbGljZShhLmxlbmd0aC0xLDEpWzBdfSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gYS5sZW5ndGh9fX19fSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5tb2RhbCIsWyJ1aS5ib290c3RyYXAuc3RhY2tlZE1hcCJdKS5mYWN0b3J5KCIkJG11bHRpTWFwIixmdW5jdGlvbigpe3JldHVybntjcmVhdGVOZXc6ZnVuY3Rpb24oKXt2YXIgYT17fTtyZXR1cm57ZW50cmllczpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24oYil7cmV0dXJue2tleTpiLHZhbHVlOmFbYl19fSl9LGdldDpmdW5jdGlvbihiKXtyZXR1cm4gYVtiXX0saGFzS2V5OmZ1bmN0aW9uKGIpe3JldHVybiEhYVtiXX0sa2V5czpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhhKX0scHV0OmZ1bmN0aW9uKGIsYyl7YVtiXXx8KGFbYl09W10pLGFbYl0ucHVzaChjKX0scmVtb3ZlOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9YVtiXTtpZihkKXt2YXIgZT1kLmluZGV4T2YoYyk7LTEhPT1lJiZkLnNwbGljZShlLDEpLGQubGVuZ3RofHxkZWxldGUgYVtiXX19fX19fSkuZGlyZWN0aXZlKCJ1aWJNb2RhbEJhY2tkcm9wIixbIiRhbmltYXRlIiwiJGluamVjdG9yIiwiJHVpYk1vZGFsU3RhY2siLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGIsZCxmKXtkLmFkZENsYXNzKCJtb2RhbC1iYWNrZHJvcCIpLGYubW9kYWxJbkNsYXNzJiYoZT9lKGQse2FkZENsYXNzOmYubW9kYWxJbkNsYXNzfSkuc3RhcnQoKTphLmFkZENsYXNzKGQsZi5tb2RhbEluQ2xhc3MpLGIuJG9uKGMuTk9XX0NMT1NJTkdfRVZFTlQsZnVuY3Rpb24oYixjKXt2YXIgZz1jKCk7ZT9lKGQse3JlbW92ZUNsYXNzOmYubW9kYWxJbkNsYXNzfSkuc3RhcnQoKS50aGVuKGcpOmEucmVtb3ZlQ2xhc3MoZCxmLm1vZGFsSW5DbGFzcykudGhlbihnKX0pKX12YXIgZT1udWxsO3JldHVybiBiLmhhcygiJGFuaW1hdGVDc3MiKSYmKGU9Yi5nZXQoIiRhbmltYXRlQ3NzIikpLHtyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sIixjb21waWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuYWRkQ2xhc3MoYi5iYWNrZHJvcENsYXNzKSxkfX19XSkuZGlyZWN0aXZlKCJ1aWJNb2RhbFdpbmRvdyIsWyIkdWliTW9kYWxTdGFjayIsIiRxIiwiJGFuaW1hdGUiLCIkaW5qZWN0b3IiLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW51bGw7cmV0dXJuIGQuaGFzKCIkYW5pbWF0ZUNzcyIpJiYoZT1kLmdldCgiJGFuaW1hdGVDc3MiKSkse3Njb3BlOntpbmRleDoiQCJ9LHJlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWwifSxsaW5rOmZ1bmN0aW9uKGQsZixnKXtmLmFkZENsYXNzKGcud2luZG93Q2xhc3N8fCIiKSxmLmFkZENsYXNzKGcud2luZG93VG9wQ2xhc3N8fCIiKSxkLnNpemU9Zy5zaXplLGQuY2xvc2U9ZnVuY3Rpb24oYil7dmFyIGM9YS5nZXRUb3AoKTtjJiZjLnZhbHVlLmJhY2tkcm9wJiYic3RhdGljIiE9PWMudmFsdWUuYmFja2Ryb3AmJmIudGFyZ2V0PT09Yi5jdXJyZW50VGFyZ2V0JiYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCksYS5kaXNtaXNzKGMua2V5LCJiYWNrZHJvcCBjbGljayIpKX0sZi5vbigiY2xpY2siLGQuY2xvc2UpLGQuJGlzUmVuZGVyZWQ9ITA7dmFyIGg9Yi5kZWZlcigpO2cuJG9ic2VydmUoIm1vZGFsUmVuZGVyIixmdW5jdGlvbihhKXsidHJ1ZSI9PWEmJmgucmVzb2x2ZSgpfSksaC5wcm9taXNlLnRoZW4oZnVuY3Rpb24oKXt2YXIgaD1udWxsO2cubW9kYWxJbkNsYXNzJiYoaD1lP2UoZix7YWRkQ2xhc3M6Zy5tb2RhbEluQ2xhc3N9KS5zdGFydCgpOmMuYWRkQ2xhc3MoZixnLm1vZGFsSW5DbGFzcyksZC4kb24oYS5OT1dfQ0xPU0lOR19FVkVOVCxmdW5jdGlvbihhLGIpe3ZhciBkPWIoKTtlP2UoZix7cmVtb3ZlQ2xhc3M6Zy5tb2RhbEluQ2xhc3N9KS5zdGFydCgpLnRoZW4oZCk6Yy5yZW1vdmVDbGFzcyhmLGcubW9kYWxJbkNsYXNzKS50aGVuKGQpfSkpLGIud2hlbihoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGE9ZlswXS5xdWVyeVNlbGVjdG9yKCJbYXV0b2ZvY3VzXSIpO2E/YS5mb2N1cygpOmZbMF0uZm9jdXMoKX0pO3ZhciBpPWEuZ2V0VG9wKCk7aSYmYS5tb2RhbFJlbmRlcmVkKGkua2V5KX0pfX19XSkuZGlyZWN0aXZlKCJ1aWJNb2RhbEFuaW1hdGlvbkNsYXNzIixmdW5jdGlvbigpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGEsYil7Yi5tb2RhbEFuaW1hdGlvbiYmYS5hZGRDbGFzcyhiLnVpYk1vZGFsQW5pbWF0aW9uQ2xhc3MpfX19KS5kaXJlY3RpdmUoInVpYk1vZGFsVHJhbnNjbHVkZSIsZnVuY3Rpb24oKXtyZXR1cm57bGluazpmdW5jdGlvbihhLGIsYyxkLGUpe2UoYS4kcGFyZW50LGZ1bmN0aW9uKGEpe2IuZW1wdHkoKSxiLmFwcGVuZChhKX0pfX19KS5mYWN0b3J5KCIkdWliTW9kYWxTdGFjayIsWyIkYW5pbWF0ZSIsIiR0aW1lb3V0IiwiJGRvY3VtZW50IiwiJGNvbXBpbGUiLCIkcm9vdFNjb3BlIiwiJHEiLCIkaW5qZWN0b3IiLCIkJG11bHRpTWFwIiwiJCRzdGFja2VkTWFwIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7ZnVuY3Rpb24gaigpe2Zvcih2YXIgYT0tMSxiPXUua2V5cygpLGM9MDtjPGIubGVuZ3RoO2MrKyl1LmdldChiW2NdKS52YWx1ZS5iYWNrZHJvcCYmKGE9Yyk7cmV0dXJuIGF9ZnVuY3Rpb24gayhhLGIpe3ZhciBkPWMuZmluZCgiYm9keSIpLmVxKDApLGU9dS5nZXQoYSkudmFsdWU7dS5yZW1vdmUoYSksbihlLm1vZGFsRG9tRWwsZS5tb2RhbFNjb3BlLGZ1bmN0aW9uKCl7dmFyIGI9ZS5vcGVuZWRDbGFzc3x8dDt2LnJlbW92ZShiLGEpLGQudG9nZ2xlQ2xhc3MoYix2Lmhhc0tleShiKSksbCghMCl9KSxtKCksYiYmYi5mb2N1cz9iLmZvY3VzKCk6ZC5mb2N1cygpfWZ1bmN0aW9uIGwoYSl7dmFyIGI7dS5sZW5ndGgoKT4wJiYoYj11LnRvcCgpLnZhbHVlLGIubW9kYWxEb21FbC50b2dnbGVDbGFzcyhiLndpbmRvd1RvcENsYXNzfHwiIixhKSl9ZnVuY3Rpb24gbSgpe2lmKHEmJi0xPT1qKCkpe3ZhciBhPXI7bihxLHIsZnVuY3Rpb24oKXthPW51bGx9KSxxPXZvaWQgMCxyPXZvaWQgMH19ZnVuY3Rpb24gbihiLGMsZCl7ZnVuY3Rpb24gZSgpe2UuZG9uZXx8KGUuZG9uZT0hMCxwP3AoYix7ZXZlbnQ6ImxlYXZlIn0pLnN0YXJ0KCkudGhlbihmdW5jdGlvbigpe2IucmVtb3ZlKCl9KTphLmxlYXZlKGIpLGMuJGRlc3Ryb3koKSxkJiZkKCkpfXZhciBnLGg9bnVsbCxpPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fChnPWYuZGVmZXIoKSxoPWcucHJvbWlzZSksZnVuY3Rpb24oKXtnLnJlc29sdmUoKX19O3JldHVybiBjLiRicm9hZGNhc3Qody5OT1dfQ0xPU0lOR19FVkVOVCxpKSxmLndoZW4oaCkudGhlbihlKX1mdW5jdGlvbiBvKGEsYixjKXtyZXR1cm4hYS52YWx1ZS5tb2RhbFNjb3BlLiRicm9hZGNhc3QoIm1vZGFsLmNsb3NpbmciLGIsYykuZGVmYXVsdFByZXZlbnRlZH12YXIgcD1udWxsO2cuaGFzKCIkYW5pbWF0ZUNzcyIpJiYocD1nLmdldCgiJGFuaW1hdGVDc3MiKSk7dmFyIHEscixzLHQ9Im1vZGFsLW9wZW4iLHU9aS5jcmVhdGVOZXcoKSx2PWguY3JlYXRlTmV3KCksdz17Tk9XX0NMT1NJTkdfRVZFTlQ6Im1vZGFsLnN0YWNrLm5vdy1jbG9zaW5nIn0seD0wLHk9ImFbaHJlZl0sIGFyZWFbaHJlZl0sIGlucHV0Om5vdChbZGlzYWJsZWRdKSwgYnV0dG9uOm5vdChbZGlzYWJsZWRdKSxzZWxlY3Q6bm90KFtkaXNhYmxlZF0pLCB0ZXh0YXJlYTpub3QoW2Rpc2FibGVkXSksIGlmcmFtZSwgb2JqZWN0LCBlbWJlZCwgKlt0YWJpbmRleF0sICpbY29udGVudGVkaXRhYmxlPXRydWVdIjtyZXR1cm4gZS4kd2F0Y2goaixmdW5jdGlvbihhKXtyJiYoci5pbmRleD1hKX0pLGMuYmluZCgia2V5ZG93biIsZnVuY3Rpb24oYSl7aWYoYS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm4gYTt2YXIgYj11LnRvcCgpO2lmKGImJmIudmFsdWUua2V5Ym9hcmQpc3dpdGNoKGEud2hpY2gpe2Nhc2UgMjc6YS5wcmV2ZW50RGVmYXVsdCgpLGUuJGFwcGx5KGZ1bmN0aW9uKCl7dy5kaXNtaXNzKGIua2V5LCJlc2NhcGUga2V5IHByZXNzIil9KTticmVhaztjYXNlIDk6dy5sb2FkRm9jdXNFbGVtZW50TGlzdChiKTt2YXIgYz0hMTthLnNoaWZ0S2V5P3cuaXNGb2N1c0luRmlyc3RJdGVtKGEpJiYoYz13LmZvY3VzTGFzdEZvY3VzYWJsZUVsZW1lbnQoKSk6dy5pc0ZvY3VzSW5MYXN0SXRlbShhKSYmKGM9dy5mb2N1c0ZpcnN0Rm9jdXNhYmxlRWxlbWVudCgpKSxjJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpfX0pLHcub3Blbj1mdW5jdGlvbihhLGIpe3ZhciBmPWNbMF0uYWN0aXZlRWxlbWVudCxnPWIub3BlbmVkQ2xhc3N8fHQ7bCghMSksdS5hZGQoYSx7ZGVmZXJyZWQ6Yi5kZWZlcnJlZCxyZW5kZXJEZWZlcnJlZDpiLnJlbmRlckRlZmVycmVkLG1vZGFsU2NvcGU6Yi5zY29wZSxiYWNrZHJvcDpiLmJhY2tkcm9wLGtleWJvYXJkOmIua2V5Ym9hcmQsb3BlbmVkQ2xhc3M6Yi5vcGVuZWRDbGFzcyx3aW5kb3dUb3BDbGFzczpiLndpbmRvd1RvcENsYXNzfSksdi5wdXQoZyxhKTt2YXIgaD1jLmZpbmQoImJvZHkiKS5lcSgwKSxpPWooKTtpZihpPj0wJiYhcSl7cj1lLiRuZXcoITApLHIuaW5kZXg9aTt2YXIgaz1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgdWliLW1vZGFsLWJhY2tkcm9wPSJtb2RhbC1iYWNrZHJvcCI+PC9kaXY+Jyk7ay5hdHRyKCJiYWNrZHJvcC1jbGFzcyIsYi5iYWNrZHJvcENsYXNzKSxiLmFuaW1hdGlvbiYmay5hdHRyKCJtb2RhbC1hbmltYXRpb24iLCJ0cnVlIikscT1kKGspKHIpLGguYXBwZW5kKHEpfXZhciBtPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiB1aWItbW9kYWwtd2luZG93PSJtb2RhbC13aW5kb3ciPjwvZGl2PicpO20uYXR0cih7InRlbXBsYXRlLXVybCI6Yi53aW5kb3dUZW1wbGF0ZVVybCwid2luZG93LWNsYXNzIjpiLndpbmRvd0NsYXNzLCJ3aW5kb3ctdG9wLWNsYXNzIjpiLndpbmRvd1RvcENsYXNzLHNpemU6Yi5zaXplLGluZGV4OnUubGVuZ3RoKCktMSxhbmltYXRlOiJhbmltYXRlIn0pLmh0bWwoYi5jb250ZW50KSxiLmFuaW1hdGlvbiYmbS5hdHRyKCJtb2RhbC1hbmltYXRpb24iLCJ0cnVlIik7dmFyIG49ZChtKShiLnNjb3BlKTt1LnRvcCgpLnZhbHVlLm1vZGFsRG9tRWw9bix1LnRvcCgpLnZhbHVlLm1vZGFsT3BlbmVyPWYsaC5hcHBlbmQobiksaC5hZGRDbGFzcyhnKSx3LmNsZWFyRm9jdXNMaXN0Q2FjaGUoKX0sdy5jbG9zZT1mdW5jdGlvbihhLGIpe3ZhciBjPXUuZ2V0KGEpO3JldHVybiBjJiZvKGMsYiwhMCk/KGMudmFsdWUubW9kYWxTY29wZS4kJHVpYkRlc3RydWN0aW9uU2NoZWR1bGVkPSEwLGMudmFsdWUuZGVmZXJyZWQucmVzb2x2ZShiKSxrKGEsYy52YWx1ZS5tb2RhbE9wZW5lciksITApOiFjfSx3LmRpc21pc3M9ZnVuY3Rpb24oYSxiKXt2YXIgYz11LmdldChhKTtyZXR1cm4gYyYmbyhjLGIsITEpPyhjLnZhbHVlLm1vZGFsU2NvcGUuJCR1aWJEZXN0cnVjdGlvblNjaGVkdWxlZD0hMCxjLnZhbHVlLmRlZmVycmVkLnJlamVjdChiKSxrKGEsYy52YWx1ZS5tb2RhbE9wZW5lciksITApOiFjfSx3LmRpc21pc3NBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0VG9wKCk7YiYmdGhpcy5kaXNtaXNzKGIua2V5LGEpOyliPXRoaXMuZ2V0VG9wKCl9LHcuZ2V0VG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHUudG9wKCl9LHcubW9kYWxSZW5kZXJlZD1mdW5jdGlvbihhKXt2YXIgYj11LmdldChhKTtiJiZiLnZhbHVlLnJlbmRlckRlZmVycmVkLnJlc29sdmUoKX0sdy5mb2N1c0ZpcnN0Rm9jdXNhYmxlRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBzLmxlbmd0aD4wPyhzWzBdLmZvY3VzKCksITApOiExfSx3LmZvY3VzTGFzdEZvY3VzYWJsZUVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcy5sZW5ndGg+MD8oc1tzLmxlbmd0aC0xXS5mb2N1cygpLCEwKTohMX0sdy5pc0ZvY3VzSW5GaXJzdEl0ZW09ZnVuY3Rpb24oYSl7cmV0dXJuIHMubGVuZ3RoPjA/KGEudGFyZ2V0fHxhLnNyY0VsZW1lbnQpPT1zWzBdOiExfSx3LmlzRm9jdXNJbkxhc3RJdGVtPWZ1bmN0aW9uKGEpe3JldHVybiBzLmxlbmd0aD4wPyhhLnRhcmdldHx8YS5zcmNFbGVtZW50KT09c1tzLmxlbmd0aC0xXTohMX0sdy5jbGVhckZvY3VzTGlzdENhY2hlPWZ1bmN0aW9uKCl7cz1bXSx4PTB9LHcubG9hZEZvY3VzRWxlbWVudExpc3Q9ZnVuY3Rpb24oYSl7aWYoKHZvaWQgMD09PXN8fCFzLmxlbmd0aCkmJmEpe3ZhciBiPWEudmFsdWUubW9kYWxEb21FbDtiJiZiLmxlbmd0aCYmKHM9YlswXS5xdWVyeVNlbGVjdG9yQWxsKHkpKX19LHd9XSkucHJvdmlkZXIoIiR1aWJNb2RhbCIsZnVuY3Rpb24oKXt2YXIgYT17b3B0aW9uczp7YW5pbWF0aW9uOiEwLGJhY2tkcm9wOiEwLGtleWJvYXJkOiEwfSwkZ2V0OlsiJGluamVjdG9yIiwiJHJvb3RTY29wZSIsIiRxIiwiJHRlbXBsYXRlUmVxdWVzdCIsIiRjb250cm9sbGVyIiwiJHVpYk1vZGFsU3RhY2siLCIkbW9kYWxTdXBwcmVzc1dhcm5pbmciLCIkbG9nIixmdW5jdGlvbihiLGMsZCxlLGYsZyxoLGkpe2Z1bmN0aW9uIGooYSl7cmV0dXJuIGEudGVtcGxhdGU/ZC53aGVuKGEudGVtcGxhdGUpOmUoYW5ndWxhci5pc0Z1bmN0aW9uKGEudGVtcGxhdGVVcmwpP2EudGVtcGxhdGVVcmwoKTphLnRlbXBsYXRlVXJsKX1mdW5jdGlvbiBrKGEpe3ZhciBjPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXthbmd1bGFyLmlzRnVuY3Rpb24oYSl8fGFuZ3VsYXIuaXNBcnJheShhKT9jLnB1c2goZC53aGVuKGIuaW52b2tlKGEpKSk6YW5ndWxhci5pc1N0cmluZyhhKT9jLnB1c2goZC53aGVuKGIuZ2V0KGEpKSk6Yy5wdXNoKGQud2hlbihhKSl9KSxjfXZhciBsPXt9LG09bnVsbDtyZXR1cm4gbC5nZXRQcm9taXNlQ2hhaW49ZnVuY3Rpb24oKXtyZXR1cm4gbX0sbC5vcGVuPWZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcn12YXIgbD1kLmRlZmVyKCksbj1kLmRlZmVyKCksbz1kLmRlZmVyKCkscD17cmVzdWx0OmwucHJvbWlzZSxvcGVuZWQ6bi5wcm9taXNlLHJlbmRlcmVkOm8ucHJvbWlzZSxjbG9zZTpmdW5jdGlvbihhKXtyZXR1cm4gZy5jbG9zZShwLGEpfSxkaXNtaXNzOmZ1bmN0aW9uKGEpe3JldHVybiBnLmRpc21pc3MocCxhKX19O2lmKGI9YW5ndWxhci5leHRlbmQoe30sYS5vcHRpb25zLGIpLGIucmVzb2x2ZT1iLnJlc29sdmV8fHt9LCFiLnRlbXBsYXRlJiYhYi50ZW1wbGF0ZVVybCl0aHJvdyBuZXcgRXJyb3IoIk9uZSBvZiB0ZW1wbGF0ZSBvciB0ZW1wbGF0ZVVybCBvcHRpb25zIGlzIHJlcXVpcmVkLiIpO3ZhciBxLHI9ZC5hbGwoW2ooYildLmNvbmNhdChrKGIucmVzb2x2ZSkpKTtyZXR1cm4gcT1tPWQuYWxsKFttXSkudGhlbihlLGUpLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGQ9KGIuc2NvcGV8fGMpLiRuZXcoKTtkLiRjbG9zZT1wLmNsb3NlLGQuJGRpc21pc3M9cC5kaXNtaXNzLGQuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtkLiQkdWliRGVzdHJ1Y3Rpb25TY2hlZHVsZWR8fGQuJGRpc21pc3MoIiR1aWJVbnNjaGVkdWxlZERlc3RydWN0aW9uIil9KTt2YXIgZSxqPXt9LGs9MTtiLmNvbnRyb2xsZXImJihqLiRzY29wZT1kLGouJHVpYk1vZGFsSW5zdGFuY2U9cCxPYmplY3QuZGVmaW5lUHJvcGVydHkoaiwiJG1vZGFsSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaHx8aS53YXJuKCIkbW9kYWxJbnN0YW5jZSBpcyBub3cgZGVwcmVjYXRlZC4gVXNlICR1aWJNb2RhbEluc3RhbmNlIGluc3RlYWQuIikscH19KSxhbmd1bGFyLmZvckVhY2goYi5yZXNvbHZlLGZ1bmN0aW9uKGIsYyl7altjXT1hW2srK119KSxlPWYoYi5jb250cm9sbGVyLGopLGIuY29udHJvbGxlckFzJiYoYi5iaW5kVG9Db250cm9sbGVyJiZhbmd1bGFyLmV4dGVuZChlLGQpLGRbYi5jb250cm9sbGVyQXNdPWUpKSxnLm9wZW4ocCx7c2NvcGU6ZCxkZWZlcnJlZDpsLHJlbmRlckRlZmVycmVkOm8sY29udGVudDphWzBdLGFuaW1hdGlvbjpiLmFuaW1hdGlvbixiYWNrZHJvcDpiLmJhY2tkcm9wLGtleWJvYXJkOmIua2V5Ym9hcmQsYmFja2Ryb3BDbGFzczpiLmJhY2tkcm9wQ2xhc3Msd2luZG93VG9wQ2xhc3M6Yi53aW5kb3dUb3BDbGFzcyx3aW5kb3dDbGFzczpiLndpbmRvd0NsYXNzLHdpbmRvd1RlbXBsYXRlVXJsOmIud2luZG93VGVtcGxhdGVVcmwsc2l6ZTpiLnNpemUsb3BlbmVkQ2xhc3M6Yi5vcGVuZWRDbGFzc30pLG4ucmVzb2x2ZSghMCl9LGZ1bmN0aW9uKGEpe24ucmVqZWN0KGEpLGwucmVqZWN0KGEpfSlbImZpbmFsbHkiXShmdW5jdGlvbigpe209PT1xJiYobT1udWxsKX0pLHB9LGx9XX07cmV0dXJuIGF9KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLm1vZGFsIikudmFsdWUoIiRtb2RhbFN1cHByZXNzV2FybmluZyIsITEpLmRpcmVjdGl2ZSgibW9kYWxCYWNrZHJvcCIsWyIkYW5pbWF0ZSIsIiRpbmplY3RvciIsIiRtb2RhbFN0YWNrIiwiJGxvZyIsIiRtb2RhbFN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCxlKXtmdW5jdGlvbiBmKGIsZixoKXtlfHxkLndhcm4oIm1vZGFsLWJhY2tkcm9wIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLW1vZGFsLWJhY2tkcm9wIGluc3RlYWQuIiksZi5hZGRDbGFzcygibW9kYWwtYmFja2Ryb3AiKSxoLm1vZGFsSW5DbGFzcyYmKGc/ZyhmLHthZGRDbGFzczpoLm1vZGFsSW5DbGFzc30pLnN0YXJ0KCk6YS5hZGRDbGFzcyhmLGgubW9kYWxJbkNsYXNzKSxiLiRvbihjLk5PV19DTE9TSU5HX0VWRU5ULGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YygpO2c/ZyhmLHtyZW1vdmVDbGFzczpoLm1vZGFsSW5DbGFzc30pLnN0YXJ0KCkudGhlbihkKTphLnJlbW92ZUNsYXNzKGYsaC5tb2RhbEluQ2xhc3MpLnRoZW4oZCl9KSl9dmFyIGc9bnVsbDtyZXR1cm4gYi5oYXMoIiRhbmltYXRlQ3NzIikmJihnPWIuZ2V0KCIkYW5pbWF0ZUNzcyIpKSx7cmVwbGFjZTohMCx0ZW1wbGF0ZVVybDoidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbCIsY29tcGlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLmFkZENsYXNzKGIuYmFja2Ryb3BDbGFzcyksZn19fV0pLmRpcmVjdGl2ZSgibW9kYWxXaW5kb3ciLFsiJG1vZGFsU3RhY2siLCIkcSIsIiRhbmltYXRlIiwiJGluamVjdG9yIiwiJGxvZyIsIiRtb2RhbFN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPW51bGw7cmV0dXJuIGQuaGFzKCIkYW5pbWF0ZUNzcyIpJiYoZz1kLmdldCgiJGFuaW1hdGVDc3MiKSkse3Njb3BlOntpbmRleDoiQCJ9LHJlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWwifSxsaW5rOmZ1bmN0aW9uKGQsaCxpKXtmfHxlLndhcm4oIm1vZGFsLXdpbmRvdyBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1tb2RhbC13aW5kb3cgaW5zdGVhZC4iKSxoLmFkZENsYXNzKGkud2luZG93Q2xhc3N8fCIiKSxoLmFkZENsYXNzKGkud2luZG93VG9wQ2xhc3N8fCIiKSxkLnNpemU9aS5zaXplLGQuY2xvc2U9ZnVuY3Rpb24oYil7dmFyIGM9YS5nZXRUb3AoKTtjJiZjLnZhbHVlLmJhY2tkcm9wJiYic3RhdGljIiE9PWMudmFsdWUuYmFja2Ryb3AmJmIudGFyZ2V0PT09Yi5jdXJyZW50VGFyZ2V0JiYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCksYS5kaXNtaXNzKGMua2V5LCJiYWNrZHJvcCBjbGljayIpKX0saC5vbigiY2xpY2siLGQuY2xvc2UpLGQuJGlzUmVuZGVyZWQ9ITA7dmFyIGo9Yi5kZWZlcigpO2kuJG9ic2VydmUoIm1vZGFsUmVuZGVyIixmdW5jdGlvbihhKXsidHJ1ZSI9PWEmJmoucmVzb2x2ZSgpfSksai5wcm9taXNlLnRoZW4oZnVuY3Rpb24oKXt2YXIgZT1udWxsO2kubW9kYWxJbkNsYXNzJiYoZT1nP2coaCx7YWRkQ2xhc3M6aS5tb2RhbEluQ2xhc3N9KS5zdGFydCgpOmMuYWRkQ2xhc3MoaCxpLm1vZGFsSW5DbGFzcyksZC4kb24oYS5OT1dfQ0xPU0lOR19FVkVOVCxmdW5jdGlvbihhLGIpe3ZhciBkPWIoKTtnP2coaCx7cmVtb3ZlQ2xhc3M6aS5tb2RhbEluQ2xhc3N9KS5zdGFydCgpLnRoZW4oZCk6Yy5yZW1vdmVDbGFzcyhoLGkubW9kYWxJbkNsYXNzKS50aGVuKGQpfSkpLGIud2hlbihlKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGE9aFswXS5xdWVyeVNlbGVjdG9yKCJbYXV0b2ZvY3VzXSIpO2E/YS5mb2N1cygpOmhbMF0uZm9jdXMoKX0pO3ZhciBmPWEuZ2V0VG9wKCk7ZiYmYS5tb2RhbFJlbmRlcmVkKGYua2V5KX0pfX19XSkuZGlyZWN0aXZlKCJtb2RhbEFuaW1hdGlvbkNsYXNzIixbIiRsb2ciLCIkbW9kYWxTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue2NvbXBpbGU6ZnVuY3Rpb24oYyxkKXtifHxhLndhcm4oIm1vZGFsLWFuaW1hdGlvbi1jbGFzcyBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1tb2RhbC1hbmltYXRpb24tY2xhc3MgaW5zdGVhZC4iKSxkLm1vZGFsQW5pbWF0aW9uJiZjLmFkZENsYXNzKGQubW9kYWxBbmltYXRpb25DbGFzcyl9fX1dKS5kaXJlY3RpdmUoIm1vZGFsVHJhbnNjbHVkZSIsWyIkbG9nIiwiJG1vZGFsU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntsaW5rOmZ1bmN0aW9uKGMsZCxlLGYsZyl7CmJ8fGEud2FybigibW9kYWwtdHJhbnNjbHVkZSBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1tb2RhbC10cmFuc2NsdWRlIGluc3RlYWQuIiksZyhjLiRwYXJlbnQsZnVuY3Rpb24oYSl7ZC5lbXB0eSgpLGQuYXBwZW5kKGEpfSl9fX1dKS5zZXJ2aWNlKCIkbW9kYWxTdGFjayIsWyIkYW5pbWF0ZSIsIiR0aW1lb3V0IiwiJGRvY3VtZW50IiwiJGNvbXBpbGUiLCIkcm9vdFNjb3BlIiwiJHEiLCIkaW5qZWN0b3IiLCIkJG11bHRpTWFwIiwiJCRzdGFja2VkTWFwIiwiJHVpYk1vZGFsU3RhY2siLCIkbG9nIiwiJG1vZGFsU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGssbCl7bHx8ay53YXJuKCIkbW9kYWxTdGFjayBpcyBub3cgZGVwcmVjYXRlZC4gVXNlICR1aWJNb2RhbFN0YWNrIGluc3RlYWQuIiksYW5ndWxhci5leHRlbmQodGhpcyxqKX1dKS5wcm92aWRlcigiJG1vZGFsIixbIiR1aWJNb2RhbFByb3ZpZGVyIixmdW5jdGlvbihhKXthbmd1bGFyLmV4dGVuZCh0aGlzLGEpLHRoaXMuJGdldD1bIiRpbmplY3RvciIsIiRsb2ciLCIkbW9kYWxTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gZHx8Yy53YXJuKCIkbW9kYWwgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSAkdWliTW9kYWwgaW5zdGVhZC4iKSxiLmludm9rZShhLiRnZXQpfV19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC5wYWdpbmF0aW9uIixbXSkuY29udHJvbGxlcigiVWliUGFnaW5hdGlvbkNvbnRyb2xsZXIiLFsiJHNjb3BlIiwiJGF0dHJzIiwiJHBhcnNlIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlPXskc2V0Vmlld1ZhbHVlOmFuZ3VsYXIubm9vcH0sZj1iLm51bVBhZ2VzP2MoYi5udW1QYWdlcykuYXNzaWduOmFuZ3VsYXIubm9vcDt0aGlzLmluaXQ9ZnVuY3Rpb24oZyxoKXtlPWcsdGhpcy5jb25maWc9aCxlLiRyZW5kZXI9ZnVuY3Rpb24oKXtkLnJlbmRlcigpfSxiLml0ZW1zUGVyUGFnZT9hLiRwYXJlbnQuJHdhdGNoKGMoYi5pdGVtc1BlclBhZ2UpLGZ1bmN0aW9uKGIpe2QuaXRlbXNQZXJQYWdlPXBhcnNlSW50KGIsMTApLGEudG90YWxQYWdlcz1kLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKX0pOnRoaXMuaXRlbXNQZXJQYWdlPWguaXRlbXNQZXJQYWdlLGEuJHdhdGNoKCJ0b3RhbEl0ZW1zIixmdW5jdGlvbigpe2EudG90YWxQYWdlcz1kLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKX0pLGEuJHdhdGNoKCJ0b3RhbFBhZ2VzIixmdW5jdGlvbihiKXtmKGEuJHBhcmVudCxiKSxhLnBhZ2U+Yj9hLnNlbGVjdFBhZ2UoYik6ZS4kcmVuZGVyKCl9KX0sdGhpcy5jYWxjdWxhdGVUb3RhbFBhZ2VzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5pdGVtc1BlclBhZ2U8MT8xOk1hdGguY2VpbChhLnRvdGFsSXRlbXMvdGhpcy5pdGVtc1BlclBhZ2UpO3JldHVybiBNYXRoLm1heChifHwwLDEpfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2EucGFnZT1wYXJzZUludChlLiR2aWV3VmFsdWUsMTApfHwxfSxhLnNlbGVjdFBhZ2U9ZnVuY3Rpb24oYixjKXtjJiZjLnByZXZlbnREZWZhdWx0KCk7dmFyIGQ9IWEubmdEaXNhYmxlZHx8IWM7ZCYmYS5wYWdlIT09YiYmYj4wJiZiPD1hLnRvdGFsUGFnZXMmJihjJiZjLnRhcmdldCYmYy50YXJnZXQuYmx1cigpLGUuJHNldFZpZXdWYWx1ZShiKSxlLiRyZW5kZXIoKSl9LGEuZ2V0VGV4dD1mdW5jdGlvbihiKXtyZXR1cm4gYVtiKyJUZXh0Il18fGQuY29uZmlnW2IrIlRleHQiXX0sYS5ub1ByZXZpb3VzPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PT1hLnBhZ2V9LGEubm9OZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIGEucGFnZT09PWEudG90YWxQYWdlc319XSkuY29uc3RhbnQoInVpYlBhZ2luYXRpb25Db25maWciLHtpdGVtc1BlclBhZ2U6MTAsYm91bmRhcnlMaW5rczohMSxkaXJlY3Rpb25MaW5rczohMCxmaXJzdFRleHQ6IkZpcnN0IixwcmV2aW91c1RleHQ6IlByZXZpb3VzIixuZXh0VGV4dDoiTmV4dCIsbGFzdFRleHQ6Ikxhc3QiLHJvdGF0ZTohMH0pLmRpcmVjdGl2ZSgidWliUGFnaW5hdGlvbiIsWyIkcGFyc2UiLCJ1aWJQYWdpbmF0aW9uQ29uZmlnIixmdW5jdGlvbihhLGIpe3JldHVybntyZXN0cmljdDoiRUEiLHNjb3BlOnt0b3RhbEl0ZW1zOiI9IixmaXJzdFRleHQ6IkAiLHByZXZpb3VzVGV4dDoiQCIsbmV4dFRleHQ6IkAiLGxhc3RUZXh0OiJAIixuZ0Rpc2FibGVkOiI9In0scmVxdWlyZTpbInVpYlBhZ2luYXRpb24iLCI/bmdNb2RlbCJdLGNvbnRyb2xsZXI6IlVpYlBhZ2luYXRpb25Db250cm9sbGVyIixjb250cm9sbGVyQXM6InBhZ2luYXRpb24iLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbCJ9LHJlcGxhY2U6ITAsbGluazpmdW5jdGlvbihjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYixjKXtyZXR1cm57bnVtYmVyOmEsdGV4dDpiLGFjdGl2ZTpjfX1mdW5jdGlvbiBoKGEsYil7dmFyIGM9W10sZD0xLGU9YixmPWFuZ3VsYXIuaXNEZWZpbmVkKGspJiZiPms7ZiYmKGw/KGQ9TWF0aC5tYXgoYS1NYXRoLmZsb29yKGsvMiksMSksZT1kK2stMSxlPmImJihlPWIsZD1lLWsrMSkpOihkPShNYXRoLmNlaWwoYS9rKS0xKSprKzEsZT1NYXRoLm1pbihkK2stMSxiKSkpO2Zvcih2YXIgaD1kO2U+PWg7aCsrKXt2YXIgaT1nKGgsaCxoPT09YSk7Yy5wdXNoKGkpfWlmKGYmJiFsKXtpZihkPjEpe3ZhciBqPWcoZC0xLCIuLi4iLCExKTtjLnVuc2hpZnQoail9aWYoYj5lKXt2YXIgbT1nKGUrMSwiLi4uIiwhMSk7Yy5wdXNoKG0pfX1yZXR1cm4gY312YXIgaT1mWzBdLGo9ZlsxXTtpZihqKXt2YXIgaz1hbmd1bGFyLmlzRGVmaW5lZChlLm1heFNpemUpP2MuJHBhcmVudC4kZXZhbChlLm1heFNpemUpOmIubWF4U2l6ZSxsPWFuZ3VsYXIuaXNEZWZpbmVkKGUucm90YXRlKT9jLiRwYXJlbnQuJGV2YWwoZS5yb3RhdGUpOmIucm90YXRlO2MuYm91bmRhcnlMaW5rcz1hbmd1bGFyLmlzRGVmaW5lZChlLmJvdW5kYXJ5TGlua3MpP2MuJHBhcmVudC4kZXZhbChlLmJvdW5kYXJ5TGlua3MpOmIuYm91bmRhcnlMaW5rcyxjLmRpcmVjdGlvbkxpbmtzPWFuZ3VsYXIuaXNEZWZpbmVkKGUuZGlyZWN0aW9uTGlua3MpP2MuJHBhcmVudC4kZXZhbChlLmRpcmVjdGlvbkxpbmtzKTpiLmRpcmVjdGlvbkxpbmtzLGkuaW5pdChqLGIpLGUubWF4U2l6ZSYmYy4kcGFyZW50LiR3YXRjaChhKGUubWF4U2l6ZSksZnVuY3Rpb24oYSl7az1wYXJzZUludChhLDEwKSxpLnJlbmRlcigpfSk7dmFyIG09aS5yZW5kZXI7aS5yZW5kZXI9ZnVuY3Rpb24oKXttKCksYy5wYWdlPjAmJmMucGFnZTw9Yy50b3RhbFBhZ2VzJiYoYy5wYWdlcz1oKGMucGFnZSxjLnRvdGFsUGFnZXMpKX19fX19XSkuY29uc3RhbnQoInVpYlBhZ2VyQ29uZmlnIix7aXRlbXNQZXJQYWdlOjEwLHByZXZpb3VzVGV4dDoiwqsgUHJldmlvdXMiLG5leHRUZXh0OiJOZXh0IMK7IixhbGlnbjohMH0pLmRpcmVjdGl2ZSgidWliUGFnZXIiLFsidWliUGFnZXJDb25maWciLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDoiRUEiLHNjb3BlOnt0b3RhbEl0ZW1zOiI9IixwcmV2aW91c1RleHQ6IkAiLG5leHRUZXh0OiJAIixuZ0Rpc2FibGVkOiI9In0scmVxdWlyZTpbInVpYlBhZ2VyIiwiP25nTW9kZWwiXSxjb250cm9sbGVyOiJVaWJQYWdpbmF0aW9uQ29udHJvbGxlciIsY29udHJvbGxlckFzOiJwYWdpbmF0aW9uIix0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sIn0scmVwbGFjZTohMCxsaW5rOmZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmPWVbMF0sZz1lWzFdO2cmJihiLmFsaWduPWFuZ3VsYXIuaXNEZWZpbmVkKGQuYWxpZ24pP2IuJHBhcmVudC4kZXZhbChkLmFsaWduKTphLmFsaWduLGYuaW5pdChnLGEpKX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAucGFnaW5hdGlvbiIpLnZhbHVlKCIkcGFnaW5hdGlvblN1cHByZXNzV2FybmluZyIsITEpLmNvbnRyb2xsZXIoIlBhZ2luYXRpb25Db250cm9sbGVyIixbIiRzY29wZSIsIiRhdHRycyIsIiRwYXJzZSIsIiRsb2ciLCIkcGFnaW5hdGlvblN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCxlKXtlfHxkLndhcm4oIlBhZ2luYXRpb25Db250cm9sbGVyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgVWliUGFnaW5hdGlvbkNvbnRyb2xsZXIgaW5zdGVhZC4iKTt2YXIgZj10aGlzLGc9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfSxoPWIubnVtUGFnZXM/YyhiLm51bVBhZ2VzKS5hc3NpZ246YW5ndWxhci5ub29wO3RoaXMuaW5pdD1mdW5jdGlvbihkLGUpe2c9ZCx0aGlzLmNvbmZpZz1lLGcuJHJlbmRlcj1mdW5jdGlvbigpe2YucmVuZGVyKCl9LGIuaXRlbXNQZXJQYWdlP2EuJHBhcmVudC4kd2F0Y2goYyhiLml0ZW1zUGVyUGFnZSksZnVuY3Rpb24oYil7Zi5pdGVtc1BlclBhZ2U9cGFyc2VJbnQoYiwxMCksYS50b3RhbFBhZ2VzPWYuY2FsY3VsYXRlVG90YWxQYWdlcygpfSk6dGhpcy5pdGVtc1BlclBhZ2U9ZS5pdGVtc1BlclBhZ2UsYS4kd2F0Y2goInRvdGFsSXRlbXMiLGZ1bmN0aW9uKCl7YS50b3RhbFBhZ2VzPWYuY2FsY3VsYXRlVG90YWxQYWdlcygpfSksYS4kd2F0Y2goInRvdGFsUGFnZXMiLGZ1bmN0aW9uKGIpe2goYS4kcGFyZW50LGIpLGEucGFnZT5iP2Euc2VsZWN0UGFnZShiKTpnLiRyZW5kZXIoKX0pfSx0aGlzLmNhbGN1bGF0ZVRvdGFsUGFnZXM9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLml0ZW1zUGVyUGFnZTwxPzE6TWF0aC5jZWlsKGEudG90YWxJdGVtcy90aGlzLml0ZW1zUGVyUGFnZSk7cmV0dXJuIE1hdGgubWF4KGJ8fDAsMSl9LHRoaXMucmVuZGVyPWZ1bmN0aW9uKCl7YS5wYWdlPXBhcnNlSW50KGcuJHZpZXdWYWx1ZSwxMCl8fDF9LGEuc2VsZWN0UGFnZT1mdW5jdGlvbihiLGMpe2MmJmMucHJldmVudERlZmF1bHQoKTt2YXIgZD0hYS5uZ0Rpc2FibGVkfHwhYztkJiZhLnBhZ2UhPT1iJiZiPjAmJmI8PWEudG90YWxQYWdlcyYmKGMmJmMudGFyZ2V0JiZjLnRhcmdldC5ibHVyKCksZy4kc2V0Vmlld1ZhbHVlKGIpLGcuJHJlbmRlcigpKX0sYS5nZXRUZXh0PWZ1bmN0aW9uKGIpe3JldHVybiBhW2IrIlRleHQiXXx8Zi5jb25maWdbYisiVGV4dCJdfSxhLm5vUHJldmlvdXM9ZnVuY3Rpb24oKXtyZXR1cm4gMT09PWEucGFnZX0sYS5ub05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gYS5wYWdlPT09YS50b3RhbFBhZ2VzfX1dKS5kaXJlY3RpdmUoInBhZ2luYXRpb24iLFsiJHBhcnNlIiwidWliUGFnaW5hdGlvbkNvbmZpZyIsIiRsb2ciLCIkcGFnaW5hdGlvblN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJue3Jlc3RyaWN0OiJFQSIsc2NvcGU6e3RvdGFsSXRlbXM6Ij0iLGZpcnN0VGV4dDoiQCIscHJldmlvdXNUZXh0OiJAIixuZXh0VGV4dDoiQCIsbGFzdFRleHQ6IkAiLG5nRGlzYWJsZWQ6Ij0ifSxyZXF1aXJlOlsicGFnaW5hdGlvbiIsIj9uZ01vZGVsIl0sY29udHJvbGxlcjoiUGFnaW5hdGlvbkNvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoicGFnaW5hdGlvbiIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sIn0scmVwbGFjZTohMCxsaW5rOmZ1bmN0aW9uKGUsZixnLGgpe2Z1bmN0aW9uIGkoYSxiLGMpe3JldHVybntudW1iZXI6YSx0ZXh0OmIsYWN0aXZlOmN9fWZ1bmN0aW9uIGooYSxiKXt2YXIgYz1bXSxkPTEsZT1iLGY9YW5ndWxhci5pc0RlZmluZWQobSkmJmI+bTtmJiYobj8oZD1NYXRoLm1heChhLU1hdGguZmxvb3IobS8yKSwxKSxlPWQrbS0xLGU+YiYmKGU9YixkPWUtbSsxKSk6KGQ9KE1hdGguY2VpbChhL20pLTEpKm0rMSxlPU1hdGgubWluKGQrbS0xLGIpKSk7Zm9yKHZhciBnPWQ7ZT49ZztnKyspe3ZhciBoPWkoZyxnLGc9PT1hKTtjLnB1c2goaCl9aWYoZiYmIW4pe2lmKGQ+MSl7dmFyIGo9aShkLTEsIi4uLiIsITEpO2MudW5zaGlmdChqKX1pZihiPmUpe3ZhciBrPWkoZSsxLCIuLi4iLCExKTtjLnB1c2goayl9fXJldHVybiBjfWR8fGMud2FybigicGFnaW5hdGlvbiBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1wYWdpbmF0aW9uIGluc3RlYWQuIik7dmFyIGs9aFswXSxsPWhbMV07aWYobCl7dmFyIG09YW5ndWxhci5pc0RlZmluZWQoZy5tYXhTaXplKT9lLiRwYXJlbnQuJGV2YWwoZy5tYXhTaXplKTpiLm1heFNpemUsbj1hbmd1bGFyLmlzRGVmaW5lZChnLnJvdGF0ZSk/ZS4kcGFyZW50LiRldmFsKGcucm90YXRlKTpiLnJvdGF0ZTtlLmJvdW5kYXJ5TGlua3M9YW5ndWxhci5pc0RlZmluZWQoZy5ib3VuZGFyeUxpbmtzKT9lLiRwYXJlbnQuJGV2YWwoZy5ib3VuZGFyeUxpbmtzKTpiLmJvdW5kYXJ5TGlua3MsZS5kaXJlY3Rpb25MaW5rcz1hbmd1bGFyLmlzRGVmaW5lZChnLmRpcmVjdGlvbkxpbmtzKT9lLiRwYXJlbnQuJGV2YWwoZy5kaXJlY3Rpb25MaW5rcyk6Yi5kaXJlY3Rpb25MaW5rcyxrLmluaXQobCxiKSxnLm1heFNpemUmJmUuJHBhcmVudC4kd2F0Y2goYShnLm1heFNpemUpLGZ1bmN0aW9uKGEpe209cGFyc2VJbnQoYSwxMCksay5yZW5kZXIoKX0pO3ZhciBvPWsucmVuZGVyO2sucmVuZGVyPWZ1bmN0aW9uKCl7bygpLGUucGFnZT4wJiZlLnBhZ2U8PWUudG90YWxQYWdlcyYmKGUucGFnZXM9aihlLnBhZ2UsZS50b3RhbFBhZ2VzKSl9fX19fV0pLmRpcmVjdGl2ZSgicGFnZXIiLFsidWliUGFnZXJDb25maWciLCIkbG9nIiwiJHBhZ2luYXRpb25TdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm57cmVzdHJpY3Q6IkVBIixzY29wZTp7dG90YWxJdGVtczoiPSIscHJldmlvdXNUZXh0OiJAIixuZXh0VGV4dDoiQCIsbmdEaXNhYmxlZDoiPSJ9LHJlcXVpcmU6WyJwYWdlciIsIj9uZ01vZGVsIl0sY29udHJvbGxlcjoiUGFnaW5hdGlvbkNvbnRyb2xsZXIiLGNvbnRyb2xsZXJBczoicGFnaW5hdGlvbiIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbCJ9LHJlcGxhY2U6ITAsbGluazpmdW5jdGlvbihkLGUsZixnKXtjfHxiLndhcm4oInBhZ2VyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLXBhZ2VyIGluc3RlYWQuIik7dmFyIGg9Z1swXSxpPWdbMV07aSYmKGQuYWxpZ249YW5ndWxhci5pc0RlZmluZWQoZi5hbGlnbik/ZC4kcGFyZW50LiRldmFsKGYuYWxpZ24pOmEuYWxpZ24saC5pbml0KGksYSkpfX19XSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC50b29sdGlwIixbInVpLmJvb3RzdHJhcC5wb3NpdGlvbiIsInVpLmJvb3RzdHJhcC5zdGFja2VkTWFwIl0pLnByb3ZpZGVyKCIkdWliVG9vbHRpcCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPS9bQS1aXS9nLGM9Ii0iO3JldHVybiBhLnJlcGxhY2UoYixmdW5jdGlvbihhLGIpe3JldHVybihiP2M6IiIpK2EudG9Mb3dlckNhc2UoKX0pfXZhciBiPXtwbGFjZW1lbnQ6InRvcCIsYW5pbWF0aW9uOiEwLHBvcHVwRGVsYXk6MCxwb3B1cENsb3NlRGVsYXk6MCx1c2VDb250ZW50RXhwOiExfSxjPXttb3VzZWVudGVyOiJtb3VzZWxlYXZlIixjbGljazoiY2xpY2siLGZvY3VzOiJibHVyIixub25lOiIifSxkPXt9O3RoaXMub3B0aW9ucz1mdW5jdGlvbihhKXthbmd1bGFyLmV4dGVuZChkLGEpfSx0aGlzLnNldFRyaWdnZXJzPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGMsYSl9LHRoaXMuJGdldD1bIiR3aW5kb3ciLCIkY29tcGlsZSIsIiR0aW1lb3V0IiwiJGRvY3VtZW50IiwiJHVpYlBvc2l0aW9uIiwiJGludGVycG9sYXRlIiwiJHJvb3RTY29wZSIsIiRwYXJzZSIsIiQkc3RhY2tlZE1hcCIsZnVuY3Rpb24oZSxmLGcsaCxpLGosayxsLG0pe3ZhciBuPW0uY3JlYXRlTmV3KCk7cmV0dXJuIGgub24oImtleXByZXNzIixmdW5jdGlvbihhKXtpZigyNz09PWEud2hpY2gpe3ZhciBiPW4udG9wKCk7YiYmKGIudmFsdWUuY2xvc2UoKSxuLnJlbW92ZVRvcCgpLGI9bnVsbCl9fSksZnVuY3Rpb24oZSxrLG0sbyl7ZnVuY3Rpb24gcChhKXt2YXIgYj0oYXx8by50cmlnZ2VyfHxtKS5zcGxpdCgiICIpLGQ9Yi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV18fGF9KTtyZXR1cm57c2hvdzpiLGhpZGU6ZH19bz1hbmd1bGFyLmV4dGVuZCh7fSxiLGQsbyk7dmFyIHE9YShlKSxyPWouc3RhcnRTeW1ib2woKSxzPWouZW5kU3ltYm9sKCksdD0iPGRpdiAiK3ErJy1wb3B1cCB0aXRsZT0iJytyKyJ0aXRsZSIrcysnIiAnKyhvLnVzZUNvbnRlbnRFeHA/J2NvbnRlbnQtZXhwPSJjb250ZW50RXhwKCkiICc6J2NvbnRlbnQ9IicrcisiY29udGVudCIrcysnIiAnKSsncGxhY2VtZW50PSInK3IrInBsYWNlbWVudCIrcysnIiBwb3B1cC1jbGFzcz0iJytyKyJwb3B1cENsYXNzIitzKyciIGFuaW1hdGlvbj0iYW5pbWF0aW9uIiBpcy1vcGVuPSJpc09wZW4ib3JpZ2luLXNjb3BlPSJvcmlnU2NvcGUiIHN0eWxlPSJ2aXNpYmlsaXR5OiBoaWRkZW47IGRpc3BsYXk6IGJsb2NrOyB0b3A6IC05OTk5cHg7IGxlZnQ6IC05OTk5cHg7Ij48L2Rpdj4nO3JldHVybntjb21waWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9Zih0KTtyZXR1cm4gZnVuY3Rpb24oYSxiLGQsZil7ZnVuY3Rpb24gaigpe0wuaXNPcGVuP3EoKTptKCl9ZnVuY3Rpb24gbSgpeyghS3x8YS4kZXZhbChkW2srIkVuYWJsZSJdKSkmJih1KCkseCgpLEwucG9wdXBEZWxheT9GfHwoRj1nKHIsTC5wb3B1cERlbGF5LCExKSk6cigpKX1mdW5jdGlvbiBxKCl7cygpLEwucG9wdXBDbG9zZURlbGF5P0d8fChHPWcodCxMLnBvcHVwQ2xvc2VEZWxheSwhMSkpOnQoKX1mdW5jdGlvbiByKCl7cmV0dXJuIHMoKSx1KCksTC5jb250ZW50Pyh2KCksdm9pZCBMLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtMLmlzT3Blbj0hMCx5KCEwKSxRKCl9KSk6YW5ndWxhci5ub29wfWZ1bmN0aW9uIHMoKXtGJiYoZy5jYW5jZWwoRiksRj1udWxsKSxIJiYoZy5jYW5jZWwoSCksSD1udWxsKX1mdW5jdGlvbiB0KCl7cygpLHUoKSxMJiZMLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtMLmlzT3Blbj0hMSx5KCExKSxMLmFuaW1hdGlvbj9FfHwoRT1nKHcsMTUwLCExKSk6dygpfSl9ZnVuY3Rpb24gdSgpe0cmJihnLmNhbmNlbChHKSxHPW51bGwpLEUmJihnLmNhbmNlbChFKSxFPW51bGwpfWZ1bmN0aW9uIHYoKXtDfHwoRD1MLiRuZXcoKSxDPWMoRCxmdW5jdGlvbihhKXtJP2guZmluZCgiYm9keSIpLmFwcGVuZChhKTpiLmFmdGVyKGEpfSkseigpKX1mdW5jdGlvbiB3KCl7QSgpLEU9bnVsbCxDJiYoQy5yZW1vdmUoKSxDPW51bGwpLEQmJihELiRkZXN0cm95KCksRD1udWxsKX1mdW5jdGlvbiB4KCl7TC50aXRsZT1kW2srIlRpdGxlIl0sTz9MLmNvbnRlbnQ9TyhhKTpMLmNvbnRlbnQ9ZFtlXSxMLnBvcHVwQ2xhc3M9ZFtrKyJDbGFzcyJdLEwucGxhY2VtZW50PWFuZ3VsYXIuaXNEZWZpbmVkKGRbaysiUGxhY2VtZW50Il0pP2RbaysiUGxhY2VtZW50Il06by5wbGFjZW1lbnQ7dmFyIGI9cGFyc2VJbnQoZFtrKyJQb3B1cERlbGF5Il0sMTApLGM9cGFyc2VJbnQoZFtrKyJQb3B1cENsb3NlRGVsYXkiXSwxMCk7TC5wb3B1cERlbGF5PWlzTmFOKGIpP28ucG9wdXBEZWxheTpiLEwucG9wdXBDbG9zZURlbGF5PWlzTmFOKGMpP28ucG9wdXBDbG9zZURlbGF5OmN9ZnVuY3Rpb24geShiKXtOJiZhbmd1bGFyLmlzRnVuY3Rpb24oTi5hc3NpZ24pJiZOLmFzc2lnbihhLGIpfWZ1bmN0aW9uIHooKXtQLmxlbmd0aD0wLE8/KFAucHVzaChhLiR3YXRjaChPLGZ1bmN0aW9uKGEpe0wuY29udGVudD1hLCFhJiZMLmlzT3BlbiYmdCgpfSkpLFAucHVzaChELiR3YXRjaChmdW5jdGlvbigpe018fChNPSEwLEQuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7TT0hMSxMJiZMLmlzT3BlbiYmUSgpfSkpfSkpKTpQLnB1c2goZC4kb2JzZXJ2ZShlLGZ1bmN0aW9uKGEpe0wuY29udGVudD1hLCFhJiZMLmlzT3Blbj90KCk6USgpfSkpLFAucHVzaChkLiRvYnNlcnZlKGsrIlRpdGxlIixmdW5jdGlvbihhKXtMLnRpdGxlPWEsTC5pc09wZW4mJlEoKX0pKSxQLnB1c2goZC4kb2JzZXJ2ZShrKyJQbGFjZW1lbnQiLGZ1bmN0aW9uKGEpe0wucGxhY2VtZW50PWE/YTpvLnBsYWNlbWVudCxMLmlzT3BlbiYmUSgpfSkpfWZ1bmN0aW9uIEEoKXtQLmxlbmd0aCYmKGFuZ3VsYXIuZm9yRWFjaChQLGZ1bmN0aW9uKGEpe2EoKX0pLFAubGVuZ3RoPTApfWZ1bmN0aW9uIEIoKXt2YXIgYT1kW2srIlRyaWdnZXIiXTtSKCksSj1wKGEpLCJub25lIiE9PUouc2hvdyYmSi5zaG93LmZvckVhY2goZnVuY3Rpb24oYSxjKXthPT09Si5oaWRlW2NdP2JbMF0uYWRkRXZlbnRMaXN0ZW5lcihhLGopOmEmJihiWzBdLmFkZEV2ZW50TGlzdGVuZXIoYSxtKSxKLmhpZGVbY10uc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbMF0uYWRkRXZlbnRMaXN0ZW5lcihhLHEpfSkpLGIub24oImtleXByZXNzIixmdW5jdGlvbihhKXsyNz09PWEud2hpY2gmJnEoKX0pfSl9dmFyIEMsRCxFLEYsRyxILEk9YW5ndWxhci5pc0RlZmluZWQoby5hcHBlbmRUb0JvZHkpP28uYXBwZW5kVG9Cb2R5OiExLEo9cCh2b2lkIDApLEs9YW5ndWxhci5pc0RlZmluZWQoZFtrKyJFbmFibGUiXSksTD1hLiRuZXcoITApLE09ITEsTj1hbmd1bGFyLmlzRGVmaW5lZChkW2srIklzT3BlbiJdKT9sKGRbaysiSXNPcGVuIl0pOiExLE89by51c2VDb250ZW50RXhwP2woZFtlXSk6ITEsUD1bXSxRPWZ1bmN0aW9uKCl7QyYmQy5odG1sKCkmJihIfHwoSD1nKGZ1bmN0aW9uKCl7Qy5jc3Moe3RvcDowLGxlZnQ6MH0pO3ZhciBhPWkucG9zaXRpb25FbGVtZW50cyhiLEMsTC5wbGFjZW1lbnQsSSk7YS50b3ArPSJweCIsYS5sZWZ0Kz0icHgiLGEudmlzaWJpbGl0eT0idmlzaWJsZSIsQy5jc3MoYSksSD1udWxsfSwwLCExKSkpfTtMLm9yaWdTY29wZT1hLEwuaXNPcGVuPSExLG4uYWRkKEwse2Nsb3NlOnR9KSxMLmNvbnRlbnRFeHA9ZnVuY3Rpb24oKXtyZXR1cm4gTC5jb250ZW50fSxkLiRvYnNlcnZlKCJkaXNhYmxlZCIsZnVuY3Rpb24oYSl7YSYmcygpLGEmJkwuaXNPcGVuJiZ0KCl9KSxOJiZhLiR3YXRjaChOLGZ1bmN0aW9uKGEpe0wmJiFhPT09TC5pc09wZW4mJmooKX0pO3ZhciBSPWZ1bmN0aW9uKCl7Si5zaG93LmZvckVhY2goZnVuY3Rpb24oYSl7Yi51bmJpbmQoYSxtKX0pLEouaGlkZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Euc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLHEpfSl9KX07QigpO3ZhciBTPWEuJGV2YWwoZFtrKyJBbmltYXRpb24iXSk7TC5hbmltYXRpb249YW5ndWxhci5pc0RlZmluZWQoUyk/ISFTOm8uYW5pbWF0aW9uO3ZhciBUPWEuJGV2YWwoZFtrKyJBcHBlbmRUb0JvZHkiXSk7ST1hbmd1bGFyLmlzRGVmaW5lZChUKT9UOkksSSYmYS4kb24oIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MiLGZ1bmN0aW9uKCl7TC5pc09wZW4mJnQoKX0pLGEuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtzKCksdSgpLFIoKSx3KCksbi5yZW1vdmUoTCksTD1udWxsfSl9fX19fV19KS5kaXJlY3RpdmUoInVpYlRvb2x0aXBUZW1wbGF0ZVRyYW5zY2x1ZGUiLFsiJGFuaW1hdGUiLCIkc2NlIiwiJGNvbXBpbGUiLCIkdGVtcGxhdGVSZXF1ZXN0IixmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm57bGluazpmdW5jdGlvbihlLGYsZyl7dmFyIGgsaSxqLGs9ZS4kZXZhbChnLnRvb2x0aXBUZW1wbGF0ZVRyYW5zY2x1ZGVTY29wZSksbD0wLG09ZnVuY3Rpb24oKXtpJiYoaS5yZW1vdmUoKSxpPW51bGwpLGgmJihoLiRkZXN0cm95KCksaD1udWxsKSxqJiYoYS5sZWF2ZShqKS50aGVuKGZ1bmN0aW9uKCl7aT1udWxsfSksaT1qLGo9bnVsbCl9O2UuJHdhdGNoKGIucGFyc2VBc1Jlc291cmNlVXJsKGcudWliVG9vbHRpcFRlbXBsYXRlVHJhbnNjbHVkZSksZnVuY3Rpb24oYil7dmFyIGc9KytsO2I/KGQoYiwhMCkudGhlbihmdW5jdGlvbihkKXtpZihnPT09bCl7dmFyIGU9ay4kbmV3KCksaT1kLG49YyhpKShlLGZ1bmN0aW9uKGIpe20oKSxhLmVudGVyKGIsZil9KTtoPWUsaj1uLGguJGVtaXQoIiRpbmNsdWRlQ29udGVudExvYWRlZCIsYil9fSxmdW5jdGlvbigpe2c9PT1sJiYobSgpLGUuJGVtaXQoIiRpbmNsdWRlQ29udGVudEVycm9yIixiKSl9KSxlLiRlbWl0KCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWQiLGIpKTptKCl9KSxlLiRvbigiJGRlc3Ryb3kiLG0pfX19XSkuZGlyZWN0aXZlKCJ1aWJUb29sdGlwQ2xhc3NlcyIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkEiLGxpbms6ZnVuY3Rpb24oYSxiLGMpe2EucGxhY2VtZW50JiZiLmFkZENsYXNzKGEucGxhY2VtZW50KSxhLnBvcHVwQ2xhc3MmJmIuYWRkQ2xhc3MoYS5wb3B1cENsYXNzKSxhLmFuaW1hdGlvbigpJiZiLmFkZENsYXNzKGMudG9vbHRpcEFuaW1hdGlvbkNsYXNzKX19fSkuZGlyZWN0aXZlKCJ1aWJUb29sdGlwUG9wdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnQ6IkAiLHBsYWNlbWVudDoiQCIscG9wdXBDbGFzczoiQCIsYW5pbWF0aW9uOiImIixpc09wZW46IiYifSx0ZW1wbGF0ZVVybDoidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWwiLGxpbms6ZnVuY3Rpb24oYSxiKXtiLmFkZENsYXNzKCJ0b29sdGlwIil9fX0pLmRpcmVjdGl2ZSgidWliVG9vbHRpcCIsWyIkdWliVG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInVpYlRvb2x0aXAiLCJ0b29sdGlwIiwibW91c2VlbnRlciIpfV0pLmRpcmVjdGl2ZSgidWliVG9vbHRpcFRlbXBsYXRlUG9wdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnRFeHA6IiYiLHBsYWNlbWVudDoiQCIscG9wdXBDbGFzczoiQCIsYW5pbWF0aW9uOiImIixpc09wZW46IiYiLG9yaWdpblNjb3BlOiImIn0sdGVtcGxhdGVVcmw6InRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cC5odG1sIixsaW5rOmZ1bmN0aW9uKGEsYil7Yi5hZGRDbGFzcygidG9vbHRpcCIpfX19KS5kaXJlY3RpdmUoInVpYlRvb2x0aXBUZW1wbGF0ZSIsWyIkdWliVG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInVpYlRvb2x0aXBUZW1wbGF0ZSIsInRvb2x0aXAiLCJtb3VzZWVudGVyIix7dXNlQ29udGVudEV4cDohMH0pfV0pLmRpcmVjdGl2ZSgidWliVG9vbHRpcEh0bWxQb3B1cCIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCxzY29wZTp7Y29udGVudEV4cDoiJiIscGxhY2VtZW50OiJAIixwb3B1cENsYXNzOiJAIixhbmltYXRpb246IiYiLGlzT3BlbjoiJiJ9LHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC1wb3B1cC5odG1sIixsaW5rOmZ1bmN0aW9uKGEsYil7Yi5hZGRDbGFzcygidG9vbHRpcCIpfX19KS5kaXJlY3RpdmUoInVpYlRvb2x0aXBIdG1sIixbIiR1aWJUb29sdGlwIixmdW5jdGlvbihhKXtyZXR1cm4gYSgidWliVG9vbHRpcEh0bWwiLCJ0b29sdGlwIiwibW91c2VlbnRlciIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnRvb2x0aXAiKS52YWx1ZSgiJHRvb2x0aXBTdXBwcmVzc1dhcm5pbmciLCExKS5wcm92aWRlcigiJHRvb2x0aXAiLFsiJHVpYlRvb2x0aXBQcm92aWRlciIsZnVuY3Rpb24oYSl7YW5ndWxhci5leHRlbmQodGhpcyxhKSx0aGlzLiRnZXQ9WyIkbG9nIiwiJHRvb2x0aXBTdXBwcmVzc1dhcm5pbmciLCIkaW5qZWN0b3IiLGZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gY3x8Yi53YXJuKCIkdG9vbHRpcCBpcyBub3cgZGVwcmVjYXRlZC4gVXNlICR1aWJUb29sdGlwIGluc3RlYWQuIiksZC5pbnZva2UoYS4kZ2V0KX1dfV0pLmRpcmVjdGl2ZSgidG9vbHRpcFRlbXBsYXRlVHJhbnNjbHVkZSIsWyIkYW5pbWF0ZSIsIiRzY2UiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkbG9nIiwiJHRvb2x0aXBTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYixjLGQsZSxmKXtyZXR1cm57bGluazpmdW5jdGlvbihnLGgsaSl7Znx8ZS53YXJuKCJ0b29sdGlwLXRlbXBsYXRlLXRyYW5zY2x1ZGUgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItdG9vbHRpcC10ZW1wbGF0ZS10cmFuc2NsdWRlIGluc3RlYWQuIik7dmFyIGosayxsLG09Zy4kZXZhbChpLnRvb2x0aXBUZW1wbGF0ZVRyYW5zY2x1ZGVTY29wZSksbj0wLG89ZnVuY3Rpb24oKXtrJiYoay5yZW1vdmUoKSxrPW51bGwpLGomJihqLiRkZXN0cm95KCksaj1udWxsKSxsJiYoYS5sZWF2ZShsKS50aGVuKGZ1bmN0aW9uKCl7az1udWxsfSksaz1sLGw9bnVsbCl9O2cuJHdhdGNoKGIucGFyc2VBc1Jlc291cmNlVXJsKGkudG9vbHRpcFRlbXBsYXRlVHJhbnNjbHVkZSksZnVuY3Rpb24oYil7dmFyIGU9KytuO2I/KGQoYiwhMCkudGhlbihmdW5jdGlvbihkKXtpZihlPT09bil7dmFyIGY9bS4kbmV3KCksZz1kLGk9YyhnKShmLGZ1bmN0aW9uKGIpe28oKSxhLmVudGVyKGIsaCl9KTtqPWYsbD1pLGouJGVtaXQoIiRpbmNsdWRlQ29udGVudExvYWRlZCIsYil9fSxmdW5jdGlvbigpe2U9PT1uJiYobygpLGcuJGVtaXQoIiRpbmNsdWRlQ29udGVudEVycm9yIixiKSl9KSxnLiRlbWl0KCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWQiLGIpKTpvKCl9KSxnLiRvbigiJGRlc3Ryb3kiLG8pfX19XSkuZGlyZWN0aXZlKCJ0b29sdGlwQ2xhc3NlcyIsWyIkbG9nIiwiJHRvb2x0aXBTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3Jlc3RyaWN0OiJBIixsaW5rOmZ1bmN0aW9uKGMsZCxlKXtifHxhLndhcm4oInRvb2x0aXAtY2xhc3NlcyBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi10b29sdGlwLWNsYXNzZXMgaW5zdGVhZC4iKSxjLnBsYWNlbWVudCYmZC5hZGRDbGFzcyhjLnBsYWNlbWVudCksYy5wb3B1cENsYXNzJiZkLmFkZENsYXNzKGMucG9wdXBDbGFzcyksYy5hbmltYXRpb24oKSYmZC5hZGRDbGFzcyhlLnRvb2x0aXBBbmltYXRpb25DbGFzcyl9fX1dKS5kaXJlY3RpdmUoInRvb2x0aXBQb3B1cCIsWyIkbG9nIiwiJHRvb2x0aXBTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3JlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnQ6IkAiLHBsYWNlbWVudDoiQCIscG9wdXBDbGFzczoiQCIsYW5pbWF0aW9uOiImIixpc09wZW46IiYifSx0ZW1wbGF0ZVVybDoidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWwiLGxpbms6ZnVuY3Rpb24oYyxkKXtifHxhLndhcm4oInRvb2x0aXAtcG9wdXAgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItdG9vbHRpcC1wb3B1cCBpbnN0ZWFkLiIpLGQuYWRkQ2xhc3MoInRvb2x0aXAiKX19fV0pLmRpcmVjdGl2ZSgidG9vbHRpcCIsWyIkdG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInRvb2x0aXAiLCJ0b29sdGlwIiwibW91c2VlbnRlciIpfV0pLmRpcmVjdGl2ZSgidG9vbHRpcFRlbXBsYXRlUG9wdXAiLFsiJGxvZyIsIiR0b29sdGlwU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50RXhwOiImIixwbGFjZW1lbnQ6IkAiLHBvcHVwQ2xhc3M6IkAiLGFuaW1hdGlvbjoiJiIsaXNPcGVuOiImIixvcmlnaW5TY29wZToiJiJ9LHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtdGVtcGxhdGUtcG9wdXAuaHRtbCIsbGluazpmdW5jdGlvbihjLGQpe2J8fGEud2FybigidG9vbHRpcC10ZW1wbGF0ZS1wb3B1cCBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi10b29sdGlwLXRlbXBsYXRlLXBvcHVwIGluc3RlYWQuIiksZC5hZGRDbGFzcygidG9vbHRpcCIpfX19XSkuZGlyZWN0aXZlKCJ0b29sdGlwVGVtcGxhdGUiLFsiJHRvb2x0aXAiLGZ1bmN0aW9uKGEpe3JldHVybiBhKCJ0b29sdGlwVGVtcGxhdGUiLCJ0b29sdGlwIiwibW91c2VlbnRlciIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKS5kaXJlY3RpdmUoInRvb2x0aXBIdG1sUG9wdXAiLFsiJGxvZyIsIiR0b29sdGlwU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50RXhwOiImIixwbGFjZW1lbnQ6IkAiLHBvcHVwQ2xhc3M6IkAiLGFuaW1hdGlvbjoiJiIsaXNPcGVuOiImIn0sdGVtcGxhdGVVcmw6InRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXBvcHVwLmh0bWwiLGxpbms6ZnVuY3Rpb24oYyxkKXtifHxhLndhcm4oInRvb2x0aXAtaHRtbC1wb3B1cCBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi10b29sdGlwLWh0bWwtcG9wdXAgaW5zdGVhZC4iKSxkLmFkZENsYXNzKCJ0b29sdGlwIil9fX1dKS5kaXJlY3RpdmUoInRvb2x0aXBIdG1sIixbIiR0b29sdGlwIixmdW5jdGlvbihhKXtyZXR1cm4gYSgidG9vbHRpcEh0bWwiLCJ0b29sdGlwIiwibW91c2VlbnRlciIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnBvcG92ZXIiLFsidWkuYm9vdHN0cmFwLnRvb2x0aXAiXSkuZGlyZWN0aXZlKCJ1aWJQb3BvdmVyVGVtcGxhdGVQb3B1cCIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCxzY29wZTp7dGl0bGU6IkAiLGNvbnRlbnRFeHA6IiYiLHBsYWNlbWVudDoiQCIscG9wdXBDbGFzczoiQCIsYW5pbWF0aW9uOiImIixpc09wZW46IiYiLG9yaWdpblNjb3BlOiImIn0sdGVtcGxhdGVVcmw6InRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sIixsaW5rOmZ1bmN0aW9uKGEsYil7Yi5hZGRDbGFzcygicG9wb3ZlciIpfX19KS5kaXJlY3RpdmUoInVpYlBvcG92ZXJUZW1wbGF0ZSIsWyIkdWliVG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInVpYlBvcG92ZXJUZW1wbGF0ZSIsInBvcG92ZXIiLCJjbGljayIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKS5kaXJlY3RpdmUoInVpYlBvcG92ZXJIdG1sUG9wdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnRFeHA6IiYiLHRpdGxlOiJAIixwbGFjZW1lbnQ6IkAiLHBvcHVwQ2xhc3M6IkAiLGFuaW1hdGlvbjoiJiIsaXNPcGVuOiImIn0sdGVtcGxhdGVVcmw6InRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci1odG1sLmh0bWwiLGxpbms6ZnVuY3Rpb24oYSxiKXtiLmFkZENsYXNzKCJwb3BvdmVyIil9fX0pLmRpcmVjdGl2ZSgidWliUG9wb3Zlckh0bWwiLFsiJHVpYlRvb2x0aXAiLGZ1bmN0aW9uKGEpe3JldHVybiBhKCJ1aWJQb3BvdmVySHRtbCIsInBvcG92ZXIiLCJjbGljayIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKS5kaXJlY3RpdmUoInVpYlBvcG92ZXJQb3B1cCIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCxzY29wZTp7dGl0bGU6IkAiLGNvbnRlbnQ6IkAiLHBsYWNlbWVudDoiQCIscG9wdXBDbGFzczoiQCIsYW5pbWF0aW9uOiImIixpc09wZW46IiYifSx0ZW1wbGF0ZVVybDoidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWwiLGxpbms6ZnVuY3Rpb24oYSxiKXtiLmFkZENsYXNzKCJwb3BvdmVyIil9fX0pLmRpcmVjdGl2ZSgidWliUG9wb3ZlciIsWyIkdWliVG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInVpYlBvcG92ZXIiLCJwb3BvdmVyIiwiY2xpY2siKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnBvcG92ZXIiKS52YWx1ZSgiJHBvcG92ZXJTdXBwcmVzc1dhcm5pbmciLCExKS5kaXJlY3RpdmUoInBvcG92ZXJUZW1wbGF0ZVBvcHVwIixbIiRsb2ciLCIkcG9wb3ZlclN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVwbGFjZTohMCxzY29wZTp7dGl0bGU6IkAiLGNvbnRlbnRFeHA6IiYiLHBsYWNlbWVudDoiQCIscG9wdXBDbGFzczoiQCIsYW5pbWF0aW9uOiImIixpc09wZW46IiYiLG9yaWdpblNjb3BlOiImIn0sdGVtcGxhdGVVcmw6InRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sIixsaW5rOmZ1bmN0aW9uKGMsZCl7Ynx8YS53YXJuKCJwb3BvdmVyLXRlbXBsYXRlLXBvcHVwIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLXBvcG92ZXItdGVtcGxhdGUtcG9wdXAgaW5zdGVhZC4iKSxkLmFkZENsYXNzKCJwb3BvdmVyIil9fX1dKS5kaXJlY3RpdmUoInBvcG92ZXJUZW1wbGF0ZSIsWyIkdG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInBvcG92ZXJUZW1wbGF0ZSIsInBvcG92ZXIiLCJjbGljayIse3VzZUNvbnRlbnRFeHA6ITB9KX1dKS5kaXJlY3RpdmUoInBvcG92ZXJIdG1sUG9wdXAiLFsiJGxvZyIsIiRwb3BvdmVyU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50RXhwOiImIix0aXRsZToiQCIscGxhY2VtZW50OiJAIixwb3B1cENsYXNzOiJAIixhbmltYXRpb246IiYiLGlzT3BlbjoiJiJ9LHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItaHRtbC5odG1sIixsaW5rOmZ1bmN0aW9uKGMsZCl7Ynx8YS53YXJuKCJwb3BvdmVyLWh0bWwtcG9wdXAgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItcG9wb3Zlci1odG1sLXBvcHVwIGluc3RlYWQuIiksZC5hZGRDbGFzcygicG9wb3ZlciIpfX19XSkuZGlyZWN0aXZlKCJwb3BvdmVySHRtbCIsWyIkdG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInBvcG92ZXJIdG1sIiwicG9wb3ZlciIsImNsaWNrIix7dXNlQ29udGVudEV4cDohMH0pfV0pLmRpcmVjdGl2ZSgicG9wb3ZlclBvcHVwIixbIiRsb2ciLCIkcG9wb3ZlclN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVwbGFjZTohMCxzY29wZTp7dGl0bGU6IkAiLGNvbnRlbnQ6IkAiLHBsYWNlbWVudDoiQCIscG9wdXBDbGFzczoiQCIsYW5pbWF0aW9uOiImIixpc09wZW46IiYifSx0ZW1wbGF0ZVVybDoidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWwiLGxpbms6ZnVuY3Rpb24oYyxkKXtifHxhLndhcm4oInBvcG92ZXItcG9wdXAgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItcG9wb3Zlci1wb3B1cCBpbnN0ZWFkLiIpLGQuYWRkQ2xhc3MoInBvcG92ZXIiKX19fV0pLmRpcmVjdGl2ZSgicG9wb3ZlciIsWyIkdG9vbHRpcCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoInBvcG92ZXIiLCJwb3BvdmVyIiwiY2xpY2siKX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyIixbXSkuY29uc3RhbnQoInVpYlByb2dyZXNzQ29uZmlnIix7YW5pbWF0ZTohMCxtYXg6MTAwfSkuY29udHJvbGxlcigiVWliUHJvZ3Jlc3NDb250cm9sbGVyIixbIiRzY29wZSIsIiRhdHRycyIsInVpYlByb2dyZXNzQ29uZmlnIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlPWFuZ3VsYXIuaXNEZWZpbmVkKGIuYW5pbWF0ZSk/YS4kcGFyZW50LiRldmFsKGIuYW5pbWF0ZSk6Yy5hbmltYXRlO3RoaXMuYmFycz1bXSxhLm1heD1hbmd1bGFyLmlzRGVmaW5lZChhLm1heCk/YS5tYXg6Yy5tYXgsdGhpcy5hZGRCYXI9ZnVuY3Rpb24oYixjLGYpe2V8fGMuY3NzKHt0cmFuc2l0aW9uOiJub25lIn0pLHRoaXMuYmFycy5wdXNoKGIpLGIubWF4PWEubWF4LGIudGl0bGU9ZiYmYW5ndWxhci5pc0RlZmluZWQoZi50aXRsZSk/Zi50aXRsZToicHJvZ3Jlc3NiYXIiLGIuJHdhdGNoKCJ2YWx1ZSIsZnVuY3Rpb24oYSl7Yi5yZWNhbGN1bGF0ZVBlcmNlbnRhZ2UoKX0pLGIucmVjYWxjdWxhdGVQZXJjZW50YWdlPWZ1bmN0aW9uKCl7dmFyIGE9ZC5iYXJzLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBiLnBlcmNlbnQ9KygxMDAqYi52YWx1ZS9iLm1heCkudG9GaXhlZCgyKSxhK2IucGVyY2VudH0sMCk7YT4xMDAmJihiLnBlcmNlbnQtPWEtMTAwKX0sYi4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe2M9bnVsbCxkLnJlbW92ZUJhcihiKX0pfSx0aGlzLnJlbW92ZUJhcj1mdW5jdGlvbihhKXt0aGlzLmJhcnMuc3BsaWNlKHRoaXMuYmFycy5pbmRleE9mKGEpLDEpLHRoaXMuYmFycy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVjYWxjdWxhdGVQZXJjZW50YWdlKCl9KX0sYS4kd2F0Y2goIm1heCIsZnVuY3Rpb24oYil7ZC5iYXJzLmZvckVhY2goZnVuY3Rpb24oYil7Yi5tYXg9YS5tYXgsYi5yZWNhbGN1bGF0ZVBlcmNlbnRhZ2UoKX0pfSl9XSkuZGlyZWN0aXZlKCJ1aWJQcm9ncmVzcyIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLGNvbnRyb2xsZXI6IlVpYlByb2dyZXNzQ29udHJvbGxlciIscmVxdWlyZToidWliUHJvZ3Jlc3MiLHNjb3BlOnttYXg6Ij0/In0sdGVtcGxhdGVVcmw6InRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWwifX0pLmRpcmVjdGl2ZSgidWliQmFyIixmdW5jdGlvbigpe3JldHVybntyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAscmVxdWlyZToiXnVpYlByb2dyZXNzIixzY29wZTp7dmFsdWU6Ij0iLHR5cGU6IkAifSx0ZW1wbGF0ZVVybDoidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRCYXIoYSxiLGMpfX19KS5kaXJlY3RpdmUoInVpYlByb2dyZXNzYmFyIixmdW5jdGlvbigpe3JldHVybntyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsY29udHJvbGxlcjoiVWliUHJvZ3Jlc3NDb250cm9sbGVyIixzY29wZTp7dmFsdWU6Ij0iLG1heDoiPT8iLHR5cGU6IkAifSx0ZW1wbGF0ZVVybDoidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZEJhcihhLGFuZ3VsYXIuZWxlbWVudChiLmNoaWxkcmVuKClbMF0pLHt0aXRsZTpjLnRpdGxlfSl9fX0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXIiKS52YWx1ZSgiJHByb2dyZXNzU3VwcHJlc3NXYXJuaW5nIiwhMSkuY29udHJvbGxlcigiUHJvZ3Jlc3NDb250cm9sbGVyIixbIiRzY29wZSIsIiRhdHRycyIsInVpYlByb2dyZXNzQ29uZmlnIiwiJGxvZyIsIiRwcm9ncmVzc1N1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCxlKXtlfHxkLndhcm4oIlByb2dyZXNzQ29udHJvbGxlciBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIFVpYlByb2dyZXNzQ29udHJvbGxlciBpbnN0ZWFkLiIpO3ZhciBmPXRoaXMsZz1hbmd1bGFyLmlzRGVmaW5lZChiLmFuaW1hdGUpP2EuJHBhcmVudC4kZXZhbChiLmFuaW1hdGUpOmMuYW5pbWF0ZTt0aGlzLmJhcnM9W10sYS5tYXg9YW5ndWxhci5pc0RlZmluZWQoYS5tYXgpP2EubWF4OmMubWF4LHRoaXMuYWRkQmFyPWZ1bmN0aW9uKGIsYyxkKXtnfHxjLmNzcyh7dHJhbnNpdGlvbjoibm9uZSJ9KSx0aGlzLmJhcnMucHVzaChiKSxiLm1heD1hLm1heCxiLnRpdGxlPWQmJmFuZ3VsYXIuaXNEZWZpbmVkKGQudGl0bGUpP2QudGl0bGU6InByb2dyZXNzYmFyIixiLiR3YXRjaCgidmFsdWUiLGZ1bmN0aW9uKGEpe2IucmVjYWxjdWxhdGVQZXJjZW50YWdlKCl9KSxiLnJlY2FsY3VsYXRlUGVyY2VudGFnZT1mdW5jdGlvbigpe2IucGVyY2VudD0rKDEwMCpiLnZhbHVlL2IubWF4KS50b0ZpeGVkKDIpO3ZhciBhPWYuYmFycy5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStiLnBlcmNlbnR9LDApO2E+MTAwJiYoYi5wZXJjZW50LT1hLTEwMCl9LGIuJG9uKCIkZGVzdHJveSIsZnVuY3Rpb24oKXtjPW51bGwsZi5yZW1vdmVCYXIoYil9KX0sdGhpcy5yZW1vdmVCYXI9ZnVuY3Rpb24oYSl7dGhpcy5iYXJzLnNwbGljZSh0aGlzLmJhcnMuaW5kZXhPZihhKSwxKX0sYS4kd2F0Y2goIm1heCIsZnVuY3Rpb24oYil7Zi5iYXJzLmZvckVhY2goZnVuY3Rpb24oYil7Yi5tYXg9YS5tYXgsYi5yZWNhbGN1bGF0ZVBlcmNlbnRhZ2UoKX0pfSl9XSkuZGlyZWN0aXZlKCJwcm9ncmVzcyIsWyIkbG9nIiwiJHByb2dyZXNzU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsY29udHJvbGxlcjoiUHJvZ3Jlc3NDb250cm9sbGVyIixyZXF1aXJlOiJwcm9ncmVzcyIsc2NvcGU6e21heDoiPT8iLHRpdGxlOiJAPyJ9LHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sIixsaW5rOmZ1bmN0aW9uKCl7Ynx8YS53YXJuKCJwcm9ncmVzcyBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi1wcm9ncmVzcyBpbnN0ZWFkLiIpfX19XSkuZGlyZWN0aXZlKCJiYXIiLFsiJGxvZyIsIiRwcm9ncmVzc1N1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHJlcXVpcmU6Il5wcm9ncmVzcyIsc2NvcGU6e3ZhbHVlOiI9Iix0eXBlOiJAIn0sdGVtcGxhdGVVcmw6InRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sIixsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2J8fGEud2FybigiYmFyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLWJhciBpbnN0ZWFkLiIpLGYuYWRkQmFyKGMsZCl9fX1dKS5kaXJlY3RpdmUoInByb2dyZXNzYmFyIixbIiRsb2ciLCIkcHJvZ3Jlc3NTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYil7cmV0dXJue3JlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCxjb250cm9sbGVyOiJQcm9ncmVzc0NvbnRyb2xsZXIiLHNjb3BlOnt2YWx1ZToiPSIsbWF4OiI9PyIsdHlwZToiQCJ9LHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sIixsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2J8fGEud2FybigicHJvZ3Jlc3NiYXIgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItcHJvZ3Jlc3NiYXIgaW5zdGVhZC4iKSxmLmFkZEJhcihjLGFuZ3VsYXIuZWxlbWVudChkLmNoaWxkcmVuKClbMF0pLHt0aXRsZTplLnRpdGxlfSl9fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnJhdGluZyIsW10pLmNvbnN0YW50KCJ1aWJSYXRpbmdDb25maWciLHttYXg6NSxzdGF0ZU9uOm51bGwsc3RhdGVPZmY6bnVsbCx0aXRsZXM6WyJvbmUiLCJ0d28iLCJ0aHJlZSIsImZvdXIiLCJmaXZlIl19KS5jb250cm9sbGVyKCJVaWJSYXRpbmdDb250cm9sbGVyIixbIiRzY29wZSIsIiRhdHRycyIsInVpYlJhdGluZ0NvbmZpZyIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXskc2V0Vmlld1ZhbHVlOmFuZ3VsYXIubm9vcH07dGhpcy5pbml0PWZ1bmN0aW9uKGUpe2Q9ZSxkLiRyZW5kZXI9dGhpcy5yZW5kZXIsZC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhbmd1bGFyLmlzTnVtYmVyKGEpJiZhPDwwIT09YSYmKGE9TWF0aC5yb3VuZChhKSksYX0pLHRoaXMuc3RhdGVPbj1hbmd1bGFyLmlzRGVmaW5lZChiLnN0YXRlT24pP2EuJHBhcmVudC4kZXZhbChiLnN0YXRlT24pOmMuc3RhdGVPbix0aGlzLnN0YXRlT2ZmPWFuZ3VsYXIuaXNEZWZpbmVkKGIuc3RhdGVPZmYpP2EuJHBhcmVudC4kZXZhbChiLnN0YXRlT2ZmKTpjLnN0YXRlT2ZmO3ZhciBmPWFuZ3VsYXIuaXNEZWZpbmVkKGIudGl0bGVzKT9hLiRwYXJlbnQuJGV2YWwoYi50aXRsZXMpOmMudGl0bGVzO3RoaXMudGl0bGVzPWFuZ3VsYXIuaXNBcnJheShmKSYmZi5sZW5ndGg+MD9mOmMudGl0bGVzO3ZhciBnPWFuZ3VsYXIuaXNEZWZpbmVkKGIucmF0aW5nU3RhdGVzKT9hLiRwYXJlbnQuJGV2YWwoYi5yYXRpbmdTdGF0ZXMpOm5ldyBBcnJheShhbmd1bGFyLmlzRGVmaW5lZChiLm1heCk/YS4kcGFyZW50LiRldmFsKGIubWF4KTpjLm1heCk7YS5yYW5nZT10aGlzLmJ1aWxkVGVtcGxhdGVPYmplY3RzKGcpfSx0aGlzLmJ1aWxkVGVtcGxhdGVPYmplY3RzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKylhW2JdPWFuZ3VsYXIuZXh0ZW5kKHtpbmRleDpifSx7c3RhdGVPbjp0aGlzLnN0YXRlT24sc3RhdGVPZmY6dGhpcy5zdGF0ZU9mZix0aXRsZTp0aGlzLmdldFRpdGxlKGIpfSxhW2JdKTtyZXR1cm4gYX0sdGhpcy5nZXRUaXRsZT1mdW5jdGlvbihhKXtyZXR1cm4gYT49dGhpcy50aXRsZXMubGVuZ3RoP2ErMTp0aGlzLnRpdGxlc1thXX0sYS5yYXRlPWZ1bmN0aW9uKGIpeyFhLnJlYWRvbmx5JiZiPj0wJiZiPD1hLnJhbmdlLmxlbmd0aCYmKGQuJHNldFZpZXdWYWx1ZShkLiR2aWV3VmFsdWU9PT1iPzA6YiksZC4kcmVuZGVyKCkpfSxhLmVudGVyPWZ1bmN0aW9uKGIpe2EucmVhZG9ubHl8fChhLnZhbHVlPWIpLGEub25Ib3Zlcih7dmFsdWU6Yn0pfSxhLnJlc2V0PWZ1bmN0aW9uKCl7YS52YWx1ZT1kLiR2aWV3VmFsdWUsYS5vbkxlYXZlKCl9LGEub25LZXlkb3duPWZ1bmN0aW9uKGIpey8oMzd8Mzh8Mzl8NDApLy50ZXN0KGIud2hpY2gpJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCksYS5yYXRlKGEudmFsdWUrKDM4PT09Yi53aGljaHx8Mzk9PT1iLndoaWNoPzE6LTEpKSl9LHRoaXMucmVuZGVyPWZ1bmN0aW9uKCl7YS52YWx1ZT1kLiR2aWV3VmFsdWV9fV0pLmRpcmVjdGl2ZSgidWliUmF0aW5nIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlsidWliUmF0aW5nIiwibmdNb2RlbCJdLHNjb3BlOntyZWFkb25seToiPT8iLG9uSG92ZXI6IiYiLG9uTGVhdmU6IiYifSxjb250cm9sbGVyOiJVaWJSYXRpbmdDb250cm9sbGVyIix0ZW1wbGF0ZVVybDoidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sIixyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07ZS5pbml0KGYpfX19KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnJhdGluZyIpLnZhbHVlKCIkcmF0aW5nU3VwcHJlc3NXYXJuaW5nIiwhMSkuY29udHJvbGxlcigiUmF0aW5nQ29udHJvbGxlciIsWyIkc2NvcGUiLCIkYXR0cnMiLCIkY29udHJvbGxlciIsIiRsb2ciLCIkcmF0aW5nU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIsYyxkLGUpe2V8fGQud2FybigiUmF0aW5nQ29udHJvbGxlciBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIFVpYlJhdGluZ0NvbnRyb2xsZXIgaW5zdGVhZC4iKSxhbmd1bGFyLmV4dGVuZCh0aGlzLGMoIlVpYlJhdGluZ0NvbnRyb2xsZXIiLHskc2NvcGU6YSwkYXR0cnM6Yn0pKX1dKS5kaXJlY3RpdmUoInJhdGluZyIsWyIkbG9nIiwiJHJhdGluZ1N1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVxdWlyZTpbInJhdGluZyIsIm5nTW9kZWwiXSxzY29wZTp7cmVhZG9ubHk6Ij0/IixvbkhvdmVyOiImIixvbkxlYXZlOiImIn0sY29udHJvbGxlcjoiUmF0aW5nQ29udHJvbGxlciIsdGVtcGxhdGVVcmw6InRlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbCIscmVwbGFjZTohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2J8fGEud2FybigicmF0aW5nIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLXJhdGluZyBpbnN0ZWFkLiIpO3ZhciBnPWZbMF0saD1mWzFdO2cuaW5pdChoKX19fV0pLGFuZ3VsYXIubW9kdWxlKCJ1aS5ib290c3RyYXAudGFicyIsW10pLmNvbnRyb2xsZXIoIlVpYlRhYnNldENvbnRyb2xsZXIiLFsiJHNjb3BlIixmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi50YWJzPWEudGFicz1bXTtiLnNlbGVjdD1mdW5jdGlvbihhKXthbmd1bGFyLmZvckVhY2goYyxmdW5jdGlvbihiKXtiLmFjdGl2ZSYmYiE9PWEmJihiLmFjdGl2ZT0hMSxiLm9uRGVzZWxlY3QoKSxhLnNlbGVjdENhbGxlZD0hMSl9KSxhLmFjdGl2ZT0hMCxhLnNlbGVjdENhbGxlZHx8KGEub25TZWxlY3QoKSxhLnNlbGVjdENhbGxlZD0hMCl9LGIuYWRkVGFiPWZ1bmN0aW9uKGEpe2MucHVzaChhKSwxPT09Yy5sZW5ndGgmJmEuYWN0aXZlIT09ITE/YS5hY3RpdmU9ITA6YS5hY3RpdmU/Yi5zZWxlY3QoYSk6YS5hY3RpdmU9ITF9LGIucmVtb3ZlVGFiPWZ1bmN0aW9uKGEpe3ZhciBlPWMuaW5kZXhPZihhKTtpZihhLmFjdGl2ZSYmYy5sZW5ndGg+MSYmIWQpe3ZhciBmPWU9PWMubGVuZ3RoLTE/ZS0xOmUrMTtiLnNlbGVjdChjW2ZdKX1jLnNwbGljZShlLDEpfTt2YXIgZDthLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7ZD0hMH0pfV0pLmRpcmVjdGl2ZSgidWliVGFic2V0IixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDoiRUEiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCxzY29wZTp7dHlwZToiQCJ9LGNvbnRyb2xsZXI6IlVpYlRhYnNldENvbnRyb2xsZXIiLHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sIixsaW5rOmZ1bmN0aW9uKGEsYixjKXthLnZlcnRpY2FsPWFuZ3VsYXIuaXNEZWZpbmVkKGMudmVydGljYWwpP2EuJHBhcmVudC4kZXZhbChjLnZlcnRpY2FsKTohMSxhLmp1c3RpZmllZD1hbmd1bGFyLmlzRGVmaW5lZChjLmp1c3RpZmllZCk/YS4kcGFyZW50LiRldmFsKGMuanVzdGlmaWVkKTohMX19fSkuZGlyZWN0aXZlKCJ1aWJUYWIiLFsiJHBhcnNlIixmdW5jdGlvbihhKXtyZXR1cm57cmVxdWlyZToiXnVpYlRhYnNldCIscmVzdHJpY3Q6IkVBIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS90YWJzL3RhYi5odG1sIix0cmFuc2NsdWRlOiEwLHNjb3BlOnthY3RpdmU6Ij0/IixoZWFkaW5nOiJAIixvblNlbGVjdDoiJnNlbGVjdCIsb25EZXNlbGVjdDoiJmRlc2VsZWN0In0sY29udHJvbGxlcjpmdW5jdGlvbigpe30sbGluazpmdW5jdGlvbihiLGMsZCxlLGYpe2IuJHdhdGNoKCJhY3RpdmUiLGZ1bmN0aW9uKGEpe2EmJmUuc2VsZWN0KGIpfSksYi5kaXNhYmxlZD0hMSxkLmRpc2FibGUmJmIuJHBhcmVudC4kd2F0Y2goYShkLmRpc2FibGUpLGZ1bmN0aW9uKGEpe2IuZGlzYWJsZWQ9ISFhfSksYi5zZWxlY3Q9ZnVuY3Rpb24oKXtiLmRpc2FibGVkfHwoYi5hY3RpdmU9ITApfSxlLmFkZFRhYihiKSxiLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7ZS5yZW1vdmVUYWIoYil9KSxiLiR0cmFuc2NsdWRlRm49Zn19fV0pLmRpcmVjdGl2ZSgidWliVGFiSGVhZGluZ1RyYW5zY2x1ZGUiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OiJBIixyZXF1aXJlOlsiP151aWJUYWIiLCI/XnRhYiJdLGxpbms6ZnVuY3Rpb24oYSxiKXthLiR3YXRjaCgiaGVhZGluZ0VsZW1lbnQiLGZ1bmN0aW9uKGEpe2EmJihiLmh0bWwoIiIpLGIuYXBwZW5kKGEpKX0pfX19KS5kaXJlY3RpdmUoInVpYlRhYkNvbnRlbnRUcmFuc2NsdWRlIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuIGEudGFnTmFtZSYmKGEuaGFzQXR0cmlidXRlKCJ0YWItaGVhZGluZyIpfHxhLmhhc0F0dHJpYnV0ZSgiZGF0YS10YWItaGVhZGluZyIpfHxhLmhhc0F0dHJpYnV0ZSgieC10YWItaGVhZGluZyIpfHxhLmhhc0F0dHJpYnV0ZSgidWliLXRhYi1oZWFkaW5nIil8fGEuaGFzQXR0cmlidXRlKCJkYXRhLXVpYi10YWItaGVhZGluZyIpfHxhLmhhc0F0dHJpYnV0ZSgieC11aWItdGFiLWhlYWRpbmciKXx8InRhYi1oZWFkaW5nIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHwiZGF0YS10YWItaGVhZGluZyI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8IngtdGFiLWhlYWRpbmciPT09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fCJ1aWItdGFiLWhlYWRpbmciPT09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fCJkYXRhLXVpYi10YWItaGVhZGluZyI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8IngtdWliLXRhYi1oZWFkaW5nIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKX1yZXR1cm57cmVzdHJpY3Q6IkEiLHJlcXVpcmU6WyI/XnVpYlRhYnNldCIsIj9edGFic2V0Il0sbGluazpmdW5jdGlvbihiLGMsZCl7dmFyIGU9Yi4kZXZhbChkLnVpYlRhYkNvbnRlbnRUcmFuc2NsdWRlKTtlLiR0cmFuc2NsdWRlRm4oZS4kcGFyZW50LGZ1bmN0aW9uKGIpe2FuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGIpe2EoYik/ZS5oZWFkaW5nRWxlbWVudD1iOmMuYXBwZW5kKGIpfSl9KX19fSksYW5ndWxhci5tb2R1bGUoInVpLmJvb3RzdHJhcC50YWJzIikudmFsdWUoIiR0YWJzU3VwcHJlc3NXYXJuaW5nIiwhMSkuY29udHJvbGxlcigiVGFic2V0Q29udHJvbGxlciIsWyIkc2NvcGUiLCIkY29udHJvbGxlciIsIiRsb2ciLCIkdGFic1N1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCl7ZHx8Yy53YXJuKCJUYWJzZXRDb250cm9sbGVyIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgVWliVGFic2V0Q29udHJvbGxlciBpbnN0ZWFkLiIpLGFuZ3VsYXIuZXh0ZW5kKHRoaXMsYigiVWliVGFic2V0Q29udHJvbGxlciIseyRzY29wZTphfSkpfV0pLmRpcmVjdGl2ZSgidGFic2V0IixbIiRsb2ciLCIkdGFic1N1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVzdHJpY3Q6IkVBIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsc2NvcGU6e3R5cGU6IkAifSxjb250cm9sbGVyOiJUYWJzZXRDb250cm9sbGVyIix0ZW1wbGF0ZVVybDoidGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbCIsbGluazpmdW5jdGlvbihjLGQsZSl7Ynx8YS53YXJuKCJ0YWJzZXQgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItdGFic2V0IGluc3RlYWQuIiksYy52ZXJ0aWNhbD1hbmd1bGFyLmlzRGVmaW5lZChlLnZlcnRpY2FsKT9jLiRwYXJlbnQuJGV2YWwoZS52ZXJ0aWNhbCk6ITEsYy5qdXN0aWZpZWQ9YW5ndWxhci5pc0RlZmluZWQoZS5qdXN0aWZpZWQpP2MuJHBhcmVudC4kZXZhbChlLmp1c3RpZmllZCk6ITF9fX1dKS5kaXJlY3RpdmUoInRhYiIsWyIkcGFyc2UiLCIkbG9nIiwiJHRhYnNTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm57cmVxdWlyZToiXnRhYnNldCIscmVzdHJpY3Q6IkVBIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOiJ0ZW1wbGF0ZS90YWJzL3RhYi5odG1sIix0cmFuc2NsdWRlOiEwLHNjb3BlOnthY3RpdmU6Ij0/IixoZWFkaW5nOiJAIixvblNlbGVjdDoiJnNlbGVjdCIsb25EZXNlbGVjdDoiJmRlc2VsZWN0In0sY29udHJvbGxlcjpmdW5jdGlvbigpe30sbGluazpmdW5jdGlvbihkLGUsZixnLGgpe2N8fGIud2FybigidGFiIGlzIG5vdyBkZXByZWNhdGVkLiBVc2UgdWliLXRhYiBpbnN0ZWFkLiIpLGQuJHdhdGNoKCJhY3RpdmUiLGZ1bmN0aW9uKGEpe2EmJmcuc2VsZWN0KGQpfSksZC5kaXNhYmxlZD0hMSxmLmRpc2FibGUmJmQuJHBhcmVudC4kd2F0Y2goYShmLmRpc2FibGUpLGZ1bmN0aW9uKGEpe2QuZGlzYWJsZWQ9ISFhfSksZC5zZWxlY3Q9ZnVuY3Rpb24oKXtkLmRpc2FibGVkfHwoZC5hY3RpdmU9ITApfSxnLmFkZFRhYihkKSxkLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7Zy5yZW1vdmVUYWIoZCl9KSxkLiR0cmFuc2NsdWRlRm49aH19fV0pLmRpcmVjdGl2ZSgidGFiSGVhZGluZ1RyYW5zY2x1ZGUiLFsiJGxvZyIsIiR0YWJzU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe3JldHVybntyZXN0cmljdDoiQSIscmVxdWlyZToiXnRhYiIsbGluazpmdW5jdGlvbihjLGQpe2J8fGEud2FybigidGFiLWhlYWRpbmctdHJhbnNjbHVkZSBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi10YWItaGVhZGluZy10cmFuc2NsdWRlIGluc3RlYWQuIiksYy4kd2F0Y2goImhlYWRpbmdFbGVtZW50IixmdW5jdGlvbihhKXthJiYoZC5odG1sKCIiKSxkLmFwcGVuZChhKSl9KX19fV0pLmRpcmVjdGl2ZSgidGFiQ29udGVudFRyYW5zY2x1ZGUiLFsiJGxvZyIsIiR0YWJzU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGEudGFnTmFtZSYmKGEuaGFzQXR0cmlidXRlKCJ0YWItaGVhZGluZyIpfHxhLmhhc0F0dHJpYnV0ZSgiZGF0YS10YWItaGVhZGluZyIpfHxhLmhhc0F0dHJpYnV0ZSgieC10YWItaGVhZGluZyIpfHwidGFiLWhlYWRpbmciPT09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fCJkYXRhLXRhYi1oZWFkaW5nIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHwieC10YWItaGVhZGluZyI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl9cmV0dXJue3Jlc3RyaWN0OiJBIixyZXF1aXJlOiJedGFic2V0IixsaW5rOmZ1bmN0aW9uKGQsZSxmKXtifHxhLndhcm4oInRhYi1jb250ZW50LXRyYW5zY2x1ZGUgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItdGFiLWNvbnRlbnQtdHJhbnNjbHVkZSBpbnN0ZWFkLiIpO3ZhciBnPWQuJGV2YWwoZi50YWJDb250ZW50VHJhbnNjbHVkZSk7Zy4kdHJhbnNjbHVkZUZuKGcuJHBhcmVudCxmdW5jdGlvbihhKXthbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXtjKGEpP2cuaGVhZGluZ0VsZW1lbnQ9YTplLmFwcGVuZChhKX0pfSl9fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXIiLFtdKS5jb25zdGFudCgidWliVGltZXBpY2tlckNvbmZpZyIse2hvdXJTdGVwOjEsbWludXRlU3RlcDoxLHNob3dNZXJpZGlhbjohMCxtZXJpZGlhbnM6bnVsbCxyZWFkb25seUlucHV0OiExLG1vdXNld2hlZWw6ITAsYXJyb3drZXlzOiEwLHNob3dTcGlubmVyczohMH0pLmNvbnRyb2xsZXIoIlVpYlRpbWVwaWNrZXJDb250cm9sbGVyIixbIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIiwiJHBhcnNlIiwiJGxvZyIsIiRsb2NhbGUiLCJ1aWJUaW1lcGlja2VyQ29uZmlnIixmdW5jdGlvbihhLGIsYyxkLGUsZixnKXtmdW5jdGlvbiBoKCl7dmFyIGI9cGFyc2VJbnQoYS5ob3VycywxMCksYz1hLnNob3dNZXJpZGlhbj9iPjAmJjEzPmI6Yj49MCYmMjQ+YjtyZXR1cm4gYz8oYS5zaG93TWVyaWRpYW4mJigxMj09PWImJihiPTApLGEubWVyaWRpYW49PT1yWzFdJiYoYis9MTIpKSxiKTp2b2lkIDB9ZnVuY3Rpb24gaSgpe3ZhciBiPXBhcnNlSW50KGEubWludXRlcywxMCk7cmV0dXJuIGI+PTAmJjYwPmI/Yjp2b2lkIDB9ZnVuY3Rpb24gaihhKXtyZXR1cm4gYW5ndWxhci5pc0RlZmluZWQoYSkmJmEudG9TdHJpbmcoKS5sZW5ndGg8Mj8iMCIrYTphLnRvU3RyaW5nKCl9ZnVuY3Rpb24gayhhKXtsKCkscS4kc2V0Vmlld1ZhbHVlKG5ldyBEYXRlKHApKSxtKGEpfWZ1bmN0aW9uIGwoKXtxLiRzZXRWYWxpZGl0eSgidGltZSIsITApLGEuaW52YWxpZEhvdXJzPSExLGEuaW52YWxpZE1pbnV0ZXM9ITF9ZnVuY3Rpb24gbShiKXt2YXIgYz1wLmdldEhvdXJzKCksZD1wLmdldE1pbnV0ZXMoKTthLnNob3dNZXJpZGlhbiYmKGM9MD09PWN8fDEyPT09Yz8xMjpjJTEyKSxhLmhvdXJzPSJoIj09PWI/YzpqKGMpLCJtIiE9PWImJihhLm1pbnV0ZXM9aihkKSksYS5tZXJpZGlhbj1wLmdldEhvdXJzKCk8MTI/clswXTpyWzFdfWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1uZXcgRGF0ZShhLmdldFRpbWUoKSs2ZTQqYiksZD1uZXcgRGF0ZShhKTtyZXR1cm4gZC5zZXRIb3VycyhjLmdldEhvdXJzKCksYy5nZXRNaW51dGVzKCkpLGR9ZnVuY3Rpb24gbyhhKXtwPW4ocCxhKSxrKCl9dmFyIHA9bmV3IERhdGUscT17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9LHI9YW5ndWxhci5pc0RlZmluZWQoYy5tZXJpZGlhbnMpP2EuJHBhcmVudC4kZXZhbChjLm1lcmlkaWFucyk6Zy5tZXJpZGlhbnN8fGYuREFURVRJTUVfRk9STUFUUy5BTVBNUzthLnRhYmluZGV4PWFuZ3VsYXIuaXNEZWZpbmVkKGMudGFiaW5kZXgpP2MudGFiaW5kZXg6MCxiLnJlbW92ZUF0dHIoInRhYmluZGV4IiksdGhpcy5pbml0PWZ1bmN0aW9uKGIsZCl7cT1iLHEuJHJlbmRlcj10aGlzLnJlbmRlcixxLiRmb3JtYXR0ZXJzLnVuc2hpZnQoZnVuY3Rpb24oYSl7cmV0dXJuIGE/bmV3IERhdGUoYSk6bnVsbH0pO3ZhciBlPWQuZXEoMCksZj1kLmVxKDEpLGg9YW5ndWxhci5pc0RlZmluZWQoYy5tb3VzZXdoZWVsKT9hLiRwYXJlbnQuJGV2YWwoYy5tb3VzZXdoZWVsKTpnLm1vdXNld2hlZWw7aCYmdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHMoZSxmKTt2YXIgaT1hbmd1bGFyLmlzRGVmaW5lZChjLmFycm93a2V5cyk/YS4kcGFyZW50LiRldmFsKGMuYXJyb3drZXlzKTpnLmFycm93a2V5cztpJiZ0aGlzLnNldHVwQXJyb3drZXlFdmVudHMoZSxmKSxhLnJlYWRvbmx5SW5wdXQ9YW5ndWxhci5pc0RlZmluZWQoYy5yZWFkb25seUlucHV0KT9hLiRwYXJlbnQuJGV2YWwoYy5yZWFkb25seUlucHV0KTpnLnJlYWRvbmx5SW5wdXQsdGhpcy5zZXR1cElucHV0RXZlbnRzKGUsZil9O3ZhciBzPWcuaG91clN0ZXA7Yy5ob3VyU3RlcCYmYS4kcGFyZW50LiR3YXRjaChkKGMuaG91clN0ZXApLGZ1bmN0aW9uKGEpe3M9cGFyc2VJbnQoYSwxMCl9KTt2YXIgdD1nLm1pbnV0ZVN0ZXA7Yy5taW51dGVTdGVwJiZhLiRwYXJlbnQuJHdhdGNoKGQoYy5taW51dGVTdGVwKSxmdW5jdGlvbihhKXt0PXBhcnNlSW50KGEsMTApfSk7dmFyIHU7YS4kcGFyZW50LiR3YXRjaChkKGMubWluKSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgRGF0ZShhKTt1PWlzTmFOKGIpP3ZvaWQgMDpifSk7dmFyIHY7YS4kcGFyZW50LiR3YXRjaChkKGMubWF4KSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgRGF0ZShhKTt2PWlzTmFOKGIpP3ZvaWQgMDpifSksYS5ub0luY3JlbWVudEhvdXJzPWZ1bmN0aW9uKCl7dmFyIGE9bihwLDYwKnMpOwpyZXR1cm4gYT52fHxwPmEmJnU+YX0sYS5ub0RlY3JlbWVudEhvdXJzPWZ1bmN0aW9uKCl7dmFyIGE9bihwLDYwKi1zKTtyZXR1cm4gdT5hfHxhPnAmJmE+dn0sYS5ub0luY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXt2YXIgYT1uKHAsdCk7cmV0dXJuIGE+dnx8cD5hJiZ1PmF9LGEubm9EZWNyZW1lbnRNaW51dGVzPWZ1bmN0aW9uKCl7dmFyIGE9bihwLC10KTtyZXR1cm4gdT5hfHxhPnAmJmE+dn0sYS5ub1RvZ2dsZU1lcmlkaWFuPWZ1bmN0aW9uKCl7cmV0dXJuIHAuZ2V0SG91cnMoKTwxMz9uKHAsNzIwKT52Om4ocCwtNzIwKTx1fSxhLnNob3dNZXJpZGlhbj1nLnNob3dNZXJpZGlhbixjLnNob3dNZXJpZGlhbiYmYS4kcGFyZW50LiR3YXRjaChkKGMuc2hvd01lcmlkaWFuKSxmdW5jdGlvbihiKXtpZihhLnNob3dNZXJpZGlhbj0hIWIscS4kZXJyb3IudGltZSl7dmFyIGM9aCgpLGQ9aSgpO2FuZ3VsYXIuaXNEZWZpbmVkKGMpJiZhbmd1bGFyLmlzRGVmaW5lZChkKSYmKHAuc2V0SG91cnMoYyksaygpKX1lbHNlIG0oKX0pLHRoaXMuc2V0dXBNb3VzZXdoZWVsRXZlbnRzPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7YS5vcmlnaW5hbEV2ZW50JiYoYT1hLm9yaWdpbmFsRXZlbnQpO3ZhciBiPWEud2hlZWxEZWx0YT9hLndoZWVsRGVsdGE6LWEuZGVsdGFZO3JldHVybiBhLmRldGFpbHx8Yj4wfTtiLmJpbmQoIm1vdXNld2hlZWwgd2hlZWwiLGZ1bmN0aW9uKGIpe2EuJGFwcGx5KGQoYik/YS5pbmNyZW1lbnRIb3VycygpOmEuZGVjcmVtZW50SG91cnMoKSksYi5wcmV2ZW50RGVmYXVsdCgpfSksYy5iaW5kKCJtb3VzZXdoZWVsIHdoZWVsIixmdW5jdGlvbihiKXthLiRhcHBseShkKGIpP2EuaW5jcmVtZW50TWludXRlcygpOmEuZGVjcmVtZW50TWludXRlcygpKSxiLnByZXZlbnREZWZhdWx0KCl9KX0sdGhpcy5zZXR1cEFycm93a2V5RXZlbnRzPWZ1bmN0aW9uKGIsYyl7Yi5iaW5kKCJrZXlkb3duIixmdW5jdGlvbihiKXszOD09PWIud2hpY2g/KGIucHJldmVudERlZmF1bHQoKSxhLmluY3JlbWVudEhvdXJzKCksYS4kYXBwbHkoKSk6NDA9PT1iLndoaWNoJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGEuZGVjcmVtZW50SG91cnMoKSxhLiRhcHBseSgpKX0pLGMuYmluZCgia2V5ZG93biIsZnVuY3Rpb24oYil7Mzg9PT1iLndoaWNoPyhiLnByZXZlbnREZWZhdWx0KCksYS5pbmNyZW1lbnRNaW51dGVzKCksYS4kYXBwbHkoKSk6NDA9PT1iLndoaWNoJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGEuZGVjcmVtZW50TWludXRlcygpLGEuJGFwcGx5KCkpfSl9LHRoaXMuc2V0dXBJbnB1dEV2ZW50cz1mdW5jdGlvbihiLGMpe2lmKGEucmVhZG9ubHlJbnB1dClyZXR1cm4gYS51cGRhdGVIb3Vycz1hbmd1bGFyLm5vb3Asdm9pZChhLnVwZGF0ZU1pbnV0ZXM9YW5ndWxhci5ub29wKTt2YXIgZD1mdW5jdGlvbihiLGMpe3EuJHNldFZpZXdWYWx1ZShudWxsKSxxLiRzZXRWYWxpZGl0eSgidGltZSIsITEpLGFuZ3VsYXIuaXNEZWZpbmVkKGIpJiYoYS5pbnZhbGlkSG91cnM9YiksYW5ndWxhci5pc0RlZmluZWQoYykmJihhLmludmFsaWRNaW51dGVzPWMpfTthLnVwZGF0ZUhvdXJzPWZ1bmN0aW9uKCl7dmFyIGE9aCgpLGI9aSgpO2FuZ3VsYXIuaXNEZWZpbmVkKGEpJiZhbmd1bGFyLmlzRGVmaW5lZChiKT8ocC5zZXRIb3VycyhhKSx1PnB8fHA+dj9kKCEwKTprKCJoIikpOmQoITApfSxiLmJpbmQoImJsdXIiLGZ1bmN0aW9uKGIpeyFhLmludmFsaWRIb3VycyYmYS5ob3VyczwxMCYmYS4kYXBwbHkoZnVuY3Rpb24oKXthLmhvdXJzPWooYS5ob3Vycyl9KX0pLGEudXBkYXRlTWludXRlcz1mdW5jdGlvbigpe3ZhciBhPWkoKSxiPWgoKTthbmd1bGFyLmlzRGVmaW5lZChhKSYmYW5ndWxhci5pc0RlZmluZWQoYik/KHAuc2V0TWludXRlcyhhKSx1PnB8fHA+dj9kKHZvaWQgMCwhMCk6aygibSIpKTpkKHZvaWQgMCwhMCl9LGMuYmluZCgiYmx1ciIsZnVuY3Rpb24oYil7IWEuaW52YWxpZE1pbnV0ZXMmJmEubWludXRlczwxMCYmYS4kYXBwbHkoZnVuY3Rpb24oKXthLm1pbnV0ZXM9aihhLm1pbnV0ZXMpfSl9KX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYj1xLiR2aWV3VmFsdWU7aXNOYU4oYik/KHEuJHNldFZhbGlkaXR5KCJ0aW1lIiwhMSksZS5lcnJvcignVGltZXBpY2tlciBkaXJlY3RpdmU6ICJuZy1tb2RlbCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0LCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCBvciBhIHN0cmluZyByZXByZXNlbnRpbmcgYW4gUkZDMjgyMiBvciBJU08gODYwMSBkYXRlLicpKTooYiYmKHA9YiksdT5wfHxwPnY/KHEuJHNldFZhbGlkaXR5KCJ0aW1lIiwhMSksYS5pbnZhbGlkSG91cnM9ITAsYS5pbnZhbGlkTWludXRlcz0hMCk6bCgpLG0oKSl9LGEuc2hvd1NwaW5uZXJzPWFuZ3VsYXIuaXNEZWZpbmVkKGMuc2hvd1NwaW5uZXJzKT9hLiRwYXJlbnQuJGV2YWwoYy5zaG93U3Bpbm5lcnMpOmcuc2hvd1NwaW5uZXJzLGEuaW5jcmVtZW50SG91cnM9ZnVuY3Rpb24oKXthLm5vSW5jcmVtZW50SG91cnMoKXx8byg2MCpzKX0sYS5kZWNyZW1lbnRIb3Vycz1mdW5jdGlvbigpe2Eubm9EZWNyZW1lbnRIb3VycygpfHxvKDYwKi1zKX0sYS5pbmNyZW1lbnRNaW51dGVzPWZ1bmN0aW9uKCl7YS5ub0luY3JlbWVudE1pbnV0ZXMoKXx8byh0KX0sYS5kZWNyZW1lbnRNaW51dGVzPWZ1bmN0aW9uKCl7YS5ub0RlY3JlbWVudE1pbnV0ZXMoKXx8bygtdCl9LGEudG9nZ2xlTWVyaWRpYW49ZnVuY3Rpb24oKXthLm5vVG9nZ2xlTWVyaWRpYW4oKXx8byg3MjAqKHAuZ2V0SG91cnMoKTwxMj8xOi0xKSl9fV0pLmRpcmVjdGl2ZSgidWliVGltZXBpY2tlciIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6IkVBIixyZXF1aXJlOlsidWliVGltZXBpY2tlciIsIj9ebmdNb2RlbCJdLGNvbnRyb2xsZXI6IlVpYlRpbWVwaWNrZXJDb250cm9sbGVyIixjb250cm9sbGVyQXM6InRpbWVwaWNrZXIiLHJlcGxhY2U6ITAsc2NvcGU6e30sdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sIn0sbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtmJiZlLmluaXQoZixiLmZpbmQoImlucHV0IikpfX19KSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXIiKS52YWx1ZSgiJHRpbWVwaWNrZXJTdXBwcmVzc1dhcm5pbmciLCExKS5jb250cm9sbGVyKCJUaW1lcGlja2VyQ29udHJvbGxlciIsWyIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsIiRjb250cm9sbGVyIiwiJGxvZyIsIiR0aW1lcGlja2VyU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIsYyxkLGUsZil7Znx8ZS53YXJuKCJUaW1lcGlja2VyQ29udHJvbGxlciBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIFVpYlRpbWVwaWNrZXJDb250cm9sbGVyIGluc3RlYWQuIiksYW5ndWxhci5leHRlbmQodGhpcyxkKCJVaWJUaW1lcGlja2VyQ29udHJvbGxlciIseyRzY29wZTphLCRlbGVtZW50OmIsJGF0dHJzOmN9KSl9XSkuZGlyZWN0aXZlKCJ0aW1lcGlja2VyIixbIiRsb2ciLCIkdGltZXBpY2tlclN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVzdHJpY3Q6IkVBIixyZXF1aXJlOlsidGltZXBpY2tlciIsIj9ebmdNb2RlbCJdLGNvbnRyb2xsZXI6IlRpbWVwaWNrZXJDb250cm9sbGVyIixjb250cm9sbGVyQXM6InRpbWVwaWNrZXIiLHJlcGxhY2U6ITAsc2NvcGU6e30sdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8InRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sIn0sbGluazpmdW5jdGlvbihjLGQsZSxmKXtifHxhLndhcm4oInRpbWVwaWNrZXIgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItdGltZXBpY2tlciBpbnN0ZWFkLiIpO3ZhciBnPWZbMF0saD1mWzFdO2gmJmcuaW5pdChoLGQuZmluZCgiaW5wdXQiKSl9fX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnR5cGVhaGVhZCIsWyJ1aS5ib290c3RyYXAucG9zaXRpb24iXSkuZmFjdG9yeSgidWliVHlwZWFoZWFkUGFyc2VyIixbIiRwYXJzZSIsZnVuY3Rpb24oYSl7dmFyIGI9L15ccyooW1xzXFNdKz8pKD86XHMrYXNccysoW1xzXFNdKz8pKT9ccytmb3JccysoPzooW1wkXHddW1wkXHdcZF0qKSlccytpblxzKyhbXHNcU10rPykkLztyZXR1cm57cGFyc2U6ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5tYXRjaChiKTtpZighZCl0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHR5cGVhaGVhZCBzcGVjaWZpY2F0aW9uIGluIGZvcm0gb2YgIl9tb2RlbFZhbHVlXyAoYXMgX2xhYmVsXyk/IGZvciBfaXRlbV8gaW4gX2NvbGxlY3Rpb25fIiBidXQgZ290ICInK2MrJyIuJyk7cmV0dXJue2l0ZW1OYW1lOmRbM10sc291cmNlOmEoZFs0XSksdmlld01hcHBlcjphKGRbMl18fGRbMV0pLG1vZGVsTWFwcGVyOmEoZFsxXSl9fX19XSkuY29udHJvbGxlcigiVWliVHlwZWFoZWFkQ29udHJvbGxlciIsWyIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsIiRjb21waWxlIiwiJHBhcnNlIiwiJHEiLCIkdGltZW91dCIsIiRkb2N1bWVudCIsIiR3aW5kb3ciLCIkcm9vdFNjb3BlIiwiJHVpYlBvc2l0aW9uIiwidWliVHlwZWFoZWFkUGFyc2VyIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGssbCl7ZnVuY3Rpb24gbSgpe0subW92ZUluUHJvZ3Jlc3N8fChLLm1vdmVJblByb2dyZXNzPSEwLEsuJGRpZ2VzdCgpKSxTJiZnLmNhbmNlbChTKSxTPWcoZnVuY3Rpb24oKXtLLm1hdGNoZXMubGVuZ3RoJiZuKCksSy5tb3ZlSW5Qcm9ncmVzcz0hMX0scil9ZnVuY3Rpb24gbigpe0sucG9zaXRpb249Qz9rLm9mZnNldChiKTprLnBvc2l0aW9uKGIpLEsucG9zaXRpb24udG9wKz1iLnByb3AoIm9mZnNldEhlaWdodCIpfXZhciBvLHAscT1bOSwxMywyNywzOCw0MF0scj0yMDAscz1hLiRldmFsKGMudHlwZWFoZWFkTWluTGVuZ3RoKTtzfHwwPT09c3x8KHM9MSk7dmFyIHQsdSx2PWEuJGV2YWwoYy50eXBlYWhlYWRXYWl0TXMpfHwwLHc9YS4kZXZhbChjLnR5cGVhaGVhZEVkaXRhYmxlKSE9PSExLHg9ZShjLnR5cGVhaGVhZExvYWRpbmcpLmFzc2lnbnx8YW5ndWxhci5ub29wLHk9ZShjLnR5cGVhaGVhZE9uU2VsZWN0KSx6PWFuZ3VsYXIuaXNEZWZpbmVkKGMudHlwZWFoZWFkU2VsZWN0T25CbHVyKT9hLiRldmFsKGMudHlwZWFoZWFkU2VsZWN0T25CbHVyKTohMSxBPWUoYy50eXBlYWhlYWROb1Jlc3VsdHMpLmFzc2lnbnx8YW5ndWxhci5ub29wLEI9Yy50eXBlYWhlYWRJbnB1dEZvcm1hdHRlcj9lKGMudHlwZWFoZWFkSW5wdXRGb3JtYXR0ZXIpOnZvaWQgMCxDPWMudHlwZWFoZWFkQXBwZW5kVG9Cb2R5P2EuJGV2YWwoYy50eXBlYWhlYWRBcHBlbmRUb0JvZHkpOiExLEQ9Yy50eXBlYWhlYWRBcHBlbmRUb0VsZW1lbnRJZHx8ITEsRT1hLiRldmFsKGMudHlwZWFoZWFkRm9jdXNGaXJzdCkhPT0hMSxGPWMudHlwZWFoZWFkU2VsZWN0T25FeGFjdD9hLiRldmFsKGMudHlwZWFoZWFkU2VsZWN0T25FeGFjdCk6ITEsRz1lKGMubmdNb2RlbCksSD1lKGMubmdNb2RlbCsiKCQkJHApIiksST1mdW5jdGlvbihiLGMpe3JldHVybiBhbmd1bGFyLmlzRnVuY3Rpb24oRyhhKSkmJnAmJnAuJG9wdGlvbnMmJnAuJG9wdGlvbnMuZ2V0dGVyU2V0dGVyP0goYix7JCQkcDpjfSk6Ry5hc3NpZ24oYixjKX0sSj1sLnBhcnNlKGMudWliVHlwZWFoZWFkKSxLPWEuJG5ldygpLEw9YS4kb24oIiRkZXN0cm95IixmdW5jdGlvbigpe0suJGRlc3Ryb3koKX0pO0suJG9uKCIkZGVzdHJveSIsTCk7dmFyIE09InR5cGVhaGVhZC0iK0suJGlkKyItIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKTtiLmF0dHIoeyJhcmlhLWF1dG9jb21wbGV0ZSI6Imxpc3QiLCJhcmlhLWV4cGFuZGVkIjohMSwiYXJpYS1vd25zIjpNfSk7dmFyIE49YW5ndWxhci5lbGVtZW50KCI8ZGl2IHVpYi10eXBlYWhlYWQtcG9wdXA+PC9kaXY+Iik7Ti5hdHRyKHtpZDpNLG1hdGNoZXM6Im1hdGNoZXMiLGFjdGl2ZToiYWN0aXZlSWR4IixzZWxlY3Q6InNlbGVjdChhY3RpdmVJZHgpIiwibW92ZS1pbi1wcm9ncmVzcyI6Im1vdmVJblByb2dyZXNzIixxdWVyeToicXVlcnkiLHBvc2l0aW9uOiJwb3NpdGlvbiJ9KSxhbmd1bGFyLmlzRGVmaW5lZChjLnR5cGVhaGVhZFRlbXBsYXRlVXJsKSYmTi5hdHRyKCJ0ZW1wbGF0ZS11cmwiLGMudHlwZWFoZWFkVGVtcGxhdGVVcmwpLGFuZ3VsYXIuaXNEZWZpbmVkKGMudHlwZWFoZWFkUG9wdXBUZW1wbGF0ZVVybCkmJk4uYXR0cigicG9wdXAtdGVtcGxhdGUtdXJsIixjLnR5cGVhaGVhZFBvcHVwVGVtcGxhdGVVcmwpO3ZhciBPPWZ1bmN0aW9uKCl7Sy5tYXRjaGVzPVtdLEsuYWN0aXZlSWR4PS0xLGIuYXR0cigiYXJpYS1leHBhbmRlZCIsITEpfSxQPWZ1bmN0aW9uKGEpe3JldHVybiBNKyItb3B0aW9uLSIrYX07Sy4kd2F0Y2goImFjdGl2ZUlkeCIsZnVuY3Rpb24oYSl7MD5hP2IucmVtb3ZlQXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50Iik6Yi5hdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiLFAoYSkpfSk7dmFyIFE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSy5tYXRjaGVzLmxlbmd0aD5iJiZhP2EudG9VcHBlckNhc2UoKT09PUsubWF0Y2hlc1tiXS5sYWJlbC50b1VwcGVyQ2FzZSgpOiExfSxSPWZ1bmN0aW9uKGMpe3ZhciBkPXskdmlld1ZhbHVlOmN9O3goYSwhMCksQShhLCExKSxmLndoZW4oSi5zb3VyY2UoYSxkKSkudGhlbihmdW5jdGlvbihlKXt2YXIgZj1jPT09by4kdmlld1ZhbHVlO2lmKGYmJnQpaWYoZSYmZS5sZW5ndGg+MCl7Sy5hY3RpdmVJZHg9RT8wOi0xLEEoYSwhMSksSy5tYXRjaGVzLmxlbmd0aD0wO2Zvcih2YXIgZz0wO2c8ZS5sZW5ndGg7ZysrKWRbSi5pdGVtTmFtZV09ZVtnXSxLLm1hdGNoZXMucHVzaCh7aWQ6UChnKSxsYWJlbDpKLnZpZXdNYXBwZXIoSyxkKSxtb2RlbDplW2ddfSk7Sy5xdWVyeT1jLG4oKSxiLmF0dHIoImFyaWEtZXhwYW5kZWQiLCEwKSxGJiYxPT09Sy5tYXRjaGVzLmxlbmd0aCYmUShjLDApJiZLLnNlbGVjdCgwKX1lbHNlIE8oKSxBKGEsITApO2YmJngoYSwhMSl9LGZ1bmN0aW9uKCl7TygpLHgoYSwhMSksQShhLCEwKX0pfTtDJiYoYW5ndWxhci5lbGVtZW50KGkpLmJpbmQoInJlc2l6ZSIsbSksaC5maW5kKCJib2R5IikuYmluZCgic2Nyb2xsIixtKSk7dmFyIFM7Sy5tb3ZlSW5Qcm9ncmVzcz0hMSxLLnF1ZXJ5PXZvaWQgMDt2YXIgVCxVPWZ1bmN0aW9uKGEpe1Q9ZyhmdW5jdGlvbigpe1IoYSl9LHYpfSxWPWZ1bmN0aW9uKCl7VCYmZy5jYW5jZWwoVCl9O08oKSxLLnNlbGVjdD1mdW5jdGlvbihkKXt2YXIgZSxmLGg9e307dT0hMCxoW0ouaXRlbU5hbWVdPWY9Sy5tYXRjaGVzW2RdLm1vZGVsLGU9Si5tb2RlbE1hcHBlcihhLGgpLEkoYSxlKSxvLiRzZXRWYWxpZGl0eSgiZWRpdGFibGUiLCEwKSxvLiRzZXRWYWxpZGl0eSgicGFyc2UiLCEwKSx5KGEseyRpdGVtOmYsJG1vZGVsOmUsJGxhYmVsOkoudmlld01hcHBlcihhLGgpfSksTygpLEsuJGV2YWwoYy50eXBlYWhlYWRGb2N1c09uU2VsZWN0KSE9PSExJiZnKGZ1bmN0aW9uKCl7YlswXS5mb2N1cygpfSwwLCExKX0sYi5iaW5kKCJrZXlkb3duIixmdW5jdGlvbihhKXtpZigwIT09Sy5tYXRjaGVzLmxlbmd0aCYmLTEhPT1xLmluZGV4T2YoYS53aGljaCkpe2lmKC0xPT09Sy5hY3RpdmVJZHgmJig5PT09YS53aGljaHx8MTM9PT1hLndoaWNoKSlyZXR1cm4gTygpLHZvaWQgSy4kZGlnZXN0KCk7YS5wcmV2ZW50RGVmYXVsdCgpLDQwPT09YS53aGljaD8oSy5hY3RpdmVJZHg9KEsuYWN0aXZlSWR4KzEpJUsubWF0Y2hlcy5sZW5ndGgsSy4kZGlnZXN0KCkpOjM4PT09YS53aGljaD8oSy5hY3RpdmVJZHg9KEsuYWN0aXZlSWR4PjA/Sy5hY3RpdmVJZHg6Sy5tYXRjaGVzLmxlbmd0aCktMSxLLiRkaWdlc3QoKSk6MTM9PT1hLndoaWNofHw5PT09YS53aGljaD9LLiRhcHBseShmdW5jdGlvbigpe0suc2VsZWN0KEsuYWN0aXZlSWR4KX0pOjI3PT09YS53aGljaCYmKGEuc3RvcFByb3BhZ2F0aW9uKCksTygpLEsuJGRpZ2VzdCgpKX19KSxiLmJpbmQoImJsdXIiLGZ1bmN0aW9uKCl7eiYmSy5tYXRjaGVzLmxlbmd0aCYmLTEhPT1LLmFjdGl2ZUlkeCYmIXUmJih1PSEwLEsuJGFwcGx5KGZ1bmN0aW9uKCl7Sy5zZWxlY3QoSy5hY3RpdmVJZHgpfSkpLHQ9ITEsdT0hMX0pO3ZhciBXPWZ1bmN0aW9uKGEpe2JbMF0hPT1hLnRhcmdldCYmMyE9PWEud2hpY2gmJjAhPT1LLm1hdGNoZXMubGVuZ3RoJiYoTygpLGouJCRwaGFzZXx8Sy4kZGlnZXN0KCkpfTtoLmJpbmQoImNsaWNrIixXKSxhLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7aC51bmJpbmQoImNsaWNrIixXKSwoQ3x8RCkmJlgucmVtb3ZlKCksQyYmKGFuZ3VsYXIuZWxlbWVudChpKS51bmJpbmQoInJlc2l6ZSIsbSksaC5maW5kKCJib2R5IikudW5iaW5kKCJzY3JvbGwiLG0pKSxOLnJlbW92ZSgpfSk7dmFyIFg9ZChOKShLKTtDP2guZmluZCgiYm9keSIpLmFwcGVuZChYKTpEIT09ITE/YW5ndWxhci5lbGVtZW50KGhbMF0uZ2V0RWxlbWVudEJ5SWQoRCkpLmFwcGVuZChYKTpiLmFmdGVyKFgpLHRoaXMuaW5pdD1mdW5jdGlvbihiLGMpe289YixwPWMsby4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uKGIpe3JldHVybiB0PSEwLDA9PT1zfHxiJiZiLmxlbmd0aD49cz92PjA/KFYoKSxVKGIpKTpSKGIpOih4KGEsITEpLFYoKSxPKCkpLHc/YjpiP3ZvaWQgby4kc2V0VmFsaWRpdHkoImVkaXRhYmxlIiwhMSk6KG8uJHNldFZhbGlkaXR5KCJlZGl0YWJsZSIsITApLG51bGwpfSksby4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGIpe3ZhciBjLGQsZT17fTtyZXR1cm4gd3x8by4kc2V0VmFsaWRpdHkoImVkaXRhYmxlIiwhMCksQj8oZS4kbW9kZWw9YixCKGEsZSkpOihlW0ouaXRlbU5hbWVdPWIsYz1KLnZpZXdNYXBwZXIoYSxlKSxlW0ouaXRlbU5hbWVdPXZvaWQgMCxkPUoudmlld01hcHBlcihhLGUpLGMhPT1kP2M6Yil9KX19XSkuZGlyZWN0aXZlKCJ1aWJUeXBlYWhlYWQiLGZ1bmN0aW9uKCl7cmV0dXJue2NvbnRyb2xsZXI6IlVpYlR5cGVhaGVhZENvbnRyb2xsZXIiLHJlcXVpcmU6WyJuZ01vZGVsIiwiXj9uZ01vZGVsT3B0aW9ucyIsInVpYlR5cGVhaGVhZCJdLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZFsyXS5pbml0KGRbMF0sZFsxXSl9fX0pLmRpcmVjdGl2ZSgidWliVHlwZWFoZWFkUG9wdXAiLGZ1bmN0aW9uKCl7cmV0dXJue3Njb3BlOnttYXRjaGVzOiI9IixxdWVyeToiPSIsYWN0aXZlOiI9Iixwb3NpdGlvbjoiJiIsbW92ZUluUHJvZ3Jlc3M6Ij0iLHNlbGVjdDoiJiJ9LHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5wb3B1cFRlbXBsYXRlVXJsfHwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sIn0sbGluazpmdW5jdGlvbihhLGIsYyl7YS50ZW1wbGF0ZVVybD1jLnRlbXBsYXRlVXJsLGEuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIGEubWF0Y2hlcy5sZW5ndGg+MH0sYS5pc0FjdGl2ZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5hY3RpdmU9PWJ9LGEuc2VsZWN0QWN0aXZlPWZ1bmN0aW9uKGIpe2EuYWN0aXZlPWJ9LGEuc2VsZWN0TWF0Y2g9ZnVuY3Rpb24oYil7YS5zZWxlY3Qoe2FjdGl2ZUlkeDpifSl9fX19KS5kaXJlY3RpdmUoInVpYlR5cGVhaGVhZE1hdGNoIixbIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkY29tcGlsZSIsIiRwYXJzZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybntzY29wZTp7aW5kZXg6Ij0iLG1hdGNoOiI9IixxdWVyeToiPSJ9LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWMoZi50ZW1wbGF0ZVVybCkoZC4kcGFyZW50KXx8InRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbCI7YShnKS50aGVuKGZ1bmN0aW9uKGEpe2IoYS50cmltKCkpKGQsZnVuY3Rpb24oYSl7ZS5yZXBsYWNlV2l0aChhKX0pfSl9fX1dKS5maWx0ZXIoInVpYlR5cGVhaGVhZEhpZ2hsaWdodCIsWyIkc2NlIiwiJGluamVjdG9yIiwiJGxvZyIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZSgvKFsuPyorXiRbXF1cXCgpe318LV0pL2csIlxcJDEiKX1mdW5jdGlvbiBlKGEpe3JldHVybi88Lio+L2cudGVzdChhKX12YXIgZjtyZXR1cm4gZj1iLmhhcygiJHNhbml0aXplIiksZnVuY3Rpb24oYixnKXtyZXR1cm4hZiYmZShiKSYmYy53YXJuKCJVbnNhZmUgdXNlIG9mIHR5cGVhaGVhZCBwbGVhc2UgdXNlIG5nU2FuaXRpemUiKSxiPWc/KCIiK2IpLnJlcGxhY2UobmV3IFJlZ0V4cChkKGcpLCJnaSIpLCI8c3Ryb25nPiQmPC9zdHJvbmc+Iik6YixmfHwoYj1hLnRydXN0QXNIdG1sKGIpKSxifX1dKSxhbmd1bGFyLm1vZHVsZSgidWkuYm9vdHN0cmFwLnR5cGVhaGVhZCIpLnZhbHVlKCIkdHlwZWFoZWFkU3VwcHJlc3NXYXJuaW5nIiwhMSkuc2VydmljZSgidHlwZWFoZWFkUGFyc2VyIixbIiRwYXJzZSIsInVpYlR5cGVhaGVhZFBhcnNlciIsIiRsb2ciLCIkdHlwZWFoZWFkU3VwcHJlc3NXYXJuaW5nIixmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gZHx8Yy53YXJuKCJ0eXBlYWhlYWRQYXJzZXIgaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWJUeXBlYWhlYWRQYXJzZXIgaW5zdGVhZC4iKSxifV0pLmRpcmVjdGl2ZSgidHlwZWFoZWFkIixbIiRjb21waWxlIiwiJHBhcnNlIiwiJHEiLCIkdGltZW91dCIsIiRkb2N1bWVudCIsIiR3aW5kb3ciLCIkcm9vdFNjb3BlIiwiJHVpYlBvc2l0aW9uIiwidHlwZWFoZWFkUGFyc2VyIiwiJGxvZyIsIiR0eXBlYWhlYWRTdXBwcmVzc1dhcm5pbmciLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpLGosayl7dmFyIGw9WzksMTMsMjcsMzgsNDBdLG09MjAwO3JldHVybntyZXF1aXJlOlsibmdNb2RlbCIsIl4/bmdNb2RlbE9wdGlvbnMiXSxsaW5rOmZ1bmN0aW9uKG4sbyxwLHEpe2Z1bmN0aW9uIHIoKXtOLm1vdmVJblByb2dyZXNzfHwoTi5tb3ZlSW5Qcm9ncmVzcz0hMCxOLiRkaWdlc3QoKSksViYmZC5jYW5jZWwoViksVj1kKGZ1bmN0aW9uKCl7Ti5tYXRjaGVzLmxlbmd0aCYmcygpLE4ubW92ZUluUHJvZ3Jlc3M9ITF9LG0pfWZ1bmN0aW9uIHMoKXtOLnBvc2l0aW9uPUY/aC5vZmZzZXQobyk6aC5wb3NpdGlvbihvKSxOLnBvc2l0aW9uLnRvcCs9by5wcm9wKCJvZmZzZXRIZWlnaHQiKX1rfHxqLndhcm4oInR5cGVhaGVhZCBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi10eXBlYWhlYWQgaW5zdGVhZC4iKTt2YXIgdD1xWzBdLHU9cVsxXSx2PW4uJGV2YWwocC50eXBlYWhlYWRNaW5MZW5ndGgpO3Z8fDA9PT12fHwodj0xKTt2YXIgdyx4LHk9bi4kZXZhbChwLnR5cGVhaGVhZFdhaXRNcyl8fDAsej1uLiRldmFsKHAudHlwZWFoZWFkRWRpdGFibGUpIT09ITEsQT1iKHAudHlwZWFoZWFkTG9hZGluZykuYXNzaWdufHxhbmd1bGFyLm5vb3AsQj1iKHAudHlwZWFoZWFkT25TZWxlY3QpLEM9YW5ndWxhci5pc0RlZmluZWQocC50eXBlYWhlYWRTZWxlY3RPbkJsdXIpP24uJGV2YWwocC50eXBlYWhlYWRTZWxlY3RPbkJsdXIpOiExLEQ9YihwLnR5cGVhaGVhZE5vUmVzdWx0cykuYXNzaWdufHxhbmd1bGFyLm5vb3AsRT1wLnR5cGVhaGVhZElucHV0Rm9ybWF0dGVyP2IocC50eXBlYWhlYWRJbnB1dEZvcm1hdHRlcik6dm9pZCAwLEY9cC50eXBlYWhlYWRBcHBlbmRUb0JvZHk/bi4kZXZhbChwLnR5cGVhaGVhZEFwcGVuZFRvQm9keSk6ITEsRz1wLnR5cGVhaGVhZEFwcGVuZFRvRWxlbWVudElkfHwhMSxIPW4uJGV2YWwocC50eXBlYWhlYWRGb2N1c0ZpcnN0KSE9PSExLEk9cC50eXBlYWhlYWRTZWxlY3RPbkV4YWN0P24uJGV2YWwocC50eXBlYWhlYWRTZWxlY3RPbkV4YWN0KTohMSxKPWIocC5uZ01vZGVsKSxLPWIocC5uZ01vZGVsKyIoJCQkcCkiKSxMPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGFuZ3VsYXIuaXNGdW5jdGlvbihKKG4pKSYmdSYmdS4kb3B0aW9ucyYmdS4kb3B0aW9ucy5nZXR0ZXJTZXR0ZXI/SyhhLHskJCRwOmJ9KTpKLmFzc2lnbihhLGIpfSxNPWkucGFyc2UocC50eXBlYWhlYWQpLE49bi4kbmV3KCksTz1uLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7Ti4kZGVzdHJveSgpfSk7Ti4kb24oIiRkZXN0cm95IixPKTt2YXIgUD0idHlwZWFoZWFkLSIrTi4kaWQrIi0iK01hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpO28uYXR0cih7ImFyaWEtYXV0b2NvbXBsZXRlIjoibGlzdCIsImFyaWEtZXhwYW5kZWQiOiExLCJhcmlhLW93bnMiOlB9KTt2YXIgUT1hbmd1bGFyLmVsZW1lbnQoIjxkaXYgdHlwZWFoZWFkLXBvcHVwPjwvZGl2PiIpO1EuYXR0cih7aWQ6UCxtYXRjaGVzOiJtYXRjaGVzIixhY3RpdmU6ImFjdGl2ZUlkeCIsc2VsZWN0OiJzZWxlY3QoYWN0aXZlSWR4KSIsIm1vdmUtaW4tcHJvZ3Jlc3MiOiJtb3ZlSW5Qcm9ncmVzcyIscXVlcnk6InF1ZXJ5Iixwb3NpdGlvbjoicG9zaXRpb24ifSksYW5ndWxhci5pc0RlZmluZWQocC50eXBlYWhlYWRUZW1wbGF0ZVVybCkmJlEuYXR0cigidGVtcGxhdGUtdXJsIixwLnR5cGVhaGVhZFRlbXBsYXRlVXJsKSxhbmd1bGFyLmlzRGVmaW5lZChwLnR5cGVhaGVhZFBvcHVwVGVtcGxhdGVVcmwpJiZRLmF0dHIoInBvcHVwLXRlbXBsYXRlLXVybCIscC50eXBlYWhlYWRQb3B1cFRlbXBsYXRlVXJsKTt2YXIgUj1mdW5jdGlvbigpe04ubWF0Y2hlcz1bXSxOLmFjdGl2ZUlkeD0tMSxvLmF0dHIoImFyaWEtZXhwYW5kZWQiLCExKX0sUz1mdW5jdGlvbihhKXtyZXR1cm4gUCsiLW9wdGlvbi0iK2F9O04uJHdhdGNoKCJhY3RpdmVJZHgiLGZ1bmN0aW9uKGEpezA+YT9vLnJlbW92ZUF0dHIoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIpOm8uYXR0cigiYXJpYS1hY3RpdmVkZXNjZW5kYW50IixTKGEpKX0pO3ZhciBUPWZ1bmN0aW9uKGEsYil7cmV0dXJuIE4ubWF0Y2hlcy5sZW5ndGg+YiYmYT9hLnRvVXBwZXJDYXNlKCk9PT1OLm1hdGNoZXNbYl0ubGFiZWwudG9VcHBlckNhc2UoKTohMX0sVT1mdW5jdGlvbihhKXt2YXIgYj17JHZpZXdWYWx1ZTphfTtBKG4sITApLEQobiwhMSksYy53aGVuKE0uc291cmNlKG4sYikpLnRoZW4oZnVuY3Rpb24oYyl7dmFyIGQ9YT09PXQuJHZpZXdWYWx1ZTtpZihkJiZ3KWlmKGMmJmMubGVuZ3RoPjApe04uYWN0aXZlSWR4PUg/MDotMSxEKG4sITEpLE4ubWF0Y2hlcy5sZW5ndGg9MDtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyliW00uaXRlbU5hbWVdPWNbZV0sTi5tYXRjaGVzLnB1c2goe2lkOlMoZSksbGFiZWw6TS52aWV3TWFwcGVyKE4sYiksbW9kZWw6Y1tlXX0pO04ucXVlcnk9YSxzKCksby5hdHRyKCJhcmlhLWV4cGFuZGVkIiwhMCksSSYmMT09PU4ubWF0Y2hlcy5sZW5ndGgmJlQoYSwwKSYmTi5zZWxlY3QoMCl9ZWxzZSBSKCksRChuLCEwKTtkJiZBKG4sITEpfSxmdW5jdGlvbigpe1IoKSxBKG4sITEpLEQobiwhMCl9KX07RiYmKGFuZ3VsYXIuZWxlbWVudChmKS5iaW5kKCJyZXNpemUiLHIpLGUuZmluZCgiYm9keSIpLmJpbmQoInNjcm9sbCIscikpO3ZhciBWO04ubW92ZUluUHJvZ3Jlc3M9ITEsUigpLE4ucXVlcnk9dm9pZCAwO3ZhciBXLFg9ZnVuY3Rpb24oYSl7Vz1kKGZ1bmN0aW9uKCl7VShhKX0seSl9LFk9ZnVuY3Rpb24oKXtXJiZkLmNhbmNlbChXKX07dC4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uKGEpe3JldHVybiB3PSEwLDA9PT12fHxhJiZhLmxlbmd0aD49dj95PjA/KFkoKSxYKGEpKTpVKGEpOihBKG4sITEpLFkoKSxSKCkpLHo/YTphP3ZvaWQgdC4kc2V0VmFsaWRpdHkoImVkaXRhYmxlIiwhMSk6KHQuJHNldFZhbGlkaXR5KCJlZGl0YWJsZSIsITApLG51bGwpfSksdC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3ZhciBiLGMsZD17fTtyZXR1cm4genx8dC4kc2V0VmFsaWRpdHkoImVkaXRhYmxlIiwhMCksRT8oZC4kbW9kZWw9YSxFKG4sZCkpOihkW00uaXRlbU5hbWVdPWEsYj1NLnZpZXdNYXBwZXIobixkKSxkW00uaXRlbU5hbWVdPXZvaWQgMCxjPU0udmlld01hcHBlcihuLGQpLGIhPT1jP2I6YSl9KSxOLnNlbGVjdD1mdW5jdGlvbihhKXt2YXIgYixjLGU9e307eD0hMCxlW00uaXRlbU5hbWVdPWM9Ti5tYXRjaGVzW2FdLm1vZGVsLGI9TS5tb2RlbE1hcHBlcihuLGUpLEwobixiKSx0LiRzZXRWYWxpZGl0eSgiZWRpdGFibGUiLCEwKSx0LiRzZXRWYWxpZGl0eSgicGFyc2UiLCEwKSxCKG4seyRpdGVtOmMsJG1vZGVsOmIsJGxhYmVsOk0udmlld01hcHBlcihuLGUpfSksUigpLE4uJGV2YWwocC50eXBlYWhlYWRGb2N1c09uU2VsZWN0KSE9PSExJiZkKGZ1bmN0aW9uKCl7b1swXS5mb2N1cygpfSwwLCExKX0sby5iaW5kKCJrZXlkb3duIixmdW5jdGlvbihhKXtpZigwIT09Ti5tYXRjaGVzLmxlbmd0aCYmLTEhPT1sLmluZGV4T2YoYS53aGljaCkpe2lmKC0xPT09Ti5hY3RpdmVJZHgmJig5PT09YS53aGljaHx8MTM9PT1hLndoaWNoKSlyZXR1cm4gUigpLHZvaWQgTi4kZGlnZXN0KCk7YS5wcmV2ZW50RGVmYXVsdCgpLDQwPT09YS53aGljaD8oTi5hY3RpdmVJZHg9KE4uYWN0aXZlSWR4KzEpJU4ubWF0Y2hlcy5sZW5ndGgsTi4kZGlnZXN0KCkpOjM4PT09YS53aGljaD8oTi5hY3RpdmVJZHg9KE4uYWN0aXZlSWR4PjA/Ti5hY3RpdmVJZHg6Ti5tYXRjaGVzLmxlbmd0aCktMSxOLiRkaWdlc3QoKSk6MTM9PT1hLndoaWNofHw5PT09YS53aGljaD9OLiRhcHBseShmdW5jdGlvbigpe04uc2VsZWN0KE4uYWN0aXZlSWR4KX0pOjI3PT09YS53aGljaCYmKGEuc3RvcFByb3BhZ2F0aW9uKCksUigpLE4uJGRpZ2VzdCgpKX19KSxvLmJpbmQoImJsdXIiLGZ1bmN0aW9uKCl7QyYmTi5tYXRjaGVzLmxlbmd0aCYmLTEhPT1OLmFjdGl2ZUlkeCYmIXgmJih4PSEwLE4uJGFwcGx5KGZ1bmN0aW9uKCl7Ti5zZWxlY3QoTi5hY3RpdmVJZHgpfSkpLHc9ITEseD0hMX0pO3ZhciBaPWZ1bmN0aW9uKGEpe29bMF0hPT1hLnRhcmdldCYmMyE9PWEud2hpY2gmJjAhPT1OLm1hdGNoZXMubGVuZ3RoJiYoUigpLGcuJCRwaGFzZXx8Ti4kZGlnZXN0KCkpfTtlLmJpbmQoImNsaWNrIixaKSxuLiRvbigiJGRlc3Ryb3kiLGZ1bmN0aW9uKCl7ZS51bmJpbmQoImNsaWNrIixaKSwoRnx8RykmJiQucmVtb3ZlKCksRiYmKGFuZ3VsYXIuZWxlbWVudChmKS51bmJpbmQoInJlc2l6ZSIsciksZS5maW5kKCJib2R5IikudW5iaW5kKCJzY3JvbGwiLHIpKSxRLnJlbW92ZSgpfSk7dmFyICQ9YShRKShOKTtGP2UuZmluZCgiYm9keSIpLmFwcGVuZCgkKTpHIT09ITE/YW5ndWxhci5lbGVtZW50KGVbMF0uZ2V0RWxlbWVudEJ5SWQoRykpLmFwcGVuZCgkKTpvLmFmdGVyKCQpfX19XSkuZGlyZWN0aXZlKCJ0eXBlYWhlYWRQb3B1cCIsWyIkdHlwZWFoZWFkU3VwcHJlc3NXYXJuaW5nIiwiJGxvZyIsZnVuY3Rpb24oYSxiKXtyZXR1cm57c2NvcGU6e21hdGNoZXM6Ij0iLHF1ZXJ5OiI9IixhY3RpdmU6Ij0iLHBvc2l0aW9uOiImIixtb3ZlSW5Qcm9ncmVzczoiPSIsc2VsZWN0OiImIn0scmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnBvcHVwVGVtcGxhdGVVcmx8fCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWwifSxsaW5rOmZ1bmN0aW9uKGMsZCxlKXthfHxiLndhcm4oInR5cGVhaGVhZC1wb3B1cCBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYi10eXBlYWhlYWQtcG9wdXAgaW5zdGVhZC4iKSxjLnRlbXBsYXRlVXJsPWUudGVtcGxhdGVVcmwsYy5pc09wZW49ZnVuY3Rpb24oKXtyZXR1cm4gYy5tYXRjaGVzLmxlbmd0aD4wfSxjLmlzQWN0aXZlPWZ1bmN0aW9uKGEpe3JldHVybiBjLmFjdGl2ZT09YX0sYy5zZWxlY3RBY3RpdmU9ZnVuY3Rpb24oYSl7Yy5hY3RpdmU9YX0sYy5zZWxlY3RNYXRjaD1mdW5jdGlvbihhKXtjLnNlbGVjdCh7YWN0aXZlSWR4OmF9KX19fX1dKS5kaXJlY3RpdmUoInR5cGVhaGVhZE1hdGNoIixbIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkY29tcGlsZSIsIiRwYXJzZSIsIiR0eXBlYWhlYWRTdXBwcmVzc1dhcm5pbmciLCIkbG9nIixmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybntyZXN0cmljdDoiRUEiLHNjb3BlOntpbmRleDoiPSIsbWF0Y2g6Ij0iLHF1ZXJ5OiI9In0sbGluazpmdW5jdGlvbihmLGcsaCl7ZHx8ZS53YXJuKCJ0eXBlYWhlYWQtbWF0Y2ggaXMgbm93IGRlcHJlY2F0ZWQuIFVzZSB1aWItdHlwZWFoZWFkLW1hdGNoIGluc3RlYWQuIik7dmFyIGk9YyhoLnRlbXBsYXRlVXJsKShmLiRwYXJlbnQpfHwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1tYXRjaC5odG1sIjthKGkpLnRoZW4oZnVuY3Rpb24oYSl7YihhLnRyaW0oKSkoZixmdW5jdGlvbihhKXtnLnJlcGxhY2VXaXRoKGEpfSl9KX19fV0pLmZpbHRlcigidHlwZWFoZWFkSGlnaGxpZ2h0IixbIiRzY2UiLCIkaW5qZWN0b3IiLCIkbG9nIiwiJHR5cGVhaGVhZFN1cHByZXNzV2FybmluZyIsZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXtyZXR1cm4gYS5yZXBsYWNlKC8oWy4/KiteJFtcXVxcKCl7fXwtXSkvZywiXFwkMSIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuLzwuKj4vZy50ZXN0KGEpfXZhciBnO3JldHVybiBnPWIuaGFzKCIkc2FuaXRpemUiKSxmdW5jdGlvbihiLGgpe3JldHVybiBkfHxjLndhcm4oInR5cGVhaGVhZEhpZ2hsaWdodCBpcyBub3cgZGVwcmVjYXRlZC4gVXNlIHVpYlR5cGVhaGVhZEhpZ2hsaWdodCBpbnN0ZWFkLiIpLCFnJiZmKGIpJiZjLndhcm4oIlVuc2FmZSB1c2Ugb2YgdHlwZWFoZWFkIHBsZWFzZSB1c2UgbmdTYW5pdGl6ZSIpLGI9aD8oIiIrYikucmVwbGFjZShuZXcgUmVnRXhwKGUoaCksImdpIiksIjxzdHJvbmc+JCY8L3N0cm9uZz4iKTpiLGd8fChiPWEudHJ1c3RBc0h0bWwoYikpLGJ9fV0pLGFuZ3VsYXIubW9kdWxlKCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbCIsJzxkaXYgY2xhc3M9InBhbmVsIHt7cGFuZWxDbGFzcyB8fCBcJ3BhbmVsLWRlZmF1bHRcJ319Ij5cbiAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGluZyIgbmcta2V5cHJlc3M9InRvZ2dsZU9wZW4oJGV2ZW50KSI+XG4gICAgPGg0IGNsYXNzPSJwYW5lbC10aXRsZSI+XG4gICAgICA8YSBocmVmIHRhYmluZGV4PSIwIiBjbGFzcz0iYWNjb3JkaW9uLXRvZ2dsZSIgbmctY2xpY2s9InRvZ2dsZU9wZW4oKSIgdWliLWFjY29yZGlvbi10cmFuc2NsdWRlPSJoZWFkaW5nIj48c3BhbiBuZy1jbGFzcz0ie1wndGV4dC1tdXRlZFwnOiBpc0Rpc2FibGVkfSI+e3toZWFkaW5nfX08L3NwYW4+PC9hPlxuICAgIDwvaDQ+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPSJwYW5lbC1jb2xsYXBzZSBjb2xsYXBzZSIgdWliLWNvbGxhcHNlPSIhaXNPcGVuIj5cbgkgIDxkaXYgY2xhc3M9InBhbmVsLWJvZHkiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWwiLCc8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgbmctdHJhbnNjbHVkZT48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbCIsJzxkaXYgY2xhc3M9ImFsZXJ0IiBuZy1jbGFzcz0iW1wnYWxlcnQtXCcgKyAodHlwZSB8fCBcJ3dhcm5pbmdcJyksIGNsb3NlYWJsZSA/IFwnYWxlcnQtZGlzbWlzc2libGVcJyA6IG51bGxdIiByb2xlPSJhbGVydCI+XG4gICAgPGJ1dHRvbiBuZy1zaG93PSJjbG9zZWFibGUiIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImNsb3NlIiBuZy1jbGljaz0iY2xvc2UoeyRldmVudDogJGV2ZW50fSkiPlxuICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9InNyLW9ubHkiPkNsb3NlPC9zcGFuPlxuICAgIDwvYnV0dG9uPlxuICAgIDxkaXYgbmctdHJhbnNjbHVkZT48L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWwiLCc8ZGl2IG5nLW1vdXNlZW50ZXI9InBhdXNlKCkiIG5nLW1vdXNlbGVhdmU9InBsYXkoKSIgY2xhc3M9ImNhcm91c2VsIiBuZy1zd2lwZS1yaWdodD0icHJldigpIiBuZy1zd2lwZS1sZWZ0PSJuZXh0KCkiPlxuICA8ZGl2IGNsYXNzPSJjYXJvdXNlbC1pbm5lciIgbmctdHJhbnNjbHVkZT48L2Rpdj5cbiAgPGEgcm9sZT0iYnV0dG9uIiBocmVmIGNsYXNzPSJsZWZ0IGNhcm91c2VsLWNvbnRyb2wiIG5nLWNsaWNrPSJwcmV2KCkiIG5nLXNob3c9InNsaWRlcy5sZW5ndGggPiAxIj5cbiAgICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0Ij48L3NwYW4+XG4gICAgPHNwYW4gY2xhc3M9InNyLW9ubHkiPnByZXZpb3VzPC9zcGFuPlxuICA8L2E+XG4gIDxhIHJvbGU9ImJ1dHRvbiIgaHJlZiBjbGFzcz0icmlnaHQgY2Fyb3VzZWwtY29udHJvbCIgbmctY2xpY2s9Im5leHQoKSIgbmctc2hvdz0ic2xpZGVzLmxlbmd0aCA+IDEiPlxuICAgIDxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Ij48L3NwYW4+XG4gICAgPHNwYW4gY2xhc3M9InNyLW9ubHkiPm5leHQ8L3NwYW4+XG4gIDwvYT5cbiAgPG9sIGNsYXNzPSJjYXJvdXNlbC1pbmRpY2F0b3JzIiBuZy1zaG93PSJzbGlkZXMubGVuZ3RoID4gMSI+XG4gICAgPGxpIG5nLXJlcGVhdD0ic2xpZGUgaW4gc2xpZGVzIHwgb3JkZXJCeTppbmRleE9mU2xpZGUgdHJhY2sgYnkgJGluZGV4IiBuZy1jbGFzcz0ieyBhY3RpdmU6IGlzQWN0aXZlKHNsaWRlKSB9IiBuZy1jbGljaz0ic2VsZWN0KHNsaWRlKSI+XG4gICAgICA8c3BhbiBjbGFzcz0ic3Itb25seSI+c2xpZGUge3sgJGluZGV4ICsgMSB9fSBvZiB7eyBzbGlkZXMubGVuZ3RoIH19PHNwYW4gbmctaWY9ImlzQWN0aXZlKHNsaWRlKSI+LCBjdXJyZW50bHkgYWN0aXZlPC9zcGFuPjwvc3Bhbj5cbiAgICA8L2xpPlxuICA8L29sPlxuPC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWwiLCc8ZGl2IG5nLWNsYXNzPSJ7XG4gICAgXCdhY3RpdmVcJzogYWN0aXZlXG4gIH0iIGNsYXNzPSJpdGVtIHRleHQtY2VudGVyIiBuZy10cmFuc2NsdWRlPjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbCIsJzxkaXYgbmctc3dpdGNoPSJkYXRlcGlja2VyTW9kZSIgcm9sZT0iYXBwbGljYXRpb24iIG5nLWtleWRvd249ImtleWRvd24oJGV2ZW50KSI+XG4gIDx1aWItZGF5cGlja2VyIG5nLXN3aXRjaC13aGVuPSJkYXkiIHRhYmluZGV4PSIwIj48L3VpYi1kYXlwaWNrZXI+XG4gIDx1aWItbW9udGhwaWNrZXIgbmctc3dpdGNoLXdoZW49Im1vbnRoIiB0YWJpbmRleD0iMCI+PC91aWItbW9udGhwaWNrZXI+XG4gIDx1aWIteWVhcnBpY2tlciBuZy1zd2l0Y2gtd2hlbj0ieWVhciIgdGFiaW5kZXg9IjAiPjwvdWliLXllYXJwaWNrZXI+XG48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbCIsJzx0YWJsZSByb2xlPSJncmlkIiBhcmlhLWxhYmVsbGVkYnk9Int7Ojp1bmlxdWVJZH19LXRpdGxlIiBhcmlhLWFjdGl2ZWRlc2NlbmRhbnQ9Int7YWN0aXZlRGF0ZUlkfX0iPlxuICA8dGhlYWQ+XG4gICAgPHRyPlxuICAgICAgPHRoPjxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLWxlZnQiIG5nLWNsaWNrPSJtb3ZlKC0xKSIgdGFiaW5kZXg9Ii0xIj48aSBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnQiPjwvaT48L2J1dHRvbj48L3RoPlxuICAgICAgPHRoIGNvbHNwYW49Int7Ojo1ICsgc2hvd1dlZWtzfX0iPjxidXR0b24gaWQ9Int7Ojp1bmlxdWVJZH19LXRpdGxlIiByb2xlPSJoZWFkaW5nIiBhcmlhLWxpdmU9ImFzc2VydGl2ZSIgYXJpYS1hdG9taWM9InRydWUiIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCBidG4tc20iIG5nLWNsaWNrPSJ0b2dnbGVNb2RlKCkiIG5nLWRpc2FibGVkPSJkYXRlcGlja2VyTW9kZSA9PT0gbWF4TW9kZSIgdGFiaW5kZXg9Ii0xIiBzdHlsZT0id2lkdGg6MTAwJTsiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1yaWdodCIgbmctY2xpY2s9Im1vdmUoMSkiIHRhYmluZGV4PSItMSI+PGkgY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodCI+PC9pPjwvYnV0dG9uPjwvdGg+XG4gICAgPC90cj5cbiAgICA8dHI+XG4gICAgICA8dGggbmctaWY9InNob3dXZWVrcyIgY2xhc3M9InRleHQtY2VudGVyIj48L3RoPlxuICAgICAgPHRoIG5nLXJlcGVhdD0ibGFiZWwgaW4gOjpsYWJlbHMgdHJhY2sgYnkgJGluZGV4IiBjbGFzcz0idGV4dC1jZW50ZXIiPjxzbWFsbCBhcmlhLWxhYmVsPSJ7ezo6bGFiZWwuZnVsbH19Ij57ezo6bGFiZWwuYWJicn19PC9zbWFsbD48L3RoPlxuICAgIDwvdHI+XG4gIDwvdGhlYWQ+XG4gIDx0Ym9keT5cbiAgICA8dHIgbmctcmVwZWF0PSJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXgiPlxuICAgICAgPHRkIG5nLWlmPSJzaG93V2Vla3MiIGNsYXNzPSJ0ZXh0LWNlbnRlciBoNiI+PGVtPnt7IHdlZWtOdW1iZXJzWyRpbmRleF0gfX08L2VtPjwvdGQ+XG4gICAgICA8dGQgbmctcmVwZWF0PSJkdCBpbiByb3cgdHJhY2sgYnkgZHQuZGF0ZSIgY2xhc3M9InRleHQtY2VudGVyIiByb2xlPSJncmlkY2VsbCIgaWQ9Int7OjpkdC51aWR9fSIgbmctY2xhc3M9Ijo6ZHQuY3VzdG9tQ2xhc3MiPlxuICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgc3R5bGU9Im1pbi13aWR0aDoxMDAlOyIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCBidG4tc20iIG5nLWNsYXNzPSJ7XCdidG4taW5mb1wnOiBkdC5zZWxlY3RlZCwgYWN0aXZlOiBpc0FjdGl2ZShkdCl9IiBuZy1jbGljaz0ic2VsZWN0KGR0LmRhdGUpIiBuZy1kaXNhYmxlZD0iZHQuZGlzYWJsZWQiIHRhYmluZGV4PSItMSI+PHNwYW4gbmctY2xhc3M9Ijo6e1wndGV4dC1tdXRlZFwnOiBkdC5zZWNvbmRhcnksIFwndGV4dC1pbmZvXCc6IGR0LmN1cnJlbnR9Ij57ezo6ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cbiAgICAgIDwvdGQ+XG4gICAgPC90cj5cbiAgPC90Ym9keT5cbjwvdGFibGU+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvZGF0ZXBpY2tlci9tb250aC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWwiLCc8dGFibGUgcm9sZT0iZ3JpZCIgYXJpYS1sYWJlbGxlZGJ5PSJ7ezo6dW5pcXVlSWR9fS10aXRsZSIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PSJ7e2FjdGl2ZURhdGVJZH19Ij5cbiAgPHRoZWFkPlxuICAgIDx0cj5cbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1sZWZ0IiBuZy1jbGljaz0ibW92ZSgtMSkiIHRhYmluZGV4PSItMSI+PGkgY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0Ij48L2k+PC9idXR0b24+PC90aD5cbiAgICAgIDx0aD48YnV0dG9uIGlkPSJ7ezo6dW5pcXVlSWR9fS10aXRsZSIgcm9sZT0iaGVhZGluZyIgYXJpYS1saXZlPSJhc3NlcnRpdmUiIGFyaWEtYXRvbWljPSJ0cnVlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIiBuZy1jbGljaz0idG9nZ2xlTW9kZSgpIiBuZy1kaXNhYmxlZD0iZGF0ZXBpY2tlck1vZGUgPT09IG1heE1vZGUiIHRhYmluZGV4PSItMSIgc3R5bGU9IndpZHRoOjEwMCU7Ij48c3Ryb25nPnt7dGl0bGV9fTwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+XG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHQiIG5nLWNsaWNrPSJtb3ZlKDEpIiB0YWJpbmRleD0iLTEiPjxpIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHQiPjwvaT48L2J1dHRvbj48L3RoPlxuICAgIDwvdHI+XG4gIDwvdGhlYWQ+XG4gIDx0Ym9keT5cbiAgICA8dHIgbmctcmVwZWF0PSJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXgiPlxuICAgICAgPHRkIG5nLXJlcGVhdD0iZHQgaW4gcm93IHRyYWNrIGJ5IGR0LmRhdGUiIGNsYXNzPSJ0ZXh0LWNlbnRlciIgcm9sZT0iZ3JpZGNlbGwiIGlkPSJ7ezo6ZHQudWlkfX0iIG5nLWNsYXNzPSI6OmR0LmN1c3RvbUNsYXNzIj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIHN0eWxlPSJtaW4td2lkdGg6MTAwJTsiIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQiIG5nLWNsYXNzPSJ7XCdidG4taW5mb1wnOiBkdC5zZWxlY3RlZCwgYWN0aXZlOiBpc0FjdGl2ZShkdCl9IiBuZy1jbGljaz0ic2VsZWN0KGR0LmRhdGUpIiBuZy1kaXNhYmxlZD0iZHQuZGlzYWJsZWQiIHRhYmluZGV4PSItMSI+PHNwYW4gbmctY2xhc3M9Ijo6e1wndGV4dC1pbmZvXCc6IGR0LmN1cnJlbnR9Ij57ezo6ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cbiAgICAgIDwvdGQ+XG4gICAgPC90cj5cbiAgPC90Ym9keT5cbjwvdGFibGU+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWwiLCc8dWwgY2xhc3M9ImRyb3Bkb3duLW1lbnUiIGRyb3Bkb3duLW5lc3RlZCBuZy1pZj0iaXNPcGVuIiBzdHlsZT0iZGlzcGxheTogYmxvY2siIG5nLXN0eWxlPSJ7dG9wOiBwb3NpdGlvbi50b3ArXCdweFwnLCBsZWZ0OiBwb3NpdGlvbi5sZWZ0K1wncHhcJ30iIG5nLWtleWRvd249ImtleWRvd24oJGV2ZW50KSIgbmctY2xpY2s9IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKSI+XG4JPGxpIG5nLXRyYW5zY2x1ZGU+PC9saT5cbgk8bGkgbmctaWY9InNob3dCdXR0b25CYXIiIHN0eWxlPSJwYWRkaW5nOjEwcHggOXB4IDJweCI+XG4JCTxzcGFuIGNsYXNzPSJidG4tZ3JvdXAgcHVsbC1sZWZ0Ij5cbgkJCTxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4taW5mbyIgbmctY2xpY2s9InNlbGVjdChcJ3RvZGF5XCcpIiBuZy1kaXNhYmxlZD0iaXNEaXNhYmxlZChcJ3RvZGF5XCcpIj57eyBnZXRUZXh0KFwnY3VycmVudFwnKSB9fTwvYnV0dG9uPlxuCQkJPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1kYW5nZXIiIG5nLWNsaWNrPSJzZWxlY3QobnVsbCkiPnt7IGdldFRleHQoXCdjbGVhclwnKSB9fTwvYnV0dG9uPlxuCQk8L3NwYW4+XG4JCTxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyBwdWxsLXJpZ2h0IiBuZy1jbGljaz0iY2xvc2UoKSI+e3sgZ2V0VGV4dChcJ2Nsb3NlXCcpIH19PC9idXR0b24+XG4JPC9saT5cbjwvdWw+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvZGF0ZXBpY2tlci95ZWFyLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sIiwnPHRhYmxlIHJvbGU9ImdyaWQiIGFyaWEtbGFiZWxsZWRieT0ie3s6OnVuaXF1ZUlkfX0tdGl0bGUiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD0ie3thY3RpdmVEYXRlSWR9fSI+XG4gIDx0aGVhZD5cbiAgICA8dHI+XG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdCIgbmctY2xpY2s9Im1vdmUoLTEpIiB0YWJpbmRleD0iLTEiPjxpIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdCI+PC9pPjwvYnV0dG9uPjwvdGg+XG4gICAgICA8dGggY29sc3Bhbj0iMyI+PGJ1dHRvbiBpZD0ie3s6OnVuaXF1ZUlkfX0tdGl0bGUiIHJvbGU9ImhlYWRpbmciIGFyaWEtbGl2ZT0iYXNzZXJ0aXZlIiBhcmlhLWF0b21pYz0idHJ1ZSIgdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSIgbmctY2xpY2s9InRvZ2dsZU1vZGUoKSIgbmctZGlzYWJsZWQ9ImRhdGVwaWNrZXJNb2RlID09PSBtYXhNb2RlIiB0YWJpbmRleD0iLTEiIHN0eWxlPSJ3aWR0aDoxMDAlOyI+PHN0cm9uZz57e3RpdGxlfX08L3N0cm9uZz48L2J1dHRvbj48L3RoPlxuICAgICAgPHRoPjxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLXJpZ2h0IiBuZy1jbGljaz0ibW92ZSgxKSIgdGFiaW5kZXg9Ii0xIj48aSBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Ij48L2k+PC9idXR0b24+PC90aD5cbiAgICA8L3RyPlxuICA8L3RoZWFkPlxuICA8dGJvZHk+XG4gICAgPHRyIG5nLXJlcGVhdD0icm93IGluIHJvd3MgdHJhY2sgYnkgJGluZGV4Ij5cbiAgICAgIDx0ZCBuZy1yZXBlYXQ9ImR0IGluIHJvdyB0cmFjayBieSBkdC5kYXRlIiBjbGFzcz0idGV4dC1jZW50ZXIiIHJvbGU9ImdyaWRjZWxsIiBpZD0ie3s6OmR0LnVpZH19IiBuZy1jbGFzcz0iOjpkdC5jdXN0b21DbGFzcyI+XG4gICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBzdHlsZT0ibWluLXdpZHRoOjEwMCU7IiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IiBuZy1jbGFzcz0ie1wnYnRuLWluZm9cJzogZHQuc2VsZWN0ZWQsIGFjdGl2ZTogaXNBY3RpdmUoZHQpfSIgbmctY2xpY2s9InNlbGVjdChkdC5kYXRlKSIgbmctZGlzYWJsZWQ9ImR0LmRpc2FibGVkIiB0YWJpbmRleD0iLTEiPjxzcGFuIG5nLWNsYXNzPSI6OntcJ3RleHQtaW5mb1wnOiBkdC5jdXJyZW50fSI+e3s6OmR0LmxhYmVsfX08L3NwYW4+PC9idXR0b24+XG4gICAgICA8L3RkPlxuICAgIDwvdHI+XG4gIDwvdGJvZHk+XG48L3RhYmxlPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWwiLCc8ZGl2IHVpYi1tb2RhbC1hbmltYXRpb24tY2xhc3M9ImZhZGUiXG4gICAgIG1vZGFsLWluLWNsYXNzPSJpbiJcbiAgICAgbmctc3R5bGU9IntcJ3otaW5kZXhcJzogMTA0MCArIChpbmRleCAmJiAxIHx8IDApICsgaW5kZXgqMTB9IlxuPjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL21vZGFsL3dpbmRvdy5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbCIsJzxkaXYgbW9kYWwtcmVuZGVyPSJ7eyRpc1JlbmRlcmVkfX0iIHRhYmluZGV4PSItMSIgcm9sZT0iZGlhbG9nIiBjbGFzcz0ibW9kYWwiXG4gICAgdWliLW1vZGFsLWFuaW1hdGlvbi1jbGFzcz0iZmFkZSJcbiAgICBtb2RhbC1pbi1jbGFzcz0iaW4iXG4gICAgbmctc3R5bGU9IntcJ3otaW5kZXhcJzogMTA1MCArIGluZGV4KjEwLCBkaXNwbGF5OiBcJ2Jsb2NrXCd9Ij5cbiAgICA8ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2ciIG5nLWNsYXNzPSJzaXplID8gXCdtb2RhbC1cJyArIHNpemUgOiBcJ1wnIj48ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50IiB1aWItbW9kYWwtdHJhbnNjbHVkZT48L2Rpdj48L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sIiwnPHVsIGNsYXNzPSJwYWdlciI+XG4gIDxsaSBuZy1jbGFzcz0ie2Rpc2FibGVkOiBub1ByZXZpb3VzKCl8fG5nRGlzYWJsZWQsIHByZXZpb3VzOiBhbGlnbn0iPjxhIGhyZWYgbmctY2xpY2s9InNlbGVjdFBhZ2UocGFnZSAtIDEsICRldmVudCkiPnt7OjpnZXRUZXh0KFwncHJldmlvdXNcJyl9fTwvYT48L2xpPlxuICA8bGkgbmctY2xhc3M9IntkaXNhYmxlZDogbm9OZXh0KCl8fG5nRGlzYWJsZWQsIG5leHQ6IGFsaWdufSI+PGEgaHJlZiBuZy1jbGljaz0ic2VsZWN0UGFnZShwYWdlICsgMSwgJGV2ZW50KSI+e3s6OmdldFRleHQoXCduZXh0XCcpfX08L2E+PC9saT5cbjwvdWw+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sIiwnPHVsIGNsYXNzPSJwYWdpbmF0aW9uIj5cbiAgPGxpIG5nLWlmPSI6OmJvdW5kYXJ5TGlua3MiIG5nLWNsYXNzPSJ7ZGlzYWJsZWQ6IG5vUHJldmlvdXMoKXx8bmdEaXNhYmxlZH0iIGNsYXNzPSJwYWdpbmF0aW9uLWZpcnN0Ij48YSBocmVmIG5nLWNsaWNrPSJzZWxlY3RQYWdlKDEsICRldmVudCkiPnt7OjpnZXRUZXh0KFwnZmlyc3RcJyl9fTwvYT48L2xpPlxuICA8bGkgbmctaWY9Ijo6ZGlyZWN0aW9uTGlua3MiIG5nLWNsYXNzPSJ7ZGlzYWJsZWQ6IG5vUHJldmlvdXMoKXx8bmdEaXNhYmxlZH0iIGNsYXNzPSJwYWdpbmF0aW9uLXByZXYiPjxhIGhyZWYgbmctY2xpY2s9InNlbGVjdFBhZ2UocGFnZSAtIDEsICRldmVudCkiPnt7OjpnZXRUZXh0KFwncHJldmlvdXNcJyl9fTwvYT48L2xpPlxuICA8bGkgbmctcmVwZWF0PSJwYWdlIGluIHBhZ2VzIHRyYWNrIGJ5ICRpbmRleCIgbmctY2xhc3M9InthY3RpdmU6IHBhZ2UuYWN0aXZlLGRpc2FibGVkOiBuZ0Rpc2FibGVkJiYhcGFnZS5hY3RpdmV9IiBjbGFzcz0icGFnaW5hdGlvbi1wYWdlIj48YSBocmVmIG5nLWNsaWNrPSJzZWxlY3RQYWdlKHBhZ2UubnVtYmVyLCAkZXZlbnQpIj57e3BhZ2UudGV4dH19PC9hPjwvbGk+XG4gIDxsaSBuZy1pZj0iOjpkaXJlY3Rpb25MaW5rcyIgbmctY2xhc3M9IntkaXNhYmxlZDogbm9OZXh0KCl8fG5nRGlzYWJsZWR9IiBjbGFzcz0icGFnaW5hdGlvbi1uZXh0Ij48YSBocmVmIG5nLWNsaWNrPSJzZWxlY3RQYWdlKHBhZ2UgKyAxLCAkZXZlbnQpIj57ezo6Z2V0VGV4dChcJ25leHRcJyl9fTwvYT48L2xpPlxuICA8bGkgbmctaWY9Ijo6Ym91bmRhcnlMaW5rcyIgbmctY2xhc3M9IntkaXNhYmxlZDogbm9OZXh0KCl8fG5nRGlzYWJsZWR9IiBjbGFzcz0icGFnaW5hdGlvbi1sYXN0Ij48YSBocmVmIG5nLWNsaWNrPSJzZWxlY3RQYWdlKHRvdGFsUGFnZXMsICRldmVudCkiPnt7OjpnZXRUZXh0KFwnbGFzdFwnKX19PC9hPjwvbGk+XG48L3VsPlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXBvcHVwLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXBvcHVwLmh0bWwiLCc8ZGl2XG4gIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPSJmYWRlIlxuICB1aWItdG9vbHRpcC1jbGFzc2VzXG4gIG5nLWNsYXNzPSJ7IGluOiBpc09wZW4oKSB9Ij5cbiAgPGRpdiBjbGFzcz0idG9vbHRpcC1hcnJvdyI+PC9kaXY+XG4gIDxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiIG5nLWJpbmQtaHRtbD0iY29udGVudEV4cCgpIj48L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtcG9wdXAuaHRtbCIsJzxkaXZcbiAgdG9vbHRpcC1hbmltYXRpb24tY2xhc3M9ImZhZGUiXG4gIHVpYi10b29sdGlwLWNsYXNzZXNcbiAgbmctY2xhc3M9InsgaW46IGlzT3BlbigpIH0iPlxuICA8ZGl2IGNsYXNzPSJ0b29sdGlwLWFycm93Ij48L2Rpdj5cbiAgPGRpdiBjbGFzcz0idG9vbHRpcC1pbm5lciIgbmctYmluZD0iY29udGVudCI+PC9kaXY+XG48L2Rpdj5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtdGVtcGxhdGUtcG9wdXAuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXRlbXBsYXRlLXBvcHVwLmh0bWwiLCc8ZGl2XG4gIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPSJmYWRlIlxuICB1aWItdG9vbHRpcC1jbGFzc2VzXG4gIG5nLWNsYXNzPSJ7IGluOiBpc09wZW4oKSB9Ij5cbiAgPGRpdiBjbGFzcz0idG9vbHRpcC1hcnJvdyI+PC9kaXY+XG4gIDxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiXG4gICAgdWliLXRvb2x0aXAtdGVtcGxhdGUtdHJhbnNjbHVkZT0iY29udGVudEV4cCgpIlxuICAgIHRvb2x0aXAtdGVtcGxhdGUtdHJhbnNjbHVkZS1zY29wZT0ib3JpZ2luU2NvcGUoKSI+PC9kaXY+XG48L2Rpdj5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItaHRtbC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItaHRtbC5odG1sIiwnPGRpdiB0b29sdGlwLWFuaW1hdGlvbi1jbGFzcz0iZmFkZSJcbiAgdWliLXRvb2x0aXAtY2xhc3Nlc1xuICBuZy1jbGFzcz0ieyBpbjogaXNPcGVuKCkgfSI+XG4gIDxkaXYgY2xhc3M9ImFycm93Ij48L2Rpdj5cblxuICA8ZGl2IGNsYXNzPSJwb3BvdmVyLWlubmVyIj5cbiAgICAgIDxoMyBjbGFzcz0icG9wb3Zlci10aXRsZSIgbmctYmluZD0idGl0bGUiIG5nLWlmPSJ0aXRsZSI+PC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9InBvcG92ZXItY29udGVudCIgbmctYmluZC1odG1sPSJjb250ZW50RXhwKCkiPjwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItdGVtcGxhdGUuaHRtbCIsJzxkaXYgdG9vbHRpcC1hbmltYXRpb24tY2xhc3M9ImZhZGUiXG4gIHVpYi10b29sdGlwLWNsYXNzZXNcbiAgbmctY2xhc3M9InsgaW46IGlzT3BlbigpIH0iPlxuICA8ZGl2IGNsYXNzPSJhcnJvdyI+PC9kaXY+XG5cbiAgPGRpdiBjbGFzcz0icG9wb3Zlci1pbm5lciI+XG4gICAgICA8aDMgY2xhc3M9InBvcG92ZXItdGl0bGUiIG5nLWJpbmQ9InRpdGxlIiBuZy1pZj0idGl0bGUiPjwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPSJwb3BvdmVyLWNvbnRlbnQiXG4gICAgICAgIHVpYi10b29sdGlwLXRlbXBsYXRlLXRyYW5zY2x1ZGU9ImNvbnRlbnRFeHAoKSJcbiAgICAgICAgdG9vbHRpcC10ZW1wbGF0ZS10cmFuc2NsdWRlLXNjb3BlPSJvcmlnaW5TY29wZSgpIj48L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWwiLCc8ZGl2IHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPSJmYWRlIlxuICB1aWItdG9vbHRpcC1jbGFzc2VzXG4gIG5nLWNsYXNzPSJ7IGluOiBpc09wZW4oKSB9Ij5cbiAgPGRpdiBjbGFzcz0iYXJyb3ciPjwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9InBvcG92ZXItaW5uZXIiPlxuICAgICAgPGgzIGNsYXNzPSJwb3BvdmVyLXRpdGxlIiBuZy1iaW5kPSJ0aXRsZSIgbmctaWY9InRpdGxlIj48L2gzPlxuICAgICAgPGRpdiBjbGFzcz0icG9wb3Zlci1jb250ZW50IiBuZy1iaW5kPSJjb250ZW50Ij48L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWwiLCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIiIG5nLWNsYXNzPSJ0eXBlICYmIFwncHJvZ3Jlc3MtYmFyLVwnICsgdHlwZSIgcm9sZT0icHJvZ3Jlc3NiYXIiIGFyaWEtdmFsdWVub3c9Int7dmFsdWV9fSIgYXJpYS12YWx1ZW1pbj0iMCIgYXJpYS12YWx1ZW1heD0ie3ttYXh9fSIgbmctc3R5bGU9Int3aWR0aDogKHBlcmNlbnQgPCAxMDAgPyBwZXJjZW50IDogMTAwKSArIFwnJVwnfSIgYXJpYS12YWx1ZXRleHQ9Int7cGVyY2VudCB8IG51bWJlcjowfX0lIiBhcmlhLWxhYmVsbGVkYnk9Int7Ojp0aXRsZX19IiBzdHlsZT0ibWluLXdpZHRoOiAwOyIgbmctdHJhbnNjbHVkZT48L2Rpdj5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sIiwnPGRpdiBjbGFzcz0icHJvZ3Jlc3MiIG5nLXRyYW5zY2x1ZGUgYXJpYS1sYWJlbGxlZGJ5PSJ7ezo6dGl0bGV9fSI+PC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWwiLCc8ZGl2IGNsYXNzPSJwcm9ncmVzcyI+XG4gIDxkaXYgY2xhc3M9InByb2dyZXNzLWJhciIgbmctY2xhc3M9InR5cGUgJiYgXCdwcm9ncmVzcy1iYXItXCcgKyB0eXBlIiByb2xlPSJwcm9ncmVzc2JhciIgYXJpYS12YWx1ZW5vdz0ie3t2YWx1ZX19IiBhcmlhLXZhbHVlbWluPSIwIiBhcmlhLXZhbHVlbWF4PSJ7e21heH19IiBuZy1zdHlsZT0ie3dpZHRoOiAocGVyY2VudCA8IDEwMCA/IHBlcmNlbnQgOiAxMDApICsgXCclXCd9IiBhcmlhLXZhbHVldGV4dD0ie3twZXJjZW50IHwgbnVtYmVyOjB9fSUiIGFyaWEtbGFiZWxsZWRieT0ie3s6OnRpdGxlfX0iIHN0eWxlPSJtaW4td2lkdGg6IDA7IiBuZy10cmFuc2NsdWRlPjwvZGl2PlxuPC9kaXY+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWwiLCc8c3BhbiBuZy1tb3VzZWxlYXZlPSJyZXNldCgpIiBuZy1rZXlkb3duPSJvbktleWRvd24oJGV2ZW50KSIgdGFiaW5kZXg9IjAiIHJvbGU9InNsaWRlciIgYXJpYS12YWx1ZW1pbj0iMCIgYXJpYS12YWx1ZW1heD0ie3tyYW5nZS5sZW5ndGh9fSIgYXJpYS12YWx1ZW5vdz0ie3t2YWx1ZX19Ij5cbiAgICA8c3BhbiBuZy1yZXBlYXQtc3RhcnQ9InIgaW4gcmFuZ2UgdHJhY2sgYnkgJGluZGV4IiBjbGFzcz0ic3Itb25seSI+KHt7ICRpbmRleCA8IHZhbHVlID8gXCcqXCcgOiBcJyBcJyB9fSk8L3NwYW4+XG4gICAgPGkgbmctcmVwZWF0LWVuZCBuZy1tb3VzZWVudGVyPSJlbnRlcigkaW5kZXggKyAxKSIgbmctY2xpY2s9InJhdGUoJGluZGV4ICsgMSkiIGNsYXNzPSJnbHlwaGljb24iIG5nLWNsYXNzPSIkaW5kZXggPCB2YWx1ZSAmJiAoci5zdGF0ZU9uIHx8IFwnZ2x5cGhpY29uLXN0YXJcJykgfHwgKHIuc3RhdGVPZmYgfHwgXCdnbHlwaGljb24tc3Rhci1lbXB0eVwnKSIgbmctYXR0ci10aXRsZT0ie3tyLnRpdGxlfX0iIGFyaWEtdmFsdWV0ZXh0PSJ7e3IudGl0bGV9fSI+PC9pPlxuPC9zcGFuPlxuJyk7Cn1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvdGFicy90YWIuaHRtbCIsW10pLnJ1bihbIiR0ZW1wbGF0ZUNhY2hlIixmdW5jdGlvbihhKXthLnB1dCgidGVtcGxhdGUvdGFicy90YWIuaHRtbCIsJzxsaSBuZy1jbGFzcz0ie2FjdGl2ZTogYWN0aXZlLCBkaXNhYmxlZDogZGlzYWJsZWR9Ij5cbiAgPGEgaHJlZiBuZy1jbGljaz0ic2VsZWN0KCkiIHVpYi10YWItaGVhZGluZy10cmFuc2NsdWRlPnt7aGVhZGluZ319PC9hPlxuPC9saT5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sIiwnPGRpdj5cbiAgPHVsIGNsYXNzPSJuYXYgbmF2LXt7dHlwZSB8fCBcJ3RhYnNcJ319IiBuZy1jbGFzcz0ie1wnbmF2LXN0YWNrZWRcJzogdmVydGljYWwsIFwnbmF2LWp1c3RpZmllZFwnOiBqdXN0aWZpZWR9IiBuZy10cmFuc2NsdWRlPjwvdWw+XG4gIDxkaXYgY2xhc3M9InRhYi1jb250ZW50Ij5cbiAgICA8ZGl2IGNsYXNzPSJ0YWItcGFuZSIgXG4gICAgICAgICBuZy1yZXBlYXQ9InRhYiBpbiB0YWJzIiBcbiAgICAgICAgIG5nLWNsYXNzPSJ7YWN0aXZlOiB0YWIuYWN0aXZlfSJcbiAgICAgICAgIHVpYi10YWItY29udGVudC10cmFuc2NsdWRlPSJ0YWIiPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuJyl9XSksYW5ndWxhci5tb2R1bGUoInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS90aW1lcGlja2VyL3RpbWVwaWNrZXIuaHRtbCIsJzx0YWJsZT5cbiAgPHRib2R5PlxuICAgIDx0ciBjbGFzcz0idGV4dC1jZW50ZXIiIG5nLXNob3c9Ijo6c2hvd1NwaW5uZXJzIj5cbiAgICAgIDx0ZD48YSBuZy1jbGljaz0iaW5jcmVtZW50SG91cnMoKSIgbmctY2xhc3M9IntkaXNhYmxlZDogbm9JbmNyZW1lbnRIb3VycygpfSIgY2xhc3M9ImJ0biBidG4tbGluayIgbmctZGlzYWJsZWQ9Im5vSW5jcmVtZW50SG91cnMoKSIgdGFiaW5kZXg9Int7Ojp0YWJpbmRleH19Ij48c3BhbiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwIj48L3NwYW4+PC9hPjwvdGQ+XG4gICAgICA8dGQ+Jm5ic3A7PC90ZD5cbiAgICAgIDx0ZD48YSBuZy1jbGljaz0iaW5jcmVtZW50TWludXRlcygpIiBuZy1jbGFzcz0ie2Rpc2FibGVkOiBub0luY3JlbWVudE1pbnV0ZXMoKX0iIGNsYXNzPSJidG4gYnRuLWxpbmsiIG5nLWRpc2FibGVkPSJub0luY3JlbWVudE1pbnV0ZXMoKSIgdGFiaW5kZXg9Int7Ojp0YWJpbmRleH19Ij48c3BhbiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwIj48L3NwYW4+PC9hPjwvdGQ+XG4gICAgICA8dGQgbmctc2hvdz0ic2hvd01lcmlkaWFuIj48L3RkPlxuICAgIDwvdHI+XG4gICAgPHRyPlxuICAgICAgPHRkIGNsYXNzPSJmb3JtLWdyb3VwIiBuZy1jbGFzcz0ie1wnaGFzLWVycm9yXCc6IGludmFsaWRIb3Vyc30iPlxuICAgICAgICA8aW5wdXQgc3R5bGU9IndpZHRoOjUwcHg7IiB0eXBlPSJ0ZXh0IiBuZy1tb2RlbD0iaG91cnMiIG5nLWNoYW5nZT0idXBkYXRlSG91cnMoKSIgY2xhc3M9ImZvcm0tY29udHJvbCB0ZXh0LWNlbnRlciIgbmctcmVhZG9ubHk9Ijo6cmVhZG9ubHlJbnB1dCIgbWF4bGVuZ3RoPSIyIiB0YWJpbmRleD0ie3s6OnRhYmluZGV4fX0iPlxuICAgICAgPC90ZD5cbiAgICAgIDx0ZD46PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz0iZm9ybS1ncm91cCIgbmctY2xhc3M9IntcJ2hhcy1lcnJvclwnOiBpbnZhbGlkTWludXRlc30iPlxuICAgICAgICA8aW5wdXQgc3R5bGU9IndpZHRoOjUwcHg7IiB0eXBlPSJ0ZXh0IiBuZy1tb2RlbD0ibWludXRlcyIgbmctY2hhbmdlPSJ1cGRhdGVNaW51dGVzKCkiIGNsYXNzPSJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXIiIG5nLXJlYWRvbmx5PSI6OnJlYWRvbmx5SW5wdXQiIG1heGxlbmd0aD0iMiIgdGFiaW5kZXg9Int7Ojp0YWJpbmRleH19Ij5cbiAgICAgIDwvdGQ+XG4gICAgICA8dGQgbmctc2hvdz0ic2hvd01lcmlkaWFuIj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgbmctY2xhc3M9IntkaXNhYmxlZDogbm9Ub2dnbGVNZXJpZGlhbigpfSIgY2xhc3M9ImJ0biBidG4tZGVmYXVsdCB0ZXh0LWNlbnRlciIgbmctY2xpY2s9InRvZ2dsZU1lcmlkaWFuKCkiIG5nLWRpc2FibGVkPSJub1RvZ2dsZU1lcmlkaWFuKCkiIHRhYmluZGV4PSJ7ezo6dGFiaW5kZXh9fSI+e3ttZXJpZGlhbn19PC9idXR0b24+PC90ZD5cbiAgICA8L3RyPlxuICAgIDx0ciBjbGFzcz0idGV4dC1jZW50ZXIiIG5nLXNob3c9Ijo6c2hvd1NwaW5uZXJzIj5cbiAgICAgIDx0ZD48YSBuZy1jbGljaz0iZGVjcmVtZW50SG91cnMoKSIgbmctY2xhc3M9IntkaXNhYmxlZDogbm9EZWNyZW1lbnRIb3VycygpfSIgY2xhc3M9ImJ0biBidG4tbGluayIgbmctZGlzYWJsZWQ9Im5vRGVjcmVtZW50SG91cnMoKSIgdGFiaW5kZXg9Int7Ojp0YWJpbmRleH19Ij48c3BhbiBjbGFzcz0iZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd24iPjwvc3Bhbj48L2E+PC90ZD5cbiAgICAgIDx0ZD4mbmJzcDs8L3RkPlxuICAgICAgPHRkPjxhIG5nLWNsaWNrPSJkZWNyZW1lbnRNaW51dGVzKCkiIG5nLWNsYXNzPSJ7ZGlzYWJsZWQ6IG5vRGVjcmVtZW50TWludXRlcygpfSIgY2xhc3M9ImJ0biBidG4tbGluayIgbmctZGlzYWJsZWQ9Im5vRGVjcmVtZW50TWludXRlcygpIiB0YWJpbmRleD0ie3s6OnRhYmluZGV4fX0iPjxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93biI+PC9zcGFuPjwvYT48L3RkPlxuICAgICAgPHRkIG5nLXNob3c9InNob3dNZXJpZGlhbiI+PC90ZD5cbiAgICA8L3RyPlxuICA8L3Rib2R5PlxuPC90YWJsZT5cbicpfV0pLGFuZ3VsYXIubW9kdWxlKCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWwiLFtdKS5ydW4oWyIkdGVtcGxhdGVDYWNoZSIsZnVuY3Rpb24oYSl7YS5wdXQoInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbCIsJzxhIGhyZWYgdGFiaW5kZXg9Ii0xIiBuZy1iaW5kLWh0bWw9Im1hdGNoLmxhYmVsIHwgdWliVHlwZWFoZWFkSGlnaGxpZ2h0OnF1ZXJ5Ij48L2E+XG4nKX1dKSxhbmd1bGFyLm1vZHVsZSgidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sIixbXSkucnVuKFsiJHRlbXBsYXRlQ2FjaGUiLGZ1bmN0aW9uKGEpe2EucHV0KCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWwiLCc8dWwgY2xhc3M9ImRyb3Bkb3duLW1lbnUiIG5nLXNob3c9ImlzT3BlbigpICYmICFtb3ZlSW5Qcm9ncmVzcyIgbmctc3R5bGU9Int0b3A6IHBvc2l0aW9uKCkudG9wK1wncHhcJywgbGVmdDogcG9zaXRpb24oKS5sZWZ0K1wncHhcJ30iIHN0eWxlPSJkaXNwbGF5OiBibG9jazsiIHJvbGU9Imxpc3Rib3giIGFyaWEtaGlkZGVuPSJ7eyFpc09wZW4oKX19Ij5cbiAgICA8bGkgbmctcmVwZWF0PSJtYXRjaCBpbiBtYXRjaGVzIHRyYWNrIGJ5ICRpbmRleCIgbmctY2xhc3M9InthY3RpdmU6IGlzQWN0aXZlKCRpbmRleCkgfSIgbmctbW91c2VlbnRlcj0ic2VsZWN0QWN0aXZlKCRpbmRleCkiIG5nLWNsaWNrPSJzZWxlY3RNYXRjaCgkaW5kZXgpIiByb2xlPSJvcHRpb24iIGlkPSJ7ezo6bWF0Y2guaWR9fSI+XG4gICAgICAgIDxkaXYgdWliLXR5cGVhaGVhZC1tYXRjaCBpbmRleD0iJGluZGV4IiBtYXRjaD0ibWF0Y2giIHF1ZXJ5PSJxdWVyeSIgdGVtcGxhdGUtdXJsPSJ0ZW1wbGF0ZVVybCI+PC9kaXY+XG4gICAgPC9saT5cbjwvdWw+XG4nKX1dKSwhYW5ndWxhci4kJGNzcCgpJiZhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoImhlYWQiKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5uZy1hbmltYXRlLml0ZW06bm90KC5sZWZ0KTpub3QoLnJpZ2h0KXstd2Via2l0LXRyYW5zaXRpb246MHMgZWFzZS1pbi1vdXQgbGVmdDt0cmFuc2l0aW9uOjBzIGVhc2UtaW4tb3V0IGxlZnR9PC9zdHlsZT4nKTsKZGVmaW5lKCJ1aS1ib290c3RyYXAiLCBbImFuZ3VsYXIiXSwgZnVuY3Rpb24oKXt9KTsKCi8qKgogKiBDcmVhdGVkIGJ5IGNvcnJlbnRpIG9uIDI5LzA2LzIwMTYuCiAqLwoKCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT0KIGpxdWVyeS5zb2FwLmpzIC0gaHR0cHM6Ly9naXRodWIuY29tL2RvZWRqZS9qcXVlcnkuc29hcAogdmVyc2lvbjogMS42LjgKCiBqUXVlcnkgcGx1Z2luIGZvciBjb21tdW5pY2F0aW5nIHdpdGggYSB3ZWIgc2VydmljZSB1c2luZyBTT0FQLgoKIE9uZSBmdW5jdGlvbiB0byBzZW5kIGEgU09BUEVudmVsb3BlIHRoYXQgdGFrZXMgYSBjb21wbGV4IG9iamVjdCBhcyBhIGRhdGEKCiBMaWNlbnNlIEdOVS9HUEx2MwogLS0tLS0tLS0tLS0tLS0tLS0KCiBDb3B5cmlnaHQgKEMpIDIwMDktMjAxNSAtIFJlbXkgQmxvbSwgdGhlIE5ldGhlcmxhbmRzCgogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KCiBXaGVuIEdQTCBpcyBub3QgYW4gb3B0aW9uIGZvciB5b3UsIGNvbnRhY3QgbWUgZm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb21tZXJjaWFsIGxpY2Vuc2UuCgogSW5mb3JtYXRpb24KIC0tLS0tLS0tLS0tCgogRm9yIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0byB1c2UgalF1ZXJ5LnNvYXAsIGF1dGhvcnMsIGNoYW5nZWxvZywgdGhlIGxhdGVzdCB2ZXJzaW9uLCBldGMuLi4KIFZpc2l0OiBodHRwczovL2dpdGh1Yi5jb20vZG9lZGplL2pxdWVyeS5zb2FwCgogRG9jdW1lbnRhdGlvbiBhYm91dCBUSElTIHZlcnNpb24gaXMgZm91bmQgaGVyZToKIGh0dHBzOi8vZ2l0aHViLmNvbS9kb2VkamUvanF1ZXJ5LnNvYXAvYmxvYi8xLjYuOC9SRUFETUUubWQKCiA9PT09PT09PT09PT09PT09PT09PT09Ki8KCihmdW5jdGlvbihmYWN0b3J5KSB7CiAgICBpZih0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTsKICAgIH0gZWxzZSB7CiAgICAgICAgZmFjdG9yeShqUXVlcnkpOwogICAgfQp9KShmdW5jdGlvbihqUXVlcnkpIHsKICAgIHZhciAkID0galF1ZXJ5OwogICAgdmFyIGVuYWJsZUxvZ2dpbmc7CiAgICB2YXIgZ2xvYmFsQ29uZmlnID0geyAvLyB0aGlzIHNldHVwIG9uY2UsIGRlZmF1bHRzIGdvIGhlcmUKICAgICAgICBhcHBlbmRNZXRob2RUb1VSTDogdHJ1ZSwKICAgICAgICBhc3luYzogdHJ1ZSwKICAgICAgICBlbmFibGVMb2dnaW5nOiBmYWxzZSwKICAgICAgICBub1ByZWZpeDogZmFsc2UsCiAgICAgICAgc29hcDEyOiBmYWxzZQogICAgfTsKICAgIGZ1bmN0aW9uIHNvYXAob3B0aW9ucykgewogICAgICAgIHZhciBjb25maWcgPSB7fTsKICAgICAgICAvLyBhIGNvbmZpZ3VyYXRpb24gY2FsbCB3aWxsIG5vdCBoYXZlICdkYXRhJyBzcGVjaWZpZWQgKCdwYXJhbXMnIGlzIHVzZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5KQogICAgICAgIGlmIChvcHRpb25zICYmICFvcHRpb25zLnBhcmFtcyAmJiAhb3B0aW9ucy5kYXRhKSB7CiAgICAgICAgICAgICQuZXh0ZW5kKGdsb2JhbENvbmZpZywgb3B0aW9ucyk7IC8vIHVwZGF0ZSBnbG9iYWwgY29uZmlnCiAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmcgPSBvcHRpb25zLmVuYWJsZUxvZ2dpbmc7CiAgICAgICAgICAgIGxvZygnalF1ZXJ5LnNvYXAgLSBnbG9iYWxDb25maWcgdXBkYXRlZDonLCBnbG9iYWxDb25maWcpOwogICAgICAgICAgICByZXR1cm4gZ2xvYmFsQ29uZmlnOwogICAgICAgIH0KICAgICAgICAkLmV4dGVuZChjb25maWcsIGdsb2JhbENvbmZpZywgb3B0aW9ucyk7CiAgICAgICAgLy8gZnVuY3Rpb24gbG9nIHdpbGwgb25seSB3b3JrIGJlbG93IHRoaXMgbGluZSEKICAgICAgICBlbmFibGVMb2dnaW5nID0gY29uZmlnLmVuYWJsZUxvZ2dpbmc7CgogICAgICAgIGxvZygnanF1ZXJ5LnNvYXAgLSBjb25maWc6JywgY29uZmlnKTsKCiAgICAgICAgLy8gZmFsbGJhY2tzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXMKICAgICAgICBTT0FQVG9vbC5mYWxsYmFja0RlcHJlY2F0ZWQoY29uZmlnKTsKCiAgICAgICAgdmFyIHNvYXBPYmplY3QgPSBTT0FQVG9vbC5wcm9jZXNzRGF0YSh7CiAgICAgICAgICAgIGRhdGE6IGNvbmZpZy5kYXRhLAogICAgICAgICAgICBuYW1lOiAoISFjb25maWcuZWxlbWVudE5hbWUpID8gY29uZmlnLmVsZW1lbnROYW1lIDogY29uZmlnLm1ldGhvZCwKICAgICAgICAgICAgY29udGV4dDogY29uZmlnLmNvbnRleHQsCiAgICAgICAgICAgIHByZWZpeDogKCEhY29uZmlnLm5hbWVzcGFjZVF1YWxpZmllciAmJiAhY29uZmlnLm5vUHJlZml4KSA/IGNvbmZpZy5uYW1lc3BhY2VRdWFsaWZpZXIrJzonIDogJycKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCEhY29uZmlnLm5hbWVzcGFjZVF1YWxpZmllciAmJiAhIWNvbmZpZy5uYW1lc3BhY2VVUkwpIHsKICAgICAgICAgICAgc29hcE9iamVjdC5hZGROYW1lc3BhY2UoY29uZmlnLm5hbWVzcGFjZVF1YWxpZmllciwgY29uZmlnLm5hbWVzcGFjZVVSTCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKCEhY29uZmlnLm5hbWVzcGFjZVVSTCkgewogICAgICAgICAgICBzb2FwT2JqZWN0LmF0dHIoJ3htbG5zJywgY29uZmlnLm5hbWVzcGFjZVVSTCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoISFzb2FwT2JqZWN0ICYmICEhY29uZmlnLnVybCkgeyAvLyB3ZSBoYXZlIGEgcmVxdWVzdCBhbmQgc29tZXdoZXJlIHRvIHNlbmQgaXQKICAgICAgICAgICAgLy8gQ3JlYXRlIGEgU09BUEVudmVsb3BlIHdpdGggdGhlIHNvYXBPYmplY3QKICAgICAgICAgICAgdmFyIHNvYXBFbnZlbG9wZSA9IG5ldyBTT0FQRW52ZWxvcGUoc29hcE9iamVjdCk7CiAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgYXR0cmlidXRlcyBhbmQgbmFtZXNwYWNlcyBmb3IgdGhlIEVudmVsb3BlCiAgICAgICAgICAgIGlmIChjb25maWcuZW52QXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBjb25maWcuZW52QXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgICAgIHNvYXBFbnZlbG9wZS5hZGRBdHRyaWJ1dGUoaSwgY29uZmlnLmVudkF0dHJpYnV0ZXNbaV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNPQVBIZWFkZXIKICAgICAgICAgICAgaWYgKCEhY29uZmlnLlNPQVBIZWFkZXIpIHsKICAgICAgICAgICAgICAgIHZhciBzb2FwSGVhZGVyID0gU09BUFRvb2wucHJvY2Vzc0RhdGEoewogICAgICAgICAgICAgICAgICAgIGRhdGE6IGNvbmZpZy5TT0FQSGVhZGVyLAogICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0ZW1wJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICcnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmICghIXNvYXBIZWFkZXIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc29hcEhlYWRlci5oYXNDaGlsZHJlbigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gc29hcEhlYWRlci5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc29hcEVudmVsb3BlLmFkZEhlYWRlcihzb2FwSGVhZGVyLmNoaWxkcmVuW2pdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNvYXBFbnZlbG9wZS5hZGRIZWFkZXIoc29hcEhlYWRlcik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFdTUwogICAgICAgICAgICBpZiAoISFjb25maWcud3NzKSB7CiAgICAgICAgICAgICAgICB2YXIgd3NzT2JqID0gU09BUFRvb2wuY3JlYXRlV1NTKGNvbmZpZy53c3MpOwogICAgICAgICAgICAgICAgLy8gYWRkIHRvIFdTUyBTZWN1cml0eSBoZWFkZXIgdG8gc29hcEVudmVsb3BlCiAgICAgICAgICAgICAgICBpZiAoISF3c3NPYmopIHsKICAgICAgICAgICAgICAgICAgICBzb2FwRW52ZWxvcGUuYWRkSGVhZGVyKHdzc09iaik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gYXBwZW5kIE1ldGhvZD8KICAgICAgICAgICAgaWYoISFjb25maWcuYXBwZW5kTWV0aG9kVG9VUkwgJiYgISFjb25maWcubWV0aG9kKXsKICAgICAgICAgICAgICAgIGNvbmZpZy51cmwgKz0gY29uZmlnLm1ldGhvZDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc29hcEVudmVsb3BlLnNlbmQoewogICAgICAgICAgICAgICAgdXJsOiBjb25maWcudXJsLAogICAgICAgICAgICAgICAgY29udGV4dDogY29uZmlnLmNvbnRleHQsCiAgICAgICAgICAgICAgICBhc3luYzogY29uZmlnLmFzeW5jLAogICAgICAgICAgICAgICAgaGVhZGVyczogKGNvbmZpZy5IVFRQSGVhZGVycykgPyBjb25maWcuSFRUUEhlYWRlcnMgOiB7fSwKICAgICAgICAgICAgICAgIGFjdGlvbjogKCEhY29uZmlnLlNPQVBBY3Rpb24pID8gY29uZmlnLlNPQVBBY3Rpb24gOiBjb25maWcubWV0aG9kLAogICAgICAgICAgICAgICAgc29hcDEyOiBjb25maWcuc29hcDEyLAogICAgICAgICAgICAgICAgYmVmb3JlU2VuZDogY29uZmlnLmJlZm9yZVNlbmQsCiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiBjb25maWcuc3RhdHVzQ29kZSwKICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gbmV3IFNPQVBSZXNwb25zZSh0ZXh0U3RhdHVzLCBqcVhIUik7CiAgICAgICAgICAgICAgICBsb2coJ2pxdWVyeS5zb2FwIC0gcmVjZWl2ZTonLCByZXNwb25zZS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oY29uZmlnLnN1Y2Nlc3MpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnN1Y2Nlc3MuY2FsbCh0aGlzLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7CiAgICAgICAgICAgICAgICBsb2coJ2pxdWVyeS5zb2FwIC0gZXJyb3I6JywgZXJyb3JUaHJvd24pOwogICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihjb25maWcuZXJyb3IpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmVycm9yLmNhbGwodGhpcywgbmV3IFNPQVBSZXNwb25zZSh0ZXh0U3RhdHVzLCBqcVhIUikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgZXJyRGVmZXJyZWQgPSBuZXcgJC5EZWZlcnJlZCgpLAogICAgICAgICAgICAgICAgZXJybXNnOwoKICAgICAgICAgICAgaWYgKCFzb2FwT2JqZWN0KSB7CiAgICAgICAgICAgICAgICBlcnJtc2cgPSAnanF1ZXJ5LnNvYXAgLSBubyBzb2FwT2JqZWN0JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWNvbmZpZy51cmwpIHsKICAgICAgICAgICAgICAgIGVycm1zZyA9ICdqcXVlcnkuc29hcCAtIG5vIHVybCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCEhZXJybXNnKSB7CiAgICAgICAgICAgICAgICB3YXJuKGVycm1zZyk7CiAgICAgICAgICAgICAgICBlcnJEZWZlcnJlZC5yZWplY3QoZXJybXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZXJyRGVmZXJyZWQucHJvbWlzZSgpOwogICAgICAgIH0KICAgIH07CgogICAgLy9Tb2FwIHJlcXVlc3QgLSB0aGlzIGlzIHdoYXQgYmVpbmcgc2VudAogICAgZnVuY3Rpb24gU09BUEVudmVsb3BlIChzb2FwT2JqZWN0KSB7CiAgICAgICAgdGhpcy50eXBlT2YgPSAiU09BUEVudmVsb3BlIjsKICAgICAgICB0aGlzLnByZWZpeCA9ICdzb2FwJzsKICAgICAgICB0aGlzLnNvYXBDb25maWcgPSBudWxsOwogICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IHt9OwogICAgICAgIHRoaXMuaGVhZGVycyA9IFtdOwogICAgICAgIHRoaXMuYm9kaWVzID0gW107CgogICAgICAgIC8vIGxldCdzIGdldCB0aGUgc29hcCBuYW1lc3BhY2UgcHJlZml4CiAgICAgICAgdmFyIHBhcnRzID0gc29hcE9iamVjdC5uYW1lLnNwbGl0KCc6Jyk7CiAgICAgICAgaWYgKHBhcnRzWzFdID09PSAnRW52ZWxvcGUnIHx8IHBhcnRzWzFdID09PSAnQm9keScpIHsKICAgICAgICAgICAgdGhpcy5wcmVmaXggPSBwYXJ0c1swXTsKICAgICAgICAgICAgaWYgKHNvYXBPYmplY3QuYXR0cigneG1sbnM6JyArIHRoaXMucHJlZml4KSA9PT0gU09BUFRvb2wuU09BUDExLm5hbWVzcGFjZVVSTCkgewogICAgICAgICAgICAgICAgdGhpcy5zb2FwQ29uZmlnID0gdGhpcy5TT0FQMTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNvYXBPYmplY3QuYXR0cigneG1sbnM6JyArIHRoaXMucHJlZml4KSA9PT0gU09BUFRvb2wuU09BUDEyLm5hbWVzcGFjZVVSTCkgewogICAgICAgICAgICAgICAgdGhpcy5zb2FwQ29uZmlnID0gdGhpcy5TT0FQMTI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gRW52ZWxvcGUKICAgICAgICAgICAgdmFyIGVudiA9IHNvYXBPYmplY3QuZmluZCh0aGlzLnByZWZpeCArICc6RW52ZWxvcGUnKTsKICAgICAgICAgICAgaWYgKGVudiAmJiBlbnYuYXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBlbnYuYXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKGksIGVudi5hdHRyaWJ1dGVzW2ldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBoZWFkZXJzCiAgICAgICAgICAgIGhlYWRlciA9IHNvYXBPYmplY3QuZmluZCh0aGlzLnByZWZpeCArICc6SGVhZGVyJyk7CiAgICAgICAgICAgIGlmIChoZWFkZXIgJiYgaGVhZGVyLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhlYWRlci5jaGlsZHJlbi5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkSGVhZGVyKGhlYWRlci5jaGlsZHJlbltqXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gYm9keQogICAgICAgICAgICBib2R5ID0gc29hcE9iamVjdC5maW5kKHRoaXMucHJlZml4ICsgJzpCb2R5Jyk7CiAgICAgICAgICAgIGlmIChib2R5ICYmIGJvZHkuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYm9keS5jaGlsZHJlbi5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQm9keShib2R5LmNoaWxkcmVuW2tdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgc29hcE9iamVjdC5jaGlsZHJlbi5sZW5ndGg7IGwrKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQm9keShzb2FwT2JqZWN0LmNoaWxkcmVuW2xdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGEgc29hcE9iamVjdCB3aXRoIG5vdGhpbmcsIG1lcmUgZGF0YQogICAgICAgICAgICB0aGlzLmFkZEJvZHkoc29hcE9iamVjdCk7CiAgICAgICAgfQogICAgfQoKICAgIFNPQVBFbnZlbG9wZS5wcm90b3R5cGUgPSB7CiAgICAgICAgYWRkQXR0cmlidXRlOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXNbbmFtZV0gPSB2YWx1ZTsKICAgICAgICB9LAogICAgICAgIGFkZE5hbWVzcGFjZTogZnVuY3Rpb24obmFtZSwgdXJpKSB7CiAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKCd4bWxuczonICsgbmFtZSwgdXJpKTsKICAgICAgICB9LAogICAgICAgIGFkZEhlYWRlcjogZnVuY3Rpb24oc29hcE9iamVjdCkgewogICAgICAgICAgICB0aGlzLmhlYWRlcnMucHVzaChzb2FwT2JqZWN0KTsKICAgICAgICB9LAogICAgICAgIGFkZEJvZHk6IGZ1bmN0aW9uKHNvYXBPYmplY3QpIHsKICAgICAgICAgICAgdGhpcy5ib2RpZXMucHVzaChzb2FwT2JqZWN0KTsKICAgICAgICB9LAogICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIHNvYXBFbnYgPSBuZXcgU09BUE9iamVjdCh0aGlzLnByZWZpeCArICc6RW52ZWxvcGUnKTsKICAgICAgICAgICAgLy9BZGQgYXR0cmlidXRlcwogICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuYXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgc29hcEVudi5hdHRyKG5hbWUsIHRoaXMuYXR0cmlidXRlc1tuYW1lXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9BZGQgSGVhZGVycwogICAgICAgICAgICBpZiAodGhpcy5oZWFkZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHZhciBzb2FwSGVhZGVyID0gc29hcEVudi5uZXdDaGlsZCh0aGlzLnByZWZpeCArICc6SGVhZGVyJyk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaGVhZGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHNvYXBIZWFkZXIuYXBwZW5kQ2hpbGQodGhpcy5oZWFkZXJzW2ldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL0FkZCBCb2RpZXMKICAgICAgICAgICAgaWYgKHRoaXMuYm9kaWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHZhciBzb2FwQm9keSA9IHNvYXBFbnYubmV3Q2hpbGQodGhpcy5wcmVmaXggKyAnOkJvZHknKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5ib2RpZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBzb2FwQm9keS5hcHBlbmRDaGlsZCh0aGlzLmJvZGllc1tqXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIG1haW4gTlMgb3ZlciBoZXJlLi4uCiAgICAgICAgICAgIGlmICghc29hcEVudi5hdHRyKCd4bWxuczonICsgdGhpcy5wcmVmaXgpKSB7CiAgICAgICAgICAgICAgICBzb2FwRW52LmFkZE5hbWVzcGFjZSh0aGlzLnByZWZpeCwgdGhpcy5zb2FwQ29uZmlnLm5hbWVzcGFjZVVSTCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFzb2FwRW52LmF0dHIoJ3htbG5zOnhzaScpKSB7CiAgICAgICAgICAgICAgICBzb2FwRW52LmFkZE5hbWVzcGFjZSgneHNpJywgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFzb2FwRW52LmF0dHIoJ3htbG5zOnhzZCcpKSB7CiAgICAgICAgICAgICAgICBzb2FwRW52LmFkZE5hbWVzcGFjZSgneHNkJywgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/PicgKyBzb2FwRW52LnRvU3RyaW5nKCk7CiAgICAgICAgfSwKICAgICAgICBzZW5kOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgaWYgKCF0aGlzLnNvYXBDb25maWcpIHsKICAgICAgICAgICAgICAgIHRoaXMuc29hcENvbmZpZyA9IChvcHRpb25zLnNvYXAxMikgPyBTT0FQVG9vbC5TT0FQMTIgOiBTT0FQVG9vbC5TT0FQMTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGNvbnRlbnRUeXBlID0gdGhpcy5zb2FwQ29uZmlnLnR5cGU7CiAgICAgICAgICAgIGlmIChjb250ZW50VHlwZSA9PT0gU09BUFRvb2wuU09BUDExLnR5cGUgJiYgISFvcHRpb25zLmFjdGlvbikgewogICAgICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzLlNPQVBBY3Rpb24gPSBvcHRpb25zLmFjdGlvbjsKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2coJ2pxdWVyeS5zb2FwIC0gYmVmb3JlU2VuZDonLCB0aGlzLnRvU3RyaW5nKCkpOwogICAgICAgICAgICByZXR1cm4gJC5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGNvbnRleHQ6IG9wdGlvbnMuY29udGV4dCwKICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IG9wdGlvbnMuc3RhdHVzQ29kZSwKICAgICAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsCiAgICAgICAgICAgICAgICBhc3luYzogb3B0aW9ucy5hc3luYywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycywKICAgICAgICAgICAgICAgIC8vCWNyb3NzRG9tYWluOiB0cnVlLAogICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJ4bWwiLAogICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgICAgICAgICAgZGF0YTogdGhpcy50b1N0cmluZygpLAogICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlICsgIjsgY2hhcnNldD1VVEYtOCIsCiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgYXR0ZW1wdCB0byBnZXQgc29tZSBwcm9ncmVzIGluZm8gKGJ1dCBzdGlsbCBhIG5vIGdvKQogICAgICAgICAgICAgICAgLy8gSSBzdGlsbCBrZWVwIHRoaXMgaW4gdGhvLCB3ZSBtaWdodCBzZWUgaXQgd29ya2luZyBvbmUgZGF5IHdoZW4gYnJvd3NlcnMgbWF0dXJlLi4uCiAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgIC8vV1JUIGlzc3VlICM4MCAoaHR0cHM6Ly9naXRodWIuY29tL2RvZWRqZS9qcXVlcnkuc29hcC9pc3N1ZXMvODApIGNvbW1lbnRpbmcgb3V0IHRoZSB4aHIgZnVuY3Rpb24gYmVsb3cgZm9yIElFOCBhbmQgSUU5IGNvbXBhdGFiaWxpdHkuIElzc3VlIGV4aXN0cyB3aGVuIHVzZWQgYWxvbmdzaWRlIGFueSBzY3JpcHQgdGhhdCBtb2RpZmllcyB0aGUgWE1MSHR0cFJlcXVlc3Qgb2JqZWN0IGxpa2UsIGZvciBleGFtcGxlLCB0aGUgeGRvbWFpbiBvciB4aG9vayBsaWJyYXJpZXMuIFRoaXMgY291bGQgYmUgZXhwbGljaXRseSBlbmFibGVkIGJ5IHVzZXJzIG9uIGEgcGVyLWNhc2UgYmFzaXMgaWYgaXQgaXMgbWVudGlvbmVkIHNvbWV3aGVyZSBpbiB0aGUgcmVhZG1lLm1kIGZpbGUuCiAgICAgICAgICAgICAgICAgeGhyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigicHJvZ3Jlc3MiLCBmdW5jdGlvbihldnQpIHsKICAgICAgICAgICAgICAgICBpZiAoZXZ0Lmxlbmd0aENvbXB1dGFibGUpIHsKICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBldnQubG9hZGVkIC8gZXZ0LnRvdGFsOwogICAgICAgICAgICAgICAgIGxvZygianF1ZXJ5LnNvYXAgLSBwcm9ncmVzcyB1cDogIiwgKHByb2dyZXNzICogMTAwKSArICclIHRvdGFsOiAnICsgZXZ0LnRvdGFsKTsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsIGZ1bmN0aW9uKGV2dCkgewogICAgICAgICAgICAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSkgewogICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IGV2dC5sb2FkZWQgLyBldnQudG90YWw7CiAgICAgICAgICAgICAgICAgbG9nKCJqcXVlcnkuc29hcCAtIHByb2dyZXNzIGRvd246ICIsIChwcm9ncmVzcyAqIDEwMCkgKyAnJSB0b3RhbDogJyArIGV2dC50b3RhbCk7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgcmV0dXJuIHhocjsKICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKG9wdGlvbnMuYmVmb3JlU2VuZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuYmVmb3JlU2VuZC5jYWxsKG9wdGlvbnMuY29udGV4dCwgc2VsZik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwoKICAgIC8vIFNPQVBPYmplY3QgLSBhbiBhYnN0cmFjdGlvbiBsYXllciB0byBidWlsZCBTT0FQIE9iamVjdHMuCiAgICB2YXIgU09BUE9iamVjdCA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICB0aGlzLnR5cGVPZiA9ICdTT0FQT2JqZWN0JzsKICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICAgIHRoaXMubnMgPSB7fTsKICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSB7fTsKICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsOwogICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkOwogICAgfQoKICAgIFNPQVBPYmplY3QucHJvdG90eXBlID0gewogICAgICAgIGF0dHI6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIGlmICghIW5hbWUgJiYgISF2YWx1ZSB8fCAhIW5hbWUgJiYgdmFsdWUgPT09ICIiKSB7CiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXNbbmFtZV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9IGVsc2UgaWYgKCEhbmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1tuYW1lXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXM7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHZhbDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmF0dHIoJ3hzaTpuaWwnKSA9PT0gJ3RydWUnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aGlzLmF0dHIoInhzaTpuaWwiLCJ0cnVlIik7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhZGROYW1lc3BhY2U6IGZ1bmN0aW9uKG5hbWUsIHVybCkgewogICAgICAgICAgICB0aGlzLm5zW25hbWVdID0gdXJsOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9LAogICAgICAgIGFwcGVuZENoaWxkOiBmdW5jdGlvbihvYmopIHsKICAgICAgICAgICAgb2JqLl9wYXJlbnQgPSB0aGlzOwogICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2gob2JqKTsKICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9LAogICAgICAgIG5ld0NoaWxkOiBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgICAgIHZhciBvYmogPSBuZXcgU09BUE9iamVjdChuYW1lKTsKICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChvYmopOwogICAgICAgICAgICByZXR1cm4gb2JqOwogICAgICAgIH0sCiAgICAgICAgYWRkUGFyYW1ldGVyOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICB2YXIgb2JqID0gbmV3IFNPQVBPYmplY3QobmFtZSk7CiAgICAgICAgICAgIG9iai52YWwodmFsdWUpOwogICAgICAgICAgICB0aGlzLmFwcGVuZENoaWxkKG9iaik7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0sCiAgICAgICAgaGFzQ2hpbGRyZW46IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID4gMCkgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBmaW5kOiBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuY2hpbGRyZW5baV0uZmluZChuYW1lKTsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBlbmQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQoKTsKICAgICAgICB9LAogICAgICAgIHBhcmVudDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQ7CiAgICAgICAgfSwKICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBvdXQgPSBbXSwKICAgICAgICAgICAgICAgIHhtbENoYXJNYXAgPSB7CiAgICAgICAgICAgICAgICAgICAgJzwnOiAnJmx0OycsCiAgICAgICAgICAgICAgICAgICAgJz4nOiAnJmd0OycsCiAgICAgICAgICAgICAgICAgICAgJyYnOiAnJmFtcDsnLAogICAgICAgICAgICAgICAgICAgICciJzogJyZxdW90OycsCiAgICAgICAgICAgICAgICAgICAgIiciOiAnJmFwb3M7JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGVuY29kZWRWYWx1ZTsKICAgICAgICAgICAgb3V0LnB1c2goJzwnK3RoaXMubmFtZSk7CiAgICAgICAgICAgIC8vTmFtZXNwYWNlcwogICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMubnMpIHsKICAgICAgICAgICAgICAgIG91dC5wdXNoKCcgeG1sbnM6JyArIG5hbWUgKyAnPSInICsgdGhpcy5uc1tuYW1lXSArICciJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9Ob2RlIEF0dHJpYnV0ZXMKICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiB0aGlzLmF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy5hdHRyaWJ1dGVzW2F0dHJdKSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICBvdXQucHVzaCgnICcgKyBhdHRyICsgJz0iJyArIHRoaXMuYXR0cmlidXRlc1thdHRyXSArICciJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3V0LnB1c2goJz4nKTsKICAgICAgICAgICAgLy9Ob2RlIGNoaWxkcmVuCiAgICAgICAgICAgIGlmKHRoaXMuaGFzQ2hpbGRyZW4oKSkgewogICAgICAgICAgICAgICAgZm9yKHZhciBjUG9zIGluIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY09iaiA9IHRoaXMuY2hpbGRyZW5bY1Bvc107CiAgICAgICAgICAgICAgICAgICAgaWYgKCh0eXBlb2YoY09iaikgPT09ICdvYmplY3QnKSAmJiAoY09iai50eXBlT2YgPT09ICdTT0FQT2JqZWN0JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goY09iai50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9Ob2RlIFZhbHVlCiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy52YWx1ZSkgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8JZW5jb2RlZFZhbHVlID0gdGhpcy52YWx1ZS5tYXRjaCgvPCFcW0NEQVRBXFsuKj9cXVxdPi8pID8KICAgICAgICAgICAgICAgICAgICBlbmNvZGVkVmFsdWUgPSB0aGlzLnZhbHVlLm1hdGNoKC88IVxbQ0RBVEFcW1xzXFNcXSpcXT4vKSA/CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLnJlcGxhY2UoL1s8PiYiJ10vZywgZnVuY3Rpb24gKGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geG1sQ2hhck1hcFtjaF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YodGhpcy52YWx1ZSkgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICAgICAgZW5jb2RlZFZhbHVlID0gdGhpcy52YWx1ZS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgb3V0LnB1c2goZW5jb2RlZFZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL0Nsb3NlIFRhZwogICAgICAgICAgICBvdXQucHVzaCgnPC8nICsgdGhpcy5uYW1lICsgJz4nKTsKICAgICAgICAgICAgcmV0dXJuIG91dC5qb2luKCcnKTsKICAgICAgICB9CiAgICB9OwoKICAgIC8vU29hcCByZXNwb25zZSAtIHRoaXMgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGNhbGxiYWNrIGZyb20gU09BUEVudmVsb3BlLnNlbmQKICAgIHZhciBTT0FQUmVzcG9uc2UgPSBmdW5jdGlvbihzdGF0dXMsIHhocikgewogICAgICAgIHRoaXMudHlwZU9mID0gIlNPQVBSZXNwb25zZSI7CiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7CiAgICAgICAgdGhpcy5oZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnNwbGl0KCdcbicpOwogICAgICAgIHRoaXMuaHR0cENvZGUgPSB4aHIuc3RhdHVzOwogICAgICAgIHRoaXMuaHR0cFRleHQgPSB4aHIuc3RhdHVzVGV4dDsKICAgICAgICB0aGlzLmNvbnRlbnQgPSAoeGhyLnJlc3BvbnNlWE1MID09PSB1bmRlZmluZWQpID8geGhyLnJlc3BvbnNlVGV4dCA6IHhoci5yZXNwb25zZVhNTDsKICAgICAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbnRlbnQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkLmlzWE1MRG9jKHRoaXMuY29udGVudCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBTT0FQVG9vbC5kb20yc3RyaW5nKHRoaXMuY29udGVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJVbmV4cGVjdGVkIENvbnRlbnQ6ICIgKyAkLnR5cGUodGhpcy5jb250ZW50KSk7CiAgICAgICAgfTsKICAgICAgICB0aGlzLnRvWE1MID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYgKCQuaXNYTUxEb2ModGhpcy5jb250ZW50KSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJC5wYXJzZVhNTCh0aGlzLmNvbnRlbnQpOwogICAgICAgIH07CiAgICAgICAgdGhpcy50b0pTT04gPSBmdW5jdGlvbiAobm9kZVJvb3QpIHsKICAgICAgICAgICAgaWYgKCQueG1sMmpzb24pIHsKICAgICAgICAgICAgICAgIHJldHVybiAkLnhtbDJqc29uKHRoaXMuY29udGVudCwgbm9kZVJvb3QpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHdhcm4oImpRdWVyeS5zb2FwIC0gTWlzc2luZyBKUXVlcnkgUGx1Z2luICd4bWwyanNvbicsIGluZm8gYXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9kb2VkamUvanF1ZXJ5LnNvYXAjZGVwZW5kZW5jaWVzIik7CiAgICAgICAgfTsKICAgIH07CgogICAgLy9TaW5nbGV0b24gU09BUCBUb29sCiAgICB2YXIgU09BUFRvb2wgPSB7CiAgICAgICAgU09BUDExOiB7CiAgICAgICAgICAgIHR5cGU6ICd0ZXh0L3htbCcsCiAgICAgICAgICAgIG5hbWVzcGFjZVVSTDogJ2h0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvZW52ZWxvcGUvJwogICAgICAgIH0sCiAgICAgICAgU09BUDEyOiB7CiAgICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9zb2FwK3htbCcsCiAgICAgICAgICAgIG5hbWVzcGFjZVVSTDogJ2h0dHA6Ly93d3cudzMub3JnLzIwMDMvMDUvc29hcC1lbnZlbG9wZScKICAgICAgICB9LAogICAgICAgIHByb2Nlc3NEYXRhOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICAgICAgICAgIHZhciBzb2FwT2JqZWN0OwogICAgICAgICAgICBpZiAoJC50eXBlKG9wdGlvbnMuZGF0YSkgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgICAvLyBpZiBkYXRhIGlzIFhNTCBzdHJpbmcsIHBhcnNlIHRvIFhNTCBET00KICAgICAgICAgICAgICAgIC8vIGVuc3VyZSB0aGF0IHN0cmluZyBpcyBub3QgZW1wdHkgYW5kIGNvbnRhaW5zIG1vcmUgdGhhbiB3aGl0ZXNwYWNlCiAgICAgICAgICAgICAgICBpZiAoL1xTLy50ZXN0KG9wdGlvbnMuZGF0YSkpIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSAkLnBhcnNlWE1MKG9wdGlvbnMuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCQuaXNYTUxEb2Mob3B0aW9ucy5kYXRhKSkgewogICAgICAgICAgICAgICAgLy8gaWYgZGF0YSBpcyBYTUwgRE9NLCBwYXJzZSB0byBTT0FQT2JqZWN0CiAgICAgICAgICAgICAgICBzb2FwT2JqZWN0ID0gU09BUFRvb2wuZG9tMnNvYXAob3B0aW9ucy5kYXRhLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICB9IGVsc2UgaWYgKCQuaXNBcnJheShvcHRpb25zLmRhdGEpKSB7CiAgICAgICAgICAgICAgICAvLyBpZiBkYXRhIGlzIGFuIEFycmF5LCBhc3VtZSBTT0FQOjpMaXRlCiAgICAgICAgICAgICAgICBzb2FwT2JqZWN0ID0gU09BUFRvb2wuYXJyYXkyc29hcChvcHRpb25zKTsKICAgICAgICAgICAgfSBlbHNlIGlmICgkLmlzUGxhaW5PYmplY3Qob3B0aW9ucy5kYXRhKSkgewogICAgICAgICAgICAgICAgLy8gaWYgZGF0YSBpcyBKU09OLCBwYXJzZSB0byBTT0FQT2JqZWN0CiAgICAgICAgICAgICAgICBzb2FwT2JqZWN0ID0gU09BUFRvb2wuanNvbjJzb2FwKG9wdGlvbnMubmFtZSwgb3B0aW9ucy5kYXRhLCBvcHRpb25zLnByZWZpeCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoJC5pc0Z1bmN0aW9uKG9wdGlvbnMuZGF0YSkpIHsKICAgICAgICAgICAgICAgIC8vIGlmIGRhdGEgaXMgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgU09BUE9iamVjdAogICAgICAgICAgICAgICAgc29hcE9iamVjdCA9IG9wdGlvbnMuZGF0YS5jYWxsKG9wdGlvbnMuY29udGV4dCwgU09BUE9iamVjdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHNvYXBPYmplY3Q7CiAgICAgICAgfSwKICAgICAgICBqc29uMnNvYXA6IGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMsIHByZWZpeCwgcGFyZW50Tm9kZSkgewogICAgICAgICAgICB2YXIgc29hcE9iamVjdDsKICAgICAgICAgICAgdmFyIGNoaWxkT2JqZWN0OwogICAgICAgICAgICBpZiAocGFyYW1zID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICBzb2FwT2JqZWN0ID0gbmV3IFNPQVBPYmplY3QocHJlZml4K25hbWUpOwogICAgICAgICAgICAgICAgc29hcE9iamVjdC5hdHRyKCd4c2k6bmlsJywgJ3RydWUnKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGFyYW1zID09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAvLyBhZGRlZCBieSBEVCAtIGNoZWNrIGlmIG9iamVjdCBpcyBpbiBmYWN0IGFuIEFycmF5IGFuZCB0cmVhdCBhY2NvcmRpbmdseQogICAgICAgICAgICAgICAgaWYocGFyYW1zLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkuaW5kZXhPZigiQXJyYXkiKSA+IC0xKSB7IC8vIHR5cGUgaXMgYXJyYXkKICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkT2JqZWN0ID0gdGhpcy5qc29uMnNvYXAobmFtZSwgcGFyYW1zW2ldLCBwcmVmaXgsIHBhcmVudE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKGNoaWxkT2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5jb25zdHJ1Y3Rvci50b1N0cmluZygpLmluZGV4T2YoIlN0cmluZyIpID4gLTEpIHsgLy8gdHlwZSBpcyBzdHJpbmcKICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgU3RyaW5nIG9iamVjdHMgYXMgc3RyaW5nIHByaW1pdGl2ZSB2YWx1ZQogICAgICAgICAgICAgICAgICAgIHNvYXBPYmplY3QgPSBuZXcgU09BUE9iamVjdChwcmVmaXgrbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgc29hcE9iamVjdC52YWwocGFyYW1zKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkuaW5kZXhPZigiRGF0ZSIpID4gLTEpIHsgLy8gdHlwZSBpcyBEYXRlCiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIERhdGUgb2JqZWN0cyBhcyBJU084NjAxIGZvcm1hdGVkIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgc29hcE9iamVjdCA9IG5ldyBTT0FQT2JqZWN0KHByZWZpeCtuYW1lKTsKICAgICAgICAgICAgICAgICAgICBzb2FwT2JqZWN0LnZhbChwYXJhbXMudG9JU09TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNvYXBPYmplY3QgPSBuZXcgU09BUE9iamVjdChwcmVmaXgrbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciB5IGluIHBhcmFtcykgewogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZE9iamVjdCA9IHRoaXMuanNvbjJzb2FwKHksIHBhcmFtc1t5XSwgcHJlZml4LCBzb2FwT2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkT2JqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2FwT2JqZWN0LmFwcGVuZENoaWxkKGNoaWxkT2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGFyYW1zID09ICdib29sZWFuJykgewogICAgICAgICAgICAgICAgc29hcE9iamVjdCA9IG5ldyBTT0FQT2JqZWN0KHByZWZpeCtuYW1lKTsKICAgICAgICAgICAgICAgIHNvYXBPYmplY3QudmFsKHBhcmFtcyA/ICd0cnVlJyA6ICdmYWxzZScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc29hcE9iamVjdCA9IG5ldyBTT0FQT2JqZWN0KHByZWZpeCtuYW1lKTsKICAgICAgICAgICAgICAgIHNvYXBPYmplY3QudmFsKHBhcmFtcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHNvYXBPYmplY3Q7CiAgICAgICAgfSwKICAgICAgICBkb20yc29hcDogZnVuY3Rpb24gKHhtbGRvbSkgewogICAgICAgICAgICB2YXIgd2hpdGVzcGFjZSA9IC9eXHMrJC87CiAgICAgICAgICAgIHZhciBzb2FwT2JqZWN0ID0gbmV3IFNPQVBPYmplY3QoeG1sZG9tLm5vZGVOYW1lKTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4bWxkb20uYXR0cmlidXRlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IHhtbGRvbS5hdHRyaWJ1dGVzW2ldOwogICAgICAgICAgICAgICAgc29hcE9iamVjdC5hdHRyKGF0dHJpYnV0ZS5uYW1lLCBhdHRyaWJ1dGUudmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgeG1sZG9tLmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbGRvbS5jaGlsZE5vZGVzW2pdOwogICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkT2JqZWN0ID0gU09BUFRvb2wuZG9tMnNvYXAoY2hpbGQpOwogICAgICAgICAgICAgICAgICAgIHNvYXBPYmplY3QuYXBwZW5kQ2hpbGQoY2hpbGRPYmplY3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09PSAzICYmICF3aGl0ZXNwYWNlLnRlc3QoY2hpbGQubm9kZVZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgIHNvYXBPYmplY3QudmFsKGNoaWxkLm5vZGVWYWx1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT09IDQpewogICAgICAgICAgICAgICAgICAgIHNvYXBPYmplY3QudmFsKCc8IVtDREFUQVsnICsgY2hpbGQubm9kZVZhbHVlICsgJ11dPicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzb2FwT2JqZWN0OwogICAgICAgIH0sCiAgICAgICAgYXJyYXkyc29hcDogZnVuY3Rpb24ob3B0aW9ucykgewogICAgICAgICAgICBzb2FwT2JqZWN0ID0gbmV3IFNPQVBPYmplY3Qob3B0aW9ucy5uYW1lKTsKICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbnMuZGF0YS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgIGlmICgkLmlzQXJyYXkob3B0aW9ucy5kYXRhW2luZGV4XSkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV3X2l0ZW0gPSBzb2FwT2JqZWN0Lm5ld0NoaWxkKCdzb2FwZW5jOkFycmF5Jyk7CiAgICAgICAgICAgICAgICAgICAgbmV3X2l0ZW0uYXR0cignc29hcGVuYzphcnJheVR5cGUnLCAneHNkOnN0cmluZ1snICsgKG9wdGlvbnMuZGF0YVtpbmRleF0ubGVuZ3RoKSArICddJyk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaXRlbSA9IDA7IGl0ZW0gPCBvcHRpb25zLmRhdGFbaW5kZXhdLmxlbmd0aDsgaXRlbSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld19pdGVtLm5ld0NoaWxkKCdpdGVtJykuYXR0cigndHlwZScsICd4c2Q6c3RyaW5nJykudmFsKG9wdGlvbnMuZGF0YVtpbmRleF1baXRlbV0pLmVuZCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc29hcE9iamVjdC5uZXdDaGlsZCgnYy1nZW5zeW0nICsgaW5kZXgpLmF0dHIoJ3R5cGUnLCAneHNkOnN0cmluZycpLnZhbChvcHRpb25zLmRhdGFbaW5kZXhdKS5lbmQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc29hcE9iamVjdDsKICAgICAgICB9LAogICAgICAgIGRvbTJzdHJpbmc6IGZ1bmN0aW9uKGRvbSkgewogICAgICAgICAgICBpZiAodHlwZW9mIFhNTFNlcmlhbGl6ZXIhPT0idW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKGRvbSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZG9tLnhtbDsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY3JlYXRlV1NTOiBmdW5jdGlvbih3c3NWYWx1ZXMpIHsKICAgICAgICAgICAgaWYgICghIXdzc1ZhbHVlcy51c2VybmFtZSAmJiAhIXdzc1ZhbHVlcy5wYXNzd29yZCkgewogICAgICAgICAgICAgICAgdmFyIHdzc0NvbnN0ID0gewogICAgICAgICAgICAgICAgICAgIHNlY3VyaXR5OiAid3NzZTpTZWN1cml0eSIsCiAgICAgICAgICAgICAgICAgICAgc2VjdXJpdHlOUzogImh0dHA6Ly9kb2NzLm9hc2lzLW9wZW4ub3JnL3dzcy8yMDA0LzAxL29hc2lzLTIwMDQwMS13c3Mtd3NzZWN1cml0eS1zZWNleHQtMS4wLnhzZCIsCiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWVUb2tlbjogIndzc2U6VXNlcm5hbWVUb2tlbiIsCiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWVUb2tlbk5TOiAiaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvd3NzLzIwMDQvMDEvb2FzaXMtMjAwNDAxLXdzcy13c3NlY3VyaXR5LXV0aWxpdHktMS4wLnhzZCIsCiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJ3c3NlOlVzZXJuYW1lIiwKICAgICAgICAgICAgICAgICAgICB1c2VybmFtZVR5cGU6ICJodHRwOi8vZG9jcy5vYXNpcy1vcGVuLm9yZy93c3MvMjAwNC8wMS9vYXNpcy0yMDA0MDEtd3NzLXdzc2VjdXJpdHktc2VjZXh0LTEuMC54c2QiLAogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAid3NzZTpQYXNzd29yZCIsCiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRUeXBlOiAiaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvd3NzLzIwMDQvMDEvb2FzaXMtMjAwNDAxLXdzcy11c2VybmFtZS10b2tlbi1wcm9maWxlLTEuMCNQYXNzd29yZFRleHQiLAogICAgICAgICAgICAgICAgICAgIG5vbmNlOiAid3NzZTpOb25jZSIsCiAgICAgICAgICAgICAgICAgICAgbm9uY2VUeXBlOiAiaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvd3NzLzIwMDQvMDEvb2FzaXMtMjAwNDAxLXdzcy13c3NlY3VyaXR5LXNlY2V4dC0xLjAueHNkIiwKICAgICAgICAgICAgICAgICAgICB3c3VDcmVhdGVkOiAid3N1OkNyZWF0ZWQiLAogICAgICAgICAgICAgICAgICAgIHdzdUNyZWF0ZWRUeXBlOiAiaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvd3NzLzIwMDQvMDEvb2FzaXMtMjAwNDAxLXdzcy13c3NlY3VyaXR5LXV0aWxpdHktMS4wLnhzZCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgV1NTT2JqID0gbmV3IFNPQVBPYmplY3Qod3NzQ29uc3Quc2VjdXJpdHkpCiAgICAgICAgICAgICAgICAgICAgLmFkZE5hbWVzcGFjZSgnd3NzZScsIHdzc0NvbnN0LnNlY3VyaXR5TlMpCiAgICAgICAgICAgICAgICAgICAgLmFkZE5hbWVzcGFjZSgnd3N1Jywgd3NzQ29uc3QudXNlcm5hbWVUb2tlbk5TKQogICAgICAgICAgICAgICAgICAgIC5uZXdDaGlsZCh3c3NDb25zdC51c2VybmFtZVRva2VuKQogICAgICAgICAgICAgICAgICAgIC5uZXdDaGlsZCh3c3NDb25zdC51c2VybmFtZSkKICAgICAgICAgICAgICAgICAgICAuYXR0cignVHlwZScsIHdzc0NvbnN0LnVzZXJuYW1lVHlwZSkKICAgICAgICAgICAgICAgICAgICAudmFsKHdzc1ZhbHVlcy51c2VybmFtZSkKICAgICAgICAgICAgICAgICAgICAuZW5kKCkKICAgICAgICAgICAgICAgICAgICAubmV3Q2hpbGQod3NzQ29uc3QucGFzc3dvcmQpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ1R5cGUnLCB3c3NDb25zdC5wYXNzd29yZFR5cGUpCiAgICAgICAgICAgICAgICAgICAgLnZhbCh3c3NWYWx1ZXMucGFzc3dvcmQpCiAgICAgICAgICAgICAgICAgICAgLmVuZCgpCiAgICAgICAgICAgICAgICAgICAgLmVuZCgpOwogICAgICAgICAgICAgICAgdmFyIHVzZXJUb2tlbk9iaiA9IFdTU09iai5maW5kKHdzc0NvbnN0LnVzZXJuYW1lVG9rZW4pOwogICAgICAgICAgICAgICAgaWYgKCEhd3NzVmFsdWVzLm5vbmNlKSB7CiAgICAgICAgICAgICAgICAgICAgdXNlclRva2VuT2JqCiAgICAgICAgICAgICAgICAgICAgICAgIC5uZXdDaGlsZCh3c3NDb25zdC5ub25jZSkKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ1R5cGUnLCB3c3NDb25zdC5ub25jZVR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgIC52YWwod3NzVmFsdWVzLm5vbmNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghIXdzc1ZhbHVlcy5jcmVhdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgdXNlclRva2VuT2JqCiAgICAgICAgICAgICAgICAgICAgICAgIC5uZXdDaGlsZCh3c3NDb25zdC53c3VDcmVhdGVkKQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignVHlwZScsIHdzc0NvbnN0LndzdUNyZWF0ZWRUeXBlKQogICAgICAgICAgICAgICAgICAgICAgICAudmFsKHdzc1ZhbHVlcy5jcmVhdGVkKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBXU1NPYmo7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZhbGxiYWNrRGVwcmVjYXRlZDogZnVuY3Rpb24oY29uZmlnKSB7CiAgICAgICAgICAgIC8vIGZhbGxiYWNrcyBmb3IgY2hhbmdlZCBwcm9wZXJ0aWVzOiAodGhlIG9sZCBuYW1lcyB3aWxsIGRlcHJlY2F0ZSBhdCB2ZXJzaW9uIDIuMC4wISkKICAgICAgICAgICAgdmFyIGRlcHJlY2F0ZWQgPSB7CiAgICAgICAgICAgICAgICAvLyB1c2FnZSAtPiBvbGRQYXJhbTogJ25ld1BhcmFtJwogICAgICAgICAgICAgICAgbmFtZXNwYWNlVXJsOiAnbmFtZXNwYWNlVVJMJywKICAgICAgICAgICAgICAgIHJlcXVlc3Q6ICdiZWZvcmVTZW5kJywKICAgICAgICAgICAgICAgIHBhcmFtczogJ2RhdGEnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGZvciAodmFyIG9sZFBhcmFtIGluIGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgICAgIHZhciBuZXdQYXJhbSA9IGRlcHJlY2F0ZWRbb2xkUGFyYW1dOwogICAgICAgICAgICAgICAgaWYgKCFjb25maWdbbmV3UGFyYW1dICYmICEhY29uZmlnW29sZFBhcmFtXSkgewogICAgICAgICAgICAgICAgICAgIHdhcm4oJ2pxdWVyeS5zb2FwOiAnICsgb2xkUGFyYW0gKyAnIGlzIGRlcHJlY2F0ZWQsIHVzZSAnICsgbmV3UGFyYW0gKyAnIGluc3RlYWQhJyk7CiAgICAgICAgICAgICAgICAgICAgY29uZmlnW25ld1BhcmFtXSA9IGNvbmZpZ1tvbGRQYXJhbV07CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbmZpZ1tvbGRQYXJhbV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgZnVuY3Rpb24gbG9nKCkgewogICAgICAgIGlmIChlbmFibGVMb2dnaW5nICYmIHR5cGVvZihjb25zb2xlKT09PSdvYmplY3QnKSB7CiAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oY29uc29sZS5sb2cpKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHdhcm4oKSB7CiAgICAgICAgaWYgKHR5cGVvZihjb25zb2xlKT09PSdvYmplY3QnKSB7CiAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oY29uc29sZS53YXJuKSkgewogICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihhcmd1bWVudHNbMF0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAkLnNvYXAgPSBzb2FwOwp9KTsKCgoKCgoKCgoKCgoKCgoKCgoKLyoqCiAqIGpRdWVyeSBwbHVnaW4gdG8gY29udmVydCBhIGdpdmVuICQuYWpheCByZXNwb25zZSB4bWwgb2JqZWN0IHRvIGpzb24uCiAqCiAqIEBleGFtcGxlIHZhciBqc29uID0gJC54bWwyanNvbihyZXNwb25zZSk7CiAqLwooZnVuY3Rpb24gKCkgewoKICAgIC8vIGRlZmF1bHQgb3B0aW9ucyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vTGVvbmlkYXMtZnJvbS1YSVYvbm9kZS14bWwyanMKICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHsKICAgICAgICBhdHRya2V5OiAnJCcsCiAgICAgICAgY2hhcmtleTogJ18nLAogICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsCiAgICAgICAgZXhwbGljaXRBcnJheTogZmFsc2UKICAgIH07CgogICAgLy8gZXh0cmFjdGVkIGZyb20ganF1ZXJ5CiAgICBmdW5jdGlvbiBwYXJzZVhNTChkYXRhKSB7CiAgICAgICAgdmFyIHhtbCwgdG1wOwogICAgICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh3aW5kb3cuRE9NUGFyc2VyKSB7IC8vIFN0YW5kYXJkCiAgICAgICAgICAgICAgICB0bXAgPSBuZXcgRE9NUGFyc2VyKCk7CiAgICAgICAgICAgICAgICB4bWwgPSB0bXAucGFyc2VGcm9tU3RyaW5nKGRhdGEsICJ0ZXh0L3htbCIpOwogICAgICAgICAgICB9IGVsc2UgeyAvLyBJRQogICAgICAgICAgICAgICAgeG1sID0gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKTsKICAgICAgICAgICAgICAgIHhtbC5hc3luYyA9ICJmYWxzZSI7CiAgICAgICAgICAgICAgICB4bWwubG9hZFhNTChkYXRhKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgeG1sID0gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICBpZiAoIXhtbCB8fCAheG1sLmRvY3VtZW50RWxlbWVudCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBYTUw6ICIgKyBkYXRhKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHhtbDsKICAgIH0KCiAgICBmdW5jdGlvbiBub3JtYWxpemUodmFsdWUsIG9wdGlvbnMpIHsKICAgICAgICBpZiAoISFvcHRpb25zLm5vcm1hbGl6ZSkgewogICAgICAgICAgICByZXR1cm4gKHZhbHVlIHx8ICcnKS50cmltKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KCiAgICB2YXIganNvblJlc3VsdDsKICAgIHZhciBqc29uU3RyaW5nOwogICAgZnVuY3Rpb24geG1sMmpzb25JbXBsKHhtbCwgcm9vdE5vZGUpIHsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgbm9kZSA9IHhtbC5jaGlsZE5vZGVzW2ldOwogICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkgewoKICAgICAgICAgICAgICAgIGlmICghKG5vZGUuYXR0cmlidXRlcy5sZW5ndGggPT09IDAgJiYgbm9kZS5jaGlsZEVsZW1lbnRDb3VudCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICB4bWwyanNvbkltcGwobm9kZSwgcm9vdE5vZGUpOwogICAgICAgICAgICAgICAgICAgIGlmKGpzb25SZXN1bHQpewogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBub2RlLm5vZGVOYW1lOwogICAgICAgICAgICAgICAgaWYgKG5hbWUudG9Mb3dlckNhc2UoKSAhPSAobm9kZS5wcmVmaXggKyAiOiIgKyByb290Tm9kZSkudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAganNvblN0cmluZyA9ICIiCiAgICAgICAgICAgICAgICBpZihub2RlLmNoaWxkTm9kZXMgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICAgICAgIGJ1aWxkSnNvbihub2RlLmNoaWxkTm9kZXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAganNvblJlc3VsdCA9IEpTT04ucGFyc2UoInsiICsganNvblN0cmluZysgIn0iKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0T2JqZWN0SnNvbihodG1sTm9kZXMpIHsKICAgICAgICB2YXIgdGVtcCA9ICIiOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaHRtbE5vZGVzLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIG5vZGUgPSBodG1sTm9kZXMuY2hpbGROb2Rlc1tpXTsKICAgICAgICAgICAgaWYgKHRlbXAgIT0gIiIpIHsKICAgICAgICAgICAgICAgIHRlbXAgKz0gIiwgIgogICAgICAgICAgICB9CiAgICAgICAgICAgIHRlbXAgKz0gYXBwZW5kVG9Kc29uU3RyaW5nKG5vZGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gInsiICsgdGVtcCArICJ9IgogICAgfQoKICAgIGZ1bmN0aW9uIGFwcGVuZFRvSnNvblN0cmluZyhub2RlKXsKCiAgICAgICAgdmFyIHRleHRDb250ZW50ID0gZ2V0VHlwZShub2RlLnRleHRDb250ZW50KTsKICAgICAgICByZXR1cm4gIlwiIiArIG5vZGUubG9jYWxOYW1lICsgIlwiOiIgKyB0ZXh0Q29udGVudDsKCiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VHlwZSh0ZXh0Q29udGVudCl7CiAgICAgICAgaWYoIXRleHRDb250ZW50KXsKICAgICAgICAgICAgcmV0dXJuICJcIlwiIjsKICAgICAgICB9CiAgICAgICAgaWYgKHRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkgPT0gInRydWUiIHx8CiAgICAgICAgICAgIHRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkgPT0gImZhbHNlIikgewogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChuZXcgUmVnRXhwKCdeWzAtOV17MCwxMH0kJykudGVzdCh0ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpKQogICAgICAgICAgICAmJiB0ZXh0Q29udGVudFswXSArICIiICE9ICIwIikgewogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGV4dENvbnRlbnQgPSAiXCIiICsgdGV4dENvbnRlbnQgKyAiXCIiCiAgICAgICAgfQogICAgICAgIHJldHVybiB0ZXh0Q29udGVudDsKICAgIH0KCiAgICBmdW5jdGlvbiBidWlsZEpzb24oc2VhcmNoTm9kZXMpewoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlYXJjaE5vZGVzLmxlbmd0aDsgaisrKSB7CgogICAgICAgICAgICB2YXIgbm9kZSA9IHNlYXJjaE5vZGVzW2pdOwogICAgICAgICAgICB2YXIgdmFsdWVJc09iamVjdDsKCiAgICAgICAgICAgIGlmICghKG5vZGUuYXR0cmlidXRlcy5sZW5ndGggPT09IDAgJiYgbm9kZS5jaGlsZEVsZW1lbnRDb3VudCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgIHZhbHVlSXNPYmplY3QgPSBnZXRPYmplY3RKc29uKHNlYXJjaE5vZGVzW2pdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGpzb25TdHJpbmcgIT0gIiIpIHsKICAgICAgICAgICAgICAgIGpzb25TdHJpbmcgKz0gIiwgIgogICAgICAgICAgICB9CgogICAgICAgICAgICBpZih2YWx1ZUlzT2JqZWN0KXsKICAgICAgICAgICAgICAgIGlmKHNlYXJjaE5vZGVzLmxlbmd0aCA+IDEpewogICAgICAgICAgICAgICAgICAgIGlmKGpzb25TdHJpbmcuaW5kZXhPZigiWyIpID09IC0xKXsKICAgICAgICAgICAgICAgICAgICAgICAganNvblN0cmluZyArPSAiXCIiICsgbm9kZS5sb2NhbE5hbWUgKyAiXCI6WyIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAganNvblN0cmluZyArPSB2YWx1ZUlzT2JqZWN0OwogICAgICAgICAgICAgICAgICAgIGlmKGogKyAxID49IHNlYXJjaE5vZGVzLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGpzb25TdHJpbmcgKz0gIl0iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAganNvblN0cmluZyArPSAiXCIiICsgbm9kZS5sb2NhbE5hbWUgKyAiXCI6IiArIHZhbHVlSXNPYmplY3Q7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgdGV4dENvbnRlbnQgPSBnZXRUeXBlKG5vZGUudGV4dENvbnRlbnQpOwogICAgICAgICAgICAgICAganNvblN0cmluZyArPSAiXCIiICsgbm9kZS5sb2NhbE5hbWUgKyAiXCI6IiArIHRleHRDb250ZW50OwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL2lmIChyZXN1bHQuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgICAgLy8gICAgLy8gRm9yIHJlcGVhdGluZyBlbGVtZW50cywgY2FzdC9wcm9tb3RlIHRoZSBub2RlIHRvIGFycmF5CiAgICAgICAgICAgIC8vICAgIHZhciB2YWwgPSByZXN1bHRbbmFtZV07CiAgICAgICAgICAgIC8vICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWwpKSB7CiAgICAgICAgICAgIC8vICAgICAgICB2YWwgPSBbdmFsXTsKICAgICAgICAgICAgLy8gICAgICAgIHJlc3VsdFtuYW1lXSA9IHZhbDsKICAgICAgICAgICAgLy8gICAgfQogICAgICAgICAgICAvLyAgICB2YWwucHVzaChjaGlsZCk7CiAgICAgICAgICAgIC8vfSBlbHNlIHsKICAgICAgICAgICAgLy8gICAgcmVzdWx0W25hbWVdID0gY2hpbGQ7CiAgICAgICAgICAgIC8vfQogICAgICAgIH0KICAgIH0KCgogICAgZnVuY3Rpb24geG1sMmpzb24oeG1sLCByb290Tm9kZSkgewogICAgICAgIGpzb25SZXN1bHQgPSBudWxsOwogICAgICAgIGlmICgheG1sKSB7CiAgICAgICAgICAgIHJldHVybiB4bWw7CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlb2YgeG1sID09PSAnc3RyaW5nJykgewogICAgICAgICAgICB4bWwgPSBwYXJzZVhNTCh4bWwpLmRvY3VtZW50RWxlbWVudDsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiB4bWwuYXR0cmlidXRlcyA9PT0gJ3VuZGVmaW5lZCcgfHwgeG1sLmF0dHJpYnV0ZXMgPT09IG51bGwpIHsKICAgICAgICAgICAgeG1sMmpzb25JbXBsKHhtbCwgcm9vdE5vZGUpOwogICAgICAgIH0gZWxzZSBpZiAoeG1sLmF0dHJpYnV0ZXMgJiYgeG1sLmF0dHJpYnV0ZXMubGVuZ3RoID09PSAwICYmIHhtbC5jaGlsZEVsZW1lbnRDb3VudCA9PT0gMCkgewogICAgICAgICAgICBub3JtYWxpemUoeG1sLnRleHRDb250ZW50LCByb290Tm9kZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgeG1sMmpzb25JbXBsKHhtbCwgcm9vdE5vZGUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGlzRW1wdHlPYmooanNvblJlc3VsdCk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNFbXB0eU9iaihvYmopIHsKICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikgewogICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKQogICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWUgJiYgSlNPTi5zdHJpbmdpZnkob2JqKSA9PT0gSlNPTi5zdHJpbmdpZnkoe30pID8gbnVsbCA6IG9iajsKICAgIH0KCiAgICBpZiAodHlwZW9mIGpRdWVyeSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBqUXVlcnkuZXh0ZW5kKHsgeG1sMmpzb246IHhtbDJqc29uIH0pOwogICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIG1vZHVsZS5leHBvcnRzID0geG1sMmpzb247CiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgd2luZG93LnhtbDJqc29uID0geG1sMmpzb247CiAgICB9CgoKfSkoKTsKCgoKZGVmaW5lKCJqcXVlcnktc29hcCIsIFsianF1ZXJ5Il0sIGZ1bmN0aW9uKCl7fSk7CgovLyAgICAgVW5kZXJzY29yZS5qcyAxLjguMwovLyAgICAgaHR0cDovL3VuZGVyc2NvcmVqcy5vcmcKLy8gICAgIChjKSAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnMKLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCihmdW5jdGlvbigpe2Z1bmN0aW9uIG4obil7ZnVuY3Rpb24gdCh0LHIsZSx1LGksbyl7Zm9yKDtpPj0wJiZvPmk7aSs9bil7dmFyIGE9dT91W2ldOmk7ZT1yKGUsdFthXSxhLHQpfXJldHVybiBlfXJldHVybiBmdW5jdGlvbihyLGUsdSxpKXtlPWIoZSxpLDQpO3ZhciBvPSFrKHIpJiZtLmtleXMociksYT0ob3x8cikubGVuZ3RoLGM9bj4wPzA6YS0xO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDMmJih1PXJbbz9vW2NdOmNdLGMrPW4pLHQocixlLHUsbyxjLGEpfX1mdW5jdGlvbiB0KG4pe3JldHVybiBmdW5jdGlvbih0LHIsZSl7cj14KHIsZSk7Zm9yKHZhciB1PU8odCksaT1uPjA/MDp1LTE7aT49MCYmdT5pO2krPW4paWYocih0W2ldLGksdCkpcmV0dXJuIGk7cmV0dXJuLTF9fWZ1bmN0aW9uIHIobix0LHIpe3JldHVybiBmdW5jdGlvbihlLHUsaSl7dmFyIG89MCxhPU8oZSk7aWYoIm51bWJlciI9PXR5cGVvZiBpKW4+MD9vPWk+PTA/aTpNYXRoLm1heChpK2Esbyk6YT1pPj0wP01hdGgubWluKGkrMSxhKTppK2ErMTtlbHNlIGlmKHImJmkmJmEpcmV0dXJuIGk9cihlLHUpLGVbaV09PT11P2k6LTE7aWYodSE9PXUpcmV0dXJuIGk9dChsLmNhbGwoZSxvLGEpLG0uaXNOYU4pLGk+PTA/aStvOi0xO2ZvcihpPW4+MD9vOmEtMTtpPj0wJiZhPmk7aSs9bilpZihlW2ldPT09dSlyZXR1cm4gaTtyZXR1cm4tMX19ZnVuY3Rpb24gZShuLHQpe3ZhciByPUkubGVuZ3RoLGU9bi5jb25zdHJ1Y3Rvcix1PW0uaXNGdW5jdGlvbihlKSYmZS5wcm90b3R5cGV8fGEsaT0iY29uc3RydWN0b3IiO2ZvcihtLmhhcyhuLGkpJiYhbS5jb250YWlucyh0LGkpJiZ0LnB1c2goaSk7ci0tOylpPUlbcl0saSBpbiBuJiZuW2ldIT09dVtpXSYmIW0uY29udGFpbnModCxpKSYmdC5wdXNoKGkpfXZhciB1PXRoaXMsaT11Ll8sbz1BcnJheS5wcm90b3R5cGUsYT1PYmplY3QucHJvdG90eXBlLGM9RnVuY3Rpb24ucHJvdG90eXBlLGY9by5wdXNoLGw9by5zbGljZSxzPWEudG9TdHJpbmcscD1hLmhhc093blByb3BlcnR5LGg9QXJyYXkuaXNBcnJheSx2PU9iamVjdC5rZXlzLGc9Yy5iaW5kLHk9T2JqZWN0LmNyZWF0ZSxkPWZ1bmN0aW9uKCl7fSxtPWZ1bmN0aW9uKG4pe3JldHVybiBuIGluc3RhbmNlb2YgbT9uOnRoaXMgaW5zdGFuY2VvZiBtP3ZvaWQodGhpcy5fd3JhcHBlZD1uKTpuZXcgbShuKX07InVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzPygidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMmJihleHBvcnRzPW1vZHVsZS5leHBvcnRzPW0pLGV4cG9ydHMuXz1tKTp1Ll89bSxtLlZFUlNJT049IjEuOC4zIjt2YXIgYj1mdW5jdGlvbihuLHQscil7aWYodD09PXZvaWQgMClyZXR1cm4gbjtzd2l0Y2gobnVsbD09cj8zOnIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIG4uY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsZSl7cmV0dXJuIG4uY2FsbCh0LHIsZSl9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixlLHUpe3JldHVybiBuLmNhbGwodCxyLGUsdSl9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24ocixlLHUsaSl7cmV0dXJuIG4uY2FsbCh0LHIsZSx1LGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0LGFyZ3VtZW50cyl9fSx4PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbnVsbD09bj9tLmlkZW50aXR5Om0uaXNGdW5jdGlvbihuKT9iKG4sdCxyKTptLmlzT2JqZWN0KG4pP20ubWF0Y2hlcihuKTptLnByb3BlcnR5KG4pfTttLml0ZXJhdGVlPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHgobix0LDEvMCl9O3ZhciBfPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg7aWYoMj5lfHxudWxsPT1yKXJldHVybiByO2Zvcih2YXIgdT0xO2U+dTt1KyspZm9yKHZhciBpPWFyZ3VtZW50c1t1XSxvPW4oaSksYT1vLmxlbmd0aCxjPTA7YT5jO2MrKyl7dmFyIGY9b1tjXTt0JiZyW2ZdIT09dm9pZCAwfHwocltmXT1pW2ZdKX1yZXR1cm4gcn19LGo9ZnVuY3Rpb24obil7aWYoIW0uaXNPYmplY3QobikpcmV0dXJue307aWYoeSlyZXR1cm4geShuKTtkLnByb3RvdHlwZT1uO3ZhciB0PW5ldyBkO3JldHVybiBkLnByb3RvdHlwZT1udWxsLHR9LHc9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3ZvaWQgMDp0W25dfX0sQT1NYXRoLnBvdygyLDUzKS0xLE89dygibGVuZ3RoIiksaz1mdW5jdGlvbihuKXt2YXIgdD1PKG4pO3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmdD49MCYmQT49dH07bS5lYWNoPW0uZm9yRWFjaD1mdW5jdGlvbihuLHQscil7dD1iKHQscik7dmFyIGUsdTtpZihrKG4pKWZvcihlPTAsdT1uLmxlbmd0aDt1PmU7ZSsrKXQobltlXSxlLG4pO2Vsc2V7dmFyIGk9bS5rZXlzKG4pO2ZvcihlPTAsdT1pLmxlbmd0aDt1PmU7ZSsrKXQobltpW2VdXSxpW2VdLG4pfXJldHVybiBufSxtLm1hcD1tLmNvbGxlY3Q9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPUFycmF5KHUpLG89MDt1Pm87bysrKXt2YXIgYT1lP2Vbb106bztpW29dPXQoblthXSxhLG4pfXJldHVybiBpfSxtLnJlZHVjZT1tLmZvbGRsPW0uaW5qZWN0PW4oMSksbS5yZWR1Y2VSaWdodD1tLmZvbGRyPW4oLTEpLG0uZmluZD1tLmRldGVjdD1mdW5jdGlvbihuLHQscil7dmFyIGU7cmV0dXJuIGU9ayhuKT9tLmZpbmRJbmRleChuLHQscik6bS5maW5kS2V5KG4sdCxyKSxlIT09dm9pZCAwJiZlIT09LTE/bltlXTp2b2lkIDB9LG0uZmlsdGVyPW0uc2VsZWN0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1bXTtyZXR1cm4gdD14KHQsciksbS5lYWNoKG4sZnVuY3Rpb24obixyLHUpe3QobixyLHUpJiZlLnB1c2gobil9KSxlfSxtLnJlamVjdD1mdW5jdGlvbihuLHQscil7cmV0dXJuIG0uZmlsdGVyKG4sbS5uZWdhdGUoeCh0KSkscil9LG0uZXZlcnk9bS5hbGw9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPTA7dT5pO2krKyl7dmFyIG89ZT9lW2ldOmk7aWYoIXQobltvXSxvLG4pKXJldHVybiExfXJldHVybiEwfSxtLnNvbWU9bS5hbnk9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPTA7dT5pO2krKyl7dmFyIG89ZT9lW2ldOmk7aWYodChuW29dLG8sbikpcmV0dXJuITB9cmV0dXJuITF9LG0uY29udGFpbnM9bS5pbmNsdWRlcz1tLmluY2x1ZGU9ZnVuY3Rpb24obix0LHIsZSl7cmV0dXJuIGsobil8fChuPW0udmFsdWVzKG4pKSwoIm51bWJlciIhPXR5cGVvZiByfHxlKSYmKHI9MCksbS5pbmRleE9mKG4sdCxyKT49MH0sbS5pbnZva2U9ZnVuY3Rpb24obix0KXt2YXIgcj1sLmNhbGwoYXJndW1lbnRzLDIpLGU9bS5pc0Z1bmN0aW9uKHQpO3JldHVybiBtLm1hcChuLGZ1bmN0aW9uKG4pe3ZhciB1PWU/dDpuW3RdO3JldHVybiBudWxsPT11P3U6dS5hcHBseShuLHIpfSl9LG0ucGx1Y2s9ZnVuY3Rpb24obix0KXtyZXR1cm4gbS5tYXAobixtLnByb3BlcnR5KHQpKX0sbS53aGVyZT1mdW5jdGlvbihuLHQpe3JldHVybiBtLmZpbHRlcihuLG0ubWF0Y2hlcih0KSl9LG0uZmluZFdoZXJlPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG0uZmluZChuLG0ubWF0Y2hlcih0KSl9LG0ubWF4PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZSx1LGk9LTEvMCxvPS0xLzA7aWYobnVsbD09dCYmbnVsbCE9bil7bj1rKG4pP246bS52YWx1ZXMobik7Zm9yKHZhciBhPTAsYz1uLmxlbmd0aDtjPmE7YSsrKWU9blthXSxlPmkmJihpPWUpfWVsc2UgdD14KHQsciksbS5lYWNoKG4sZnVuY3Rpb24obixyLGUpe3U9dChuLHIsZSksKHU+b3x8dT09PS0xLzAmJmk9PT0tMS8wKSYmKGk9bixvPXUpfSk7cmV0dXJuIGl9LG0ubWluPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZSx1LGk9MS8wLG89MS8wO2lmKG51bGw9PXQmJm51bGwhPW4pe249ayhuKT9uOm0udmFsdWVzKG4pO2Zvcih2YXIgYT0wLGM9bi5sZW5ndGg7Yz5hO2ErKyllPW5bYV0saT5lJiYoaT1lKX1lbHNlIHQ9eCh0LHIpLG0uZWFjaChuLGZ1bmN0aW9uKG4scixlKXt1PXQobixyLGUpLChvPnV8fDEvMD09PXUmJjEvMD09PWkpJiYoaT1uLG89dSl9KTtyZXR1cm4gaX0sbS5zaHVmZmxlPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxyPWsobik/bjptLnZhbHVlcyhuKSxlPXIubGVuZ3RoLHU9QXJyYXkoZSksaT0wO2U+aTtpKyspdD1tLnJhbmRvbSgwLGkpLHQhPT1pJiYodVtpXT11W3RdKSx1W3RdPXJbaV07cmV0dXJuIHV9LG0uc2FtcGxlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbnVsbD09dHx8cj8oayhuKXx8KG49bS52YWx1ZXMobikpLG5bbS5yYW5kb20obi5sZW5ndGgtMSldKTptLnNodWZmbGUobikuc2xpY2UoMCxNYXRoLm1heCgwLHQpKX0sbS5zb3J0Qnk9ZnVuY3Rpb24obix0LHIpe3JldHVybiB0PXgodCxyKSxtLnBsdWNrKG0ubWFwKG4sZnVuY3Rpb24obixyLGUpe3JldHVybnt2YWx1ZTpuLGluZGV4OnIsY3JpdGVyaWE6dChuLHIsZSl9fSkuc29ydChmdW5jdGlvbihuLHQpe3ZhciByPW4uY3JpdGVyaWEsZT10LmNyaXRlcmlhO2lmKHIhPT1lKXtpZihyPmV8fHI9PT12b2lkIDApcmV0dXJuIDE7aWYoZT5yfHxlPT09dm9pZCAwKXJldHVybi0xfXJldHVybiBuLmluZGV4LXQuaW5kZXh9KSwidmFsdWUiKX07dmFyIEY9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHQscixlKXt2YXIgdT17fTtyZXR1cm4gcj14KHIsZSksbS5lYWNoKHQsZnVuY3Rpb24oZSxpKXt2YXIgbz1yKGUsaSx0KTtuKHUsZSxvKX0pLHV9fTttLmdyb3VwQnk9RihmdW5jdGlvbihuLHQscil7bS5oYXMobixyKT9uW3JdLnB1c2godCk6bltyXT1bdF19KSxtLmluZGV4Qnk9RihmdW5jdGlvbihuLHQscil7bltyXT10fSksbS5jb3VudEJ5PUYoZnVuY3Rpb24obix0LHIpe20uaGFzKG4scik/bltyXSsrOm5bcl09MX0pLG0udG9BcnJheT1mdW5jdGlvbihuKXtyZXR1cm4gbj9tLmlzQXJyYXkobik/bC5jYWxsKG4pOmsobik/bS5tYXAobixtLmlkZW50aXR5KTptLnZhbHVlcyhuKTpbXX0sbS5zaXplPWZ1bmN0aW9uKG4pe3JldHVybiBudWxsPT1uPzA6ayhuKT9uLmxlbmd0aDptLmtleXMobikubGVuZ3RofSxtLnBhcnRpdGlvbj1mdW5jdGlvbihuLHQscil7dD14KHQscik7dmFyIGU9W10sdT1bXTtyZXR1cm4gbS5lYWNoKG4sZnVuY3Rpb24obixyLGkpeyh0KG4scixpKT9lOnUpLnB1c2gobil9KSxbZSx1XX0sbS5maXJzdD1tLmhlYWQ9bS50YWtlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbnVsbD09bj92b2lkIDA6bnVsbD09dHx8cj9uWzBdOm0uaW5pdGlhbChuLG4ubGVuZ3RoLXQpfSxtLmluaXRpYWw9ZnVuY3Rpb24obix0LHIpe3JldHVybiBsLmNhbGwobiwwLE1hdGgubWF4KDAsbi5sZW5ndGgtKG51bGw9PXR8fHI/MTp0KSkpfSxtLmxhc3Q9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT1uP3ZvaWQgMDpudWxsPT10fHxyP25bbi5sZW5ndGgtMV06bS5yZXN0KG4sTWF0aC5tYXgoMCxuLmxlbmd0aC10KSl9LG0ucmVzdD1tLnRhaWw9bS5kcm9wPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbC5jYWxsKG4sbnVsbD09dHx8cj8xOnQpfSxtLmNvbXBhY3Q9ZnVuY3Rpb24obil7cmV0dXJuIG0uZmlsdGVyKG4sbS5pZGVudGl0eSl9O3ZhciBTPWZ1bmN0aW9uKG4sdCxyLGUpe2Zvcih2YXIgdT1bXSxpPTAsbz1lfHwwLGE9TyhuKTthPm87bysrKXt2YXIgYz1uW29dO2lmKGsoYykmJihtLmlzQXJyYXkoYyl8fG0uaXNBcmd1bWVudHMoYykpKXt0fHwoYz1TKGMsdCxyKSk7dmFyIGY9MCxsPWMubGVuZ3RoO2Zvcih1Lmxlbmd0aCs9bDtsPmY7KXVbaSsrXT1jW2YrK119ZWxzZSByfHwodVtpKytdPWMpfXJldHVybiB1fTttLmZsYXR0ZW49ZnVuY3Rpb24obix0KXtyZXR1cm4gUyhuLHQsITEpfSxtLndpdGhvdXQ9ZnVuY3Rpb24obil7cmV0dXJuIG0uZGlmZmVyZW5jZShuLGwuY2FsbChhcmd1bWVudHMsMSkpfSxtLnVuaXE9bS51bmlxdWU9ZnVuY3Rpb24obix0LHIsZSl7bS5pc0Jvb2xlYW4odCl8fChlPXIscj10LHQ9ITEpLG51bGwhPXImJihyPXgocixlKSk7Zm9yKHZhciB1PVtdLGk9W10sbz0wLGE9TyhuKTthPm87bysrKXt2YXIgYz1uW29dLGY9cj9yKGMsbyxuKTpjO3Q/KG8mJmk9PT1mfHx1LnB1c2goYyksaT1mKTpyP20uY29udGFpbnMoaSxmKXx8KGkucHVzaChmKSx1LnB1c2goYykpOm0uY29udGFpbnModSxjKXx8dS5wdXNoKGMpfXJldHVybiB1fSxtLnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIG0udW5pcShTKGFyZ3VtZW50cywhMCwhMCkpfSxtLmludGVyc2VjdGlvbj1mdW5jdGlvbihuKXtmb3IodmFyIHQ9W10scj1hcmd1bWVudHMubGVuZ3RoLGU9MCx1PU8obik7dT5lO2UrKyl7dmFyIGk9bltlXTtpZighbS5jb250YWlucyh0LGkpKXtmb3IodmFyIG89MTtyPm8mJm0uY29udGFpbnMoYXJndW1lbnRzW29dLGkpO28rKyk7bz09PXImJnQucHVzaChpKX19cmV0dXJuIHR9LG0uZGlmZmVyZW5jZT1mdW5jdGlvbihuKXt2YXIgdD1TKGFyZ3VtZW50cywhMCwhMCwxKTtyZXR1cm4gbS5maWx0ZXIobixmdW5jdGlvbihuKXtyZXR1cm4hbS5jb250YWlucyh0LG4pfSl9LG0uemlwPWZ1bmN0aW9uKCl7cmV0dXJuIG0udW56aXAoYXJndW1lbnRzKX0sbS51bnppcD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9biYmbS5tYXgobixPKS5sZW5ndGh8fDAscj1BcnJheSh0KSxlPTA7dD5lO2UrKylyW2VdPW0ucGx1Y2sobixlKTtyZXR1cm4gcn0sbS5vYmplY3Q9ZnVuY3Rpb24obix0KXtmb3IodmFyIHI9e30sZT0wLHU9TyhuKTt1PmU7ZSsrKXQ/cltuW2VdXT10W2VdOnJbbltlXVswXV09bltlXVsxXTtyZXR1cm4gcn0sbS5maW5kSW5kZXg9dCgxKSxtLmZpbmRMYXN0SW5kZXg9dCgtMSksbS5zb3J0ZWRJbmRleD1mdW5jdGlvbihuLHQscixlKXtyPXgocixlLDEpO2Zvcih2YXIgdT1yKHQpLGk9MCxvPU8obik7bz5pOyl7dmFyIGE9TWF0aC5mbG9vcigoaStvKS8yKTtyKG5bYV0pPHU/aT1hKzE6bz1hfXJldHVybiBpfSxtLmluZGV4T2Y9cigxLG0uZmluZEluZGV4LG0uc29ydGVkSW5kZXgpLG0ubGFzdEluZGV4T2Y9cigtMSxtLmZpbmRMYXN0SW5kZXgpLG0ucmFuZ2U9ZnVuY3Rpb24obix0LHIpe251bGw9PXQmJih0PW58fDAsbj0wKSxyPXJ8fDE7Zm9yKHZhciBlPU1hdGgubWF4KE1hdGguY2VpbCgodC1uKS9yKSwwKSx1PUFycmF5KGUpLGk9MDtlPmk7aSsrLG4rPXIpdVtpXT1uO3JldHVybiB1fTt2YXIgRT1mdW5jdGlvbihuLHQscixlLHUpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXJldHVybiBuLmFwcGx5KHIsdSk7dmFyIGk9aihuLnByb3RvdHlwZSksbz1uLmFwcGx5KGksdSk7cmV0dXJuIG0uaXNPYmplY3Qobyk/bzppfTttLmJpbmQ9ZnVuY3Rpb24obix0KXtpZihnJiZuLmJpbmQ9PT1nKXJldHVybiBnLmFwcGx5KG4sbC5jYWxsKGFyZ3VtZW50cywxKSk7aWYoIW0uaXNGdW5jdGlvbihuKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24iKTt2YXIgcj1sLmNhbGwoYXJndW1lbnRzLDIpLGU9ZnVuY3Rpb24oKXtyZXR1cm4gRShuLGUsdCx0aGlzLHIuY29uY2F0KGwuY2FsbChhcmd1bWVudHMpKSl9O3JldHVybiBlfSxtLnBhcnRpYWw9ZnVuY3Rpb24obil7dmFyIHQ9bC5jYWxsKGFyZ3VtZW50cywxKSxyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdT10Lmxlbmd0aCxpPUFycmF5KHUpLG89MDt1Pm87bysrKWlbb109dFtvXT09PW0/YXJndW1lbnRzW2UrK106dFtvXTtmb3IoO2U8YXJndW1lbnRzLmxlbmd0aDspaS5wdXNoKGFyZ3VtZW50c1tlKytdKTtyZXR1cm4gRShuLHIsdGhpcyx0aGlzLGkpfTtyZXR1cm4gcn0sbS5iaW5kQWxsPWZ1bmN0aW9uKG4pe3ZhciB0LHIsZT1hcmd1bWVudHMubGVuZ3RoO2lmKDE+PWUpdGhyb3cgbmV3IEVycm9yKCJiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzIik7Zm9yKHQ9MTtlPnQ7dCsrKXI9YXJndW1lbnRzW3RdLG5bcl09bS5iaW5kKG5bcl0sbik7cmV0dXJuIG59LG0ubWVtb2l6ZT1mdW5jdGlvbihuLHQpe3ZhciByPWZ1bmN0aW9uKGUpe3ZhciB1PXIuY2FjaGUsaT0iIisodD90LmFwcGx5KHRoaXMsYXJndW1lbnRzKTplKTtyZXR1cm4gbS5oYXModSxpKXx8KHVbaV09bi5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHVbaV19O3JldHVybiByLmNhY2hlPXt9LHJ9LG0uZGVsYXk9ZnVuY3Rpb24obix0KXt2YXIgcj1sLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkobnVsbCxyKX0sdCl9LG0uZGVmZXI9bS5wYXJ0aWFsKG0uZGVsYXksbSwxKSxtLnRocm90dGxlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZSx1LGksbz1udWxsLGE9MDtyfHwocj17fSk7dmFyIGM9ZnVuY3Rpb24oKXthPXIubGVhZGluZz09PSExPzA6bS5ub3coKSxvPW51bGwsaT1uLmFwcGx5KGUsdSksb3x8KGU9dT1udWxsKX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGY9bS5ub3coKTthfHxyLmxlYWRpbmchPT0hMXx8KGE9Zik7dmFyIGw9dC0oZi1hKTtyZXR1cm4gZT10aGlzLHU9YXJndW1lbnRzLDA+PWx8fGw+dD8obyYmKGNsZWFyVGltZW91dChvKSxvPW51bGwpLGE9ZixpPW4uYXBwbHkoZSx1KSxvfHwoZT11PW51bGwpKTpvfHxyLnRyYWlsaW5nPT09ITF8fChvPXNldFRpbWVvdXQoYyxsKSksaX19LG0uZGVib3VuY2U9ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaSxvLGEsYz1mdW5jdGlvbigpe3ZhciBmPW0ubm93KCktbzt0PmYmJmY+PTA/ZT1zZXRUaW1lb3V0KGMsdC1mKTooZT1udWxsLHJ8fChhPW4uYXBwbHkoaSx1KSxlfHwoaT11PW51bGwpKSl9O3JldHVybiBmdW5jdGlvbigpe2k9dGhpcyx1PWFyZ3VtZW50cyxvPW0ubm93KCk7dmFyIGY9ciYmIWU7cmV0dXJuIGV8fChlPXNldFRpbWVvdXQoYyx0KSksZiYmKGE9bi5hcHBseShpLHUpLGk9dT1udWxsKSxhfX0sbS53cmFwPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG0ucGFydGlhbCh0LG4pfSxtLm5lZ2F0ZT1mdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxtLmNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgbj1hcmd1bWVudHMsdD1uLmxlbmd0aC0xO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgcj10LGU9blt0XS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ci0tOyllPW5bcl0uY2FsbCh0aGlzLGUpO3JldHVybiBlfX0sbS5hZnRlcj1mdW5jdGlvbihuLHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybi0tbjwxP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19LG0uYmVmb3JlPWZ1bmN0aW9uKG4sdCl7dmFyIHI7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuLS1uPjAmJihyPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpKSwxPj1uJiYodD1udWxsKSxyfX0sbS5vbmNlPW0ucGFydGlhbChtLmJlZm9yZSwyKTt2YXIgTT0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLEk9WyJ2YWx1ZU9mIiwiaXNQcm90b3R5cGVPZiIsInRvU3RyaW5nIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJoYXNPd25Qcm9wZXJ0eSIsInRvTG9jYWxlU3RyaW5nIl07bS5rZXlzPWZ1bmN0aW9uKG4pe2lmKCFtLmlzT2JqZWN0KG4pKXJldHVybltdO2lmKHYpcmV0dXJuIHYobik7dmFyIHQ9W107Zm9yKHZhciByIGluIG4pbS5oYXMobixyKSYmdC5wdXNoKHIpO3JldHVybiBNJiZlKG4sdCksdH0sbS5hbGxLZXlzPWZ1bmN0aW9uKG4pe2lmKCFtLmlzT2JqZWN0KG4pKXJldHVybltdO3ZhciB0PVtdO2Zvcih2YXIgciBpbiBuKXQucHVzaChyKTtyZXR1cm4gTSYmZShuLHQpLHR9LG0udmFsdWVzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1tLmtleXMobikscj10Lmxlbmd0aCxlPUFycmF5KHIpLHU9MDtyPnU7dSsrKWVbdV09blt0W3VdXTtyZXR1cm4gZX0sbS5tYXBPYmplY3Q9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZSx1PW0ua2V5cyhuKSxpPXUubGVuZ3RoLG89e30sYT0wO2k+YTthKyspZT11W2FdLG9bZV09dChuW2VdLGUsbik7cmV0dXJuIG99LG0ucGFpcnM9ZnVuY3Rpb24obil7Zm9yKHZhciB0PW0ua2V5cyhuKSxyPXQubGVuZ3RoLGU9QXJyYXkociksdT0wO3I+dTt1KyspZVt1XT1bdFt1XSxuW3RbdV1dXTtyZXR1cm4gZX0sbS5pbnZlcnQ9ZnVuY3Rpb24obil7Zm9yKHZhciB0PXt9LHI9bS5rZXlzKG4pLGU9MCx1PXIubGVuZ3RoO3U+ZTtlKyspdFtuW3JbZV1dXT1yW2VdO3JldHVybiB0fSxtLmZ1bmN0aW9ucz1tLm1ldGhvZHM9ZnVuY3Rpb24obil7dmFyIHQ9W107Zm9yKHZhciByIGluIG4pbS5pc0Z1bmN0aW9uKG5bcl0pJiZ0LnB1c2gocik7cmV0dXJuIHQuc29ydCgpfSxtLmV4dGVuZD1fKG0uYWxsS2V5cyksbS5leHRlbmRPd249bS5hc3NpZ249XyhtLmtleXMpLG0uZmluZEtleT1mdW5jdGlvbihuLHQscil7dD14KHQscik7Zm9yKHZhciBlLHU9bS5rZXlzKG4pLGk9MCxvPXUubGVuZ3RoO28+aTtpKyspaWYoZT11W2ldLHQobltlXSxlLG4pKXJldHVybiBlfSxtLnBpY2s9ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaT17fSxvPW47aWYobnVsbD09bylyZXR1cm4gaTttLmlzRnVuY3Rpb24odCk/KHU9bS5hbGxLZXlzKG8pLGU9Yih0LHIpKToodT1TKGFyZ3VtZW50cywhMSwhMSwxKSxlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdCBpbiByfSxvPU9iamVjdChvKSk7Zm9yKHZhciBhPTAsYz11Lmxlbmd0aDtjPmE7YSsrKXt2YXIgZj11W2FdLGw9b1tmXTtlKGwsZixvKSYmKGlbZl09bCl9cmV0dXJuIGl9LG0ub21pdD1mdW5jdGlvbihuLHQscil7aWYobS5pc0Z1bmN0aW9uKHQpKXQ9bS5uZWdhdGUodCk7ZWxzZXt2YXIgZT1tLm1hcChTKGFyZ3VtZW50cywhMSwhMSwxKSxTdHJpbmcpO3Q9ZnVuY3Rpb24obix0KXtyZXR1cm4hbS5jb250YWlucyhlLHQpfX1yZXR1cm4gbS5waWNrKG4sdCxyKX0sbS5kZWZhdWx0cz1fKG0uYWxsS2V5cywhMCksbS5jcmVhdGU9ZnVuY3Rpb24obix0KXt2YXIgcj1qKG4pO3JldHVybiB0JiZtLmV4dGVuZE93bihyLHQpLHJ9LG0uY2xvbmU9ZnVuY3Rpb24obil7cmV0dXJuIG0uaXNPYmplY3Qobik/bS5pc0FycmF5KG4pP24uc2xpY2UoKTptLmV4dGVuZCh7fSxuKTpufSxtLnRhcD1mdW5jdGlvbihuLHQpe3JldHVybiB0KG4pLG59LG0uaXNNYXRjaD1mdW5jdGlvbihuLHQpe3ZhciByPW0ua2V5cyh0KSxlPXIubGVuZ3RoO2lmKG51bGw9PW4pcmV0dXJuIWU7Zm9yKHZhciB1PU9iamVjdChuKSxpPTA7ZT5pO2krKyl7dmFyIG89cltpXTtpZih0W29dIT09dVtvXXx8IShvIGluIHUpKXJldHVybiExfXJldHVybiEwfTt2YXIgTj1mdW5jdGlvbihuLHQscixlKXtpZihuPT09dClyZXR1cm4gMCE9PW58fDEvbj09PTEvdDtpZihudWxsPT1ufHxudWxsPT10KXJldHVybiBuPT09dDtuIGluc3RhbmNlb2YgbSYmKG49bi5fd3JhcHBlZCksdCBpbnN0YW5jZW9mIG0mJih0PXQuX3dyYXBwZWQpO3ZhciB1PXMuY2FsbChuKTtpZih1IT09cy5jYWxsKHQpKXJldHVybiExO3N3aXRjaCh1KXtjYXNlIltvYmplY3QgUmVnRXhwXSI6Y2FzZSJbb2JqZWN0IFN0cmluZ10iOnJldHVybiIiK249PSIiK3Q7Y2FzZSJbb2JqZWN0IE51bWJlcl0iOnJldHVybituIT09K24/K3QhPT0rdDowPT09K24/MS8rbj09PTEvdDorbj09PSt0O2Nhc2UiW29iamVjdCBEYXRlXSI6Y2FzZSJbb2JqZWN0IEJvb2xlYW5dIjpyZXR1cm4rbj09PSt0fXZhciBpPSJbb2JqZWN0IEFycmF5XSI9PT11O2lmKCFpKXtpZigib2JqZWN0IiE9dHlwZW9mIG58fCJvYmplY3QiIT10eXBlb2YgdClyZXR1cm4hMTt2YXIgbz1uLmNvbnN0cnVjdG9yLGE9dC5jb25zdHJ1Y3RvcjtpZihvIT09YSYmIShtLmlzRnVuY3Rpb24obykmJm8gaW5zdGFuY2VvZiBvJiZtLmlzRnVuY3Rpb24oYSkmJmEgaW5zdGFuY2VvZiBhKSYmImNvbnN0cnVjdG9yImluIG4mJiJjb25zdHJ1Y3RvciJpbiB0KXJldHVybiExfXI9cnx8W10sZT1lfHxbXTtmb3IodmFyIGM9ci5sZW5ndGg7Yy0tOylpZihyW2NdPT09bilyZXR1cm4gZVtjXT09PXQ7aWYoci5wdXNoKG4pLGUucHVzaCh0KSxpKXtpZihjPW4ubGVuZ3RoLGMhPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IoO2MtLTspaWYoIU4obltjXSx0W2NdLHIsZSkpcmV0dXJuITF9ZWxzZXt2YXIgZixsPW0ua2V5cyhuKTtpZihjPWwubGVuZ3RoLG0ua2V5cyh0KS5sZW5ndGghPT1jKXJldHVybiExO2Zvcig7Yy0tOylpZihmPWxbY10sIW0uaGFzKHQsZil8fCFOKG5bZl0sdFtmXSxyLGUpKXJldHVybiExfXJldHVybiByLnBvcCgpLGUucG9wKCksITB9O20uaXNFcXVhbD1mdW5jdGlvbihuLHQpe3JldHVybiBOKG4sdCl9LG0uaXNFbXB0eT1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj8hMDprKG4pJiYobS5pc0FycmF5KG4pfHxtLmlzU3RyaW5nKG4pfHxtLmlzQXJndW1lbnRzKG4pKT8wPT09bi5sZW5ndGg6MD09PW0ua2V5cyhuKS5sZW5ndGh9LG0uaXNFbGVtZW50PWZ1bmN0aW9uKG4pe3JldHVybiEoIW58fDEhPT1uLm5vZGVUeXBlKX0sbS5pc0FycmF5PWh8fGZ1bmN0aW9uKG4pe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1zLmNhbGwobil9LG0uaXNPYmplY3Q9ZnVuY3Rpb24obil7dmFyIHQ9dHlwZW9mIG47cmV0dXJuImZ1bmN0aW9uIj09PXR8fCJvYmplY3QiPT09dCYmISFufSxtLmVhY2goWyJBcmd1bWVudHMiLCJGdW5jdGlvbiIsIlN0cmluZyIsIk51bWJlciIsIkRhdGUiLCJSZWdFeHAiLCJFcnJvciJdLGZ1bmN0aW9uKG4pe21bImlzIituXT1mdW5jdGlvbih0KXtyZXR1cm4gcy5jYWxsKHQpPT09IltvYmplY3QgIituKyJdIn19KSxtLmlzQXJndW1lbnRzKGFyZ3VtZW50cyl8fChtLmlzQXJndW1lbnRzPWZ1bmN0aW9uKG4pe3JldHVybiBtLmhhcyhuLCJjYWxsZWUiKX0pLCJmdW5jdGlvbiIhPXR5cGVvZi8uLyYmIm9iamVjdCIhPXR5cGVvZiBJbnQ4QXJyYXkmJihtLmlzRnVuY3Rpb249ZnVuY3Rpb24obil7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIG58fCExfSksbS5pc0Zpbml0ZT1mdW5jdGlvbihuKXtyZXR1cm4gaXNGaW5pdGUobikmJiFpc05hTihwYXJzZUZsb2F0KG4pKX0sbS5pc05hTj1mdW5jdGlvbihuKXtyZXR1cm4gbS5pc051bWJlcihuKSYmbiE9PStufSxtLmlzQm9vbGVhbj1mdW5jdGlvbihuKXtyZXR1cm4gbj09PSEwfHxuPT09ITF8fCJbb2JqZWN0IEJvb2xlYW5dIj09PXMuY2FsbChuKX0sbS5pc051bGw9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PT1ufSxtLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKG4pe3JldHVybiBuPT09dm9pZCAwfSxtLmhhcz1mdW5jdGlvbihuLHQpe3JldHVybiBudWxsIT1uJiZwLmNhbGwobix0KX0sbS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHUuXz1pLHRoaXN9LG0uaWRlbnRpdHk9ZnVuY3Rpb24obil7cmV0dXJuIG59LG0uY29uc3RhbnQ9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG59fSxtLm5vb3A9ZnVuY3Rpb24oKXt9LG0ucHJvcGVydHk9dyxtLnByb3BlcnR5T2Y9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PW4/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfX0sbS5tYXRjaGVyPW0ubWF0Y2hlcz1mdW5jdGlvbihuKXtyZXR1cm4gbj1tLmV4dGVuZE93bih7fSxuKSxmdW5jdGlvbih0KXtyZXR1cm4gbS5pc01hdGNoKHQsbil9fSxtLnRpbWVzPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1BcnJheShNYXRoLm1heCgwLG4pKTt0PWIodCxyLDEpO2Zvcih2YXIgdT0wO24+dTt1KyspZVt1XT10KHUpO3JldHVybiBlfSxtLnJhbmRvbT1mdW5jdGlvbihuLHQpe3JldHVybiBudWxsPT10JiYodD1uLG49MCksbitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHQtbisxKSl9LG0ubm93PURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfTt2YXIgQj17IiYiOiImYW1wOyIsIjwiOiImbHQ7IiwiPiI6IiZndDsiLCciJzoiJnF1b3Q7IiwiJyI6IiYjeDI3OyIsImAiOiImI3g2MDsifSxUPW0uaW52ZXJ0KEIpLFI9ZnVuY3Rpb24obil7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5bdF19LHI9Iig/OiIrbS5rZXlzKG4pLmpvaW4oInwiKSsiKSIsZT1SZWdFeHAociksdT1SZWdFeHAociwiZyIpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbj1udWxsPT1uPyIiOiIiK24sZS50ZXN0KG4pP24ucmVwbGFjZSh1LHQpOm59fTttLmVzY2FwZT1SKEIpLG0udW5lc2NhcGU9UihUKSxtLnJlc3VsdD1mdW5jdGlvbihuLHQscil7dmFyIGU9bnVsbD09bj92b2lkIDA6blt0XTtyZXR1cm4gZT09PXZvaWQgMCYmKGU9ciksbS5pc0Z1bmN0aW9uKGUpP2UuY2FsbChuKTplfTt2YXIgcT0wO20udW5pcXVlSWQ9ZnVuY3Rpb24obil7dmFyIHQ9KytxKyIiO3JldHVybiBuP24rdDp0fSxtLnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXHNcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xzXFNdKz8pJT4vZyxlc2NhcGU6LzwlLShbXHNcU10rPyklPi9nfTt2YXIgSz0vKC4pXi8sej17IiciOiInIiwiXFwiOiJcXCIsIlxyIjoiciIsIlxuIjoibiIsIlx1MjAyOCI6InUyMDI4IiwiXHUyMDI5IjoidTIwMjkifSxEPS9cXHwnfFxyfFxufFx1MjAyOHxcdTIwMjkvZyxMPWZ1bmN0aW9uKG4pe3JldHVybiJcXCIreltuXX07bS50ZW1wbGF0ZT1mdW5jdGlvbihuLHQscil7IXQmJnImJih0PXIpLHQ9bS5kZWZhdWx0cyh7fSx0LG0udGVtcGxhdGVTZXR0aW5ncyk7dmFyIGU9UmVnRXhwKFsodC5lc2NhcGV8fEspLnNvdXJjZSwodC5pbnRlcnBvbGF0ZXx8Sykuc291cmNlLCh0LmV2YWx1YXRlfHxLKS5zb3VyY2VdLmpvaW4oInwiKSsifCQiLCJnIiksdT0wLGk9Il9fcCs9JyI7bi5yZXBsYWNlKGUsZnVuY3Rpb24odCxyLGUsbyxhKXtyZXR1cm4gaSs9bi5zbGljZSh1LGEpLnJlcGxhY2UoRCxMKSx1PWErdC5sZW5ndGgscj9pKz0iJytcbigoX190PSgiK3IrIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xuJyI6ZT9pKz0iJytcbigoX190PSgiK2UrIikpPT1udWxsPycnOl9fdCkrXG4nIjpvJiYoaSs9Iic7XG4iK28rIlxuX19wKz0nIiksdH0pLGkrPSInO1xuIix0LnZhcmlhYmxlfHwoaT0id2l0aChvYmp8fHt9KXtcbiIraSsifVxuIiksaT0idmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLCIrInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iK2krInJldHVybiBfX3A7XG4iO3RyeXt2YXIgbz1uZXcgRnVuY3Rpb24odC52YXJpYWJsZXx8Im9iaiIsIl8iLGkpfWNhdGNoKGEpe3Rocm93IGEuc291cmNlPWksYX12YXIgYz1mdW5jdGlvbihuKXtyZXR1cm4gby5jYWxsKHRoaXMsbixtKX0sZj10LnZhcmlhYmxlfHwib2JqIjtyZXR1cm4gYy5zb3VyY2U9ImZ1bmN0aW9uKCIrZisiKXtcbiIraSsifSIsY30sbS5jaGFpbj1mdW5jdGlvbihuKXt2YXIgdD1tKG4pO3JldHVybiB0Ll9jaGFpbj0hMCx0fTt2YXIgUD1mdW5jdGlvbihuLHQpe3JldHVybiBuLl9jaGFpbj9tKHQpLmNoYWluKCk6dH07bS5taXhpbj1mdW5jdGlvbihuKXttLmVhY2gobS5mdW5jdGlvbnMobiksZnVuY3Rpb24odCl7dmFyIHI9bVt0XT1uW3RdO20ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIG49W3RoaXMuX3dyYXBwZWRdO3JldHVybiBmLmFwcGx5KG4sYXJndW1lbnRzKSxQKHRoaXMsci5hcHBseShtLG4pKX19KX0sbS5taXhpbihtKSxtLmVhY2goWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiXSxmdW5jdGlvbihuKXt2YXIgdD1vW25dO20ucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5fd3JhcHBlZDtyZXR1cm4gdC5hcHBseShyLGFyZ3VtZW50cyksInNoaWZ0IiE9PW4mJiJzcGxpY2UiIT09bnx8MCE9PXIubGVuZ3RofHxkZWxldGUgclswXSxQKHRoaXMscil9fSksbS5lYWNoKFsiY29uY2F0Iiwiam9pbiIsInNsaWNlIl0sZnVuY3Rpb24obil7dmFyIHQ9b1tuXTttLnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3JldHVybiBQKHRoaXMsdC5hcHBseSh0aGlzLl93cmFwcGVkLGFyZ3VtZW50cykpfX0pLG0ucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dyYXBwZWR9LG0ucHJvdG90eXBlLnZhbHVlT2Y9bS5wcm90b3R5cGUudG9KU09OPW0ucHJvdG90eXBlLnZhbHVlLG0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIiIrdGhpcy5fd3JhcHBlZH0sImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJ1bmRlcnNjb3JlIixbXSxmdW5jdGlvbigpe3JldHVybiBtfSl9KS5jYWxsKHRoaXMpOwovLyMgc291cmNlTWFwcGluZ1VSTD11bmRlcnNjb3JlLW1pbi5tYXA7Ci8qKgogKiBBbmd1bGFyIEdvb2dsZSBBbmFseXRpY3MgLSBFYXN5IHRyYWNraW5nIGZvciB5b3VyIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbgogKiBAdmVyc2lvbiB2MS4xLjggLSAyMDE2LTEyLTMwCiAqIEBsaW5rIGh0dHA6Ly9naXRodWIuY29tL3Jldm9sdW5ldC9hbmd1bGFyLWdvb2dsZS1hbmFseXRpY3MKICogQGF1dGhvciBKdWxpZW4gQm91cXVpbGxvbiA8anVsaWVuQHJldm9sdW5ldC5jb20+IChodHRwczovL2dpdGh1Yi5jb20vcmV2b2x1bmV0KQogKiBAY29udHJpYnV0b3JzIEp1bGllbiBCb3VxdWlsbG9uIChodHRwczovL2dpdGh1Yi5jb20vcmV2b2x1bmV0KSxKdXN0aW4gU2F1bmRlcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS9qdXN0aW5zYSksQ2hyaXMgRXNwbGluIChodHRwczovL2dpdGh1Yi5jb20vZGVsdGFlcHNpbG9uKSxBZGFtIE1pc2lvcm55IChodHRwczovL2dpdGh1Yi5jb20vYWRhbTE4NykKICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUCiAqLwovKiBnbG9iYWxzIGRlZmluZSAqLwooZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAndXNlIHN0cmljdCc7CiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7CiAgICBpZiAodHlwZW9mIGFuZ3VsYXIgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIGZhY3RvcnkocmVxdWlyZSgnYW5ndWxhcicpKTsKICAgIH0gZWxzZSB7CiAgICAgIGZhY3RvcnkoYW5ndWxhcik7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9ICdhbmd1bGFyLWdvb2dsZS1hbmFseXRpY3MnOwogIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICBkZWZpbmUoJ2FuZ3VsYXItZ29vZ2xlLWFuYWx5dGljcycsWydhbmd1bGFyJ10sIGZhY3RvcnkpOwogIH0gZWxzZSB7CiAgICBmYWN0b3J5KHJvb3QuYW5ndWxhcik7CiAgfQp9KHRoaXMsIGZ1bmN0aW9uIChhbmd1bGFyLCB1bmRlZmluZWQpIHsKICAndXNlIHN0cmljdCc7CiAgYW5ndWxhci5tb2R1bGUoJ2FuZ3VsYXItZ29vZ2xlLWFuYWx5dGljcycsIFtdKQogICAgLnByb3ZpZGVyKCdBbmFseXRpY3MnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhY2NvdW50cywKICAgICAgICAgIGFuYWx5dGljc0pTID0gdHJ1ZSwKICAgICAgICAgIGNvb2tpZUNvbmZpZyA9ICdhdXRvJywgLy8gREVQUkVDQVRFRAogICAgICAgICAgY3JlYXRlZCA9IGZhbHNlLAogICAgICAgICAgY3Jvc3NEb21haW5MaW5rZXIgPSBmYWxzZSwKICAgICAgICAgIGNyb3NzTGlua0RvbWFpbnMsCiAgICAgICAgICBjdXJyZW5jeSA9ICdVU0QnLAogICAgICAgICAgZGVidWdNb2RlID0gZmFsc2UsCiAgICAgICAgICBkZWxheVNjcmlwdFRhZyA9IGZhbHNlLAogICAgICAgICAgZGlzcGxheUZlYXR1cmVzID0gZmFsc2UsCiAgICAgICAgICBkaXNhYmxlQW5hbHl0aWNzID0gZmFsc2UsCiAgICAgICAgICBkb21haW5OYW1lLAogICAgICAgICAgZWNvbW1lcmNlID0gZmFsc2UsCiAgICAgICAgICBlbmhhbmNlZEVjb21tZXJjZSA9IGZhbHNlLAogICAgICAgICAgZW5oYW5jZWRMaW5rQXR0cmlidXRpb24gPSBmYWxzZSwKICAgICAgICAgIGV4cGVyaW1lbnRJZCwKICAgICAgICAgIGlnbm9yZUZpcnN0UGFnZUxvYWQgPSBmYWxzZSwKICAgICAgICAgIGxvZ0FsbENhbGxzID0gZmFsc2UsCiAgICAgICAgICBoeWJyaWRNb2JpbGVTdXBwb3J0ID0gZmFsc2UsCiAgICAgICAgICBvZmZsaW5lTW9kZSA9IGZhbHNlLAogICAgICAgICAgcGFnZUV2ZW50ID0gJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLAogICAgICAgICAgcmVhZEZyb21Sb3V0ZSA9IGZhbHNlLAogICAgICAgICAgcmVtb3ZlUmVnRXhwLAogICAgICAgICAgdGVzdE1vZGUgPSBmYWxzZSwKICAgICAgICAgIHRyYWNlRGVidWdnaW5nTW9kZSA9IGZhbHNlLAogICAgICAgICAgdHJhY2tQcmVmaXggPSAnJywKICAgICAgICAgIHRyYWNrUm91dGVzID0gdHJ1ZSwKICAgICAgICAgIHRyYWNrVXJsUGFyYW1zID0gZmFsc2U7CgogICAgICB0aGlzLmxvZyA9IFtdOwogICAgICB0aGlzLm9mZmxpbmVRdWV1ZSA9IFtdOwoKICAgICAgLyoqCiAgICAgICAqIENvbmZpZ3VyYXRpb24gTWV0aG9kcwogICAgICAgKiovCgogICAgICB0aGlzLnNldEFjY291bnQgPSBmdW5jdGlvbiAodHJhY2tlcikgewogICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHRyYWNrZXIpIHx8IHRyYWNrZXIgPT09IGZhbHNlKSB7CiAgICAgICAgICBhY2NvdW50cyA9IHVuZGVmaW5lZDsKICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNBcnJheSh0cmFja2VyKSkgewogICAgICAgICAgYWNjb3VudHMgPSB0cmFja2VyOwogICAgICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc09iamVjdCh0cmFja2VyKSkgewogICAgICAgICAgYWNjb3VudHMgPSBbdHJhY2tlcl07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHByZXNlcnZlIGFuIGV4aXN0aW5nIGJlaGF2aW9yIHdpdGggaG93IHRoZSBfdHJhY2tFdmVudCBmdW5jdGlvbiB3b3JrcywKICAgICAgICAgIC8vIHRoZSB0cmFja0V2ZW50IHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIHRydWUgd2hlbiB0aGVyZSBpcyBvbmx5IGEgc2luZ2xlIHRyYWNrZXIuCiAgICAgICAgICBhY2NvdW50cyA9IFt7IHRyYWNrZXI6IHRyYWNrZXIsIHRyYWNrRXZlbnQ6IHRydWUgfV07CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAgICAgdGhpcy50cmFja1BhZ2VzID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHRyYWNrUm91dGVzID0gISF2YWw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLnRyYWNrUHJlZml4ID0gZnVuY3Rpb24gKHByZWZpeCkgewogICAgICAgIHRyYWNrUHJlZml4ID0gcHJlZml4OwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAgICAgdGhpcy5zZXREb21haW5OYW1lID0gZnVuY3Rpb24gKGRvbWFpbikgewogICAgICAgIGRvbWFpbk5hbWUgPSBkb21haW47CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLnVzZURpc3BsYXlGZWF0dXJlcyA9IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICBkaXNwbGF5RmVhdHVyZXMgPSAhIXZhbDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfTsKCiAgICAgIHRoaXMudXNlQW5hbHl0aWNzID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGFuYWx5dGljc0pTID0gISF2YWw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLnVzZUVuaGFuY2VkTGlua0F0dHJpYnV0aW9uID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGVuaGFuY2VkTGlua0F0dHJpYnV0aW9uID0gISF2YWw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLnVzZUNyb3NzRG9tYWluTGlua2VyID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGNyb3NzRG9tYWluTGlua2VyID0gISF2YWw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLnNldENyb3NzTGlua0RvbWFpbnMgPSBmdW5jdGlvbiAoZG9tYWlucykgewogICAgICAgIGNyb3NzTGlua0RvbWFpbnMgPSBkb21haW5zOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAgICAgdGhpcy5zZXRQYWdlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHBhZ2VFdmVudCA9IG5hbWU7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICAvKiBERVBSRUNBVEVEICovCiAgICAgIHRoaXMuc2V0Q29va2llQ29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgIGNvb2tpZUNvbmZpZyA9IGNvbmZpZzsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfTsKCiAgICAgIHRoaXMudXNlRUNvbW1lcmNlID0gZnVuY3Rpb24gKHZhbCwgZW5oYW5jZWQpIHsKICAgICAgICBlY29tbWVyY2UgPSAhIXZhbDsKICAgICAgICBlbmhhbmNlZEVjb21tZXJjZSA9ICEhZW5oYW5jZWQ7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLnNldEN1cnJlbmN5ID0gZnVuY3Rpb24gKGN1cnJlbmN5Q29kZSkgewogICAgICAgIGN1cnJlbmN5ID0gY3VycmVuY3lDb2RlOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAgICAgdGhpcy5zZXRSZW1vdmVSZWdFeHAgPSBmdW5jdGlvbiAocmVnZXgpIHsKICAgICAgICBpZiAocmVnZXggaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgIHJlbW92ZVJlZ0V4cCA9IHJlZ2V4OwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfTsKCiAgICAgIHRoaXMuc2V0RXhwZXJpbWVudElkID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgZXhwZXJpbWVudElkID0gaWQ7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLmlnbm9yZUZpcnN0UGFnZUxvYWQgPSBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWdub3JlRmlyc3RQYWdlTG9hZCA9ICEhdmFsOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAgICAgdGhpcy50cmFja1VybFBhcmFtcyA9IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB0cmFja1VybFBhcmFtcyA9ICEhdmFsOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAgICAgdGhpcy5kaXNhYmxlQW5hbHl0aWNzID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGRpc2FibGVBbmFseXRpY3MgPSAhIXZhbDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfTsKCiAgICAgIHRoaXMuc2V0SHlicmlkTW9iaWxlU3VwcG9ydCA9IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICBoeWJyaWRNb2JpbGVTdXBwb3J0ID0gISF2YWw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLnN0YXJ0T2ZmbGluZSA9IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICBvZmZsaW5lTW9kZSA9ICEhdmFsOwogICAgICAgIGlmIChvZmZsaW5lTW9kZSA9PT0gdHJ1ZSkgewogICAgICAgICAgdGhpcy5kZWxheVNjcmlwdFRhZyh0cnVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLmRlbGF5U2NyaXB0VGFnID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGRlbGF5U2NyaXB0VGFnID0gISF2YWw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLmxvZ0FsbENhbGxzID0gZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGxvZ0FsbENhbGxzID0gISF2YWw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICB0aGlzLmVudGVyVGVzdE1vZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGVzdE1vZGUgPSB0cnVlOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAgICAgdGhpcy5lbnRlckRlYnVnTW9kZSA9IGZ1bmN0aW9uIChlbmFibGVUcmFjZURlYnVnZ2luZykgewogICAgICAgIGRlYnVnTW9kZSA9IHRydWU7CiAgICAgICAgdHJhY2VEZWJ1Z2dpbmdNb2RlID0gISFlbmFibGVUcmFjZURlYnVnZ2luZzsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfTsKICAgICAgCiAgICAgIC8vIEVuYWJsZSByZWFkaW5nIHBhZ2UgdXJsIGZyb20gcm91dGUgb2JqZWN0CiAgICAgIHRoaXMucmVhZEZyb21Sb3V0ZSA9IGZ1bmN0aW9uKHZhbCkgewogICAgICAgIHJlYWRGcm9tUm91dGUgPSAhIXZhbDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBQdWJsaWMgU2VydmljZQogICAgICAgKi8KICAgICAgdGhpcy4kZ2V0ID0gWyckZG9jdW1lbnQnLCAvLyBUbyByZWFkIHBhZ2UgdGl0bGUgCiAgICAgICAgICAgICAgICAgICAnJGxvY2F0aW9uJywgLy8KICAgICAgICAgICAgICAgICAgICckbG9nJywgICAgICAvLwogICAgICAgICAgICAgICAgICAgJyRyb290U2NvcGUnLC8vCiAgICAgICAgICAgICAgICAgICAnJHdpbmRvdycsICAgLy8KICAgICAgICAgICAgICAgICAgICckaW5qZWN0b3InLCAvLyBUbyBhY2Nlc3MgbmdSb3V0ZSBtb2R1bGUgd2l0aG91dCBkZWNsYXJpbmcgYSBmaXhlZCBkZXBlbmRlbmN5CiAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoJGRvY3VtZW50LCAkbG9jYXRpb24sICRsb2csICRyb290U2NvcGUsICR3aW5kb3csICRpbmplY3RvcikgewogICAgICAgIHZhciB0aGF0ID0gdGhpczsKCiAgICAgICAgLyoqCiAgICAgICAgICogU2lkZS1lZmZlY3QgRnJlZSBIZWxwZXIgTWV0aG9kcwogICAgICAgICAqKi8KCiAgICAgICAgdmFyIGlzUHJvcGVydHlEZWZpbmVkID0gZnVuY3Rpb24gKGtleSwgY29uZmlnKSB7CiAgICAgICAgICByZXR1cm4gYW5ndWxhci5pc09iamVjdChjb25maWcpICYmIGFuZ3VsYXIuaXNEZWZpbmVkKGNvbmZpZ1trZXldKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgaXNQcm9wZXJ0eVNldFRvID0gZnVuY3Rpb24gKGtleSwgY29uZmlnLCB2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIGlzUHJvcGVydHlEZWZpbmVkKGtleSwgY29uZmlnKSAmJiBjb25maWdba2V5XSA9PT0gdmFsdWU7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGdlbmVyYXRlQ29tbWFuZE5hbWUgPSBmdW5jdGlvbiAoY29tbWFuZE5hbWUsIGNvbmZpZykgewogICAgICAgICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcoY29uZmlnKSkgewogICAgICAgICAgICByZXR1cm4gY29uZmlnICsgJy4nICsgY29tbWFuZE5hbWU7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gaXNQcm9wZXJ0eURlZmluZWQoJ25hbWUnLCBjb25maWcpID8gKGNvbmZpZy5uYW1lICsgJy4nICsgY29tbWFuZE5hbWUpIDogY29tbWFuZE5hbWU7CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICAvLyBUcnkgdG8gcmVhZCByb3V0ZSBjb25maWd1cmF0aW9uIGFuZCBsb2cgd2FybmluZyBpZiBub3QgcG9zc2libGUKICAgICAgICB2YXIgJHJvdXRlID0ge307CiAgICAgICAgaWYgKHJlYWRGcm9tUm91dGUpIHsKICAgICAgICAgIGlmICghJGluamVjdG9yLmhhcygnJHJvdXRlJykpIHsKICAgICAgICAgICAgJGxvZy53YXJuKCckcm91dGUgc2VydmljZSBpcyBub3QgYXZhaWxhYmxlLiBNYWtlIHN1cmUgeW91IGhhdmUgaW5jbHVkZWQgbmctcm91dGUgaW4geW91ciBhcHBsaWNhdGlvbiBkZXBlbmRlbmNpZXMuJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkcm91dGUgPSAkaW5qZWN0b3IuZ2V0KCckcm91dGUnKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEdldCB1cmwgZm9yIGN1cnJlbnQgcGFnZSAKICAgICAgICB2YXIgZ2V0VXJsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gVXNpbmcgbmdSb3V0ZSBwcm92aWRlZCB0cmFja2luZyB1cmxzCiAgICAgICAgICBpZiAocmVhZEZyb21Sb3V0ZSAmJiAkcm91dGUuY3VycmVudCAmJiAoJ3BhZ2VUcmFjaycgaW4gJHJvdXRlLmN1cnJlbnQpKSB7CiAgICAgICAgICAgIHJldHVybiAkcm91dGUuY3VycmVudC5wYWdlVHJhY2s7CiAgICAgICAgICB9CiAgICAgICAgICAgCiAgICAgICAgICAvLyBPdGhlcndpc2UgZ28gdGhlIG9sZCB3YXkKICAgICAgICAgIHZhciB1cmwgPSB0cmFja1VybFBhcmFtcyA/ICRsb2NhdGlvbi51cmwoKSA6ICRsb2NhdGlvbi5wYXRoKCk7IAogICAgICAgICAgcmV0dXJuIHJlbW92ZVJlZ0V4cCA/IHVybC5yZXBsYWNlKHJlbW92ZVJlZ0V4cCwgJycpIDogdXJsOwogICAgICAgIH07CgogICAgICAgIHZhciBnZXRVdG1QYXJhbXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdXRtVG9DYW1wYWlnblZhciA9IHsKICAgICAgICAgICAgdXRtX3NvdXJjZTogJ2NhbXBhaWduU291cmNlJywKICAgICAgICAgICAgdXRtX21lZGl1bTogJ2NhbXBhaWduTWVkaXVtJywKICAgICAgICAgICAgdXRtX3Rlcm06ICdjYW1wYWlnblRlcm0nLAogICAgICAgICAgICB1dG1fY29udGVudDogJ2NhbXBhaWduQ29udGVudCcsCiAgICAgICAgICAgIHV0bV9jYW1wYWlnbjogJ2NhbXBhaWduTmFtZScKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgb2JqZWN0ID0ge307CgogICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRsb2NhdGlvbi5zZWFyY2goKSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHsKICAgICAgICAgICAgdmFyIGNhbXBhaWduVmFyID0gdXRtVG9DYW1wYWlnblZhcltrZXldOwoKICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGNhbXBhaWduVmFyKSkgewogICAgICAgICAgICAgIG9iamVjdFtjYW1wYWlnblZhcl0gPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBnZXQgQWN0aW9uRmllbGRPYmplY3QKICAgICAgICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI2FjdGlvbi1kYXRhCiAgICAgICAgICogQHBhcmFtIGlkCiAgICAgICAgICogQHBhcmFtIGFmZmxpYXRpb24KICAgICAgICAgKiBAcGFyYW0gcmV2ZW51ZQogICAgICAgICAqIEBwYXJhbSB0YXgKICAgICAgICAgKiBAcGFyYW0gc2hpcHBpbmcKICAgICAgICAgKiBAcGFyYW0gY291cG9uCiAgICAgICAgICogQHBhcmFtIGxpc3QKICAgICAgICAgKiBAcGFyYW0gc3RlcAogICAgICAgICAqIEBwYXJhbSBvcHRpb24KICAgICAgICAgKi8KICAgICAgICB2YXIgZ2V0QWN0aW9uRmllbGRPYmplY3QgPSBmdW5jdGlvbiAoaWQsIGFmZmlsaWF0aW9uLCByZXZlbnVlLCB0YXgsIHNoaXBwaW5nLCBjb3Vwb24sIGxpc3QsIHN0ZXAsIG9wdGlvbikgewogICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgaWYgKGlkKSB7IG9iai5pZCA9IGlkOyB9CiAgICAgICAgICBpZiAoYWZmaWxpYXRpb24pIHsgb2JqLmFmZmlsaWF0aW9uID0gYWZmaWxpYXRpb247IH0KICAgICAgICAgIGlmIChyZXZlbnVlKSB7IG9iai5yZXZlbnVlID0gcmV2ZW51ZTsgfQogICAgICAgICAgaWYgKHRheCkgeyBvYmoudGF4ID0gdGF4OyB9CiAgICAgICAgICBpZiAoc2hpcHBpbmcpIHsgb2JqLnNoaXBwaW5nID0gc2hpcHBpbmc7IH0KICAgICAgICAgIGlmIChjb3Vwb24pIHsgb2JqLmNvdXBvbiA9IGNvdXBvbjsgfQogICAgICAgICAgaWYgKGxpc3QpIHsgb2JqLmxpc3QgPSBsaXN0OyB9CiAgICAgICAgICBpZiAoc3RlcCkgeyBvYmouc3RlcCA9IHN0ZXA7IH0KICAgICAgICAgIGlmIChvcHRpb24pIHsgb2JqLm9wdGlvbiA9IG9wdGlvbjsgfQogICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBQcml2YXRlIE1ldGhvZHMKICAgICAgICAgKi8KCiAgICAgICAgdmFyIF9nZXRQcm90b2NvbCA9IGZ1bmN0aW9uIChodHRwUG9zdGZpeCwgaHR0cHNQb3N0Zml4KSB7CiAgICAgICAgICB2YXIgcHJvdG9jb2wgPSAnJywKICAgICAgICAgICAgICBpc1NzbEVuYWJsZWQgPSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicsCiAgICAgICAgICAgICAgaXNDaHJvbWVFeHRlbnNpb24gPSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2Nocm9tZS1leHRlbnNpb246JywKICAgICAgICAgICAgICBpc0h5YnJpZEFwcGxpY2F0aW9uID0gYW5hbHl0aWNzSlMgPT09IHRydWUgJiYgaHlicmlkTW9iaWxlU3VwcG9ydCA9PT0gdHJ1ZTsKICAgICAgICAgIGh0dHBQb3N0Zml4ID0gYW5ndWxhci5pc1N0cmluZyhodHRwUG9zdGZpeCkgPyBodHRwUG9zdGZpeCA6ICcnOwogICAgICAgICAgaHR0cHNQb3N0Zml4ID0gYW5ndWxhci5pc1N0cmluZyhodHRwc1Bvc3RmaXgpID8gaHR0cHNQb3N0Zml4IDogJyc7CiAgICAgICAgICBpZiAoaHR0cFBvc3RmaXggIT09ICcnKSB7CiAgICAgICAgICAgIHByb3RvY29sID0gJ2h0dHA6JyArIGh0dHBQb3N0Zml4OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzQ2hyb21lRXh0ZW5zaW9uIHx8IGlzSHlicmlkQXBwbGljYXRpb24gfHwgKGlzU3NsRW5hYmxlZCAmJiBodHRwc1Bvc3RmaXggIT09ICcnKSkgewogICAgICAgICAgICBwcm90b2NvbCA9ICdodHRwczonICsgaHR0cHNQb3N0Zml4OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHByb3RvY29sOwogICAgICAgIH07CgogICAgICAgIHZhciBfZ2FKcyA9IGZ1bmN0aW9uIChmbikgewogICAgICAgICAgaWYgKCFhbmFseXRpY3NKUyAmJiAkd2luZG93Ll9nYXEgJiYgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGZuKCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdmFyIF9nYXEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgICAgICAgICBpZiAob2ZmbGluZU1vZGUgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhhdC5vZmZsaW5lUXVldWUucHVzaChbX2dhcSwgYXJnc10pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoISR3aW5kb3cuX2dhcSkgewogICAgICAgICAgICAkd2luZG93Ll9nYXEgPSBbXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChsb2dBbGxDYWxscyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGF0Ll9sb2cuYXBwbHkodGhhdCwgYXJncyk7CiAgICAgICAgICB9CiAgICAgICAgICAkd2luZG93Ll9nYXEucHVzaChhcmdzKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgX2FuYWx5dGljc0pzID0gZnVuY3Rpb24gKGZuKSB7CiAgICAgICAgICBpZiAoYW5hbHl0aWNzSlMgJiYgJHdpbmRvdy5nYSAmJiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgZm4oKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2YXIgX2dhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICAgICAgaWYgKG9mZmxpbmVNb2RlID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoYXQub2ZmbGluZVF1ZXVlLnB1c2goW19nYSwgYXJnc10pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZW9mICR3aW5kb3cuZ2EgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgdGhhdC5fbG9nKCd3YXJuJywgJ2dhIGZ1bmN0aW9uIG5vdCBzZXQgb24gd2luZG93Jyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChsb2dBbGxDYWxscyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGF0Ll9sb2cuYXBwbHkodGhhdCwgYXJncyk7CiAgICAgICAgICB9CiAgICAgICAgICAkd2luZG93LmdhLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgICAgIH07CgogICAgICAgIHZhciBfZ2FNdWx0aXBsZVRyYWNrZXJzID0gZnVuY3Rpb24gKGluY2x1ZGVGbikgewogICAgICAgICAgLy8gRHJvcCB0aGUgaW5jbHVkZUZuIGZyb20gdGhlIGFyZ3VtZW50cyBhbmQgcHJlc2VydmUgdGhlIG9yaWdpbmFsIGNvbW1hbmQgbmFtZQogICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLAogICAgICAgICAgICAgIGNvbW1hbmROYW1lID0gYXJnc1swXSwKICAgICAgICAgICAgICB0cmFja2VycyA9IFtdOwogICAgICAgICAgaWYgKHR5cGVvZiBpbmNsdWRlRm4gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgYWNjb3VudHMuZm9yRWFjaChmdW5jdGlvbiAoYWNjb3VudCkgewogICAgICAgICAgICAgIGlmIChpbmNsdWRlRm4oYWNjb3VudCkpIHsKICAgICAgICAgICAgICAgIHRyYWNrZXJzLnB1c2goYWNjb3VudCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIE5vIGluY2x1ZGUgZnVuY3Rpb24gaW5kaWNhdGVzIHRoYXQgYWxsIGFjY291bnRzIGFyZSB0byBiZSB1c2VkCiAgICAgICAgICAgIHRyYWNrZXJzID0gYWNjb3VudHM7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gVG8gcHJlc2VydmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZmFsbGJhY2sgdG8gX2dhIG1ldGhvZCBpZiBubyBhY2NvdW50CiAgICAgICAgICAvLyBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgaW5jbHVkZUZuLiBUaGlzIHByZXNlcnZlcyBleGlzdGluZyBiZWhhdmlvcnMgYnkKICAgICAgICAgIC8vIHBlcmZvcm1pbmcgdGhlIHNpbmdsZSB0cmFja2VyIG9wZXJhdGlvbi4KICAgICAgICAgIGlmICh0cmFja2Vycy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgX2dhLmFwcGx5KHRoYXQsIGFyZ3MpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdHJhY2tlcnMuZm9yRWFjaChmdW5jdGlvbiAodHJhY2tlcikgewogICAgICAgICAgICAvLyBDaGVjayB0cmFja2VyICdzZWxlY3QnIGZ1bmN0aW9uLCBpZiBpdCBleGlzdHMsIGZvciB3aGV0aGVyIHRoZSB0cmFja2VyIHNob3VsZCBiZSB1c2VkIHdpdGggdGhlIGN1cnJlbnQgY29tbWFuZC4KICAgICAgICAgICAgLy8gSWYgdGhlICdzZWxlY3QnIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UgdGhlbiB0aGUgdHJhY2tlciB3aWxsIG5vdCBiZSB1c2VkIHdpdGggdGhlIGN1cnJlbnQgY29tbWFuZC4KICAgICAgICAgICAgaWYgKGlzUHJvcGVydHlEZWZpbmVkKCdzZWxlY3QnLCB0cmFja2VyKSAmJiB0eXBlb2YgdHJhY2tlci5zZWxlY3QgPT09ICdmdW5jdGlvbicgJiYgIXRyYWNrZXIuc2VsZWN0KGFyZ3MpKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFyZ3NbMF0gPSBnZW5lcmF0ZUNvbW1hbmROYW1lKGNvbW1hbmROYW1lLCB0cmFja2VyKTsKICAgICAgICAgICAgX2dhLmFwcGx5KHRoYXQsIGFyZ3MpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5fbG9nID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChhcmdzWzBdKSB7CiAgICAgICAgICAgICAgICBjYXNlICdkZWJ1Zyc6CiAgICAgICAgICAgICAgICBjYXNlICdlcnJvcic6CiAgICAgICAgICAgICAgICBjYXNlICdpbmZvJzoKICAgICAgICAgICAgICAgIGNhc2UgJ2xvZyc6CiAgICAgICAgICAgICAgICBjYXNlICd3YXJuJzoKICAgICAgICAgICAgICAgICAgJGxvZ1thcmdzWzBdXShhcmdzLnNsaWNlKDEpKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoYXQubG9nLnB1c2goYXJncyk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgLyogREVQUkVDQVRFRCAqLwogICAgICAgIHRoaXMuX2NyZWF0ZVNjcmlwdFRhZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoYXQuX3JlZ2lzdGVyU2NyaXB0VGFncygpOwogICAgICAgICAgdGhhdC5fcmVnaXN0ZXJUcmFja2VycygpOwogICAgICAgIH07CgogICAgICAgIC8qIERFUFJFQ0FURUQgKi8KICAgICAgICB0aGlzLl9jcmVhdGVBbmFseXRpY3NTY3JpcHRUYWcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGF0Ll9yZWdpc3RlclNjcmlwdFRhZ3MoKTsKICAgICAgICAgIHRoYXQuX3JlZ2lzdGVyVHJhY2tlcnMoKTsKICAgICAgICB9OwoKICAgICAgICB0aGlzLl9yZWdpc3RlclNjcmlwdFRhZ3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZG9jdW1lbnQgPSAkZG9jdW1lbnRbMF0sCiAgICAgICAgICAgICAgcHJvdG9jb2wgPSBfZ2V0UHJvdG9jb2woKSwKICAgICAgICAgICAgICBzY3JpcHRTb3VyY2U7CgogICAgICAgICAgaWYgKGNyZWF0ZWQgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhhdC5fbG9nKCd3YXJuJywgJ1NjcmlwdCB0YWdzIGFscmVhZHkgY3JlYXRlZCcpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGRpc2FibGVBbmFseXRpY3MgPT09IHRydWUpIHsKICAgICAgICAgICAgYWNjb3VudHMuZm9yRWFjaChmdW5jdGlvbiAodHJhY2tlck9iaikgewogICAgICAgICAgICAgIHRoYXQuX2xvZygnaW5mbycsICdBbmFseXRpY3MgZGlzYWJsZWQ6ICcgKyB0cmFja2VyT2JqLnRyYWNrZXIpOwogICAgICAgICAgICAgICR3aW5kb3dbJ2dhLWRpc2FibGUtJyArIHRyYWNrZXJPYmoudHJhY2tlcl0gPSB0cnVlOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLwogICAgICAgICAgLy8gVW5pdmVyc2FsIEFuYWx5dGljcwogICAgICAgICAgLy8KICAgICAgICAgIGlmIChhbmFseXRpY3NKUyA9PT0gdHJ1ZSkgewogICAgICAgICAgICBzY3JpcHRTb3VyY2UgPSBwcm90b2NvbCArICcvL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS8nICsgKGRlYnVnTW9kZSA/ICdhbmFseXRpY3NfZGVidWcuanMnIDogJ2FuYWx5dGljcy5qcycpOwogICAgICAgICAgICBpZiAodGVzdE1vZGUgIT09IHRydWUpIHsKICAgICAgICAgICAgICAvLyBJZiBub3QgaW4gdGVzdCBtb2RlIGluamVjdCB0aGUgR29vZ2xlIEFuYWx5dGljcyB0YWcKICAgICAgICAgICAgICAoZnVuY3Rpb24gKGkscyxvLGcscixhLG0pe2lbJ0dvb2dsZUFuYWx5dGljc09iamVjdCddPXI7aVtyXT1pW3JdfHxmdW5jdGlvbiAoKXsKICAgICAgICAgICAgICAgIChpW3JdLnE9aVtyXS5xfHxbXSkucHVzaChhcmd1bWVudHMpO30saVtyXS5sPTEqbmV3IERhdGUoKTthPXMuY3JlYXRlRWxlbWVudChvKSwKICAgICAgICAgICAgICAgIG09cy5nZXRFbGVtZW50c0J5VGFnTmFtZShvKVswXTthLmFzeW5jPTE7YS5zcmM9ZzttLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsbSk7CiAgICAgICAgICAgICAgfSkod2luZG93LGRvY3VtZW50LCdzY3JpcHQnLHNjcmlwdFNvdXJjZSwnZ2EnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mICR3aW5kb3cuZ2EgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIC8vIEluIHRlc3QgbW9kZSBjcmVhdGUgYSBnYSBmdW5jdGlvbiBpZiBub25lIGV4aXN0cyB0aGF0IGlzIGEgbm9vcCBzaW5rLgogICAgICAgICAgICAgICAgJHdpbmRvdy5nYSA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBMb2cgc2NyaXB0IGluamVjdGlvbi4KICAgICAgICAgICAgICB0aGF0Ll9sb2coJ2luamVjdCcsIHNjcmlwdFNvdXJjZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0cmFjZURlYnVnZ2luZ01vZGUpIHsKICAgICAgICAgICAgICAkd2luZG93LmdhX2RlYnVnID0geyB0cmFjZTogdHJ1ZSB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZXhwZXJpbWVudElkKSB7CiAgICAgICAgICAgICAgdmFyIGV4cFNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpLAogICAgICAgICAgICAgICAgICBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOwogICAgICAgICAgICAgIGV4cFNjcmlwdC5zcmMgPSBwcm90b2NvbCArICcvL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9jeC9hcGkuanM/ZXhwZXJpbWVudD0nICsgZXhwZXJpbWVudElkOwogICAgICAgICAgICAgIHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZXhwU2NyaXB0LCBzKTsKICAgICAgICAgICAgfQogICAgICAgICAgLy8KICAgICAgICAgIC8vIENsYXNzaWMgQW5hbHl0aWNzCiAgICAgICAgICAvLwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2NyaXB0U291cmNlID0gX2dldFByb3RvY29sKCcvL3d3dycsICcvL3NzbCcpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7CiAgICAgICAgICAgIGlmIChkaXNwbGF5RmVhdHVyZXMgPT09IHRydWUpIHsKICAgICAgICAgICAgICBzY3JpcHRTb3VyY2UgPSBwcm90b2NvbCArICcvL3N0YXRzLmcuZG91YmxlY2xpY2submV0L2RjLmpzJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRlc3RNb2RlICE9PSB0cnVlKSB7CiAgICAgICAgICAgICAgLy8gSWYgbm90IGluIHRlc3QgbW9kZSBpbmplY3QgdGhlIEdvb2dsZSBBbmFseXRpY3MgdGFnCiAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBnYS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IGdhLmFzeW5jID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGdhLnNyYyA9IHNjcmlwdFNvdXJjZTsKICAgICAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTsKICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIExvZyB0aGUgc291cmNlIGxvY2F0aW9uIGZvciB2YWxpZGF0aW9uCiAgICAgICAgICAgICAgdGhhdC5fbG9nKCdpbmplY3QnLCBzY3JpcHRTb3VyY2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgY3JlYXRlZCA9IHRydWU7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9OwoKICAgICAgICB0aGlzLl9yZWdpc3RlclRyYWNrZXJzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCFhY2NvdW50cyB8fCBhY2NvdW50cy5sZW5ndGggPCAxKSB7CiAgICAgICAgICAgIHRoYXQuX2xvZygnd2FybicsICdObyBhY2NvdW50cyB0byByZWdpc3RlcicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgLy8KICAgICAgICAgIC8vIFVuaXZlcnNhbCBBbmFseXRpY3MKICAgICAgICAgIC8vCiAgICAgICAgICBpZiAoYW5hbHl0aWNzSlMgPT09IHRydWUpIHsKICAgICAgICAgICAgYWNjb3VudHMuZm9yRWFjaChmdW5jdGlvbiAodHJhY2tlck9iaikgewogICAgICAgICAgICAgIHRyYWNrZXJPYmouY3Jvc3NEb21haW5MaW5rZXIgPSBpc1Byb3BlcnR5RGVmaW5lZCgnY3Jvc3NEb21haW5MaW5rZXInLCB0cmFja2VyT2JqKSA/IHRyYWNrZXJPYmouY3Jvc3NEb21haW5MaW5rZXIgOiBjcm9zc0RvbWFpbkxpbmtlcjsKICAgICAgICAgICAgICB0cmFja2VyT2JqLmNyb3NzTGlua0RvbWFpbnMgPSBpc1Byb3BlcnR5RGVmaW5lZCgnY3Jvc3NMaW5rRG9tYWlucycsIHRyYWNrZXJPYmopID8gdHJhY2tlck9iai5jcm9zc0xpbmtEb21haW5zIDogY3Jvc3NMaW5rRG9tYWluczsKICAgICAgICAgICAgICB0cmFja2VyT2JqLmRpc3BsYXlGZWF0dXJlcyA9IGlzUHJvcGVydHlEZWZpbmVkKCdkaXNwbGF5RmVhdHVyZXMnLCB0cmFja2VyT2JqKSA/IHRyYWNrZXJPYmouZGlzcGxheUZlYXR1cmVzIDogZGlzcGxheUZlYXR1cmVzOwogICAgICAgICAgICAgIHRyYWNrZXJPYmouZW5oYW5jZWRMaW5rQXR0cmlidXRpb24gPSBpc1Byb3BlcnR5RGVmaW5lZCgnZW5oYW5jZWRMaW5rQXR0cmlidXRpb24nLCB0cmFja2VyT2JqKSA/IHRyYWNrZXJPYmouZW5oYW5jZWRMaW5rQXR0cmlidXRpb24gOiBlbmhhbmNlZExpbmtBdHRyaWJ1dGlvbjsKICAgICAgICAgICAgICB0cmFja2VyT2JqLnNldCA9IGlzUHJvcGVydHlEZWZpbmVkKCdzZXQnLCB0cmFja2VyT2JqKSA/IHRyYWNrZXJPYmouc2V0IDoge307CiAgICAgICAgICAgICAgdHJhY2tlck9iai50cmFja0Vjb21tZXJjZSA9IGlzUHJvcGVydHlEZWZpbmVkKCd0cmFja0Vjb21tZXJjZScsIHRyYWNrZXJPYmopID8gdHJhY2tlck9iai50cmFja0Vjb21tZXJjZSA6IGVjb21tZXJjZTsKICAgICAgICAgICAgICB0cmFja2VyT2JqLnRyYWNrRXZlbnQgPSBpc1Byb3BlcnR5RGVmaW5lZCgndHJhY2tFdmVudCcsIHRyYWNrZXJPYmopID8gdHJhY2tlck9iai50cmFja0V2ZW50IDogZmFsc2U7CgogICAgICAgICAgICAgIC8vIExvZ2ljIHRvIGNob29zZSB0aGUgYWNjb3VudCBmaWVsZHMgdG8gYmUgdXNlZC4KICAgICAgICAgICAgICAvLyBjb29raWVDb25maWcgaXMgYmVpbmcgZGVwcmVjYXRlZCBmb3IgYSB0cmFja2VyIHNwZWNpZmljIHByb3BlcnR5OiBmaWVsZHMuCiAgICAgICAgICAgICAgdmFyIGZpZWxkcyA9IHt9OwogICAgICAgICAgICAgIGlmIChpc1Byb3BlcnR5RGVmaW5lZCgnZmllbGRzJywgdHJhY2tlck9iaikpIHsKICAgICAgICAgICAgICAgIGZpZWxkcyA9IHRyYWNrZXJPYmouZmllbGRzOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNQcm9wZXJ0eURlZmluZWQoJ2Nvb2tpZUNvbmZpZycsIHRyYWNrZXJPYmopKSB7CiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyh0cmFja2VyT2JqLmNvb2tpZUNvbmZpZykpIHsKICAgICAgICAgICAgICAgICAgZmllbGRzLmNvb2tpZURvbWFpbiA9IHRyYWNrZXJPYmouY29va2llQ29uZmlnOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZmllbGRzID0gdHJhY2tlck9iai5jb29raWVDb25maWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzU3RyaW5nKGNvb2tpZUNvbmZpZykpIHsKICAgICAgICAgICAgICAgIGZpZWxkcy5jb29raWVEb21haW4gPSBjb29raWVDb25maWc7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb29raWVDb25maWcpIHsKICAgICAgICAgICAgICAgIGZpZWxkcyA9IGNvb2tpZUNvbmZpZzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHRyYWNrZXJPYmouY3Jvc3NEb21haW5MaW5rZXIgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIGZpZWxkcy5hbGxvd0xpbmtlciA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChpc1Byb3BlcnR5RGVmaW5lZCgnbmFtZScsIHRyYWNrZXJPYmopKSB7CiAgICAgICAgICAgICAgICBmaWVsZHMubmFtZSA9IHRyYWNrZXJPYmoubmFtZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdHJhY2tlck9iai5maWVsZHMgPSBmaWVsZHM7CgogICAgICAgICAgICAgIF9nYSgnY3JlYXRlJywgdHJhY2tlck9iai50cmFja2VyLCB0cmFja2VyT2JqLmZpZWxkcyk7CgogICAgICAgICAgICAgIC8vIEh5YnJpZCBtb2JpbGUgYXBwbGljYXRpb24gc3VwcG9ydAogICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy90YXNrcwogICAgICAgICAgICAgIGlmIChoeWJyaWRNb2JpbGVTdXBwb3J0ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBfZ2EoZ2VuZXJhdGVDb21tYW5kTmFtZSgnc2V0JywgdHJhY2tlck9iaiksICdjaGVja1Byb3RvY29sVGFzaycsIG51bGwpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gU2VuZCBhbGwgY3VzdG9tIHNldCBjb21tYW5kcyBmcm9tIHRoZSB0cmFja2VyT2JqLnNldCBwcm9wZXJ0eQogICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0cmFja2VyT2JqLnNldCkgewogICAgICAgICAgICAgICAgaWYgKHRyYWNrZXJPYmouc2V0Lmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgICAgX2dhKGdlbmVyYXRlQ29tbWFuZE5hbWUoJ3NldCcsIHRyYWNrZXJPYmopLCBrZXksIHRyYWNrZXJPYmouc2V0W2tleV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHRyYWNrZXJPYmouY3Jvc3NEb21haW5MaW5rZXIgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIF9nYShnZW5lcmF0ZUNvbW1hbmROYW1lKCdyZXF1aXJlJywgdHJhY2tlck9iaiksICdsaW5rZXInKTsKICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0cmFja2VyT2JqLmNyb3NzTGlua0RvbWFpbnMpKSB7CiAgICAgICAgICAgICAgICAgIF9nYShnZW5lcmF0ZUNvbW1hbmROYW1lKCdsaW5rZXI6YXV0b0xpbmsnLCB0cmFja2VyT2JqKSwgdHJhY2tlck9iai5jcm9zc0xpbmtEb21haW5zKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh0cmFja2VyT2JqLmRpc3BsYXlGZWF0dXJlcykgewogICAgICAgICAgICAgICAgX2dhKGdlbmVyYXRlQ29tbWFuZE5hbWUoJ3JlcXVpcmUnLCB0cmFja2VyT2JqKSwgJ2Rpc3BsYXlmZWF0dXJlcycpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHRyYWNrZXJPYmoudHJhY2tFY29tbWVyY2UpIHsKICAgICAgICAgICAgICAgIGlmICghZW5oYW5jZWRFY29tbWVyY2UpIHsKICAgICAgICAgICAgICAgICAgX2dhKGdlbmVyYXRlQ29tbWFuZE5hbWUoJ3JlcXVpcmUnLCB0cmFja2VyT2JqKSwgJ2Vjb21tZXJjZScpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX2dhKGdlbmVyYXRlQ29tbWFuZE5hbWUoJ3JlcXVpcmUnLCB0cmFja2VyT2JqKSwgJ2VjJyk7CiAgICAgICAgICAgICAgICAgIF9nYShnZW5lcmF0ZUNvbW1hbmROYW1lKCdzZXQnLCB0cmFja2VyT2JqKSwgJyZjdScsIGN1cnJlbmN5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh0cmFja2VyT2JqLmVuaGFuY2VkTGlua0F0dHJpYnV0aW9uKSB7CiAgICAgICAgICAgICAgICBfZ2EoZ2VuZXJhdGVDb21tYW5kTmFtZSgncmVxdWlyZScsIHRyYWNrZXJPYmopLCAnbGlua2lkJyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodHJhY2tSb3V0ZXMgJiYgIWlnbm9yZUZpcnN0UGFnZUxvYWQpIHsKICAgICAgICAgICAgICAgIF9nYShnZW5lcmF0ZUNvbW1hbmROYW1lKCdzZW5kJywgdHJhY2tlck9iaiksICdwYWdldmlldycsIHRyYWNrUHJlZml4ICsgZ2V0VXJsKCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAvLwogICAgICAgICAgLy8gQ2xhc3NpYyBBbmFseXRpY3MKICAgICAgICAgIC8vCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoYWNjb3VudHMubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIHRoYXQuX2xvZygnd2FybicsICdNdWx0aXBsZSB0cmFja2VycyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIGdhLmpzLiBVc2luZyBmaXJzdCB0cmFja2VyIG9ubHknKTsKICAgICAgICAgICAgICBhY2NvdW50cyA9IGFjY291bnRzLnNsaWNlKDAsIDEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfZ2FxKCdfc2V0QWNjb3VudCcsIGFjY291bnRzWzBdLnRyYWNrZXIpOwogICAgICAgICAgICBpZihkb21haW5OYW1lKSB7CiAgICAgICAgICAgICAgX2dhcSgnX3NldERvbWFpbk5hbWUnLCBkb21haW5OYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZW5oYW5jZWRMaW5rQXR0cmlidXRpb24pIHsKICAgICAgICAgICAgICBfZ2FxKCdfcmVxdWlyZScsICdpbnBhZ2VfbGlua2lkJywgJy8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL3BsdWdpbnMvZ2EvaW5wYWdlX2xpbmtpZC5qcycpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0cmFja1JvdXRlcyAmJiAhaWdub3JlRmlyc3RQYWdlTG9hZCkgewogICAgICAgICAgICAgIGlmIChyZW1vdmVSZWdFeHApIHsKICAgICAgICAgICAgICAgIF9nYXEoJ190cmFja1BhZ2V2aWV3JywgZ2V0VXJsKCkpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfZ2FxKCdfdHJhY2tQYWdldmlldycpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH07CgogICAgICAgIHRoaXMuX2Vjb21tZXJjZUVuYWJsZWQgPSBmdW5jdGlvbiAod2FybiwgY29tbWFuZCkgewogICAgICAgICAgdmFyIHJlc3VsdCA9IGVjb21tZXJjZSAmJiAhZW5oYW5jZWRFY29tbWVyY2U7CiAgICAgICAgICBpZiAod2FybiA9PT0gdHJ1ZSAmJiByZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIGlmIChlY29tbWVyY2UgJiYgZW5oYW5jZWRFY29tbWVyY2UpIHsKICAgICAgICAgICAgICB0aGF0Ll9sb2coJ3dhcm4nLCBjb21tYW5kICsgJyBpcyBub3QgYXZhaWxhYmxlIHdoZW4gRW5oYW5jZWQgRWNvbW1lcmNlIGlzIGVuYWJsZWQgd2l0aCBhbmFseXRpY3MuanMnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGF0Ll9sb2coJ3dhcm4nLCAnRWNvbW1lcmNlIG11c3QgYmUgZW5hYmxlZCB0byB1c2UgJyArIGNvbW1hbmQgKyAnIHdpdGggYW5hbHl0aWNzLmpzJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5fZW5oYW5jZWRFY29tbWVyY2VFbmFibGVkID0gZnVuY3Rpb24gKHdhcm4sIGNvbW1hbmQpIHsKICAgICAgICAgIHZhciByZXN1bHQgPSBlY29tbWVyY2UgJiYgZW5oYW5jZWRFY29tbWVyY2U7CiAgICAgICAgICBpZiAod2FybiA9PT0gdHJ1ZSAmJiByZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRoYXQuX2xvZygnd2FybicsICdFbmhhbmNlZCBFY29tbWVyY2UgbXVzdCBiZSBlbmFibGVkIHRvIHVzZSAnICsgY29tbWFuZCArICcgd2l0aCBhbmFseXRpY3MuanMnKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVHJhY2sgcGFnZQogICAgICAgICBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2Fqcy8KICAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL3BhZ2VzCiAgICAgICAgICogQHBhcmFtIHVybAogICAgICAgICAqIEBwYXJhbSB0aXRsZQogICAgICAgICAqIEBwYXJhbSBjdXN0b20KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX3RyYWNrUGFnZSA9IGZ1bmN0aW9uICh1cmwsIHRpdGxlLCBjdXN0b20pIHsKICAgICAgICAgIHVybCA9IHVybCA/IHVybCA6IGdldFVybCgpOwogICAgICAgICAgdGl0bGUgPSB0aXRsZSA/IHRpdGxlIDogJGRvY3VtZW50WzBdLnRpdGxlOwogICAgICAgICAgX2dhSnMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczMjIyODgvaG93LWNhbi1pLXNldC1hLXBhZ2UtdGl0bGUtd2l0aC1nb29nbGUtYW5hbHl0aWNzCiAgICAgICAgICAgIF9nYXEoJ19zZXQnLCAndGl0bGUnLCB0aXRsZSk7CiAgICAgICAgICAgIF9nYXEoJ190cmFja1BhZ2V2aWV3JywgKHRyYWNrUHJlZml4ICsgdXJsKSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIF9hbmFseXRpY3NKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBvcHRfZmllbGRPYmplY3QgPSB7CiAgICAgICAgICAgICAgJ3BhZ2UnOiB0cmFja1ByZWZpeCArIHVybCwKICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZQogICAgICAgICAgICB9OwogICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChvcHRfZmllbGRPYmplY3QsIGdldFV0bVBhcmFtcygpKTsKICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNPYmplY3QoY3VzdG9tKSkgewogICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG9wdF9maWVsZE9iamVjdCwgY3VzdG9tKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfZ2FNdWx0aXBsZVRyYWNrZXJzKHVuZGVmaW5lZCwgJ3NlbmQnLCAncGFnZXZpZXcnLCBvcHRfZmllbGRPYmplY3QpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVHJhY2sgZXZlbnQKICAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhanMvZXZlbnRUcmFja2VyR3VpZGUKICAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2V2ZW50cwogICAgICAgICAqIEBwYXJhbSBjYXRlZ29yeQogICAgICAgICAqIEBwYXJhbSBhY3Rpb24KICAgICAgICAgKiBAcGFyYW0gbGFiZWwKICAgICAgICAgKiBAcGFyYW0gdmFsdWUKICAgICAgICAgKiBAcGFyYW0gbm9uaW50ZXJhY3Rpb24KICAgICAgICAgKiBAcGFyYW0gY3VzdG9tCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICB0aGlzLl90cmFja0V2ZW50ID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsLCB2YWx1ZSwgbm9uaW50ZXJhY3Rpb24sIGN1c3RvbSkgewogICAgICAgICAgX2dhSnMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfZ2FxKCdfdHJhY2tFdmVudCcsIGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsLCB2YWx1ZSwgISFub25pbnRlcmFjdGlvbik7CiAgICAgICAgICB9KTsKICAgICAgICAgIF9hbmFseXRpY3NKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBvcHRfZmllbGRPYmplY3QgPSB7fTsKICAgICAgICAgICAgdmFyIGluY2x1ZGVGbiA9IGZ1bmN0aW9uICh0cmFja2VyT2JqKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGlzUHJvcGVydHlTZXRUbygndHJhY2tFdmVudCcsIHRyYWNrZXJPYmosIHRydWUpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKG5vbmludGVyYWN0aW9uKSkgewogICAgICAgICAgICAgIG9wdF9maWVsZE9iamVjdC5ub25JbnRlcmFjdGlvbiA9ICEhbm9uaW50ZXJhY3Rpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNPYmplY3QoY3VzdG9tKSkgewogICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG9wdF9maWVsZE9iamVjdCwgY3VzdG9tKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKG9wdF9maWVsZE9iamVjdC5wYWdlKSkgewogICAgICAgICAgICAgIG9wdF9maWVsZE9iamVjdC5wYWdlID0gZ2V0VXJsKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2dhTXVsdGlwbGVUcmFja2VycyhpbmNsdWRlRm4sICdzZW5kJywgJ2V2ZW50JywgY2F0ZWdvcnksIGFjdGlvbiwgbGFiZWwsIHZhbHVlLCBvcHRfZmllbGRPYmplY3QpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQWRkIHRyYW5zYWN0aW9uCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhanMvbWV0aG9kcy9nYUpTQXBpRWNvbW1lcmNlI19nYXQuR0FfVHJhY2tlcl8uX2FkZFRyYW5zCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2Vjb21tZXJjZSNhZGRUcmFucwogICAgICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbklkCiAgICAgICAgICogQHBhcmFtIGFmZmlsaWF0aW9uCiAgICAgICAgICogQHBhcmFtIHRvdGFsCiAgICAgICAgICogQHBhcmFtIHRheAogICAgICAgICAqIEBwYXJhbSBzaGlwcGluZwogICAgICAgICAqIEBwYXJhbSBjaXR5CiAgICAgICAgICogQHBhcmFtIHN0YXRlCiAgICAgICAgICogQHBhcmFtIGNvdW50cnkKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX2FkZFRyYW5zID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uSWQsIGFmZmlsaWF0aW9uLCB0b3RhbCwgdGF4LCBzaGlwcGluZywgY2l0eSwgc3RhdGUsIGNvdW50cnksIGN1cnJlbmN5KSB7CiAgICAgICAgICBfZ2FKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9nYXEoJ19hZGRUcmFucycsIHRyYW5zYWN0aW9uSWQsIGFmZmlsaWF0aW9uLCB0b3RhbCwgdGF4LCBzaGlwcGluZywgY2l0eSwgc3RhdGUsIGNvdW50cnkpOwogICAgICAgICAgfSk7CiAgICAgICAgICBfYW5hbHl0aWNzSnMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodGhhdC5fZWNvbW1lcmNlRW5hYmxlZCh0cnVlLCAnYWRkVHJhbnMnKSkgewogICAgICAgICAgICAgIHZhciBpbmNsdWRlRm4gPSBmdW5jdGlvbiAodHJhY2tlck9iaikgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzUHJvcGVydHlTZXRUbygndHJhY2tFY29tbWVyY2UnLCB0cmFja2VyT2JqLCB0cnVlKTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfZ2FNdWx0aXBsZVRyYWNrZXJzKAogICAgICAgICAgICAgICAgaW5jbHVkZUZuLAogICAgICAgICAgICAgICAgJ2Vjb21tZXJjZTphZGRUcmFuc2FjdGlvbicsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlkOiB0cmFuc2FjdGlvbklkLAogICAgICAgICAgICAgICAgICBhZmZpbGlhdGlvbjogYWZmaWxpYXRpb24sCiAgICAgICAgICAgICAgICAgIHJldmVudWU6IHRvdGFsLAogICAgICAgICAgICAgICAgICB0YXg6IHRheCwKICAgICAgICAgICAgICAgICAgc2hpcHBpbmc6IHNoaXBwaW5nLAogICAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3kgfHwgJ1VTRCcKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBBZGQgaXRlbSB0byB0cmFuc2FjdGlvbgogICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9nYWpzL21ldGhvZHMvZ2FKU0FwaUVjb21tZXJjZSNfZ2F0LkdBX1RyYWNrZXJfLl9hZGRJdGVtCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2Vjb21tZXJjZSNhZGRJdGVtCiAgICAgICAgICogQHBhcmFtIHRyYW5zYWN0aW9uSWQKICAgICAgICAgKiBAcGFyYW0gc2t1CiAgICAgICAgICogQHBhcmFtIG5hbWUKICAgICAgICAgKiBAcGFyYW0gY2F0ZWdvcnkKICAgICAgICAgKiBAcGFyYW0gcHJpY2UKICAgICAgICAgKiBAcGFyYW0gcXVhbnRpdHkKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX2FkZEl0ZW0gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb25JZCwgc2t1LCBuYW1lLCBjYXRlZ29yeSwgcHJpY2UsIHF1YW50aXR5KSB7CiAgICAgICAgICBfZ2FKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9nYXEoJ19hZGRJdGVtJywgdHJhbnNhY3Rpb25JZCwgc2t1LCBuYW1lLCBjYXRlZ29yeSwgcHJpY2UsIHF1YW50aXR5KTsKICAgICAgICAgIH0pOwogICAgICAgICAgX2FuYWx5dGljc0pzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHRoYXQuX2Vjb21tZXJjZUVuYWJsZWQodHJ1ZSwgJ2FkZEl0ZW0nKSkgewogICAgICAgICAgICAgIHZhciBpbmNsdWRlRm4gPSBmdW5jdGlvbiAodHJhY2tlck9iaikgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzUHJvcGVydHlTZXRUbygndHJhY2tFY29tbWVyY2UnLCB0cmFja2VyT2JqLCB0cnVlKTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfZ2FNdWx0aXBsZVRyYWNrZXJzKAogICAgICAgICAgICAgICAgaW5jbHVkZUZuLAogICAgICAgICAgICAgICAgJ2Vjb21tZXJjZTphZGRJdGVtJywKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaWQ6IHRyYW5zYWN0aW9uSWQsCiAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgIHNrdTogc2t1LAogICAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnksCiAgICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZSwKICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVHJhY2sgdHJhbnNhY3Rpb24KICAgICAgICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2Fqcy9tZXRob2RzL2dhSlNBcGlFY29tbWVyY2UjX2dhdC5HQV9UcmFja2VyXy5fdHJhY2tUcmFucwogICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lY29tbWVyY2Ujc2VuZGluZ0RhdGEKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX3RyYWNrVHJhbnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfZ2FKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9nYXEoJ190cmFja1RyYW5zJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIF9hbmFseXRpY3NKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0aGF0Ll9lY29tbWVyY2VFbmFibGVkKHRydWUsICd0cmFja1RyYW5zJykpIHsKICAgICAgICAgICAgICB2YXIgaW5jbHVkZUZuID0gZnVuY3Rpb24gKHRyYWNrZXJPYmopIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc1Byb3BlcnR5U2V0VG8oJ3RyYWNrRWNvbW1lcmNlJywgdHJhY2tlck9iaiwgdHJ1ZSk7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX2dhTXVsdGlwbGVUcmFja2VycyhpbmNsdWRlRm4sICdlY29tbWVyY2U6c2VuZCcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDbGVhciB0cmFuc2FjdGlvbgogICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lY29tbWVyY2UjY2xlYXJpbmdEYXRhCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICB0aGlzLl9jbGVhclRyYW5zID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgX2FuYWx5dGljc0pzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHRoYXQuX2Vjb21tZXJjZUVuYWJsZWQodHJ1ZSwgJ2NsZWFyVHJhbnMnKSkgewogICAgICAgICAgICAgIHZhciBpbmNsdWRlRm4gPSBmdW5jdGlvbiAodHJhY2tlck9iaikgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzUHJvcGVydHlTZXRUbygndHJhY2tFY29tbWVyY2UnLCB0cmFja2VyT2JqLCB0cnVlKTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfZ2FNdWx0aXBsZVRyYWNrZXJzKGluY2x1ZGVGbiwgJ2Vjb21tZXJjZTpjbGVhcicpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmhhbmNlZCBFY29tbWVyY2UKICAgICAgICAgKi8KCiAgICAgICAgLyoqCiAgICAgICAgICogQWRkIFByb2R1Y3QKICAgICAgICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI3Byb2R1Y3QtZGF0YQogICAgICAgICAqIEBwYXJhbSBwcm9kdWN0SWQKICAgICAgICAgKiBAcGFyYW0gbmFtZQogICAgICAgICAqIEBwYXJhbSBjYXRlZ29yeQogICAgICAgICAqIEBwYXJhbSBicmFuZAogICAgICAgICAqIEBwYXJhbSB2YXJpYW50CiAgICAgICAgICogQHBhcmFtIHByaWNlCiAgICAgICAgICogQHBhcmFtIHF1YW50aXR5CiAgICAgICAgICogQHBhcmFtIGNvdXBvbgogICAgICAgICAqIEBwYXJhbSBwb3NpdGlvbgogICAgICAgICAqIEBwYXJhbSBjdXN0b20KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX2FkZFByb2R1Y3QgPSBmdW5jdGlvbiAocHJvZHVjdElkLCBuYW1lLCBjYXRlZ29yeSwgYnJhbmQsIHZhcmlhbnQsIHByaWNlLCBxdWFudGl0eSwgY291cG9uLCBwb3NpdGlvbiwgY3VzdG9tKSB7CiAgICAgICAgICBfZ2FKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9nYXEoJ19hZGRQcm9kdWN0JywgcHJvZHVjdElkLCBuYW1lLCBjYXRlZ29yeSwgYnJhbmQsIHZhcmlhbnQsIHByaWNlLCBxdWFudGl0eSwgY291cG9uLCBwb3NpdGlvbik7CiAgICAgICAgICB9KTsKICAgICAgICAgIF9hbmFseXRpY3NKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0aGF0Ll9lbmhhbmNlZEVjb21tZXJjZUVuYWJsZWQodHJ1ZSwgJ2FkZFByb2R1Y3QnKSkgewogICAgICAgICAgICAgIHZhciBpbmNsdWRlRm4gPSBmdW5jdGlvbiAodHJhY2tlck9iaikgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzUHJvcGVydHlTZXRUbygndHJhY2tFY29tbWVyY2UnLCB0cmFja2VyT2JqLCB0cnVlKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHZhciBkZXRhaWxzID0gewogICAgICAgICAgICAgICAgaWQ6IHByb2R1Y3RJZCwKICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnksCiAgICAgICAgICAgICAgICBicmFuZDogYnJhbmQsCiAgICAgICAgICAgICAgICB2YXJpYW50OiB2YXJpYW50LAogICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlLAogICAgICAgICAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5LAogICAgICAgICAgICAgICAgY291cG9uOiBjb3Vwb24sCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KGN1c3RvbSkpIHsKICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGRldGFpbHMsIGN1c3RvbSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9nYU11bHRpcGxlVHJhY2tlcnMoaW5jbHVkZUZuLCAnZWM6YWRkUHJvZHVjdCcsIGRldGFpbHMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBBZGQgSW1wcmVzc2lvbgogICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjaW1wcmVzc2lvbi1kYXRhCiAgICAgICAgICogQHBhcmFtIGlkCiAgICAgICAgICogQHBhcmFtIG5hbWUKICAgICAgICAgKiBAcGFyYW0gbGlzdAogICAgICAgICAqIEBwYXJhbSBicmFuZAogICAgICAgICAqIEBwYXJhbSBjYXRlZ29yeQogICAgICAgICAqIEBwYXJhbSB2YXJpYW50CiAgICAgICAgICogQHBhcmFtIHBvc2l0aW9uCiAgICAgICAgICogQHBhcmFtIHByaWNlCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICB0aGlzLl9hZGRJbXByZXNzaW9uID0gZnVuY3Rpb24gKGlkLCBuYW1lLCBsaXN0LCBicmFuZCwgY2F0ZWdvcnksIHZhcmlhbnQsIHBvc2l0aW9uLCBwcmljZSl7CiAgICAgICAgICBfZ2FKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9nYXEoJ19hZGRJbXByZXNzaW9uJywgaWQsIG5hbWUsIGxpc3QsIGJyYW5kLCBjYXRlZ29yeSwgdmFyaWFudCwgcG9zaXRpb24sIHByaWNlKTsKICAgICAgICAgIH0pOwogICAgICAgICAgX2FuYWx5dGljc0pzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHRoYXQuX2VuaGFuY2VkRWNvbW1lcmNlRW5hYmxlZCh0cnVlLCAnYWRkSW1wcmVzc2lvbicpKSB7CiAgICAgICAgICAgICAgdmFyIGluY2x1ZGVGbiA9IGZ1bmN0aW9uICh0cmFja2VyT2JqKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNQcm9wZXJ0eVNldFRvKCd0cmFja0Vjb21tZXJjZScsIHRyYWNrZXJPYmosIHRydWUpOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIF9nYU11bHRpcGxlVHJhY2tlcnMoCiAgICAgICAgICAgICAgICBpbmNsdWRlRm4sCiAgICAgICAgICAgICAgICAnZWM6YWRkSW1wcmVzc2lvbicsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LAogICAgICAgICAgICAgICAgICBicmFuZDogYnJhbmQsCiAgICAgICAgICAgICAgICAgIHZhcmlhbnQ6IHZhcmlhbnQsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IGxpc3QsCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQWRkIFByb21vCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZQogICAgICAgICAqIEBwYXJhbSBwcm9kdWN0SWQKICAgICAgICAgKiBAcGFyYW0gbmFtZQogICAgICAgICAqIEBwYXJhbSBjcmVhdGl2ZQogICAgICAgICAqIEBwYXJhbSBwb3NpdGlvbgogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgdGhpcy5fYWRkUHJvbW8gPSBmdW5jdGlvbiAocHJvZHVjdElkLCBuYW1lLCBjcmVhdGl2ZSwgcG9zaXRpb24pIHsKICAgICAgICAgIF9nYUpzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX2dhcSgnX2FkZFByb21vJywgcHJvZHVjdElkLCBuYW1lLCBjcmVhdGl2ZSwgcG9zaXRpb24pOwogICAgICAgICAgfSk7CiAgICAgICAgICBfYW5hbHl0aWNzSnMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodGhhdC5fZW5oYW5jZWRFY29tbWVyY2VFbmFibGVkKHRydWUsICdhZGRQcm9tbycpKSB7CiAgICAgICAgICAgICAgdmFyIGluY2x1ZGVGbiA9IGZ1bmN0aW9uICh0cmFja2VyT2JqKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNQcm9wZXJ0eVNldFRvKCd0cmFja0Vjb21tZXJjZScsIHRyYWNrZXJPYmosIHRydWUpOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIF9nYU11bHRpcGxlVHJhY2tlcnMoCiAgICAgICAgICAgICAgICBpbmNsdWRlRm4sCiAgICAgICAgICAgICAgICAnZWM6YWRkUHJvbW8nLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBpZDogcHJvZHVjdElkLAogICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICBjcmVhdGl2ZTogY3JlYXRpdmUsCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIC8qKgogICAgICAgICAqIFNldCBBY3Rpb24KICAgICAgICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI21lYXN1cmluZy1hY3Rpb25zCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNhY3Rpb24tdHlwZXMKICAgICAgICAgKiBAcGFyYW0gYWN0aW9uCiAgICAgICAgICogQHBhcmFtIG9iagogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgdGhpcy5fc2V0QWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiwgb2JqKXsKICAgICAgICAgIF9nYUpzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX2dhcSgnX3NldEFjdGlvbicsIGFjdGlvbiwgb2JqKTsKICAgICAgICAgIH0pOwogICAgICAgICAgX2FuYWx5dGljc0pzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHRoYXQuX2VuaGFuY2VkRWNvbW1lcmNlRW5hYmxlZCh0cnVlLCAnc2V0QWN0aW9uJykpIHsKICAgICAgICAgICAgICB2YXIgaW5jbHVkZUZuID0gZnVuY3Rpb24gKHRyYWNrZXJPYmopIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc1Byb3BlcnR5U2V0VG8oJ3RyYWNrRWNvbW1lcmNlJywgdHJhY2tlck9iaiwgdHJ1ZSk7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX2dhTXVsdGlwbGVUcmFja2VycyhpbmNsdWRlRm4sICdlYzpzZXRBY3Rpb24nLCBhY3Rpb24sIG9iaik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIC8qKgogICAgICAgICAqIFRyYWNrIFRyYW5zYWN0aW9uCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNtZWFzdXJpbmctdHJhbnNhY3Rpb25zCiAgICAgICAgICogQHBhcmFtIHRyYW5zYWN0aW9uSWQKICAgICAgICAgKiBAcGFyYW0gYWZmaWxpYXRpb24KICAgICAgICAgKiBAcGFyYW0gcmV2ZW51ZQogICAgICAgICAqIEBwYXJhbSB0YXgKICAgICAgICAgKiBAcGFyYW0gc2hpcHBpbmcKICAgICAgICAgKiBAcGFyYW0gY291cG9uCiAgICAgICAgICogQHBhcmFtIGxpc3QKICAgICAgICAgKiBAcGFyYW0gc3RlcAogICAgICAgICAqIEBwYXJhbSBvcHRpb24KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX3RyYWNrVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb25JZCwgYWZmaWxpYXRpb24sIHJldmVudWUsIHRheCwgc2hpcHBpbmcsIGNvdXBvbiwgbGlzdCwgc3RlcCwgb3B0aW9uKSB7CiAgICAgICAgICB0aGlzLl9zZXRBY3Rpb24oJ3B1cmNoYXNlJywgZ2V0QWN0aW9uRmllbGRPYmplY3QodHJhbnNhY3Rpb25JZCwgYWZmaWxpYXRpb24sIHJldmVudWUsIHRheCwgc2hpcHBpbmcsIGNvdXBvbiwgbGlzdCwgc3RlcCwgb3B0aW9uKSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVHJhY2sgUmVmdW5kCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2VuaGFuY2VkLWVjb21tZXJjZSNtZWFzdXJpbmctcmVmdW5kcwogICAgICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbklkCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICB0aGlzLl90cmFja1JlZnVuZCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbklkKSB7CiAgICAgICAgICB0aGlzLl9zZXRBY3Rpb24oJ3JlZnVuZCcsIGdldEFjdGlvbkZpZWxkT2JqZWN0KHRyYW5zYWN0aW9uSWQpKTsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBUcmFjayBDaGVja291dAogICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjbWVhc3VyaW5nLWNoZWNrb3V0CiAgICAgICAgICogQHBhcmFtIHN0ZXAKICAgICAgICAgKiBAcGFyYW0gb3B0aW9uCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICB0aGlzLl90cmFja0NoZWNrT3V0ID0gZnVuY3Rpb24gKHN0ZXAsIG9wdGlvbikgewogICAgICAgICAgdGhpcy5fc2V0QWN0aW9uKCdjaGVja291dCcsIGdldEFjdGlvbkZpZWxkT2JqZWN0KG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIHN0ZXAsIG9wdGlvbikpOwogICAgICAgIH07CgogICAgICAgIC8qKgogICAgICAgICAqIFRyYWNrIGRldGFpbAogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgdGhpcy5fdHJhY2tEZXRhaWwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLl9zZXRBY3Rpb24oJ2RldGFpbCcpOwogICAgICAgICAgdGhpcy5fcGFnZVZpZXcoKTsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBUcmFjayBhZGQvcmVtb3ZlIHRvIGNhcnQKICAgICAgICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI2FkZC1yZW1vdmUtY2FydAogICAgICAgICAqIEBwYXJhbSBhY3Rpb24KICAgICAgICAgKiBAcGFyYW0gbGlzdAogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgdGhpcy5fdHJhY2tDYXJ0ID0gZnVuY3Rpb24gKGFjdGlvbiwgbGlzdE5hbWUpIHsKICAgICAgICAgIGlmIChbJ2FkZCcsICdyZW1vdmUnXS5pbmRleE9mKGFjdGlvbikgIT09IC0xKSB7CiAgICAgICAgICAgIHRoaXMuX3NldEFjdGlvbihhY3Rpb24sIHsgbGlzdDogbGlzdE5hbWUgfSk7CiAgICAgICAgICAgIHRoaXMuX3RyYWNrRXZlbnQoJ1VYJywgJ2NsaWNrJywgYWN0aW9uICsgKGFjdGlvbiA9PT0gJ2FkZCcgPyAnIHRvIGNhcnQnIDogJyBmcm9tIGNhcnQnKSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVHJhY2sgcHJvbW8gY2xpY2sKICAgICAgICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZW5oYW5jZWQtZWNvbW1lcmNlI21lYXN1cmluZy1wcm9tby1jbGlja3MKICAgICAgICAgKiBAcGFyYW0gcHJvbW90aW9uTmFtZQogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgdGhpcy5fcHJvbW9DbGljayA9IGZ1bmN0aW9uIChwcm9tb3Rpb25OYW1lKSB7CiAgICAgICAgICB0aGlzLl9zZXRBY3Rpb24oJ3Byb21vX2NsaWNrJyk7CiAgICAgICAgICB0aGlzLl90cmFja0V2ZW50KCdJbnRlcm5hbCBQcm9tb3Rpb25zJywgJ2NsaWNrJywgcHJvbW90aW9uTmFtZSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVHJhY2sgcHJvZHVjdCBjbGljawogICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9hbmFseXRpY3Nqcy9lbmhhbmNlZC1lY29tbWVyY2UjbWVhc3VyaW5nLXByb21vLWNsaWNrcwogICAgICAgICAqIEBwYXJhbSBwcm9tb3Rpb25OYW1lCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICB0aGlzLl9wcm9kdWN0Q2xpY2sgPSBmdW5jdGlvbiAobGlzdE5hbWUpIHsKICAgICAgICAgIHRoaXMuX3NldEFjdGlvbignY2xpY2snLCBnZXRBY3Rpb25GaWVsZE9iamVjdChudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBsaXN0TmFtZSwgbnVsbCwgbnVsbCkpOwogICAgICAgICAgdGhpcy5fdHJhY2tFdmVudCgnVVgnLCAnY2xpY2snLCBsaXN0TmFtZSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogU2VuZCBwYWdlIHZpZXcKICAgICAgICAgKiBAcGFyYW0gdHJhY2tlck5hbWUKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX3BhZ2VWaWV3ID0gZnVuY3Rpb24gKHRyYWNrZXJOYW1lKSB7CiAgICAgICAgICBfYW5hbHl0aWNzSnMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfZ2EoZ2VuZXJhdGVDb21tYW5kTmFtZSgnc2VuZCcsIHRyYWNrZXJOYW1lKSwgJ3BhZ2V2aWV3Jyk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBTZW5kIGN1c3RvbSBldmVudHMKICAgICAgICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvdXNlci10aW1pbmdzI2ltcGxlbWVudGF0aW9uCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL3NvY2lhbC1pbnRlcmFjdGlvbnMjaW1wbGVtZW50YXRpb24KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX3NlbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgICAgICAgICBhcmdzLnVuc2hpZnQoJ3NlbmQnKTsKICAgICAgICAgIF9hbmFseXRpY3NKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9nYS5hcHBseSh0aGF0LCBhcmdzKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIC8qKgogICAgICAgICAqIFNldCBjdXN0b20gZGltZW5zaW9ucywgbWV0cmljcyBvciBleHBlcmltZW50CiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2N1c3RvbS1kaW1zLW1ldHMKICAgICAgICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vYW5hbHl0aWNzanMvZmllbGQtcmVmZXJlbmNlI2N1c3RvbXMKICAgICAgICAgKiBAcGFyYW0gbmFtZSAoUmVxdWlyZWQpCiAgICAgICAgICogQHBhcmFtIHZhbHVlIChSZXF1aXJlZCkKICAgICAgICAgKiBAcGFyYW0gdHJhY2tlck5hbWUgKE9wdGlvbmFsKQogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgdGhpcy5fc2V0ID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCB0cmFja2VyTmFtZSkgewogICAgICAgICAgX2FuYWx5dGljc0pzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX2dhKGdlbmVyYXRlQ29tbWFuZE5hbWUoJ3NldCcsIHRyYWNrZXJOYW1lKSwgbmFtZSwgdmFsdWUpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVHJhY2sgdXNlciB0aW1pbmdzCiAgICAgICAgICogQHBhcmFtIHRpbWluZ0NhdGVnb3J5IChSZXF1aXJlZCk6IEEgc3RyaW5nIGZvciBjYXRlZ29yaXppbmcgYWxsIHVzZXIgdGltaW5nIHZhcmlhYmxlcyBpbnRvIGxvZ2ljYWwgZ3JvdXBzKGUuZyBqUXVlcnkpLgogICAgICAgICAqIEBwYXJhbSB0aW1pbmdWYXIgKFJlcXVpcmVkKTogQSBzdHJpbmcgdG8gaWRlbnRpZnkgdGhlIHZhcmlhYmxlIGJlaW5nIHJlY29yZGVkKGUuZy4gSmF2YVNjcmlwdCBMb2FkKS4KICAgICAgICAgKiBAcGFyYW0gdGltaW5nVmFsdWUgKFJlcXVpcmVkKTogVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaW4gZWxhcHNlZCB0aW1lIHRvIHJlcG9ydCB0byBHb29nbGUgQW5hbHl0aWNzKGUuZy4gMjApLgogICAgICAgICAqIEBwYXJhbSB0aW1pbmdMYWJlbCAoT3B0aW9uYWwpOiBBIHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBmbGV4aWJpbGl0eSBpbiB2aXN1YWxpemluZyB1c2VyIHRpbWluZ3MgaW4gdGhlIHJlcG9ydHMoZS5nLiBHb29nbGUgQ0ROKS4KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX3RyYWNrVGltaW5ncyA9IGZ1bmN0aW9uICh0aW1pbmdDYXRlZ29yeSwgdGltaW5nVmFyLCB0aW1pbmdWYWx1ZSwgdGltaW5nTGFiZWwpIHsKICAgICAgICAgIF9hbmFseXRpY3NKcyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9nYU11bHRpcGxlVHJhY2tlcnModW5kZWZpbmVkLCAnc2VuZCcsICd0aW1pbmcnLCB0aW1pbmdDYXRlZ29yeSwgdGltaW5nVmFyLCB0aW1pbmdWYWx1ZSwgdGltaW5nTGFiZWwpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogRXhjZXB0aW9uIHRyYWNraW5nCiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2FuYWx5dGljc2pzL2V4Y2VwdGlvbnMKICAgICAgICAgKiBAcGFyYW0gZGVzY3JpcHRpb24gKE9wdGlvbmFsKTogQSBkZXNjcmlwdGlvbiBvZiB0aGUgZXhjZXB0aW9uLgogICAgICAgICAqIEBwYXJhbSBpc0ZhdGFsIChPcHRpb25hbCk6IHRydWUgaWYgdGhlIGV4Y2VwdGlvbiB3YXMgZmF0YWwsIGZhbHNlIG90aGVyd2lzZS4KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRoaXMuX3RyYWNrRXhjZXB0aW9uID0gZnVuY3Rpb24gKGRlc2NyaXB0aW9uLCBpc0ZhdGFsKSB7CiAgICAgICAgICBfYW5hbHl0aWNzSnMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfZ2FNdWx0aXBsZVRyYWNrZXJzKHVuZGVmaW5lZCwgJ3NlbmQnLCAnZXhjZXB0aW9uJywgeyBleERlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiwgZXhGYXRhbDogISFpc0ZhdGFsfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICAvLyBjcmVhdGVzIHRoZSBHb29nbGUgQW5hbHl0aWNzIHRyYWNrZXIKICAgICAgICBpZiAoIWRlbGF5U2NyaXB0VGFnKSB7CiAgICAgICAgICB0aGlzLl9yZWdpc3RlclNjcmlwdFRhZ3MoKTsKICAgICAgICAgIHRoaXMuX3JlZ2lzdGVyVHJhY2tlcnMoKTsKICAgICAgICB9CgogICAgICAgIC8vIGFjdGl2YXRlcyBwYWdlIHRyYWNraW5nCiAgICAgICAgaWYgKHRyYWNrUm91dGVzKSB7CiAgICAgICAgICAkcm9vdFNjb3BlLiRvbihwYWdlRXZlbnQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gQXBwbHkgJHJvdXRlIGJhc2VkIGZpbHRlcmluZyBpZiBjb25maWd1cmVkCiAgICAgICAgICAgIGlmIChyZWFkRnJvbVJvdXRlKSB7CiAgICAgICAgICAgICAgLy8gQXZvaWQgdHJhY2tpbmcgdW5kZWZpbmVkIHJvdXRlcywgcm91dGVzIHdpdGhvdXQgdGVtcGxhdGUgKGUuZy4gcmVkaXJlY3Qgcm91dGVzKQogICAgICAgICAgICAgIC8vIGFuZCB0aG9zZSBleHBsaWNpdGx5IG1hcmtlZCBhcyAnZG8gbm90IHRyYWNrJwogICAgICAgICAgICAgIGlmICghJHJvdXRlLmN1cnJlbnQgfHwgISRyb3V0ZS5jdXJyZW50LnRlbXBsYXRlVXJsIHx8ICRyb3V0ZS5jdXJyZW50LmRvTm90VHJhY2spIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHRoYXQuX3RyYWNrUGFnZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbG9nOiB0aGF0LmxvZywKICAgICAgICAgIG9mZmxpbmVRdWV1ZTogdGhhdC5vZmZsaW5lUXVldWUsCiAgICAgICAgICBjb25maWd1cmF0aW9uOiB7CiAgICAgICAgICAgIGFjY291bnRzOiBhY2NvdW50cywKICAgICAgICAgICAgdW5pdmVyc2FsQW5hbHl0aWNzOiBhbmFseXRpY3NKUywKICAgICAgICAgICAgY3Jvc3NEb21haW5MaW5rZXI6IGNyb3NzRG9tYWluTGlua2VyLAogICAgICAgICAgICBjcm9zc0xpbmtEb21haW5zOiBjcm9zc0xpbmtEb21haW5zLAogICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3ksCiAgICAgICAgICAgIGRlYnVnTW9kZTogZGVidWdNb2RlLAogICAgICAgICAgICBkZWxheVNjcmlwdFRhZzogZGVsYXlTY3JpcHRUYWcsCiAgICAgICAgICAgIGRpc2FibGVBbmFseXRpY3M6IGRpc2FibGVBbmFseXRpY3MsCiAgICAgICAgICAgIGRpc3BsYXlGZWF0dXJlczogZGlzcGxheUZlYXR1cmVzLAogICAgICAgICAgICBkb21haW5OYW1lOiBkb21haW5OYW1lLAogICAgICAgICAgICBlY29tbWVyY2U6IHRoYXQuX2Vjb21tZXJjZUVuYWJsZWQoKSwKICAgICAgICAgICAgZW5oYW5jZWRFY29tbWVyY2U6IHRoYXQuX2VuaGFuY2VkRWNvbW1lcmNlRW5hYmxlZCgpLAogICAgICAgICAgICBlbmhhbmNlZExpbmtBdHRyaWJ1dGlvbjogZW5oYW5jZWRMaW5rQXR0cmlidXRpb24sCiAgICAgICAgICAgIGV4cGVyaW1lbnRJZDogZXhwZXJpbWVudElkLAogICAgICAgICAgICBoeWJyaWRNb2JpbGVTdXBwb3J0OiBoeWJyaWRNb2JpbGVTdXBwb3J0LAogICAgICAgICAgICBpZ25vcmVGaXJzdFBhZ2VMb2FkOiBpZ25vcmVGaXJzdFBhZ2VMb2FkLAogICAgICAgICAgICBsb2dBbGxDYWxsczogbG9nQWxsQ2FsbHMsCiAgICAgICAgICAgIHBhZ2VFdmVudDogcGFnZUV2ZW50LAogICAgICAgICAgICByZWFkRnJvbVJvdXRlOiByZWFkRnJvbVJvdXRlLAogICAgICAgICAgICByZW1vdmVSZWdFeHA6IHJlbW92ZVJlZ0V4cCwKICAgICAgICAgICAgdGVzdE1vZGU6IHRlc3RNb2RlLAogICAgICAgICAgICB0cmFjZURlYnVnZ2luZ01vZGU6IHRyYWNlRGVidWdnaW5nTW9kZSwKICAgICAgICAgICAgdHJhY2tQcmVmaXg6IHRyYWNrUHJlZml4LAogICAgICAgICAgICB0cmFja1JvdXRlczogdHJhY2tSb3V0ZXMsCiAgICAgICAgICAgIHRyYWNrVXJsUGFyYW1zOiB0cmFja1VybFBhcmFtcwogICAgICAgICAgfSwKICAgICAgICAgIGdldFVybDogZ2V0VXJsLAogICAgICAgICAgLyogREVQUkVDQVRFRCAqLwogICAgICAgICAgc2V0Q29va2llQ29uZmlnOiBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICAgIHRoYXQuX2xvZygnd2FybicsICdERVBSRUNBVElPTiBXQVJOSU5HOiBzZXRDb29raWVDb25maWcgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdHJhY2tlciBmaWVsZHMgaW5zdGVhZC4nKTsKICAgICAgICAgICAgcmV0dXJuIHRoYXQuX3NldENvb2tpZUNvbmZpZy5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIC8qIERFUFJFQ0FURUQgKi8KICAgICAgICAgIGdldENvb2tpZUNvbmZpZzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGF0Ll9sb2coJ3dhcm4nLCAnREVQUkVDQVRJT04gV0FSTklORzogZ2V0Q29va2llQ29uZmlnIG1ldGhvZCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHRyYWNrZXIgZmllbGRzIGluc3RlYWQuJyk7CiAgICAgICAgICAgIHJldHVybiBjb29raWVDb25maWc7CiAgICAgICAgICB9LAogICAgICAgICAgLyogREVQUkVDQVRFRCAqLwogICAgICAgICAgY3JlYXRlQW5hbHl0aWNzU2NyaXB0VGFnOiBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICAgIHRoYXQuX2xvZygnd2FybicsICdERVBSRUNBVElPTiBXQVJOSU5HOiBjcmVhdGVBbmFseXRpY3NTY3JpcHRUYWcgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgcmVnaXN0ZXJTY3JpcHRUYWdzIGFuZCByZWdpc3RlclRyYWNrZXJzIG1ldGhvZHMgaW5zdGVhZC4nKTsKICAgICAgICAgICAgaWYgKGNvbmZpZykgewogICAgICAgICAgICAgIGNvb2tpZUNvbmZpZyA9IGNvbmZpZzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhhdC5fY3JlYXRlQW5hbHl0aWNzU2NyaXB0VGFnKCk7CiAgICAgICAgICB9LAogICAgICAgICAgLyogREVQUkVDQVRFRCAqLwogICAgICAgICAgY3JlYXRlU2NyaXB0VGFnOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoYXQuX2xvZygnd2FybicsICdERVBSRUNBVElPTiBXQVJOSU5HOiBjcmVhdGVTY3JpcHRUYWcgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgcmVnaXN0ZXJTY3JpcHRUYWdzIGFuZCByZWdpc3RlclRyYWNrZXJzIG1ldGhvZHMgaW5zdGVhZC4nKTsKICAgICAgICAgICAgcmV0dXJuIHRoYXQuX2NyZWF0ZVNjcmlwdFRhZygpOwogICAgICAgICAgfSwKICAgICAgICAgIHJlZ2lzdGVyU2NyaXB0VGFnczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhhdC5fcmVnaXN0ZXJTY3JpcHRUYWdzKCk7CiAgICAgICAgICB9LAogICAgICAgICAgcmVnaXN0ZXJUcmFja2VyczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhhdC5fcmVnaXN0ZXJUcmFja2VycygpOwogICAgICAgICAgfSwKICAgICAgICAgIG9mZmxpbmU6IGZ1bmN0aW9uIChtb2RlKSB7CiAgICAgICAgICAgIGlmIChtb2RlID09PSB0cnVlICYmIG9mZmxpbmVNb2RlID09PSBmYWxzZSkgewogICAgICAgICAgICAgIC8vIEdvIHRvIG9mZmxpbmUgbW9kZQogICAgICAgICAgICAgIG9mZmxpbmVNb2RlID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobW9kZSA9PT0gZmFsc2UgJiYgb2ZmbGluZU1vZGUgPT09IHRydWUpIHsKICAgICAgICAgICAgICAvLyBHbyB0byBvbmxpbmUgbW9kZSBhbmQgcHJvY2VzcyB0aGUgb2ZmbGluZSBxdWV1ZQogICAgICAgICAgICAgIG9mZmxpbmVNb2RlID0gZmFsc2U7CiAgICAgICAgICAgICAgd2hpbGUgKHRoYXQub2ZmbGluZVF1ZXVlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHZhciBvYmogPSB0aGF0Lm9mZmxpbmVRdWV1ZS5zaGlmdCgpOwogICAgICAgICAgICAgICAgb2JqWzBdLmFwcGx5KHRoYXQsIG9ialsxXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBvZmZsaW5lTW9kZTsKICAgICAgICAgIH0sCiAgICAgICAgICB0cmFja1BhZ2U6IGZ1bmN0aW9uICh1cmwsIHRpdGxlLCBjdXN0b20pIHsKICAgICAgICAgICAgdGhhdC5fdHJhY2tQYWdlLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LAogICAgICAgICAgdHJhY2tFdmVudDogZnVuY3Rpb24gKGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsLCB2YWx1ZSwgbm9uaW50ZXJhY3Rpb24sIGN1c3RvbSkgewogICAgICAgICAgICB0aGF0Ll90cmFja0V2ZW50LmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LAogICAgICAgICAgYWRkVHJhbnM6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbklkLCBhZmZpbGlhdGlvbiwgdG90YWwsIHRheCwgc2hpcHBpbmcsIGNpdHksIHN0YXRlLCBjb3VudHJ5LCBjdXJyZW5jeSkgewogICAgICAgICAgICB0aGF0Ll9hZGRUcmFucy5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIGFkZEl0ZW06IGZ1bmN0aW9uICh0cmFuc2FjdGlvbklkLCBza3UsIG5hbWUsIGNhdGVnb3J5LCBwcmljZSwgcXVhbnRpdHkpIHsKICAgICAgICAgICAgdGhhdC5fYWRkSXRlbS5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIHRyYWNrVHJhbnM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhhdC5fdHJhY2tUcmFucy5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIGNsZWFyVHJhbnM6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhhdC5fY2xlYXJUcmFucy5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIGFkZFByb2R1Y3Q6IGZ1bmN0aW9uIChwcm9kdWN0SWQsIG5hbWUsIGNhdGVnb3J5LCBicmFuZCwgdmFyaWFudCwgcHJpY2UsIHF1YW50aXR5LCBjb3Vwb24sIHBvc2l0aW9uLCBjdXN0b20pIHsKICAgICAgICAgICAgdGhhdC5fYWRkUHJvZHVjdC5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIGFkZFByb21vOiBmdW5jdGlvbiAocHJvZHVjdElkLCBuYW1lLCBjcmVhdGl2ZSwgcG9zaXRpb24pIHsKICAgICAgICAgICAgdGhhdC5fYWRkUHJvbW8uYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICAgICAgICAgIH0sCiAgICAgICAgICBhZGRJbXByZXNzaW9uOiBmdW5jdGlvbiAocHJvZHVjdElkLCBuYW1lLCBsaXN0LCBicmFuZCwgY2F0ZWdvcnksIHZhcmlhbnQsIHBvc2l0aW9uLCBwcmljZSkgewogICAgICAgICAgICB0aGF0Ll9hZGRJbXByZXNzaW9uLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LAogICAgICAgICAgcHJvZHVjdENsaWNrOiBmdW5jdGlvbiAobGlzdE5hbWUpIHsKICAgICAgICAgICAgdGhhdC5fcHJvZHVjdENsaWNrLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LAogICAgICAgICAgcHJvbW9DbGljayA6IGZ1bmN0aW9uIChwcm9tb3Rpb25OYW1lKSB7CiAgICAgICAgICAgIHRoYXQuX3Byb21vQ2xpY2suYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICAgICAgICAgIH0sCiAgICAgICAgICB0cmFja0RldGFpbDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGF0Ll90cmFja0RldGFpbC5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIHRyYWNrQ2FydDogZnVuY3Rpb24gKGFjdGlvbiwgbGlzdCkgewogICAgICAgICAgICB0aGF0Ll90cmFja0NhcnQuYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICAgICAgICAgIH0sCiAgICAgICAgICB0cmFja0NoZWNrb3V0OiBmdW5jdGlvbiAoc3RlcCwgb3B0aW9uKSB7CiAgICAgICAgICAgIHRoYXQuX3RyYWNrQ2hlY2tPdXQuYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICAgICAgICAgIH0sCiAgICAgICAgICB0cmFja1RpbWluZ3M6IGZ1bmN0aW9uICh0aW1pbmdDYXRlZ29yeSwgdGltaW5nVmFyLCB0aW1pbmdWYWx1ZSwgdGltaW5nTGFiZWwpIHsKICAgICAgICAgICAgdGhhdC5fdHJhY2tUaW1pbmdzLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LAogICAgICAgICAgdHJhY2tUcmFuc2FjdGlvbjogZnVuY3Rpb24gKHRyYW5zYWN0aW9uSWQsIGFmZmlsaWF0aW9uLCByZXZlbnVlLCB0YXgsIHNoaXBwaW5nLCBjb3Vwb24sIGxpc3QsIHN0ZXAsIG9wdGlvbikgewogICAgICAgICAgICB0aGF0Ll90cmFja1RyYW5zYWN0aW9uLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LAogICAgICAgICAgdHJhY2tFeGNlcHRpb246IGZ1bmN0aW9uIChkZXNjcmlwdGlvbiwgaXNGYXRhbCkgewogICAgICAgICAgICB0aGF0Ll90cmFja0V4Y2VwdGlvbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIHNldEFjdGlvbjogZnVuY3Rpb24gKGFjdGlvbiwgb2JqKSB7CiAgICAgICAgICAgIHRoYXQuX3NldEFjdGlvbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfSwKICAgICAgICAgIHBhZ2VWaWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoYXQuX3BhZ2VWaWV3LmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LAogICAgICAgICAgc2VuZDogZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgICB0aGF0Ll9zZW5kLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIHRyYWNrZXJOYW1lKSB7CiAgICAgICAgICAgIHRoYXQuX3NldC5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH1dOwogICAgfSkKCiAgICAuZGlyZWN0aXZlKCdnYVRyYWNrRXZlbnQnLCBbJ0FuYWx5dGljcycsICckcGFyc2UnLCBmdW5jdGlvbiAoQW5hbHl0aWNzLCAkcGFyc2UpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICByZXN0cmljdDogJ0EnLAogICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHsKICAgICAgICAgIHZhciBvcHRpb25zID0gJHBhcnNlKGF0dHJzLmdhVHJhY2tFdmVudCk7CiAgICAgICAgICBlbGVtZW50LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZihhdHRycy5nYVRyYWNrRXZlbnRJZil7CiAgICAgICAgICAgICAgaWYoIXNjb3BlLiRldmFsKGF0dHJzLmdhVHJhY2tFdmVudElmKSl7CiAgICAgICAgICAgICAgICByZXR1cm47IC8vIENhbmNlbCB0aGlzIGV2ZW50IGlmIHdlIGRvbid0IHBhc3MgdGhlIGdhLXRyYWNrLWV2ZW50LWlmIGNvbmRpdGlvbgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgQW5hbHl0aWNzLnRyYWNrRXZlbnQuYXBwbHkoQW5hbHl0aWNzLCBvcHRpb25zKHNjb3BlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgIH1dKTsKICByZXR1cm4gYW5ndWxhci5tb2R1bGUoJ2FuZ3VsYXItZ29vZ2xlLWFuYWx5dGljcycpOwp9KSk7CgovKioKICogQ3JlYXRlZCBieSBrdWJhbnkgb24gMTAvMTIvMjAxNS4KICovCnJlcXVpcmUuY29uZmlnKHsKICAgICJ3YWl0U2Vjb25kcyI6IDYwMCwKICAgIHBhdGhzOiB7CgogICAgICAgICdqcXVlcnknOiAndmVuZG9yL2pxdWVyeS9kaXN0L2pxdWVyeS5taW4nLAogICAgICAgICdqcXVlcnktYmV6JzogJ3ZlbmRvci9qcXVlcnktYmV6L2pxdWVyeS5iZXoubWluJywKICAgICAgICAnanF1ZXJ5LmFuaW1hdGUtY29sb3JzJzogJ3ZlbmRvci9qcXVlcnktY29sb3ItYW5pbWF0aW9uL2pxdWVyeS5hbmltYXRlLWNvbG9ycy1taW4nLAoKCiAgICAgICAgJ2FuZ3VsYXInOiAndmVuZG9yL2FuZ3VsYXIvYW5ndWxhci5taW4nLAogICAgICAgICdhbmd1bGFyLWNvb2tpZSc6ICd2ZW5kb3IvYW5ndWxhci1jb29raWUvYW5ndWxhci1jb29raWUubWluJywKICAgICAgICAndG9hc3Rlcic6ICd2ZW5kb3IvQW5ndWxhckpTLVRvYXN0ZXIvdG9hc3Rlci5taW4nLAogICAgICAgICdhbmd1bGFyLXRyYW5zbGF0ZSc6ICd2ZW5kb3IvYW5ndWxhci10cmFuc2xhdGUvYW5ndWxhci10cmFuc2xhdGUubWluJywKICAgICAgICAidWlSb3V0ZXIiOiAndmVuZG9yL2FuZ3VsYXItdWktcm91dGVyL3JlbGVhc2UvYW5ndWxhci11aS1yb3V0ZXIubWluJywKICAgICAgICAnYW5ndWxhckFuaW1hdGUnOiAndmVuZG9yL2FuZ3VsYXItYW5pbWF0ZS9hbmd1bGFyLWFuaW1hdGUubWluJywKICAgICAgICAnYW5ndWxhckF1dG9jb21wbGV0ZSc6ICd2ZW5kb3IvbmdBdXRvY29tcGxldGUvc3JjL25nQXV0b2NvbXBsZXRlJywKICAgICAgICAndW5kZXJzY29yZScgOiAndmVuZG9yL3VuZGVyc2NvcmUvdW5kZXJzY29yZS1taW4nLAoKICAgICAgICAnYm9vdHN0cmFwJzogJ3ZlbmRvci9ib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAubWluJywKICAgICAgICAndWktYm9vdHN0cmFwJzogJ3ZlbmRvci9hbmd1bGFyLWJvb3RzdHJhcC91aS1ib290c3RyYXAtdHBscy5taW4nLAogICAgICAgICdhbmd1bGFyLWdvb2dsZS1hbmFseXRpY3MnOiAndmVuZG9yL2FuZ3VsYXItZ29vZ2xlLWFuYWx5dGljcy9kaXN0L2FuZ3VsYXItZ29vZ2xlLWFuYWx5dGljcycsCgoKICAgICAgICAnalB1c2hNZW51JzogJ3V0aWxzL2pQdXNoTWVudScsCiAgICAgICAgJ21haW5TY3JpcHQnOiAndXRpbHMvbWFpbicsCiAgICAgICAgJ2FjY29yZGlvbic6ICd1dGlscy9hY2NvcmRpb24nLAogICAgICAgICdzZXJ2ZXInOiAndXRpbHMvc2VydmVyJywKICAgICAgICAnbm91aXNsaWRlcic6ICd1dGlscy9ub1VpU2xpZGVyLjguMi4xL25vdWlzbGlkZXInLAogICAgICAgICd3cm9uZ0RpcmVjdGlvbic6ICd1dGlscy93cm9uZ0RpcmVjdGlvbicsCiAgICAgICAgJ1VzZXJDb29raWUnOiAndXRpbHMvTW9kZWxzL1VzZXJDb29raWUnLAogICAgICAgICdzbGlkZXInOiAndXRpbHMvc2xpZGVyJywKICAgICAgICAnanF1ZXJ5LXNvYXAnOiAndXRpbHMvanF1ZXJ5LnNvYXAnLAoKICAgICAgICAnZW5nbGlzaExhbmd1YWdlJzogJ2xhbmd1YWdlcy9lbmdsaXNoJywKCgoKICAgIH0sCiAgICBzaGltOiB7CgoKICAgICAgICAnYW5ndWxhcic6IHsKICAgICAgICAgICAgJ2V4cG9ydHMnOiAnYW5ndWxhcicKICAgICAgICB9LAogICAgICAgICdhcHAnOiB7CiAgICAgICAgICAgIGRlcHM6IFsnYW5ndWxhciddCiAgICAgICAgfSwKICAgICAgICAnYW5ndWxhci1jb29raWUnOiB7CiAgICAgICAgICAgIGRlcHM6IFsnYW5ndWxhciddCiAgICAgICAgfSwKICAgICAgICAndG9hc3Rlcic6IHsKICAgICAgICAgICAgZGVwczogWydhbmd1bGFyJywgJ2FuZ3VsYXJBbmltYXRlJ10KICAgICAgICB9LAogICAgICAgICdhbmd1bGFyLXRyYW5zbGF0ZSc6IHsKICAgICAgICAgICAgZGVwczogWydhbmd1bGFyJ10KICAgICAgICB9LAogICAgICAgICdub3Vpc2xpZGVyJzoge30sCiAgICAgICAgJ2VuZ2xpc2hMYW5ndWFnZSc6IHt9LAogICAgICAgICdhbmd1bGFyQXV0b2NvbXBsZXRlJzogewogICAgICAgICAgICBkZXBzOiBbJ2FuZ3VsYXInXQogICAgICAgIH0sCiAgICAgICAgJ3VpLWJvb3RzdHJhcCc6IFsnYW5ndWxhciddLAogICAgICAgICdhbmd1bGFyQW5pbWF0ZSc6IFsnYW5ndWxhciddLAogICAgICAgICdqcXVlcnktYmV6JzogewogICAgICAgICAgICBkZXBzOiBbJ2pxdWVyeSddCiAgICAgICAgfSwKICAgICAgICAnanF1ZXJ5LXNvYXAnOiB7CiAgICAgICAgICAgICdkZXBzJzogWydqcXVlcnknXQogICAgICAgIH0sCiAgICAgICAgJ2pxdWVyeS5hbmltYXRlLWNvbG9ycyc6IHsKICAgICAgICAgICAgZGVwczogWydqcXVlcnknXQogICAgICAgIH0sCiAgICAgICAgJ2Jvb3RzdHJhcCc6IHsKICAgICAgICAgICAgZGVwczogWydqcXVlcnknXQogICAgICAgIH0sCiAgICAgICAgJ2pQdXNoTWVudSc6IHsKICAgICAgICAgICAgZGVwczogWydqcXVlcnknXQogICAgICAgIH0sCiAgICAgICAgJ21haW5TY3JpcHQnOiB7CiAgICAgICAgICAgIGRlcHM6IFsnanF1ZXJ5J10KICAgICAgICB9LAogICAgICAgICdhY2NvcmRpb24nOiB7CiAgICAgICAgICAgIGRlcHM6IFsnanF1ZXJ5J10KICAgICAgICB9LAogICAgICAgICdzbGlkZXInOiB7CiAgICAgICAgICAgIGRlcHM6IFsnanF1ZXJ5J10KICAgICAgICB9LAogICAgICAgICd3cm9uZ0RpcmVjdGlvbic6IHsKICAgICAgICAgICAgZGVwczogWydqcXVlcnknXQogICAgICAgIH0sCiAgICAgICAgJ3VpUm91dGVyJzogewogICAgICAgICAgICBkZXBzOiBbJ2FuZ3VsYXInXQogICAgICAgIH0KICAgIH0KfSk7Cgp3aW5kb3cubmFtZSA9ICJOR19ERUZFUl9CT09UU1RSQVAhIjsKCnJlcXVpcmUoWydhbmd1bGFyJywgJ2FwcCcsICdhbmd1bGFyLXRyYW5zbGF0ZScsICdib290c3RyYXAnLCAnZW5nbGlzaExhbmd1YWdlJywKICAgICAgICAnanF1ZXJ5JywgJ2pxdWVyeS1iZXonLCAnanF1ZXJ5LmFuaW1hdGUtY29sb3JzJywgJ2pQdXNoTWVudScsICdtYWluU2NyaXB0JywgJ3NlcnZlcicsCiAgICAgICAgJ25vdWlzbGlkZXInLCAnYWNjb3JkaW9uJywgJ3dyb25nRGlyZWN0aW9uJywgJ1VzZXJDb29raWUnLAogICAgICAgICdzbGlkZXInLCAndWlSb3V0ZXInLCAnYW5ndWxhci1jb29raWUnLCAndG9hc3RlcicsICdhbmd1bGFyQXV0b2NvbXBsZXRlJywKICAgICAgICAnYW5ndWxhckFuaW1hdGUnLCAndWktYm9vdHN0cmFwJywgJ2pxdWVyeS1zb2FwJywgJ3VuZGVyc2NvcmUnLCAnYW5ndWxhci1nb29nbGUtYW5hbHl0aWNzJywKICAgIF0sIGZ1bmN0aW9uIChhbmd1bGFyLCBhcHApIHsKICAgICAgICAgICAgYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsnYW9zJ10pOwogICAgICAgICAgICBhbmd1bGFyLnJlc3VtZUJvb3RzdHJhcCgpOwogICAgfQopOwoKCgoKZGVmaW5lKCJtYWluIiwgZnVuY3Rpb24oKXt9KTsKCg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="356001953" offset="0" length="436" />
        <PacketInfo time="356001968" offset="436" length="268666" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="441" hostname="www.advantageonlineshopping.com" path="https://www.advantageonlineshopping.com/services.properties" url="https://www.advantageonlineshopping.com/services.properties" ip="54.227.55.203" port="443" connectionId="86" origin="ExtraRes" frame="1" startDateTime="2024-03-14T16:56:31.238+03:00" startTime="356012468" endTime="356012468">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="User-Agent" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly93d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>X2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMDsgX2dhPUdBMS4xLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW1wdHk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>d3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS9zZXJ2aWNlcy5wcm9wZXJ0aWVzIEhUVFAvMS4xDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0OyBydjoxMjEuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xMjEuMA0KQWNjZXB0OiAqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KUmVmZXJlcjogaHR0cHM6Ly93d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tLw0KQ29va2llOiBfZ2FfVEJQWUVEOFdTVz1HUzEuMS4xNzEwNDI0MjMxLjUuMC4xNzEwNDI0MjMxLjAuMC4wOyBfZ2E9R0ExLjEuMTA0Mjg5MTkxMy4xNzEwMzI0MjUxOyBfZ2lkPUdBMS4yLjU0NzUzMzIzMy4xNzEwMzI0Mjg3OyBfZ2FfNTZFTU5SRjJTMj1HUzEuMi4xNzEwNDEyNjE1LjQuMS4xNzEwNDE0NTE1LjU3LjAuMA0KU2VjLUZldGNoLURlc3Q6IGVtcHR5DQpTZWMtRmV0Y2gtTW9kZTogY29ycw0KU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luDQpIb3N0OiB3d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="_ga_TBPYED8WSW" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjEuMTA0Mjg5MTkxMy4xNzEwMzI0MjUx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_gid" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga_56EMNRF2S2" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjIuMTcxMDQxMjYxNS40LjEuMTcxMDQxNDUxNS41Ny4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>1010</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmdpbngvMS4xOC4wIChVYnVudHUp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTAxMA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMTAxMC0xNzA5NTU0NTEwNzM4Ig==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAwNCBNYXIgMjAyNCAxMjoxNToxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0w</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1MDo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KU2VydmVyOiBuZ2lueC8xLjE4LjAgKFVidW50dSkNCkRhdGU6IFRodSwgMTQgTWFyIDIwMjQgMTM6NTA6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMTAxMA0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6IFcvIjEwMTAtMTcwOTU1NDUxMDczOCINCkxhc3QtTW9kaWZpZWQ6IE1vbiwgMDQgTWFyIDIwMjQgMTI6MTU6MTAgR01UDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTANCkV4cGlyZXM6IFRodSwgMTQgTWFyIDIwMjQgMTM6NTA6NTYgR01UDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>YWNjb3VudC5zb2Fwc2VydmljZS51cmwuaG9zdD0xNzIuMzEuNDMuNzMKYWNjb3VudC5zb2Fwc2VydmljZS51cmwucG9ydD04MDgyCmFjY291bnQuc29hcHNlcnZpY2UudXJsLnN1ZmZpeD0vYWNjb3VudHNlcnZpY2Uvd3MKYWNjb3VudC5zb2Fwc2VydmljZS51cmwud3NkbD0vYWNjb3VudHNlcnZpY2Uud3NkbAoKY2F0YWxvZy5zZXJ2aWNlLnVybC5ob3N0PTE3Mi4zMS40NC44NApjYXRhbG9nLnNlcnZpY2UudXJsLnBvcnQ9ODA4MApjYXRhbG9nLnNlcnZpY2UudXJsLnN1ZmZpeD1jYXRhbG9nL2FwaS92MQoKb3JkZXIuc2VydmljZS51cmwuaG9zdD0xNzIuMzEuNDQuODQKb3JkZXIuc2VydmljZS51cmwucG9ydD04MDgwCm9yZGVyLnNlcnZpY2UudXJsLnN1ZmZpeD1vcmRlci9hcGkvdjEKCm1hc3RlcmNyZWRpdC5zZXJ2aWNlLnVybC5ob3N0PTE3Mi4zMS40NC44NAptYXN0ZXJjcmVkaXQuc2VydmljZS51cmwucG9ydD04MDgwCm1hc3RlcmNyZWRpdC5zZXJ2aWNlLnVybC5zdWZmaXg9TWFzdGVyQ3JlZGl0L2FwaS92MQoKc2FmZXBheS5zZXJ2aWNlLnVybC5ob3N0PTE3Mi4zMS40NC44NApzYWZlcGF5LnNlcnZpY2UudXJsLnBvcnQ9ODA4MApzYWZlcGF5LnNlcnZpY2UudXJsLnN1ZmZpeD1TYWZlUGF5L2FwaS92MQoKc2hpcGV4LnNvYXBzZXJ2aWNlLnVybC5ob3N0PTE3Mi4zMS40NC44NApzaGlwZXguc29hcHNlcnZpY2UudXJsLnBvcnQ9ODA4MApzaGlwZXguc29hcHNlcnZpY2UudXJsLnN1ZmZpeD1TaGlwRXgKc2hpcGV4LnNvYXBzZXJ2aWNlLnVybC53c2RsPS9zaGlwZXgud3NkbAoKc2luZ2xlLm1hY2hpbmUuZGVwbG95bWVudD1mYWxzZQpyZXZlcnNlLnByb3h5PXRydWUKYW9zLmRlbW8udmVyc2lvbj0yLjEgZm9yIHByb2R1Y3Rpb24KCiNleGFtcGxlIG9yZGVyLmhpYmVybmF0ZS5kYi51cmw9amRiYzpwb3N0Z3Jlc3FsOi8vbG9jYWxob3N0OjU0MzIvYWR2LXJvb3Q/bG9nbGV2ZWw9MAojZXhhbXBsZSBvcmRlci5zZXJ2aWNlLnVybD0xNzIuMzEuNDQuODQ6ODA4MC9vcmRlcgo=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="356012468" offset="0" length="368" />
        <PacketInfo time="356012484" offset="368" length="1010" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="5944" hostname="www.advantageonlineshopping.com" path="https://www.advantageonlineshopping.com/css/images/User.jpg" url="https://www.advantageonlineshopping.com/css/images/User.jpg" ip="54.227.55.203" port="443" connectionId="1406" origin="ExtraRes" frame="1" startDateTime="2024-03-14T16:56:36.015+03:00" startTime="356225468" endTime="356225484">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="User-Agent" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvYXZpZixpbWFnZS93ZWJwLCovKg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly93d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>X2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMDsgX2dhPUdBMS4yLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQyNDI4MC41LjEuMTcxMDQyNDQ2Ny4xMy4wLjA7IF9nYXQ9MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>d3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS9jc3MvaW1hZ2VzL1VzZXIuanBnIEhUVFAvMS4xDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0OyBydjoxMjEuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xMjEuMA0KQWNjZXB0OiBpbWFnZS9hdmlmLGltYWdlL3dlYnAsKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNClJlZmVyZXI6IGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS8NCkNvb2tpZTogX2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMDsgX2dhPUdBMS4yLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQyNDI4MC41LjEuMTcxMDQyNDQ2Ny4xMy4wLjA7IF9nYXQ9MQ0KU2VjLUZldGNoLURlc3Q6IGltYWdlDQpTZWMtRmV0Y2gtTW9kZTogbm8tY29ycw0KU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luDQpIb3N0OiB3d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="_ga_TBPYED8WSW" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuMTA0Mjg5MTkxMy4xNzEwMzI0MjUx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_gid" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga_56EMNRF2S2" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjIuMTcxMDQyNDI4MC41LjEuMTcxMDQyNDQ2Ny4xMy4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_gat" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>4893</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmdpbngvMS4xOC4wIChVYnVudHUp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1NDoyNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvanBlZw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NDg5Mw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iNDg5My0xNzA3OTAyNzUyMDAwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxNCBGZWIgMjAyNCAwOToyNTo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT04NjQwMDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U3VuLCAyNCBNYXIgMjAyNCAxMzo1NDoyNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KU2VydmVyOiBuZ2lueC8xLjE4LjAgKFVidW50dSkNCkRhdGU6IFRodSwgMTQgTWFyIDIwMjQgMTM6NTQ6MjYgR01UDQpDb250ZW50LVR5cGU6IGltYWdlL2pwZWcNCkNvbnRlbnQtTGVuZ3RoOiA0ODkzDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogVy8iNDg5My0xNzA3OTAyNzUyMDAwIg0KTGFzdC1Nb2RpZmllZDogV2VkLCAxNCBGZWIgMjAyNCAwOToyNTo1MiBHTVQNCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9ODY0MDAwDQpFeHBpcmVzOiBTdW4sIDI0IE1hciAyMDI0IDEzOjU0OjI2IEdNVA0KU3RyaWN0LVRyYW5zcG9ydC1TZWN1cml0eTogbWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QN/aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzA2NyA3OS4xNTc3NDcsIDIwMTUvMDMvMzAtMjM6NDA6NDIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NTg2NjA4NDctNDVhNi1hMDQ0LTg1NGYtOWY2ZGI1MmI5ZDBkIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjdFRDI5RDAwNzcyMDExRTVCRDUxQkNGNkRBMzVGMDQyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdFRDI5Q0ZGNzcyMDExRTVCRDUxQkNGNkRBMzVGMDQyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU4NjYwODQ3LTQ1YTYtYTA0NC04NTRmLTlmNmRiNTJiOWQwZCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1ODY2MDg0Ny00NWE2LWEwNDQtODU0Zi05ZjZkYjUyYjlkMGQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////7gAOQWRvYmUAZMAAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAgICAgICAgICAgIDAwMDAwMDAwMDAQEBAQEBAQIBAQICAgECAgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwP/wAARCAAYABgDAREAAhEBAxEB/8QAZQABAQEBAAAAAAAAAAAAAAAACQYICgEBAAAAAAAAAAAAAAAAAAAAABAAAAQEBAYCAgMAAAAAAAAAAwQFBgECBwgREhQXABMVFhgJJRkhYSIjJBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A7c7tK8FbXrZK73DG0qC9CjtLXi/CaFMJOAGuKyEjGTKIijmA4TCFSyssQALijQhGIIYkZ8I5cOAFbxVv/wDE7z1+xe4rzG2p8jtmOroPhfpO2NwdjNiejaHSdA+F63r+fq/9WXH+XANTaZXgrdBbLQi4YoldChWGlrOfhtClEnHDQ1ZdRixlbRQTAkJZzRZJWIjlwhowhEUMOE+EM2HAR9zDptsqFOUsSrQ7wAHbeTTmrbObFPyBVWNONfaiUzFEw+V0qeTkpSTGnBARxJxyZ9TEKAingZQy0Rh5OXwBWeMfuR2C+vvcG1XY/tHZbzT1j83t8fendt9P2l0vSN3uyvjNb1DSYf2avV/IcAqFrrttqZQCnY/Q53gm3JZWyqVU5eDCPk1gk5WyhnmUnGmQrnzKokpZJ0SONEClMDqSbMaKzHJxJBZ5BsQ4BhK8FFrVbd7FKV+wdnW41SuopMPaS5LUajMqhSYkuusFNFGaq4VVkOobWYaqqI4zqAX5BBEozKTHDnBBDmiMJJCIMgwUX3AEsuP1le4PPlx5XgqvZs2GPLz96cnNj+Mc+X94fngJ2zxDrVcX7E6tewR3W41StUpJNaY1rWWAya5JyQ1au1QVwKpjVPV6ju1gpCqsiteVuFgw0grA6OIIKXFl5Ik8IDSAh//Z</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="356225484" offset="0" length="399" />
        <PacketInfo time="356225484" offset="399" length="4893" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="5965" hostname="www.advantageonlineshopping.com" path="https://www.advantageonlineshopping.com/css/images/Shipex.png" url="https://www.advantageonlineshopping.com/css/images/Shipex.png" ip="54.227.55.203" port="443" connectionId="1411" origin="ExtraRes" frame="1" startDateTime="2024-03-14T16:56:36.055+03:00" startTime="356228125" endTime="356228187">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="User-Agent" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvYXZpZixpbWFnZS93ZWJwLCovKg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly93d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>X2dhX1RCUFlFRDhXU1c9R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMDsgX2dhPUdBMS4yLjEwNDI4OTE5MTMuMTcxMDMyNDI1MTsgX2dpZD1HQTEuMi41NDc1MzMyMzMuMTcxMDMyNDI4NzsgX2dhXzU2RU1OUkYyUzI9R1MxLjIuMTcxMDQyNDI4MC41LjEuMTcxMDQyNDQ2Ny4xMy4wLjA7IF9nYXQ9MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>d3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vd3d3LmFkdmFudGFnZW9ubGluZXNob3BwaW5nLmNvbS9jc3MvaW1hZ2VzL1NoaXBleC5wbmcgSFRUUC8xLjENClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQ7IHJ2OjEyMS4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzEyMS4wDQpBY2NlcHQ6IGltYWdlL2F2aWYsaW1hZ2Uvd2VicCwqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KUmVmZXJlcjogaHR0cHM6Ly93d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tLw0KQ29va2llOiBfZ2FfVEJQWUVEOFdTVz1HUzEuMS4xNzEwNDI0MjMxLjUuMC4xNzEwNDI0MjMxLjAuMC4wOyBfZ2E9R0ExLjIuMTA0Mjg5MTkxMy4xNzEwMzI0MjUxOyBfZ2lkPUdBMS4yLjU0NzUzMzIzMy4xNzEwMzI0Mjg3OyBfZ2FfNTZFTU5SRjJTMj1HUzEuMi4xNzEwNDI0MjgwLjUuMS4xNzEwNDI0NDY3LjEzLjAuMDsgX2dhdD0xDQpTZWMtRmV0Y2gtRGVzdDogaW1hZ2UNClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW4NCkhvc3Q6IHd3dy5hZHZhbnRhZ2VvbmxpbmVzaG9wcGluZy5jb20NCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="_ga_TBPYED8WSW" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjEuMTcxMDQyNDIzMS41LjAuMTcxMDQyNDIzMS4wLjAuMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuMTA0Mjg5MTkxMy4xNzEwMzI0MjUx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_gid" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0ExLjIuNTQ3NTMzMjMzLjE3MTAzMjQyODc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_ga_56EMNRF2S2" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R1MxLjIuMTcxMDQyNDI4MC41LjEuMTcxMDQyNDQ2Ny4xMy4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_gat" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>2190</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmdpbngvMS4xOC4wIChVYnVudHUp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNCBNYXIgMjAyNCAxMzo1NDoyNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvcG5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MjE5MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMjE5MC0xNzA3OTAyNzUyMDAwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxNCBGZWIgMjAyNCAwOToyNTo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT04NjQwMDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U3VuLCAyNCBNYXIgMjAyNCAxMzo1NDoyNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KU2VydmVyOiBuZ2lueC8xLjE4LjAgKFVidW50dSkNCkRhdGU6IFRodSwgMTQgTWFyIDIwMjQgMTM6NTQ6MjYgR01UDQpDb250ZW50LVR5cGU6IGltYWdlL3BuZw0KQ29udGVudC1MZW5ndGg6IDIxOTANCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiBXLyIyMTkwLTE3MDc5MDI3NTIwMDAiDQpMYXN0LU1vZGlmaWVkOiBXZWQsIDE0IEZlYiAyMDI0IDA5OjI1OjUyIEdNVA0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT04NjQwMDANCkV4cGlyZXM6IFN1biwgMjQgTWFyIDIwMjQgMTM6NTQ6MjYgR01UDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>iVBORw0KGgoAAAANSUhEUgAAAD4AAAAUCAYAAADV9o4UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNkUzNzI5Q0FENjYxMUU1OUY0Q0ExRUEwQjNFRjNDQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNkUzNzI5REFENjYxMUU1OUY0Q0ExRUEwQjNFRjNDQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE2RTM3MjlBQUQ2NjExRTU5RjRDQTFFQTBCM0VGM0NBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE2RTM3MjlCQUQ2NjExRTU5RjRDQTFFQTBCM0VGM0NBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ecgGPgAABQNJREFUeNq8mGtoHFUUx+/uZpPYbGiaxGA08f1EW5GoKCpIjIrFD/aTghHjq9Qq1RgFxeKHFrUKvhUjWHwUbeuDEhEJiuDbVq2KpeKj2sa0xtjGWENqmuxu/N/wGzleZzcxjT3wY3Zm7sy959zzmk10dHQ4IzWiRZwqZoshsVm8LXoYc7w4S+TFdvGuGHX/lhPEAyIr9ogV4ktXQMbHx11DQ4PL5XLRpadFm9jrb4fDRUY8JG5x05AS8/sSsVJUx4zLsfCl4kLxMNe/EBeJ/phn6rkXyQvFFE8kEq63t3dC+Xze29RVipSYVWT9B7hpSpKj3+V1gdJD7KpjAXeKB8UfwZhsgXfnY4xXVLzyPT09E8ci77VSPl3F/Y6XspuRfCs6xQ/s2rXiNO61i9V2rbhinPgwWIUCf4qvpqK4J5VKTbi8d38jH4itrNnfqBXv7IvidaLJXHtCPGbO18HPHOeZe7/jDfPFBezqx+IVFvmaGBPDxPw5GDqL65/Msw140gbRNTAwMF5TU+Oy2az1lpvE526GpCQmhnysbxQfcb6TWB3i3I6fQ4K5KnjHo+z2y5z/gmLHBjngBnF4sONr9LNVcT7oz9l1H5JnkCTTxtsSrGcvxvHjfjOJOJKjRBUGT0eK7+JClOiaxUm4/Gas3G0Un21eeKY4O8agS8QAcZ7EK3K4aIIx95kcY939spGRka2jo6OZ0tLSSHH/zDJxq1lnCs86kjUMMW63uAbvcVSGpeSDPN61MLLQM8H8dbjlIvGkWC+e5+GdZlyKsDhaXI9bO46nm0Toy91IkLCSVIWLWWivVzKZTPr4vlGKNwcJ0ZfaI0QjHMw8i1G6EaVOZK2NrKGTHT+Ea0+JtZH1bqM0tMbsXopJruD4lrn3DZl+m1+4WE7SGed9icAtrXgjXCq+N+fP4d6VUrwySG5xUsW855L86rnuQ+pDdrjMjO8kvPKR4rtR7HGs34J1QzlPnGLO+3k2Ui4bNBnFxCfGLYERcxg6KmkOQ3gFnhWfkRz9uyuMO/8oFrAplVxrDOZ7iVDJhw2M40XRyw4jhpdwjKQ6KGdJ8/u/SJ75x8z5WKR4TKe2VrxZ5H0bSMLddHVWusTVVJe/s/qh4hji4SfKjCMzenyW3YGbz6SkjNIOlyy3Law5JgoYJJQteFKo+A6rdKT462Iu578Sc58EPXe5m3mpJrF1o/QCq7B3e7l5ypSz81lHmenaNlF6vRwk3ifBhbKYBNtuFV9peu863Gk1Vqoi4VWbBPQeJc8VcEnryvki8e538VXmqrN9vTJ7T1lZ2S4pPs/U7Xa7cORFcTnr66K6ONM7zDGGupkKtjxS/BG+xlpNnV5UQLG76OCajXvaGK/gdynuljEfEyUx/bsfd6VtYHyrmk6nb1cNb9FuN03iNdt49ypC1SbKNpLx3eb6Mpqd+5OmyHdQV+OS0HqMca/ZARfETZK6neU4TMbPYulckEzvEZ+GsaiO7Q4pvkaKp6dQzurx2PlBpWkj2a2gGljxjdPCRPA93kCxr2c3/eL7SBr9ZrLjUGSADi9qNJp4LkeSqeR8EFe7zszVRDj544EY6Tv1519nMhlXW1s7V78bSYCJmJBKM0ct841i/L7gg2gW/x8k2UTvhYMlMV9U2yexch/EycZJ6rYL+nzfDr9RYPwm2FfZEzRd//ge3x9SUeRPkP0u+1PxYbMDU/pj4v+UvwQYAKE/grqkqUp1AAAAAElFTkSuQmCC</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="356228171" offset="0" length="398" />
        <PacketInfo time="356228218" offset="398" length="2190" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>